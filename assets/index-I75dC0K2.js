(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function a_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Tp={exports:{}},ic={};var sx;function Bw(){if(sx)return ic;sx=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var f=null;if(c!==void 0&&(f=""+c),o.key!==void 0&&(f=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:i,type:s,key:f,ref:o!==void 0?o:null,props:c}}return ic.Fragment=e,ic.jsx=n,ic.jsxs=n,ic}var rx;function Hw(){return rx||(rx=1,Tp.exports=Bw()),Tp.exports}var u=Hw(),Np={exports:{}},Ye={};var ox;function qw(){if(ox)return Ye;ox=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function V(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,O={};function X(M,ee,de){this.props=M,this.context=ee,this.refs=O,this.updater=de||U}X.prototype.isReactComponent={},X.prototype.setState=function(M,ee){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ee,"setState")},X.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function Q(){}Q.prototype=X.prototype;function te(M,ee,de){this.props=M,this.context=ee,this.refs=O,this.updater=de||U}var ie=te.prototype=new Q;ie.constructor=te,L(ie,X.prototype),ie.isPureReactComponent=!0;var pe=Array.isArray;function fe(){}var I={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function j(M,ee,de){var be=de.ref;return{$$typeof:i,type:M,key:ee,ref:be!==void 0?be:null,props:de}}function P(M,ee){return j(M.type,ee,M.props)}function k(M){return typeof M=="object"&&M!==null&&M.$$typeof===i}function C(M){var ee={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(de){return ee[de]})}var R=/\/+/g;function Se(M,ee){return typeof M=="object"&&M!==null&&M.key!=null?C(""+M.key):ee.toString(36)}function ae(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(fe,fe):(M.status="pending",M.then(function(ee){M.status==="pending"&&(M.status="fulfilled",M.value=ee)},function(ee){M.status==="pending"&&(M.status="rejected",M.reason=ee)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function H(M,ee,de,be,me){var Ne=typeof M;(Ne==="undefined"||Ne==="boolean")&&(M=null);var Te=!1;if(M===null)Te=!0;else switch(Ne){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(M.$$typeof){case i:case e:Te=!0;break;case _:return Te=M._init,H(Te(M._payload),ee,de,be,me)}}if(Te)return me=me(M),Te=be===""?"."+Se(M,0):be,pe(me)?(de="",Te!=null&&(de=Te.replace(R,"$&/")+"/"),H(me,ee,de,"",function(Wt){return Wt})):me!=null&&(k(me)&&(me=P(me,de+(me.key==null||M&&M.key===me.key?"":(""+me.key).replace(R,"$&/")+"/")+Te)),ee.push(me)),1;Te=0;var ft=be===""?".":be+":";if(pe(M))for(var tt=0;tt<M.length;tt++)be=M[tt],Ne=ft+Se(be,tt),Te+=H(be,ee,de,Ne,me);else if(tt=V(M),typeof tt=="function")for(M=tt.call(M),tt=0;!(be=M.next()).done;)be=be.value,Ne=ft+Se(be,tt++),Te+=H(be,ee,de,Ne,me);else if(Ne==="object"){if(typeof M.then=="function")return H(ae(M),ee,de,be,me);throw ee=String(M),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Te}function re(M,ee,de){if(M==null)return M;var be=[],me=0;return H(M,be,"","",function(Ne){return ee.call(de,Ne,me++)}),be}function ye(M){if(M._status===-1){var ee=M._result;ee=ee(),ee.then(function(de){(M._status===0||M._status===-1)&&(M._status=1,M._result=de)},function(de){(M._status===0||M._status===-1)&&(M._status=2,M._result=de)}),M._status===-1&&(M._status=0,M._result=ee)}if(M._status===1)return M._result.default;throw M._result}var qe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Je={map:re,forEach:function(M,ee,de){re(M,function(){ee.apply(this,arguments)},de)},count:function(M){var ee=0;return re(M,function(){ee++}),ee},toArray:function(M){return re(M,function(ee){return ee})||[]},only:function(M){if(!k(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ye.Activity=E,Ye.Children=Je,Ye.Component=X,Ye.Fragment=n,Ye.Profiler=o,Ye.PureComponent=te,Ye.StrictMode=s,Ye.Suspense=g,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(M){return I.H.useMemoCache(M)}},Ye.cache=function(M){return function(){return M.apply(null,arguments)}},Ye.cacheSignal=function(){return null},Ye.cloneElement=function(M,ee,de){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var be=L({},M.props),me=M.key;if(ee!=null)for(Ne in ee.key!==void 0&&(me=""+ee.key),ee)!N.call(ee,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&ee.ref===void 0||(be[Ne]=ee[Ne]);var Ne=arguments.length-2;if(Ne===1)be.children=de;else if(1<Ne){for(var Te=Array(Ne),ft=0;ft<Ne;ft++)Te[ft]=arguments[ft+2];be.children=Te}return j(M.type,me,be)},Ye.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},Ye.createElement=function(M,ee,de){var be,me={},Ne=null;if(ee!=null)for(be in ee.key!==void 0&&(Ne=""+ee.key),ee)N.call(ee,be)&&be!=="key"&&be!=="__self"&&be!=="__source"&&(me[be]=ee[be]);var Te=arguments.length-2;if(Te===1)me.children=de;else if(1<Te){for(var ft=Array(Te),tt=0;tt<Te;tt++)ft[tt]=arguments[tt+2];me.children=ft}if(M&&M.defaultProps)for(be in Te=M.defaultProps,Te)me[be]===void 0&&(me[be]=Te[be]);return j(M,Ne,me)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(M){return{$$typeof:m,render:M}},Ye.isValidElement=k,Ye.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:ye}},Ye.memo=function(M,ee){return{$$typeof:y,type:M,compare:ee===void 0?null:ee}},Ye.startTransition=function(M){var ee=I.T,de={};I.T=de;try{var be=M(),me=I.S;me!==null&&me(de,be),typeof be=="object"&&be!==null&&typeof be.then=="function"&&be.then(fe,qe)}catch(Ne){qe(Ne)}finally{ee!==null&&de.types!==null&&(ee.types=de.types),I.T=ee}},Ye.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ye.use=function(M){return I.H.use(M)},Ye.useActionState=function(M,ee,de){return I.H.useActionState(M,ee,de)},Ye.useCallback=function(M,ee){return I.H.useCallback(M,ee)},Ye.useContext=function(M){return I.H.useContext(M)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(M,ee){return I.H.useDeferredValue(M,ee)},Ye.useEffect=function(M,ee){return I.H.useEffect(M,ee)},Ye.useEffectEvent=function(M){return I.H.useEffectEvent(M)},Ye.useId=function(){return I.H.useId()},Ye.useImperativeHandle=function(M,ee,de){return I.H.useImperativeHandle(M,ee,de)},Ye.useInsertionEffect=function(M,ee){return I.H.useInsertionEffect(M,ee)},Ye.useLayoutEffect=function(M,ee){return I.H.useLayoutEffect(M,ee)},Ye.useMemo=function(M,ee){return I.H.useMemo(M,ee)},Ye.useOptimistic=function(M,ee){return I.H.useOptimistic(M,ee)},Ye.useReducer=function(M,ee,de){return I.H.useReducer(M,ee,de)},Ye.useRef=function(M){return I.H.useRef(M)},Ye.useState=function(M){return I.H.useState(M)},Ye.useSyncExternalStore=function(M,ee,de){return I.H.useSyncExternalStore(M,ee,de)},Ye.useTransition=function(){return I.H.useTransition()},Ye.version="19.2.4",Ye}var lx;function Sm(){return lx||(lx=1,Np.exports=qw()),Np.exports}var w=Sm();const Fw=a_(w);var Rp={exports:{}},sc={},Cp={exports:{}},Ip={};var cx;function Gw(){return cx||(cx=1,(function(i){function e(H,re){var ye=H.length;H.push(re);e:for(;0<ye;){var qe=ye-1>>>1,Je=H[qe];if(0<o(Je,re))H[qe]=re,H[ye]=Je,ye=qe;else break e}}function n(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var re=H[0],ye=H.pop();if(ye!==re){H[0]=ye;e:for(var qe=0,Je=H.length,M=Je>>>1;qe<M;){var ee=2*(qe+1)-1,de=H[ee],be=ee+1,me=H[be];if(0>o(de,ye))be<Je&&0>o(me,de)?(H[qe]=me,H[be]=ye,qe=be):(H[qe]=de,H[ee]=ye,qe=ee);else if(be<Je&&0>o(me,ye))H[qe]=me,H[be]=ye,qe=be;else break e}}return re}function o(H,re){var ye=H.sortIndex-re.sortIndex;return ye!==0?ye:H.id-re.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var g=[],y=[],_=1,E=null,T=3,V=!1,U=!1,L=!1,O=!1,X=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function ie(H){for(var re=n(y);re!==null;){if(re.callback===null)s(y);else if(re.startTime<=H)s(y),re.sortIndex=re.expirationTime,e(g,re);else break;re=n(y)}}function pe(H){if(L=!1,ie(H),!U)if(n(g)!==null)U=!0,fe||(fe=!0,C());else{var re=n(y);re!==null&&ae(pe,re.startTime-H)}}var fe=!1,I=-1,N=5,j=-1;function P(){return O?!0:!(i.unstable_now()-j<N)}function k(){if(O=!1,fe){var H=i.unstable_now();j=H;var re=!0;try{e:{U=!1,L&&(L=!1,Q(I),I=-1),V=!0;var ye=T;try{t:{for(ie(H),E=n(g);E!==null&&!(E.expirationTime>H&&P());){var qe=E.callback;if(typeof qe=="function"){E.callback=null,T=E.priorityLevel;var Je=qe(E.expirationTime<=H);if(H=i.unstable_now(),typeof Je=="function"){E.callback=Je,ie(H),re=!0;break t}E===n(g)&&s(g),ie(H)}else s(g);E=n(g)}if(E!==null)re=!0;else{var M=n(y);M!==null&&ae(pe,M.startTime-H),re=!1}}break e}finally{E=null,T=ye,V=!1}re=void 0}}finally{re?C():fe=!1}}}var C;if(typeof te=="function")C=function(){te(k)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Se=R.port2;R.port1.onmessage=k,C=function(){Se.postMessage(null)}}else C=function(){X(k,0)};function ae(H,re){I=X(function(){H(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(H){switch(T){case 1:case 2:case 3:var re=3;break;default:re=T}var ye=T;T=re;try{return H()}finally{T=ye}},i.unstable_requestPaint=function(){O=!0},i.unstable_runWithPriority=function(H,re){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ye=T;T=H;try{return re()}finally{T=ye}},i.unstable_scheduleCallback=function(H,re,ye){var qe=i.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?qe+ye:qe):ye=qe,H){case 1:var Je=-1;break;case 2:Je=250;break;case 5:Je=1073741823;break;case 4:Je=1e4;break;default:Je=5e3}return Je=ye+Je,H={id:_++,callback:re,priorityLevel:H,startTime:ye,expirationTime:Je,sortIndex:-1},ye>qe?(H.sortIndex=ye,e(y,H),n(g)===null&&H===n(y)&&(L?(Q(I),I=-1):L=!0,ae(pe,ye-qe))):(H.sortIndex=Je,e(g,H),U||V||(U=!0,fe||(fe=!0,C()))),H},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(H){var re=T;return function(){var ye=T;T=re;try{return H.apply(this,arguments)}finally{T=ye}}}})(Ip)),Ip}var ux;function $w(){return ux||(ux=1,Cp.exports=Gw()),Cp.exports}var jp={exports:{}},Sn={};var dx;function Kw(){if(dx)return Sn;dx=1;var i=Sm();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:y,implementation:_}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Sn.createPortal=function(g,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,_)},Sn.flushSync=function(g){var y=f.T,_=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=y,s.p=_,s.d.f()}},Sn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},Sn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Sn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var _=y.as,E=m(_,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,V=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:V}):_==="script"&&s.d.X(g,{crossOrigin:E,integrity:T,fetchPriority:V,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Sn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=m(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},Sn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,E=m(_,y.crossOrigin);s.d.L(g,_,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Sn.preloadModule=function(g,y){if(typeof g=="string")if(y){var _=m(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},Sn.requestFormReset=function(g){s.d.r(g)},Sn.unstable_batchedUpdates=function(g,y){return g(y)},Sn.useFormState=function(g,y,_){return f.H.useFormState(g,y,_)},Sn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Sn.version="19.2.4",Sn}var fx;function Yw(){if(fx)return jp.exports;fx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),jp.exports=Kw(),jp.exports}var hx;function Qw(){if(hx)return sc;hx=1;var i=$w(),e=Sm(),n=Yw();function s(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var a=t,r=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(r=a.return),t=a.return;while(t)}return a.tag===3?r:null}function f(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function m(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(s(188))}function y(t){var a=t.alternate;if(!a){if(a=c(t),a===null)throw Error(s(188));return a!==t?null:t}for(var r=t,l=a;;){var h=r.return;if(h===null)break;var p=h.alternate;if(p===null){if(l=h.return,l!==null){r=l;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===r)return g(h),t;if(p===l)return g(h),a;p=p.sibling}throw Error(s(188))}if(r.return!==l.return)r=h,l=p;else{for(var x=!1,A=h.child;A;){if(A===r){x=!0,r=h,l=p;break}if(A===l){x=!0,l=h,r=p;break}A=A.sibling}if(!x){for(A=p.child;A;){if(A===r){x=!0,r=p,l=h;break}if(A===l){x=!0,l=p,r=h;break}A=A.sibling}if(!x)throw Error(s(189))}}if(r.alternate!==l)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?t:a}function _(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=_(t),a!==null)return a;t=t.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),te=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function C(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function Se(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case L:return"Fragment";case X:return"Profiler";case O:return"StrictMode";case pe:return"Suspense";case fe:return"SuspenseList";case j:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case U:return"Portal";case te:return t.displayName||"Context";case Q:return(t._context.displayName||"Context")+".Consumer";case ie:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return a=t.displayName||null,a!==null?a:Se(t.type)||"Memo";case N:a=t._payload,t=t._init;try{return Se(t(a))}catch{}}return null}var ae=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},qe=[],Je=-1;function M(t){return{current:t}}function ee(t){0>Je||(t.current=qe[Je],qe[Je]=null,Je--)}function de(t,a){Je++,qe[Je]=t.current,t.current=a}var be=M(null),me=M(null),Ne=M(null),Te=M(null);function ft(t,a){switch(de(Ne,a),de(me,t),de(be,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Rb(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Rb(a),t=Cb(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ee(be),de(be,t)}function tt(){ee(be),ee(me),ee(Ne)}function Wt(t){t.memoizedState!==null&&de(Te,t);var a=be.current,r=Cb(a,t.type);a!==r&&(de(me,t),de(be,r))}function Gt(t){me.current===t&&(ee(be),ee(me)),Te.current===t&&(ee(Te),ec._currentValue=ye)}var ve,je;function it(t){if(ve===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);ve=a&&a[1]||"",je=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+t+je}var Fe=!1;function F(t,a){if(!t||Fe)return"";Fe=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(Z){var Y=Z}Reflect.construct(t,[],le)}else{try{le.call()}catch(Z){Y=Z}t.call(le.prototype)}}else{try{throw Error()}catch(Z){Y=Z}(le=t())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(Z){if(Z&&Y&&typeof Z.stack=="string")return[Z.stack,Y.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),x=p[0],A=p[1];if(x&&A){var D=x.split(`
`),$=A.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===$.length)for(l=D.length-1,h=$.length-1;1<=l&&0<=h&&D[l]!==$[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==$[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==$[h]){var ne=`
`+D[l].replace(" at new "," at ");return t.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",t.displayName)),ne}while(1<=l&&0<=h);break}}}finally{Fe=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?it(r):""}function xe(t,a){switch(t.tag){case 26:case 27:case 5:return it(t.type);case 16:return it("Lazy");case 13:return t.child!==a&&a!==null?it("Suspense Fallback"):it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return F(t.type,!1);case 11:return F(t.type.render,!1);case 1:return F(t.type,!0);case 31:return it("Activity");default:return""}}function he(t){try{var a="",r=null;do a+=xe(t,r),r=t,t=t.return;while(t);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var _e=Object.prototype.hasOwnProperty,Ie=i.unstable_scheduleCallback,mt=i.unstable_cancelCallback,K=i.unstable_shouldYield,Me=i.unstable_requestPaint,gt=i.unstable_now,$t=i.unstable_getCurrentPriorityLevel,W=i.unstable_ImmediatePriority,Pe=i.unstable_UserBlockingPriority,$e=i.unstable_NormalPriority,ce=i.unstable_LowPriority,Be=i.unstable_IdlePriority,xt=i.log,ht=i.unstable_setDisableYieldValue,He=null,ke=null;function Xe(t){if(typeof xt=="function"&&ht(t),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(He,t)}catch{}}var Ke=Math.clz32?Math.clz32:Hc,xa=Math.log,Pa=Math.LN2;function Hc(t){return t>>>=0,t===0?32:31-(xa(t)/Pa|0)|0}var Va=256,Qs=262144,Zt=4194304;function za(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function La(t,a,r){var l=t.pendingLanes;if(l===0)return 0;var h=0,p=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~p,l!==0?h=za(l):(x&=A,x!==0?h=za(x):r||(r=A&~t,r!==0&&(h=za(r))))):(A=l&~p,A!==0?h=za(A):x!==0?h=za(x):r||(r=l&~t,r!==0&&(h=za(r)))),h===0?0:a!==0&&a!==h&&(a&p)===0&&(p=h&-h,r=a&-a,p>=r||p===32&&(r&4194048)!==0)?a:h}function va(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function If(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qc(){var t=Zt;return Zt<<=1,(Zt&62914560)===0&&(Zt=4194304),t}function Ua(t){for(var a=[],r=0;31>r;r++)a.push(t);return a}function Xs(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function jf(t,a,r,l,h,p){var x=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var A=t.entanglements,D=t.expirationTimes,$=t.hiddenUpdates;for(r=x&~r;0<r;){var ne=31-Ke(r),le=1<<ne;A[ne]=0,D[ne]=-1;var Y=$[ne];if(Y!==null)for($[ne]=null,ne=0;ne<Y.length;ne++){var Z=Y[ne];Z!==null&&(Z.lane&=-536870913)}r&=~le}l!==0&&Js(t,l,0),p!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=p&~(x&~a))}function Js(t,a,r){t.pendingLanes|=a,t.suspendedLanes&=~a;var l=31-Ke(a);t.entangledLanes|=a,t.entanglements[l]=t.entanglements[l]|1073741824|r&261930}function sl(t,a){var r=t.entangledLanes|=a;for(t=t.entanglements;r;){var l=31-Ke(r),h=1<<l;h&a|t[l]&a&&(t[l]|=a),r&=~h}}function rl(t,a){var r=a&-a;return r=(r&42)!==0?1:Ws(r),(r&(t.suspendedLanes|a))!==0?0:r}function Ws(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function yi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Fc(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:Wb(t.type))}function _a(t,a){var r=re.p;try{return re.p=t,a()}finally{re.p=r}}var Ea=Math.random().toString(36).slice(2),en="__reactFiber$"+Ea,hn="__reactProps$"+Ea,Ba="__reactContainer$"+Ea,Br="__reactEvents$"+Ea,kf="__reactListeners$"+Ea,Gc="__reactHandles$"+Ea,$c="__reactResources$"+Ea,Ha="__reactMarker$"+Ea;function Hr(t){delete t[en],delete t[hn],delete t[Br],delete t[kf],delete t[Gc]}function qa(t){var a=t[en];if(a)return a;for(var r=t.parentNode;r;){if(a=r[Ba]||r[en]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(t=Pb(t);t!==null;){if(r=t[en])return r;t=Pb(t)}return a}t=r,r=t.parentNode}return null}function aa(t){if(t=t[en]||t[Ba]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function Gn(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(s(33))}function Fa(t){var a=t[$c];return a||(a=t[$c]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function tn(t){t[Ha]=!0}var ol=new Set,ll={};function Ga(t,a){$a(t,a),$a(t+"Capture",a)}function $a(t,a){for(ll[t]=a,t=0;t<a.length;t++)ol.add(a[t])}var cl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ul={},dl={};function Kc(t){return _e.call(dl,t)?!0:_e.call(ul,t)?!1:cl.test(t)?dl[t]=!0:(ul[t]=!0,!1)}function qr(t,a,r){if(Kc(a))if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+r)}}function $n(t,a,r){if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+r)}}function nn(t,a,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(a,r,""+l)}}function pn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xi(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function fl(t,a,r){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,p=l.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return h.call(this)},set:function(x){r=""+x,p.call(this,x)}}),Object.defineProperty(t,a,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(x){r=""+x},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function At(t){if(!t._valueTracker){var a=Xi(t)?"checked":"value";t._valueTracker=fl(t,a,""+t[a])}}function Zs(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var r=a.getValue(),l="";return t&&(l=Xi(t)?t.checked?"true":"false":t.value),t=l,t!==r?(a.setValue(t),!0):!1}function Ka(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var er=/[\n"\\]/g;function Dn(t){return t.replace(er,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Fr(t,a,r,l,h,p,x,A){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),a!=null?x==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+pn(a)):t.value!==""+pn(a)&&(t.value=""+pn(a)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),a!=null?hl(t,x,pn(a)):r!=null?hl(t,x,pn(r)):l!=null&&t.removeAttribute("value"),h==null&&p!=null&&(t.defaultChecked=!!p),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+pn(A):t.removeAttribute("name")}function Yc(t,a,r,l,h,p,x,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),a!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){At(t);return}r=r!=null?""+pn(r):"",a=a!=null?""+pn(a):r,A||a===t.value||(t.value=a),t.defaultValue=a}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),At(t)}function hl(t,a,r){a==="number"&&Ka(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Ji(t,a,r,l){if(t=t.options,a){a={};for(var h=0;h<r.length;h++)a["$"+r[h]]=!0;for(r=0;r<t.length;r++)h=a.hasOwnProperty("$"+t[r].value),t[r].selected!==h&&(t[r].selected=h),h&&l&&(t[r].defaultSelected=!0)}else{for(r=""+pn(r),a=null,h=0;h<t.length;h++){if(t[h].value===r){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}a!==null||t[h].disabled||(a=t[h])}a!==null&&(a.selected=!0)}}function Qc(t,a,r){if(a!=null&&(a=""+pn(a),a!==t.value&&(t.value=a),r==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=r!=null?""+pn(r):""}function Wi(t,a,r,l){if(a==null){if(l!=null){if(r!=null)throw Error(s(92));if(ae(l)){if(1<l.length)throw Error(s(93));l=l[0]}r=l}r==null&&(r=""),a=r}r=pn(a),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l),At(t)}function Mn(t,a){if(a){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=a;return}}t.textContent=a}var Xc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pl(t,a,r){var l=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":l?t.setProperty(a,r):typeof r!="number"||r===0||Xc.has(a)?a==="float"?t.cssFloat=r:t[a]=(""+r).trim():t[a]=r+"px"}function ml(t,a,r){if(a!=null&&typeof a!="object")throw Error(s(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in a)l=a[h],a.hasOwnProperty(h)&&r[h]!==l&&pl(t,h,l)}else for(var p in a)a.hasOwnProperty(p)&&pl(t,p,a[p])}function Gr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function $r(t){return Zi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Aa(){}var gl=null;function ia(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var es=null,Ya=null;function tr(t){var a=aa(t);if(a&&(t=a.stateNode)){var r=t[hn]||null;e:switch(t=a.stateNode,a.type){case"input":if(Fr(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Dn(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var l=r[a];if(l!==t&&l.form===t.form){var h=l[hn]||null;if(!h)throw Error(s(90));Fr(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(a=0;a<r.length;a++)l=r[a],l.form===t.form&&Zs(l)}break e;case"textarea":Qc(t,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&Ji(t,!!r.multiple,a,!1)}}}var Kr=!1;function ts(t,a,r){if(Kr)return t(a,r);Kr=!0;try{var l=t(a);return l}finally{if(Kr=!1,(es!==null||Ya!==null)&&(Fu(),es&&(a=es,t=Ya,Ya=es=null,tr(a),t)))for(a=0;a<t.length;a++)tr(t[a])}}function wa(t,a){var r=t.stateNode;if(r===null)return null;var l=r[hn]||null;if(l===null)return null;r=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(s(231,a,typeof r));return r}var sa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nr=!1;if(sa)try{var Tt={};Object.defineProperty(Tt,"passive",{get:function(){nr=!0}}),window.addEventListener("test",Tt,Tt),window.removeEventListener("test",Tt,Tt)}catch{nr=!1}var Qa=null,yl=null,ar=null;function bl(){if(ar)return ar;var t,a=yl,r=a.length,l,h="value"in Qa?Qa.value:Qa.textContent,p=h.length;for(t=0;t<r&&a[t]===h[t];t++);var x=r-t;for(l=1;l<=x&&a[r-l]===h[p-l];l++);return ar=h.slice(t,1<l?1-l:void 0)}function ir(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function bi(){return!0}function Sa(){return!1}function yn(t){function a(r,l,h,p,x){this._reactName=r,this._targetInst=h,this.type=l,this.nativeEvent=p,this.target=x,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(r=t[A],this[A]=r?r(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?bi:Sa,this.isPropagationStopped=Sa,this}return E(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),a}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xa=yn(xi),ns=E({},xi,{view:0,detail:0}),xl=yn(ns),as,Yr,Ja,Qr=E({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:is,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ja&&(Ja&&t.type==="mousemove"?(as=t.screenX-Ja.screenX,Yr=t.screenY-Ja.screenY):Yr=as=0,Ja=t),as)},movementY:function(t){return"movementY"in t?t.movementY:Yr}}),vl=yn(Qr),sr=E({},Qr,{dataTransfer:0}),Wc=yn(sr),Zc=E({},ns,{relatedTarget:0}),rr=yn(Zc),_l=E({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),eu=yn(_l),Xr=E({},xi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tu=yn(Xr),nu=E({},xi,{data:0}),Wa=yn(nu),au={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ru(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=su[t])?!!a[t]:!1}function is(){return ru}var In=E({},ns,{key:function(t){if(t.key){var a=au[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=ir(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:is,charCode:function(t){return t.type==="keypress"?ir(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ir(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ou=yn(In),lu=E({},Qr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vi=yn(lu),d=E({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:is}),b=yn(d),v=E({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=yn(v),q=E({},Qr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J=yn(q),ge=E({},xi,{newState:0,oldState:0}),We=yn(ge),Kt=[9,13,27,32],vt=sa&&"CompositionEvent"in window,Pt=null;sa&&"documentMode"in document&&(Pt=document.documentMode);var ra=sa&&"TextEvent"in window&&!Pt,Za=sa&&(!vt||Pt&&8<Pt&&11>=Pt),Ta=" ",Na=!1;function or(t,a){switch(t){case"keyup":return Kt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wr=!1;function dA(t,a){switch(t){case"compositionend":return Jr(a);case"keypress":return a.which!==32?null:(Na=!0,Ta);case"textInput":return t=a.data,t===Ta&&Na?null:t;default:return null}}function fA(t,a){if(Wr)return t==="compositionend"||!vt&&or(t,a)?(t=bl(),ar=yl=Qa=null,Wr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Za&&a.locale!=="ko"?null:a.data;default:return null}}var hA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lg(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!hA[t.type]:a==="textarea"}function Ug(t,a,r,l){es?Ya?Ya.push(l):Ya=[l]:es=l,a=Ju(a,"onChange"),0<a.length&&(r=new Xa("onChange","change",null,r,l),t.push({event:r,listeners:a}))}var El=null,Al=null;function pA(t){Eb(t,0)}function cu(t){var a=Gn(t);if(Zs(a))return t}function Bg(t,a){if(t==="change")return a}var Hg=!1;if(sa){var Of;if(sa){var Df="oninput"in document;if(!Df){var qg=document.createElement("div");qg.setAttribute("oninput","return;"),Df=typeof qg.oninput=="function"}Of=Df}else Of=!1;Hg=Of&&(!document.documentMode||9<document.documentMode)}function Fg(){El&&(El.detachEvent("onpropertychange",Gg),Al=El=null)}function Gg(t){if(t.propertyName==="value"&&cu(Al)){var a=[];Ug(a,Al,t,ia(t)),ts(pA,a)}}function mA(t,a,r){t==="focusin"?(Fg(),El=a,Al=r,El.attachEvent("onpropertychange",Gg)):t==="focusout"&&Fg()}function gA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cu(Al)}function yA(t,a){if(t==="click")return cu(a)}function bA(t,a){if(t==="input"||t==="change")return cu(a)}function xA(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Kn=typeof Object.is=="function"?Object.is:xA;function wl(t,a){if(Kn(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var r=Object.keys(t),l=Object.keys(a);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var h=r[l];if(!_e.call(a,h)||!Kn(t[h],a[h]))return!1}return!0}function $g(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kg(t,a){var r=$g(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=a&&l>=a)return{node:r,offset:a-t};t=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$g(r)}}function Yg(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Yg(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Qg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=Ka(t.document);a instanceof t.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)t=a.contentWindow;else break;a=Ka(t.document)}return a}function Mf(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var vA=sa&&"documentMode"in document&&11>=document.documentMode,Zr=null,Pf=null,Sl=null,Vf=!1;function Xg(t,a,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Vf||Zr==null||Zr!==Ka(l)||(l=Zr,"selectionStart"in l&&Mf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Sl&&wl(Sl,l)||(Sl=l,l=Ju(Pf,"onSelect"),0<l.length&&(a=new Xa("onSelect","select",null,a,r),t.push({event:a,listeners:l}),a.target=Zr)))}function lr(t,a){var r={};return r[t.toLowerCase()]=a.toLowerCase(),r["Webkit"+t]="webkit"+a,r["Moz"+t]="moz"+a,r}var eo={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},zf={},Jg={};sa&&(Jg=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function cr(t){if(zf[t])return zf[t];if(!eo[t])return t;var a=eo[t],r;for(r in a)if(a.hasOwnProperty(r)&&r in Jg)return zf[t]=a[r];return t}var Wg=cr("animationend"),Zg=cr("animationiteration"),e0=cr("animationstart"),_A=cr("transitionrun"),EA=cr("transitionstart"),AA=cr("transitioncancel"),t0=cr("transitionend"),n0=new Map,Lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lf.push("scrollEnd");function Ra(t,a){n0.set(t,a),Ga(a,[t])}var uu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},oa=[],to=0,Uf=0;function du(){for(var t=to,a=Uf=to=0;a<t;){var r=oa[a];oa[a++]=null;var l=oa[a];oa[a++]=null;var h=oa[a];oa[a++]=null;var p=oa[a];if(oa[a++]=null,l!==null&&h!==null){var x=l.pending;x===null?h.next=h:(h.next=x.next,x.next=h),l.pending=h}p!==0&&a0(r,h,p)}}function fu(t,a,r,l){oa[to++]=t,oa[to++]=a,oa[to++]=r,oa[to++]=l,Uf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Bf(t,a,r,l){return fu(t,a,r,l),hu(t)}function ur(t,a){return fu(t,null,null,a),hu(t)}function a0(t,a,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var h=!1,p=t.return;p!==null;)p.childLanes|=r,l=p.alternate,l!==null&&(l.childLanes|=r),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(h=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,h&&a!==null&&(h=31-Ke(r),t=p.hiddenUpdates,l=t[h],l===null?t[h]=[a]:l.push(a),a.lane=r|536870912),p):null}function hu(t){if(50<Kl)throw Kl=0,Xh=null,Error(s(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var no={};function wA(t,a,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(t,a,r,l){return new wA(t,a,r,l)}function Hf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _i(t,a){var r=t.alternate;return r===null?(r=Yn(t.tag,a,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=a,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,a=t.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function i0(t,a){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,a=r.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function pu(t,a,r,l,h,p){var x=0;if(l=t,typeof t=="function")Hf(t)&&(x=1);else if(typeof t=="string")x=Cw(t,r,be.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case j:return t=Yn(31,r,a,h),t.elementType=j,t.lanes=p,t;case L:return dr(r.children,h,p,a);case O:x=8,h|=24;break;case X:return t=Yn(12,r,a,h|2),t.elementType=X,t.lanes=p,t;case pe:return t=Yn(13,r,a,h),t.elementType=pe,t.lanes=p,t;case fe:return t=Yn(19,r,a,h),t.elementType=fe,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case te:x=10;break e;case Q:x=9;break e;case ie:x=11;break e;case I:x=14;break e;case N:x=16,l=null;break e}x=29,r=Error(s(130,t===null?"null":typeof t,"")),l=null}return a=Yn(x,r,a,h),a.elementType=t,a.type=l,a.lanes=p,a}function dr(t,a,r,l){return t=Yn(7,t,l,a),t.lanes=r,t}function qf(t,a,r){return t=Yn(6,t,null,a),t.lanes=r,t}function s0(t){var a=Yn(18,null,null,0);return a.stateNode=t,a}function Ff(t,a,r){return a=Yn(4,t.children!==null?t.children:[],t.key,a),a.lanes=r,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var r0=new WeakMap;function la(t,a){if(typeof t=="object"&&t!==null){var r=r0.get(t);return r!==void 0?r:(a={value:t,source:a,stack:he(a)},r0.set(t,a),a)}return{value:t,source:a,stack:he(a)}}var ao=[],io=0,mu=null,Tl=0,ca=[],ua=0,ss=null,ei=1,ti="";function Ei(t,a){ao[io++]=Tl,ao[io++]=mu,mu=t,Tl=a}function o0(t,a,r){ca[ua++]=ei,ca[ua++]=ti,ca[ua++]=ss,ss=t;var l=ei;t=ti;var h=32-Ke(l)-1;l&=~(1<<h),r+=1;var p=32-Ke(a)+h;if(30<p){var x=h-h%5;p=(l&(1<<x)-1).toString(32),l>>=x,h-=x,ei=1<<32-Ke(a)+h|r<<h|l,ti=p+t}else ei=1<<p|r<<h|l,ti=t}function Gf(t){t.return!==null&&(Ei(t,1),o0(t,1,0))}function $f(t){for(;t===mu;)mu=ao[--io],ao[io]=null,Tl=ao[--io],ao[io]=null;for(;t===ss;)ss=ca[--ua],ca[ua]=null,ti=ca[--ua],ca[ua]=null,ei=ca[--ua],ca[ua]=null}function l0(t,a){ca[ua++]=ei,ca[ua++]=ti,ca[ua++]=ss,ei=a.id,ti=a.overflow,ss=t}var bn=null,Ot=null,ut=!1,rs=null,da=!1,Kf=Error(s(519));function os(t){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nl(la(a,t)),Kf}function c0(t){var a=t.stateNode,r=t.type,l=t.memoizedProps;switch(a[en]=t,a[hn]=l,r){case"dialog":at("cancel",a),at("close",a);break;case"iframe":case"object":case"embed":at("load",a);break;case"video":case"audio":for(r=0;r<Ql.length;r++)at(Ql[r],a);break;case"source":at("error",a);break;case"img":case"image":case"link":at("error",a),at("load",a);break;case"details":at("toggle",a);break;case"input":at("invalid",a),Yc(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":at("invalid",a);break;case"textarea":at("invalid",a),Wi(a,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||l.suppressHydrationWarning===!0||Tb(a.textContent,r)?(l.popover!=null&&(at("beforetoggle",a),at("toggle",a)),l.onScroll!=null&&at("scroll",a),l.onScrollEnd!=null&&at("scrollend",a),l.onClick!=null&&(a.onclick=Aa),a=!0):a=!1,a||os(t,!0)}function u0(t){for(bn=t.return;bn;)switch(bn.tag){case 5:case 31:case 13:da=!1;return;case 27:case 3:da=!0;return;default:bn=bn.return}}function so(t){if(t!==bn)return!1;if(!ut)return u0(t),ut=!0,!1;var a=t.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||dp(t.type,t.memoizedProps)),r=!r),r&&Ot&&os(t),u0(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Ot=Mb(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Ot=Mb(t)}else a===27?(a=Ot,_s(t.type)?(t=gp,gp=null,Ot=t):Ot=a):Ot=bn?ha(t.stateNode.nextSibling):null;return!0}function fr(){Ot=bn=null,ut=!1}function Yf(){var t=rs;return t!==null&&(Ln===null?Ln=t:Ln.push.apply(Ln,t),rs=null),t}function Nl(t){rs===null?rs=[t]:rs.push(t)}var Qf=M(null),hr=null,Ai=null;function ls(t,a,r){de(Qf,a._currentValue),a._currentValue=r}function wi(t){t._currentValue=Qf.current,ee(Qf)}function Xf(t,a,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===r)break;t=t.return}}function Jf(t,a,r,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var p=h.dependencies;if(p!==null){var x=h.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=h;for(var D=0;D<a.length;D++)if(A.context===a[D]){p.lanes|=r,A=p.alternate,A!==null&&(A.lanes|=r),Xf(p.return,r,t),l||(x=null);break e}p=A.next}}else if(h.tag===18){if(x=h.return,x===null)throw Error(s(341));x.lanes|=r,p=x.alternate,p!==null&&(p.lanes|=r),Xf(x,r,t),x=null}else x=h.child;if(x!==null)x.return=h;else for(x=h;x!==null;){if(x===t){x=null;break}if(h=x.sibling,h!==null){h.return=x.return,x=h;break}x=x.return}h=x}}function ro(t,a,r,l){t=null;for(var h=a,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var x=h.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var A=h.type;Kn(h.pendingProps.value,x.value)||(t!==null?t.push(A):t=[A])}}else if(h===Te.current){if(x=h.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(ec):t=[ec])}h=h.return}t!==null&&Jf(a,t,r,l),a.flags|=262144}function gu(t){for(t=t.firstContext;t!==null;){if(!Kn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function pr(t){hr=t,Ai=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function xn(t){return d0(hr,t)}function yu(t,a){return hr===null&&pr(t),d0(t,a)}function d0(t,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},Ai===null){if(t===null)throw Error(s(308));Ai=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Ai=Ai.next=a;return r}var SA=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){a.aborted=!0,t.forEach(function(r){return r()})}},TA=i.unstable_scheduleCallback,NA=i.unstable_NormalPriority,an={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wf(){return{controller:new SA,data:new Map,refCount:0}}function Rl(t){t.refCount--,t.refCount===0&&TA(NA,function(){t.controller.abort()})}var Cl=null,Zf=0,oo=0,lo=null;function RA(t,a){if(Cl===null){var r=Cl=[];Zf=0,oo=np(),lo={status:"pending",value:void 0,then:function(l){r.push(l)}}}return Zf++,a.then(f0,f0),a}function f0(){if(--Zf===0&&Cl!==null){lo!==null&&(lo.status="fulfilled");var t=Cl;Cl=null,oo=0,lo=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function CA(t,a){var r=[],l={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return t.then(function(){l.status="fulfilled",l.value=a;for(var h=0;h<r.length;h++)(0,r[h])(a)},function(h){for(l.status="rejected",l.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),l}var h0=H.S;H.S=function(t,a){Xy=gt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&RA(t,a),h0!==null&&h0(t,a)};var mr=M(null);function eh(){var t=mr.current;return t!==null?t:It.pooledCache}function bu(t,a){a===null?de(mr,mr.current):de(mr,a.pool)}function p0(){var t=eh();return t===null?null:{parent:an._currentValue,pool:t}}var co=Error(s(460)),th=Error(s(474)),xu=Error(s(542)),vu={then:function(){}};function m0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function g0(t,a,r){switch(r=t[r],r===void 0?t.push(a):r!==a&&(a.then(Aa,Aa),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,b0(t),t;default:if(typeof a.status=="string")a.then(Aa,Aa);else{if(t=It,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=a,t.status="pending",t.then(function(l){if(a.status==="pending"){var h=a;h.status="fulfilled",h.value=l}},function(l){if(a.status==="pending"){var h=a;h.status="rejected",h.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,b0(t),t}throw yr=a,co}}function gr(t){try{var a=t._init;return a(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(yr=r,co):r}}var yr=null;function y0(){if(yr===null)throw Error(s(459));var t=yr;return yr=null,t}function b0(t){if(t===co||t===xu)throw Error(s(483))}var uo=null,Il=0;function _u(t){var a=Il;return Il+=1,uo===null&&(uo=[]),g0(uo,t,a)}function jl(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Eu(t,a){throw a.$$typeof===T?Error(s(525)):(t=Object.prototype.toString.call(a),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function x0(t){function a(B,z){if(t){var G=B.deletions;G===null?(B.deletions=[z],B.flags|=16):G.push(z)}}function r(B,z){if(!t)return null;for(;z!==null;)a(B,z),z=z.sibling;return null}function l(B){for(var z=new Map;B!==null;)B.key!==null?z.set(B.key,B):z.set(B.index,B),B=B.sibling;return z}function h(B,z){return B=_i(B,z),B.index=0,B.sibling=null,B}function p(B,z,G){return B.index=G,t?(G=B.alternate,G!==null?(G=G.index,G<z?(B.flags|=67108866,z):G):(B.flags|=67108866,z)):(B.flags|=1048576,z)}function x(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function A(B,z,G,se){return z===null||z.tag!==6?(z=qf(G,B.mode,se),z.return=B,z):(z=h(z,G),z.return=B,z)}function D(B,z,G,se){var Oe=G.type;return Oe===L?ne(B,z,G.props.children,se,G.key):z!==null&&(z.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===N&&gr(Oe)===z.type)?(z=h(z,G.props),jl(z,G),z.return=B,z):(z=pu(G.type,G.key,G.props,null,B.mode,se),jl(z,G),z.return=B,z)}function $(B,z,G,se){return z===null||z.tag!==4||z.stateNode.containerInfo!==G.containerInfo||z.stateNode.implementation!==G.implementation?(z=Ff(G,B.mode,se),z.return=B,z):(z=h(z,G.children||[]),z.return=B,z)}function ne(B,z,G,se,Oe){return z===null||z.tag!==7?(z=dr(G,B.mode,se,Oe),z.return=B,z):(z=h(z,G),z.return=B,z)}function le(B,z,G){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=qf(""+z,B.mode,G),z.return=B,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case V:return G=pu(z.type,z.key,z.props,null,B.mode,G),jl(G,z),G.return=B,G;case U:return z=Ff(z,B.mode,G),z.return=B,z;case N:return z=gr(z),le(B,z,G)}if(ae(z)||C(z))return z=dr(z,B.mode,G,null),z.return=B,z;if(typeof z.then=="function")return le(B,_u(z),G);if(z.$$typeof===te)return le(B,yu(B,z),G);Eu(B,z)}return null}function Y(B,z,G,se){var Oe=z!==null?z.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Oe!==null?null:A(B,z,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case V:return G.key===Oe?D(B,z,G,se):null;case U:return G.key===Oe?$(B,z,G,se):null;case N:return G=gr(G),Y(B,z,G,se)}if(ae(G)||C(G))return Oe!==null?null:ne(B,z,G,se,null);if(typeof G.then=="function")return Y(B,z,_u(G),se);if(G.$$typeof===te)return Y(B,z,yu(B,G),se);Eu(B,G)}return null}function Z(B,z,G,se,Oe){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return B=B.get(G)||null,A(z,B,""+se,Oe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case V:return B=B.get(se.key===null?G:se.key)||null,D(z,B,se,Oe);case U:return B=B.get(se.key===null?G:se.key)||null,$(z,B,se,Oe);case N:return se=gr(se),Z(B,z,G,se,Oe)}if(ae(se)||C(se))return B=B.get(G)||null,ne(z,B,se,Oe,null);if(typeof se.then=="function")return Z(B,z,G,_u(se),Oe);if(se.$$typeof===te)return Z(B,z,G,yu(z,se),Oe);Eu(z,se)}return null}function Re(B,z,G,se){for(var Oe=null,yt=null,Ce=z,et=z=0,rt=null;Ce!==null&&et<G.length;et++){Ce.index>et?(rt=Ce,Ce=null):rt=Ce.sibling;var bt=Y(B,Ce,G[et],se);if(bt===null){Ce===null&&(Ce=rt);break}t&&Ce&&bt.alternate===null&&a(B,Ce),z=p(bt,z,et),yt===null?Oe=bt:yt.sibling=bt,yt=bt,Ce=rt}if(et===G.length)return r(B,Ce),ut&&Ei(B,et),Oe;if(Ce===null){for(;et<G.length;et++)Ce=le(B,G[et],se),Ce!==null&&(z=p(Ce,z,et),yt===null?Oe=Ce:yt.sibling=Ce,yt=Ce);return ut&&Ei(B,et),Oe}for(Ce=l(Ce);et<G.length;et++)rt=Z(Ce,B,et,G[et],se),rt!==null&&(t&&rt.alternate!==null&&Ce.delete(rt.key===null?et:rt.key),z=p(rt,z,et),yt===null?Oe=rt:yt.sibling=rt,yt=rt);return t&&Ce.forEach(function(Ts){return a(B,Ts)}),ut&&Ei(B,et),Oe}function Ve(B,z,G,se){if(G==null)throw Error(s(151));for(var Oe=null,yt=null,Ce=z,et=z=0,rt=null,bt=G.next();Ce!==null&&!bt.done;et++,bt=G.next()){Ce.index>et?(rt=Ce,Ce=null):rt=Ce.sibling;var Ts=Y(B,Ce,bt.value,se);if(Ts===null){Ce===null&&(Ce=rt);break}t&&Ce&&Ts.alternate===null&&a(B,Ce),z=p(Ts,z,et),yt===null?Oe=Ts:yt.sibling=Ts,yt=Ts,Ce=rt}if(bt.done)return r(B,Ce),ut&&Ei(B,et),Oe;if(Ce===null){for(;!bt.done;et++,bt=G.next())bt=le(B,bt.value,se),bt!==null&&(z=p(bt,z,et),yt===null?Oe=bt:yt.sibling=bt,yt=bt);return ut&&Ei(B,et),Oe}for(Ce=l(Ce);!bt.done;et++,bt=G.next())bt=Z(Ce,B,et,bt.value,se),bt!==null&&(t&&bt.alternate!==null&&Ce.delete(bt.key===null?et:bt.key),z=p(bt,z,et),yt===null?Oe=bt:yt.sibling=bt,yt=bt);return t&&Ce.forEach(function(Uw){return a(B,Uw)}),ut&&Ei(B,et),Oe}function Ct(B,z,G,se){if(typeof G=="object"&&G!==null&&G.type===L&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case V:e:{for(var Oe=G.key;z!==null;){if(z.key===Oe){if(Oe=G.type,Oe===L){if(z.tag===7){r(B,z.sibling),se=h(z,G.props.children),se.return=B,B=se;break e}}else if(z.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===N&&gr(Oe)===z.type){r(B,z.sibling),se=h(z,G.props),jl(se,G),se.return=B,B=se;break e}r(B,z);break}else a(B,z);z=z.sibling}G.type===L?(se=dr(G.props.children,B.mode,se,G.key),se.return=B,B=se):(se=pu(G.type,G.key,G.props,null,B.mode,se),jl(se,G),se.return=B,B=se)}return x(B);case U:e:{for(Oe=G.key;z!==null;){if(z.key===Oe)if(z.tag===4&&z.stateNode.containerInfo===G.containerInfo&&z.stateNode.implementation===G.implementation){r(B,z.sibling),se=h(z,G.children||[]),se.return=B,B=se;break e}else{r(B,z);break}else a(B,z);z=z.sibling}se=Ff(G,B.mode,se),se.return=B,B=se}return x(B);case N:return G=gr(G),Ct(B,z,G,se)}if(ae(G))return Re(B,z,G,se);if(C(G)){if(Oe=C(G),typeof Oe!="function")throw Error(s(150));return G=Oe.call(G),Ve(B,z,G,se)}if(typeof G.then=="function")return Ct(B,z,_u(G),se);if(G.$$typeof===te)return Ct(B,z,yu(B,G),se);Eu(B,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,z!==null&&z.tag===6?(r(B,z.sibling),se=h(z,G),se.return=B,B=se):(r(B,z),se=qf(G,B.mode,se),se.return=B,B=se),x(B)):r(B,z)}return function(B,z,G,se){try{Il=0;var Oe=Ct(B,z,G,se);return uo=null,Oe}catch(Ce){if(Ce===co||Ce===xu)throw Ce;var yt=Yn(29,Ce,null,B.mode);return yt.lanes=se,yt.return=B,yt}}}var br=x0(!0),v0=x0(!1),cs=!1;function nh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ah(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function us(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ds(t,a,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(_t&2)!==0){var h=l.pending;return h===null?a.next=a:(a.next=h.next,h.next=a),l.pending=a,a=hu(t),a0(t,null,r),a}return fu(t,l,a,r),hu(t)}function kl(t,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var l=a.lanes;l&=t.pendingLanes,r|=l,a.lanes=r,sl(t,r)}}function ih(t,a){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var h=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var x={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?h=p=x:p=p.next=x,r=r.next}while(r!==null);p===null?h=p=a:p=p.next=a}else h=p=a;r={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=a:t.next=a,r.lastBaseUpdate=a}var sh=!1;function Ol(){if(sh){var t=lo;if(t!==null)throw t}}function Dl(t,a,r,l){sh=!1;var h=t.updateQueue;cs=!1;var p=h.firstBaseUpdate,x=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var D=A,$=D.next;D.next=null,x===null?p=$:x.next=$,x=D;var ne=t.alternate;ne!==null&&(ne=ne.updateQueue,A=ne.lastBaseUpdate,A!==x&&(A===null?ne.firstBaseUpdate=$:A.next=$,ne.lastBaseUpdate=D))}if(p!==null){var le=h.baseState;x=0,ne=$=D=null,A=p;do{var Y=A.lane&-536870913,Z=Y!==A.lane;if(Z?(st&Y)===Y:(l&Y)===Y){Y!==0&&Y===oo&&(sh=!0),ne!==null&&(ne=ne.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Re=t,Ve=A;Y=a;var Ct=r;switch(Ve.tag){case 1:if(Re=Ve.payload,typeof Re=="function"){le=Re.call(Ct,le,Y);break e}le=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ve.payload,Y=typeof Re=="function"?Re.call(Ct,le,Y):Re,Y==null)break e;le=E({},le,Y);break e;case 2:cs=!0}}Y=A.callback,Y!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=h.callbacks,Z===null?h.callbacks=[Y]:Z.push(Y))}else Z={lane:Y,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ne===null?($=ne=Z,D=le):ne=ne.next=Z,x|=Y;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;Z=A,A=Z.next,Z.next=null,h.lastBaseUpdate=Z,h.shared.pending=null}}while(!0);ne===null&&(D=le),h.baseState=D,h.firstBaseUpdate=$,h.lastBaseUpdate=ne,p===null&&(h.shared.lanes=0),gs|=x,t.lanes=x,t.memoizedState=le}}function _0(t,a){if(typeof t!="function")throw Error(s(191,t));t.call(a)}function E0(t,a){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)_0(r[t],a)}var fo=M(null),Au=M(0);function A0(t,a){t=Oi,de(Au,t),de(fo,a),Oi=t|a.baseLanes}function rh(){de(Au,Oi),de(fo,fo.current)}function oh(){Oi=Au.current,ee(fo),ee(Au)}var Qn=M(null),fa=null;function fs(t){var a=t.alternate;de(Yt,Yt.current&1),de(Qn,t),fa===null&&(a===null||fo.current!==null||a.memoizedState!==null)&&(fa=t)}function lh(t){de(Yt,Yt.current),de(Qn,t),fa===null&&(fa=t)}function w0(t){t.tag===22?(de(Yt,Yt.current),de(Qn,t),fa===null&&(fa=t)):hs()}function hs(){de(Yt,Yt.current),de(Qn,Qn.current)}function Xn(t){ee(Qn),fa===t&&(fa=null),ee(Yt)}var Yt=M(0);function wu(t){for(var a=t;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||pp(r)||mp(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Si=0,Ze=null,Nt=null,sn=null,Su=!1,ho=!1,xr=!1,Tu=0,Ml=0,po=null,IA=0;function Ht(){throw Error(s(321))}function ch(t,a){if(a===null)return!1;for(var r=0;r<a.length&&r<t.length;r++)if(!Kn(t[r],a[r]))return!1;return!0}function uh(t,a,r,l,h,p){return Si=p,Ze=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,H.H=t===null||t.memoizedState===null?oy:Sh,xr=!1,p=r(l,h),xr=!1,ho&&(p=T0(a,r,l,h)),S0(t),p}function S0(t){H.H=zl;var a=Nt!==null&&Nt.next!==null;if(Si=0,sn=Nt=Ze=null,Su=!1,Ml=0,po=null,a)throw Error(s(300));t===null||rn||(t=t.dependencies,t!==null&&gu(t)&&(rn=!0))}function T0(t,a,r,l){Ze=t;var h=0;do{if(ho&&(po=null),Ml=0,ho=!1,25<=h)throw Error(s(301));if(h+=1,sn=Nt=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}H.H=ly,p=a(r,l)}while(ho);return p}function jA(){var t=H.H,a=t.useState()[0];return a=typeof a.then=="function"?Pl(a):a,t=t.useState()[0],(Nt!==null?Nt.memoizedState:null)!==t&&(Ze.flags|=1024),a}function dh(){var t=Tu!==0;return Tu=0,t}function fh(t,a,r){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~r}function hh(t){if(Su){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Su=!1}Si=0,sn=Nt=Ze=null,ho=!1,Ml=Tu=0,po=null}function jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Ze.memoizedState=sn=t:sn=sn.next=t,sn}function Qt(){if(Nt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var a=sn===null?Ze.memoizedState:sn.next;if(a!==null)sn=a,Nt=t;else{if(t===null)throw Ze.alternate===null?Error(s(467)):Error(s(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},sn===null?Ze.memoizedState=sn=t:sn=sn.next=t}return sn}function Nu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pl(t){var a=Ml;return Ml+=1,po===null&&(po=[]),t=g0(po,t,a),a=Ze,(sn===null?a.memoizedState:sn.next)===null&&(a=a.alternate,H.H=a===null||a.memoizedState===null?oy:Sh),t}function Ru(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Pl(t);if(t.$$typeof===te)return xn(t)}throw Error(s(438,String(t)))}function ph(t){var a=null,r=Ze.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var l=Ze.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(h){return h.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=Nu(),Ze.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(t),l=0;l<t;l++)r[l]=P;return a.index++,r}function Ti(t,a){return typeof a=="function"?a(t):a}function Cu(t){var a=Qt();return mh(a,Nt,t)}function mh(t,a,r){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var h=t.baseQueue,p=l.pending;if(p!==null){if(h!==null){var x=h.next;h.next=p.next,p.next=x}a.baseQueue=h=p,l.pending=null}if(p=t.baseState,h===null)t.memoizedState=p;else{a=h.next;var A=x=null,D=null,$=a,ne=!1;do{var le=$.lane&-536870913;if(le!==$.lane?(st&le)===le:(Si&le)===le){var Y=$.revertLane;if(Y===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),le===oo&&(ne=!0);else if((Si&Y)===Y){$=$.next,Y===oo&&(ne=!0);continue}else le={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},D===null?(A=D=le,x=p):D=D.next=le,Ze.lanes|=Y,gs|=Y;le=$.action,xr&&r(p,le),p=$.hasEagerState?$.eagerState:r(p,le)}else Y={lane:le,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},D===null?(A=D=Y,x=p):D=D.next=Y,Ze.lanes|=le,gs|=le;$=$.next}while($!==null&&$!==a);if(D===null?x=p:D.next=A,!Kn(p,t.memoizedState)&&(rn=!0,ne&&(r=lo,r!==null)))throw r;t.memoizedState=p,t.baseState=x,t.baseQueue=D,l.lastRenderedState=p}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function gh(t){var a=Qt(),r=a.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=t;var l=r.dispatch,h=r.pending,p=a.memoizedState;if(h!==null){r.pending=null;var x=h=h.next;do p=t(p,x.action),x=x.next;while(x!==h);Kn(p,a.memoizedState)||(rn=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),r.lastRenderedState=p}return[p,l]}function N0(t,a,r){var l=Ze,h=Qt(),p=ut;if(p){if(r===void 0)throw Error(s(407));r=r()}else r=a();var x=!Kn((Nt||h).memoizedState,r);if(x&&(h.memoizedState=r,rn=!0),h=h.queue,xh(I0.bind(null,l,h,t),[t]),h.getSnapshot!==a||x||sn!==null&&sn.memoizedState.tag&1){if(l.flags|=2048,mo(9,{destroy:void 0},C0.bind(null,l,h,r,a),null),It===null)throw Error(s(349));p||(Si&127)!==0||R0(l,a,r)}return r}function R0(t,a,r){t.flags|=16384,t={getSnapshot:a,value:r},a=Ze.updateQueue,a===null?(a=Nu(),Ze.updateQueue=a,a.stores=[t]):(r=a.stores,r===null?a.stores=[t]:r.push(t))}function C0(t,a,r,l){a.value=r,a.getSnapshot=l,j0(a)&&k0(t)}function I0(t,a,r){return r(function(){j0(a)&&k0(t)})}function j0(t){var a=t.getSnapshot;t=t.value;try{var r=a();return!Kn(t,r)}catch{return!0}}function k0(t){var a=ur(t,2);a!==null&&Un(a,t,2)}function yh(t){var a=jn();if(typeof t=="function"){var r=t;if(t=r(),xr){Xe(!0);try{r()}finally{Xe(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:t},a}function O0(t,a,r,l){return t.baseState=r,mh(t,Nt,typeof l=="function"?l:Ti)}function kA(t,a,r,l,h){if(ku(t))throw Error(s(485));if(t=a.action,t!==null){var p={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){p.listeners.push(x)}};H.T!==null?r(!0):p.isTransition=!1,l(p),r=a.pending,r===null?(p.next=a.pending=p,D0(a,p)):(p.next=r.next,a.pending=r.next=p)}}function D0(t,a){var r=a.action,l=a.payload,h=t.state;if(a.isTransition){var p=H.T,x={};H.T=x;try{var A=r(h,l),D=H.S;D!==null&&D(x,A),M0(t,a,A)}catch($){bh(t,a,$)}finally{p!==null&&x.types!==null&&(p.types=x.types),H.T=p}}else try{p=r(h,l),M0(t,a,p)}catch($){bh(t,a,$)}}function M0(t,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){P0(t,a,l)},function(l){return bh(t,a,l)}):P0(t,a,r)}function P0(t,a,r){a.status="fulfilled",a.value=r,V0(a),t.state=r,a=t.pending,a!==null&&(r=a.next,r===a?t.pending=null:(r=r.next,a.next=r,D0(t,r)))}function bh(t,a,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=r,V0(a),a=a.next;while(a!==l)}t.action=null}function V0(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function z0(t,a){return a}function L0(t,a){if(ut){var r=It.formState;if(r!==null){e:{var l=Ze;if(ut){if(Ot){t:{for(var h=Ot,p=da;h.nodeType!==8;){if(!p){h=null;break t}if(h=ha(h.nextSibling),h===null){h=null;break t}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){Ot=ha(h.nextSibling),l=h.data==="F!";break e}}os(l)}l=!1}l&&(a=r[0])}}return r=jn(),r.memoizedState=r.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:z0,lastRenderedState:a},r.queue=l,r=iy.bind(null,Ze,l),l.dispatch=r,l=yh(!1),p=wh.bind(null,Ze,!1,l.queue),l=jn(),h={state:a,dispatch:null,action:t,pending:null},l.queue=h,r=kA.bind(null,Ze,h,p,r),h.dispatch=r,l.memoizedState=t,[a,r,!1]}function U0(t){var a=Qt();return B0(a,Nt,t)}function B0(t,a,r){if(a=mh(t,a,z0)[0],t=Cu(Ti)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=Pl(a)}catch(x){throw x===co?xu:x}else l=a;a=Qt();var h=a.queue,p=h.dispatch;return r!==a.memoizedState&&(Ze.flags|=2048,mo(9,{destroy:void 0},OA.bind(null,h,r),null)),[l,p,t]}function OA(t,a){t.action=a}function H0(t){var a=Qt(),r=Nt;if(r!==null)return B0(a,r,t);Qt(),a=a.memoizedState,r=Qt();var l=r.queue.dispatch;return r.memoizedState=t,[a,l,!1]}function mo(t,a,r,l){return t={tag:t,create:r,deps:l,inst:a,next:null},a=Ze.updateQueue,a===null&&(a=Nu(),Ze.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,a.lastEffect=t),t}function q0(){return Qt().memoizedState}function Iu(t,a,r,l){var h=jn();Ze.flags|=t,h.memoizedState=mo(1|a,{destroy:void 0},r,l===void 0?null:l)}function ju(t,a,r,l){var h=Qt();l=l===void 0?null:l;var p=h.memoizedState.inst;Nt!==null&&l!==null&&ch(l,Nt.memoizedState.deps)?h.memoizedState=mo(a,p,r,l):(Ze.flags|=t,h.memoizedState=mo(1|a,p,r,l))}function F0(t,a){Iu(8390656,8,t,a)}function xh(t,a){ju(2048,8,t,a)}function DA(t){Ze.flags|=4;var a=Ze.updateQueue;if(a===null)a=Nu(),Ze.updateQueue=a,a.events=[t];else{var r=a.events;r===null?a.events=[t]:r.push(t)}}function G0(t){var a=Qt().memoizedState;return DA({ref:a,nextImpl:t}),function(){if((_t&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function $0(t,a){return ju(4,2,t,a)}function K0(t,a){return ju(4,4,t,a)}function Y0(t,a){if(typeof a=="function"){t=t();var r=a(t);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Q0(t,a,r){r=r!=null?r.concat([t]):null,ju(4,4,Y0.bind(null,a,t),r)}function vh(){}function X0(t,a){var r=Qt();a=a===void 0?null:a;var l=r.memoizedState;return a!==null&&ch(a,l[1])?l[0]:(r.memoizedState=[t,a],t)}function J0(t,a){var r=Qt();a=a===void 0?null:a;var l=r.memoizedState;if(a!==null&&ch(a,l[1]))return l[0];if(l=t(),xr){Xe(!0);try{t()}finally{Xe(!1)}}return r.memoizedState=[l,a],l}function _h(t,a,r){return r===void 0||(Si&1073741824)!==0&&(st&261930)===0?t.memoizedState=a:(t.memoizedState=r,t=Wy(),Ze.lanes|=t,gs|=t,r)}function W0(t,a,r,l){return Kn(r,a)?r:fo.current!==null?(t=_h(t,r,l),Kn(t,a)||(rn=!0),t):(Si&42)===0||(Si&1073741824)!==0&&(st&261930)===0?(rn=!0,t.memoizedState=r):(t=Wy(),Ze.lanes|=t,gs|=t,a)}function Z0(t,a,r,l,h){var p=re.p;re.p=p!==0&&8>p?p:8;var x=H.T,A={};H.T=A,wh(t,!1,a,r);try{var D=h(),$=H.S;if($!==null&&$(A,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ne=CA(D,l);Vl(t,a,ne,Zn(t))}else Vl(t,a,l,Zn(t))}catch(le){Vl(t,a,{then:function(){},status:"rejected",reason:le},Zn())}finally{re.p=p,x!==null&&A.types!==null&&(x.types=A.types),H.T=x}}function MA(){}function Eh(t,a,r,l){if(t.tag!==5)throw Error(s(476));var h=ey(t).queue;Z0(t,h,a,ye,r===null?MA:function(){return ty(t),r(l)})}function ey(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:ye},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:r},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function ty(t){var a=ey(t);a.next===null&&(a=t.alternate.memoizedState),Vl(t,a.next.queue,{},Zn())}function Ah(){return xn(ec)}function ny(){return Qt().memoizedState}function ay(){return Qt().memoizedState}function PA(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var r=Zn();t=us(r);var l=ds(a,t,r);l!==null&&(Un(l,a,r),kl(l,a,r)),a={cache:Wf()},t.payload=a;return}a=a.return}}function VA(t,a,r){var l=Zn();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ku(t)?sy(a,r):(r=Bf(t,a,r,l),r!==null&&(Un(r,t,l),ry(r,a,l)))}function iy(t,a,r){var l=Zn();Vl(t,a,r,l)}function Vl(t,a,r,l){var h={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(ku(t))sy(a,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var x=a.lastRenderedState,A=p(x,r);if(h.hasEagerState=!0,h.eagerState=A,Kn(A,x))return fu(t,a,h,0),It===null&&du(),!1}catch{}if(r=Bf(t,a,h,l),r!==null)return Un(r,t,l),ry(r,a,l),!0}return!1}function wh(t,a,r,l){if(l={lane:2,revertLane:np(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ku(t)){if(a)throw Error(s(479))}else a=Bf(t,r,l,2),a!==null&&Un(a,t,2)}function ku(t){var a=t.alternate;return t===Ze||a!==null&&a===Ze}function sy(t,a){ho=Su=!0;var r=t.pending;r===null?a.next=a:(a.next=r.next,r.next=a),t.pending=a}function ry(t,a,r){if((r&4194048)!==0){var l=a.lanes;l&=t.pendingLanes,r|=l,a.lanes=r,sl(t,r)}}var zl={readContext:xn,use:Ru,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};zl.useEffectEvent=Ht;var oy={readContext:xn,use:Ru,useCallback:function(t,a){return jn().memoizedState=[t,a===void 0?null:a],t},useContext:xn,useEffect:F0,useImperativeHandle:function(t,a,r){r=r!=null?r.concat([t]):null,Iu(4194308,4,Y0.bind(null,a,t),r)},useLayoutEffect:function(t,a){return Iu(4194308,4,t,a)},useInsertionEffect:function(t,a){Iu(4,2,t,a)},useMemo:function(t,a){var r=jn();a=a===void 0?null:a;var l=t();if(xr){Xe(!0);try{t()}finally{Xe(!1)}}return r.memoizedState=[l,a],l},useReducer:function(t,a,r){var l=jn();if(r!==void 0){var h=r(a);if(xr){Xe(!0);try{r(a)}finally{Xe(!1)}}}else h=a;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=VA.bind(null,Ze,t),[l.memoizedState,t]},useRef:function(t){var a=jn();return t={current:t},a.memoizedState=t},useState:function(t){t=yh(t);var a=t.queue,r=iy.bind(null,Ze,a);return a.dispatch=r,[t.memoizedState,r]},useDebugValue:vh,useDeferredValue:function(t,a){var r=jn();return _h(r,t,a)},useTransition:function(){var t=yh(!1);return t=Z0.bind(null,Ze,t.queue,!0,!1),jn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,r){var l=Ze,h=jn();if(ut){if(r===void 0)throw Error(s(407));r=r()}else{if(r=a(),It===null)throw Error(s(349));(st&127)!==0||R0(l,a,r)}h.memoizedState=r;var p={value:r,getSnapshot:a};return h.queue=p,F0(I0.bind(null,l,p,t),[t]),l.flags|=2048,mo(9,{destroy:void 0},C0.bind(null,l,p,r,a),null),r},useId:function(){var t=jn(),a=It.identifierPrefix;if(ut){var r=ti,l=ei;r=(l&~(1<<32-Ke(l)-1)).toString(32)+r,a="_"+a+"R_"+r,r=Tu++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=IA++,a="_"+a+"r_"+r.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Ah,useFormState:L0,useActionState:L0,useOptimistic:function(t){var a=jn();a.memoizedState=a.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=wh.bind(null,Ze,!0,r),r.dispatch=a,[t,a]},useMemoCache:ph,useCacheRefresh:function(){return jn().memoizedState=PA.bind(null,Ze)},useEffectEvent:function(t){var a=jn(),r={impl:t};return a.memoizedState=r,function(){if((_t&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},Sh={readContext:xn,use:Ru,useCallback:X0,useContext:xn,useEffect:xh,useImperativeHandle:Q0,useInsertionEffect:$0,useLayoutEffect:K0,useMemo:J0,useReducer:Cu,useRef:q0,useState:function(){return Cu(Ti)},useDebugValue:vh,useDeferredValue:function(t,a){var r=Qt();return W0(r,Nt.memoizedState,t,a)},useTransition:function(){var t=Cu(Ti)[0],a=Qt().memoizedState;return[typeof t=="boolean"?t:Pl(t),a]},useSyncExternalStore:N0,useId:ny,useHostTransitionStatus:Ah,useFormState:U0,useActionState:U0,useOptimistic:function(t,a){var r=Qt();return O0(r,Nt,t,a)},useMemoCache:ph,useCacheRefresh:ay};Sh.useEffectEvent=G0;var ly={readContext:xn,use:Ru,useCallback:X0,useContext:xn,useEffect:xh,useImperativeHandle:Q0,useInsertionEffect:$0,useLayoutEffect:K0,useMemo:J0,useReducer:gh,useRef:q0,useState:function(){return gh(Ti)},useDebugValue:vh,useDeferredValue:function(t,a){var r=Qt();return Nt===null?_h(r,t,a):W0(r,Nt.memoizedState,t,a)},useTransition:function(){var t=gh(Ti)[0],a=Qt().memoizedState;return[typeof t=="boolean"?t:Pl(t),a]},useSyncExternalStore:N0,useId:ny,useHostTransitionStatus:Ah,useFormState:H0,useActionState:H0,useOptimistic:function(t,a){var r=Qt();return Nt!==null?O0(r,Nt,t,a):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:ph,useCacheRefresh:ay};ly.useEffectEvent=G0;function Th(t,a,r,l){a=t.memoizedState,r=r(l,a),r=r==null?a:E({},a,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Nh={enqueueSetState:function(t,a,r){t=t._reactInternals;var l=Zn(),h=us(l);h.payload=a,r!=null&&(h.callback=r),a=ds(t,h,l),a!==null&&(Un(a,t,l),kl(a,t,l))},enqueueReplaceState:function(t,a,r){t=t._reactInternals;var l=Zn(),h=us(l);h.tag=1,h.payload=a,r!=null&&(h.callback=r),a=ds(t,h,l),a!==null&&(Un(a,t,l),kl(a,t,l))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var r=Zn(),l=us(r);l.tag=2,a!=null&&(l.callback=a),a=ds(t,l,r),a!==null&&(Un(a,t,r),kl(a,t,r))}};function cy(t,a,r,l,h,p,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,x):a.prototype&&a.prototype.isPureReactComponent?!wl(r,l)||!wl(h,p):!0}function uy(t,a,r,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,l),a.state!==t&&Nh.enqueueReplaceState(a,a.state,null)}function vr(t,a){var r=a;if("ref"in a){r={};for(var l in a)l!=="ref"&&(r[l]=a[l])}if(t=t.defaultProps){r===a&&(r=E({},r));for(var h in t)r[h]===void 0&&(r[h]=t[h])}return r}function dy(t){uu(t)}function fy(t){console.error(t)}function hy(t){uu(t)}function Ou(t,a){try{var r=t.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function py(t,a,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Rh(t,a,r){return r=us(r),r.tag=3,r.payload={element:null},r.callback=function(){Ou(t,a)},r}function my(t){return t=us(t),t.tag=3,t}function gy(t,a,r,l){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var p=l.value;t.payload=function(){return h(p)},t.callback=function(){py(a,r,l)}}var x=r.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){py(a,r,l),typeof h!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function zA(t,a,r,l,h){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=r.alternate,a!==null&&ro(a,r,h,!0),r=Qn.current,r!==null){switch(r.tag){case 31:case 13:return fa===null?Gu():r.alternate===null&&qt===0&&(qt=3),r.flags&=-257,r.flags|=65536,r.lanes=h,l===vu?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([l]):a.add(l),Zh(t,l,h)),!1;case 22:return r.flags|=65536,l===vu?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([l]):r.add(l)),Zh(t,l,h)),!1}throw Error(s(435,r.tag))}return Zh(t,l,h),Gu(),!1}if(ut)return a=Qn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=h,l!==Kf&&(t=Error(s(422),{cause:l}),Nl(la(t,r)))):(l!==Kf&&(a=Error(s(423),{cause:l}),Nl(la(a,r))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=la(l,r),h=Rh(t.stateNode,l,h),ih(t,h),qt!==4&&(qt=2)),!1;var p=Error(s(520),{cause:l});if(p=la(p,r),$l===null?$l=[p]:$l.push(p),qt!==4&&(qt=2),a===null)return!0;l=la(l,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,t=h&-h,r.lanes|=t,t=Rh(r.stateNode,l,t),ih(r,t),!1;case 1:if(a=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ys===null||!ys.has(p))))return r.flags|=65536,h&=-h,r.lanes|=h,h=my(h),gy(h,t,r,l),ih(r,h),!1}r=r.return}while(r!==null);return!1}var Ch=Error(s(461)),rn=!1;function vn(t,a,r,l){a.child=t===null?v0(a,null,r,l):br(a,t.child,r,l)}function yy(t,a,r,l,h){r=r.render;var p=a.ref;if("ref"in l){var x={};for(var A in l)A!=="ref"&&(x[A]=l[A])}else x=l;return pr(a),l=uh(t,a,r,x,p,h),A=dh(),t!==null&&!rn?(fh(t,a,h),Ni(t,a,h)):(ut&&A&&Gf(a),a.flags|=1,vn(t,a,l,h),a.child)}function by(t,a,r,l,h){if(t===null){var p=r.type;return typeof p=="function"&&!Hf(p)&&p.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=p,xy(t,a,p,l,h)):(t=pu(r.type,null,l,a,a.mode,h),t.ref=a.ref,t.return=a,a.child=t)}if(p=t.child,!Vh(t,h)){var x=p.memoizedProps;if(r=r.compare,r=r!==null?r:wl,r(x,l)&&t.ref===a.ref)return Ni(t,a,h)}return a.flags|=1,t=_i(p,l),t.ref=a.ref,t.return=a,a.child=t}function xy(t,a,r,l,h){if(t!==null){var p=t.memoizedProps;if(wl(p,l)&&t.ref===a.ref)if(rn=!1,a.pendingProps=l=p,Vh(t,h))(t.flags&131072)!==0&&(rn=!0);else return a.lanes=t.lanes,Ni(t,a,h)}return Ih(t,a,r,l,h)}function vy(t,a,r,l){var h=l.children,p=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,t!==null){for(l=a.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~p}else l=0,a.child=null;return _y(t,a,p,r,l)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&bu(a,p!==null?p.cachePool:null),p!==null?A0(a,p):rh(),w0(a);else return l=a.lanes=536870912,_y(t,a,p!==null?p.baseLanes|r:r,r,l)}else p!==null?(bu(a,p.cachePool),A0(a,p),hs(),a.memoizedState=null):(t!==null&&bu(a,null),rh(),hs());return vn(t,a,h,r),a.child}function Ll(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function _y(t,a,r,l,h){var p=eh();return p=p===null?null:{parent:an._currentValue,pool:p},a.memoizedState={baseLanes:r,cachePool:p},t!==null&&bu(a,null),rh(),w0(a),t!==null&&ro(t,a,l,!0),a.childLanes=h,null}function Du(t,a){return a=Pu({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function Ey(t,a,r){return br(a,t.child,null,r),t=Du(a,a.pendingProps),t.flags|=2,Xn(a),a.memoizedState=null,t}function LA(t,a,r){var l=a.pendingProps,h=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(ut){if(l.mode==="hidden")return t=Du(a,l),a.lanes=536870912,Ll(null,t);if(lh(a),(t=Ot)?(t=Db(t,da),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:ss!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},r=s0(t),r.return=a,a.child=r,bn=a,Ot=null)):t=null,t===null)throw os(a);return a.lanes=536870912,null}return Du(a,l)}var p=t.memoizedState;if(p!==null){var x=p.dehydrated;if(lh(a),h)if(a.flags&256)a.flags&=-257,a=Ey(t,a,r);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(s(558));else if(rn||ro(t,a,r,!1),h=(r&t.childLanes)!==0,rn||h){if(l=It,l!==null&&(x=rl(l,r),x!==0&&x!==p.retryLane))throw p.retryLane=x,ur(t,x),Un(l,t,x),Ch;Gu(),a=Ey(t,a,r)}else t=p.treeContext,Ot=ha(x.nextSibling),bn=a,ut=!0,rs=null,da=!1,t!==null&&l0(a,t),a=Du(a,l),a.flags|=4096;return a}return t=_i(t.child,{mode:l.mode,children:l.children}),t.ref=a.ref,a.child=t,t.return=a,t}function Mu(t,a){var r=a.ref;if(r===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(t===null||t.ref!==r)&&(a.flags|=4194816)}}function Ih(t,a,r,l,h){return pr(a),r=uh(t,a,r,l,void 0,h),l=dh(),t!==null&&!rn?(fh(t,a,h),Ni(t,a,h)):(ut&&l&&Gf(a),a.flags|=1,vn(t,a,r,h),a.child)}function Ay(t,a,r,l,h,p){return pr(a),a.updateQueue=null,r=T0(a,l,r,h),S0(t),l=dh(),t!==null&&!rn?(fh(t,a,p),Ni(t,a,p)):(ut&&l&&Gf(a),a.flags|=1,vn(t,a,r,p),a.child)}function wy(t,a,r,l,h){if(pr(a),a.stateNode===null){var p=no,x=r.contextType;typeof x=="object"&&x!==null&&(p=xn(x)),p=new r(l,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Nh,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=l,p.state=a.memoizedState,p.refs={},nh(a),x=r.contextType,p.context=typeof x=="object"&&x!==null?xn(x):no,p.state=a.memoizedState,x=r.getDerivedStateFromProps,typeof x=="function"&&(Th(a,r,x,l),p.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(x=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),x!==p.state&&Nh.enqueueReplaceState(p,p.state,null),Dl(a,l,p,h),Ol(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(t===null){p=a.stateNode;var A=a.memoizedProps,D=vr(r,A);p.props=D;var $=p.context,ne=r.contextType;x=no,typeof ne=="object"&&ne!==null&&(x=xn(ne));var le=r.getDerivedStateFromProps;ne=typeof le=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,ne||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||$!==x)&&uy(a,p,l,x),cs=!1;var Y=a.memoizedState;p.state=Y,Dl(a,l,p,h),Ol(),$=a.memoizedState,A||Y!==$||cs?(typeof le=="function"&&(Th(a,r,le,l),$=a.memoizedState),(D=cs||cy(a,r,D,l,Y,$,x))?(ne||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=$),p.props=l,p.state=$,p.context=x,l=D):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{p=a.stateNode,ah(t,a),x=a.memoizedProps,ne=vr(r,x),p.props=ne,le=a.pendingProps,Y=p.context,$=r.contextType,D=no,typeof $=="object"&&$!==null&&(D=xn($)),A=r.getDerivedStateFromProps,($=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x!==le||Y!==D)&&uy(a,p,l,D),cs=!1,Y=a.memoizedState,p.state=Y,Dl(a,l,p,h),Ol();var Z=a.memoizedState;x!==le||Y!==Z||cs||t!==null&&t.dependencies!==null&&gu(t.dependencies)?(typeof A=="function"&&(Th(a,r,A,l),Z=a.memoizedState),(ne=cs||cy(a,r,ne,l,Y,Z,D)||t!==null&&t.dependencies!==null&&gu(t.dependencies))?($||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,Z,D),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,Z,D)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||x===t.memoizedProps&&Y===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&Y===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=Z),p.props=l,p.state=Z,p.context=D,l=ne):(typeof p.componentDidUpdate!="function"||x===t.memoizedProps&&Y===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&Y===t.memoizedState||(a.flags|=1024),l=!1)}return p=l,Mu(t,a),l=(a.flags&128)!==0,p||l?(p=a.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,t!==null&&l?(a.child=br(a,t.child,null,h),a.child=br(a,null,r,h)):vn(t,a,r,h),a.memoizedState=p.state,t=a.child):t=Ni(t,a,h),t}function Sy(t,a,r,l){return fr(),a.flags|=256,vn(t,a,r,l),a.child}var jh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kh(t){return{baseLanes:t,cachePool:p0()}}function Oh(t,a,r){return t=t!==null?t.childLanes&~r:0,a&&(t|=Wn),t}function Ty(t,a,r){var l=a.pendingProps,h=!1,p=(a.flags&128)!==0,x;if((x=p)||(x=t!==null&&t.memoizedState===null?!1:(Yt.current&2)!==0),x&&(h=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,t===null){if(ut){if(h?fs(a):hs(),(t=Ot)?(t=Db(t,da),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:ss!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},r=s0(t),r.return=a,a.child=r,bn=a,Ot=null)):t=null,t===null)throw os(a);return mp(t)?a.lanes=32:a.lanes=536870912,null}var A=l.children;return l=l.fallback,h?(hs(),h=a.mode,A=Pu({mode:"hidden",children:A},h),l=dr(l,h,r,null),A.return=a,l.return=a,A.sibling=l,a.child=A,l=a.child,l.memoizedState=kh(r),l.childLanes=Oh(t,x,r),a.memoizedState=jh,Ll(null,l)):(fs(a),Dh(a,A))}var D=t.memoizedState;if(D!==null&&(A=D.dehydrated,A!==null)){if(p)a.flags&256?(fs(a),a.flags&=-257,a=Mh(t,a,r)):a.memoizedState!==null?(hs(),a.child=t.child,a.flags|=128,a=null):(hs(),A=l.fallback,h=a.mode,l=Pu({mode:"visible",children:l.children},h),A=dr(A,h,r,null),A.flags|=2,l.return=a,A.return=a,l.sibling=A,a.child=l,br(a,t.child,null,r),l=a.child,l.memoizedState=kh(r),l.childLanes=Oh(t,x,r),a.memoizedState=jh,a=Ll(null,l));else if(fs(a),mp(A)){if(x=A.nextSibling&&A.nextSibling.dataset,x)var $=x.dgst;x=$,l=Error(s(419)),l.stack="",l.digest=x,Nl({value:l,source:null,stack:null}),a=Mh(t,a,r)}else if(rn||ro(t,a,r,!1),x=(r&t.childLanes)!==0,rn||x){if(x=It,x!==null&&(l=rl(x,r),l!==0&&l!==D.retryLane))throw D.retryLane=l,ur(t,l),Un(x,t,l),Ch;pp(A)||Gu(),a=Mh(t,a,r)}else pp(A)?(a.flags|=192,a.child=t.child,a=null):(t=D.treeContext,Ot=ha(A.nextSibling),bn=a,ut=!0,rs=null,da=!1,t!==null&&l0(a,t),a=Dh(a,l.children),a.flags|=4096);return a}return h?(hs(),A=l.fallback,h=a.mode,D=t.child,$=D.sibling,l=_i(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,$!==null?A=_i($,A):(A=dr(A,h,r,null),A.flags|=2),A.return=a,l.return=a,l.sibling=A,a.child=l,Ll(null,l),l=a.child,A=t.child.memoizedState,A===null?A=kh(r):(h=A.cachePool,h!==null?(D=an._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=p0(),A={baseLanes:A.baseLanes|r,cachePool:h}),l.memoizedState=A,l.childLanes=Oh(t,x,r),a.memoizedState=jh,Ll(t.child,l)):(fs(a),r=t.child,t=r.sibling,r=_i(r,{mode:"visible",children:l.children}),r.return=a,r.sibling=null,t!==null&&(x=a.deletions,x===null?(a.deletions=[t],a.flags|=16):x.push(t)),a.child=r,a.memoizedState=null,r)}function Dh(t,a){return a=Pu({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Pu(t,a){return t=Yn(22,t,null,a),t.lanes=0,t}function Mh(t,a,r){return br(a,t.child,null,r),t=Dh(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Ny(t,a,r){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),Xf(t.return,a,r)}function Ph(t,a,r,l,h,p){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:h,treeForkCount:p}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=r,x.tailMode=h,x.treeForkCount=p)}function Ry(t,a,r){var l=a.pendingProps,h=l.revealOrder,p=l.tail;l=l.children;var x=Yt.current,A=(x&2)!==0;if(A?(x=x&1|2,a.flags|=128):x&=1,de(Yt,x),vn(t,a,l,r),l=ut?Tl:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ny(t,r,a);else if(t.tag===19)Ny(t,r,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(r=a.child,h=null;r!==null;)t=r.alternate,t!==null&&wu(t)===null&&(h=r),r=r.sibling;r=h,r===null?(h=a.child,a.child=null):(h=r.sibling,r.sibling=null),Ph(a,!1,h,r,p,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,h=a.child,a.child=null;h!==null;){if(t=h.alternate,t!==null&&wu(t)===null){a.child=h;break}t=h.sibling,h.sibling=r,r=h,h=t}Ph(a,!0,r,null,p,l);break;case"together":Ph(a,!1,null,null,void 0,l);break;default:a.memoizedState=null}return a.child}function Ni(t,a,r){if(t!==null&&(a.dependencies=t.dependencies),gs|=a.lanes,(r&a.childLanes)===0)if(t!==null){if(ro(t,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(s(153));if(a.child!==null){for(t=a.child,r=_i(t,t.pendingProps),a.child=r,r.return=a;t.sibling!==null;)t=t.sibling,r=r.sibling=_i(t,t.pendingProps),r.return=a;r.sibling=null}return a.child}function Vh(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&gu(t)))}function UA(t,a,r){switch(a.tag){case 3:ft(a,a.stateNode.containerInfo),ls(a,an,t.memoizedState.cache),fr();break;case 27:case 5:Wt(a);break;case 4:ft(a,a.stateNode.containerInfo);break;case 10:ls(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,lh(a),null;break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(fs(a),a.flags|=128,null):(r&a.child.childLanes)!==0?Ty(t,a,r):(fs(a),t=Ni(t,a,r),t!==null?t.sibling:null);fs(a);break;case 19:var h=(t.flags&128)!==0;if(l=(r&a.childLanes)!==0,l||(ro(t,a,r,!1),l=(r&a.childLanes)!==0),h){if(l)return Ry(t,a,r);a.flags|=128}if(h=a.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),de(Yt,Yt.current),l)break;return null;case 22:return a.lanes=0,vy(t,a,r,a.pendingProps);case 24:ls(a,an,t.memoizedState.cache)}return Ni(t,a,r)}function Cy(t,a,r){if(t!==null)if(t.memoizedProps!==a.pendingProps)rn=!0;else{if(!Vh(t,r)&&(a.flags&128)===0)return rn=!1,UA(t,a,r);rn=(t.flags&131072)!==0}else rn=!1,ut&&(a.flags&1048576)!==0&&o0(a,Tl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var l=a.pendingProps;if(t=gr(a.elementType),a.type=t,typeof t=="function")Hf(t)?(l=vr(t,l),a.tag=1,a=wy(null,a,t,l,r)):(a.tag=0,a=Ih(null,a,t,l,r));else{if(t!=null){var h=t.$$typeof;if(h===ie){a.tag=11,a=yy(null,a,t,l,r);break e}else if(h===I){a.tag=14,a=by(null,a,t,l,r);break e}}throw a=Se(t)||t,Error(s(306,a,""))}}return a;case 0:return Ih(t,a,a.type,a.pendingProps,r);case 1:return l=a.type,h=vr(l,a.pendingProps),wy(t,a,l,h,r);case 3:e:{if(ft(a,a.stateNode.containerInfo),t===null)throw Error(s(387));l=a.pendingProps;var p=a.memoizedState;h=p.element,ah(t,a),Dl(a,l,null,r);var x=a.memoizedState;if(l=x.cache,ls(a,an,l),l!==p.cache&&Jf(a,[an],r,!0),Ol(),l=x.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=Sy(t,a,l,r);break e}else if(l!==h){h=la(Error(s(424)),a),Nl(h),a=Sy(t,a,l,r);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Ot=ha(t.firstChild),bn=a,ut=!0,rs=null,da=!0,r=v0(a,null,l,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fr(),l===h){a=Ni(t,a,r);break e}vn(t,a,l,r)}a=a.child}return a;case 26:return Mu(t,a),t===null?(r=Ub(a.type,null,a.pendingProps,null))?a.memoizedState=r:ut||(r=a.type,t=a.pendingProps,l=Wu(Ne.current).createElement(r),l[en]=a,l[hn]=t,_n(l,r,t),tn(l),a.stateNode=l):a.memoizedState=Ub(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Wt(a),t===null&&ut&&(l=a.stateNode=Vb(a.type,a.pendingProps,Ne.current),bn=a,da=!0,h=Ot,_s(a.type)?(gp=h,Ot=ha(l.firstChild)):Ot=h),vn(t,a,a.pendingProps.children,r),Mu(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&ut&&((h=l=Ot)&&(l=gw(l,a.type,a.pendingProps,da),l!==null?(a.stateNode=l,bn=a,Ot=ha(l.firstChild),da=!1,h=!0):h=!1),h||os(a)),Wt(a),h=a.type,p=a.pendingProps,x=t!==null?t.memoizedProps:null,l=p.children,dp(h,p)?l=null:x!==null&&dp(h,x)&&(a.flags|=32),a.memoizedState!==null&&(h=uh(t,a,jA,null,null,r),ec._currentValue=h),Mu(t,a),vn(t,a,l,r),a.child;case 6:return t===null&&ut&&((t=r=Ot)&&(r=yw(r,a.pendingProps,da),r!==null?(a.stateNode=r,bn=a,Ot=null,t=!0):t=!1),t||os(a)),null;case 13:return Ty(t,a,r);case 4:return ft(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=br(a,null,l,r):vn(t,a,l,r),a.child;case 11:return yy(t,a,a.type,a.pendingProps,r);case 7:return vn(t,a,a.pendingProps,r),a.child;case 8:return vn(t,a,a.pendingProps.children,r),a.child;case 12:return vn(t,a,a.pendingProps.children,r),a.child;case 10:return l=a.pendingProps,ls(a,a.type,l.value),vn(t,a,l.children,r),a.child;case 9:return h=a.type._context,l=a.pendingProps.children,pr(a),h=xn(h),l=l(h),a.flags|=1,vn(t,a,l,r),a.child;case 14:return by(t,a,a.type,a.pendingProps,r);case 15:return xy(t,a,a.type,a.pendingProps,r);case 19:return Ry(t,a,r);case 31:return LA(t,a,r);case 22:return vy(t,a,r,a.pendingProps);case 24:return pr(a),l=xn(an),t===null?(h=eh(),h===null&&(h=It,p=Wf(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=r),h=p),a.memoizedState={parent:l,cache:h},nh(a),ls(a,an,h)):((t.lanes&r)!==0&&(ah(t,a),Dl(a,null,null,r),Ol()),h=t.memoizedState,p=a.memoizedState,h.parent!==l?(h={parent:l,cache:l},a.memoizedState=h,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=h),ls(a,an,l)):(l=p.cache,ls(a,an,l),l!==h.cache&&Jf(a,[an],r,!0))),vn(t,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Ri(t){t.flags|=4}function zh(t,a,r,l,h){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(nb())t.flags|=8192;else throw yr=vu,th}else t.flags&=-16777217}function Iy(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Gb(a))if(nb())t.flags|=8192;else throw yr=vu,th}function Vu(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?qc():536870912,t.lanes|=a,xo|=a)}function Ul(t,a){if(!ut)switch(t.tailMode){case"hidden":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Dt(t){var a=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(a)for(var h=t.child;h!==null;)r|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)r|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=r,a}function BA(t,a,r){var l=a.pendingProps;switch($f(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(a),null;case 1:return Dt(a),null;case 3:return r=a.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),wi(an),tt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(so(a)?Ri(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Yf())),Dt(a),null;case 26:var h=a.type,p=a.memoizedState;return t===null?(Ri(a),p!==null?(Dt(a),Iy(a,p)):(Dt(a),zh(a,h,null,l,r))):p?p!==t.memoizedState?(Ri(a),Dt(a),Iy(a,p)):(Dt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==l&&Ri(a),Dt(a),zh(a,h,t,l,r)),null;case 27:if(Gt(a),r=Ne.current,h=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&Ri(a);else{if(!l){if(a.stateNode===null)throw Error(s(166));return Dt(a),null}t=be.current,so(a)?c0(a):(t=Vb(h,l,r),a.stateNode=t,Ri(a))}return Dt(a),null;case 5:if(Gt(a),h=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&Ri(a);else{if(!l){if(a.stateNode===null)throw Error(s(166));return Dt(a),null}if(p=be.current,so(a))c0(a);else{var x=Wu(Ne.current);switch(p){case 1:p=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:p=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":p=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":p=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":p=x.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?x.createElement(h,{is:l.is}):x.createElement(h)}}p[en]=a,p[hn]=l;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)p.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=p;e:switch(_n(p,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ri(a)}}return Dt(a),zh(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,r),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==l&&Ri(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(s(166));if(t=Ne.current,so(a)){if(t=a.stateNode,r=a.memoizedProps,l=null,h=bn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[en]=a,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||Tb(t.nodeValue,r)),t||os(a,!0)}else t=Wu(t).createTextNode(l),t[en]=a,a.stateNode=t}return Dt(a),null;case 31:if(r=a.memoizedState,t===null||t.memoizedState!==null){if(l=so(a),r!==null){if(t===null){if(!l)throw Error(s(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[en]=a}else fr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),t=!1}else r=Yf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return a.flags&256?(Xn(a),a):(Xn(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Dt(a),null;case 13:if(l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=so(a),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=a.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[en]=a}else fr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),h=!1}else h=Yf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return a.flags&256?(Xn(a),a):(Xn(a),null)}return Xn(a),(a.flags&128)!==0?(a.lanes=r,a):(r=l!==null,t=t!==null&&t.memoizedState!==null,r&&(l=a.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==h&&(l.flags|=2048)),r!==t&&r&&(a.child.flags|=8192),Vu(a,a.updateQueue),Dt(a),null);case 4:return tt(),t===null&&rp(a.stateNode.containerInfo),Dt(a),null;case 10:return wi(a.type),Dt(a),null;case 19:if(ee(Yt),l=a.memoizedState,l===null)return Dt(a),null;if(h=(a.flags&128)!==0,p=l.rendering,p===null)if(h)Ul(l,!1);else{if(qt!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(p=wu(t),p!==null){for(a.flags|=128,Ul(l,!1),t=p.updateQueue,a.updateQueue=t,Vu(a,t),a.subtreeFlags=0,t=r,r=a.child;r!==null;)i0(r,t),r=r.sibling;return de(Yt,Yt.current&1|2),ut&&Ei(a,l.treeForkCount),a.child}t=t.sibling}l.tail!==null&&gt()>Hu&&(a.flags|=128,h=!0,Ul(l,!1),a.lanes=4194304)}else{if(!h)if(t=wu(p),t!==null){if(a.flags|=128,h=!0,t=t.updateQueue,a.updateQueue=t,Vu(a,t),Ul(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!ut)return Dt(a),null}else 2*gt()-l.renderingStartTime>Hu&&r!==536870912&&(a.flags|=128,h=!0,Ul(l,!1),a.lanes=4194304);l.isBackwards?(p.sibling=a.child,a.child=p):(t=l.last,t!==null?t.sibling=p:a.child=p,l.last=p)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=gt(),t.sibling=null,r=Yt.current,de(Yt,h?r&1|2:r&1),ut&&Ei(a,l.treeForkCount),t):(Dt(a),null);case 22:case 23:return Xn(a),oh(),l=a.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(r&536870912)!==0&&(a.flags&128)===0&&(Dt(a),a.subtreeFlags&6&&(a.flags|=8192)):Dt(a),r=a.updateQueue,r!==null&&Vu(a,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==r&&(a.flags|=2048),t!==null&&ee(mr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),wi(an),Dt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function HA(t,a){switch($f(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return wi(an),tt(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Gt(a),null;case 31:if(a.memoizedState!==null){if(Xn(a),a.alternate===null)throw Error(s(340));fr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(Xn(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(s(340));fr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return ee(Yt),null;case 4:return tt(),null;case 10:return wi(a.type),null;case 22:case 23:return Xn(a),oh(),t!==null&&ee(mr),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return wi(an),null;case 25:return null;default:return null}}function jy(t,a){switch($f(a),a.tag){case 3:wi(an),tt();break;case 26:case 27:case 5:Gt(a);break;case 4:tt();break;case 31:a.memoizedState!==null&&Xn(a);break;case 13:Xn(a);break;case 19:ee(Yt);break;case 10:wi(a.type);break;case 22:case 23:Xn(a),oh(),t!==null&&ee(mr);break;case 24:wi(an)}}function Bl(t,a){try{var r=a.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var h=l.next;r=h;do{if((r.tag&t)===t){l=void 0;var p=r.create,x=r.inst;l=p(),x.destroy=l}r=r.next}while(r!==h)}}catch(A){St(a,a.return,A)}}function ps(t,a,r){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&t)===t){var x=l.inst,A=x.destroy;if(A!==void 0){x.destroy=void 0,h=a;var D=r,$=A;try{$()}catch(ne){St(h,D,ne)}}}l=l.next}while(l!==p)}}catch(ne){St(a,a.return,ne)}}function ky(t){var a=t.updateQueue;if(a!==null){var r=t.stateNode;try{E0(a,r)}catch(l){St(t,t.return,l)}}}function Oy(t,a,r){r.props=vr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){St(t,a,l)}}function Hl(t,a){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(h){St(t,a,h)}}function ni(t,a){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(h){St(t,a,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){St(t,a,h)}else r.current=null}function Dy(t){var a=t.type,r=t.memoizedProps,l=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(h){St(t,t.return,h)}}function Lh(t,a,r){try{var l=t.stateNode;uw(l,t.type,r,a),l[hn]=a}catch(h){St(t,t.return,h)}}function My(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&_s(t.type)||t.tag===4}function Uh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||My(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&_s(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bh(t,a,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(t),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=Aa));else if(l!==4&&(l===27&&_s(t.type)&&(r=t.stateNode,a=null),t=t.child,t!==null))for(Bh(t,a,r),t=t.sibling;t!==null;)Bh(t,a,r),t=t.sibling}function zu(t,a,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?r.insertBefore(t,a):r.appendChild(t);else if(l!==4&&(l===27&&_s(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(zu(t,a,r),t=t.sibling;t!==null;)zu(t,a,r),t=t.sibling}function Py(t){var a=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,h=a.attributes;h.length;)a.removeAttributeNode(h[0]);_n(a,l,r),a[en]=t,a[hn]=r}catch(p){St(t,t.return,p)}}var Ci=!1,on=!1,Hh=!1,Vy=typeof WeakSet=="function"?WeakSet:Set,mn=null;function qA(t,a){if(t=t.containerInfo,cp=sd,t=Qg(t),Mf(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var h=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var x=0,A=-1,D=-1,$=0,ne=0,le=t,Y=null;t:for(;;){for(var Z;le!==r||h!==0&&le.nodeType!==3||(A=x+h),le!==p||l!==0&&le.nodeType!==3||(D=x+l),le.nodeType===3&&(x+=le.nodeValue.length),(Z=le.firstChild)!==null;)Y=le,le=Z;for(;;){if(le===t)break t;if(Y===r&&++$===h&&(A=x),Y===p&&++ne===l&&(D=x),(Z=le.nextSibling)!==null)break;le=Y,Y=le.parentNode}le=Z}r=A===-1||D===-1?null:{start:A,end:D}}else r=null}r=r||{start:0,end:0}}else r=null;for(up={focusedElem:t,selectionRange:r},sd=!1,mn=a;mn!==null;)if(a=mn,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,mn=t;else for(;mn!==null;){switch(a=mn,p=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)h=t[r],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,r=a,h=p.memoizedProps,p=p.memoizedState,l=r.stateNode;try{var Re=vr(r.type,h);t=l.getSnapshotBeforeUpdate(Re,p),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ve){St(r,r.return,Ve)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,r=t.nodeType,r===9)hp(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":hp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=a.sibling,t!==null){t.return=a.return,mn=t;break}mn=a.return}}function zy(t,a,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:ji(t,r),l&4&&Bl(5,r);break;case 1:if(ji(t,r),l&4)if(t=r.stateNode,a===null)try{t.componentDidMount()}catch(x){St(r,r.return,x)}else{var h=vr(r.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(h,a,t.__reactInternalSnapshotBeforeUpdate)}catch(x){St(r,r.return,x)}}l&64&&ky(r),l&512&&Hl(r,r.return);break;case 3:if(ji(t,r),l&64&&(t=r.updateQueue,t!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{E0(t,a)}catch(x){St(r,r.return,x)}}break;case 27:a===null&&l&4&&Py(r);case 26:case 5:ji(t,r),a===null&&l&4&&Dy(r),l&512&&Hl(r,r.return);break;case 12:ji(t,r);break;case 31:ji(t,r),l&4&&By(t,r);break;case 13:ji(t,r),l&4&&Hy(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=WA.bind(null,r),bw(t,r))));break;case 22:if(l=r.memoizedState!==null||Ci,!l){a=a!==null&&a.memoizedState!==null||on,h=Ci;var p=on;Ci=l,(on=a)&&!p?ki(t,r,(r.subtreeFlags&8772)!==0):ji(t,r),Ci=h,on=p}break;case 30:break;default:ji(t,r)}}function Ly(t){var a=t.alternate;a!==null&&(t.alternate=null,Ly(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Hr(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Vt=null,Pn=!1;function Ii(t,a,r){for(r=r.child;r!==null;)Uy(t,a,r),r=r.sibling}function Uy(t,a,r){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(He,r)}catch{}switch(r.tag){case 26:on||ni(r,a),Ii(t,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:on||ni(r,a);var l=Vt,h=Pn;_s(r.type)&&(Vt=r.stateNode,Pn=!1),Ii(t,a,r),Jl(r.stateNode),Vt=l,Pn=h;break;case 5:on||ni(r,a);case 6:if(l=Vt,h=Pn,Vt=null,Ii(t,a,r),Vt=l,Pn=h,Vt!==null)if(Pn)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(r.stateNode)}catch(p){St(r,a,p)}else try{Vt.removeChild(r.stateNode)}catch(p){St(r,a,p)}break;case 18:Vt!==null&&(Pn?(t=Vt,kb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),No(t)):kb(Vt,r.stateNode));break;case 4:l=Vt,h=Pn,Vt=r.stateNode.containerInfo,Pn=!0,Ii(t,a,r),Vt=l,Pn=h;break;case 0:case 11:case 14:case 15:ps(2,r,a),on||ps(4,r,a),Ii(t,a,r);break;case 1:on||(ni(r,a),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Oy(r,a,l)),Ii(t,a,r);break;case 21:Ii(t,a,r);break;case 22:on=(l=on)||r.memoizedState!==null,Ii(t,a,r),on=l;break;default:Ii(t,a,r)}}function By(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{No(t)}catch(r){St(a,a.return,r)}}}function Hy(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{No(t)}catch(r){St(a,a.return,r)}}function FA(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Vy),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Vy),a;default:throw Error(s(435,t.tag))}}function Lu(t,a){var r=FA(t);a.forEach(function(l){if(!r.has(l)){r.add(l);var h=ZA.bind(null,t,l);l.then(h,h)}})}function Vn(t,a){var r=a.deletions;if(r!==null)for(var l=0;l<r.length;l++){var h=r[l],p=t,x=a,A=x;e:for(;A!==null;){switch(A.tag){case 27:if(_s(A.type)){Vt=A.stateNode,Pn=!1;break e}break;case 5:Vt=A.stateNode,Pn=!1;break e;case 3:case 4:Vt=A.stateNode.containerInfo,Pn=!0;break e}A=A.return}if(Vt===null)throw Error(s(160));Uy(p,x,h),Vt=null,Pn=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)qy(a,t),a=a.sibling}var Ca=null;function qy(t,a){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Vn(a,t),zn(t),l&4&&(ps(3,t,t.return),Bl(3,t),ps(5,t,t.return));break;case 1:Vn(a,t),zn(t),l&512&&(on||r===null||ni(r,r.return)),l&64&&Ci&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var h=Ca;if(Vn(a,t),zn(t),l&512&&(on||r===null||ni(r,r.return)),l&4){var p=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){e:{l=t.type,r=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":p=h.getElementsByTagName("title")[0],(!p||p[Ha]||p[en]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(l),h.head.insertBefore(p,h.querySelector("head > title"))),_n(p,l,r),p[en]=t,tn(p),l=p;break e;case"link":var x=qb("link","href",h).get(l+(r.href||""));if(x){for(var A=0;A<x.length;A++)if(p=x[A],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){x.splice(A,1);break t}}p=h.createElement(l),_n(p,l,r),h.head.appendChild(p);break;case"meta":if(x=qb("meta","content",h).get(l+(r.content||""))){for(A=0;A<x.length;A++)if(p=x[A],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){x.splice(A,1);break t}}p=h.createElement(l),_n(p,l,r),h.head.appendChild(p);break;default:throw Error(s(468,l))}p[en]=t,tn(p),l=p}t.stateNode=l}else Fb(h,t.type,t.stateNode);else t.stateNode=Hb(h,l,t.memoizedProps);else p!==l?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,l===null?Fb(h,t.type,t.stateNode):Hb(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Lh(t,t.memoizedProps,r.memoizedProps)}break;case 27:Vn(a,t),zn(t),l&512&&(on||r===null||ni(r,r.return)),r!==null&&l&4&&Lh(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Vn(a,t),zn(t),l&512&&(on||r===null||ni(r,r.return)),t.flags&32){h=t.stateNode;try{Mn(h,"")}catch(Re){St(t,t.return,Re)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Lh(t,h,r!==null?r.memoizedProps:h)),l&1024&&(Hh=!0);break;case 6:if(Vn(a,t),zn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(Re){St(t,t.return,Re)}}break;case 3:if(td=null,h=Ca,Ca=Zu(a.containerInfo),Vn(a,t),Ca=h,zn(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{No(a.containerInfo)}catch(Re){St(t,t.return,Re)}Hh&&(Hh=!1,Fy(t));break;case 4:l=Ca,Ca=Zu(t.stateNode.containerInfo),Vn(a,t),zn(t),Ca=l;break;case 12:Vn(a,t),zn(t);break;case 31:Vn(a,t),zn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lu(t,l)));break;case 13:Vn(a,t),zn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Bu=gt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lu(t,l)));break;case 22:h=t.memoizedState!==null;var D=r!==null&&r.memoizedState!==null,$=Ci,ne=on;if(Ci=$||h,on=ne||D,Vn(a,t),on=ne,Ci=$,zn(t),l&8192)e:for(a=t.stateNode,a._visibility=h?a._visibility&-2:a._visibility|1,h&&(r===null||D||Ci||on||_r(t)),r=null,a=t;;){if(a.tag===5||a.tag===26){if(r===null){D=r=a;try{if(p=D.stateNode,h)x=p.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{A=D.stateNode;var le=D.memoizedProps.style,Y=le!=null&&le.hasOwnProperty("display")?le.display:null;A.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(Re){St(D,D.return,Re)}}}else if(a.tag===6){if(r===null){D=a;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(Re){St(D,D.return,Re)}}}else if(a.tag===18){if(r===null){D=a;try{var Z=D.stateNode;h?Ob(Z,!0):Ob(D.stateNode,!1)}catch(Re){St(D,D.return,Re)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Lu(t,r))));break;case 19:Vn(a,t),zn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lu(t,l)));break;case 30:break;case 21:break;default:Vn(a,t),zn(t)}}function zn(t){var a=t.flags;if(a&2){try{for(var r,l=t.return;l!==null;){if(My(l)){r=l;break}l=l.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var h=r.stateNode,p=Uh(t);zu(t,p,h);break;case 5:var x=r.stateNode;r.flags&32&&(Mn(x,""),r.flags&=-33);var A=Uh(t);zu(t,A,x);break;case 3:case 4:var D=r.stateNode.containerInfo,$=Uh(t);Bh(t,$,D);break;default:throw Error(s(161))}}catch(ne){St(t,t.return,ne)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function Fy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;Fy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function ji(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)zy(t,a.alternate,a),a=a.sibling}function _r(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:ps(4,a,a.return),_r(a);break;case 1:ni(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&Oy(a,a.return,r),_r(a);break;case 27:Jl(a.stateNode);case 26:case 5:ni(a,a.return),_r(a);break;case 22:a.memoizedState===null&&_r(a);break;case 30:_r(a);break;default:_r(a)}t=t.sibling}}function ki(t,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,h=t,p=a,x=p.flags;switch(p.tag){case 0:case 11:case 15:ki(h,p,r),Bl(4,p);break;case 1:if(ki(h,p,r),l=p,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch($){St(l,l.return,$)}if(l=p,h=l.updateQueue,h!==null){var A=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)_0(D[h],A)}catch($){St(l,l.return,$)}}r&&x&64&&ky(p),Hl(p,p.return);break;case 27:Py(p);case 26:case 5:ki(h,p,r),r&&l===null&&x&4&&Dy(p),Hl(p,p.return);break;case 12:ki(h,p,r);break;case 31:ki(h,p,r),r&&x&4&&By(h,p);break;case 13:ki(h,p,r),r&&x&4&&Hy(h,p);break;case 22:p.memoizedState===null&&ki(h,p,r),Hl(p,p.return);break;case 30:break;default:ki(h,p,r)}a=a.sibling}}function qh(t,a){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Rl(r))}function Fh(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Rl(t))}function Ia(t,a,r,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Gy(t,a,r,l),a=a.sibling}function Gy(t,a,r,l){var h=a.flags;switch(a.tag){case 0:case 11:case 15:Ia(t,a,r,l),h&2048&&Bl(9,a);break;case 1:Ia(t,a,r,l);break;case 3:Ia(t,a,r,l),h&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Rl(t)));break;case 12:if(h&2048){Ia(t,a,r,l),t=a.stateNode;try{var p=a.memoizedProps,x=p.id,A=p.onPostCommit;typeof A=="function"&&A(x,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){St(a,a.return,D)}}else Ia(t,a,r,l);break;case 31:Ia(t,a,r,l);break;case 13:Ia(t,a,r,l);break;case 23:break;case 22:p=a.stateNode,x=a.alternate,a.memoizedState!==null?p._visibility&2?Ia(t,a,r,l):ql(t,a):p._visibility&2?Ia(t,a,r,l):(p._visibility|=2,go(t,a,r,l,(a.subtreeFlags&10256)!==0||!1)),h&2048&&qh(x,a);break;case 24:Ia(t,a,r,l),h&2048&&Fh(a.alternate,a);break;default:Ia(t,a,r,l)}}function go(t,a,r,l,h){for(h=h&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=t,x=a,A=r,D=l,$=x.flags;switch(x.tag){case 0:case 11:case 15:go(p,x,A,D,h),Bl(8,x);break;case 23:break;case 22:var ne=x.stateNode;x.memoizedState!==null?ne._visibility&2?go(p,x,A,D,h):ql(p,x):(ne._visibility|=2,go(p,x,A,D,h)),h&&$&2048&&qh(x.alternate,x);break;case 24:go(p,x,A,D,h),h&&$&2048&&Fh(x.alternate,x);break;default:go(p,x,A,D,h)}a=a.sibling}}function ql(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=t,l=a,h=l.flags;switch(l.tag){case 22:ql(r,l),h&2048&&qh(l.alternate,l);break;case 24:ql(r,l),h&2048&&Fh(l.alternate,l);break;default:ql(r,l)}a=a.sibling}}var Fl=8192;function yo(t,a,r){if(t.subtreeFlags&Fl)for(t=t.child;t!==null;)$y(t,a,r),t=t.sibling}function $y(t,a,r){switch(t.tag){case 26:yo(t,a,r),t.flags&Fl&&t.memoizedState!==null&&Iw(r,Ca,t.memoizedState,t.memoizedProps);break;case 5:yo(t,a,r);break;case 3:case 4:var l=Ca;Ca=Zu(t.stateNode.containerInfo),yo(t,a,r),Ca=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Fl,Fl=16777216,yo(t,a,r),Fl=l):yo(t,a,r));break;default:yo(t,a,r)}}function Ky(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Gl(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var l=a[r];mn=l,Qy(l,t)}Ky(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Yy(t),t=t.sibling}function Yy(t){switch(t.tag){case 0:case 11:case 15:Gl(t),t.flags&2048&&ps(9,t,t.return);break;case 3:Gl(t);break;case 12:Gl(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Uu(t)):Gl(t);break;default:Gl(t)}}function Uu(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var l=a[r];mn=l,Qy(l,t)}Ky(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:ps(8,a,a.return),Uu(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,Uu(a));break;default:Uu(a)}t=t.sibling}}function Qy(t,a){for(;mn!==null;){var r=mn;switch(r.tag){case 0:case 11:case 15:ps(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Rl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,mn=l;else e:for(r=t;mn!==null;){l=mn;var h=l.sibling,p=l.return;if(Ly(l),l===r){mn=null;break e}if(h!==null){h.return=p,mn=h;break e}mn=p}}}var GA={getCacheForType:function(t){var a=xn(an),r=a.data.get(t);return r===void 0&&(r=t(),a.data.set(t,r)),r},cacheSignal:function(){return xn(an).controller.signal}},$A=typeof WeakMap=="function"?WeakMap:Map,_t=0,It=null,nt=null,st=0,wt=0,Jn=null,ms=!1,bo=!1,Gh=!1,Oi=0,qt=0,gs=0,Er=0,$h=0,Wn=0,xo=0,$l=null,Ln=null,Kh=!1,Bu=0,Xy=0,Hu=1/0,qu=null,ys=null,dn=0,bs=null,vo=null,Di=0,Yh=0,Qh=null,Jy=null,Kl=0,Xh=null;function Zn(){return(_t&2)!==0&&st!==0?st&-st:H.T!==null?np():Fc()}function Wy(){if(Wn===0)if((st&536870912)===0||ut){var t=Qs;Qs<<=1,(Qs&3932160)===0&&(Qs=262144),Wn=t}else Wn=536870912;return t=Qn.current,t!==null&&(t.flags|=32),Wn}function Un(t,a,r){(t===It&&(wt===2||wt===9)||t.cancelPendingCommit!==null)&&(_o(t,0),xs(t,st,Wn,!1)),Xs(t,r),((_t&2)===0||t!==It)&&(t===It&&((_t&2)===0&&(Er|=r),qt===4&&xs(t,st,Wn,!1)),ai(t))}function Zy(t,a,r){if((_t&6)!==0)throw Error(s(327));var l=!r&&(a&127)===0&&(a&t.expiredLanes)===0||va(t,a),h=l?QA(t,a):Wh(t,a,!0),p=l;do{if(h===0){bo&&!l&&xs(t,a,0,!1);break}else{if(r=t.current.alternate,p&&!KA(r)){h=Wh(t,a,!1),p=!1;continue}if(h===2){if(p=a,t.errorRecoveryDisabledLanes&p)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var A=t;h=$l;var D=A.current.memoizedState.isDehydrated;if(D&&(_o(A,x).flags|=256),x=Wh(A,x,!1),x!==2){if(Gh&&!D){A.errorRecoveryDisabledLanes|=p,Er|=p,h=4;break e}p=Ln,Ln=h,p!==null&&(Ln===null?Ln=p:Ln.push.apply(Ln,p))}h=x}if(p=!1,h!==2)continue}}if(h===1){_o(t,0),xs(t,a,0,!0);break}e:{switch(l=t,p=h,p){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:xs(l,a,Wn,!ms);break e;case 2:Ln=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(h=Bu+300-gt(),10<h)){if(xs(l,a,Wn,!ms),La(l,0,!0)!==0)break e;Di=a,l.timeoutHandle=Ib(eb.bind(null,l,r,Ln,qu,Kh,a,Wn,Er,xo,ms,p,"Throttled",-0,0),h);break e}eb(l,r,Ln,qu,Kh,a,Wn,Er,xo,ms,p,null,-0,0)}}break}while(!0);ai(t)}function eb(t,a,r,l,h,p,x,A,D,$,ne,le,Y,Z){if(t.timeoutHandle=-1,le=a.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Aa},$y(a,p,le);var Re=(p&62914560)===p?Bu-gt():(p&4194048)===p?Xy-gt():0;if(Re=jw(le,Re),Re!==null){Di=p,t.cancelPendingCommit=Re(lb.bind(null,t,a,p,r,l,h,x,A,D,ne,le,null,Y,Z)),xs(t,p,x,!$);return}}lb(t,a,p,r,l,h,x,A,D)}function KA(t){for(var a=t;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var h=r[l],p=h.getSnapshot;h=h.value;try{if(!Kn(p(),h))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function xs(t,a,r,l){a&=~$h,a&=~Er,t.suspendedLanes|=a,t.pingedLanes&=~a,l&&(t.warmLanes|=a),l=t.expirationTimes;for(var h=a;0<h;){var p=31-Ke(h),x=1<<p;l[p]=-1,h&=~x}r!==0&&Js(t,r,a)}function Fu(){return(_t&6)===0?(Yl(0),!1):!0}function Jh(){if(nt!==null){if(wt===0)var t=nt.return;else t=nt,Ai=hr=null,hh(t),uo=null,Il=0,t=nt;for(;t!==null;)jy(t.alternate,t),t=t.return;nt=null}}function _o(t,a){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,hw(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Di=0,Jh(),It=t,nt=r=_i(t.current,null),st=a,wt=0,Jn=null,ms=!1,bo=va(t,a),Gh=!1,xo=Wn=$h=Er=gs=qt=0,Ln=$l=null,Kh=!1,(a&8)!==0&&(a|=a&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=a;0<l;){var h=31-Ke(l),p=1<<h;a|=t[h],l&=~p}return Oi=a,du(),r}function tb(t,a){Ze=null,H.H=zl,a===co||a===xu?(a=y0(),wt=3):a===th?(a=y0(),wt=4):wt=a===Ch?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Jn=a,nt===null&&(qt=1,Ou(t,la(a,t.current)))}function nb(){var t=Qn.current;return t===null?!0:(st&4194048)===st?fa===null:(st&62914560)===st||(st&536870912)!==0?t===fa:!1}function ab(){var t=H.H;return H.H=zl,t===null?zl:t}function ib(){var t=H.A;return H.A=GA,t}function Gu(){qt=4,ms||(st&4194048)!==st&&Qn.current!==null||(bo=!0),(gs&134217727)===0&&(Er&134217727)===0||It===null||xs(It,st,Wn,!1)}function Wh(t,a,r){var l=_t;_t|=2;var h=ab(),p=ib();(It!==t||st!==a)&&(qu=null,_o(t,a)),a=!1;var x=qt;e:do try{if(wt!==0&&nt!==null){var A=nt,D=Jn;switch(wt){case 8:Jh(),x=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(a=!0);var $=wt;if(wt=0,Jn=null,Eo(t,A,D,$),r&&bo){x=0;break e}break;default:$=wt,wt=0,Jn=null,Eo(t,A,D,$)}}YA(),x=qt;break}catch(ne){tb(t,ne)}while(!0);return a&&t.shellSuspendCounter++,Ai=hr=null,_t=l,H.H=h,H.A=p,nt===null&&(It=null,st=0,du()),x}function YA(){for(;nt!==null;)sb(nt)}function QA(t,a){var r=_t;_t|=2;var l=ab(),h=ib();It!==t||st!==a?(qu=null,Hu=gt()+500,_o(t,a)):bo=va(t,a);e:do try{if(wt!==0&&nt!==null){a=nt;var p=Jn;t:switch(wt){case 1:wt=0,Jn=null,Eo(t,a,p,1);break;case 2:case 9:if(m0(p)){wt=0,Jn=null,rb(a);break}a=function(){wt!==2&&wt!==9||It!==t||(wt=7),ai(t)},p.then(a,a);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:m0(p)?(wt=0,Jn=null,rb(a)):(wt=0,Jn=null,Eo(t,a,p,7));break;case 5:var x=null;switch(nt.tag){case 26:x=nt.memoizedState;case 5:case 27:var A=nt;if(x?Gb(x):A.stateNode.complete){wt=0,Jn=null;var D=A.sibling;if(D!==null)nt=D;else{var $=A.return;$!==null?(nt=$,$u($)):nt=null}break t}}wt=0,Jn=null,Eo(t,a,p,5);break;case 6:wt=0,Jn=null,Eo(t,a,p,6);break;case 8:Jh(),qt=6;break e;default:throw Error(s(462))}}XA();break}catch(ne){tb(t,ne)}while(!0);return Ai=hr=null,H.H=l,H.A=h,_t=r,nt!==null?0:(It=null,st=0,du(),qt)}function XA(){for(;nt!==null&&!K();)sb(nt)}function sb(t){var a=Cy(t.alternate,t,Oi);t.memoizedProps=t.pendingProps,a===null?$u(t):nt=a}function rb(t){var a=t,r=a.alternate;switch(a.tag){case 15:case 0:a=Ay(r,a,a.pendingProps,a.type,void 0,st);break;case 11:a=Ay(r,a,a.pendingProps,a.type.render,a.ref,st);break;case 5:hh(a);default:jy(r,a),a=nt=i0(a,Oi),a=Cy(r,a,Oi)}t.memoizedProps=t.pendingProps,a===null?$u(t):nt=a}function Eo(t,a,r,l){Ai=hr=null,hh(a),uo=null,Il=0;var h=a.return;try{if(zA(t,h,a,r,st)){qt=1,Ou(t,la(r,t.current)),nt=null;return}}catch(p){if(h!==null)throw nt=h,p;qt=1,Ou(t,la(r,t.current)),nt=null;return}a.flags&32768?(ut||l===1?t=!0:bo||(st&536870912)!==0?t=!1:(ms=t=!0,(l===2||l===9||l===3||l===6)&&(l=Qn.current,l!==null&&l.tag===13&&(l.flags|=16384))),ob(a,t)):$u(a)}function $u(t){var a=t;do{if((a.flags&32768)!==0){ob(a,ms);return}t=a.return;var r=BA(a.alternate,a,Oi);if(r!==null){nt=r;return}if(a=a.sibling,a!==null){nt=a;return}nt=a=t}while(a!==null);qt===0&&(qt=5)}function ob(t,a){do{var r=HA(t.alternate,t);if(r!==null){r.flags&=32767,nt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(t=t.sibling,t!==null)){nt=t;return}nt=t=r}while(t!==null);qt=6,nt=null}function lb(t,a,r,l,h,p,x,A,D){t.cancelPendingCommit=null;do Ku();while(dn!==0);if((_t&6)!==0)throw Error(s(327));if(a!==null){if(a===t.current)throw Error(s(177));if(p=a.lanes|a.childLanes,p|=Uf,jf(t,r,p,x,A,D),t===It&&(nt=It=null,st=0),vo=a,bs=t,Di=r,Yh=p,Qh=h,Jy=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ew($e,function(){return hb(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=H.T,H.T=null,h=re.p,re.p=2,x=_t,_t|=4;try{qA(t,a,r)}finally{_t=x,re.p=h,H.T=l}}dn=1,cb(),ub(),db()}}function cb(){if(dn===1){dn=0;var t=bs,a=vo,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=H.T,H.T=null;var l=re.p;re.p=2;var h=_t;_t|=4;try{qy(a,t);var p=up,x=Qg(t.containerInfo),A=p.focusedElem,D=p.selectionRange;if(x!==A&&A&&A.ownerDocument&&Yg(A.ownerDocument.documentElement,A)){if(D!==null&&Mf(A)){var $=D.start,ne=D.end;if(ne===void 0&&(ne=$),"selectionStart"in A)A.selectionStart=$,A.selectionEnd=Math.min(ne,A.value.length);else{var le=A.ownerDocument||document,Y=le&&le.defaultView||window;if(Y.getSelection){var Z=Y.getSelection(),Re=A.textContent.length,Ve=Math.min(D.start,Re),Ct=D.end===void 0?Ve:Math.min(D.end,Re);!Z.extend&&Ve>Ct&&(x=Ct,Ct=Ve,Ve=x);var B=Kg(A,Ve),z=Kg(A,Ct);if(B&&z&&(Z.rangeCount!==1||Z.anchorNode!==B.node||Z.anchorOffset!==B.offset||Z.focusNode!==z.node||Z.focusOffset!==z.offset)){var G=le.createRange();G.setStart(B.node,B.offset),Z.removeAllRanges(),Ve>Ct?(Z.addRange(G),Z.extend(z.node,z.offset)):(G.setEnd(z.node,z.offset),Z.addRange(G))}}}}for(le=[],Z=A;Z=Z.parentNode;)Z.nodeType===1&&le.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<le.length;A++){var se=le[A];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}sd=!!cp,up=cp=null}finally{_t=h,re.p=l,H.T=r}}t.current=a,dn=2}}function ub(){if(dn===2){dn=0;var t=bs,a=vo,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=H.T,H.T=null;var l=re.p;re.p=2;var h=_t;_t|=4;try{zy(t,a.alternate,a)}finally{_t=h,re.p=l,H.T=r}}dn=3}}function db(){if(dn===4||dn===3){dn=0,Me();var t=bs,a=vo,r=Di,l=Jy;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?dn=5:(dn=0,vo=bs=null,fb(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ys=null),yi(r),a=a.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(He,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=H.T,h=re.p,re.p=2,H.T=null;try{for(var p=t.onRecoverableError,x=0;x<l.length;x++){var A=l[x];p(A.value,{componentStack:A.stack})}}finally{H.T=a,re.p=h}}(Di&3)!==0&&Ku(),ai(t),h=t.pendingLanes,(r&261930)!==0&&(h&42)!==0?t===Xh?Kl++:(Kl=0,Xh=t):Kl=0,Yl(0)}}function fb(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Rl(a)))}function Ku(){return cb(),ub(),db(),hb()}function hb(){if(dn!==5)return!1;var t=bs,a=Yh;Yh=0;var r=yi(Di),l=H.T,h=re.p;try{re.p=32>r?32:r,H.T=null,r=Qh,Qh=null;var p=bs,x=Di;if(dn=0,vo=bs=null,Di=0,(_t&6)!==0)throw Error(s(331));var A=_t;if(_t|=4,Yy(p.current),Gy(p,p.current,x,r),_t=A,Yl(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(He,p)}catch{}return!0}finally{re.p=h,H.T=l,fb(t,a)}}function pb(t,a,r){a=la(r,a),a=Rh(t.stateNode,a,2),t=ds(t,a,2),t!==null&&(Xs(t,2),ai(t))}function St(t,a,r){if(t.tag===3)pb(t,t,r);else for(;a!==null;){if(a.tag===3){pb(a,t,r);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ys===null||!ys.has(l))){t=la(r,t),r=my(2),l=ds(a,r,2),l!==null&&(gy(r,l,a,t),Xs(l,2),ai(l));break}}a=a.return}}function Zh(t,a,r){var l=t.pingCache;if(l===null){l=t.pingCache=new $A;var h=new Set;l.set(a,h)}else h=l.get(a),h===void 0&&(h=new Set,l.set(a,h));h.has(r)||(Gh=!0,h.add(r),t=JA.bind(null,t,a,r),a.then(t,t))}function JA(t,a,r){var l=t.pingCache;l!==null&&l.delete(a),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,It===t&&(st&r)===r&&(qt===4||qt===3&&(st&62914560)===st&&300>gt()-Bu?(_t&2)===0&&_o(t,0):$h|=r,xo===st&&(xo=0)),ai(t)}function mb(t,a){a===0&&(a=qc()),t=ur(t,a),t!==null&&(Xs(t,a),ai(t))}function WA(t){var a=t.memoizedState,r=0;a!==null&&(r=a.retryLane),mb(t,r)}function ZA(t,a){var r=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(r=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(a),mb(t,r)}function ew(t,a){return Ie(t,a)}var Yu=null,Ao=null,ep=!1,Qu=!1,tp=!1,vs=0;function ai(t){t!==Ao&&t.next===null&&(Ao===null?Yu=Ao=t:Ao=Ao.next=t),Qu=!0,ep||(ep=!0,nw())}function Yl(t,a){if(!tp&&Qu){tp=!0;do for(var r=!1,l=Yu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var p=0;else{var x=l.suspendedLanes,A=l.pingedLanes;p=(1<<31-Ke(42|t)+1)-1,p&=h&~(x&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,xb(l,p))}else p=st,p=La(l,l===It?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||va(l,p)||(r=!0,xb(l,p));l=l.next}while(r);tp=!1}}function tw(){gb()}function gb(){Qu=ep=!1;var t=0;vs!==0&&fw()&&(t=vs);for(var a=gt(),r=null,l=Yu;l!==null;){var h=l.next,p=yb(l,a);p===0?(l.next=null,r===null?Yu=h:r.next=h,h===null&&(Ao=r)):(r=l,(t!==0||(p&3)!==0)&&(Qu=!0)),l=h}dn!==0&&dn!==5||Yl(t),vs!==0&&(vs=0)}function yb(t,a){for(var r=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var x=31-Ke(p),A=1<<x,D=h[x];D===-1?((A&r)===0||(A&l)!==0)&&(h[x]=If(A,a)):D<=a&&(t.expiredLanes|=A),p&=~A}if(a=It,r=st,r=La(t,t===a?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===a&&(wt===2||wt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&mt(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||va(t,r)){if(a=r&-r,a===t.callbackPriority)return a;switch(l!==null&&mt(l),yi(r)){case 2:case 8:r=Pe;break;case 32:r=$e;break;case 268435456:r=Be;break;default:r=$e}return l=bb.bind(null,t),r=Ie(r,l),t.callbackPriority=a,t.callbackNode=r,a}return l!==null&&l!==null&&mt(l),t.callbackPriority=2,t.callbackNode=null,2}function bb(t,a){if(dn!==0&&dn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Ku()&&t.callbackNode!==r)return null;var l=st;return l=La(t,t===It?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Zy(t,l,a),yb(t,gt()),t.callbackNode!=null&&t.callbackNode===r?bb.bind(null,t):null)}function xb(t,a){if(Ku())return null;Zy(t,a,!0)}function nw(){pw(function(){(_t&6)!==0?Ie(W,tw):gb()})}function np(){if(vs===0){var t=oo;t===0&&(t=Va,Va<<=1,(Va&261888)===0&&(Va=256)),vs=t}return vs}function vb(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:$r(""+t)}function _b(t,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,t.id&&r.setAttribute("form",t.id),a.parentNode.insertBefore(r,a),t=new FormData(t),r.parentNode.removeChild(r),t}function aw(t,a,r,l,h){if(a==="submit"&&r&&r.stateNode===h){var p=vb((h[hn]||null).action),x=l.submitter;x&&(a=(a=x[hn]||null)?vb(a.formAction):x.getAttribute("formAction"),a!==null&&(p=a,x=null));var A=new Xa("action","action",null,l,h);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(vs!==0){var D=x?_b(h,x):new FormData(h);Eh(r,{pending:!0,data:D,method:h.method,action:p},null,D)}}else typeof p=="function"&&(A.preventDefault(),D=x?_b(h,x):new FormData(h),Eh(r,{pending:!0,data:D,method:h.method,action:p},p,D))},currentTarget:h}]})}}for(var ap=0;ap<Lf.length;ap++){var ip=Lf[ap],iw=ip.toLowerCase(),sw=ip[0].toUpperCase()+ip.slice(1);Ra(iw,"on"+sw)}Ra(Wg,"onAnimationEnd"),Ra(Zg,"onAnimationIteration"),Ra(e0,"onAnimationStart"),Ra("dblclick","onDoubleClick"),Ra("focusin","onFocus"),Ra("focusout","onBlur"),Ra(_A,"onTransitionRun"),Ra(EA,"onTransitionStart"),Ra(AA,"onTransitionCancel"),Ra(t0,"onTransitionEnd"),$a("onMouseEnter",["mouseout","mouseover"]),$a("onMouseLeave",["mouseout","mouseover"]),$a("onPointerEnter",["pointerout","pointerover"]),$a("onPointerLeave",["pointerout","pointerover"]),Ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ga("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ql));function Eb(t,a){a=(a&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],h=l.event;l=l.listeners;e:{var p=void 0;if(a)for(var x=l.length-1;0<=x;x--){var A=l[x],D=A.instance,$=A.currentTarget;if(A=A.listener,D!==p&&h.isPropagationStopped())break e;p=A,h.currentTarget=$;try{p(h)}catch(ne){uu(ne)}h.currentTarget=null,p=D}else for(x=0;x<l.length;x++){if(A=l[x],D=A.instance,$=A.currentTarget,A=A.listener,D!==p&&h.isPropagationStopped())break e;p=A,h.currentTarget=$;try{p(h)}catch(ne){uu(ne)}h.currentTarget=null,p=D}}}}function at(t,a){var r=a[Br];r===void 0&&(r=a[Br]=new Set);var l=t+"__bubble";r.has(l)||(Ab(a,t,2,!1),r.add(l))}function sp(t,a,r){var l=0;a&&(l|=4),Ab(r,t,l,a)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function rp(t){if(!t[Xu]){t[Xu]=!0,ol.forEach(function(r){r!=="selectionchange"&&(rw.has(r)||sp(r,!1,t),sp(r,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Xu]||(a[Xu]=!0,sp("selectionchange",!1,a))}}function Ab(t,a,r,l){switch(Wb(a)){case 2:var h=Dw;break;case 8:h=Mw;break;default:h=_p}r=h.bind(null,a,r,t),h=void 0,!nr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(a,r,{capture:!0,passive:h}):t.addEventListener(a,r,!0):h!==void 0?t.addEventListener(a,r,{passive:h}):t.addEventListener(a,r,!1)}function op(t,a,r,l,h){var p=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var A=l.stateNode.containerInfo;if(A===h)break;if(x===4)for(x=l.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===h)return;x=x.return}for(;A!==null;){if(x=qa(A),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){l=p=x;continue e}A=A.parentNode}}l=l.return}ts(function(){var $=p,ne=ia(r),le=[];e:{var Y=n0.get(t);if(Y!==void 0){var Z=Xa,Re=t;switch(t){case"keypress":if(ir(r)===0)break e;case"keydown":case"keyup":Z=ou;break;case"focusin":Re="focus",Z=rr;break;case"focusout":Re="blur",Z=rr;break;case"beforeblur":case"afterblur":Z=rr;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Wc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=b;break;case Wg:case Zg:case e0:Z=eu;break;case t0:Z=S;break;case"scroll":case"scrollend":Z=xl;break;case"wheel":Z=J;break;case"copy":case"cut":case"paste":Z=tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=vi;break;case"toggle":case"beforetoggle":Z=We}var Ve=(a&4)!==0,Ct=!Ve&&(t==="scroll"||t==="scrollend"),B=Ve?Y!==null?Y+"Capture":null:Y;Ve=[];for(var z=$,G;z!==null;){var se=z;if(G=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||G===null||B===null||(se=wa(z,B),se!=null&&Ve.push(Xl(z,se,G))),Ct)break;z=z.return}0<Ve.length&&(Y=new Z(Y,Re,null,r,ne),le.push({event:Y,listeners:Ve}))}}if((a&7)===0){e:{if(Y=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",Y&&r!==gl&&(Re=r.relatedTarget||r.fromElement)&&(qa(Re)||Re[Ba]))break e;if((Z||Y)&&(Y=ne.window===ne?ne:(Y=ne.ownerDocument)?Y.defaultView||Y.parentWindow:window,Z?(Re=r.relatedTarget||r.toElement,Z=$,Re=Re?qa(Re):null,Re!==null&&(Ct=c(Re),Ve=Re.tag,Re!==Ct||Ve!==5&&Ve!==27&&Ve!==6)&&(Re=null)):(Z=null,Re=$),Z!==Re)){if(Ve=vl,se="onMouseLeave",B="onMouseEnter",z="mouse",(t==="pointerout"||t==="pointerover")&&(Ve=vi,se="onPointerLeave",B="onPointerEnter",z="pointer"),Ct=Z==null?Y:Gn(Z),G=Re==null?Y:Gn(Re),Y=new Ve(se,z+"leave",Z,r,ne),Y.target=Ct,Y.relatedTarget=G,se=null,qa(ne)===$&&(Ve=new Ve(B,z+"enter",Re,r,ne),Ve.target=G,Ve.relatedTarget=Ct,se=Ve),Ct=se,Z&&Re)t:{for(Ve=ow,B=Z,z=Re,G=0,se=B;se;se=Ve(se))G++;se=0;for(var Oe=z;Oe;Oe=Ve(Oe))se++;for(;0<G-se;)B=Ve(B),G--;for(;0<se-G;)z=Ve(z),se--;for(;G--;){if(B===z||z!==null&&B===z.alternate){Ve=B;break t}B=Ve(B),z=Ve(z)}Ve=null}else Ve=null;Z!==null&&wb(le,Y,Z,Ve,!1),Re!==null&&Ct!==null&&wb(le,Ct,Re,Ve,!0)}}e:{if(Y=$?Gn($):window,Z=Y.nodeName&&Y.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Y.type==="file")var yt=Bg;else if(Lg(Y))if(Hg)yt=bA;else{yt=gA;var Ce=mA}else Z=Y.nodeName,!Z||Z.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?$&&Gr($.elementType)&&(yt=Bg):yt=yA;if(yt&&(yt=yt(t,$))){Ug(le,yt,r,ne);break e}Ce&&Ce(t,Y,$),t==="focusout"&&$&&Y.type==="number"&&$.memoizedProps.value!=null&&hl(Y,"number",Y.value)}switch(Ce=$?Gn($):window,t){case"focusin":(Lg(Ce)||Ce.contentEditable==="true")&&(Zr=Ce,Pf=$,Sl=null);break;case"focusout":Sl=Pf=Zr=null;break;case"mousedown":Vf=!0;break;case"contextmenu":case"mouseup":case"dragend":Vf=!1,Xg(le,r,ne);break;case"selectionchange":if(vA)break;case"keydown":case"keyup":Xg(le,r,ne)}var et;if(vt)e:{switch(t){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else Wr?or(t,r)&&(rt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(rt="onCompositionStart");rt&&(Za&&r.locale!=="ko"&&(Wr||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&Wr&&(et=bl()):(Qa=ne,yl="value"in Qa?Qa.value:Qa.textContent,Wr=!0)),Ce=Ju($,rt),0<Ce.length&&(rt=new Wa(rt,t,null,r,ne),le.push({event:rt,listeners:Ce}),et?rt.data=et:(et=Jr(r),et!==null&&(rt.data=et)))),(et=ra?dA(t,r):fA(t,r))&&(rt=Ju($,"onBeforeInput"),0<rt.length&&(Ce=new Wa("onBeforeInput","beforeinput",null,r,ne),le.push({event:Ce,listeners:rt}),Ce.data=et)),aw(le,t,$,r,ne)}Eb(le,a)})}function Xl(t,a,r){return{instance:t,listener:a,currentTarget:r}}function Ju(t,a){for(var r=a+"Capture",l=[];t!==null;){var h=t,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=wa(t,r),h!=null&&l.unshift(Xl(t,h,p)),h=wa(t,a),h!=null&&l.push(Xl(t,h,p))),t.tag===3)return l;t=t.return}return[]}function ow(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function wb(t,a,r,l,h){for(var p=a._reactName,x=[];r!==null&&r!==l;){var A=r,D=A.alternate,$=A.stateNode;if(A=A.tag,D!==null&&D===l)break;A!==5&&A!==26&&A!==27||$===null||(D=$,h?($=wa(r,p),$!=null&&x.unshift(Xl(r,$,D))):h||($=wa(r,p),$!=null&&x.push(Xl(r,$,D)))),r=r.return}x.length!==0&&t.push({event:a,listeners:x})}var lw=/\r\n?/g,cw=/\u0000|\uFFFD/g;function Sb(t){return(typeof t=="string"?t:""+t).replace(lw,`
`).replace(cw,"")}function Tb(t,a){return a=Sb(a),Sb(t)===a}function Rt(t,a,r,l,h,p){switch(r){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||Mn(t,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&Mn(t,""+l);break;case"className":$n(t,"class",l);break;case"tabIndex":$n(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":$n(t,r,l);break;case"style":ml(t,l,p);break;case"data":if(a!=="object"){$n(t,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=$r(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(a!=="input"&&Rt(t,a,"name",h.name,h,null),Rt(t,a,"formEncType",h.formEncType,h,null),Rt(t,a,"formMethod",h.formMethod,h,null),Rt(t,a,"formTarget",h.formTarget,h,null)):(Rt(t,a,"encType",h.encType,h,null),Rt(t,a,"method",h.method,h,null),Rt(t,a,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=$r(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=Aa);break;case"onScroll":l!=null&&at("scroll",t);break;case"onScrollEnd":l!=null&&at("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=$r(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":at("beforetoggle",t),at("toggle",t),qr(t,"popover",l);break;case"xlinkActuate":nn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":nn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":nn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":nn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":nn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":nn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":nn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":nn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":nn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":qr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Jc.get(r)||r,qr(t,r,l))}}function lp(t,a,r,l,h,p){switch(r){case"style":ml(t,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=r}}break;case"children":typeof l=="string"?Mn(t,l):(typeof l=="number"||typeof l=="bigint")&&Mn(t,""+l);break;case"onScroll":l!=null&&at("scroll",t);break;case"onScrollEnd":l!=null&&at("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Aa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ll.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),a=r.slice(2,h?r.length-7:void 0),p=t[hn]||null,p=p!=null?p[r]:null,typeof p=="function"&&t.removeEventListener(a,p,h),typeof l=="function")){typeof p!="function"&&p!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(a,l,h);break e}r in t?t[r]=l:l===!0?t.setAttribute(r,""):qr(t,r,l)}}}function _n(t,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",t),at("load",t);var l=!1,h=!1,p;for(p in r)if(r.hasOwnProperty(p)){var x=r[p];if(x!=null)switch(p){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Rt(t,a,p,x,r,null)}}h&&Rt(t,a,"srcSet",r.srcSet,r,null),l&&Rt(t,a,"src",r.src,r,null);return;case"input":at("invalid",t);var A=p=x=h=null,D=null,$=null;for(l in r)if(r.hasOwnProperty(l)){var ne=r[l];if(ne!=null)switch(l){case"name":h=ne;break;case"type":x=ne;break;case"checked":D=ne;break;case"defaultChecked":$=ne;break;case"value":p=ne;break;case"defaultValue":A=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,a));break;default:Rt(t,a,l,ne,r,null)}}Yc(t,p,A,D,$,x,h,!1);return;case"select":at("invalid",t),l=x=p=null;for(h in r)if(r.hasOwnProperty(h)&&(A=r[h],A!=null))switch(h){case"value":p=A;break;case"defaultValue":x=A;break;case"multiple":l=A;default:Rt(t,a,h,A,r,null)}a=p,r=x,t.multiple=!!l,a!=null?Ji(t,!!l,a,!1):r!=null&&Ji(t,!!l,r,!0);return;case"textarea":at("invalid",t),p=h=l=null;for(x in r)if(r.hasOwnProperty(x)&&(A=r[x],A!=null))switch(x){case"value":l=A;break;case"defaultValue":h=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:Rt(t,a,x,A,r,null)}Wi(t,l,h,p);return;case"option":for(D in r)r.hasOwnProperty(D)&&(l=r[D],l!=null)&&(D==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":Rt(t,a,D,l,r,null));return;case"dialog":at("beforetoggle",t),at("toggle",t),at("cancel",t),at("close",t);break;case"iframe":case"object":at("load",t);break;case"video":case"audio":for(l=0;l<Ql.length;l++)at(Ql[l],t);break;case"image":at("error",t),at("load",t);break;case"details":at("toggle",t);break;case"embed":case"source":case"link":at("error",t),at("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in r)if(r.hasOwnProperty($)&&(l=r[$],l!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Rt(t,a,$,l,r,null)}return;default:if(Gr(a)){for(ne in r)r.hasOwnProperty(ne)&&(l=r[ne],l!==void 0&&lp(t,a,ne,l,r,void 0));return}}for(A in r)r.hasOwnProperty(A)&&(l=r[A],l!=null&&Rt(t,a,A,l,r,null))}function uw(t,a,r,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,x=null,A=null,D=null,$=null,ne=null;for(Z in r){var le=r[Z];if(r.hasOwnProperty(Z)&&le!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":D=le;default:l.hasOwnProperty(Z)||Rt(t,a,Z,null,l,le)}}for(var Y in l){var Z=l[Y];if(le=r[Y],l.hasOwnProperty(Y)&&(Z!=null||le!=null))switch(Y){case"type":p=Z;break;case"name":h=Z;break;case"checked":$=Z;break;case"defaultChecked":ne=Z;break;case"value":x=Z;break;case"defaultValue":A=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,a));break;default:Z!==le&&Rt(t,a,Y,Z,l,le)}}Fr(t,x,A,D,$,ne,p,h);return;case"select":Z=x=A=Y=null;for(p in r)if(D=r[p],r.hasOwnProperty(p)&&D!=null)switch(p){case"value":break;case"multiple":Z=D;default:l.hasOwnProperty(p)||Rt(t,a,p,null,l,D)}for(h in l)if(p=l[h],D=r[h],l.hasOwnProperty(h)&&(p!=null||D!=null))switch(h){case"value":Y=p;break;case"defaultValue":A=p;break;case"multiple":x=p;default:p!==D&&Rt(t,a,h,p,l,D)}a=A,r=x,l=Z,Y!=null?Ji(t,!!r,Y,!1):!!l!=!!r&&(a!=null?Ji(t,!!r,a,!0):Ji(t,!!r,r?[]:"",!1));return;case"textarea":Z=Y=null;for(A in r)if(h=r[A],r.hasOwnProperty(A)&&h!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Rt(t,a,A,null,l,h)}for(x in l)if(h=l[x],p=r[x],l.hasOwnProperty(x)&&(h!=null||p!=null))switch(x){case"value":Y=h;break;case"defaultValue":Z=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==p&&Rt(t,a,x,h,l,p)}Qc(t,Y,Z);return;case"option":for(var Re in r)Y=r[Re],r.hasOwnProperty(Re)&&Y!=null&&!l.hasOwnProperty(Re)&&(Re==="selected"?t.selected=!1:Rt(t,a,Re,null,l,Y));for(D in l)Y=l[D],Z=r[D],l.hasOwnProperty(D)&&Y!==Z&&(Y!=null||Z!=null)&&(D==="selected"?t.selected=Y&&typeof Y!="function"&&typeof Y!="symbol":Rt(t,a,D,Y,l,Z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in r)Y=r[Ve],r.hasOwnProperty(Ve)&&Y!=null&&!l.hasOwnProperty(Ve)&&Rt(t,a,Ve,null,l,Y);for($ in l)if(Y=l[$],Z=r[$],l.hasOwnProperty($)&&Y!==Z&&(Y!=null||Z!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,a));break;default:Rt(t,a,$,Y,l,Z)}return;default:if(Gr(a)){for(var Ct in r)Y=r[Ct],r.hasOwnProperty(Ct)&&Y!==void 0&&!l.hasOwnProperty(Ct)&&lp(t,a,Ct,void 0,l,Y);for(ne in l)Y=l[ne],Z=r[ne],!l.hasOwnProperty(ne)||Y===Z||Y===void 0&&Z===void 0||lp(t,a,ne,Y,l,Z);return}}for(var B in r)Y=r[B],r.hasOwnProperty(B)&&Y!=null&&!l.hasOwnProperty(B)&&Rt(t,a,B,null,l,Y);for(le in l)Y=l[le],Z=r[le],!l.hasOwnProperty(le)||Y===Z||Y==null&&Z==null||Rt(t,a,le,Y,l,Z)}function Nb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var h=r[l],p=h.transferSize,x=h.initiatorType,A=h.duration;if(p&&A&&Nb(x)){for(x=0,A=h.responseEnd,l+=1;l<r.length;l++){var D=r[l],$=D.startTime;if($>A)break;var ne=D.transferSize,le=D.initiatorType;ne&&Nb(le)&&(D=D.responseEnd,x+=ne*(D<A?1:(A-$)/(D-$)))}if(--l,a+=8*(p+x)/(h.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var cp=null,up=null;function Wu(t){return t.nodeType===9?t:t.ownerDocument}function Rb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cb(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function dp(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var fp=null;function fw(){var t=window.event;return t&&t.type==="popstate"?t===fp?!1:(fp=t,!0):(fp=null,!1)}var Ib=typeof setTimeout=="function"?setTimeout:void 0,hw=typeof clearTimeout=="function"?clearTimeout:void 0,jb=typeof Promise=="function"?Promise:void 0,pw=typeof queueMicrotask=="function"?queueMicrotask:typeof jb<"u"?function(t){return jb.resolve(null).then(t).catch(mw)}:Ib;function mw(t){setTimeout(function(){throw t})}function _s(t){return t==="head"}function kb(t,a){var r=a,l=0;do{var h=r.nextSibling;if(t.removeChild(r),h&&h.nodeType===8)if(r=h.data,r==="/$"||r==="/&"){if(l===0){t.removeChild(h),No(a);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")Jl(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Jl(r);for(var p=r.firstChild;p;){var x=p.nextSibling,A=p.nodeName;p[Ha]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&p.rel.toLowerCase()==="stylesheet"||r.removeChild(p),p=x}}else r==="body"&&Jl(t.ownerDocument.body);r=h}while(r);No(a)}function Ob(t,a){var r=t;t=0;do{var l=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=l}while(r)}function hp(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":hp(r),Hr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function gw(t,a,r,l){for(;t.nodeType===1;){var h=r;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ha])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=ha(t.nextSibling),t===null)break}return null}function yw(t,a,r){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=ha(t.nextSibling),t===null))return null;return t}function Db(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ha(t.nextSibling),t===null))return null;return t}function pp(t){return t.data==="$?"||t.data==="$~"}function mp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function bw(t,a){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||r.readyState!=="loading")a();else{var l=function(){a(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ha(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var gp=null;function Mb(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(a===0)return ha(t.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}t=t.nextSibling}return null}function Pb(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return t;a--}else r!=="/$"&&r!=="/&"||a++}t=t.previousSibling}return null}function Vb(t,a,r){switch(a=Wu(r),t){case"html":if(t=a.documentElement,!t)throw Error(s(452));return t;case"head":if(t=a.head,!t)throw Error(s(453));return t;case"body":if(t=a.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Jl(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Hr(t)}var pa=new Map,zb=new Set;function Zu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Mi=re.d;re.d={f:xw,r:vw,D:_w,C:Ew,L:Aw,m:ww,X:Tw,S:Sw,M:Nw};function xw(){var t=Mi.f(),a=Fu();return t||a}function vw(t){var a=aa(t);a!==null&&a.tag===5&&a.type==="form"?ty(a):Mi.r(t)}var wo=typeof document>"u"?null:document;function Lb(t,a,r){var l=wo;if(l&&typeof a=="string"&&a){var h=Dn(a);h='link[rel="'+t+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),zb.has(h)||(zb.add(h),t={rel:t,crossOrigin:r,href:a},l.querySelector(h)===null&&(a=l.createElement("link"),_n(a,"link",t),tn(a),l.head.appendChild(a)))}}function _w(t){Mi.D(t),Lb("dns-prefetch",t,null)}function Ew(t,a){Mi.C(t,a),Lb("preconnect",t,a)}function Aw(t,a,r){Mi.L(t,a,r);var l=wo;if(l&&t&&a){var h='link[rel="preload"][as="'+Dn(a)+'"]';a==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+Dn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+Dn(r.imageSizes)+'"]')):h+='[href="'+Dn(t)+'"]';var p=h;switch(a){case"style":p=So(t);break;case"script":p=To(t)}pa.has(p)||(t=E({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:t,as:a},r),pa.set(p,t),l.querySelector(h)!==null||a==="style"&&l.querySelector(Wl(p))||a==="script"&&l.querySelector(Zl(p))||(a=l.createElement("link"),_n(a,"link",t),tn(a),l.head.appendChild(a)))}}function ww(t,a){Mi.m(t,a);var r=wo;if(r&&t){var l=a&&typeof a.as=="string"?a.as:"script",h='link[rel="modulepreload"][as="'+Dn(l)+'"][href="'+Dn(t)+'"]',p=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=To(t)}if(!pa.has(p)&&(t=E({rel:"modulepreload",href:t},a),pa.set(p,t),r.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Zl(p)))return}l=r.createElement("link"),_n(l,"link",t),tn(l),r.head.appendChild(l)}}}function Sw(t,a,r){Mi.S(t,a,r);var l=wo;if(l&&t){var h=Fa(l).hoistableStyles,p=So(t);a=a||"default";var x=h.get(p);if(!x){var A={loading:0,preload:null};if(x=l.querySelector(Wl(p)))A.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":a},r),(r=pa.get(p))&&yp(t,r);var D=x=l.createElement("link");tn(D),_n(D,"link",t),D._p=new Promise(function($,ne){D.onload=$,D.onerror=ne}),D.addEventListener("load",function(){A.loading|=1}),D.addEventListener("error",function(){A.loading|=2}),A.loading|=4,ed(x,a,l)}x={type:"stylesheet",instance:x,count:1,state:A},h.set(p,x)}}}function Tw(t,a){Mi.X(t,a);var r=wo;if(r&&t){var l=Fa(r).hoistableScripts,h=To(t),p=l.get(h);p||(p=r.querySelector(Zl(h)),p||(t=E({src:t,async:!0},a),(a=pa.get(h))&&bp(t,a),p=r.createElement("script"),tn(p),_n(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function Nw(t,a){Mi.M(t,a);var r=wo;if(r&&t){var l=Fa(r).hoistableScripts,h=To(t),p=l.get(h);p||(p=r.querySelector(Zl(h)),p||(t=E({src:t,async:!0,type:"module"},a),(a=pa.get(h))&&bp(t,a),p=r.createElement("script"),tn(p),_n(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function Ub(t,a,r,l){var h=(h=Ne.current)?Zu(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=So(r.href),r=Fa(h).hoistableStyles,l=r.get(a),l||(l={type:"style",instance:null,count:0,state:null},r.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=So(r.href);var p=Fa(h).hoistableStyles,x=p.get(t);if(x||(h=h.ownerDocument||h,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,x),(p=h.querySelector(Wl(t)))&&!p._p&&(x.instance=p,x.state.loading=5),pa.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},pa.set(t,r),p||Rw(h,t,r,x.state))),a&&l===null)throw Error(s(528,""));return x}if(a&&l!==null)throw Error(s(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=To(r),r=Fa(h).hoistableScripts,l=r.get(a),l||(l={type:"script",instance:null,count:0,state:null},r.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function So(t){return'href="'+Dn(t)+'"'}function Wl(t){return'link[rel="stylesheet"]['+t+"]"}function Bb(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function Rw(t,a,r,l){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=t.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),_n(a,"link",r),tn(a),t.head.appendChild(a))}function To(t){return'[src="'+Dn(t)+'"]'}function Zl(t){return"script[async]"+t}function Hb(t,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var l=t.querySelector('style[data-href~="'+Dn(r.href)+'"]');if(l)return a.instance=l,tn(l),l;var h=E({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),tn(l),_n(l,"style",h),ed(l,r.precedence,t),a.instance=l;case"stylesheet":h=So(r.href);var p=t.querySelector(Wl(h));if(p)return a.state.loading|=4,a.instance=p,tn(p),p;l=Bb(r),(h=pa.get(h))&&yp(l,h),p=(t.ownerDocument||t).createElement("link"),tn(p);var x=p;return x._p=new Promise(function(A,D){x.onload=A,x.onerror=D}),_n(p,"link",l),a.state.loading|=4,ed(p,r.precedence,t),a.instance=p;case"script":return p=To(r.src),(h=t.querySelector(Zl(p)))?(a.instance=h,tn(h),h):(l=r,(h=pa.get(p))&&(l=E({},r),bp(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),tn(h),_n(h,"link",l),t.head.appendChild(h),a.instance=h);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,ed(l,r.precedence,t));return a.instance}function ed(t,a,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,p=h,x=0;x<l.length;x++){var A=l[x];if(A.dataset.precedence===a)p=A;else if(p!==h)break}p?p.parentNode.insertBefore(t,p.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(t,a.firstChild))}function yp(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function bp(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var td=null;function qb(t,a,r){if(td===null){var l=new Map,h=td=new Map;h.set(r,l)}else h=td,l=h.get(r),l||(l=new Map,h.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),h=0;h<r.length;h++){var p=r[h];if(!(p[Ha]||p[en]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var x=p.getAttribute(a)||"";x=t+x;var A=l.get(x);A?A.push(p):l.set(x,[p])}}return l}function Fb(t,a,r){t=t.ownerDocument||t,t.head.insertBefore(r,a==="title"?t.querySelector("head > title"):null)}function Cw(t,a,r){if(r===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Gb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Iw(t,a,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=So(l.href),p=a.querySelector(Wl(h));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=nd.bind(t),a.then(t,t)),r.state.loading|=4,r.instance=p,tn(p);return}p=a.ownerDocument||a,l=Bb(l),(h=pa.get(h))&&yp(l,h),p=p.createElement("link"),tn(p);var x=p;x._p=new Promise(function(A,D){x.onload=A,x.onerror=D}),_n(p,"link",l),r.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=nd.bind(t),a.addEventListener("load",r),a.addEventListener("error",r))}}var xp=0;function jw(t,a){return t.stylesheets&&t.count===0&&id(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var l=setTimeout(function(){if(t.stylesheets&&id(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+a);0<t.imgBytes&&xp===0&&(xp=62500*dw());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&id(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>xp?50:800)+a);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function nd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)id(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ad=null;function id(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ad=new Map,a.forEach(kw,t),ad=null,nd.call(t))}function kw(t,a){if(!(a.state.loading&4)){var r=ad.get(t);if(r)var l=r.get(null);else{r=new Map,ad.set(t,r);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var x=h[p];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(r.set(x.dataset.precedence,x),l=x)}l&&r.set(null,l)}h=a.instance,x=h.getAttribute("data-precedence"),p=r.get(x)||l,p===l&&r.set(null,h),r.set(x,h),this.count++,l=nd.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),p?p.parentNode.insertBefore(h,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),a.state.loading|=4}}var ec={$$typeof:te,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function Ow(t,a,r,l,h,p,x,A,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ua(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ua(0),this.hiddenUpdates=Ua(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function $b(t,a,r,l,h,p,x,A,D,$,ne,le){return t=new Ow(t,a,r,x,D,$,ne,le,A),a=1,p===!0&&(a|=24),p=Yn(3,null,null,a),t.current=p,p.stateNode=t,a=Wf(),a.refCount++,t.pooledCache=a,a.refCount++,p.memoizedState={element:l,isDehydrated:r,cache:a},nh(p),t}function Kb(t){return t?(t=no,t):no}function Yb(t,a,r,l,h,p){h=Kb(h),l.context===null?l.context=h:l.pendingContext=h,l=us(a),l.payload={element:r},p=p===void 0?null:p,p!==null&&(l.callback=p),r=ds(t,l,a),r!==null&&(Un(r,t,a),kl(r,t,a))}function Qb(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<a?r:a}}function vp(t,a){Qb(t,a),(t=t.alternate)&&Qb(t,a)}function Xb(t){if(t.tag===13||t.tag===31){var a=ur(t,67108864);a!==null&&Un(a,t,67108864),vp(t,67108864)}}function Jb(t){if(t.tag===13||t.tag===31){var a=Zn();a=Ws(a);var r=ur(t,a);r!==null&&Un(r,t,a),vp(t,a)}}var sd=!0;function Dw(t,a,r,l){var h=H.T;H.T=null;var p=re.p;try{re.p=2,_p(t,a,r,l)}finally{re.p=p,H.T=h}}function Mw(t,a,r,l){var h=H.T;H.T=null;var p=re.p;try{re.p=8,_p(t,a,r,l)}finally{re.p=p,H.T=h}}function _p(t,a,r,l){if(sd){var h=Ep(l);if(h===null)op(t,a,l,rd,r),Zb(t,l);else if(Vw(h,t,a,r,l))l.stopPropagation();else if(Zb(t,l),a&4&&-1<Pw.indexOf(t)){for(;h!==null;){var p=aa(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var x=za(p.pendingLanes);if(x!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;x;){var D=1<<31-Ke(x);A.entanglements[1]|=D,x&=~D}ai(p),(_t&6)===0&&(Hu=gt()+500,Yl(0))}}break;case 31:case 13:A=ur(p,2),A!==null&&Un(A,p,2),Fu(),vp(p,2)}if(p=Ep(l),p===null&&op(t,a,l,rd,r),p===h)break;h=p}h!==null&&l.stopPropagation()}else op(t,a,l,null,r)}}function Ep(t){return t=ia(t),Ap(t)}var rd=null;function Ap(t){if(rd=null,t=qa(t),t!==null){var a=c(t);if(a===null)t=null;else{var r=a.tag;if(r===13){if(t=f(a),t!==null)return t;t=null}else if(r===31){if(t=m(a),t!==null)return t;t=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return rd=t,null}function Wb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($t()){case W:return 2;case Pe:return 8;case $e:case ce:return 32;case Be:return 268435456;default:return 32}default:return 32}}var wp=!1,Es=null,As=null,ws=null,tc=new Map,nc=new Map,Ss=[],Pw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zb(t,a){switch(t){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":As=null;break;case"mouseover":case"mouseout":ws=null;break;case"pointerover":case"pointerout":tc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":nc.delete(a.pointerId)}}function ac(t,a,r,l,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:a,domEventName:r,eventSystemFlags:l,nativeEvent:p,targetContainers:[h]},a!==null&&(a=aa(a),a!==null&&Xb(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,h!==null&&a.indexOf(h)===-1&&a.push(h),t)}function Vw(t,a,r,l,h){switch(a){case"focusin":return Es=ac(Es,t,a,r,l,h),!0;case"dragenter":return As=ac(As,t,a,r,l,h),!0;case"mouseover":return ws=ac(ws,t,a,r,l,h),!0;case"pointerover":var p=h.pointerId;return tc.set(p,ac(tc.get(p)||null,t,a,r,l,h)),!0;case"gotpointercapture":return p=h.pointerId,nc.set(p,ac(nc.get(p)||null,t,a,r,l,h)),!0}return!1}function ex(t){var a=qa(t.target);if(a!==null){var r=c(a);if(r!==null){if(a=r.tag,a===13){if(a=f(r),a!==null){t.blockedOn=a,_a(t.priority,function(){Jb(r)});return}}else if(a===31){if(a=m(r),a!==null){t.blockedOn=a,_a(t.priority,function(){Jb(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function od(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var r=Ep(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);gl=l,r.target.dispatchEvent(l),gl=null}else return a=aa(r),a!==null&&Xb(a),t.blockedOn=r,!1;a.shift()}return!0}function tx(t,a,r){od(t)&&r.delete(a)}function zw(){wp=!1,Es!==null&&od(Es)&&(Es=null),As!==null&&od(As)&&(As=null),ws!==null&&od(ws)&&(ws=null),tc.forEach(tx),nc.forEach(tx)}function ld(t,a){t.blockedOn===a&&(t.blockedOn=null,wp||(wp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zw)))}var cd=null;function nx(t){cd!==t&&(cd=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){cd===t&&(cd=null);for(var a=0;a<t.length;a+=3){var r=t[a],l=t[a+1],h=t[a+2];if(typeof l!="function"){if(Ap(l||r)===null)continue;break}var p=aa(r);p!==null&&(t.splice(a,3),a-=3,Eh(p,{pending:!0,data:h,method:r.method,action:l},l,h))}}))}function No(t){function a(D){return ld(D,t)}Es!==null&&ld(Es,t),As!==null&&ld(As,t),ws!==null&&ld(ws,t),tc.forEach(a),nc.forEach(a);for(var r=0;r<Ss.length;r++){var l=Ss[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ss.length&&(r=Ss[0],r.blockedOn===null);)ex(r),r.blockedOn===null&&Ss.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var h=r[l],p=r[l+1],x=h[hn]||null;if(typeof p=="function")x||nx(r);else if(x){var A=null;if(p&&p.hasAttribute("formAction")){if(h=p,x=p[hn]||null)A=x.formAction;else if(Ap(h)!==null)continue}else A=x.action;typeof A=="function"?r[l+1]=A:(r.splice(l,3),l-=3),nx(r)}}}function ax(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(x){return h=x})},focusReset:"manual",scroll:"manual"})}function a(){h!==null&&(h(),h=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),h!==null&&(h(),h=null)}}}function Sp(t){this._internalRoot=t}ud.prototype.render=Sp.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(s(409));var r=a.current,l=Zn();Yb(r,l,t,a,null,null)},ud.prototype.unmount=Sp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Yb(t.current,2,null,t,null,null),Fu(),a[Ba]=null}};function ud(t){this._internalRoot=t}ud.prototype.unstable_scheduleHydration=function(t){if(t){var a=Fc();t={blockedOn:null,target:t,priority:a};for(var r=0;r<Ss.length&&a!==0&&a<Ss[r].priority;r++);Ss.splice(r,0,t),r===0&&ex(t)}};var ix=e.version;if(ix!=="19.2.4")throw Error(s(527,ix,"19.2.4"));re.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=y(a),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var Lw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dd.isDisabled&&dd.supportsFiber)try{He=dd.inject(Lw),ke=dd}catch{}}return sc.createRoot=function(t,a){if(!o(t))throw Error(s(299));var r=!1,l="",h=dy,p=fy,x=hy;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=$b(t,1,!1,null,null,r,l,null,h,p,x,ax),t[Ba]=a.current,rp(t),new Sp(a)},sc.hydrateRoot=function(t,a,r){if(!o(t))throw Error(s(299));var l=!1,h="",p=dy,x=fy,A=hy,D=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(x=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.formState!==void 0&&(D=r.formState)),a=$b(t,1,!0,a,r??null,l,h,D,p,x,A,ax),a.context=Kb(null),r=a.current,l=Zn(),l=Ws(l),h=us(l),h.callback=null,ds(r,h,l),r=l,a.current.lanes=r,Xs(a,r),ai(a),t[Ba]=a.current,rp(t),new ud(a)},sc.version="19.2.4",sc}var px;function Xw(){if(px)return Rp.exports;px=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Rp.exports=Qw(),Rp.exports}var Jw=Xw();const Ww=a_(Jw);var mx="popstate";function Zw(i={}){function e(o,c){let{pathname:f="/",search:m="",hash:g=""}=Dr(o.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),Yp("",{pathname:f,search:m,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let f=o.document.querySelector("base"),m="";if(f&&f.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");m=y===-1?g:g.slice(0,y)}return m+"#"+(typeof c=="string"?c:vc(c))}function s(o,c){ba(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return tS(e,n,s,i)}function Lt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ba(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eS(){return Math.random().toString(36).substring(2,10)}function gx(i,e){return{usr:i.state,key:i.key,idx:e}}function Yp(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Dr(e):e,state:n,key:e&&e.key||s||eS()}}function vc({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Dr(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function tS(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:c=!1}=s,f=o.history,m="POP",g=null,y=_();y==null&&(y=0,f.replaceState({...f.state,idx:y},""));function _(){return(f.state||{idx:null}).idx}function E(){m="POP";let O=_(),X=O==null?null:O-y;y=O,g&&g({action:m,location:L.location,delta:X})}function T(O,X){m="PUSH";let Q=Yp(L.location,O,X);n&&n(Q,O),y=_()+1;let te=gx(Q,y),ie=L.createHref(Q);try{f.pushState(te,"",ie)}catch(pe){if(pe instanceof DOMException&&pe.name==="DataCloneError")throw pe;o.location.assign(ie)}c&&g&&g({action:m,location:L.location,delta:1})}function V(O,X){m="REPLACE";let Q=Yp(L.location,O,X);n&&n(Q,O),y=_();let te=gx(Q,y),ie=L.createHref(Q);f.replaceState(te,"",ie),c&&g&&g({action:m,location:L.location,delta:0})}function U(O){return nS(O)}let L={get action(){return m},get location(){return i(o,f)},listen(O){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(mx,E),g=O,()=>{o.removeEventListener(mx,E),g=null}},createHref(O){return e(o,O)},createURL:U,encodeLocation(O){let X=U(O);return{pathname:X.pathname,search:X.search,hash:X.hash}},push:T,replace:V,go(O){return f.go(O)}};return L}function nS(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Lt(n,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:vc(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function i_(i,e,n="/"){return aS(i,e,n,!1)}function aS(i,e,n,s){let o=typeof e=="string"?Dr(e):e,c=Bi(o.pathname||"/",n);if(c==null)return null;let f=s_(i);iS(f);let m=null;for(let g=0;m==null&&g<f.length;++g){let y=mS(c);m=hS(f[g],y,s)}return m}function s_(i,e=[],n=[],s="",o=!1){let c=(f,m,g=o,y)=>{let _={relativePath:y===void 0?f.path||"":y,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(s)&&g)return;Lt(_.relativePath.startsWith(s),`Absolute route path "${_.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(s.length)}let E=zi([s,_.relativePath]),T=n.concat(_);f.children&&f.children.length>0&&(Lt(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),s_(f.children,e,T,E,g)),!(f.path==null&&!f.index)&&e.push({path:E,score:dS(E,f.index),routesMeta:T})};return i.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))c(f,m);else for(let g of r_(f.path))c(f,m,!0,g)}),e}function r_(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let f=r_(s.join("/")),m=[];return m.push(...f.map(g=>g===""?c:[c,g].join("/"))),o&&m.push(...f),m.map(g=>i.startsWith("/")&&g===""?"/":g)}function iS(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:fS(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var sS=/^:[\w-]+$/,rS=3,oS=2,lS=1,cS=10,uS=-2,yx=i=>i==="*";function dS(i,e){let n=i.split("/"),s=n.length;return n.some(yx)&&(s+=uS),e&&(s+=oS),n.filter(o=>!yx(o)).reduce((o,c)=>o+(sS.test(c)?rS:c===""?lS:cS),s)}function fS(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function hS(i,e,n=!1){let{routesMeta:s}=i,o={},c="/",f=[];for(let m=0;m<s.length;++m){let g=s[m],y=m===s.length-1,_=c==="/"?e:e.slice(c.length)||"/",E=Od({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},_),T=g.route;if(!E&&y&&n&&!s[s.length-1].route.index&&(E=Od({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},_)),!E)return null;Object.assign(o,E.params),f.push({params:o,pathname:zi([c,E.pathname]),pathnameBase:xS(zi([c,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(c=zi([c,E.pathnameBase]))}return f}function Od(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=pS(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let c=o[0],f=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((y,{paramName:_,isOptional:E},T)=>{if(_==="*"){let U=m[T]||"";f=c.slice(0,c.length-U.length).replace(/(.)\/+$/,"$1")}const V=m[T];return E&&!V?y[_]=void 0:y[_]=(V||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:f,pattern:i}}function pS(i,e=!1,n=!0){ba(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,g)=>(s.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function mS(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ba(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Bi(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}var gS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function yS(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?Dr(i):i,c;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?c=bx(n.substring(1),"/"):c=bx(n,e)):c=e,{pathname:c,search:vS(s),hash:_S(o)}}function bx(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function kp(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bS(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Tm(i){let e=bS(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Nm(i,e,n,s=!1){let o;typeof i=="string"?o=Dr(i):(o={...i},Lt(!o.pathname||!o.pathname.includes("?"),kp("?","pathname","search",o)),Lt(!o.pathname||!o.pathname.includes("#"),kp("#","pathname","hash",o)),Lt(!o.search||!o.search.includes("#"),kp("#","search","hash",o)));let c=i===""||o.pathname==="",f=c?"/":o.pathname,m;if(f==null)m=n;else{let E=e.length-1;if(!s&&f.startsWith("..")){let T=f.split("/");for(;T[0]==="..";)T.shift(),E-=1;o.pathname=T.join("/")}m=E>=0?e[E]:"/"}let g=yS(o,m),y=f&&f!=="/"&&f.endsWith("/"),_=(c||f===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||_)&&(g.pathname+="/"),g}var zi=i=>i.join("/").replace(/\/\/+/g,"/"),xS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),vS=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,_S=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,ES=class{constructor(i,e,n,s=!1){this.status=i,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function AS(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function wS(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var o_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function l_(i,e){let n=i;if(typeof n!="string"||!gS.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,o=!1;if(o_)try{let c=new URL(window.location.href),f=n.startsWith("//")?new URL(c.protocol+n):new URL(n),m=Bi(f.pathname,e);f.origin===c.origin&&m!=null?n=m+f.search+f.hash:o=!0}catch{ba(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var c_=["POST","PUT","PATCH","DELETE"];new Set(c_);var SS=["GET",...c_];new Set(SS);var Xo=w.createContext(null);Xo.displayName="DataRouter";var ef=w.createContext(null);ef.displayName="DataRouterState";var TS=w.createContext(!1),u_=w.createContext({isTransitioning:!1});u_.displayName="ViewTransition";var NS=w.createContext(new Map);NS.displayName="Fetchers";var RS=w.createContext(null);RS.displayName="Await";var na=w.createContext(null);na.displayName="Navigation";var Cc=w.createContext(null);Cc.displayName="Location";var pi=w.createContext({outlet:null,matches:[],isDataRoute:!1});pi.displayName="Route";var Rm=w.createContext(null);Rm.displayName="RouteError";var d_="REACT_ROUTER_ERROR",CS="REDIRECT",IS="ROUTE_ERROR_RESPONSE";function jS(i){if(i.startsWith(`${d_}:${CS}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function kS(i){if(i.startsWith(`${d_}:${IS}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new ES(e.status,e.statusText,e.data)}catch{}}function OS(i,{relative:e}={}){Lt(Jo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=w.useContext(na),{hash:o,pathname:c,search:f}=Ic(i,{relative:e}),m=c;return n!=="/"&&(m=c==="/"?n:zi([n,c])),s.createHref({pathname:m,search:f,hash:o})}function Jo(){return w.useContext(Cc)!=null}function Fs(){return Lt(Jo(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Cc).location}var f_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function h_(i){w.useContext(na).static||w.useLayoutEffect(i)}function Yi(){let{isDataRoute:i}=w.useContext(pi);return i?$S():DS()}function DS(){Lt(Jo(),"useNavigate() may be used only in the context of a <Router> component.");let i=w.useContext(Xo),{basename:e,navigator:n}=w.useContext(na),{matches:s}=w.useContext(pi),{pathname:o}=Fs(),c=JSON.stringify(Tm(s)),f=w.useRef(!1);return h_(()=>{f.current=!0}),w.useCallback((g,y={})=>{if(ba(f.current,f_),!f.current)return;if(typeof g=="number"){n.go(g);return}let _=Nm(g,JSON.parse(c),o,y.relative==="path");i==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:zi([e,_.pathname])),(y.replace?n.replace:n.push)(_,y.state,y)},[e,n,c,o,i])}w.createContext(null);function Ic(i,{relative:e}={}){let{matches:n}=w.useContext(pi),{pathname:s}=Fs(),o=JSON.stringify(Tm(n));return w.useMemo(()=>Nm(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function MS(i,e){return p_(i,e)}function p_(i,e,n,s,o){Lt(Jo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=w.useContext(na),{matches:f}=w.useContext(pi),m=f[f.length-1],g=m?m.params:{},y=m?m.pathname:"/",_=m?m.pathnameBase:"/",E=m&&m.route;{let Q=E&&E.path||"";g_(y,!E||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let T=Fs(),V;if(e){let Q=typeof e=="string"?Dr(e):e;Lt(_==="/"||Q.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),V=Q}else V=T;let U=V.pathname||"/",L=U;if(_!=="/"){let Q=_.replace(/^\//,"").split("/");L="/"+U.replace(/^\//,"").split("/").slice(Q.length).join("/")}let O=i_(i,{pathname:L});ba(E||O!=null,`No routes matched location "${V.pathname}${V.search}${V.hash}" `),ba(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${V.pathname}${V.search}${V.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let X=US(O&&O.map(Q=>Object.assign({},Q,{params:Object.assign({},g,Q.params),pathname:zi([_,c.encodeLocation?c.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?_:zi([_,c.encodeLocation?c.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),f,n,s,o);return e&&X?w.createElement(Cc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...V},navigationType:"POP"}},X):X}function PS(){let i=GS(),e=AS(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:c},"ErrorBoundary")," or"," ",w.createElement("code",{style:c},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:o},n):null,f)}var VS=w.createElement(PS,null),m_=class extends w.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const n=kS(i.digest);n&&(i=n)}let e=i!==void 0?w.createElement(pi.Provider,{value:this.props.routeContext},w.createElement(Rm.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?w.createElement(zS,{error:i},e):e}};m_.contextType=TS;var Op=new WeakMap;function zS({children:i,error:e}){let{basename:n}=w.useContext(na);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=jS(e.digest);if(s){let o=Op.get(e);if(o)throw o;let c=l_(s.location,n);if(o_&&!Op.get(e))if(c.isExternal||s.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:s.replace}));throw Op.set(e,f),f}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return i}function LS({routeContext:i,match:e,children:n}){let s=w.useContext(Xo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(pi.Provider,{value:i},n)}function US(i,e=[],n=null,s=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let c=i,f=n?.errors;if(f!=null){let _=c.findIndex(E=>E.route.id&&f?.[E.route.id]!==void 0);Lt(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),c=c.slice(0,Math.min(c.length,_+1))}let m=!1,g=-1;if(n)for(let _=0;_<c.length;_++){let E=c[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=_),E.route.id){let{loaderData:T,errors:V}=n,U=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!V||V[E.route.id]===void 0);if(E.route.lazy||U){m=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}let y=n&&s?(_,E)=>{s(_,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:wS(n.matches),errorInfo:E})}:void 0;return c.reduceRight((_,E,T)=>{let V,U=!1,L=null,O=null;n&&(V=f&&E.route.id?f[E.route.id]:void 0,L=E.route.errorElement||VS,m&&(g<0&&T===0?(g_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),U=!0,O=null):g===T&&(U=!0,O=E.route.hydrateFallbackElement||null)));let X=e.concat(c.slice(0,T+1)),Q=()=>{let te;return V?te=L:U?te=O:E.route.Component?te=w.createElement(E.route.Component,null):E.route.element?te=E.route.element:te=_,w.createElement(LS,{match:E,routeContext:{outlet:_,matches:X,isDataRoute:n!=null},children:te})};return n&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?w.createElement(m_,{location:n.location,revalidation:n.revalidation,component:L,error:V,children:Q(),routeContext:{outlet:null,matches:X,isDataRoute:!0},onError:y}):Q()},null)}function Cm(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BS(i){let e=w.useContext(Xo);return Lt(e,Cm(i)),e}function HS(i){let e=w.useContext(ef);return Lt(e,Cm(i)),e}function qS(i){let e=w.useContext(pi);return Lt(e,Cm(i)),e}function Im(i){let e=qS(i),n=e.matches[e.matches.length-1];return Lt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function FS(){return Im("useRouteId")}function GS(){let i=w.useContext(Rm),e=HS("useRouteError"),n=Im("useRouteError");return i!==void 0?i:e.errors?.[n]}function $S(){let{router:i}=BS("useNavigate"),e=Im("useNavigate"),n=w.useRef(!1);return h_(()=>{n.current=!0}),w.useCallback(async(o,c={})=>{ba(n.current,f_),n.current&&(typeof o=="number"?await i.navigate(o):await i.navigate(o,{fromRouteId:e,...c}))},[i,e])}var xx={};function g_(i,e,n){!e&&!xx[i]&&(xx[i]=!0,ba(!1,n))}w.memo(KS);function KS({routes:i,future:e,state:n,onError:s}){return p_(i,void 0,n,s,e)}function y_({to:i,replace:e,state:n,relative:s}){Lt(Jo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=w.useContext(na);ba(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=w.useContext(pi),{pathname:f}=Fs(),m=Yi(),g=Nm(i,Tm(c),f,s==="path"),y=JSON.stringify(g);return w.useEffect(()=>{m(JSON.parse(y),{replace:e,state:n,relative:s})},[m,y,s,e,n]),null}function ii(i){Lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YS({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:c=!1,unstable_useTransitions:f}){Lt(!Jo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=i.replace(/^\/*/,"/"),g=w.useMemo(()=>({basename:m,navigator:o,static:c,unstable_useTransitions:f,future:{}}),[m,o,c,f]);typeof n=="string"&&(n=Dr(n));let{pathname:y="/",search:_="",hash:E="",state:T=null,key:V="default"}=n,U=w.useMemo(()=>{let L=Bi(y,m);return L==null?null:{location:{pathname:L,search:_,hash:E,state:T,key:V},navigationType:s}},[m,y,_,E,T,V,s]);return ba(U!=null,`<Router basename="${m}"> is not able to match the URL "${y}${_}${E}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:w.createElement(na.Provider,{value:g},w.createElement(Cc.Provider,{children:e,value:U}))}function QS({children:i,location:e}){return MS(Qp(i),e)}function Qp(i,e=[]){let n=[];return w.Children.forEach(i,(s,o)=>{if(!w.isValidElement(s))return;let c=[...e,o];if(s.type===w.Fragment){n.push.apply(n,Qp(s.props.children,c));return}Lt(s.type===ii,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Lt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Qp(s.props.children,c)),n.push(f)}),n}var vd="get",_d="application/x-www-form-urlencoded";function tf(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function XS(i){return tf(i)&&i.tagName.toLowerCase()==="button"}function JS(i){return tf(i)&&i.tagName.toLowerCase()==="form"}function WS(i){return tf(i)&&i.tagName.toLowerCase()==="input"}function ZS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function eT(i,e){return i.button===0&&(!e||e==="_self")&&!ZS(i)}var fd=null;function tT(){if(fd===null)try{new FormData(document.createElement("form"),0),fd=!1}catch{fd=!0}return fd}var nT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dp(i){return i!=null&&!nT.has(i)?(ba(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_d}"`),null):i}function aT(i,e){let n,s,o,c,f;if(JS(i)){let m=i.getAttribute("action");s=m?Bi(m,e):null,n=i.getAttribute("method")||vd,o=Dp(i.getAttribute("enctype"))||_d,c=new FormData(i)}else if(XS(i)||WS(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||m.getAttribute("action");if(s=g?Bi(g,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||vd,o=Dp(i.getAttribute("formenctype"))||Dp(m.getAttribute("enctype"))||_d,c=new FormData(m,i),!tT()){let{name:y,type:_,value:E}=i;if(_==="image"){let T=y?`${y}.`:"";c.append(`${T}x`,"0"),c.append(`${T}y`,"0")}else y&&c.append(y,E)}}else{if(tf(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=vd,s=null,o=_d,f=i}return c&&o==="text/plain"&&(f=c,c=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:c,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function jm(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function iT(i,e,n,s){let o=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${s}`:o.pathname=`${o.pathname}.${s}`:o.pathname==="/"?o.pathname=`_root.${s}`:e&&Bi(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${s}`,o}async function sT(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rT(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function oT(i,e,n){let s=await Promise.all(i.map(async o=>{let c=e.routes[o.route.id];if(c){let f=await sT(c,n);return f.links?f.links():[]}return[]}));return dT(s.flat(1).filter(rT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function vx(i,e,n,s,o,c){let f=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,m=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return c==="assets"?e.filter((g,y)=>f(g,y)||m(g,y)):c==="data"?e.filter((g,y)=>{let _=s.routes[g.route.id];if(!_||!_.hasLoader)return!1;if(f(g,y)||m(g,y))return!0;if(g.route.shouldRevalidate){let E=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function lT(i,e,{includeHydrateFallback:n}={}){return cT(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function cT(i){return[...new Set(i)]}function uT(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function dT(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let c=JSON.stringify(uT(o));return n.has(c)||(n.add(c),s.push({key:c,link:o})),s},[])}function b_(){let i=w.useContext(Xo);return jm(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function fT(){let i=w.useContext(ef);return jm(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var km=w.createContext(void 0);km.displayName="FrameworkContext";function x_(){let i=w.useContext(km);return jm(i,"You must render this element inside a <HydratedRouter> element"),i}function hT(i,e){let n=w.useContext(km),[s,o]=w.useState(!1),[c,f]=w.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:y,onMouseLeave:_,onTouchStart:E}=e,T=w.useRef(null);w.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let L=X=>{X.forEach(Q=>{f(Q.isIntersecting)})},O=new IntersectionObserver(L,{threshold:.5});return T.current&&O.observe(T.current),()=>{O.disconnect()}}},[i]),w.useEffect(()=>{if(s){let L=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(L)}}},[s]);let V=()=>{o(!0)},U=()=>{o(!1),f(!1)};return n?i!=="intent"?[c,T,{}]:[c,T,{onFocus:rc(m,V),onBlur:rc(g,U),onMouseEnter:rc(y,V),onMouseLeave:rc(_,U),onTouchStart:rc(E,V)}]:[!1,T,{}]}function rc(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function pT({page:i,...e}){let{router:n}=b_(),s=w.useMemo(()=>i_(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?w.createElement(gT,{page:i,matches:s,...e}):null}function mT(i){let{manifest:e,routeModules:n}=x_(),[s,o]=w.useState([]);return w.useEffect(()=>{let c=!1;return oT(i,e,n).then(f=>{c||o(f)}),()=>{c=!0}},[i,e,n]),s}function gT({page:i,matches:e,...n}){let s=Fs(),{future:o,manifest:c,routeModules:f}=x_(),{basename:m}=b_(),{loaderData:g,matches:y}=fT(),_=w.useMemo(()=>vx(i,e,y,c,s,"data"),[i,e,y,c,s]),E=w.useMemo(()=>vx(i,e,y,c,s,"assets"),[i,e,y,c,s]),T=w.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let L=new Set,O=!1;if(e.forEach(Q=>{let te=c.routes[Q.route.id];!te||!te.hasLoader||(!_.some(ie=>ie.route.id===Q.route.id)&&Q.route.id in g&&f[Q.route.id]?.shouldRevalidate||te.hasClientLoader?O=!0:L.add(Q.route.id))}),L.size===0)return[];let X=iT(i,m,o.unstable_trailingSlashAwareDataRequests,"data");return O&&L.size>0&&X.searchParams.set("_routes",e.filter(Q=>L.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[X.pathname+X.search]},[m,o.unstable_trailingSlashAwareDataRequests,g,s,c,_,e,i,f]),V=w.useMemo(()=>lT(E,c),[E,c]),U=mT(E);return w.createElement(w.Fragment,null,T.map(L=>w.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...n})),V.map(L=>w.createElement("link",{key:L,rel:"modulepreload",href:L,...n})),U.map(({key:L,link:O})=>w.createElement("link",{key:L,nonce:n.nonce,...O,crossOrigin:O.crossOrigin??n.crossOrigin})))}function yT(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var bT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bT&&(window.__reactRouterVersion="7.13.0")}catch{}function xT({basename:i,children:e,unstable_useTransitions:n,window:s}){let o=w.useRef();o.current==null&&(o.current=Zw({window:s,v5Compat:!0}));let c=o.current,[f,m]=w.useState({action:c.action,location:c.location}),g=w.useCallback(y=>{n===!1?m(y):w.startTransition(()=>m(y))},[n]);return w.useLayoutEffect(()=>c.listen(g),[c,g]),w.createElement(YS,{basename:i,children:e,location:f.location,navigationType:f.action,navigator:c,unstable_useTransitions:n})}var v_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,__=w.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:c,replace:f,state:m,target:g,to:y,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:T,...V},U){let{basename:L,unstable_useTransitions:O}=w.useContext(na),X=typeof y=="string"&&v_.test(y),Q=l_(y,L);y=Q.to;let te=OS(y,{relative:o}),[ie,pe,fe]=hT(s,V),I=AT(y,{replace:f,state:m,target:g,preventScrollReset:_,relative:o,viewTransition:E,unstable_defaultShouldRevalidate:T,unstable_useTransitions:O});function N(P){e&&e(P),P.defaultPrevented||I(P)}let j=w.createElement("a",{...V,...fe,href:Q.absoluteURL||te,onClick:Q.isExternal||c?e:N,ref:yT(U,pe),target:g,"data-discover":!X&&n==="render"?"true":void 0});return ie&&!X?w.createElement(w.Fragment,null,j,w.createElement(pT,{page:te})):j});__.displayName="Link";var vT=w.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:c,to:f,viewTransition:m,children:g,...y},_){let E=Ic(f,{relative:y.relative}),T=Fs(),V=w.useContext(ef),{navigator:U,basename:L}=w.useContext(na),O=V!=null&&RT(E)&&m===!0,X=U.encodeLocation?U.encodeLocation(E).pathname:E.pathname,Q=T.pathname,te=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;n||(Q=Q.toLowerCase(),te=te?te.toLowerCase():null,X=X.toLowerCase()),te&&L&&(te=Bi(te,L)||te);const ie=X!=="/"&&X.endsWith("/")?X.length-1:X.length;let pe=Q===X||!o&&Q.startsWith(X)&&Q.charAt(ie)==="/",fe=te!=null&&(te===X||!o&&te.startsWith(X)&&te.charAt(X.length)==="/"),I={isActive:pe,isPending:fe,isTransitioning:O},N=pe?e:void 0,j;typeof s=="function"?j=s(I):j=[s,pe?"active":null,fe?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let P=typeof c=="function"?c(I):c;return w.createElement(__,{...y,"aria-current":N,className:j,ref:_,style:P,to:f,viewTransition:m},typeof g=="function"?g(I):g)});vT.displayName="NavLink";var _T=w.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:c,method:f=vd,action:m,onSubmit:g,relative:y,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:T,...V},U)=>{let{unstable_useTransitions:L}=w.useContext(na),O=TT(),X=NT(m,{relative:y}),Q=f.toLowerCase()==="get"?"get":"post",te=typeof m=="string"&&v_.test(m),ie=pe=>{if(g&&g(pe),pe.defaultPrevented)return;pe.preventDefault();let fe=pe.nativeEvent.submitter,I=fe?.getAttribute("formmethod")||f,N=()=>O(fe||pe.currentTarget,{fetcherKey:e,method:I,navigate:n,replace:o,state:c,relative:y,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:T});L&&n!==!1?w.startTransition(()=>N()):N()};return w.createElement("form",{ref:U,method:Q,action:X,onSubmit:s?g:ie,...V,"data-discover":!te&&i==="render"?"true":void 0})});_T.displayName="Form";function ET(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function E_(i){let e=w.useContext(Xo);return Lt(e,ET(i)),e}function AT(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:c,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:g}={}){let y=Yi(),_=Fs(),E=Ic(i,{relative:c});return w.useCallback(T=>{if(eT(T,e)){T.preventDefault();let V=n!==void 0?n:vc(_)===vc(E),U=()=>y(i,{replace:V,state:s,preventScrollReset:o,relative:c,viewTransition:f,unstable_defaultShouldRevalidate:m});g?w.startTransition(()=>U()):U()}},[_,y,E,n,s,e,i,o,c,f,m,g])}var wT=0,ST=()=>`__${String(++wT)}__`;function TT(){let{router:i}=E_("useSubmit"),{basename:e}=w.useContext(na),n=FS(),s=i.fetch,o=i.navigate;return w.useCallback(async(c,f={})=>{let{action:m,method:g,encType:y,formData:_,body:E}=aT(c,e);if(f.navigate===!1){let T=f.fetcherKey||ST();await s(T,n,f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:_,body:E,formMethod:f.method||g,formEncType:f.encType||y,flushSync:f.flushSync})}else await o(f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:_,body:E,formMethod:f.method||g,formEncType:f.encType||y,replace:f.replace,state:f.state,fromRouteId:n,flushSync:f.flushSync,viewTransition:f.viewTransition})},[s,o,e,n])}function NT(i,{relative:e}={}){let{basename:n}=w.useContext(na),s=w.useContext(pi);Lt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),c={...Ic(i||".",{relative:e})},f=Fs();if(i==null){c.search=f.search;let m=new URLSearchParams(c.search),g=m.getAll("index");if(g.some(_=>_==="")){m.delete("index"),g.filter(E=>E).forEach(E=>m.append("index",E));let _=m.toString();c.search=_?`?${_}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:zi([n,c.pathname])),vc(c)}function RT(i,{relative:e}={}){let n=w.useContext(u_);Lt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=E_("useViewTransitionState"),o=Ic(i,{relative:e});if(!n.isTransitioning)return!1;let c=Bi(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=Bi(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Od(o.pathname,f)!=null||Od(o.pathname,c)!=null}const CT=()=>{};var _x={};const A_=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},IT=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],f=i[n++],m=i[n++],g=((o&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=i[n++],f=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|f&63)}}return e.join("")},w_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const c=i[o],f=o+1<i.length,m=f?i[o+1]:0,g=o+2<i.length,y=g?i[o+2]:0,_=c>>2,E=(c&3)<<4|m>>4;let T=(m&15)<<2|y>>6,V=y&63;g||(V=64,f||(T=64)),s.push(n[_],n[E],n[T],n[V])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(A_(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):IT(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const E=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||m==null||y==null||E==null)throw new jT;const T=c<<2|m>>4;if(s.push(T),y!==64){const V=m<<4&240|y>>2;if(s.push(V),E!==64){const U=y<<6&192|E;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class jT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kT=function(i){const e=A_(i);return w_.encodeByteArray(e,!0)},Dd=function(i){return kT(i).replace(/\./g,"")},S_=function(i){try{return w_.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function OT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const DT=()=>OT().__FIREBASE_DEFAULTS__,MT=()=>{if(typeof process>"u"||typeof _x>"u")return;const i=_x.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},PT=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&S_(i[1]);return e&&JSON.parse(e)},nf=()=>{try{return CT()||DT()||MT()||PT()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},T_=i=>nf()?.emulatorHosts?.[i],N_=i=>{const e=T_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},R_=()=>nf()?.config,C_=i=>nf()?.[`_${i}`];class VT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Mr(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Om(i){return(await fetch(i,{credentials:"include"})).ok}function I_(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Dd(JSON.stringify(n)),Dd(JSON.stringify(f)),""].join(".")}const pc={};function zT(){const i={prod:[],emulator:[]};for(const e of Object.keys(pc))pc[e]?i.emulator.push(e):i.prod.push(e);return i}function LT(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Ex=!1;function Dm(i,e){if(typeof window>"u"||typeof document>"u"||!Mr(window.location.host)||pc[i]===e||pc[i]||Ex)return;pc[i]=e;function n(T){return`__firebase__banner__${T}`}const s="__firebase__banner",c=zT().prod.length>0;function f(){const T=document.getElementById(s);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,V){T.setAttribute("width","24"),T.setAttribute("id",V),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Ex=!0,f()},T}function _(T,V){T.setAttribute("id",V),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=LT(s),V=n("text"),U=document.getElementById(V)||document.createElement("span"),L=n("learnmore"),O=document.getElementById(L)||document.createElement("a"),X=n("preprendIcon"),Q=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const te=T.element;m(te),_(O,L);const ie=y();g(Q,X),te.append(Q,U,O,ie),document.body.appendChild(te)}c?(U.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function BT(){const i=nf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function FT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GT(){const i=Cn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function $T(){return!BT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KT(){try{return typeof indexedDB=="object"}catch{return!1}}function YT(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const QT="FirebaseError";class mi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=QT,Object.setPrototypeOf(this,mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jc.prototype.create)}}class jc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],f=c?XT(c,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new mi(o,m,s)}}function XT(i,e){return i.replace(JT,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const JT=/\{\$([^}]+)}/g;function WT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Hi(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=i[o],f=e[o];if(Ax(c)&&Ax(f)){if(!Hi(c,f))return!1}else if(c!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Ax(i){return i!==null&&typeof i=="object"}function kc(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function lc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,c]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function cc(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function ZT(i,e){const n=new eN(i,e);return n.subscribe.bind(n)}class eN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");tN(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Mp),o.error===void 0&&(o.error=Mp),o.complete===void 0&&(o.complete=Mp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tN(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Mp(){}function Jt(i){return i&&i._delegate?i._delegate:i}class Vs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ar="[DEFAULT]";class nN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new VT;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iN(e))try{this.getOrInitializeService({instanceIdentifier:Ar})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=Ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ar){return this.instances.has(e)}getOptions(e=Ar){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:aN(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ar){return this.component?this.component.multipleInstances?e:Ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aN(i){return i===Ar?void 0:i}function iN(i){return i.instantiationMode==="EAGER"}class sN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ot;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ot||(ot={}));const rN={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},oN=ot.INFO,lN={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},cN=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=lN[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mm{constructor(e){this.name=e,this._logLevel=oN,this._logHandler=cN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const uN=(i,e)=>e.some(n=>i instanceof n);let wx,Sx;function dN(){return wx||(wx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fN(){return Sx||(Sx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const j_=new WeakMap,Xp=new WeakMap,k_=new WeakMap,Pp=new WeakMap,Pm=new WeakMap;function hN(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(Os(i.result)),o()},f=()=>{s(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&j_.set(n,i)}).catch(()=>{}),Pm.set(e,i),e}function pN(i){if(Xp.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),o()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});Xp.set(i,e)}let Jp={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Xp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||k_.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Os(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function mN(i){Jp=i(Jp)}function gN(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Vp(this),e,...n);return k_.set(s,e.sort?e.sort():[e]),Os(s)}:fN().includes(i)?function(...e){return i.apply(Vp(this),e),Os(j_.get(this))}:function(...e){return Os(i.apply(Vp(this),e))}}function yN(i){return typeof i=="function"?gN(i):(i instanceof IDBTransaction&&pN(i),uN(i,dN())?new Proxy(i,Jp):i)}function Os(i){if(i instanceof IDBRequest)return hN(i);if(Pp.has(i))return Pp.get(i);const e=yN(i);return e!==i&&(Pp.set(i,e),Pm.set(e,i)),e}const Vp=i=>Pm.get(i);function bN(i,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const f=indexedDB.open(i,e),m=Os(f);return s&&f.addEventListener("upgradeneeded",g=>{s(Os(f.result),g.oldVersion,g.newVersion,Os(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const xN=["get","getKey","getAll","getAllKeys","count"],vN=["put","add","delete","clear"],zp=new Map;function Tx(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(zp.get(e))return zp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=vN.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||xN.includes(n)))return;const c=async function(f,...m){const g=this.transaction(f,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&g.done]))[0]};return zp.set(e,c),c}mN(i=>({...i,get:(e,n,s)=>Tx(e,n)||i.get(e,n,s),has:(e,n)=>!!Tx(e,n)||i.has(e,n)}));class _N{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(EN(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function EN(i){return i.getComponent()?.type==="VERSION"}const Wp="@firebase/app",Nx="0.14.7";const qi=new Mm("@firebase/app"),AN="@firebase/app-compat",wN="@firebase/analytics-compat",SN="@firebase/analytics",TN="@firebase/app-check-compat",NN="@firebase/app-check",RN="@firebase/auth",CN="@firebase/auth-compat",IN="@firebase/database",jN="@firebase/data-connect",kN="@firebase/database-compat",ON="@firebase/functions",DN="@firebase/functions-compat",MN="@firebase/installations",PN="@firebase/installations-compat",VN="@firebase/messaging",zN="@firebase/messaging-compat",LN="@firebase/performance",UN="@firebase/performance-compat",BN="@firebase/remote-config",HN="@firebase/remote-config-compat",qN="@firebase/storage",FN="@firebase/storage-compat",GN="@firebase/firestore",$N="@firebase/ai",KN="@firebase/firestore-compat",YN="firebase",QN="12.8.0";const Zp="[DEFAULT]",XN={[Wp]:"fire-core",[AN]:"fire-core-compat",[SN]:"fire-analytics",[wN]:"fire-analytics-compat",[NN]:"fire-app-check",[TN]:"fire-app-check-compat",[RN]:"fire-auth",[CN]:"fire-auth-compat",[IN]:"fire-rtdb",[jN]:"fire-data-connect",[kN]:"fire-rtdb-compat",[ON]:"fire-fn",[DN]:"fire-fn-compat",[MN]:"fire-iid",[PN]:"fire-iid-compat",[VN]:"fire-fcm",[zN]:"fire-fcm-compat",[LN]:"fire-perf",[UN]:"fire-perf-compat",[BN]:"fire-rc",[HN]:"fire-rc-compat",[qN]:"fire-gcs",[FN]:"fire-gcs-compat",[GN]:"fire-fst",[KN]:"fire-fst-compat",[$N]:"fire-vertex","fire-js":"fire-js",[YN]:"fire-js-all"};const Uo=new Map,em=new Map,tm=new Map;function Rx(i,e){try{i.container.addComponent(e)}catch(n){qi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Rr(i){const e=i.name;if(tm.has(e))return qi.debug(`There were multiple attempts to register component ${e}.`),!1;tm.set(e,i);for(const n of Uo.values())Rx(n,i);for(const n of em.values())Rx(n,i);return!0}function af(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function ea(i){return i==null?!1:i.settings!==void 0}const JN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ds=new jc("app","Firebase",JN);class WN{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ds.create("app-deleted",{appName:this._name})}}const Pr=QN;function Vm(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:Zp,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ds.create("bad-app-name",{appName:String(o)});if(n||(n=R_()),!n)throw Ds.create("no-options");const c=Uo.get(o);if(c){if(Hi(n,c.options)&&Hi(s,c.config))return c;throw Ds.create("duplicate-app",{appName:o})}const f=new sN(o);for(const g of tm.values())f.addComponent(g);const m=new WN(n,s,f);return Uo.set(o,m),m}function zm(i=Zp){const e=Uo.get(i);if(!e&&i===Zp&&R_())return Vm();if(!e)throw Ds.create("no-app",{appName:i});return e}async function ZN(i){let e=!1;const n=i.name;Uo.has(n)?(e=!0,Uo.delete(n)):em.has(n)&&i.decRefCount()<=0&&(em.delete(n),e=!0),e&&(await Promise.all(i.container.getProviders().map(s=>s.delete())),i.isDeleted=!0)}function ri(i,e,n){let s=XN[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qi.warn(f.join(" "));return}Rr(new Vs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const eR="firebase-heartbeat-database",tR=1,_c="firebase-heartbeat-store";let Lp=null;function O_(){return Lp||(Lp=bN(eR,tR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(_c)}catch(n){console.warn(n)}}}}).catch(i=>{throw Ds.create("idb-open",{originalErrorMessage:i.message})})),Lp}async function nR(i){try{const n=(await O_()).transaction(_c),s=await n.objectStore(_c).get(D_(i));return await n.done,s}catch(e){if(e instanceof mi)qi.warn(e.message);else{const n=Ds.create("idb-get",{originalErrorMessage:e?.message});qi.warn(n.message)}}}async function Cx(i,e){try{const s=(await O_()).transaction(_c,"readwrite");await s.objectStore(_c).put(e,D_(i)),await s.done}catch(n){if(n instanceof mi)qi.warn(n.message);else{const s=Ds.create("idb-set",{originalErrorMessage:n?.message});qi.warn(s.message)}}}function D_(i){return`${i.name}!${i.options.appId}`}const aR=1024,iR=30;class sR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ix();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>iR){const o=lR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){qi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ix(),{heartbeatsToSend:n,unsentEntries:s}=rR(this._heartbeatsCache.heartbeats),o=Dd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return qi.warn(e),""}}}function Ix(){return new Date().toISOString().substring(0,10)}function rR(i,e=aR){const n=[];let s=i.slice();for(const o of i){const c=n.find(f=>f.agent===o.agent);if(c){if(c.dates.push(o.date),jx(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),jx(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class oR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KT()?YT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Cx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Cx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function jx(i){return Dd(JSON.stringify({version:2,heartbeats:i})).length}function lR(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function cR(i){Rr(new Vs("platform-logger",e=>new _N(e),"PRIVATE")),Rr(new Vs("heartbeat",e=>new sR(e),"PRIVATE")),ri(Wp,Nx,i),ri(Wp,Nx,"esm2020"),ri("fire-js","")}cR("");var uR="firebase",dR="12.8.0";ri(uR,dR,"app");function M_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fR=M_,P_=new jc("auth","Firebase",M_());const Md=new Mm("@firebase/auth");function hR(i,...e){Md.logLevel<=ot.WARN&&Md.warn(`Auth (${Pr}): ${i}`,...e)}function Ed(i,...e){Md.logLevel<=ot.ERROR&&Md.error(`Auth (${Pr}): ${i}`,...e)}function Da(i,...e){throw Lm(i,...e)}function oi(i,...e){return Lm(i,...e)}function V_(i,e,n){const s={...fR(),[e]:n};return new jc("auth","Firebase",s).create(e,{appName:i.name})}function Li(i){return V_(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lm(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return P_.create(i,...e)}function Le(i,e,...n){if(!i)throw Lm(e,...n)}function Pi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Ed(e),new Error(e)}function Fi(i,e){i||Pi(e)}function nm(){return typeof self<"u"&&self.location?.href||""}function pR(){return kx()==="http:"||kx()==="https:"}function kx(){return typeof self<"u"&&self.location?.protocol||null}function mR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pR()||qT()||"connection"in navigator)?navigator.onLine:!0}function gR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Oc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fi(n>e,"Short delay should be less than long delay!"),this.isMobile=UT()||FT()}get(){return mR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Um(i,e){Fi(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class z_{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const bR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xR=new Oc(3e4,6e4);function Gs(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Qi(i,e,n,s,o={}){return L_(i,o,async()=>{let c={},f={};s&&(e==="GET"?f=s:c={body:JSON.stringify(s)});const m=kc({key:i.config.apiKey,...f}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:g,...c};return HT()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&Mr(i.emulatorConfig.host)&&(y.credentials="include"),z_.fetch()(await U_(i,i.config.apiHost,n,m),y)})}async function L_(i,e,n){i._canInitEmulator=!1;const s={...yR,...e};try{const o=new _R(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw hd(i,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const m=c.ok?f.errorMessage:f.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw hd(i,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw hd(i,"email-already-in-use",f);if(g==="USER_DISABLED")throw hd(i,"user-disabled",f);const _=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw V_(i,_,y);Da(i,_)}}catch(o){if(o instanceof mi)throw o;Da(i,"network-request-failed",{message:String(o)})}}async function Dc(i,e,n,s,o={}){const c=await Qi(i,e,n,s,o);return"mfaPendingCredential"in c&&Da(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function U_(i,e,n,s){const o=`${e}${n}?${s}`,c=i,f=c.config.emulator?Um(i.config,o):`${i.config.apiScheme}://${o}`;return bR.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function vR(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _R{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(oi(this.auth,"network-request-failed")),xR.get())})}}function hd(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=oi(i,e,s);return o.customData._tokenResponse=n,o}function Ox(i){return i!==void 0&&i.enterprise!==void 0}class ER{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return vR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function AR(i,e){return Qi(i,"GET","/v2/recaptchaConfig",Gs(i,e))}async function wR(i,e){return Qi(i,"POST","/v1/accounts:delete",e)}async function Pd(i,e){return Qi(i,"POST","/v1/accounts:lookup",e)}function mc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SR(i,e=!1){const n=Jt(i),s=await n.getIdToken(e),o=Bm(s);Le(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,f=c?.sign_in_provider;return{claims:o,token:s,authTime:mc(Up(o.auth_time)),issuedAtTime:mc(Up(o.iat)),expirationTime:mc(Up(o.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Up(i){return Number(i)*1e3}function Bm(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Ed("JWT malformed, contained fewer than 3 sections"),null;try{const o=S_(n);return o?JSON.parse(o):(Ed("Failed to decode base64 JWT payload"),null)}catch(o){return Ed("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Dx(i){const e=Bm(i);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Bo(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof mi&&TR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function TR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class NR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class am{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Vd(i){const e=i.auth,n=await i.getIdToken(),s=await Bo(i,Pd(e,{idToken:n}));Le(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?B_(o.providerUserInfo):[],f=CR(i.providerData,c),m=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!f?.length,y=m?g:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new am(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,_)}async function RR(i){const e=Jt(i);await Vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function B_(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function IR(i,e){const n=await L_(i,{},async()=>{const s=kc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,f=await U_(i,o,"/v1/token",`key=${c}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return i.emulatorConfig&&Mr(i.emulatorConfig.host)&&(g.credentials="include"),z_.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jR(i,e){return Qi(i,"POST","/v2/accounts:revokeToken",Gs(i,e))}class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Dx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const n=Dx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await IR(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,f=new Oo;return s&&(Le(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Le(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),c&&(Le(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return Pi("not implemented")}}function Ns(i,e){Le(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ja{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new NR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new am(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Bo(this,this.stsTokenManager.getToken(this.auth,e));return Le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return SR(this,e)}reload(){return RR(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ja({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Vd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ea(this.auth.app))return Promise.reject(Li(this.auth));const e=await this.getIdToken();return await Bo(this,wR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:V,providerData:U,stsTokenManager:L}=n;Le(E&&L,e,"internal-error");const O=Oo.fromJSON(this.name,L);Le(typeof E=="string",e,"internal-error"),Ns(s,e.name),Ns(o,e.name),Le(typeof T=="boolean",e,"internal-error"),Le(typeof V=="boolean",e,"internal-error"),Ns(c,e.name),Ns(f,e.name),Ns(m,e.name),Ns(g,e.name),Ns(y,e.name),Ns(_,e.name);const X=new ja({uid:E,auth:e,email:o,emailVerified:T,displayName:s,isAnonymous:V,photoURL:f,phoneNumber:c,tenantId:m,stsTokenManager:O,createdAt:y,lastLoginAt:_});return U&&Array.isArray(U)&&(X.providerData=U.map(Q=>({...Q}))),g&&(X._redirectEventId=g),X}static async _fromIdTokenResponse(e,n,s=!1){const o=new Oo;o.updateFromServerResponse(n);const c=new ja({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Vd(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Le(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?B_(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!c?.length,m=new Oo;m.updateFromIdToken(s);const g=new ja({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new am(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,y),g}}const Mx=new Map;function Vi(i){Fi(i instanceof Function,"Expected a class definition");let e=Mx.get(i);return e?(Fi(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Mx.set(i,e),e)}class H_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}H_.type="NONE";const Px=H_;function Ad(i,e,n){return`firebase:${i}:${e}:${n}`}class Do{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=Ad(this.userKey,o.apiKey,c),this.fullPersistenceKey=Ad("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Pd(this.auth,{idToken:e}).catch(()=>{});return n?ja._fromGetAccountInfoResponse(this.auth,n,e):null}return ja._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Do(Vi(Px),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||Vi(Px);const f=Ad(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const _=await y._get(f);if(_){let E;if(typeof _=="string"){const T=await Pd(e,{idToken:_}).catch(()=>{});if(!T)break;E=await ja._fromGetAccountInfoResponse(e,T,_)}else E=ja._fromJSON(e,_);y!==c&&(m=E),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Do(c,e,s):(c=g[0],m&&await c._set(f,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(f)}catch{}})),new Do(c,e,s))}}function Vx(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(q_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Y_(e))return"Blackberry";if(Q_(e))return"Webos";if(F_(e))return"Safari";if((e.includes("chrome/")||G_(e))&&!e.includes("edge/"))return"Chrome";if(K_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function q_(i=Cn()){return/firefox\//i.test(i)}function F_(i=Cn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function G_(i=Cn()){return/crios\//i.test(i)}function $_(i=Cn()){return/iemobile/i.test(i)}function K_(i=Cn()){return/android/i.test(i)}function Y_(i=Cn()){return/blackberry/i.test(i)}function Q_(i=Cn()){return/webos/i.test(i)}function Hm(i=Cn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function kR(i=Cn()){return Hm(i)&&!!window.navigator?.standalone}function OR(){return GT()&&document.documentMode===10}function X_(i=Cn()){return Hm(i)||K_(i)||Q_(i)||Y_(i)||/windows phone/i.test(i)||$_(i)}function J_(i,e=[]){let n;switch(i){case"Browser":n=Vx(Cn());break;case"Worker":n=`${Vx(Cn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Pr}/${s}`}class DR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((f,m)=>{try{const g=e(c);f(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function MR(i,e={}){return Qi(i,"GET","/v2/passwordPolicy",Gs(i,e))}const PR=6;class VR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??PR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class zR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zx(this),this.idTokenSubscription=new zx(this),this.beforeStateQueue=new DR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=P_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Do.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Pd(this,{idToken:e}),s=await ja._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ea(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ea(this.app))return Promise.reject(Li(this));const n=e?Jt(e):null;return n&&Le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ea(this.app)?Promise.reject(Li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ea(this.app)?Promise.reject(Li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await MR(this),n=new VR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new jc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await jR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vi(e)||this._popupRedirectResolver;Le(n,this,"argument-error"),this.redirectPersistenceManager=await Do.create(this,[Vi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(m,this,"internal-error"),m.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(ea(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&hR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Vr(i){return Jt(i)}class zx{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZT(n=>this.observer=n)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let sf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LR(i){sf=i}function W_(i){return sf.loadJS(i)}function UR(){return sf.recaptchaEnterpriseScript}function BR(){return sf.gapiScript}function HR(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class qR{constructor(){this.enterprise=new FR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class FR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const GR="recaptcha-enterprise",Z_="NO_RECAPTCHA";class $R{constructor(e){this.type=GR,this.auth=Vr(e)}async verify(e="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,m)=>{AR(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new ER(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,f(y.siteKey)}}).catch(g=>{m(g)})})}function o(c,f,m){const g=window.grecaptcha;Ox(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{f(y)}).catch(()=>{f(Z_)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qR().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{s(this.auth).then(m=>{if(!n&&Ox(window.grecaptcha))o(m,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=UR();g.length!==0&&(g+=m),W_(g).then(()=>{o(m,c,f)}).catch(y=>{f(y)})}}).catch(m=>{f(m)})})}}async function Lx(i,e,n,s=!1,o=!1){const c=new $R(i);let f;if(o)f=Z_;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function im(i,e,n,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Lx(i,e,n,n==="getOobCode");return s(i,c)}else return s(i,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Lx(i,e,n,n==="getOobCode");return s(i,f)}else return Promise.reject(c)})}function KR(i,e){const n=af(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Hi(c,e??{}))return o;Da(o,"already-initialized")}return n.initialize({options:e})}function YR(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Vi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function qm(i,e,n){const s=Vr(i);Le(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!!n?.disableWarnings,c=e1(e),{host:f,port:m}=QR(e),g=m===null?"":`:${m}`,y={url:`${c}//${f}${g}/`},_=Object.freeze({host:f,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Le(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Le(Hi(y,s.config.emulator)&&Hi(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,Mr(f)?(Om(`${c}//${f}${g}`),Dm("Auth",!0)):o||XR()}function e1(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function QR(i){const e=e1(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:Ux(s.substr(c.length+1))}}else{const[c,f]=s.split(":");return{host:c,port:Ux(f)}}}function Ux(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function XR(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class Fm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pi("not implemented")}_getIdTokenResponse(e){return Pi("not implemented")}_linkToIdToken(e,n){return Pi("not implemented")}_getReauthenticationResolver(e){return Pi("not implemented")}}async function JR(i,e){return Qi(i,"POST","/v1/accounts:update",e)}async function WR(i,e){return Qi(i,"POST","/v1/accounts:signUp",e)}async function ZR(i,e){return Dc(i,"POST","/v1/accounts:signInWithPassword",Gs(i,e))}async function e2(i,e){return Dc(i,"POST","/v1/accounts:signInWithEmailLink",Gs(i,e))}async function t2(i,e){return Dc(i,"POST","/v1/accounts:signInWithEmailLink",Gs(i,e))}class Ec extends Fm{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Ec(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Ec(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,n,"signInWithPassword",ZR);case"emailLink":return e2(e,{email:this._email,oobCode:this._password});default:Da(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,s,"signUpPassword",WR);case"emailLink":return t2(e,{idToken:n,email:this._email,oobCode:this._password});default:Da(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Mo(i,e){return Dc(i,"POST","/v1/accounts:signInWithIdp",Gs(i,e))}const n2="http://localhost";class Cr extends Fm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Cr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Da("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=n;if(!s||!o)return null;const f=new Cr(s,o);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Mo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Mo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Mo(e,n)}buildRequest(){const e={requestUri:n2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=kc(n)}return e}}function a2(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function i2(i){const e=lc(cc(i)).link,n=e?lc(cc(e)).deep_link_id:null,s=lc(cc(i)).deep_link_id;return(s?lc(cc(s)).link:null)||s||n||e||i}class Gm{constructor(e){const n=lc(cc(e)),s=n.apiKey??null,o=n.oobCode??null,c=a2(n.mode??null);Le(s&&o&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=i2(e);try{return new Gm(n)}catch{return null}}}class Wo{constructor(){this.providerId=Wo.PROVIDER_ID}static credential(e,n){return Ec._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Gm.parseLink(n);return Le(s,"argument-error"),Ec._fromEmailAndCode(e,s.code,s.tenantId)}}Wo.PROVIDER_ID="password";Wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class t1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mc extends t1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Rs extends Mc{constructor(){super("facebook.com")}static credential(e){return Cr._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rs.PROVIDER_ID="facebook.com";class Cs extends Mc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Cr._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Cs.credential(n,s)}catch{return null}}}Cs.GOOGLE_SIGN_IN_METHOD="google.com";Cs.PROVIDER_ID="google.com";class Is extends Mc{constructor(){super("github.com")}static credential(e){return Cr._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.GITHUB_SIGN_IN_METHOD="github.com";Is.PROVIDER_ID="github.com";class js extends Mc{constructor(){super("twitter.com")}static credential(e,n){return Cr._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return js.credential(n,s)}catch{return null}}}js.TWITTER_SIGN_IN_METHOD="twitter.com";js.PROVIDER_ID="twitter.com";async function s2(i,e){return Dc(i,"POST","/v1/accounts:signUp",Gs(i,e))}class Ir{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await ja._fromIdTokenResponse(e,s,o),f=Bx(s);return new Ir({user:c,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Bx(s);return new Ir({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Bx(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class zd extends mi{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,zd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new zd(e,n,s,o)}}function n1(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?zd._fromErrorAndOperation(i,c,e,s):c})}async function r2(i,e,n=!1){const s=await Bo(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Ir._forOperation(i,"link",s)}async function o2(i,e,n=!1){const{auth:s}=i;if(ea(s.app))return Promise.reject(Li(s));const o="reauthenticate";try{const c=await Bo(i,n1(s,o,e,i),n);Le(c.idToken,s,"internal-error");const f=Bm(c.idToken);Le(f,s,"internal-error");const{sub:m}=f;return Le(i.uid===m,s,"user-mismatch"),Ir._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Da(s,"user-mismatch"),c}}async function a1(i,e,n=!1){if(ea(i.app))return Promise.reject(Li(i));const s="signIn",o=await n1(i,s,e),c=await Ir._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(c.user),c}async function l2(i,e){return a1(Vr(i),e)}async function i1(i){const e=Vr(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function c2(i,e,n){if(ea(i.app))return Promise.reject(Li(i));const s=Vr(i),f=await im(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",s2).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&i1(i),g}),m=await Ir._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(m.user),m}function s1(i,e,n){return ea(i.app)?Promise.reject(Li(i)):l2(Jt(i),Wo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&i1(i),s})}function u2(i,e){return d2(Jt(i),null,e)}async function d2(i,e,n){const{auth:s}=i,c={idToken:await i.getIdToken(),returnSecureToken:!0};n&&(c.password=n);const f=await Bo(i,JR(s,c));await i._updateTokensIfNecessary(f,!0)}function f2(i,e,n,s){return Jt(i).onIdTokenChanged(e,n,s)}function h2(i,e,n){return Jt(i).beforeAuthStateChanged(e,n)}function rf(i,e,n,s){return Jt(i).onAuthStateChanged(e,n,s)}function p2(i){return Jt(i).signOut()}const Ld="__sak";class r1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ld,"1"),this.storage.removeItem(Ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const m2=1e3,g2=10;class o1 extends r1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=X_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},c=this.storage.getItem(s);OR()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,g2):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},m2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}o1.type="LOCAL";const y2=o1;class l1 extends r1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}l1.type="SESSION";const c1=l1;function b2(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class of{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new of(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async y=>y(n.origin,c)),g=await b2(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}of.receivers=[];function $m(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class x2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,f;return new Promise((m,g)=>{const y=$m("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(T.data.response);break;default:clearTimeout(_),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function li(){return window}function v2(i){li().location.href=i}function u1(){return typeof li().WorkerGlobalScope<"u"&&typeof li().importScripts=="function"}async function _2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function E2(){return navigator?.serviceWorker?.controller||null}function A2(){return u1()?self:null}const d1="firebaseLocalStorageDb",w2=1,Ud="firebaseLocalStorage",f1="fbase_key";class Pc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lf(i,e){return i.transaction([Ud],e?"readwrite":"readonly").objectStore(Ud)}function S2(){const i=indexedDB.deleteDatabase(d1);return new Pc(i).toPromise()}function sm(){const i=indexedDB.open(d1,w2);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Ud,{keyPath:f1})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Ud)?e(s):(s.close(),await S2(),e(await sm()))})})}async function Hx(i,e,n){const s=lf(i,!0).put({[f1]:e,value:n});return new Pc(s).toPromise()}async function T2(i,e){const n=lf(i,!1).get(e),s=await new Pc(n).toPromise();return s===void 0?null:s.value}function qx(i,e){const n=lf(i,!0).delete(e);return new Pc(n).toPromise()}const N2=800,R2=3;class h1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>R2)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return u1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=of._getInstance(A2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _2(),!this.activeServiceWorker)return;this.sender=new x2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||E2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sm();return await Hx(e,Ld,"1"),await qx(e,Ld),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Hx(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>T2(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=lf(o,!1).getAll();return new Pc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),N2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}h1.type="LOCAL";const C2=h1;new Oc(3e4,6e4);function I2(i,e){return e?Vi(e):(Le(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Km extends Fm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Mo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function j2(i){return a1(i.auth,new Km(i),i.bypassAuthState)}function k2(i){const{auth:e,user:n}=i;return Le(n,e,"internal-error"),o2(n,new Km(i),i.bypassAuthState)}async function O2(i){const{auth:e,user:n}=i;return Le(n,e,"internal-error"),r2(n,new Km(i),i.bypassAuthState)}class p1{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:f,type:m}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return j2;case"linkViaPopup":case"linkViaRedirect":return O2;case"reauthViaPopup":case"reauthViaRedirect":return k2;default:Da(this.auth,"internal-error")}}resolve(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const D2=new Oc(2e3,1e4);class ko extends p1{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,ko.currentPopupAction&&ko.currentPopupAction.cancel(),ko.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){Fi(this.filter.length===1,"Popup operations only handle one event");const e=$m();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ko.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,D2.get())};e()}}ko.currentPopupAction=null;const M2="pendingRedirect",wd=new Map;class P2 extends p1{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=wd.get(this.auth._key());if(!e){try{const s=await V2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}wd.set(this.auth._key(),e)}return this.bypassAuthState||wd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function V2(i,e){const n=U2(e),s=L2(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function z2(i,e){wd.set(i._key(),e)}function L2(i){return Vi(i._redirectPersistence)}function U2(i){return Ad(M2,i.config.apiKey,i.name)}async function B2(i,e,n=!1){if(ea(i.app))return Promise.reject(Li(i));const s=Vr(i),o=I2(s,e),f=await new P2(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}const H2=600*1e3;class q2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!F2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!m1(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(oi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=H2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fx(e))}saveEventToCache(e){this.cachedEventUids.add(Fx(e)),this.lastProcessedEventTime=Date.now()}}function Fx(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function m1({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function F2(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return m1(i);default:return!1}}async function G2(i,e={}){return Qi(i,"GET","/v1/projects",e)}const $2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K2=/^https?/;async function Y2(i){if(i.config.emulator)return;const{authorizedDomains:e}=await G2(i);for(const n of e)try{if(Q2(n))return}catch{}Da(i,"unauthorized-domain")}function Q2(i){const e=nm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!K2.test(n))return!1;if($2.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const X2=new Oc(3e4,6e4);function Gx(){const i=li().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function J2(i){return new Promise((e,n)=>{function s(){Gx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gx(),n(oi(i,"network-request-failed"))},timeout:X2.get()})}if(li().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(li().gapi?.load)s();else{const o=HR("iframefcb");return li()[o]=()=>{gapi.load?s():n(oi(i,"network-request-failed"))},W_(`${BR()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Sd=null,e})}let Sd=null;function W2(i){return Sd=Sd||J2(i),Sd}const Z2=new Oc(5e3,15e3),eC="__/auth/iframe",tC="emulator/auth/iframe",nC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iC(i){const e=i.config;Le(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Um(e,tC):`https://${i.config.authDomain}/${eC}`,s={apiKey:e.apiKey,appName:i.name,v:Pr},o=aC.get(i.config.apiHost);o&&(s.eid=o);const c=i._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${kc(s).slice(1)}`}async function sC(i){const e=await W2(i),n=li().gapi;return Le(n,i,"internal-error"),e.open({where:document.body,url:iC(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nC,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const f=oi(i,"network-request-failed"),m=li().setTimeout(()=>{c(f)},Z2.get());function g(){li().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{c(f)})}))}const rC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oC=500,lC=600,cC="_blank",uC="http://localhost";class $x{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dC(i,e,n,s=oC,o=lC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...rC,width:s.toString(),height:o.toString(),top:c,left:f},y=Cn().toLowerCase();n&&(m=G_(y)?cC:n),q_(y)&&(e=e||uC,g.scrollbars="yes");const _=Object.entries(g).reduce((T,[V,U])=>`${T}${V}=${U},`,"");if(kR(y)&&m!=="_self")return fC(e||"",m),new $x(null);const E=window.open(e||"",m,_);Le(E,i,"popup-blocked");try{E.focus()}catch{}return new $x(E)}function fC(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const hC="__/auth/handler",pC="emulator/auth/handler",mC=encodeURIComponent("fac");async function Kx(i,e,n,s,o,c){Le(i.config.authDomain,i,"auth-domain-config-required"),Le(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Pr,eventId:o};if(e instanceof t1){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",WT(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))f[_]=E}if(e instanceof Mc){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(f.scopes=_.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const g=await i._getAppCheckToken(),y=g?`#${mC}=${encodeURIComponent(g)}`:"";return`${gC(i)}?${kc(m).slice(1)}${y}`}function gC({config:i}){return i.emulator?Um(i,pC):`https://${i.authDomain}/${hC}`}const Bp="webStorageSupport";class yC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=c1,this._completeRedirectFn=B2,this._overrideRedirectResult=z2}async _openPopup(e,n,s,o){Fi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Kx(e,n,s,nm(),o);return dC(e,c,$m())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await Kx(e,n,s,nm(),o);return v2(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Fi(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await sC(e),s=new q2(e);return n.register("authEvent",o=>(Le(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bp,{type:Bp},o=>{const c=o?.[0]?.[Bp];c!==void 0&&n(!!c),Da(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Y2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return X_()||F_()||Hm()}}const bC=yC;var Yx="@firebase/auth",Qx="1.12.0";class xC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _C(i){Rr(new Vs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Le(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J_(i)},y=new zR(s,o,c,g);return YR(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Rr(new Vs("auth-internal",e=>{const n=Vr(e.getProvider("auth").getImmediate());return(s=>new xC(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ri(Yx,Qx,vC(i)),ri(Yx,Qx,"esm2020")}const EC=300,AC=C_("authIdTokenMaxAge")||EC;let Xx=null;const wC=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>AC)return;const o=n?.token;Xx!==o&&(Xx=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function g1(i=zm()){const e=af(i,"auth");if(e.isInitialized())return e.getImmediate();const n=KR(i,{popupRedirectResolver:bC,persistence:[C2,y2,c1]}),s=C_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const f=wC(c.toString());h2(n,f,()=>f(n.currentUser)),f2(n,m=>f(m))}}const o=T_("auth");return o&&qm(n,`http://${o}`),n}function SC(){return document.getElementsByTagName("head")?.[0]??document}LR({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const c=oi("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",SC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_C("Browser");var Jx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ms,y1;(function(){var i;function e(I,N){function j(){}j.prototype=N.prototype,I.F=N.prototype,I.prototype=new j,I.prototype.constructor=I,I.D=function(P,k,C){for(var R=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)R[Se-2]=arguments[Se];return N.prototype[k].apply(P,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,N,j){j||(j=0);const P=Array(16);if(typeof N=="string")for(var k=0;k<16;++k)P[k]=N.charCodeAt(j++)|N.charCodeAt(j++)<<8|N.charCodeAt(j++)<<16|N.charCodeAt(j++)<<24;else for(k=0;k<16;++k)P[k]=N[j++]|N[j++]<<8|N[j++]<<16|N[j++]<<24;N=I.g[0],j=I.g[1],k=I.g[2];let C=I.g[3],R;R=N+(C^j&(k^C))+P[0]+3614090360&4294967295,N=j+(R<<7&4294967295|R>>>25),R=C+(k^N&(j^k))+P[1]+3905402710&4294967295,C=N+(R<<12&4294967295|R>>>20),R=k+(j^C&(N^j))+P[2]+606105819&4294967295,k=C+(R<<17&4294967295|R>>>15),R=j+(N^k&(C^N))+P[3]+3250441966&4294967295,j=k+(R<<22&4294967295|R>>>10),R=N+(C^j&(k^C))+P[4]+4118548399&4294967295,N=j+(R<<7&4294967295|R>>>25),R=C+(k^N&(j^k))+P[5]+1200080426&4294967295,C=N+(R<<12&4294967295|R>>>20),R=k+(j^C&(N^j))+P[6]+2821735955&4294967295,k=C+(R<<17&4294967295|R>>>15),R=j+(N^k&(C^N))+P[7]+4249261313&4294967295,j=k+(R<<22&4294967295|R>>>10),R=N+(C^j&(k^C))+P[8]+1770035416&4294967295,N=j+(R<<7&4294967295|R>>>25),R=C+(k^N&(j^k))+P[9]+2336552879&4294967295,C=N+(R<<12&4294967295|R>>>20),R=k+(j^C&(N^j))+P[10]+4294925233&4294967295,k=C+(R<<17&4294967295|R>>>15),R=j+(N^k&(C^N))+P[11]+2304563134&4294967295,j=k+(R<<22&4294967295|R>>>10),R=N+(C^j&(k^C))+P[12]+1804603682&4294967295,N=j+(R<<7&4294967295|R>>>25),R=C+(k^N&(j^k))+P[13]+4254626195&4294967295,C=N+(R<<12&4294967295|R>>>20),R=k+(j^C&(N^j))+P[14]+2792965006&4294967295,k=C+(R<<17&4294967295|R>>>15),R=j+(N^k&(C^N))+P[15]+1236535329&4294967295,j=k+(R<<22&4294967295|R>>>10),R=N+(k^C&(j^k))+P[1]+4129170786&4294967295,N=j+(R<<5&4294967295|R>>>27),R=C+(j^k&(N^j))+P[6]+3225465664&4294967295,C=N+(R<<9&4294967295|R>>>23),R=k+(N^j&(C^N))+P[11]+643717713&4294967295,k=C+(R<<14&4294967295|R>>>18),R=j+(C^N&(k^C))+P[0]+3921069994&4294967295,j=k+(R<<20&4294967295|R>>>12),R=N+(k^C&(j^k))+P[5]+3593408605&4294967295,N=j+(R<<5&4294967295|R>>>27),R=C+(j^k&(N^j))+P[10]+38016083&4294967295,C=N+(R<<9&4294967295|R>>>23),R=k+(N^j&(C^N))+P[15]+3634488961&4294967295,k=C+(R<<14&4294967295|R>>>18),R=j+(C^N&(k^C))+P[4]+3889429448&4294967295,j=k+(R<<20&4294967295|R>>>12),R=N+(k^C&(j^k))+P[9]+568446438&4294967295,N=j+(R<<5&4294967295|R>>>27),R=C+(j^k&(N^j))+P[14]+3275163606&4294967295,C=N+(R<<9&4294967295|R>>>23),R=k+(N^j&(C^N))+P[3]+4107603335&4294967295,k=C+(R<<14&4294967295|R>>>18),R=j+(C^N&(k^C))+P[8]+1163531501&4294967295,j=k+(R<<20&4294967295|R>>>12),R=N+(k^C&(j^k))+P[13]+2850285829&4294967295,N=j+(R<<5&4294967295|R>>>27),R=C+(j^k&(N^j))+P[2]+4243563512&4294967295,C=N+(R<<9&4294967295|R>>>23),R=k+(N^j&(C^N))+P[7]+1735328473&4294967295,k=C+(R<<14&4294967295|R>>>18),R=j+(C^N&(k^C))+P[12]+2368359562&4294967295,j=k+(R<<20&4294967295|R>>>12),R=N+(j^k^C)+P[5]+4294588738&4294967295,N=j+(R<<4&4294967295|R>>>28),R=C+(N^j^k)+P[8]+2272392833&4294967295,C=N+(R<<11&4294967295|R>>>21),R=k+(C^N^j)+P[11]+1839030562&4294967295,k=C+(R<<16&4294967295|R>>>16),R=j+(k^C^N)+P[14]+4259657740&4294967295,j=k+(R<<23&4294967295|R>>>9),R=N+(j^k^C)+P[1]+2763975236&4294967295,N=j+(R<<4&4294967295|R>>>28),R=C+(N^j^k)+P[4]+1272893353&4294967295,C=N+(R<<11&4294967295|R>>>21),R=k+(C^N^j)+P[7]+4139469664&4294967295,k=C+(R<<16&4294967295|R>>>16),R=j+(k^C^N)+P[10]+3200236656&4294967295,j=k+(R<<23&4294967295|R>>>9),R=N+(j^k^C)+P[13]+681279174&4294967295,N=j+(R<<4&4294967295|R>>>28),R=C+(N^j^k)+P[0]+3936430074&4294967295,C=N+(R<<11&4294967295|R>>>21),R=k+(C^N^j)+P[3]+3572445317&4294967295,k=C+(R<<16&4294967295|R>>>16),R=j+(k^C^N)+P[6]+76029189&4294967295,j=k+(R<<23&4294967295|R>>>9),R=N+(j^k^C)+P[9]+3654602809&4294967295,N=j+(R<<4&4294967295|R>>>28),R=C+(N^j^k)+P[12]+3873151461&4294967295,C=N+(R<<11&4294967295|R>>>21),R=k+(C^N^j)+P[15]+530742520&4294967295,k=C+(R<<16&4294967295|R>>>16),R=j+(k^C^N)+P[2]+3299628645&4294967295,j=k+(R<<23&4294967295|R>>>9),R=N+(k^(j|~C))+P[0]+4096336452&4294967295,N=j+(R<<6&4294967295|R>>>26),R=C+(j^(N|~k))+P[7]+1126891415&4294967295,C=N+(R<<10&4294967295|R>>>22),R=k+(N^(C|~j))+P[14]+2878612391&4294967295,k=C+(R<<15&4294967295|R>>>17),R=j+(C^(k|~N))+P[5]+4237533241&4294967295,j=k+(R<<21&4294967295|R>>>11),R=N+(k^(j|~C))+P[12]+1700485571&4294967295,N=j+(R<<6&4294967295|R>>>26),R=C+(j^(N|~k))+P[3]+2399980690&4294967295,C=N+(R<<10&4294967295|R>>>22),R=k+(N^(C|~j))+P[10]+4293915773&4294967295,k=C+(R<<15&4294967295|R>>>17),R=j+(C^(k|~N))+P[1]+2240044497&4294967295,j=k+(R<<21&4294967295|R>>>11),R=N+(k^(j|~C))+P[8]+1873313359&4294967295,N=j+(R<<6&4294967295|R>>>26),R=C+(j^(N|~k))+P[15]+4264355552&4294967295,C=N+(R<<10&4294967295|R>>>22),R=k+(N^(C|~j))+P[6]+2734768916&4294967295,k=C+(R<<15&4294967295|R>>>17),R=j+(C^(k|~N))+P[13]+1309151649&4294967295,j=k+(R<<21&4294967295|R>>>11),R=N+(k^(j|~C))+P[4]+4149444226&4294967295,N=j+(R<<6&4294967295|R>>>26),R=C+(j^(N|~k))+P[11]+3174756917&4294967295,C=N+(R<<10&4294967295|R>>>22),R=k+(N^(C|~j))+P[2]+718787259&4294967295,k=C+(R<<15&4294967295|R>>>17),R=j+(C^(k|~N))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+N&4294967295,I.g[1]=I.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+k&4294967295,I.g[3]=I.g[3]+C&4294967295}s.prototype.v=function(I,N){N===void 0&&(N=I.length);const j=N-this.blockSize,P=this.C;let k=this.h,C=0;for(;C<N;){if(k==0)for(;C<=j;)o(this,I,C),C+=this.blockSize;if(typeof I=="string"){for(;C<N;)if(P[k++]=I.charCodeAt(C++),k==this.blockSize){o(this,P),k=0;break}}else for(;C<N;)if(P[k++]=I[C++],k==this.blockSize){o(this,P),k=0;break}}this.h=k,this.o+=N},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var N=1;N<I.length-8;++N)I[N]=0;N=this.o*8;for(var j=I.length-8;j<I.length;++j)I[j]=N&255,N/=256;for(this.v(I),I=Array(16),N=0,j=0;j<4;++j)for(let P=0;P<32;P+=8)I[N++]=this.g[j]>>>P&255;return I};function c(I,N){var j=m;return Object.prototype.hasOwnProperty.call(j,I)?j[I]:j[I]=N(I)}function f(I,N){this.h=N;const j=[];let P=!0;for(let k=I.length-1;k>=0;k--){const C=I[k]|0;P&&C==N||(j[k]=C,P=!1)}this.g=j}var m={};function g(I){return-128<=I&&I<128?c(I,function(N){return new f([N|0],N<0?-1:0)}):new f([I|0],I<0?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return E;if(I<0)return O(y(-I));const N=[];let j=1;for(let P=0;I>=j;P++)N[P]=I/j|0,j*=4294967296;return new f(N,0)}function _(I,N){if(I.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(I.charAt(0)=="-")return O(_(I.substring(1),N));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=y(Math.pow(N,8));let P=E;for(let C=0;C<I.length;C+=8){var k=Math.min(8,I.length-C);const R=parseInt(I.substring(C,C+k),N);k<8?(k=y(Math.pow(N,k)),P=P.j(k).add(y(R))):(P=P.j(j),P=P.add(y(R)))}return P}var E=g(0),T=g(1),V=g(16777216);i=f.prototype,i.m=function(){if(L(this))return-O(this).m();let I=0,N=1;for(let j=0;j<this.g.length;j++){const P=this.i(j);I+=(P>=0?P:4294967296+P)*N,N*=4294967296}return I},i.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(U(this))return"0";if(L(this))return"-"+O(this).toString(I);const N=y(Math.pow(I,6));var j=this;let P="";for(;;){const k=ie(j,N).g;j=X(j,k.j(N));let C=((j.g.length>0?j.g[0]:j.h)>>>0).toString(I);if(j=k,U(j))return C+P;for(;C.length<6;)C="0"+C;P=C+P}},i.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function U(I){if(I.h!=0)return!1;for(let N=0;N<I.g.length;N++)if(I.g[N]!=0)return!1;return!0}function L(I){return I.h==-1}i.l=function(I){return I=X(this,I),L(I)?-1:U(I)?0:1};function O(I){const N=I.g.length,j=[];for(let P=0;P<N;P++)j[P]=~I.g[P];return new f(j,~I.h).add(T)}i.abs=function(){return L(this)?O(this):this},i.add=function(I){const N=Math.max(this.g.length,I.g.length),j=[];let P=0;for(let k=0;k<=N;k++){let C=P+(this.i(k)&65535)+(I.i(k)&65535),R=(C>>>16)+(this.i(k)>>>16)+(I.i(k)>>>16);P=R>>>16,C&=65535,R&=65535,j[k]=R<<16|C}return new f(j,j[j.length-1]&-2147483648?-1:0)};function X(I,N){return I.add(O(N))}i.j=function(I){if(U(this)||U(I))return E;if(L(this))return L(I)?O(this).j(O(I)):O(O(this).j(I));if(L(I))return O(this.j(O(I)));if(this.l(V)<0&&I.l(V)<0)return y(this.m()*I.m());const N=this.g.length+I.g.length,j=[];for(var P=0;P<2*N;P++)j[P]=0;for(P=0;P<this.g.length;P++)for(let k=0;k<I.g.length;k++){const C=this.i(P)>>>16,R=this.i(P)&65535,Se=I.i(k)>>>16,ae=I.i(k)&65535;j[2*P+2*k]+=R*ae,Q(j,2*P+2*k),j[2*P+2*k+1]+=C*ae,Q(j,2*P+2*k+1),j[2*P+2*k+1]+=R*Se,Q(j,2*P+2*k+1),j[2*P+2*k+2]+=C*Se,Q(j,2*P+2*k+2)}for(I=0;I<N;I++)j[I]=j[2*I+1]<<16|j[2*I];for(I=N;I<2*N;I++)j[I]=0;return new f(j,0)};function Q(I,N){for(;(I[N]&65535)!=I[N];)I[N+1]+=I[N]>>>16,I[N]&=65535,N++}function te(I,N){this.g=I,this.h=N}function ie(I,N){if(U(N))throw Error("division by zero");if(U(I))return new te(E,E);if(L(I))return N=ie(O(I),N),new te(O(N.g),O(N.h));if(L(N))return N=ie(I,O(N)),new te(O(N.g),N.h);if(I.g.length>30){if(L(I)||L(N))throw Error("slowDivide_ only works with positive integers.");for(var j=T,P=N;P.l(I)<=0;)j=pe(j),P=pe(P);var k=fe(j,1),C=fe(P,1);for(P=fe(P,2),j=fe(j,2);!U(P);){var R=C.add(P);R.l(I)<=0&&(k=k.add(j),C=R),P=fe(P,1),j=fe(j,1)}return N=X(I,k.j(N)),new te(k,N)}for(k=E;I.l(N)>=0;){for(j=Math.max(1,Math.floor(I.m()/N.m())),P=Math.ceil(Math.log(j)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),C=y(j),R=C.j(N);L(R)||R.l(I)>0;)j-=P,C=y(j),R=C.j(N);U(C)&&(C=T),k=k.add(C),I=X(I,R)}return new te(k,I)}i.B=function(I){return ie(this,I).h},i.and=function(I){const N=Math.max(this.g.length,I.g.length),j=[];for(let P=0;P<N;P++)j[P]=this.i(P)&I.i(P);return new f(j,this.h&I.h)},i.or=function(I){const N=Math.max(this.g.length,I.g.length),j=[];for(let P=0;P<N;P++)j[P]=this.i(P)|I.i(P);return new f(j,this.h|I.h)},i.xor=function(I){const N=Math.max(this.g.length,I.g.length),j=[];for(let P=0;P<N;P++)j[P]=this.i(P)^I.i(P);return new f(j,this.h^I.h)};function pe(I){const N=I.g.length+1,j=[];for(let P=0;P<N;P++)j[P]=I.i(P)<<1|I.i(P-1)>>>31;return new f(j,I.h)}function fe(I,N){const j=N>>5;N%=32;const P=I.g.length-j,k=[];for(let C=0;C<P;C++)k[C]=N>0?I.i(C+j)>>>N|I.i(C+j+1)<<32-N:I.i(C+j);return new f(k,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,y1=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=_,Ms=f}).apply(typeof Jx<"u"?Jx:typeof self<"u"?self:typeof window<"u"?window:{});var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var b1,uc,x1,Td,rm,v1,_1,E1;(function(){var i,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof pd=="object"&&pd];for(var b=0;b<d.length;++b){var v=d[b];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(d,b){if(b)e:{var v=s;d=d.split(".");for(var S=0;S<d.length-1;S++){var q=d[S];if(!(q in v))break e;v=v[q]}d=d[d.length-1],S=v[d],b=b(S),b!=S&&b!=null&&e(v,d,{configurable:!0,writable:!0,value:b})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(b){var v=[],S;for(S in b)Object.prototype.hasOwnProperty.call(b,S)&&v.push([S,b[S]]);return v}});var c=c||{},f=this||self;function m(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function g(d,b,v){return d.call.apply(d.bind,arguments)}function y(d,b,v){return y=g,y.apply(null,arguments)}function _(d,b){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function E(d,b){function v(){}v.prototype=b.prototype,d.Z=b.prototype,d.prototype=new v,d.prototype.constructor=d,d.Ob=function(S,q,J){for(var ge=Array(arguments.length-2),We=2;We<arguments.length;We++)ge[We-2]=arguments[We];return b.prototype[q].apply(S,ge)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function V(d){const b=d.length;if(b>0){const v=Array(b);for(let S=0;S<b;S++)v[S]=d[S];return v}return[]}function U(d,b){for(let S=1;S<arguments.length;S++){const q=arguments[S];var v=typeof q;if(v=v!="object"?v:q?Array.isArray(q)?"array":v:"null",v=="array"||v=="object"&&typeof q.length=="number"){v=d.length||0;const J=q.length||0;d.length=v+J;for(let ge=0;ge<J;ge++)d[v+ge]=q[ge]}else d.push(q)}}class L{constructor(b,v){this.i=b,this.j=v,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function O(d){f.setTimeout(()=>{throw d},0)}function X(){var d=I;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class Q{constructor(){this.h=this.g=null}add(b,v){const S=te.get();S.set(b,v),this.h?this.h.next=S:this.g=S,this.h=S}}var te=new L(()=>new ie,d=>d.reset());class ie{constructor(){this.next=this.g=this.h=null}set(b,v){this.h=b,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,fe=!1,I=new Q,N=()=>{const d=Promise.resolve(void 0);pe=()=>{d.then(j)}};function j(){for(var d;d=X();){try{d.h.call(d.g)}catch(v){O(v)}var b=te;b.j(d),b.h<100&&(b.h++,d.next=b.g,b.g=d)}fe=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const v=()=>{};f.addEventListener("test",v,b),f.removeEventListener("test",v,b)}catch{}return d})();function R(d){return/^[\s\xa0]*$/.test(d)}function Se(d,b){k.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,b)}E(Se,k),Se.prototype.init=function(d,b){const v=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget,b||(v=="mouseover"?b=d.fromElement:v=="mouseout"&&(b=d.toElement)),this.relatedTarget=b,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Se.Z.h.call(this)},Se.prototype.h=function(){Se.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ae="closure_listenable_"+(Math.random()*1e6|0),H=0;function re(d,b,v,S,q){this.listener=d,this.proxy=null,this.src=b,this.type=v,this.capture=!!S,this.ha=q,this.key=++H,this.da=this.fa=!1}function ye(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function qe(d,b,v){for(const S in d)b.call(v,d[S],S,d)}function Je(d,b){for(const v in d)b.call(void 0,d[v],v,d)}function M(d){const b={};for(const v in d)b[v]=d[v];return b}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(d,b){let v,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(v in S)d[v]=S[v];for(let J=0;J<ee.length;J++)v=ee[J],Object.prototype.hasOwnProperty.call(S,v)&&(d[v]=S[v])}}function be(d){this.src=d,this.g={},this.h=0}be.prototype.add=function(d,b,v,S,q){const J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);const ge=Ne(d,b,S,q);return ge>-1?(b=d[ge],v||(b.fa=!1)):(b=new re(b,this.src,J,!!S,q),b.fa=v,d.push(b)),b};function me(d,b){const v=b.type;if(v in d.g){var S=d.g[v],q=Array.prototype.indexOf.call(S,b,void 0),J;(J=q>=0)&&Array.prototype.splice.call(S,q,1),J&&(ye(b),d.g[v].length==0&&(delete d.g[v],d.h--))}}function Ne(d,b,v,S){for(let q=0;q<d.length;++q){const J=d[q];if(!J.da&&J.listener==b&&J.capture==!!v&&J.ha==S)return q}return-1}var Te="closure_lm_"+(Math.random()*1e6|0),ft={};function tt(d,b,v,S,q){if(Array.isArray(b)){for(let J=0;J<b.length;J++)tt(d,b[J],v,S,q);return null}return v=he(v),d&&d[ae]?d.J(b,v,m(S)?!!S.capture:!1,q):Wt(d,b,v,!1,S,q)}function Wt(d,b,v,S,q,J){if(!b)throw Error("Invalid event type");const ge=m(q)?!!q.capture:!!q;let We=F(d);if(We||(d[Te]=We=new be(d)),v=We.add(b,v,S,ge,J),v.proxy)return v;if(S=Gt(),v.proxy=S,S.src=d,S.listener=v,d.addEventListener)C||(q=ge),q===void 0&&(q=!1),d.addEventListener(b.toString(),S,q);else if(d.attachEvent)d.attachEvent(it(b.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Gt(){function d(v){return b.call(d.src,d.listener,v)}const b=Fe;return d}function ve(d,b,v,S,q){if(Array.isArray(b))for(var J=0;J<b.length;J++)ve(d,b[J],v,S,q);else S=m(S)?!!S.capture:!!S,v=he(v),d&&d[ae]?(d=d.i,J=String(b).toString(),J in d.g&&(b=d.g[J],v=Ne(b,v,S,q),v>-1&&(ye(b[v]),Array.prototype.splice.call(b,v,1),b.length==0&&(delete d.g[J],d.h--)))):d&&(d=F(d))&&(b=d.g[b.toString()],d=-1,b&&(d=Ne(b,v,S,q)),(v=d>-1?b[d]:null)&&je(v))}function je(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[ae])me(b.i,d);else{var v=d.type,S=d.proxy;b.removeEventListener?b.removeEventListener(v,S,d.capture):b.detachEvent?b.detachEvent(it(v),S):b.addListener&&b.removeListener&&b.removeListener(S),(v=F(b))?(me(v,d),v.h==0&&(v.src=null,b[Te]=null)):ye(d)}}}function it(d){return d in ft?ft[d]:ft[d]="on"+d}function Fe(d,b){if(d.da)d=!0;else{b=new Se(b,this);const v=d.listener,S=d.ha||d.src;d.fa&&je(d),d=v.call(S,b)}return d}function F(d){return d=d[Te],d instanceof be?d:null}var xe="__closure_events_fn_"+(Math.random()*1e9>>>0);function he(d){return typeof d=="function"?d:(d[xe]||(d[xe]=function(b){return d.handleEvent(b)}),d[xe])}function _e(){P.call(this),this.i=new be(this),this.M=this,this.G=null}E(_e,P),_e.prototype[ae]=!0,_e.prototype.removeEventListener=function(d,b,v,S){ve(this,d,b,v,S)};function Ie(d,b){var v,S=d.G;if(S)for(v=[];S;S=S.G)v.push(S);if(d=d.M,S=b.type||b,typeof b=="string")b=new k(b,d);else if(b instanceof k)b.target=b.target||d;else{var q=b;b=new k(S,d),de(b,q)}q=!0;let J,ge;if(v)for(ge=v.length-1;ge>=0;ge--)J=b.g=v[ge],q=mt(J,S,!0,b)&&q;if(J=b.g=d,q=mt(J,S,!0,b)&&q,q=mt(J,S,!1,b)&&q,v)for(ge=0;ge<v.length;ge++)J=b.g=v[ge],q=mt(J,S,!1,b)&&q}_e.prototype.N=function(){if(_e.Z.N.call(this),this.i){var d=this.i;for(const b in d.g){const v=d.g[b];for(let S=0;S<v.length;S++)ye(v[S]);delete d.g[b],d.h--}}this.G=null},_e.prototype.J=function(d,b,v,S){return this.i.add(String(d),b,!1,v,S)},_e.prototype.K=function(d,b,v,S){return this.i.add(String(d),b,!0,v,S)};function mt(d,b,v,S){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();let q=!0;for(let J=0;J<b.length;++J){const ge=b[J];if(ge&&!ge.da&&ge.capture==v){const We=ge.listener,Kt=ge.ha||ge.src;ge.fa&&me(d.i,ge),q=We.call(Kt,S)!==!1&&q}}return q&&!S.defaultPrevented}function K(d,b){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:f.setTimeout(d,b||0)}function Me(d){d.g=K(()=>{d.g=null,d.i&&(d.i=!1,Me(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class gt extends P{constructor(b,v){super(),this.m=b,this.l=v,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Me(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $t(d){P.call(this),this.h=d,this.g={}}E($t,P);var W=[];function Pe(d){qe(d.g,function(b,v){this.g.hasOwnProperty(v)&&je(b)},d),d.g={}}$t.prototype.N=function(){$t.Z.N.call(this),Pe(this)},$t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $e=f.JSON.stringify,ce=f.JSON.parse,Be=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function xt(){}function ht(){}var He={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ke(){k.call(this,"d")}E(ke,k);function Xe(){k.call(this,"c")}E(Xe,k);var Ke={},xa=null;function Pa(){return xa=xa||new _e}Ke.Ia="serverreachability";function Hc(d){k.call(this,Ke.Ia,d)}E(Hc,k);function Va(d){const b=Pa();Ie(b,new Hc(b))}Ke.STAT_EVENT="statevent";function Qs(d,b){k.call(this,Ke.STAT_EVENT,d),this.stat=b}E(Qs,k);function Zt(d){const b=Pa();Ie(b,new Qs(b,d))}Ke.Ja="timingevent";function za(d,b){k.call(this,Ke.Ja,d),this.size=b}E(za,k);function La(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},b)}function va(){this.g=!0}va.prototype.ua=function(){this.g=!1};function If(d,b,v,S,q,J){d.info(function(){if(d.g)if(J){var ge="",We=J.split("&");for(let vt=0;vt<We.length;vt++){var Kt=We[vt].split("=");if(Kt.length>1){const Pt=Kt[0];Kt=Kt[1];const ra=Pt.split("_");ge=ra.length>=2&&ra[1]=="type"?ge+(Pt+"="+Kt+"&"):ge+(Pt+"=redacted&")}}}else ge=null;else ge=J;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+b+`
`+v+`
`+ge})}function qc(d,b,v,S,q,J,ge){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+b+`
`+v+`
`+J+" "+ge})}function Ua(d,b,v,S){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+jf(d,v)+(S?" "+S:"")})}function Xs(d,b){d.info(function(){return"TIMEOUT: "+b})}va.prototype.info=function(){};function jf(d,b){if(!d.g)return b;if(!b)return null;try{const J=JSON.parse(b);if(J){for(d=0;d<J.length;d++)if(Array.isArray(J[d])){var v=J[d];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var q=S[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ge=1;ge<S.length;ge++)S[ge]=""}}}}return $e(J)}catch{return b}}var Js={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rl;function Ws(){}E(Ws,xt),Ws.prototype.g=function(){return new XMLHttpRequest},rl=new Ws;function yi(d){return encodeURIComponent(String(d))}function Fc(d){var b=1;d=d.split(":");const v=[];for(;b>0&&d.length;)v.push(d.shift()),b--;return d.length&&v.push(d.join(":")),v}function _a(d,b,v,S){this.j=d,this.i=b,this.l=v,this.S=S||1,this.V=new $t(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ea}function Ea(){this.i=null,this.g="",this.h=!1}var en={},hn={};function Ba(d,b,v){d.M=1,d.A=Zs(nn(b)),d.u=v,d.R=!0,Br(d,null)}function Br(d,b){d.F=Date.now(),Ha(d),d.B=nn(d.A);var v=d.B,S=d.S;Array.isArray(S)||(S=[String(S)]),Gr(v.i,"t",S),d.C=0,v=d.j.L,d.h=new Ea,d.g=su(d.j,v?b:null,!d.u),d.P>0&&(d.O=new gt(y(d.Y,d,d.g),d.P)),b=d.V,v=d.g,S=d.ba;var q="readystatechange";Array.isArray(q)||(q&&(W[0]=q.toString()),q=W);for(let J=0;J<q.length;J++){const ge=tt(v,q[J],S||b.handleEvent,!1,b.h||b);if(!ge)break;b.g[ge.key]=ge}b=d.J?M(d.J):{},d.u?(d.v||(d.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,b)):(d.v="GET",d.g.ea(d.B,d.v,null,b)),Va(),If(d.i,d.v,d.B,d.l,d.S,d.u)}_a.prototype.ba=function(d){d=d.target;const b=this.O;b&&Sa(d)==3?b.j():this.Y(d)},_a.prototype.Y=function(d){try{if(d==this.g)e:{const We=Sa(this.g),Kt=this.g.ya(),vt=this.g.ca();if(!(We<3)&&(We!=3||this.g&&(this.h.h||this.g.la()||yn(this.g)))){this.K||We!=4||Kt==7||(Kt==8||vt<=0?Va(3):Va(2)),qa(this);var b=this.g.ca();this.X=b;var v=kf(this);if(this.o=b==200,qc(this.i,this.v,this.B,this.l,this.S,We,b),this.o){if(this.U&&!this.L){t:{if(this.g){var S,q=this.g;if((S=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var J=S;break t}}J=null}if(d=J)Ua(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fa(this,d);else{this.o=!1,this.m=3,Zt(12),Gn(this),aa(this);break e}}if(this.R){d=!0;let Pt;for(;!this.K&&this.C<v.length;)if(Pt=$c(this,v),Pt==hn){We==4&&(this.m=4,Zt(14),d=!1),Ua(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==en){this.m=4,Zt(15),Ua(this.i,this.l,v,"[Invalid Chunk]"),d=!1;break}else Ua(this.i,this.l,Pt,null),Fa(this,Pt);if(Gc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||v.length!=0||this.h.h||(this.m=1,Zt(16),d=!1),this.o=this.o&&d,!d)Ua(this.i,this.l,v,"[Invalid Chunked Response]"),Gn(this),aa(this);else if(v.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),_l(ge),ge.P=!0,Zt(11))}}else Ua(this.i,this.l,v,null),Fa(this,v);We==4&&Gn(this),this.o&&!this.K&&(We==4?tu(this.j,this):(this.o=!1,Ha(this)))}else xi(this.g),b==400&&v.indexOf("Unknown SID")>0?(this.m=3,Zt(12)):(this.m=0,Zt(13)),Gn(this),aa(this)}}}catch{}};function kf(d){if(!Gc(d))return d.g.la();const b=yn(d.g);if(b==="")return"";let v="";const S=b.length,q=Sa(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Gn(d),aa(d),"";d.h.i=new f.TextDecoder}for(let J=0;J<S;J++)d.h.h=!0,v+=d.h.i.decode(b[J],{stream:!(q&&J==S-1)});return b.length=0,d.h.g+=v,d.C=0,d.h.g}function Gc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function $c(d,b){var v=d.C,S=b.indexOf(`
`,v);return S==-1?hn:(v=Number(b.substring(v,S)),isNaN(v)?en:(S+=1,S+v>b.length?hn:(b=b.slice(S,S+v),d.C=S+v,b)))}_a.prototype.cancel=function(){this.K=!0,Gn(this)};function Ha(d){d.T=Date.now()+d.H,Hr(d,d.H)}function Hr(d,b){if(d.D!=null)throw Error("WatchDog timer not null");d.D=La(y(d.aa,d),b)}function qa(d){d.D&&(f.clearTimeout(d.D),d.D=null)}_a.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Xs(this.i,this.B),this.M!=2&&(Va(),Zt(17)),Gn(this),this.m=2,aa(this)):Hr(this,this.T-d)};function aa(d){d.j.I==0||d.K||tu(d.j,d)}function Gn(d){qa(d);var b=d.O;b&&typeof b.dispose=="function"&&b.dispose(),d.O=null,Pe(d.V),d.g&&(b=d.g,d.g=null,b.abort(),b.dispose())}function Fa(d,b){try{var v=d.j;if(v.I!=0&&(v.g==d||$a(v.h,d))){if(!d.L&&$a(v.h,d)&&v.I==3){try{var S=v.Ba.g.parse(b)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<d.F)Xr(v),as(v);else break e;rr(v),Zt(18)}}else v.xa=q[1],0<v.xa-v.K&&q[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=La(y(v.Va,v),6e3));Ga(v.h)<=1&&v.ta&&(v.ta=void 0)}else Wa(v,11)}else if((d.L||v.g==d)&&Xr(v),!R(b))for(q=v.Ba.g.parse(b),b=0;b<q.length;b++){let vt=q[b];const Pt=vt[0];if(!(Pt<=v.K))if(v.K=Pt,vt=vt[1],v.I==2)if(vt[0]=="c"){v.M=vt[1],v.ba=vt[2];const ra=vt[3];ra!=null&&(v.ka=ra,v.j.info("VER="+v.ka));const Za=vt[4];Za!=null&&(v.za=Za,v.j.info("SVER="+v.za));const Ta=vt[5];Ta!=null&&typeof Ta=="number"&&Ta>0&&(S=1.5*Ta,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Na=d.g;if(Na){const or=Na.g?Na.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(or){var J=S.h;J.g||or.indexOf("spdy")==-1&&or.indexOf("quic")==-1&&or.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(cl(J,J.h),J.h=null))}if(S.G){const Jr=Na.g?Na.g.getResponseHeader("X-HTTP-Session-Id"):null;Jr&&(S.wa=Jr,At(S.J,S.G,Jr))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-d.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var ge=d;if(S.na=iu(S,S.L?S.ba:null,S.W),ge.L){ul(S.h,ge);var We=ge,Kt=S.O;Kt&&(We.H=Kt),We.D&&(qa(We),Ha(We)),S.g=ge}else Zc(S);v.i.length>0&&Ja(v)}else vt[0]!="stop"&&vt[0]!="close"||Wa(v,7);else v.I==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?Wa(v,7):xl(v):vt[0]!="noop"&&v.l&&v.l.qa(vt),v.A=0)}}Va(4)}catch{}}var tn=class{constructor(d,b){this.g=d,this.map=b}};function ol(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ll(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ga(d){return d.h?1:d.g?d.g.size:0}function $a(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function cl(d,b){d.g?d.g.add(b):d.h=b}function ul(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}ol.prototype.cancel=function(){if(this.i=dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function dl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const v of d.g.values())b=b.concat(v.G);return b}return V(d.i)}var Kc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qr(d,b){if(d){d=d.split("&");for(let v=0;v<d.length;v++){const S=d[v].indexOf("=");let q,J=null;S>=0?(q=d[v].substring(0,S),J=d[v].substring(S+1)):q=d[v],b(q,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function $n(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;d instanceof $n?(this.l=d.l,pn(this,d.j),this.o=d.o,this.g=d.g,Xi(this,d.u),this.h=d.h,fl(this,Jc(d.i)),this.m=d.m):d&&(b=String(d).match(Kc))?(this.l=!1,pn(this,b[1]||"",!0),this.o=Ka(b[2]||""),this.g=Ka(b[3]||"",!0),Xi(this,b[4]),this.h=Ka(b[5]||"",!0),fl(this,b[6]||"",!0),this.m=Ka(b[7]||"")):(this.l=!1,this.i=new Wi(null,this.l))}$n.prototype.toString=function(){const d=[];var b=this.j;b&&d.push(er(b,Fr,!0),":");var v=this.g;return(v||b=="file")&&(d.push("//"),(b=this.o)&&d.push(er(b,Fr,!0),"@"),d.push(yi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&d.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(er(v,v.charAt(0)=="/"?hl:Yc,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",er(v,Qc)),d.join("")},$n.prototype.resolve=function(d){const b=nn(this);let v=!!d.j;v?pn(b,d.j):v=!!d.o,v?b.o=d.o:v=!!d.g,v?b.g=d.g:v=d.u!=null;var S=d.h;if(v)Xi(b,d.u);else if(v=!!d.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var q=b.h.lastIndexOf("/");q!=-1&&(S=b.h.slice(0,q+1)+S)}if(q=S,q==".."||q==".")S="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){S=q.lastIndexOf("/",0)==0,q=q.split("/");const J=[];for(let ge=0;ge<q.length;){const We=q[ge++];We=="."?S&&ge==q.length&&J.push(""):We==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),S&&ge==q.length&&J.push("")):(J.push(We),S=!0)}S=J.join("/")}else S=q}return v?b.h=S:v=d.i.toString()!=="",v?fl(b,Jc(d.i)):v=!!d.m,v&&(b.m=d.m),b};function nn(d){return new $n(d)}function pn(d,b,v){d.j=v?Ka(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function Xi(d,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);d.u=b}else d.u=null}function fl(d,b,v){b instanceof Wi?(d.i=b,$r(d.i,d.l)):(v||(b=er(b,Ji)),d.i=new Wi(b,d.l))}function At(d,b,v){d.i.set(b,v)}function Zs(d){return At(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Ka(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function er(d,b,v){return typeof d=="string"?(d=encodeURI(d).replace(b,Dn),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Dn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Fr=/[#\/\?@]/g,Yc=/[#\?:]/g,hl=/[#\?]/g,Ji=/[#\?@]/g,Qc=/#/g;function Wi(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function Mn(d){d.g||(d.g=new Map,d.h=0,d.i&&qr(d.i,function(b,v){d.add(decodeURIComponent(b.replace(/\+/g," ")),v)}))}i=Wi.prototype,i.add=function(d,b){Mn(this),this.i=null,d=Zi(this,d);let v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(b),this.h+=1,this};function Xc(d,b){Mn(d),b=Zi(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function pl(d,b){return Mn(d),b=Zi(d,b),d.g.has(b)}i.forEach=function(d,b){Mn(this),this.g.forEach(function(v,S){v.forEach(function(q){d.call(b,q,S,this)},this)},this)};function ml(d,b){Mn(d);let v=[];if(typeof b=="string")pl(d,b)&&(v=v.concat(d.g.get(Zi(d,b))));else for(d=Array.from(d.g.values()),b=0;b<d.length;b++)v=v.concat(d[b]);return v}i.set=function(d,b){return Mn(this),this.i=null,d=Zi(this,d),pl(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},i.get=function(d,b){return d?(d=ml(this,d),d.length>0?String(d[0]):b):b};function Gr(d,b,v){Xc(d,b),v.length>0&&(d.i=null,d.g.set(Zi(d,b),V(v)),d.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(let S=0;S<b.length;S++){var v=b[S];const q=yi(v);v=ml(this,v);for(let J=0;J<v.length;J++){let ge=q;v[J]!==""&&(ge+="="+yi(v[J])),d.push(ge)}}return this.i=d.join("&")};function Jc(d){const b=new Wi;return b.i=d.i,d.g&&(b.g=new Map(d.g),b.h=d.h),b}function Zi(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function $r(d,b){b&&!d.j&&(Mn(d),d.i=null,d.g.forEach(function(v,S){const q=S.toLowerCase();S!=q&&(Xc(this,S),Gr(this,q,v))},d)),d.j=b}function Aa(d,b){const v=new va;if(f.Image){const S=new Image;S.onload=_(ia,v,"TestLoadImage: loaded",!0,b,S),S.onerror=_(ia,v,"TestLoadImage: error",!1,b,S),S.onabort=_(ia,v,"TestLoadImage: abort",!1,b,S),S.ontimeout=_(ia,v,"TestLoadImage: timeout",!1,b,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else b(!1)}function gl(d,b){const v=new va,S=new AbortController,q=setTimeout(()=>{S.abort(),ia(v,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:S.signal}).then(J=>{clearTimeout(q),J.ok?ia(v,"TestPingServer: ok",!0,b):ia(v,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(q),ia(v,"TestPingServer: error",!1,b)})}function ia(d,b,v,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(v)}catch{}}function es(){this.g=new Be}function Ya(d){this.i=d.Sb||null,this.h=d.ab||!1}E(Ya,xt),Ya.prototype.g=function(){return new tr(this.i,this.h)};function tr(d,b){_e.call(this),this.H=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(tr,_e),i=tr.prototype,i.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=b,this.readyState=1,wa(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(b.body=d),(this.H||f).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ts(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,wa(this)),this.g&&(this.readyState=3,wa(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Kr(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Kr(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?ts(this):wa(this),this.readyState==3&&Kr(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,ts(this))},i.Na=function(d){this.g&&(this.response=d,ts(this))},i.ga=function(){this.g&&ts(this)};function ts(d){d.readyState=4,d.l=null,d.j=null,d.B=null,wa(d)}i.setRequestHeader=function(d,b){this.A.append(d,b)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var v=b.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=b.next();return d.join(`\r
`)};function wa(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function sa(d){let b="";return qe(d,function(v,S){b+=S,b+=":",b+=v,b+=`\r
`}),b}function nr(d,b,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=sa(v),typeof d=="string"?v!=null&&yi(v):At(d,b,v))}function Tt(d){_e.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Tt,_e);var Qa=/^https?$/i,yl=["POST","PUT"];i=Tt.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,b,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rl.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(J){ar(this,J);return}if(d=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)v.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const J of S.keys())v.set(J,S.get(J));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(J=>J.toLowerCase()=="content-type"),q=f.FormData&&d instanceof f.FormData,!(Array.prototype.indexOf.call(yl,b,void 0)>=0)||S||q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ge]of v)this.g.setRequestHeader(J,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(J){ar(this,J)}};function ar(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.o=5,bl(d),bi(d)}function bl(d){d.A||(d.A=!0,Ie(d,"complete"),Ie(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ie(this,"complete"),Ie(this,"abort"),bi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bi(this,!0)),Tt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?ir(this):this.Xa())},i.Xa=function(){ir(this)};function ir(d){if(d.h&&typeof c<"u"){if(d.v&&Sa(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ie(d,"readystatechange"),Sa(d)==4){d.h=!1;try{const J=d.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var v;if(!(v=b)){var S;if(S=J===0){let ge=String(d.D).match(Kc)[1]||null;!ge&&f.self&&f.self.location&&(ge=f.self.location.protocol.slice(0,-1)),S=!Qa.test(ge?ge.toLowerCase():"")}v=S}if(v)Ie(d,"complete"),Ie(d,"success");else{d.o=6;try{var q=Sa(d)>2?d.g.statusText:""}catch{q=""}d.l=q+" ["+d.ca()+"]",bl(d)}}finally{bi(d)}}}}function bi(d,b){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const v=d.g;d.g=null,b||Ie(d,"ready");try{v.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Sa(d){return d.g?d.g.readyState:0}i.ca=function(){try{return Sa(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),ce(b)}};function yn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function xi(d){const b={};d=(d.g&&Sa(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(R(d[S]))continue;var v=Fc(d[S]);const q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const J=b[q]||[];b[q]=J,J.push(v)}Je(b,function(S){return S.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xa(d,b,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||b}function ns(d){this.za=0,this.i=[],this.j=new va,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xa("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xa("baseRetryDelayMs",5e3,d),this.Za=Xa("retryDelaySeedMs",1e4,d),this.Ta=Xa("forwardChannelMaxRetries",2,d),this.va=Xa("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new ol(d&&d.concurrentRequestLimit),this.Ba=new es,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ns.prototype,i.ka=8,i.I=1,i.connect=function(d,b,v,S){Zt(0),this.W=d,this.H=b||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=iu(this,null,this.W),Ja(this)};function xl(d){if(Yr(d),d.I==3){var b=d.V++,v=nn(d.J);if(At(v,"SID",d.M),At(v,"RID",b),At(v,"TYPE","terminate"),sr(d,v),b=new _a(d,d.j,b),b.M=2,b.A=Zs(nn(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(b.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=b.A,v=!0),v||(b.g=su(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Ha(b)}au(d)}function as(d){d.g&&(_l(d),d.g.cancel(),d.g=null)}function Yr(d){as(d),d.v&&(f.clearTimeout(d.v),d.v=null),Xr(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&f.clearTimeout(d.m),d.m=null)}function Ja(d){if(!ll(d.h)&&!d.m){d.m=!0;var b=d.Ea;pe||N(),fe||(pe(),fe=!0),I.add(b,d),d.D=0}}function Qr(d,b){return Ga(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=b.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=La(y(d.Ea,d,b),nu(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const q=new _a(this,this.j,d);let J=this.o;if(this.U&&(J?(J=M(J),de(J,this.U)):J=this.U),this.u!==null||this.R||(q.J=J,J=null),this.S)e:{for(var b=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(b+=S,b>4096){b=v;break e}if(b===4096||v===this.i.length-1){b=v+1;break e}}b=1e3}else b=1e3;b=Wc(this,q,b),v=nn(this.J),At(v,"RID",d),At(v,"CVER",22),this.G&&At(v,"X-HTTP-Session-Id",this.G),sr(this,v),J&&(this.R?b="headers="+yi(sa(J))+"&"+b:this.u&&nr(v,this.u,J)),cl(this.h,q),this.Ra&&At(v,"TYPE","init"),this.S?(At(v,"$req",b),At(v,"SID","null"),q.U=!0,Ba(q,v,null)):Ba(q,v,b),this.I=2}}else this.I==3&&(d?vl(this,d):this.i.length==0||ll(this.h)||vl(this))};function vl(d,b){var v;b?v=b.l:v=d.V++;const S=nn(d.J);At(S,"SID",d.M),At(S,"RID",v),At(S,"AID",d.K),sr(d,S),d.u&&d.o&&nr(S,d.u,d.o),v=new _a(d,d.j,v,d.D+1),d.u===null&&(v.J=d.o),b&&(d.i=b.G.concat(d.i)),b=Wc(d,v,1e3),v.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),cl(d.h,v),Ba(v,S,b)}function sr(d,b){d.H&&qe(d.H,function(v,S){At(b,S,v)}),d.l&&qe({},function(v,S){At(b,S,v)})}function Wc(d,b,v){v=Math.min(d.i.length,v);const S=d.l?y(d.l.Ka,d.l,d):null;e:{var q=d.i;let We=-1;for(;;){const Kt=["count="+v];We==-1?v>0?(We=q[0].g,Kt.push("ofs="+We)):We=0:Kt.push("ofs="+We);let vt=!0;for(let Pt=0;Pt<v;Pt++){var J=q[Pt].g;const ra=q[Pt].map;if(J-=We,J<0)We=Math.max(0,q[Pt].g-100),vt=!1;else try{J="req"+J+"_"||"";try{var ge=ra instanceof Map?ra:Object.entries(ra);for(const[Za,Ta]of ge){let Na=Ta;m(Ta)&&(Na=$e(Ta)),Kt.push(J+Za+"="+encodeURIComponent(Na))}}catch(Za){throw Kt.push(J+"type="+encodeURIComponent("_badmap")),Za}}catch{S&&S(ra)}}if(vt){ge=Kt.join("&");break e}}ge=void 0}return d=d.i.splice(0,v),b.G=d,ge}function Zc(d){if(!d.g&&!d.v){d.Y=1;var b=d.Da;pe||N(),fe||(pe(),fe=!0),I.add(b,d),d.A=0}}function rr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=La(y(d.Da,d),nu(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,eu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=La(y(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Zt(10),as(this),eu(this))};function _l(d){d.B!=null&&(f.clearTimeout(d.B),d.B=null)}function eu(d){d.g=new _a(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var b=nn(d.na);At(b,"RID","rpc"),At(b,"SID",d.M),At(b,"AID",d.K),At(b,"CI",d.F?"0":"1"),!d.F&&d.ia&&At(b,"TO",d.ia),At(b,"TYPE","xmlhttp"),sr(d,b),d.u&&d.o&&nr(b,d.u,d.o),d.O&&(d.g.H=d.O);var v=d.g;d=d.ba,v.M=1,v.A=Zs(nn(b)),v.u=null,v.R=!0,Br(v,d)}i.Va=function(){this.C!=null&&(this.C=null,as(this),rr(this),Zt(19))};function Xr(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function tu(d,b){var v=null;if(d.g==b){Xr(d),_l(d),d.g=null;var S=2}else if($a(d.h,b))v=b.G,ul(d.h,b),S=1;else return;if(d.I!=0){if(b.o)if(S==1){v=b.u?b.u.length:0,b=Date.now()-b.F;var q=d.D;S=Pa(),Ie(S,new za(S,v)),Ja(d)}else Zc(d);else if(q=b.m,q==3||q==0&&b.X>0||!(S==1&&Qr(d,b)||S==2&&rr(d)))switch(v&&v.length>0&&(b=d.h,b.i=b.i.concat(v)),q){case 1:Wa(d,5);break;case 4:Wa(d,10);break;case 3:Wa(d,6);break;default:Wa(d,2)}}}function nu(d,b){let v=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(v*=2),v*b}function Wa(d,b){if(d.j.info("Error code "+b),b==2){var v=y(d.bb,d),S=d.Ua;const q=!S;S=new $n(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||pn(S,"https"),Zs(S),q?Aa(S.toString(),v):gl(S.toString(),v)}else Zt(2);d.I=0,d.l&&d.l.pa(b),au(d),Yr(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function au(d){if(d.I=0,d.ja=[],d.l){const b=dl(d.h);(b.length!=0||d.i.length!=0)&&(U(d.ja,b),U(d.ja,d.i),d.h.i.length=0,V(d.i),d.i.length=0),d.l.oa()}}function iu(d,b,v){var S=v instanceof $n?nn(v):new $n(v);if(S.g!="")b&&(S.g=b+"."+S.g),Xi(S,S.u);else{var q=f.location;S=q.protocol,b=b?b+"."+q.hostname:q.hostname,q=+q.port;const J=new $n(null);S&&pn(J,S),b&&(J.g=b),q&&Xi(J,q),v&&(J.h=v),S=J}return v=d.G,b=d.wa,v&&b&&At(S,v,b),At(S,"VER",d.ka),sr(d,S),S}function su(d,b,v){if(b&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Aa&&!d.ma?new Tt(new Ya({ab:v})):new Tt(d.ma),b.Fa(d.L),b}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ru(){}i=ru.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function is(){}is.prototype.g=function(d,b){return new In(d,b)};function In(d,b){_e.call(this),this.g=new ns(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(d?d["X-WebChannel-Client-Profile"]=b.sa:d={"X-WebChannel-Client-Profile":b.sa}),this.g.U=d,(d=b&&b.Qb)&&!R(d)&&(this.g.u=d),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!R(b)&&(this.g.G=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new vi(this)}E(In,_e),In.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){xl(this.g)},In.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.v&&(v={},v.__data__=$e(d),d=v);b.i.push(new tn(b.Ya++,d)),b.I==3&&Ja(b)},In.prototype.N=function(){this.g.l=null,delete this.j,xl(this.g),delete this.g,In.Z.N.call(this)};function ou(d){ke.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){e:{for(const v in b){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}E(ou,ke);function lu(){Xe.call(this),this.status=1}E(lu,Xe);function vi(d){this.g=d}E(vi,ru),vi.prototype.ra=function(){Ie(this.g,"a")},vi.prototype.qa=function(d){Ie(this.g,new ou(d))},vi.prototype.pa=function(d){Ie(this.g,new lu)},vi.prototype.oa=function(){Ie(this.g,"b")},is.prototype.createWebChannel=is.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,E1=function(){return new is},_1=function(){return Pa()},v1=Ke,rm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Js.NO_ERROR=0,Js.TIMEOUT=8,Js.HTTP_ERROR=6,Td=Js,sl.COMPLETE="complete",x1=sl,ht.EventType=He,He.OPEN="a",He.CLOSE="b",He.ERROR="c",He.MESSAGE="d",_e.prototype.listen=_e.prototype.J,uc=ht,Tt.prototype.listenOnce=Tt.prototype.K,Tt.prototype.getLastError=Tt.prototype.Ha,Tt.prototype.getLastErrorCode=Tt.prototype.ya,Tt.prototype.getStatus=Tt.prototype.ca,Tt.prototype.getResponseJson=Tt.prototype.La,Tt.prototype.getResponseText=Tt.prototype.la,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Fa,b1=Tt}).apply(typeof pd<"u"?pd:typeof self<"u"?self:typeof window<"u"?window:{});class Nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");let Zo="12.8.0";function TC(i){Zo=i}const jr=new Mm("@firebase/firestore");function Ro(){return jr.logLevel}function we(i,...e){if(jr.logLevel<=ot.DEBUG){const n=e.map(Ym);jr.debug(`Firestore (${Zo}): ${i}`,...n)}}function Gi(i,...e){if(jr.logLevel<=ot.ERROR){const n=e.map(Ym);jr.error(`Firestore (${Zo}): ${i}`,...n)}}function Ho(i,...e){if(jr.logLevel<=ot.WARN){const n=e.map(Ym);jr.warn(`Firestore (${Zo}): ${i}`,...n)}}function Ym(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function Ue(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,A1(i,s,n)}function A1(i,e,n){let s=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Gi(s),new Error(s)}function Et(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||A1(e,o,s)}function Qe(i,e){return i}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends mi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ui{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class w1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Nn.UNAUTHENTICATED)))}shutdown(){}}class RC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class CC{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Et(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new Ui;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ui,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ui)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Et(typeof s.accessToken=="string",31837,{l:s}),new w1(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}}class IC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class jC{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new IC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Wx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ea(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Et(this.o===void 0,3512);const s=c=>{c.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,we("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Wx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Wx(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function OC(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Qm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=OC(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<n&&(s+=e.charAt(o[c]%62))}return s}}function lt(i,e){return i<e?-1:i>e?1:0}function om(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),c=e.charAt(s);if(o!==c)return Hp(o)===Hp(c)?lt(o,c):Hp(o)?1:-1}return lt(i.length,e.length)}const DC=55296,MC=57343;function Hp(i){const e=i.charCodeAt(0);return e>=DC&&e<=MC}function qo(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const Zx="__name__";class si{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ue(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ue(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return si.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof si?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const c=si.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return lt(e.length,n.length)}static compareSegments(e,n){const s=si.isNumericId(e),o=si.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?si.extractNumericId(e).compare(si.extractNumericId(n)):om(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ms.fromString(e.substring(4,e.length-2))}}class kt extends si{construct(e,n,s){return new kt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ee(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new kt(n)}static emptyPath(){return new kt([])}}const PC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class An extends si{construct(e,n,s){return new An(e,n,s)}static isValidIdentifier(e){return PC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),An.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zx}static keyField(){return new An([Zx])}static fromServerFormat(e){const n=[];let s="",o=0;const c=()=>{if(s.length===0)throw new Ee(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new Ee(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ee(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(c(),o++)}if(c(),f)throw new Ee(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new An(n)}static emptyPath(){return new An([])}}class De{constructor(e){this.path=e}static fromPath(e){return new De(kt.fromString(e))}static fromName(e){return new De(kt.fromString(e).popFirst(5))}static empty(){return new De(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return kt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new kt(e.slice()))}}function S1(i,e,n){if(!n)throw new Ee(oe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function VC(i,e,n,s){if(e===!0&&s===!0)throw new Ee(oe.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function ev(i){if(!De.isDocumentKey(i))throw new Ee(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function tv(i){if(De.isDocumentKey(i))throw new Ee(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function T1(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function cf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ue(12329,{type:typeof i})}function Fn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ee(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cf(i);throw new Ee(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function un(i,e){const n={typeString:i};return e&&(n.value=e),n}function Vc(i,e){if(!T1(i))throw new Ee(oe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const f=i[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new Ee(oe.INVALID_ARGUMENT,n);return!0}const nv=-62135596800,av=1e6;class Mt{static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*av);return new Mt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<nv)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/av}_compareTo(e){return this.seconds===e.seconds?lt(this.nanoseconds,e.nanoseconds):lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vc(e,Mt._jsonSchema))return new Mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Mt._jsonSchemaVersion="firestore/timestamp/1.0",Mt._jsonSchema={type:un("string",Mt._jsonSchemaVersion),seconds:un("number"),nanoseconds:un("number")};class Ge{static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new Mt(0,0))}static max(){return new Ge(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ac=-1;function zC(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Ge.fromTimestamp(s===1e9?new Mt(n+1,0):new Mt(n,s));return new zs(o,De.empty(),e)}function LC(i){return new zs(i.readTime,i.key,Ac)}class zs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new zs(Ge.min(),De.empty(),Ac)}static max(){return new zs(Ge.max(),De.empty(),Ac)}}function UC(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=De.comparator(i.documentKey,e.documentKey),n!==0?n:lt(i.largestBatchId,e.largestBatchId))}const BC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function el(i){if(i.code!==oe.FAILED_PRECONDITION||i.message!==BC)throw i;we("LocalStore","Unexpectedly lost primary lease")}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,s)=>{n(e)}))}static reject(e){return new ue(((n,s)=>{s(e)}))}static waitFor(e){return new ue(((n,s)=>{let o=0,c=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++c,f&&c===o&&n()}),(g=>s(g)))})),f=!0,c===o&&n()}))}static or(e){let n=ue.resolve(!1);for(const s of e)n=n.next((o=>o?ue.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,c)=>{s.push(n.call(this,o,c))})),this.waitFor(s)}static mapArray(e,n){return new ue(((s,o)=>{const c=e.length,f=new Array(c);let m=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((_=>{f[y]=_,++m,m===c&&s(f)}),(_=>o(_)))}}))}static doWhile(e,n){return new ue(((s,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):s()};c()}))}}function qC(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tl(i){return i.name==="IndexedDbTransactionError"}class uf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}uf.ce=-1;const Xm=-1;function df(i){return i==null}function Bd(i){return i===0&&1/i==-1/0}function FC(i){return typeof i=="number"&&Number.isInteger(i)&&!Bd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const N1="";function GC(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=iv(e)),e=$C(i.get(n),e);return iv(e)}function $C(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case N1:n+="";break;default:n+=c}}return n}function iv(i){return i+N1+""}function sv(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function $s(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function R1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Bt{constructor(e,n){this.comparator=e,this.root=n||En.EMPTY}insert(e,n){return new Bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new Bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class En{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??En.RED,this.left=o??En.EMPTY,this.right=c??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,c){return new En(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return En.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ue(27949);return e+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw Ue(57766)}get value(){throw Ue(16141)}get color(){throw Ue(16727)}get left(){throw Ue(29726)}get right(){throw Ue(36894)}copy(e,n,s,o,c){return this}insert(e,n,s){return new En(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fn{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rv(this.data.getIterator())}getIteratorFrom(e){return new rv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof fn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new fn(this.comparator);return n.data=e,n}}class rv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ta{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new ta([])}unionWith(e){let n=new fn(An.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ta(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class C1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new C1("Invalid base64 string: "+c):c}})(e);return new wn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let f=0;f<o.length;++f)c+=String.fromCharCode(o[f]);return c})(e);return new wn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wn.EMPTY_BYTE_STRING=new wn("");const KC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ls(i){if(Et(!!i,39018),typeof i=="string"){let e=0;const n=KC.exec(i);if(Et(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Xt(i.seconds),nanos:Xt(i.nanos)}}function Xt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Us(i){return typeof i=="string"?wn.fromBase64String(i):wn.fromUint8Array(i)}const I1="server_timestamp",j1="__type__",k1="__previous_value__",O1="__local_write_time__";function Jm(i){return(i?.mapValue?.fields||{})[j1]?.stringValue===I1}function ff(i){const e=i.mapValue.fields[k1];return Jm(e)?ff(e):e}function wc(i){const e=Ls(i.mapValue.fields[O1].timestampValue);return new Mt(e.seconds,e.nanos)}class YC{constructor(e,n,s,o,c,f,m,g,y,_,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=_,this.apiKey=E}}const Hd="(default)";class Sc{constructor(e,n){this.projectId=e,this.database=n||Hd}static empty(){return new Sc("","")}get isDefaultDatabase(){return this.database===Hd}isEqual(e){return e instanceof Sc&&e.projectId===this.projectId&&e.database===this.database}}function QC(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ee(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sc(i.options.projectId,e)}const D1="__type__",XC="__max__",gd={mapValue:{}},M1="__vector__",qd="value";function Bs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Jm(i)?4:WC(i)?9007199254740991:JC(i)?10:11:Ue(28295,{value:i})}function fi(i,e){if(i===e)return!0;const n=Bs(i);if(n!==Bs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return wc(i).isEqual(wc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const f=Ls(o.timestampValue),m=Ls(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return Us(o.bytesValue).isEqual(Us(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return Xt(o.geoPointValue.latitude)===Xt(c.geoPointValue.latitude)&&Xt(o.geoPointValue.longitude)===Xt(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Xt(o.integerValue)===Xt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const f=Xt(o.doubleValue),m=Xt(c.doubleValue);return f===m?Bd(f)===Bd(m):isNaN(f)&&isNaN(m)}return!1})(i,e);case 9:return qo(i.arrayValue.values||[],e.arrayValue.values||[],fi);case 10:case 11:return(function(o,c){const f=o.mapValue.fields||{},m=c.mapValue.fields||{};if(sv(f)!==sv(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!fi(f[g],m[g])))return!1;return!0})(i,e);default:return Ue(52216,{left:i})}}function Tc(i,e){return(i.values||[]).find((n=>fi(n,e)))!==void 0}function Fo(i,e){if(i===e)return 0;const n=Bs(i),s=Bs(e);if(n!==s)return lt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return lt(i.booleanValue,e.booleanValue);case 2:return(function(c,f){const m=Xt(c.integerValue||c.doubleValue),g=Xt(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return ov(i.timestampValue,e.timestampValue);case 4:return ov(wc(i),wc(e));case 5:return om(i.stringValue,e.stringValue);case 6:return(function(c,f){const m=Us(c),g=Us(f);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(c,f){const m=c.split("/"),g=f.split("/");for(let y=0;y<m.length&&y<g.length;y++){const _=lt(m[y],g[y]);if(_!==0)return _}return lt(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,f){const m=lt(Xt(c.latitude),Xt(f.latitude));return m!==0?m:lt(Xt(c.longitude),Xt(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return lv(i.arrayValue,e.arrayValue);case 10:return(function(c,f){const m=c.fields||{},g=f.fields||{},y=m[qd]?.arrayValue,_=g[qd]?.arrayValue,E=lt(y?.values?.length||0,_?.values?.length||0);return E!==0?E:lv(y,_)})(i.mapValue,e.mapValue);case 11:return(function(c,f){if(c===gd.mapValue&&f===gd.mapValue)return 0;if(c===gd.mapValue)return 1;if(f===gd.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),y=f.fields||{},_=Object.keys(y);g.sort(),_.sort();for(let E=0;E<g.length&&E<_.length;++E){const T=om(g[E],_[E]);if(T!==0)return T;const V=Fo(m[g[E]],y[_[E]]);if(V!==0)return V}return lt(g.length,_.length)})(i.mapValue,e.mapValue);default:throw Ue(23264,{he:n})}}function ov(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return lt(i,e);const n=Ls(i),s=Ls(e),o=lt(n.seconds,s.seconds);return o!==0?o:lt(n.nanos,s.nanos)}function lv(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const c=Fo(n[o],s[o]);if(c)return c}return lt(n.length,s.length)}function Go(i){return lm(i)}function lm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=Ls(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Us(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return De.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const c of n.values||[])o?o=!1:s+=",",s+=lm(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const f of s)c?c=!1:o+=",",o+=`${f}:${lm(n.fields[f])}`;return o+"}"})(i.mapValue):Ue(61005,{value:i})}function Nd(i){switch(Bs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ff(i);return e?16+Nd(e):16;case 5:return 2*i.stringValue.length;case 6:return Us(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+Nd(c)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return $s(s.fields,((c,f)=>{o+=c.length+Nd(f)})),o})(i.mapValue);default:throw Ue(13486,{value:i})}}function cv(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function cm(i){return!!i&&"integerValue"in i}function Wm(i){return!!i&&"arrayValue"in i}function uv(i){return!!i&&"nullValue"in i}function dv(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Rd(i){return!!i&&"mapValue"in i}function JC(i){return(i?.mapValue?.fields||{})[D1]?.stringValue===M1}function gc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return $s(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=gc(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gc(i.arrayValue.values[n]);return e}return{...i}}function WC(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===XC}class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Rd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gc(n)}setAll(e){let n=An.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=gc(f):o.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,o)}delete(e){const n=this.field(e.popLast());Rd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Rd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){$s(n,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new Hn(gc(this.value))}}function P1(i){const e=[];return $s(i.fields,((n,s)=>{const o=new An([n]);if(Rd(s)){const c=P1(s.mapValue).fields;if(c.length===0)e.push(o);else for(const f of c)e.push(o.child(f))}else e.push(o)})),new ta(e)}class Rn{constructor(e,n,s,o,c,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Rn(e,0,Ge.min(),Ge.min(),Ge.min(),Hn.empty(),0)}static newFoundDocument(e,n,s,o){return new Rn(e,1,n,Ge.min(),s,o,0)}static newNoDocument(e,n){return new Rn(e,2,n,Ge.min(),Ge.min(),Hn.empty(),0)}static newUnknownDocument(e,n){return new Rn(e,3,n,Ge.min(),Ge.min(),Hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fd{constructor(e,n){this.position=e,this.inclusive=n}}function fv(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const c=e[o],f=i.position[o];if(c.field.isKeyField()?s=De.comparator(De.fromName(f.referenceValue),n.key):s=Fo(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function hv(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!fi(i.position[n],e.position[n]))return!1;return!0}class Nc{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZC(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class V1{}class cn extends V1{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new tI(e,n,s):n==="array-contains"?new iI(e,s):n==="in"?new sI(e,s):n==="not-in"?new rI(e,s):n==="array-contains-any"?new oI(e,s):new cn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new nI(e,s):new aI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fo(n,this.value)):n!==null&&Bs(this.value)===Bs(n)&&this.matchesComparison(Fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ma extends V1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ma(e,n)}matches(e){return z1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function z1(i){return i.op==="and"}function L1(i){return eI(i)&&z1(i)}function eI(i){for(const e of i.filters)if(e instanceof Ma)return!1;return!0}function um(i){if(i instanceof cn)return i.field.canonicalString()+i.op.toString()+Go(i.value);if(L1(i))return i.filters.map((e=>um(e))).join(",");{const e=i.filters.map((n=>um(n))).join(",");return`${i.op}(${e})`}}function U1(i,e){return i instanceof cn?(function(s,o){return o instanceof cn&&s.op===o.op&&s.field.isEqual(o.field)&&fi(s.value,o.value)})(i,e):i instanceof Ma?(function(s,o){return o instanceof Ma&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,f,m)=>c&&U1(f,o.filters[m])),!0):!1})(i,e):void Ue(19439)}function B1(i){return i instanceof cn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Go(n.value)}`})(i):i instanceof Ma?(function(n){return n.op.toString()+" {"+n.getFilters().map(B1).join(" ,")+"}"})(i):"Filter"}class tI extends cn{constructor(e,n,s){super(e,n,s),this.key=De.fromName(s.referenceValue)}matches(e){const n=De.comparator(e.key,this.key);return this.matchesComparison(n)}}class nI extends cn{constructor(e,n){super(e,"in",n),this.keys=H1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class aI extends cn{constructor(e,n){super(e,"not-in",n),this.keys=H1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function H1(i,e){return(e.arrayValue?.values||[]).map((n=>De.fromName(n.referenceValue)))}class iI extends cn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wm(n)&&Tc(n.arrayValue,this.value)}}class sI extends cn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Tc(this.value.arrayValue,n)}}class rI extends cn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Tc(this.value.arrayValue,n)}}class oI extends cn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Tc(this.value.arrayValue,s)))}}class lI{constructor(e,n=null,s=[],o=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=f,this.endAt=m,this.Te=null}}function pv(i,e=null,n=[],s=[],o=null,c=null,f=null){return new lI(i,e,n,s,o,c,f)}function Zm(i){const e=Qe(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>um(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),df(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Go(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Go(s))).join(",")),e.Te=n}return e.Te}function eg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!ZC(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!U1(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!hv(i.startAt,e.startAt)&&hv(i.endAt,e.endAt)}function dm(i){return De.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class nl{constructor(e,n=null,s=[],o=[],c=null,f="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function cI(i,e,n,s,o,c,f,m){return new nl(i,e,n,s,o,c,f,m)}function hf(i){return new nl(i)}function mv(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function uI(i){return De.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function q1(i){return i.collectionGroup!==null}function yc(i){const e=Qe(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new fn(An.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Nc(c,s))})),n.has(An.keyField().canonicalString())||e.Ie.push(new Nc(An.keyField(),s))}return e.Ie}function ci(i){const e=Qe(i);return e.Ee||(e.Ee=dI(e,yc(i))),e.Ee}function dI(i,e){if(i.limitType==="F")return pv(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Nc(o.field,c)}));const n=i.endAt?new Fd(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Fd(i.startAt.position,i.startAt.inclusive):null;return pv(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function fm(i,e){const n=i.filters.concat([e]);return new nl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function fI(i,e){const n=i.explicitOrderBy.concat([e]);return new nl(i.path,i.collectionGroup,n,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function hm(i,e,n){return new nl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function pf(i,e){return eg(ci(i),ci(e))&&i.limitType===e.limitType}function F1(i){return`${Zm(ci(i))}|lt:${i.limitType}`}function Co(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>B1(o))).join(", ")}]`),df(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Go(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Go(o))).join(",")),`Target(${s})`})(ci(i))}; limitType=${i.limitType})`}function mf(i,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):De.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,o){for(const c of yc(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,g){const y=fv(f,m,g);return f.inclusive?y<=0:y<0})(s.startAt,yc(s),o)||s.endAt&&!(function(f,m,g){const y=fv(f,m,g);return f.inclusive?y>=0:y>0})(s.endAt,yc(s),o))})(i,e)}function hI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function G1(i){return(e,n)=>{let s=!1;for(const o of yc(i)){const c=pI(o,e,n);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function pI(i,e,n){const s=i.field.isKeyField()?De.comparator(e.key,n.key):(function(c,f,m){const g=f.data.field(c),y=m.data.field(c);return g!==null&&y!==null?Fo(g,y):Ue(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ue(19790,{direction:i.dir})}}class zr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){$s(this.inner,((n,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return R1(this.inner)}size(){return this.innerSize}}const mI=new Bt(De.comparator);function $i(){return mI}const $1=new Bt(De.comparator);function dc(...i){let e=$1;for(const n of i)e=e.insert(n.key,n);return e}function K1(i){let e=$1;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function wr(){return bc()}function Y1(){return bc()}function bc(){return new zr((i=>i.toString()),((i,e)=>i.isEqual(e)))}const gI=new Bt(De.comparator),yI=new fn(De.comparator);function ct(...i){let e=yI;for(const n of i)e=e.add(n);return e}const bI=new fn(lt);function xI(){return bI}function tg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function Q1(i){return{integerValue:""+i}}function vI(i,e){return FC(e)?Q1(e):tg(i,e)}class gf{constructor(){this._=void 0}}function _I(i,e,n){return i instanceof Rc?(function(o,c){const f={fields:{[j1]:{stringValue:I1},[O1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Jm(c)&&(c=ff(c)),c&&(f.fields[k1]=c),{mapValue:f}})(n,e):i instanceof $o?J1(i,e):i instanceof Ko?W1(i,e):(function(o,c){const f=X1(o,c),m=gv(f)+gv(o.Ae);return cm(f)&&cm(o.Ae)?Q1(m):tg(o.serializer,m)})(i,e)}function EI(i,e,n){return i instanceof $o?J1(i,e):i instanceof Ko?W1(i,e):n}function X1(i,e){return i instanceof Gd?(function(s){return cm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Rc extends gf{}class $o extends gf{constructor(e){super(),this.elements=e}}function J1(i,e){const n=Z1(e);for(const s of i.elements)n.some((o=>fi(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Ko extends gf{constructor(e){super(),this.elements=e}}function W1(i,e){let n=Z1(e);for(const s of i.elements)n=n.filter((o=>!fi(o,s)));return{arrayValue:{values:n}}}class Gd extends gf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function gv(i){return Xt(i.integerValue||i.doubleValue)}function Z1(i){return Wm(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class ng{constructor(e,n){this.field=e,this.transform=n}}function AI(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof $o&&o instanceof $o||s instanceof Ko&&o instanceof Ko?qo(s.elements,o.elements,fi):s instanceof Gd&&o instanceof Gd?fi(s.Ae,o.Ae):s instanceof Rc&&o instanceof Rc})(i.transform,e.transform)}class wI{constructor(e,n){this.version=e,this.transformResults=n}}class ga{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ga}static exists(e){return new ga(void 0,e)}static updateTime(e){return new ga(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class yf{}function eE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new ag(i.key,ga.none()):new zc(i.key,i.data,ga.none());{const n=i.data,s=Hn.empty();let o=new fn(An.comparator);for(let c of e.fields)if(!o.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),o=o.add(c)}return new Ks(i.key,s,new ta(o.toArray()),ga.none())}}function SI(i,e,n){i instanceof zc?(function(o,c,f){const m=o.value.clone(),g=bv(o.fieldTransforms,c,f.transformResults);m.setAll(g),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(i,e,n):i instanceof Ks?(function(o,c,f){if(!Cd(o.precondition,c))return void c.convertToUnknownDocument(f.version);const m=bv(o.fieldTransforms,c,f.transformResults),g=c.data;g.setAll(tE(o)),g.setAll(m),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(i,e,n):(function(o,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function xc(i,e,n,s){return i instanceof zc?(function(c,f,m,g){if(!Cd(c.precondition,f))return m;const y=c.value.clone(),_=xv(c.fieldTransforms,g,f);return y.setAll(_),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(i,e,n,s):i instanceof Ks?(function(c,f,m,g){if(!Cd(c.precondition,f))return m;const y=xv(c.fieldTransforms,g,f),_=f.data;return _.setAll(tE(c)),_.setAll(y),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(i,e,n,s):(function(c,f,m){return Cd(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(i,e,n)}function TI(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),c=X1(s.transform,o||null);c!=null&&(n===null&&(n=Hn.empty()),n.set(s.field,c))}return n||null}function yv(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&qo(s,o,((c,f)=>AI(c,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class zc extends yf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ks extends yf{constructor(e,n,s,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function tE(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function bv(i,e,n){const s=new Map;Et(i.length===n.length,32656,{Ve:n.length,de:i.length});for(let o=0;o<n.length;o++){const c=i[o],f=c.transform,m=e.data.field(c.field);s.set(c.field,EI(f,m,n[o]))}return s}function xv(i,e,n){const s=new Map;for(const o of i){const c=o.transform,f=n.data.field(o.field);s.set(o.field,_I(c,f,e))}return s}class ag extends yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NI extends yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class RI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&SI(c,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=xc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=xc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Y1();return this.mutations.forEach((o=>{const c=e.get(o.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=n.has(o.key)?null:m;const g=eE(f,m);g!==null&&s.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(Ge.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ct())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,((n,s)=>yv(n,s)))&&qo(this.baseMutations,e.baseMutations,((n,s)=>yv(n,s)))}}class ig{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Et(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return gI})();const c=e.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,s[f].version);return new ig(e,n,s,o)}}class CI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class II{constructor(e,n){this.count=e,this.unchangedNames=n}}var ln,pt;function jI(i){switch(i){case oe.OK:return Ue(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ue(15467,{code:i})}}function nE(i){if(i===void 0)return Gi("GRPC error has no .code"),oe.UNKNOWN;switch(i){case ln.OK:return oe.OK;case ln.CANCELLED:return oe.CANCELLED;case ln.UNKNOWN:return oe.UNKNOWN;case ln.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case ln.INTERNAL:return oe.INTERNAL;case ln.UNAVAILABLE:return oe.UNAVAILABLE;case ln.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case ln.NOT_FOUND:return oe.NOT_FOUND;case ln.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case ln.ABORTED:return oe.ABORTED;case ln.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case ln.DATA_LOSS:return oe.DATA_LOSS;default:return Ue(39323,{code:i})}}(pt=ln||(ln={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";function kI(){return new TextEncoder}const OI=new Ms([4294967295,4294967295],0);function vv(i){const e=kI().encode(i),n=new y1;return n.update(e),new Uint8Array(n.digest())}function _v(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ms([n,s],0),new Ms([o,c],0)]}class sg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new fc(`Invalid padding: ${n}`);if(s<0)throw new fc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new fc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new fc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ms.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Ms.fromNumber(s)));return o.compare(OI)===1&&(o=new Ms([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=vv(e),[s,o]=_v(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,o,c);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new sg(c,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=vv(e),[s,o]=_v(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,o,c);this.be(f)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bf{constructor(e,n,s,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Lc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new bf(Ge.min(),o,new Bt(lt),$i(),ct())}}class Lc{constructor(e,n,s,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Lc(s,n,ct(),ct(),ct())}}class Id{constructor(e,n,s,o){this.Se=e,this.removedTargetIds=n,this.key=s,this.De=o}}class aE{constructor(e,n){this.targetId=e,this.Ce=n}}class iE{constructor(e,n,s=wn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Ev{constructor(){this.ve=0,this.Fe=Av(),this.Me=wn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ct(),n=ct(),s=ct();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ue(38017,{changeType:c})}})),new Lc(this.Me,this.xe,e,n,s)}Ke(){this.Oe=!1,this.Fe=Av()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Et(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class DI{constructor(e){this.Ge=e,this.ze=new Map,this.je=$i(),this.He=yd(),this.Je=yd(),this.Ze=new Bt(lt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ue(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(dm(c))if(s===0){const f=new De(c.path);this.et(n,f,Rn.newNoDocument(f,Ge.min()))}else Et(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),g=m?this.ct(m,e,f):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=n;let f,m;try{f=Us(s).toUint8Array()}catch(g){if(g instanceof C1)return Ho("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new sg(f,o,c)}catch(g){return Ho(g instanceof fc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((c=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,f)=>{const m=this.ot(f);if(m){if(c.current&&dm(m.target)){const g=new De(m.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,Rn.newNoDocument(g,e))}c.Be&&(n.set(f,c.ke()),c.Ke())}}));let s=ct();this.Je.forEach(((c,f)=>{let m=!0;f.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const o=new bf(e,n,this.Ze,this.je,s);return this.je=$i(),this.He=yd(),this.Je=yd(),this.Ze=new Bt(lt),o}Ye(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,s),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Ev,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new fn(lt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new fn(lt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ev),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function yd(){return new Bt(De.comparator)}function Av(){return new Bt(De.comparator)}const MI={asc:"ASCENDING",desc:"DESCENDING"},PI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VI={and:"AND",or:"OR"};class zI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pm(i,e){return i.useProto3Json||df(e)?e:{value:e}}function $d(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function LI(i,e){return $d(i,e.toTimestamp())}function ui(i){return Et(!!i,49232),Ge.fromTimestamp((function(n){const s=Ls(n);return new Mt(s.seconds,s.nanos)})(i))}function rg(i,e){return mm(i,e).canonicalString()}function mm(i,e){const n=(function(o){return new kt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function rE(i){const e=kt.fromString(i);return Et(dE(e),10190,{key:e.toString()}),e}function gm(i,e){return rg(i.databaseId,e.path)}function qp(i,e){const n=rE(e);if(n.get(1)!==i.databaseId.projectId)throw new Ee(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ee(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new De(lE(n))}function oE(i,e){return rg(i.databaseId,e)}function UI(i){const e=rE(i);return e.length===4?kt.emptyPath():lE(e)}function ym(i){return new kt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function lE(i){return Et(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function wv(i,e,n){return{name:gm(i,e),fields:n.value.mapValue.fields}}function BI(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ue(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,_){return y.useProto3Json?(Et(_===void 0||typeof _=="string",58123),wn.fromBase64String(_||"")):(Et(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),wn.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(y){const _=y.code===void 0?oe.UNKNOWN:nE(y.code);return new Ee(_,y.message||"")})(f);n=new iE(s,o,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=qp(i,s.document.name),c=ui(s.document.updateTime),f=s.document.createTime?ui(s.document.createTime):Ge.min(),m=new Hn({mapValue:{fields:s.document.fields}}),g=Rn.newFoundDocument(o,c,f,m),y=s.targetIds||[],_=s.removedTargetIds||[];n=new Id(y,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=qp(i,s.document),c=s.readTime?ui(s.readTime):Ge.min(),f=Rn.newNoDocument(o,c),m=s.removedTargetIds||[];n=new Id([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=qp(i,s.document),c=s.removedTargetIds||[];n=new Id([],c,o,null)}else{if(!("filter"in e))return Ue(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,f=new II(o,c),m=s.targetId;n=new aE(m,f)}}return n}function HI(i,e){let n;if(e instanceof zc)n={update:wv(i,e.key,e.value)};else if(e instanceof ag)n={delete:gm(i,e.key)};else if(e instanceof Ks)n={update:wv(i,e.key,e.data),updateMask:JI(e.fieldMask)};else{if(!(e instanceof NI))return Ue(16599,{dt:e.type});n={verify:gm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,f){const m=f.transform;if(m instanceof Rc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof $o)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ko)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Gd)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Ue(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:LI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ue(27497)})(i,e.precondition)),n}function qI(i,e){return i&&i.length>0?(Et(e!==void 0,14353),i.map((n=>(function(o,c){let f=o.updateTime?ui(o.updateTime):ui(c);return f.isEqual(Ge.min())&&(f=ui(c)),new wI(f,o.transformResults||[])})(n,e)))):[]}function FI(i,e){return{documents:[oE(i,e.path)]}}function GI(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=oE(i,o);const c=(function(y){if(y.length!==0)return uE(Ma.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(y){if(y.length!==0)return y.map((_=>(function(T){return{field:Io(T.field),direction:YI(T.dir)}})(_)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=pm(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function $I(i){let e=UI(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Et(s===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let c=[];n.where&&(c=(function(E){const T=cE(E);return T instanceof Ma&&L1(T)?T.getFilters():[T]})(n.where));let f=[];n.orderBy&&(f=(function(E){return E.map((T=>(function(U){return new Nc(jo(U.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(T)))})(n.orderBy));let m=null;n.limit&&(m=(function(E){let T;return T=typeof E=="object"?E.value:E,df(T)?null:T})(n.limit));let g=null;n.startAt&&(g=(function(E){const T=!!E.before,V=E.values||[];return new Fd(V,T)})(n.startAt));let y=null;return n.endAt&&(y=(function(E){const T=!E.before,V=E.values||[];return new Fd(V,T)})(n.endAt)),cI(e,o,f,c,m,"F",g,y)}function KI(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ue(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cE(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=jo(n.unaryFilter.field);return cn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=jo(n.unaryFilter.field);return cn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=jo(n.unaryFilter.field);return cn.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=jo(n.unaryFilter.field);return cn.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ue(61313);default:return Ue(60726)}})(i):i.fieldFilter!==void 0?(function(n){return cn.create(jo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ue(58110);default:return Ue(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Ma.create(n.compositeFilter.filters.map((s=>cE(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ue(1026)}})(n.compositeFilter.op))})(i):Ue(30097,{filter:i})}function YI(i){return MI[i]}function QI(i){return PI[i]}function XI(i){return VI[i]}function Io(i){return{fieldPath:i.canonicalString()}}function jo(i){return An.fromServerFormat(i.fieldPath)}function uE(i){return i instanceof cn?(function(n){if(n.op==="=="){if(dv(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NAN"}};if(uv(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dv(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NOT_NAN"}};if(uv(n.value))return{unaryFilter:{field:Io(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(n.field),op:QI(n.op),value:n.value}}})(i):i instanceof Ma?(function(n){const s=n.getFilters().map((o=>uE(o)));return s.length===1?s[0]:{compositeFilter:{op:XI(n.op),filters:s}}})(i):Ue(54877,{filter:i})}function JI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function dE(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function fE(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class ks{constructor(e,n,s,o,c=Ge.min(),f=Ge.min(),m=wn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class WI{constructor(e){this.yt=e}}function ZI(i){const e=$I({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?hm(e,e.limit,"L"):e}class ej{constructor(){this.Sn=new tj}addToCollectionParentIndex(e,n){return this.Sn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(zs.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(zs.min())}updateCollectionGroup(e,n,s){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class tj{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new fn(kt.comparator),c=!o.has(s);return this.index[n]=o.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new fn(kt.comparator)).toArray()}}const Sv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hE=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(hE,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);class Yo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Yo(0)}static ar(){return new Yo(-1)}}const Tv="LruGarbageCollector",nj=1048576;function Nv([i,e],[n,s]){const o=lt(i,n);return o===0?lt(e,s):o}class aj{constructor(e){this.Pr=e,this.buffer=new fn(Nv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Nv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ij{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){we(Tv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){tl(n)?we(Tv,"Ignoring IndexedDB error during garbage collection: ",n):await el(n)}await this.Ar(3e5)}))}}class sj{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(uf.ce);const s=new aj(n);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Sv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Sv):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let s,o,c,f,m,g,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,f=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,m=Date.now(),this.removeTargets(e,s,n)))).next((E=>(c=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(y=Date.now(),Ro()<=ot.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-_}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:E}))))}}function rj(i,e){return new sj(i,e)}class oj{constructor(){this.changes=new zr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ue.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class cj{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&xc(s.mutation,o,ta.empty(),Mt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,ct()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=ct()){const o=wr();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((c=>{let f=dc();return c.forEach(((m,g)=>{f=f.insert(m,g.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=wr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,ct())))}populateOverlays(e,n,s){const o=[];return s.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let c=$i();const f=bc(),m=(function(){return bc()})();return n.forEach(((g,y)=>{const _=s.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Ks)?c=c.insert(y.key,y):_!==void 0?(f.set(y.key,_.mutation.getFieldMask()),xc(_.mutation,y,_.mutation.getFieldMask(),Mt.now())):f.set(y.key,ta.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,_)=>f.set(y,_))),n.forEach(((y,_)=>m.set(y,new lj(_,f.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=bc();let o=new Bt(((f,m)=>f-m)),c=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let _=s.get(g)||ta.empty();_=m.applyToLocalView(y,_),s.set(g,_);const E=(o.get(m.batchId)||ct()).add(g);o=o.insert(m.batchId,E)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,_=g.value,E=Y1();_.forEach((T=>{if(!c.has(T)){const V=eE(n.get(T),s.get(T));V!==null&&E.set(T,V),c=c.add(T)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,E))}return ue.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return uI(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):q1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((c=>{const f=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-c.size):ue.resolve(wr());let m=Ac,g=c;return f.next((y=>ue.forEach(y,((_,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),c.get(_)?ue.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{g=g.insert(_,T)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,ct()))).next((_=>({batchId:m,changes:K1(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new De(n)).next((s=>{let o=dc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const c=n.collectionGroup;let f=dc();return this.indexManager.getCollectionParents(e,c).next((m=>ue.forEach(m,(g=>{const y=(function(E,T){return new nl(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((_=>{_.forEach(((E,T)=>{f=f.insert(E,T)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,o)))).next((f=>{c.forEach(((g,y)=>{const _=y.getKey();f.get(_)===null&&(f=f.insert(_,Rn.newInvalidDocument(_)))}));let m=dc();return f.forEach(((g,y)=>{const _=c.get(g);_!==void 0&&xc(_.mutation,y,ta.empty(),Mt.now()),mf(n,y)&&(m=m.insert(g,y))})),m}))}}class uj{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return ue.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ui(o.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:ZI(o.bundledQuery),readTime:ui(o.readTime)}})(n)),ue.resolve()}}class dj{constructor(){this.overlays=new Bt(De.comparator),this.Lr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const s=wr();return ue.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,c)=>{this.bt(e,n,c)})),ue.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(s)),ue.resolve()}getOverlaysForCollection(e,n,s){const o=wr(),c=n.length+1,f=new De(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>s&&o.set(g.getKey(),g)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let c=new Bt(((y,_)=>y-_));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let _=c.get(y.largestBatchId);_===null&&(_=wr(),c=c.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const m=wr(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,_)=>m.set(y,_))),!(m.size()>=o)););return ue.resolve(m)}bt(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new CI(n,s));let c=this.Lr.get(n);c===void 0&&(c=ct(),this.Lr.set(n,c)),this.Lr.set(n,c.add(s.key))}}class fj{constructor(){this.sessionToken=wn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}class og{constructor(){this.kr=new fn(gn.Kr),this.qr=new fn(gn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const s=new gn(e,n);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Wr(new gn(e,n))}Qr(e,n){e.forEach((s=>this.removeReference(s,n)))}Gr(e){const n=new De(new kt([])),s=new gn(n,e),o=new gn(n,e+1),c=[];return this.qr.forEachInRange([s,o],(f=>{this.Wr(f),c.push(f.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new De(new kt([])),s=new gn(n,e),o=new gn(n,e+1);let c=ct();return this.qr.forEachInRange([s,o],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new gn(e,0),s=this.kr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class gn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return De.comparator(e.key,n.key)||lt(e.Hr,n.Hr)}static Ur(e,n){return lt(e.Hr,n.Hr)||De.comparator(e.key,n.key)}}class hj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new fn(gn.Kr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new RI(c,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Jr=this.Jr.add(new gn(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ue.resolve(f)}lookupMutationBatch(e,n){return ue.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Xr(s),c=o<0?0:o;return ue.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?Xm:this.Yn-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new gn(n,0),o=new gn(n,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([s,o],(f=>{const m=this.Zr(f.Hr);c.push(m)})),ue.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new fn(lt);return n.forEach((o=>{const c=new gn(o,0),f=new gn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,f],(m=>{s=s.add(m.Hr)}))})),ue.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let c=s;De.isDocumentKey(c)||(c=c.child(""));const f=new gn(new De(c),0);let m=new fn(lt);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Hr)),!0)}),f),ue.resolve(this.Yr(m))}Yr(e){const n=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Et(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return ue.forEach(n.mutations,(o=>{const c=new gn(o.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,n){const s=new gn(n,0),o=this.Jr.firstAfterOrEqual(s);return ue.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class pj{constructor(e){this.ti=e,this.docs=(function(){return new Bt(De.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),c=o?o.size:0,f=this.ti(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ue.resolve(s?s.document.mutableCopy():Rn.newInvalidDocument(n))}getEntries(e,n){let s=$i();return n.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():Rn.newInvalidDocument(o))})),ue.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let c=$i();const f=n.path,m=new De(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:_}}=g.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||UC(LC(_),s)<=0||(o.has(_.key)||mf(n,_))&&(c=c.insert(_.key,_.mutableCopy()))}return ue.resolve(c)}getAllFromCollectionGroup(e,n,s,o){Ue(9500)}ni(e,n){return ue.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new mj(this)}getSize(e){return ue.resolve(this.size)}}class mj extends oj{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),ue.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class gj{constructor(e){this.persistence=e,this.ri=new zr((n=>Zm(n)),eg),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.ii=0,this.si=new og,this.targetCount=0,this.oi=Yo._r()}forEachTarget(e,n){return this.ri.forEach(((s,o)=>n(o))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ii&&(this.ii=n),ue.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Yo(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.lr(n),ue.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,s){let o=0;const c=[];return this.ri.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.ri.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ue.waitFor(c).next((()=>o))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const s=this.ri.get(n)||null;return ue.resolve(s)}addMatchingKeys(e,n,s){return this.si.$r(n,s),ue.resolve()}removeMatchingKeys(e,n,s){this.si.Qr(n,s);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((f=>{c.push(o.markPotentiallyOrphaned(e,f))})),ue.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const s=this.si.jr(n);return ue.resolve(s)}containsKey(e,n){return ue.resolve(this.si.containsKey(n))}}class pE{constructor(e,n){this._i={},this.overlays={},this.ai=new uf(0),this.ui=!1,this.ui=!0,this.ci=new fj,this.referenceDelegate=e(this),this.li=new gj(this),this.indexManager=new ej,this.remoteDocumentCache=(function(o){return new pj(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new WI(n),this.Pi=new uj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this._i[e.toKey()];return s||(s=new hj(n,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,s){we("MemoryPersistence","Starting transaction:",e);const o=new yj(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((c=>this.referenceDelegate.Ii(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ei(e,n){return ue.or(Object.values(this._i).map((s=>()=>s.containsKey(e,n))))}}class yj extends HC{constructor(e){super(),this.currentSequenceNumber=e}}class lg{constructor(e){this.persistence=e,this.Ri=new og,this.Ai=null}static Vi(e){return new lg(e)}get di(){if(this.Ai)return this.Ai;throw Ue(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.di.delete(s.toString()),ue.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.di.add(s.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.di.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.di,(s=>{const o=De.fromPath(s);return this.mi(e,o).next((c=>{c||n.removeEntry(o,Ge.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return ue.or([()=>ue.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Kd{constructor(e,n){this.persistence=e,this.fi=new zr((s=>GC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=rj(this,n)}static Vi(e,n){return new Kd(e,n)}Ti(){}Ii(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}pr(e){let n=0;return this.mr(e,(s=>{n++})).next((()=>n))}mr(e,n){return ue.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((c=>c?ue.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ni(e,(f=>this.wr(e,f,n).next((m=>{m||(s++,c.removeEntry(f,Ge.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),ue.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Nd(e.data.value)),n}wr(e,n,s){return ue.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return ue.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class cg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Ts=s,this.Is=o}static Es(e,n){let s=ct(),o=ct();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new cg(e,n.fromCache,s,o)}}class bj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xj{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return $T()?8:qC(Cn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const c={result:null};return this.gs(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ps(e,n,o,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new bj;return this.ys(e,n,f).next((m=>{if(c.result=m,this.As)return this.ws(e,n,f,m.size)}))})).next((()=>c.result))}ws(e,n,s,o){return s.documentReadCount<this.Vs?(Ro()<=ot.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",Co(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ue.resolve()):(Ro()<=ot.DEBUG&&we("QueryEngine","Query:",Co(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(Ro()<=ot.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",Co(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ci(n))):ue.resolve())}gs(e,n){if(mv(n))return ue.resolve(null);let s=ci(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=hm(n,null,"F"),s=ci(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const f=ct(...c);return this.fs.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.bs(n,m);return this.Ss(n,y,f,g.readTime)?this.gs(e,hm(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,s,o){return mv(n)||o.isEqual(Ge.min())?ue.resolve(null):this.fs.getDocuments(e,s).next((c=>{const f=this.bs(n,c);return this.Ss(n,f,s,o)?ue.resolve(null):(Ro()<=ot.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Co(n)),this.Ds(e,f,n,zC(o,Ac)).next((m=>m)))}))}bs(e,n){let s=new fn(G1(e));return n.forEach(((o,c)=>{mf(e,c)&&(s=s.add(c))})),s}Ss(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}ys(e,n,s){return Ro()<=ot.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Co(n)),this.fs.getDocumentsMatchingQuery(e,n,zs.min(),s)}Ds(e,n,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}const ug="LocalStore",vj=3e8;class _j{constructor(e,n,s,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new Bt(lt),this.Fs=new zr((c=>Zm(c)),eg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cj(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function Ej(i,e,n,s){return new _j(i,e,n,s)}async function mE(i,e){const n=Qe(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,n.Os(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],m=[];let g=ct();for(const y of o){f.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}for(const y of c){m.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}return n.localDocuments.getDocuments(s,g).next((y=>({Ns:y,removedBatchIds:f,addedBatchIds:m})))}))}))}function Aj(i,e){const n=Qe(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=n.xs.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,_){const E=y.batch,T=E.keys();let V=ue.resolve();return T.forEach((U=>{V=V.next((()=>_.getEntry(g,U))).next((L=>{const O=y.docVersions.get(U);Et(O!==null,48541),L.version.compareTo(O)<0&&(E.applyToRemoteDocument(L,y),L.isValidDocument()&&(L.setReadTime(y.commitVersion),_.addEntry(L)))}))})),V.next((()=>m.mutationQueue.removeMutationBatch(g,E)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=ct();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function gE(i){const e=Qe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function wj(i,e){const n=Qe(i),s=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const m=[];e.targetChanges.forEach(((_,E)=>{const T=o.get(E);if(!T)return;m.push(n.li.removeMatchingKeys(c,_.removedDocuments,E).next((()=>n.li.addMatchingKeys(c,_.addedDocuments,E))));let V=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?V=V.withResumeToken(wn.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):_.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(_.resumeToken,s)),o=o.insert(E,V),(function(L,O,X){return L.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=vj?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(T,V,_)&&m.push(n.li.updateTargetData(c,V))}));let g=$i(),y=ct();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,_))})),m.push(Sj(c,f,e.documentUpdates).next((_=>{g=_.Bs,y=_.Ls}))),!s.isEqual(Ge.min())){const _=n.li.getLastRemoteSnapshotVersion(c).next((E=>n.li.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(_)}return ue.waitFor(m).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.vs=o,c)))}function Sj(i,e,n){let s=ct(),o=ct();return n.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let f=$i();return n.forEach(((m,g)=>{const y=c.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ge.min())?(e.removeEntry(m,g.readTime),f=f.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),f=f.insert(m,g)):we(ug,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{Bs:f,Ls:o}}))}function Tj(i,e){const n=Qe(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Xm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Nj(i,e){const n=Qe(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.li.getTargetData(s,e).next((c=>c?(o=c,ue.resolve(o)):n.li.allocateTargetId(s).next((f=>(o=new ks(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(s.targetId,s),n.Fs.set(e,s.targetId)),s}))}async function bm(i,e,n){const s=Qe(i),o=s.vs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!tl(f))throw f;we(ug,`Failed to update sequence numbers for target ${e}: ${f}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function Rv(i,e,n){const s=Qe(i);let o=Ge.min(),c=ct();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,y,_){const E=Qe(g),T=E.Fs.get(_);return T!==void 0?ue.resolve(E.vs.get(T)):E.li.getTargetData(y,_)})(s,f,ci(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(f,m.targetId).next((g=>{c=g}))})).next((()=>s.Cs.getDocumentsMatchingQuery(f,e,n?o:Ge.min(),n?c:ct()))).next((m=>(Rj(s,hI(e),m),{documents:m,ks:c})))))}function Rj(i,e,n){let s=i.Ms.get(e)||Ge.min();n.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.Ms.set(e,s)}class Cv{constructor(){this.activeTargetIds=xI()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cj{constructor(){this.vo=new Cv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,s){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Cv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ij{Mo(e){}shutdown(){}}const Iv="ConnectivityMonitor";class jv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){we(Iv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){we(Iv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let bd=null;function xm(){return bd===null?bd=(function(){return 268435456+Math.round(2147483648*Math.random())})():bd++,"0x"+bd.toString(16)}const Fp="RestConnection",jj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class kj{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===Hd?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,n,s,o,c){const f=xm(),m=this.Qo(e,n.toUriEncodedString());we(Fp,`Sending RPC '${e}' ${f}:`,m,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,c);const{host:y}=new URL(m),_=Mr(y);return this.zo(e,m,g,s,_).then((E=>(we(Fp,`Received RPC '${e}' ${f}: `,E),E)),(E=>{throw Ho(Fp,`RPC '${e}' ${f} failed with error: `,E,"url: ",m,"request:",s),E}))}jo(e,n,s,o,c,f){return this.Wo(e,n,s,o,c)}Go(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}Qo(e,n){const s=jj[e];let o=`${this.qo}/v1/${n}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class Oj{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Tn="WebChannelConnection",oc=(i,e,n)=>{i.listen(e,(s=>{try{n(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Po extends kj{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Po.c_){const e=_1();oc(e,v1.STAT_EVENT,(n=>{n.stat===rm.PROXY?we(Tn,"STAT_EVENT: detected buffering proxy"):n.stat===rm.NOPROXY&&we(Tn,"STAT_EVENT: detected no buffering proxy")})),Po.c_=!0}}zo(e,n,s,o,c){const f=xm();return new Promise(((m,g)=>{const y=new b1;y.setWithCredentials(!0),y.listenOnce(x1.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Td.NO_ERROR:const E=y.getResponseJson();we(Tn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(E)),m(E);break;case Td.TIMEOUT:we(Tn,`RPC '${e}' ${f} timed out`),g(new Ee(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Td.HTTP_ERROR:const T=y.getStatus();if(we(Tn,`RPC '${e}' ${f} failed with status:`,T,"response text:",y.getResponseText()),T>0){let V=y.getResponseJson();Array.isArray(V)&&(V=V[0]);const U=V?.error;if(U&&U.status&&U.message){const L=(function(X){const Q=X.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(Q)>=0?Q:oe.UNKNOWN})(U.status);g(new Ee(L,U.message))}else g(new Ee(oe.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new Ee(oe.UNAVAILABLE,"Connection failed."));break;default:Ue(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{we(Tn,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(o);we(Tn,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",_,s,15)}))}T_(e,n,s){const o=xm(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,n,s),m.encodeInitMessageHeaders=!0;const y=c.join("");we(Tn,`Creating RPC '${e}' stream ${o}: ${y}`,m);const _=f.createWebChannel(y,m);this.I_(_);let E=!1,T=!1;const V=new Oj({Ho:U=>{T?we(Tn,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(E||(we(Tn,`Opening RPC '${e}' stream ${o} transport.`),_.open(),E=!0),we(Tn,`RPC '${e}' stream ${o} sending:`,U),_.send(U))},Jo:()=>_.close()});return oc(_,uc.EventType.OPEN,(()=>{T||(we(Tn,`RPC '${e}' stream ${o} transport opened.`),V.i_())})),oc(_,uc.EventType.CLOSE,(()=>{T||(T=!0,we(Tn,`RPC '${e}' stream ${o} transport closed`),V.o_(),this.E_(_))})),oc(_,uc.EventType.ERROR,(U=>{T||(T=!0,Ho(Tn,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),V.o_(new Ee(oe.UNAVAILABLE,"The operation could not be completed")))})),oc(_,uc.EventType.MESSAGE,(U=>{if(!T){const L=U.data[0];Et(!!L,16349);const O=L,X=O?.error||O[0]?.error;if(X){we(Tn,`RPC '${e}' stream ${o} received error:`,X);const Q=X.status;let te=(function(fe){const I=ln[fe];if(I!==void 0)return nE(I)})(Q),ie=X.message;te===void 0&&(te=oe.INTERNAL,ie="Unknown error status: "+Q+" with message "+X.message),T=!0,V.o_(new Ee(te,ie)),_.close()}else we(Tn,`RPC '${e}' stream ${o} received:`,L),V.__(L)}})),Po.u_(),setTimeout((()=>{V.s_()}),0),V}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,s){super.Go(e,n,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return E1()}}function Dj(i){return new Po(i)}function Gp(){return typeof document<"u"?document:null}function xf(i){return new zI(i,!0)}Po.c_=!1;class yE{constructor(e,n,s=1e3,o=1.5,c=6e4){this.Ci=e,this.timerId=n,this.R_=s,this.A_=o,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&we("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const kv="PersistentStream";class bE{constructor(e,n,s,o,c,f,m,g){this.Ci=e,this.b_=s,this.S_=o,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(Gi(n.toString()),Gi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new Ee(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(kv,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(we(kv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Mj extends bE{constructor(e,n,s,o,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=BI(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Ge.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Ge.min():f.readTime?ui(f.readTime):Ge.min()})(e);return this.listener.J_(n,s)}Z_(e){const n={};n.database=ym(this.serializer),n.addTarget=(function(c,f){let m;const g=f.target;if(m=dm(g)?{documents:FI(c,g)}:{query:GI(c,g).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=sE(c,f.resumeToken);const y=pm(c,f.expectedCount);y!==null&&(m.expectedCount=y)}else if(f.snapshotVersion.compareTo(Ge.min())>0){m.readTime=$d(c,f.snapshotVersion.toTimestamp());const y=pm(c,f.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const s=KI(this.serializer,e);s&&(n.labels=s),this.K_(n)}X_(e){const n={};n.database=ym(this.serializer),n.removeTarget=e,this.K_(n)}}class Pj extends bE{constructor(e,n,s,o,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=qI(e.writeResults,e.commitTime),s=ui(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=ym(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>HI(this.serializer,s)))};this.K_(n)}}class Vj{}class zj extends Vj{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ee(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Wo(e,mm(n,s),o,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ee(oe.UNKNOWN,c.toString())}))}jo(e,n,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.jo(e,mm(n,s),o,f,m,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ee(oe.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Lj(i,e,n,s){return new zj(i,e,n,s)}class Uj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gi(n),this.aa=!1):we("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const kr="RemoteStore";class Bj{constructor(e,n,s,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((f=>{s.enqueueAndForget((async()=>{Lr(this)&&(we(kr,"Restarting streams for network reachability change."),await(async function(g){const y=Qe(g);y.Ea.add(4),await Uc(y),y.Va.set("Unknown"),y.Ea.delete(4),await vf(y)})(this))}))})),this.Va=new Uj(s,o)}}async function vf(i){if(Lr(i))for(const e of i.Ra)await e(!0)}async function Uc(i){for(const e of i.Ra)await e(!1)}function xE(i,e){const n=Qe(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),pg(n)?hg(n):al(n).O_()&&fg(n,e))}function dg(i,e){const n=Qe(i),s=al(n);n.Ia.delete(e),s.O_()&&vE(n,e),n.Ia.size===0&&(s.O_()?s.L_():Lr(n)&&n.Va.set("Unknown"))}function fg(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}al(i).Z_(e)}function vE(i,e){i.da.$e(e),al(i).X_(e)}function hg(i){i.da=new DI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),al(i).start(),i.Va.ua()}function pg(i){return Lr(i)&&!al(i).x_()&&i.Ia.size>0}function Lr(i){return Qe(i).Ea.size===0}function _E(i){i.da=void 0}async function Hj(i){i.Va.set("Online")}async function qj(i){i.Ia.forEach(((e,n)=>{fg(i,e)}))}async function Fj(i,e){_E(i),pg(i)?(i.Va.ha(e),hg(i)):i.Va.set("Unknown")}async function Gj(i,e,n){if(i.Va.set("Online"),e instanceof iE&&e.state===2&&e.cause)try{await(async function(o,c){const f=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.da.removeTarget(m))})(i,e)}catch(s){we(kr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Yd(i,s)}else if(e instanceof Id?i.da.Xe(e):e instanceof aE?i.da.st(e):i.da.tt(e),!n.isEqual(Ge.min()))try{const s=await gE(i.localStore);n.compareTo(s)>=0&&await(function(c,f){const m=c.da.Tt(f);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const _=c.Ia.get(y);_&&c.Ia.set(y,_.withResumeToken(g.resumeToken,f))}})),m.targetMismatches.forEach(((g,y)=>{const _=c.Ia.get(g);if(!_)return;c.Ia.set(g,_.withResumeToken(wn.EMPTY_BYTE_STRING,_.snapshotVersion)),vE(c,g);const E=new ks(_.target,g,y,_.sequenceNumber);fg(c,E)})),c.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){we(kr,"Failed to raise snapshot:",s),await Yd(i,s)}}async function Yd(i,e,n){if(!tl(e))throw e;i.Ea.add(1),await Uc(i),i.Va.set("Offline"),n||(n=()=>gE(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{we(kr,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await vf(i)}))}function EE(i,e){return e().catch((n=>Yd(i,n,e)))}async function _f(i){const e=Qe(i),n=Hs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xm;for(;$j(e);)try{const o=await Tj(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,Kj(e,o)}catch(o){await Yd(e,o)}AE(e)&&wE(e)}function $j(i){return Lr(i)&&i.Ta.length<10}function Kj(i,e){i.Ta.push(e);const n=Hs(i);n.O_()&&n.Y_&&n.ea(e.mutations)}function AE(i){return Lr(i)&&!Hs(i).x_()&&i.Ta.length>0}function wE(i){Hs(i).start()}async function Yj(i){Hs(i).ra()}async function Qj(i){const e=Hs(i);for(const n of i.Ta)e.ea(n.mutations)}async function Xj(i,e,n){const s=i.Ta.shift(),o=ig.from(s,e,n);await EE(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await _f(i)}async function Jj(i,e){e&&Hs(i).Y_&&await(async function(s,o){if((function(f){return jI(f)&&f!==oe.ABORTED})(o.code)){const c=s.Ta.shift();Hs(s).B_(),await EE(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await _f(s)}})(i,e),AE(i)&&wE(i)}async function Ov(i,e){const n=Qe(i);n.asyncQueue.verifyOperationInProgress(),we(kr,"RemoteStore received new credentials");const s=Lr(n);n.Ea.add(3),await Uc(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await vf(n)}async function Wj(i,e){const n=Qe(i);e?(n.Ea.delete(2),await vf(n)):e||(n.Ea.add(2),await Uc(n),n.Va.set("Unknown"))}function al(i){return i.ma||(i.ma=(function(n,s,o){const c=Qe(n);return c.sa(),new Mj(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Zo:Hj.bind(null,i),Yo:qj.bind(null,i),t_:Fj.bind(null,i),J_:Gj.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),pg(i)?hg(i):i.Va.set("Unknown")):(await i.ma.stop(),_E(i))}))),i.ma}function Hs(i){return i.fa||(i.fa=(function(n,s,o){const c=Qe(n);return c.sa(),new Pj(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Yj.bind(null,i),t_:Jj.bind(null,i),ta:Qj.bind(null,i),na:Xj.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await _f(i)):(await i.fa.stop(),i.Ta.length>0&&(we(kr,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class mg{constructor(e,n,s,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,c){const f=Date.now()+s,m=new mg(e,n,f,o,c);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gg(i,e){if(Gi("AsyncQueue",`${e}: ${i}`),tl(i))return new Ee(oe.UNAVAILABLE,`${e}: ${i}`);throw i}class Vo{static emptySet(e){return new Vo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||De.comparator(n.key,s.key):(n,s)=>De.comparator(n.key,s.key),this.keyedMap=dc(),this.sortedSet=new Bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Vo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class Dv{constructor(){this.ga=new Bt(De.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ue(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Qo{constructor(e,n,s,o,c,f,m,g,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,c){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new Qo(e,n,Vo.emptySet(n),f,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class Zj{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class ek{constructor(){this.queries=Mv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Qe(n),c=o.queries;o.queries=Mv(),c.forEach(((f,m)=>{for(const g of m.ba)g.onError(s)}))})(this,new Ee(oe.ABORTED,"Firestore shutting down"))}}function Mv(){return new zr((i=>F1(i)),pf)}async function yg(i,e){const n=Qe(i);let s=3;const o=e.query;let c=n.queries.get(o);c?!c.Sa()&&e.Da()&&(s=2):(c=new Zj,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=gg(f,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,c),c.ba.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&xg(n)}async function bg(i,e){const n=Qe(i),s=e.query;let o=3;const c=n.queries.get(s);if(c){const f=c.ba.indexOf(e);f>=0&&(c.ba.splice(f,1),c.ba.length===0?o=e.Da()?0:1:!c.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function tk(i,e){const n=Qe(i);let s=!1;for(const o of e){const c=o.query,f=n.queries.get(c);if(f){for(const m of f.ba)m.Fa(o)&&(s=!0);f.wa=o}}s&&xg(n)}function nk(i,e,n){const s=Qe(i),o=s.queries.get(e);if(o)for(const c of o.ba)c.onError(n);s.queries.delete(e)}function xg(i){i.Ca.forEach((e=>{e.next()}))}var vm,Pv;(Pv=vm||(vm={})).Ma="default",Pv.Cache="cache";class vg{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Qo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vm.Cache}}class SE{constructor(e){this.key=e}}class TE{constructor(e){this.key=e}}class ak{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ct(),this.mutatedKeys=ct(),this.eu=G1(e),this.tu=new Vo(this.eu)}get nu(){return this.Za}ru(e,n){const s=n?n.iu:new Dv,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const T=o.get(_),V=mf(this.query,E)?E:null,U=!!T&&this.mutatedKeys.has(T.key),L=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let O=!1;T&&V?T.data.isEqual(V.data)?U!==L&&(s.track({type:3,doc:V}),O=!0):this.su(T,V)||(s.track({type:2,doc:V}),O=!0,(g&&this.eu(V,g)>0||y&&this.eu(V,y)<0)&&(m=!0)):!T&&V?(s.track({type:0,doc:V}),O=!0):T&&!V&&(s.track({type:1,doc:T}),O=!0,(g||y)&&(m=!0)),O&&(V?(f=f.add(V),c=L?c.add(_):c.delete(_)):(f=f.delete(_),c=c.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),c=c.delete(_.key),s.track({type:1,doc:_})}return{tu:f,iu:s,Ss:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,E)=>(function(V,U){const L=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ue(20277,{Vt:O})}};return L(V)-L(U)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Xa;return this.Xa=g,f.length!==0||y?{snapshot:new Qo(this.query,e.tu,c,f,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Dv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ct(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const n=[];return e.forEach((s=>{this.Ya.has(s)||n.push(new TE(s))})),this.Ya.forEach((s=>{e.has(s)||n.push(new SE(s))})),n}cu(e){this.Za=e.ks,this.Ya=ct();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Qo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const _g="SyncEngine";class ik{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class sk{constructor(e){this.key=e,this.hu=!1}}class rk{constructor(e,n,s,o,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new zr((m=>F1(m)),pf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Bt(De.comparator),this.Au=new Map,this.Vu=new og,this.du={},this.mu=new Map,this.fu=Yo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ok(i,e,n=!0){const s=kE(i);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await NE(s,e,n,!0),o}async function lk(i,e){const n=kE(i);await NE(n,e,!0,!1)}async function NE(i,e,n,s){const o=await Nj(i.localStore,ci(e)),c=o.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await ck(i,e,c,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&xE(i.remoteStore,o),m}async function ck(i,e,n,s,o){i.pu=(E,T,V)=>(async function(L,O,X,Q){let te=O.view.ru(X);te.Ss&&(te=await Rv(L.localStore,O.query,!1).then((({documents:I})=>O.view.ru(I,te))));const ie=Q&&Q.targetChanges.get(O.targetId),pe=Q&&Q.targetMismatches.get(O.targetId)!=null,fe=O.view.applyChanges(te,L.isPrimaryClient,ie,pe);return zv(L,O.targetId,fe.au),fe.snapshot})(i,E,T,V);const c=await Rv(i.localStore,e,!0),f=new ak(e,c.ks),m=f.ru(c.documents),g=Lc.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),y=f.applyChanges(m,i.isPrimaryClient,g);zv(i,n,y.au);const _=new ik(e,n,f);return i.Tu.set(e,_),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),y.snapshot}async function uk(i,e,n){const s=Qe(i),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((f=>!pf(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await bm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&dg(s.remoteStore,o.targetId),_m(s,o.targetId)})).catch(el)):(_m(s,o.targetId),await bm(s.localStore,o.targetId,!0))}async function dk(i,e){const n=Qe(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),dg(n.remoteStore,s.targetId))}async function fk(i,e,n){const s=xk(i);try{const o=await(function(f,m){const g=Qe(f),y=Mt.now(),_=m.reduce(((V,U)=>V.add(U.key)),ct());let E,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let U=$i(),L=ct();return g.xs.getEntries(V,_).next((O=>{U=O,U.forEach(((X,Q)=>{Q.isValidDocument()||(L=L.add(X))}))})).next((()=>g.localDocuments.getOverlayedDocuments(V,U))).next((O=>{E=O;const X=[];for(const Q of m){const te=TI(Q,E.get(Q.key).overlayedDocument);te!=null&&X.push(new Ks(Q.key,te,P1(te.value.mapValue),ga.exists(!0)))}return g.mutationQueue.addMutationBatch(V,y,X,m)})).next((O=>{T=O;const X=O.applyToLocalDocumentSet(E,L);return g.documentOverlayCache.saveOverlays(V,O.batchId,X)}))})).then((()=>({batchId:T.batchId,changes:K1(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,g){let y=f.du[f.currentUser.toKey()];y||(y=new Bt(lt)),y=y.insert(m,g),f.du[f.currentUser.toKey()]=y})(s,o.batchId,n),await Bc(s,o.changes),await _f(s.remoteStore)}catch(o){const c=gg(o,"Failed to persist write");n.reject(c)}}async function RE(i,e){const n=Qe(i);try{const s=await wj(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const f=n.Au.get(c);f&&(Et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Et(f.hu,14607):o.removedDocuments.size>0&&(Et(f.hu,42227),f.hu=!1))})),await Bc(n,s,e)}catch(s){await el(s)}}function Vv(i,e,n){const s=Qe(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((c,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const g=Qe(f);g.onlineState=m;let y=!1;g.queries.forEach(((_,E)=>{for(const T of E.ba)T.va(m)&&(y=!0)})),y&&xg(g)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function hk(i,e,n){const s=Qe(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),c=o&&o.key;if(c){let f=new Bt(De.comparator);f=f.insert(c,Rn.newNoDocument(c,Ge.min()));const m=ct().add(c),g=new bf(Ge.min(),new Map,new Bt(lt),f,m);await RE(s,g),s.Ru=s.Ru.remove(c),s.Au.delete(e),Eg(s)}else await bm(s.localStore,e,!1).then((()=>_m(s,e,n))).catch(el)}async function pk(i,e){const n=Qe(i),s=e.batch.batchId;try{const o=await Aj(n.localStore,e);IE(n,s,null),CE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Bc(n,o)}catch(o){await el(o)}}async function mk(i,e,n){const s=Qe(i);try{const o=await(function(f,m){const g=Qe(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return g.mutationQueue.lookupMutationBatch(y,m).next((E=>(Et(E!==null,37113),_=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,_,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>g.localDocuments.getDocuments(y,_)))}))})(s.localStore,e);IE(s,e,n),CE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Bc(s,o)}catch(o){await el(o)}}function CE(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function IE(i,e,n){const s=Qe(i);let o=s.du[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function _m(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((s=>{i.Vu.containsKey(s)||jE(i,s)}))}function jE(i,e){i.Eu.delete(e.path.canonicalString());const n=i.Ru.get(e);n!==null&&(dg(i.remoteStore,n),i.Ru=i.Ru.remove(e),i.Au.delete(n),Eg(i))}function zv(i,e,n){for(const s of n)s instanceof SE?(i.Vu.addReference(s.key,e),gk(i,s)):s instanceof TE?(we(_g,"Document no longer in limbo: "+s.key),i.Vu.removeReference(s.key,e),i.Vu.containsKey(s.key)||jE(i,s.key)):Ue(19791,{wu:s})}function gk(i,e){const n=e.key,s=n.path.canonicalString();i.Ru.get(n)||i.Eu.has(s)||(we(_g,"New document in limbo: "+n),i.Eu.add(s),Eg(i))}function Eg(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new De(kt.fromString(e)),s=i.fu.next();i.Au.set(s,new sk(n)),i.Ru=i.Ru.insert(n,s),xE(i.remoteStore,new ks(ci(hf(n.path)),s,"TargetPurposeLimboResolution",uf.ce))}}async function Bc(i,e,n){const s=Qe(i),o=[],c=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{f.push(s.pu(g,e,n).then((y=>{if((y||n)&&s.isPrimaryClient){const _=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(y){o.push(y);const _=cg.Es(g.targetId,y);c.push(_)}})))})),await Promise.all(f),s.Pu.J_(o),await(async function(g,y){const _=Qe(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(y,(T=>ue.forEach(T.Ts,(V=>_.persistence.referenceDelegate.addReference(E,T.targetId,V))).next((()=>ue.forEach(T.Is,(V=>_.persistence.referenceDelegate.removeReference(E,T.targetId,V)))))))))}catch(E){if(!tl(E))throw E;we(ug,"Failed to update sequence numbers: "+E)}for(const E of y){const T=E.targetId;if(!E.fromCache){const V=_.vs.get(T),U=V.snapshotVersion,L=V.withLastLimboFreeSnapshotVersion(U);_.vs=_.vs.insert(T,L)}}})(s.localStore,c))}async function yk(i,e){const n=Qe(i);if(!n.currentUser.isEqual(e)){we(_g,"User change. New user:",e.toKey());const s=await mE(n.localStore,e);n.currentUser=e,(function(c,f){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new Ee(oe.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Bc(n,s.Ns)}}function bk(i,e){const n=Qe(i),s=n.Au.get(e);if(s&&s.hu)return ct().add(s.key);{let o=ct();const c=n.Iu.get(e);if(!c)return o;for(const f of c){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function kE(i){const e=Qe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=RE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hk.bind(null,e),e.Pu.J_=tk.bind(null,e.eventManager),e.Pu.yu=nk.bind(null,e.eventManager),e}function xk(i){const e=Qe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mk.bind(null,e),e}class Qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Ej(this.persistence,new xj,e.initialUser,this.serializer)}Cu(e){return new pE(lg.Vi,this.serializer)}Du(e){return new Cj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qd.provider={build:()=>new Qd};class vk extends Qd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Et(this.persistence.referenceDelegate instanceof Kd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new ij(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new pE((s=>Kd.Vi(s,n)),this.serializer)}}class Em{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Vv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=yk.bind(null,this.syncEngine),await Wj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ek})()}createDatastore(e){const n=xf(e.databaseInfo.databaseId),s=Dj(e.databaseInfo);return Lj(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,c,f,m){return new Bj(s,o,c,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>Vv(this.syncEngine,n,0)),(function(){return jv.v()?new jv:new Ij})())}createSyncEngine(e,n){return(function(o,c,f,m,g,y,_){const E=new rk(o,c,f,m,g,y);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Qe(n);we(kr,"RemoteStore shutting down."),s.Ea.add(5),await Uc(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Em.provider={build:()=>new Em};class Ag{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const qs="FirestoreClient";class _k{constructor(e,n,s,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this._databaseInfo=o,this.user=Nn.UNAUTHENTICATED,this.clientId=Qm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{we(qs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(we(qs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=gg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function $p(i,e){i.asyncQueue.verifyOperationInProgress(),we(qs,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await mE(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Lv(i,e){i.asyncQueue.verifyOperationInProgress();const n=await Ek(i);we(qs,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>Ov(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>Ov(e.remoteStore,o))),i._onlineComponents=e}async function Ek(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){we(qs,"Using user provided OfflineComponentProvider");try{await $p(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Ho("Error using user provided cache. Falling back to memory cache: "+n),await $p(i,new Qd)}}else we(qs,"Using default OfflineComponentProvider"),await $p(i,new vk(void 0));return i._offlineComponents}async function OE(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(we(qs,"Using user provided OnlineComponentProvider"),await Lv(i,i._uninitializedComponentsProvider._online)):(we(qs,"Using default OnlineComponentProvider"),await Lv(i,new Em))),i._onlineComponents}function Ak(i){return OE(i).then((e=>e.syncEngine))}async function Xd(i){const e=await OE(i),n=e.eventManager;return n.onListen=ok.bind(null,e.syncEngine),n.onUnlisten=uk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dk.bind(null,e.syncEngine),n}function wk(i,e,n,s){const o=new Ag(s),c=new vg(e,o,n);return i.asyncQueue.enqueueAndForget((async()=>yg(await Xd(i),c))),()=>{o.Nu(),i.asyncQueue.enqueueAndForget((async()=>bg(await Xd(i),c)))}}function Sk(i,e,n={}){const s=new Ui;return i.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,g,y){const _=new Ag({next:T=>{_.Nu(),f.enqueueAndForget((()=>bg(c,E)));const V=T.docs.has(m);!V&&T.fromCache?y.reject(new Ee(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&T.fromCache&&g&&g.source==="server"?y.reject(new Ee(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new vg(hf(m.path),_,{includeMetadataChanges:!0,Ka:!0});return yg(c,E)})(await Xd(i),i.asyncQueue,e,n,s))),s.promise}function Tk(i,e,n={}){const s=new Ui;return i.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,g,y){const _=new Ag({next:T=>{_.Nu(),f.enqueueAndForget((()=>bg(c,E))),T.fromCache&&g.source==="server"?y.reject(new Ee(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new vg(m,_,{includeMetadataChanges:!0,Ka:!0});return yg(c,E)})(await Xd(i),i.asyncQueue,e,n,s))),s.promise}function Nk(i,e){const n=new Ui;return i.asyncQueue.enqueueAndForget((async()=>fk(await Ak(i),e,n))),n.promise}function DE(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const Rk="ComponentProvider",Uv=new Map;function Ck(i,e,n,s,o){return new YC(i,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,DE(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}const ME="firestore.googleapis.com",Bv=!0;class Hv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ME,this.ssl=Bv}else this.host=e.host,this.ssl=e.ssl??Bv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nj)throw new Ee(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DE(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ee(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ee(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ee(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ef{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new NC;switch(s.type){case"firstParty":return new jC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ee(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Uv.get(n);s&&(we(Rk,"Removing Datastore"),Uv.delete(n),s.terminate())})(this),Promise.resolve()}}function PE(i,e,n,s={}){i=Fn(i,Ef);const o=Mr(e),c=i._getSettings(),f={...c,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(Om(`https://${m}`),Dm("Firestore",!0)),c.host!==ME&&c.host!==m&&Ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:s};if(!Hi(g,f)&&(i._setSettings(g),s.mockUserToken)){let y,_;if(typeof s.mockUserToken=="string")y=s.mockUserToken,_=Nn.MOCK_USER;else{y=I_(s.mockUserToken,i._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new Ee(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Nn(E)}i._authCredentials=new RC(new w1(y,_))}}class Ys{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ys(this.firestore,e,this._query)}}class Ft{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ps(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ft(this.firestore,e,this._key)}toJSON(){return{type:Ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Vc(n,Ft._jsonSchema))return new Ft(e,s||null,new De(kt.fromString(n.referencePath)))}}Ft._jsonSchemaVersion="firestore/documentReference/1.0",Ft._jsonSchema={type:un("string",Ft._jsonSchemaVersion),referencePath:un("string")};class Ps extends Ys{constructor(e,n,s){super(e,n,hf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ft(this.firestore,null,new De(e))}withConverter(e){return new Ps(this.firestore,e,this._path)}}function Ut(i,e,...n){if(i=Jt(i),S1("collection","path",e),i instanceof Ef){const s=kt.fromString(e,...n);return tv(s),new Ps(i,null,s)}{if(!(i instanceof Ft||i instanceof Ps))throw new Ee(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(kt.fromString(e,...n));return tv(s),new Ps(i.firestore,null,s)}}function ze(i,e,...n){if(i=Jt(i),arguments.length===1&&(e=Qm.newId()),S1("doc","path",e),i instanceof Ef){const s=kt.fromString(e,...n);return ev(s),new Ft(i,null,new De(s))}{if(!(i instanceof Ft||i instanceof Ps))throw new Ee(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(kt.fromString(e,...n));return ev(s),new Ft(i.firestore,i instanceof Ps?i.converter:null,new De(s))}}const qv="AsyncQueue";class Fv{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yE(this,"async_queue_retry"),this._c=()=>{const s=Gp();s&&we(qv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Gp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Gp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ui;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!tl(e))throw e;we(qv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Gi("INTERNAL UNHANDLED ERROR: ",Gv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=mg.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Ue(47125,{Pc:Gv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Gv(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Ki extends Ef{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new Fv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Fv(e),this._firestoreClient=void 0,await e}}}function Ik(i,e){const n=typeof i=="object"?i:zm(),s=typeof i=="string"?i:Hd,o=af(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=N_("firestore");c&&PE(o,...c)}return o}function Af(i){if(i._terminated)throw new Ee(oe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||jk(i),i._firestoreClient}function jk(i){const e=i._freezeSettings(),n=Ck(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new _k(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}class ma{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ma(wn.fromBase64String(e))}catch(n){throw new Ee(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ma(wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ma._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vc(e,ma._jsonSchema))return ma.fromBase64String(e.bytes)}}ma._jsonSchemaVersion="firestore/bytes/1.0",ma._jsonSchema={type:un("string",ma._jsonSchemaVersion),bytes:un("string")};class wg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class il{constructor(e){this._methodName=e}}class di{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return lt(this._lat,e._lat)||lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(e){if(Vc(e,di._jsonSchema))return new di(e.latitude,e.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:un("string",di._jsonSchemaVersion),latitude:un("number"),longitude:un("number")};class Oa{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Oa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vc(e,Oa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Oa(e.vectorValues);throw new Ee(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Oa._jsonSchemaVersion="firestore/vectorValue/1.0",Oa._jsonSchema={type:un("string",Oa._jsonSchemaVersion),vectorValues:un("object")};const kk=/^__.*__$/;class Ok{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ks(e,this.data,this.fieldMask,n,this.fieldTransforms):new zc(e,this.data,n,this.fieldTransforms)}}class VE{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ks(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zE(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ue(40011,{dataSource:i})}}class wf{constructor(e,n,s,o,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new wf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Jd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(zE(this.dataSource)&&kk.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Dk{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||xf(e)}createContext(e,n,s,o=!1){return new wf({dataSource:e,methodName:n,targetDoc:s,path:An.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sf(i){const e=i._freezeSettings(),n=xf(i._databaseId);return new Dk(i._databaseId,!!e.ignoreUndefinedProperties,n)}function LE(i,e,n,s,o,c={}){const f=i.createContext(c.merge||c.mergeFields?2:0,e,n,o);Rg("Data must be an object, but it was:",f,s);const m=BE(s,f);let g,y;if(c.merge)g=new ta(f.fieldMask),y=f.fieldTransforms;else if(c.mergeFields){const _=[];for(const E of c.mergeFields){const T=Or(e,E,n);if(!f.contains(T))throw new Ee(oe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);FE(_,T)||_.push(T)}g=new ta(_),y=f.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=f.fieldTransforms;return new Ok(new Hn(m),g,y)}class Tf extends il{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tf}}function UE(i,e,n){return new wf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:i._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Sg extends il{_toFieldTransform(e){return new ng(e.path,new Rc)}isEqual(e){return e instanceof Sg}}class Tg extends il{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=UE(this,e,!0),s=this.Ac.map((c=>Ur(c,n))),o=new $o(s);return new ng(e.path,o)}isEqual(e){return e instanceof Tg&&Hi(this.Ac,e.Ac)}}class Ng extends il{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=UE(this,e,!0),s=this.Ac.map((c=>Ur(c,n))),o=new Ko(s);return new ng(e.path,o)}isEqual(e){return e instanceof Ng&&Hi(this.Ac,e.Ac)}}function Mk(i,e,n,s){const o=i.createContext(1,e,n);Rg("Data must be an object, but it was:",o,s);const c=[],f=Hn.empty();$s(s,((g,y)=>{const _=qE(e,g,n);y=Jt(y);const E=o.childContextForFieldPath(_);if(y instanceof Tf)c.push(_);else{const T=Ur(y,E);T!=null&&(c.push(_),f.set(_,T))}}));const m=new ta(c);return new VE(f,m,o.fieldTransforms)}function Pk(i,e,n,s,o,c){const f=i.createContext(1,e,n),m=[Or(e,s,n)],g=[o];if(c.length%2!=0)throw new Ee(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)m.push(Or(e,c[T])),g.push(c[T+1]);const y=[],_=Hn.empty();for(let T=m.length-1;T>=0;--T)if(!FE(y,m[T])){const V=m[T];let U=g[T];U=Jt(U);const L=f.childContextForFieldPath(V);if(U instanceof Tf)y.push(V);else{const O=Ur(U,L);O!=null&&(y.push(V),_.set(V,O))}}const E=new ta(y);return new VE(_,E,f.fieldTransforms)}function Vk(i,e,n,s=!1){return Ur(n,i.createContext(s?4:3,e))}function Ur(i,e){if(HE(i=Jt(i)))return Rg("Unsupported field value:",e,i),BE(i,e);if(i instanceof il)return(function(s,o){if(!zE(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const c=[];let f=0;for(const m of s){let g=Ur(m,o.childContextForArray(f));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),f++}return{arrayValue:{values:c}}})(i,e)}return(function(s,o){if((s=Jt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return vI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Mt.fromDate(s);return{timestampValue:$d(o.serializer,c)}}if(s instanceof Mt){const c=new Mt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:$d(o.serializer,c)}}if(s instanceof di)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ma)return{bytesValue:sE(o.serializer,s._byteString)};if(s instanceof Ft){const c=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw o.createError(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:rg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Oa)return(function(f,m){const g=f instanceof Oa?f.toArray():f;return{mapValue:{fields:{[D1]:{stringValue:M1},[qd]:{arrayValue:{values:g.map((_=>{if(typeof _!="number")throw m.createError("VectorValues must only contain numeric values.");return tg(m.serializer,_)}))}}}}}})(s,o);if(fE(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${cf(s)}`)})(i,e)}function BE(i,e){const n={};return R1(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$s(i,((s,o)=>{const c=Ur(o,e.childContextForField(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function HE(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Mt||i instanceof di||i instanceof ma||i instanceof Ft||i instanceof il||i instanceof Oa||fE(i))}function Rg(i,e,n){if(!HE(n)||!T1(n)){const s=cf(n);throw s==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+s)}}function Or(i,e,n){if((e=Jt(e))instanceof wg)return e._internalPath;if(typeof e=="string")return qE(i,e);throw Jd("Field path arguments must be of type string or ",i,!1,void 0,n)}const zk=new RegExp("[~\\*/\\[\\]]");function qE(i,e,n){if(e.search(zk)>=0)throw Jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new wg(...e.split("."))._internalPath}catch{throw Jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Jd(i,e,n,s,o){const c=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||f)&&(g+=" (found",c&&(g+=` in field ${s}`),f&&(g+=` in document ${o}`),g+=")"),new Ee(oe.INVALID_ARGUMENT,m+i+g)}function FE(i,e){return i.some((n=>n.isEqual(e)))}class Lk{convertValue(e,n="none"){switch(Bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return $s(e,((o,c)=>{s[o]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[qd].arrayValue?.values?.map((s=>Xt(s.doubleValue)));return new Oa(n)}convertGeoPoint(e){return new di(Xt(e.latitude),Xt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ff(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(wc(e));default:return null}}convertTimestamp(e){const n=Ls(e);return new Mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=kt.fromString(e);Et(dE(s),9688,{name:e});const o=new Sc(s.get(1),s.get(3)),c=new De(s.popFirst(5));return o.isEqual(n)||Gi(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}class Cg extends Lk{constructor(e){super(),this.firestore=e}convertBytes(e){return new ma(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ft(this.firestore,null,n)}}function qn(){return new Sg("serverTimestamp")}function Am(...i){return new Tg("arrayUnion",i)}function Ig(...i){return new Ng("arrayRemove",i)}const $v="@firebase/firestore",Kv="4.10.0";function Yv(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const c of s)if(c in o&&typeof o[c]=="function")return!0;return!1})(i,["next","error","complete"])}class GE{constructor(e,n,s,o,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Uk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Or("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Uk extends GE{data(){return super.data()}}function $E(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Ee(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jg{}class KE extends jg{}function kn(i,e,...n){let s=[];e instanceof jg&&s.push(e),s=s.concat(n),(function(c){const f=c.filter((g=>g instanceof kg)).length,m=c.filter((g=>g instanceof Nf)).length;if(f>1||f>0&&m>0)throw new Ee(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Nf extends KE{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Nf(e,n,s)}_apply(e){const n=this._parse(e);return YE(e._query,n),new Ys(e.firestore,e.converter,fm(e._query,n))}_parse(e){const n=Sf(e.firestore);return(function(c,f,m,g,y,_,E){let T;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Ee(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Xv(E,_);const U=[];for(const L of E)U.push(Qv(g,c,L));T={arrayValue:{values:U}}}else T=Qv(g,c,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Xv(E,_),T=Vk(m,f,E,_==="in"||_==="not-in");return cn.create(y,_,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ya(i,e,n){const s=e,o=Or("where",i);return Nf._create(o,s,n)}class kg extends jg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Ma.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let f=o;const m=c.getFlattenedFilters();for(const g of m)YE(f,g),f=fm(f,g)})(e._query,n),new Ys(e.firestore,e.converter,fm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Og extends KE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Og(e,n)}_apply(e){const n=(function(o,c,f){if(o.startAt!==null)throw new Ee(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Ee(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nc(c,f)})(e._query,this._field,this._direction);return new Ys(e.firestore,e.converter,fI(e._query,n))}}function zo(i,e="asc"){const n=e,s=Or("orderBy",i);return Og._create(s,n)}function Qv(i,e,n){if(typeof(n=Jt(n))=="string"){if(n==="")throw new Ee(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!q1(e)&&n.indexOf("/")!==-1)throw new Ee(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(kt.fromString(n));if(!De.isDocumentKey(s))throw new Ee(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return cv(i,new De(s))}if(n instanceof Ft)return cv(i,n._key);throw new Ee(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cf(n)}.`)}function Xv(i,e){if(!Array.isArray(i)||i.length===0)throw new Ee(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YE(i,e){const n=(function(o,c){for(const f of o)for(const m of f.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ee(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function QE(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class hc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sr extends GE{constructor(e,n,s,o,c,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Or("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Sr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Sr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Sr._jsonSchema={type:un("string",Sr._jsonSchemaVersion),bundleSource:un("string","DocumentSnapshot"),bundleName:un("string"),bundle:un("string")};class jd extends Sr{data(e={}){return super.data(e)}}class Tr{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new hc(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new jd(this._firestore,this._userDataWriter,s.key,s,new hc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const g=new jd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new hc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new jd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new hc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return m.type!==0&&(y=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),_=f.indexOf(m.doc.key)),{type:Bk(m.type),doc:g,oldIndex:y,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Tr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Bk(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ue(61501,{type:i})}}Tr._jsonSchemaVersion="firestore/querySnapshot/1.0",Tr._jsonSchema={type:un("string",Tr._jsonSchemaVersion),bundleSource:un("string","QuerySnapshot"),bundleName:un("string"),bundle:un("string")};function kd(i){i=Fn(i,Ft);const e=Fn(i.firestore,Ki),n=Af(e);return Sk(n,i._key).then((s=>XE(e,i,s)))}function wm(i){i=Fn(i,Ys);const e=Fn(i.firestore,Ki),n=Af(e),s=new Cg(e);return $E(i._query),Tk(n,i._query).then((o=>new Tr(e,s,i,o)))}function Dg(i,e,n){i=Fn(i,Ft);const s=Fn(i.firestore,Ki),o=QE(i.converter,e,n),c=Sf(s);return Rf(s,[LE(c,"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,ga.none())])}function dt(i,e,n,...s){i=Fn(i,Ft);const o=Fn(i.firestore,Ki),c=Sf(o);let f;return f=typeof(e=Jt(e))=="string"||e instanceof wg?Pk(c,"updateDoc",i._key,e,n,s):Mk(c,"updateDoc",i._key,e),Rf(o,[f.toMutation(i._key,ga.exists(!0))])}function Nr(i){return Rf(Fn(i.firestore,Ki),[new ag(i._key,ga.none())])}function Lo(i,e){const n=Fn(i.firestore,Ki),s=ze(i),o=QE(i.converter,e),c=Sf(i.firestore);return Rf(n,[LE(c,"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,ga.exists(!1))]).then((()=>s))}function On(i,...e){i=Jt(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Yv(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Yv(e[s])){const y=e[s];e[s]=y.next?.bind(y),e[s+1]=y.error?.bind(y),e[s+2]=y.complete?.bind(y)}let c,f,m;if(i instanceof Ft)f=Fn(i.firestore,Ki),m=hf(i._key.path),c={next:y=>{e[s]&&e[s](XE(f,i,y))},error:e[s+1],complete:e[s+2]};else{const y=Fn(i,Ys);f=Fn(y.firestore,Ki),m=y._query;const _=new Cg(f);c={next:E=>{e[s]&&e[s](new Tr(f,_,y,E))},error:e[s+1],complete:e[s+2]},$E(i._query)}const g=Af(f);return wk(g,m,o,c)}function Rf(i,e){const n=Af(i);return Nk(n,e)}function XE(i,e,n){const s=n.docs.get(e._key),o=new Cg(i);return new Sr(i,o,e._key,s,new hc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){TC(Pr),Rr(new Vs("firestore",((s,{instanceIdentifier:o,options:c})=>{const f=s.getProvider("app").getImmediate(),m=new Ki(new CC(s.getProvider("auth-internal")),new kC(f,s.getProvider("app-check-internal")),QC(f,o),f);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),ri($v,Kv,e),ri($v,Kv,"esm2020")})();const JE="firebasestorage.googleapis.com",Hk="storageBucket",qk=120*1e3,Fk=600*1e3;class gi extends mi{constructor(e,n,s=0){super(Kp(e),`Firebase Storage: ${n} (${Kp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Kp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hi;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hi||(hi={}));function Kp(i){return"storage/"+i}function Gk(){const i="An unknown error occurred, please check the error payload for server response.";return new gi(hi.UNKNOWN,i)}function $k(){return new gi(hi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Kk(){return new gi(hi.CANCELED,"User canceled the upload/download.")}function Yk(i){return new gi(hi.INVALID_URL,"Invalid URL '"+i+"'.")}function Qk(i){return new gi(hi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function Jv(i){return new gi(hi.INVALID_ARGUMENT,i)}function WE(){return new gi(hi.APP_DELETED,"The Firebase app was deleted.")}function Xk(i){return new gi(hi.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class ka{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=ka.makeFromUrl(e,n)}catch{return new ka(e,"")}if(s.path==="")return s;throw Qk(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function c(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const f="(/(.*))?$",m=new RegExp("^gs://"+o+f,"i"),g={bucket:1,path:3};function y(ie){ie.path_=decodeURIComponent(ie.path)}const _="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",V=new RegExp(`^https?://${E}/${_}/b/${o}/o${T}`,"i"),U={bucket:1,path:3},L=n===JE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,O="([^?#]*)",X=new RegExp(`^https?://${L}/${o}/${O}`,"i"),te=[{regex:m,indices:g,postModify:c},{regex:V,indices:U,postModify:y},{regex:X,indices:{bucket:1,path:2},postModify:y}];for(let ie=0;ie<te.length;ie++){const pe=te[ie],fe=pe.regex.exec(e);if(fe){const I=fe[pe.indices.bucket];let N=fe[pe.indices.path];N||(N=""),s=new ka(I,N),pe.postModify(s);break}}if(s==null)throw Yk(e);return s}}class Jk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Wk(i,e,n){let s=1,o=null,c=null,f=!1,m=0;function g(){return m===2}let y=!1;function _(...O){y||(y=!0,e.apply(null,O))}function E(O){o=setTimeout(()=>{o=null,i(V,g())},O)}function T(){c&&clearTimeout(c)}function V(O,...X){if(y){T();return}if(O){T(),_.call(null,O,...X);return}if(g()||f){T(),_.call(null,O,...X);return}s<64&&(s*=2);let te;m===1?(m=2,te=0):te=(s+Math.random())*1e3,E(te)}let U=!1;function L(O){U||(U=!0,T(),!y&&(o!==null?(O||(m=2),clearTimeout(o),E(0)):O||(m=1)))}return E(0),c=setTimeout(()=>{f=!0,L(!0)},n),L}function Zk(i){i(!1)}function e5(i){return i!==void 0}function Wv(i,e,n,s){if(s<e)throw Jv(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>n)throw Jv(`Invalid value for '${i}'. Expected ${n} or less.`)}function t5(i){const e=encodeURIComponent;let n="?";for(const s in i)if(i.hasOwnProperty(s)){const o=e(s)+"="+e(i[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var Wd;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Wd||(Wd={}));function n5(i,e){const n=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,c=e.indexOf(i)!==-1;return n||o||c}class a5{constructor(e,n,s,o,c,f,m,g,y,_,E,T=!0,V=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=f,this.callback_=m,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=_,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=V,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,L)=>{this.resolve_=U,this.reject_=L,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new xd(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const f=m=>{const g=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&c.addUploadProgressListener(f),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(f),this.pendingConnection_=null;const m=c.getErrorCode()===Wd.NO_ERROR,g=c.getStatus();if(!m||n5(g,this.additionalRetryCodes_)&&this.retry){const _=c.getErrorCode()===Wd.ABORT;s(!1,new xd(!1,null,_));return}const y=this.successCodes_.indexOf(g)!==-1;s(!0,new xd(y,c))})},n=(s,o)=>{const c=this.resolve_,f=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());e5(g)?c(g):c()}catch(g){f(g)}else if(m!==null){const g=Gk();g.serverResponse=m.getErrorText(),this.errorCallback_?f(this.errorCallback_(m,g)):f(g)}else if(o.canceled){const g=this.appDelete_?WE():Kk();f(g)}else{const g=$k();f(g)}};this.canceled_?n(!1,new xd(!1,null,!0)):this.backoffId_=Wk(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Zk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xd{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function i5(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function s5(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function r5(i,e){e&&(i["X-Firebase-GMPID"]=e)}function o5(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function l5(i,e,n,s,o,c,f=!0,m=!1){const g=t5(i.urlParams),y=i.url+g,_=Object.assign({},i.headers);return r5(_,e),i5(_,n),s5(_,c),o5(_,s),new a5(y,i.method,_,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,f,m)}function c5(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function u5(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}class Zd{constructor(e,n){this._service=e,n instanceof ka?this._location=n:this._location=ka.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zd(e,n)}get root(){const e=new ka(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return u5(this._location.path)}get storage(){return this._service}get parent(){const e=c5(this._location.path);if(e===null)return null;const n=new ka(this._location.bucket,e);return new Zd(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Xk(e)}}function Zv(i,e){const n=e?.[Hk];return n==null?null:ka.makeFromBucketSpec(n,i)}function d5(i,e,n,s={}){i.host=`${e}:${n}`;const o=Mr(e);o&&(Om(`https://${i.host}/b`),Dm("Storage",!0)),i._isUsingEmulator=!0,i._protocol=o?"https":"http";const{mockUserToken:c}=s;c&&(i._overrideAuthToken=typeof c=="string"?c:I_(c,i.app.options.projectId))}class f5{constructor(e,n,s,o,c,f=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=f,this._bucket=null,this._host=JE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qk,this._maxUploadRetryTime=Fk,this._requests=new Set,o!=null?this._bucket=ka.makeFromBucketSpec(o,this._host):this._bucket=Zv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ka.makeFromBucketSpec(this._url,e):this._bucket=Zv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Wv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Wv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ea(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zd(this,e)}_makeRequest(e,n,s,o,c=!0){if(this._deleted)return new Jk(WE());{const f=l5(e,this._appId,s,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const e_="@firebase/storage",t_="0.14.0";const ZE="storage";function h5(i=zm(),e){i=Jt(i);const s=af(i,ZE).getImmediate({identifier:e}),o=N_("storage");return o&&eA(s,...o),s}function eA(i,e,n,s={}){d5(i,e,n,s)}function p5(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new f5(n,s,o,e,Pr)}function m5(){Rr(new Vs(ZE,p5,"PUBLIC").setMultipleInstances(!0)),ri(e_,t_,""),ri(e_,t_,"esm2020")}m5();const tA={apiKey:"AIzaSyB3p9kAAb0TJXvJMKzUS6pummdlkbzlt6I",authDomain:"fft12l.firebaseapp.com",projectId:"fft12l",storageBucket:"fft12l.firebasestorage.app",messagingSenderId:"459190857682",appId:"1:459190857682:web:d857f4bf1fa2e5ec11220b"},Mg=Vm(tA),jt=g1(Mg),Ae=Ik(Mg),g5=h5(Mg);(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&(console.log(" MODO DEV: Conectando aos Emuladores do Firebase..."),qm(jt,"http://127.0.0.1:9099",{disableWarnings:!0}),PE(Ae,"127.0.0.1",8080),eA(g5,"127.0.0.1",9199));const y5=(i,e)=>s1(jt,i,e),Cf="/assets/chocobo-loading-CZsGc2ZM.gif",b5="/assets/musica-tema-78rqvj_H.mp3",x5="/assets/fundo-rpg-BXz1tR4K.jpg",zt=new Audio(b5);zt.loop=!0;zt.volume=.2;function v5(){const i=Yi(),e=()=>{zt.volume=.2,zt.play().then(()=>{console.log("ter musical sintonizado.")}).catch(n=>{console.log("Aguardando interao: ",n)}),i("/login")};return u.jsxs("div",{className:"landing-container",onClick:e,children:[u.jsxs("div",{className:"content",children:[u.jsx("h1",{className:"game-title",children:"FINAL FANTASY"}),u.jsx("h2",{className:"sub-title",children:"12 Libertao"}),u.jsx("div",{className:"press-start",children:"PRESS START"})]}),u.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .landing-container {
          height: 100vh; width: 100vw; display: flex; align-items: center; justify-content: center;
          background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url(${x5}) no-repeat center center;
          background-size: cover; cursor: pointer; position: fixed; top: 0; left: 0; z-index: 1000;
        }
        .content { text-align: center; animation: fadeInSuave 4s ease-in-out; }
        .game-title { font-size: clamp(30px, 8vw, 60px); letter-spacing: 8px; color: #fff; text-shadow: 3px 3px 5px #000, 0 0 20px rgba(0, 242, 255, 0.5); font-family: 'serif'; }
        .sub-title { font-size: clamp(14px, 4vw, 24px); color: #ffcc00; margin-top: 10px; text-shadow: 1px 1px 3px #000; font-family: 'serif'; }
        .press-start { margin-top: 80px; font-size: 20px; color: #fff; letter-spacing: 5px; text-shadow: 0 0 10px #00f2ff; animation: blink 1.5s infinite; font-family: 'sans-serif'; }
        @keyframes blink { 0%, 100% { opacity: 0; } 50% { opacity: 1; } }
        @keyframes fadeInSuave { from { opacity: 0; filter: blur(15px); transform: scale(0.9); } to { opacity: 1; filter: blur(0); transform: scale(1); } }
      `}})]})}const Pg="/assets/video-fundo-B5LPnOg0.mp4",_5="/assets/botao-admin-T-iaDg61.png";function E5(){const i=Yi(),[e,n]=w.useState(null),[s,o]=w.useState(""),[c,f]=w.useState(""),[m,g]=w.useState("");w.useEffect(()=>{zt.volume=.2,zt.paused&&zt.play().catch(T=>console.log("Autoplay bloqueado:",T))},[]);const y=()=>{zt.pause(),zt.currentTime=0},_=async T=>{T.preventDefault(),g("");try{const U=(await y5(s,c)).user,L=ze(Ae,"users",U.uid),O=await kd(L);if(O.exists()){const X=O.data();if(e==="master"&&X.role!=="mestre"){g("ACESSO NEGADO: VOC NO  UM MESTRE.");return}if(y(),X.role==="mestre")i("/mestre");else{const Q=ze(Ae,"characters",U.uid);(await kd(Q)).exists()?i("/jogador-vtt"):i("/create-character")}}else{const X=ze(Ae,"characters",U.uid),Q=await kd(X);y(),Q.exists()?i("/jogador-vtt"):i("/create-character")}}catch(V){console.error(V),g("FALHA NA CONEXO COM O TER.")}},E=()=>{i("/admin-login")};return u.jsxs("div",{className:"login-container",children:[u.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",className:"background-video",children:u.jsx("source",{src:Pg,type:"video/mp4"})}),u.jsx("div",{className:"content-overlay",children:e?u.jsxs("form",{className:"login-panel fade-in",onSubmit:_,children:[u.jsx("button",{type:"button",className:"ff-back",onClick:()=>n(null),children:" RETORNAR"}),u.jsx("h3",{className:"ff-subtitle",children:e==="master"?"NARRADOR":"JOGADOR"}),u.jsxs("div",{className:"ff-input-group",children:[u.jsx("input",{type:"email",placeholder:"E-MAIL",value:s,onChange:T=>o(T.target.value),required:!0}),u.jsx("input",{type:"password",placeholder:"SENHA",value:c,onChange:T=>f(T.target.value),required:!0})]}),m&&u.jsx("p",{className:"ff-error",children:m}),u.jsx("button",{type:"submit",className:"ff-submit",children:"ENTRAR"})]}):u.jsxs("div",{className:"selection-screen fade-in",children:[u.jsx("h2",{className:"ff-title",children:"ESCOLHA SUA JORNADA"}),u.jsxs("div",{className:"ff-button-group",children:[u.jsx("button",{className:"ff-btn",onClick:()=>n("player"),children:"JOGADOR"}),u.jsx("button",{className:"ff-btn",onClick:()=>n("master"),children:"NARRADOR"})]})]})}),u.jsx("button",{className:"admin-portal-btn",onClick:E,title:"Acesso ao Admin",children:u.jsx("img",{src:_5,alt:"Portal Admin"})}),u.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .login-container { height: 100vh; width: 100vw; background: #000; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; }
        .background-video { position: absolute; top: 50%; left: 50%; min-width: 100%; min-height: 100%; width: auto; height: auto; z-index: 1; transform: translate(-50%, -50%); object-fit: cover; animation: quickLoopFade 0.5s ease-in-out; }
        @keyframes quickLoopFade { 0% { opacity: 0; } 100% { opacity: 1; } }
        .content-overlay { position: relative; z-index: 10; display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.4); }
        .ff-title { color: #fff; font-size: 32px; letter-spacing: 8px; margin-bottom: 40px; text-shadow: 0 0 15px rgba(255, 255, 255, 0.5); text-align: center; font-family: 'serif'; }
        .ff-subtitle { color: #ffcc00; letter-spacing: 4px; margin-bottom: 30px; text-align: center; }
        .ff-button-group { display: flex; flex-direction: column; gap: 20px; align-items: center; }
        .ff-btn { background: rgba(0, 0, 30, 0.6); border: 1px solid rgba(255, 255, 255, 0.6); color: #fff; padding: 15px 50px; letter-spacing: 3px; cursor: pointer; transition: 0.4s; width: 280px; backdrop-filter: blur(5px); font-weight: bold; }
        .ff-submit { background: rgba(0, 0, 30, 0.6); border: 1px solid rgba(255, 255, 255, 0.6); color: #fff; padding: 15px 0; letter-spacing: 3px; cursor: pointer; transition: 0.4s; width: 326px; backdrop-filter: blur(5px); font-weight: bold; margin: 0 auto; display: block; }
        .ff-btn:hover, .ff-submit:hover { background: #fff; color: #000; box-shadow: 0 0 20px #fff; }
        .ff-input-group input { display: block; width: 300px; padding: 12px; margin: 0 auto 20px auto; background: rgba(0, 0, 0, 0.7); border: 1px solid #444; color: #fff; text-align: center; letter-spacing: 2px; outline: none; }
        .ff-input-group input:focus { border-color: #ffcc00; }
        .ff-back { background: none; border: none; color: #ffcc00; cursor: pointer; margin-bottom: 15px; display: block; font-weight: bold; }
        .ff-error { color: #ff4444; font-size: 12px; margin-bottom: 15px; text-shadow: 0 0 5px #000; text-align: center; }
        .admin-portal-btn { position: absolute; bottom: 30px; right: 30px; z-index: 100; background: none; border: none; cursor: pointer; width: 70px; transition: 0.5s; filter: drop-shadow(0 0 8px rgba(0, 242, 255, 0.6)); }
        .admin-portal-btn img { width: 100%; height: auto; }
        .admin-portal-btn:hover { transform: scale(1.2) rotate(-5deg); filter: drop-shadow(0 0 15px #00f2ff); }
        .fade-in { animation: fadeInFF 2s ease-out forwards; }
        @keyframes fadeInFF { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
      `}})]})}function A5(){const[i,e]=w.useState(""),[n,s]=w.useState(""),[o,c]=w.useState(""),f=Yi();w.useEffect(()=>{zt.volume=.2,zt.paused&&zt.play().catch(()=>{})},[]);const m=async g=>{if(g.preventDefault(),c(""),i!==void 0){c("VOC NO TEM PERMISSO DE NARRADOR.");return}try{await s1(jt,i,n),zt.pause(),zt.currentTime=0,f("/admin")}catch(_){console.error(_),c("SENHA INCORRETA OU FALHA NA CONEXO.")}};return u.jsxs("div",{className:"login-container",children:[u.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"background-video",children:u.jsx("source",{src:Pg,type:"video/mp4"})}),u.jsx("div",{className:"content-overlay",children:u.jsxs("form",{className:"login-panel fade-in",onSubmit:m,children:[u.jsx("button",{type:"button",className:"ff-back",onClick:()=>f("/"),children:" RETORNAR"}),u.jsx("h3",{className:"ff-subtitle",children:"PORTAL DO ADMINISTRADOR"}),u.jsxs("div",{className:"ff-input-group",children:[u.jsx("input",{type:"email",placeholder:"E-MAIL",value:i,onChange:g=>e(g.target.value),required:!0}),u.jsx("input",{type:"password",placeholder:"CHAVE DE ACESSO",value:n,onChange:g=>s(g.target.value),required:!0})]}),o&&u.jsx("p",{className:"ff-error",style:{color:"#ff4444",fontSize:"12px",marginBottom:"10px"},children:o}),u.jsx("button",{type:"submit",className:"ff-submit",children:"DESBLOQUEAR"})]})}),u.jsx("style",{children:`
        .login-container { height: 100vh; width: 100vw; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; background: #000; }
        .background-video { position: absolute; top: 50%; left: 50%; min-width: 100%; min-height: 100%; transform: translate(-50%, -50%); object-fit: cover; z-index: 1; }
        .content-overlay { position: absolute; top: 0; left: 0; z-index: 10; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.6); }
        .login-panel { background: rgba(0, 0, 30, 0.85); padding: 40px; border: 1px solid #00f2ff; backdrop-filter: blur(15px); text-align: center; box-shadow: 0 0 30px rgba(0, 242, 255, 0.3); width: 350px; }
        .ff-subtitle { color: #ffcc00; letter-spacing: 4px; margin-bottom: 25px; font-weight: bold; }
        .ff-input-group input { display: block; width: 100%; padding: 12px; margin: 10px 0; background: rgba(0,0,0,0.8); border: 1px solid #444; color: #fff; text-align: center; outline: none; box-sizing: border-box; }
        .ff-input-group input:focus { border-color: #00f2ff; box-shadow: 0 0 10px rgba(0, 242, 255, 0.2); }
        .ff-submit { background: transparent; border: 1px solid #fff; color: #fff; padding: 12px 40px; cursor: pointer; transition: 0.3s; width: 100%; letter-spacing: 2px; margin-top: 10px; }
        .ff-submit:hover { background: #fff; color: #000; box-shadow: 0 0 15px #fff; }
        .ff-back { background: none; border: none; color: #ffcc00; cursor: pointer; margin-bottom: 20px; font-size: 12px; }
        .fade-in { animation: fadeInFF 1.5s ease-out; }
        @keyframes fadeInFF { from { opacity: 0; } to { opacity: 1; } }
      `})]})}function w5(){const[i,e]=w.useState([]),[n,s]=w.useState([]),[o,c]=w.useState(""),[f,m]=w.useState(""),[g,y]=w.useState("jogador"),[_,E]=w.useState(""),[T,V]=w.useState(!1);w.useEffect(()=>{zt&&zt.pause()},[]),w.useEffect(()=>{U()},[]);const U=async()=>{try{const pe=(await wm(Ut(Ae,"users"))).docs.map(N=>({id:N.id,...N.data()})).filter(N=>N.email!=="fffvtt10@gmail.com"),I=(await wm(Ut(Ae,"characters"))).docs.map(N=>({id:N.id,...N.data()}));e(pe),s(I)}catch(ie){console.error("Erro ao carregar dados do ter: ",ie)}},L=async ie=>{if(ie.preventDefault(),!o||!f)return alert("Preencha todos os campos!");V(!0);let pe=null;try{pe=Vm(tA,"SecondaryApp");const fe=g1(pe);window.location.hostname==="localhost"&&qm(fe,"http://127.0.0.1:9099");const N=(await c2(fe,o,f)).user;await Dg(ze(Ae,"users",N.uid),{email:o,role:g,uid:N.uid,active:!0,createdAt:qn()}),await p2(fe),alert(`Usurio ${o} invocado com sucesso!`),c(""),m(""),U()}catch(fe){console.error(fe),alert("Erro ao invocar usurio: "+fe.message)}finally{pe&&await ZN(pe),V(!1)}},O=async(ie,pe)=>{if(window.confirm(`Deseja banir permanentemente ${pe} do ter?`))try{await Nr(ze(Ae,"users",ie)),await Nr(ze(Ae,"characters",ie)),alert("Conta e personagem banidos com sucesso."),U()}catch(fe){alert("Erro ao banir usurio: "+fe.message)}},X=async ie=>{if(window.confirm("Tem certeza que deseja apagar APENAS o personagem deste usurio? Ele ter que criar outro."))try{await Nr(ze(Ae,"characters",ie)),alert("Personagem deletado. O usurio continua ativo."),U()}catch(pe){alert("Erro ao deletar personagem: "+pe.message)}},Q=ie=>{const pe=n.find(fe=>fe.uid===ie);return pe||null},te=async()=>{if(_.length<6)return alert("A senha deve ter no mnimo 6 caracteres.");try{await u2(jt.currentUser,_),alert("Sua chave de mestre foi alterada!"),E("")}catch{alert("Erro ao trocar senha. Tente fazer login novamente.")}};return u.jsxs("div",{className:"admin-container",children:[u.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"background-video-admin",children:u.jsx("source",{src:Pg,type:"video/mp4"})}),u.jsxs("div",{className:"admin-overlay",children:[u.jsx("h1",{className:"admin-title",children:"PAINEL DO ADMINISTRADOR"}),u.jsxs("div",{className:"admin-grid",children:[u.jsxs("div",{className:"admin-card",children:[u.jsx("h3",{children:"INVOCAR NOVO JOGADOR"}),u.jsxs("form",{onSubmit:L,children:[u.jsx("input",{placeholder:"E-mail Arcano",type:"email",value:o,onChange:ie=>c(ie.target.value),required:!0}),u.jsx("input",{placeholder:"Palavra-Passe",type:"text",value:f,onChange:ie=>m(ie.target.value),required:!0}),u.jsxs("select",{value:g,onChange:ie=>y(ie.target.value),children:[u.jsx("option",{value:"jogador",children:"Jogador"}),u.jsx("option",{value:"mestre",children:"Mestre"})]}),u.jsx("button",{type:"submit",disabled:T,className:"btn-summon",children:T?"INVOCANDO...":"CRIAR ACESSO"})]})]}),u.jsxs("div",{className:"admin-card scroll-card",children:[u.jsxs("h3",{children:["ALMAS REGISTRADAS (",i.length,")"]}),u.jsx("div",{className:"list-container",children:i.map(ie=>{const pe=Q(ie.id);return u.jsxs("div",{className:"list-item",children:[u.jsxs("div",{className:"item-info",children:[u.jsx("span",{className:"item-main",children:ie.email}),u.jsx("span",{className:`badge ${ie.role}`,children:ie.role.toUpperCase()}),pe&&u.jsxs("span",{style:{fontSize:"10px",color:"#ffcc00",marginTop:"2px"},children:[" ",pe.name]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[u.jsx("button",{className:"btn-ban",onClick:()=>O(ie.id,ie.email),children:"BANIR"}),pe&&u.jsx("button",{className:"btn-ban",style:{borderColor:"#f80",color:"#f80"},onClick:()=>X(ie.id),children:"DEL CHAR"})]})]},ie.id)})})]}),u.jsxs("div",{className:"admin-card",children:[u.jsx("h3",{children:"MINHA CHAVE MESTRA"}),u.jsx("input",{type:"password",placeholder:"Nova Senha",value:_,onChange:ie=>E(ie.target.value)}),u.jsx("button",{className:"btn-summon",style:{background:"#333",border:"1px solid #fff"},onClick:te,children:"ATUALIZAR"})]})]})]}),u.jsx("style",{children:`
        .admin-container { width: 100vw; height: 100vh; overflow: hidden; position: relative; font-family: 'Cinzel', serif; color: #fff; background: #000; }
        .background-video-admin { position: absolute; top: 50%; left: 50%; width: 100%; height: 100%; object-fit: cover; transform: translate(-50%, -50%); opacity: 0.4; pointer-events: none; }
        .admin-overlay { position: relative; z-index: 10; padding: 40px; display: flex; flex-direction: column; height: 100%; }
        .admin-title { color: #ffcc00; text-align: center; font-size: 32px; letter-spacing: 5px; margin-bottom: 30px; text-shadow: 0 0 10px #ffcc00; }
        .admin-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 30px; height: 100%; }
        .admin-card { background: rgba(0, 10, 20, 0.9); border: 1px solid #ffcc00; border-radius: 8px; padding: 20px; display: flex; flex-direction: column; backdrop-filter: blur(10px); }
        .admin-card h3 { color: #00f2ff; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0; font-size: 16px; letter-spacing: 2px; }
        .scroll-card .list-container { overflow-y: auto; flex: 1; padding-right: 5px; }
        .scroll-card .list-container::-webkit-scrollbar { width: 5px; }
        .scroll-card .list-container::-webkit-scrollbar-thumb { background: #333; }
        
        input, select { background: #000; border: 1px solid #444; color: #fff; padding: 12px; width: 100%; margin-bottom: 15px; font-family: 'serif'; outline: none; }
        input:focus, select:focus { border-color: #ffcc00; }
        
        .btn-summon { width: 100%; background: #ffcc00; color: #000; border: none; padding: 12px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-summon:hover:not(:disabled) { background: #fff; box-shadow: 0 0 15px #fff; }
        .btn-summon:disabled { background: #333; color: #666; cursor: not-allowed; }

        .list-item { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); padding: 10px; margin-bottom: 8px; border-radius: 4px; border: 1px solid transparent; }
        .list-item:hover { border-color: #00f2ff; }
        .item-info { display: flex; flex-direction: column; }
        .item-main { font-weight: bold; color: #eee; font-size: 14px; }
        .item-sub { font-size: 10px; color: #aaa; }
        
        .badge { font-size: 10px; padding: 2px 6px; border-radius: 4px; font-weight: bold; color: #000; text-transform: uppercase; margin-right: 5px; }
        .badge.jogador { background: #00f2ff; }
        .badge.mestre { background: #ffcc00; }
        
        .btn-ban { background: transparent; border: 1px solid #f44; color: #f44; font-size: 10px; padding: 4px 8px; cursor: pointer; }
        .btn-ban:hover { background: #f44; color: #fff; }
      `})]})}const nA="/assets/fundo-mestre-OTxRyTTC.jpg",aA="/assets/sanchez-1nilABmc.jpeg",iA="/assets/papiro-CRka9pgw.png",S5="/assets/bazar-DZ7p321B.png";function Vg({isMestre:i,playerData:e,vttDock:n}){const[s,o]=w.useState(!1),[c,f]=w.useState([]),[m,g]=w.useState([]),[y,_]=w.useState(""),[E,T]=w.useState(null),[V,U]=w.useState(""),[L,O]=w.useState({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""});w.useEffect(()=>{if(!s)return;const C=kn(Ut(Ae,"game_items"),ya("status","==","bazar"),zo("updatedAt","desc")),R=On(C,Se=>{f(Se.docs.map(ae=>({id:ae.id,...ae.data()})))});return()=>R()},[s]),w.useEffect(()=>{if(!s||!i)return;const C=kn(Ut(Ae,"game_items"),ya("status","==","vault"),zo("nome","asc")),R=On(C,Se=>{const ae=Se.docs.map(H=>({id:H.id,...H.data()})).filter(H=>!H.ownerId);g(ae)});return()=>R()},[s,i]);const X=C=>{const R=C.target.value;if(U(R),!R)return;const Se=m.find(ae=>ae.id===R);Se&&O({...L,nome:Se.nome,descricao:Se.descricao,imagem:Se.imagem,valorGil:"",valorReal:""})},Q=async C=>{if(C.preventDefault(),!L.nome||!L.valorGil)return alert("Preencha nome e valor em Gil!");try{const R={...L,updatedAt:qn()};E?(await dt(ze(Ae,"game_items",E),R),T(null)):V?(await dt(ze(Ae,"game_items",V),{...R,status:"bazar"}),U("")):await Lo(Ut(Ae,"game_items"),{...R,status:"bazar",ownerId:null,createdAt:qn()}),O({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""})}catch{alert("Erro ao salvar item no Bazar.")}},te=async C=>{window.confirm("Remover do mercado? O item voltar para a Forja.")&&await dt(ze(Ae,"game_items",C),{status:"vault",updatedAt:qn()})},ie=async C=>{if(!jt.currentUser)return alert("Voc precisa estar logado.");const R=e?.character_sheet?.inventory?.gil||0,Se=Number(C.valorGil);if(R<Se)return alert(`Saldo insuficiente! Voc tem ${R} Gil, mas o item custa ${Se} Gil.`);if(window.confirm(`Comprar "${C.nome}" por ${C.valorGil} Gil?`))try{const H=R-Se,re=ze(Ae,"characters",jt.currentUser.uid),ye=JSON.parse(JSON.stringify(e.character_sheet));ye.inventory.gil=H,await Dg(re,{character_sheet:ye},{merge:!0}),await dt(ze(Ae,"game_items",C.id),{status:"requested",ownerId:jt.currentUser.uid,buyerName:e.name,updatedAt:qn()}),alert(`Solicitao enviada! O Mestre aprovar a entrega em breve. Saldo restante: ${H} Gil.`)}catch(H){console.error("Erro na compra:",H),alert("Erro na transao. Verifique o console.")}},[pe,fe]=w.useState([]);w.useEffect(()=>{if(!i||!s)return;const C=kn(Ut(Ae,"game_items"),ya("status","==","requested")),R=On(C,Se=>{fe(Se.docs.map(ae=>({id:ae.id,...ae.data()})))});return()=>R()},[i,s]);const I=async C=>{try{await dt(ze(Ae,"game_items",C.id),{status:"vault",ownerId:C.ownerId,buyerName:C.buyerName,updatedAt:qn()}),alert(`Venda aprovada! O item "${C.nome}" foi enviado para o Cofre Pessoal de ${C.buyerName}.`)}catch{alert("Erro ao aprovar.")}},N=C=>{T(C.id),U(""),O(C)},j=()=>{T(null),U(""),O({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""})},P=c.filter(C=>C.nome.toLowerCase().includes(y.toLowerCase())),k=C=>C&&C.startsWith("http")?`url(${C})`:"url('https://via.placeholder.com/150?text=Item')";return u.jsxs(u.Fragment,{children:[u.jsx("button",{className:`bazar-trigger-btn ${n?"vtt-dock-style":""}`,onClick:()=>o(!0),title:"Abrir Bazar",children:u.jsx("img",{src:S5,alt:"Bazar",onError:C=>{C.target.style.display="none",C.target.parentNode.innerText="BAZAR"}})}),s&&u.jsx("div",{className:"bazar-overlay-flex",onClick:()=>o(!1),children:u.jsxs("div",{className:"bazar-modal-centered",onClick:C=>C.stopPropagation(),children:[u.jsxs("div",{className:"bazar-header",children:[u.jsx("h2",{children:"BAZAR GENRICA"}),u.jsx("button",{className:"close-btn",onClick:()=>o(!1),children:""})]}),i&&u.jsxs("div",{className:"mestre-panel",children:[pe.length>0&&u.jsxs("div",{className:"requests-box",children:[u.jsxs("h4",{children:["PEDIDOS DE COMPRA (",pe.length,")"]}),pe.map(C=>u.jsxs("div",{className:"request-row",children:[u.jsxs("span",{children:[u.jsx("strong",{children:C.buyerName})," quer comprar ",u.jsx("strong",{children:C.nome})," (",C.valorGil," G)"]}),u.jsx("button",{className:"btn-approve",onClick:()=>I(C),children:"APROVAR ENTREGA"})]},C.id))]}),u.jsxs("form",{onSubmit:Q,className:"bazar-form",children:[!E&&u.jsx("div",{className:"row",style:{marginBottom:"10px"},children:u.jsxs("select",{className:"bazar-input",onChange:X,value:V,children:[u.jsx("option",{value:"",children:" Selecionar Item do Cofre (Forja)..."}),m.map(C=>u.jsx("option",{value:C.id,children:C.nome},C.id))]})}),u.jsxs("div",{className:"row",children:[u.jsx("input",{placeholder:"Nome do Item",value:L.nome,onChange:C=>O({...L,nome:C.target.value}),className:"bazar-input",readOnly:!!V&&!E}),u.jsx("input",{placeholder:"Link Imagem",value:L.imagem,onChange:C=>O({...L,imagem:C.target.value}),className:"bazar-input"})]}),u.jsxs("div",{className:"row",children:[u.jsx("input",{placeholder:"Valor Gil",type:"number",value:L.valorGil,onChange:C=>O({...L,valorGil:C.target.value}),className:"bazar-input",required:!0}),u.jsx("input",{placeholder:"Valor Real (R$)",type:"number",value:L.valorReal,onChange:C=>O({...L,valorReal:C.target.value}),className:"bazar-input"})]}),u.jsx("textarea",{placeholder:"Descrio do item...",value:L.descricao,onChange:C=>O({...L,descricao:C.target.value}),className:"bazar-input area"}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"submit",className:"btn-save",children:E?"SALVAR ALTERAES":V?"COLOCAR  VENDA":"CRIAR E VENDER"}),(E||V)&&u.jsx("button",{type:"button",onClick:j,className:"btn-cancel",children:"CANCELAR"})]})]})]}),u.jsx("div",{className:"search-bar-container",children:u.jsx("input",{type:"text",placeholder:" Procurar mercadoria...",value:y,onChange:C=>_(C.target.value),className:"search-input"})}),u.jsxs("div",{className:"bazar-grid",children:[P.map(C=>u.jsxs("div",{className:"bazar-item-card",children:[u.jsx("div",{className:"item-img",style:{backgroundImage:k(C.imagem)}}),u.jsxs("div",{className:"item-info",children:[u.jsx("h4",{children:C.nome}),u.jsx("p",{className:"desc",children:C.descricao}),u.jsxs("div",{className:"prices",children:[u.jsxs("span",{className:"price-tag gil",children:[" ",C.valorGil," G"]}),C.valorReal&&u.jsxs("span",{className:"price-tag real",children:[" R$ ",C.valorReal]})]})]}),u.jsx("div",{className:"item-actions",children:i?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-icon edit",onClick:()=>N(C),title:"Editar Preo",children:""}),u.jsx("button",{className:"btn-icon delete",onClick:()=>te(C.id),title:"Devolver para a Forja",children:""})]}):u.jsx("button",{className:"btn-buy",onClick:()=>ie(C),children:"COMPRAR"})})]},C.id)),P.length===0&&u.jsx("p",{className:"empty-msg",children:"Nenhum item  venda no momento."})]})]})}),u.jsx("style",{children:`
        /* ESTILO PADRO (FIXO) */
        .bazar-trigger-btn { position: fixed; bottom: 30px; right: 30px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #ffcc00; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; }
        .bazar-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 25px #ffcc00; }
        .bazar-trigger-btn img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }

        /* ESTILO QUANDO NO DOCK DO VTT (SOBRESCREVE O FIXO) */
        .bazar-trigger-btn.vtt-dock-style {
            position: relative; 
            bottom: auto; 
            right: auto; 
            width: 50px; 
            height: 50px; 
            margin: 0; 
            z-index: auto;
            border: 2px solid #555;
            background: #111;
            box-shadow: 0 0 10px #000;
        }
        .bazar-trigger-btn.vtt-dock-style:hover {
            border-color: #ffcc00;
            color: #ffcc00;
            transform: scale(1.1);
        }

        .bazar-overlay-flex { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 100000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .bazar-modal-centered { width: 800px; max-width: 95vw; height: 750px; max-height: 90vh; background: #0d0d15; border: 1px solid #ffcc00; display: flex; flex-direction: column; box-shadow: 0 0 50px rgba(0,0,0,0.8); border-radius: 8px; overflow: hidden; }
        .bazar-header { background: linear-gradient(90deg, #1a1a1a, #000); padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #ffcc00; }
        .bazar-header h2 { margin: 0; color: #ffcc00; font-family: serif; letter-spacing: 2px; text-shadow: 0 0 10px #ffcc00; font-size: 24px; }
        .close-btn { background: transparent; border: none; color: #fff; font-size: 30px; cursor: pointer; }
        .mestre-panel { background: rgba(255, 204, 0, 0.05); padding: 15px; border-bottom: 1px solid #333; }
        .requests-box { background: rgba(0, 242, 255, 0.1); border: 1px solid #00f2ff; padding: 10px; margin-bottom: 15px; border-radius: 4px; }
        .requests-box h4 { color: #00f2ff; margin: 0 0 10px 0; font-size: 12px; }
        .request-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; font-size: 12px; color: #fff; }
        .btn-approve { background: #00f2ff; color: #000; border: none; padding: 5px 10px; font-weight: bold; cursor: pointer; border-radius: 3px; }
        .bazar-form { display: flex; flex-direction: column; gap: 10px; }
        .bazar-form .row { display: flex; gap: 10px; }
        .bazar-input { background: #000; border: 1px solid #444; color: #fff; padding: 10px; flex: 1; outline: none; font-family: serif; }
        .bazar-input.area { height: 60px; resize: none; }
        .form-actions { display: flex; gap: 10px; }
        .btn-save { flex: 1; background: #ffcc00; border: none; padding: 10px; font-weight: bold; cursor: pointer; color: #000; }
        .btn-cancel { background: #333; color: #fff; border: 1px solid #555; padding: 10px; cursor: pointer; }
        .search-bar-container { padding: 15px; background: #000; border-bottom: 1px solid #333; }
        .search-input { width: 100%; background: #111; border: 1px solid #444; color: #fff; padding: 12px; border-radius: 20px; text-align: center; outline: none; font-size: 16px; }
        .bazar-grid { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; scrollbar-width: none; -ms-overflow-style: none; }
        .bazar-grid::-webkit-scrollbar { display: none; }
        .bazar-item-card { background: linear-gradient(90deg, rgba(20,20,30,0.9), rgba(0,0,0,0.8)); border: 1px solid #444; display: flex; align-items: center; padding: 10px; border-radius: 4px; transition: 0.2s; }
        .bazar-item-card:hover { border-color: #00f2ff; box-shadow: 0 0 15px rgba(0, 242, 255, 0.1); }
        .item-img { width: 80px; height: 80px; background-size: cover; background-position: center; border: 1px solid #666; margin-right: 15px; border-radius: 4px; background-color: #000; }
        .item-info { flex: 1; }
        .item-info h4 { margin: 0 0 5px 0; color: #fff; font-size: 18px; letter-spacing: 1px; }
        .item-info .desc { margin: 0 0 10px 0; color: #aaa; font-size: 12px; font-style: italic; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .prices { display: flex; gap: 10px; }
        .price-tag { padding: 4px 8px; border-radius: 3px; font-weight: bold; font-size: 12px; }
        .price-tag.gil { background: rgba(255,255,0,0.1); color: #ffcc00; border: 1px solid #ffcc00; }
        .price-tag.real { background: rgba(0, 242, 255, 0.1); color: #00f2ff; border: 1px solid #00f2ff; }
        .item-actions { display: flex; gap: 8px; align-items: center; margin-left: 15px; }
        .btn-buy { background: #00f2ff; color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; clip-path: polygon(10% 0, 100% 0, 100% 70%, 90% 100%, 0 100%, 0 30%); transition: 0.2s; }
        .btn-buy:hover { background: #fff; box-shadow: 0 0 15px #00f2ff; }
        .btn-icon { background: transparent; border: 1px solid #444; color: #fff; padding: 8px; cursor: pointer; border-radius: 4px; font-size: 16px; }
        .btn-icon:hover { background: #fff; color: #000; }
        .btn-icon.delete:hover { background: #f44; border-color: #f44; color: #fff; }
        .empty-msg { text-align: center; color: #666; margin-top: 50px; font-style: italic; }
      `})]})}const T5="/assets/forja-Dr7AylP_.png";function sA({vttDock:i}){const[e,n]=w.useState(!1),[s,o]=w.useState([]),[c,f]=w.useState(""),[m,g]=w.useState(null),[y,_]=w.useState({nome:"",descricao:"",imagem:""});w.useEffect(()=>{if(!e)return;const O=kn(Ut(Ae,"game_items"),ya("status","==","vault"),zo("createdAt","desc")),X=On(O,Q=>{o(Q.docs.map(te=>({id:te.id,...te.data()})))});return()=>X()},[e]);const E=async O=>{if(O.preventDefault(),!y.nome)return alert("O item precisa de um nome!");try{const X={...y,updatedAt:qn()};m?(await dt(ze(Ae,"game_items",m),X),g(null)):await Lo(Ut(Ae,"game_items"),{...X,status:"vault",ownerId:null,valorGil:0,createdAt:qn()}),_({nome:"",descricao:"",imagem:""})}catch(X){alert("Erro ao forjar item."),console.error(X)}},T=async O=>{window.confirm("ATENO: Isso destruir o item permanentemente. Deseja continuar?")&&await Nr(ze(Ae,"game_items",O))},V=O=>{g(O.id),_(O)},U=()=>{g(null),_({nome:"",descricao:"",imagem:""})},L=s.filter(O=>O.nome.toLowerCase().includes(c.toLowerCase()));return u.jsxs(u.Fragment,{children:[u.jsx("button",{className:`forja-trigger-btn ${i?"vtt-dock-style":""}`,onClick:()=>n(!0),title:"Abrir Forja",children:u.jsx("img",{src:T5,alt:"Forja",onError:O=>{O.target.style.display="none",O.target.parentNode.innerText="FORJA"}})}),e&&u.jsx("div",{className:"forja-overlay",onClick:()=>n(!1),children:u.jsxs("div",{className:"forja-modal",onClick:O=>O.stopPropagation(),children:[u.jsxs("div",{className:"forja-header",children:[u.jsx("h2",{children:"A FORJA ANTIGA"}),u.jsx("button",{className:"close-btn",onClick:()=>n(!1),children:""})]}),u.jsxs("div",{className:"mestre-panel-forja",children:[u.jsx("h4",{style:{color:"#f44",margin:"0 0 10px 0"},children:"FORJAR NOVO ARTEFATO"}),u.jsxs("form",{onSubmit:E,className:"forja-form",children:[u.jsxs("div",{className:"row",children:[u.jsx("input",{placeholder:"Nome do Artefato",value:y.nome,onChange:O=>_({...y,nome:O.target.value}),className:"forja-input"}),u.jsx("input",{placeholder:"URL da Imagem (Imgur)",value:y.imagem,onChange:O=>_({...y,imagem:O.target.value}),className:"forja-input"})]}),u.jsx("textarea",{placeholder:"Descrio detalhada e lore do item...",value:y.descricao,onChange:O=>_({...y,descricao:O.target.value}),className:"forja-input area"}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"submit",className:"btn-forjar",children:m?"REFUNDIR (SALVAR)":"FORJAR ITEM"}),m&&u.jsx("button",{type:"button",onClick:U,className:"btn-cancel",children:"CANCELAR"})]})]})]}),u.jsx("div",{className:"search-bar-container-forja",children:u.jsx("input",{type:"text",placeholder:" Buscar nos arquivos da forja...",value:c,onChange:O=>f(O.target.value),className:"search-input-forja"})}),u.jsxs("div",{className:"forja-grid",children:[L.map(O=>u.jsxs("div",{className:"forja-item-card",children:[u.jsx("div",{className:"item-img",style:{backgroundImage:`url(${O.imagem||"https://via.placeholder.com/150?text=?"})`}}),u.jsxs("div",{className:"item-info",children:[u.jsx("h4",{children:O.nome}),O.ownerId&&u.jsxs("div",{className:"owner-tag",children:["COMPRADO POR: ",O.buyerName||"Jogador"]}),u.jsx("p",{className:"desc",children:O.descricao}),u.jsxs("small",{style:{color:"#666"},children:["Status: ",O.ownerId?"Cofre Pessoal":"Cofre Global"]})]}),u.jsxs("div",{className:"item-actions",children:[u.jsx("button",{className:"btn-icon edit",onClick:()=>V(O),title:"Editar",children:""}),u.jsx("button",{className:"btn-icon delete",onClick:()=>T(O.id),title:"Destruir",children:""})]})]},O.id)),L.length===0&&u.jsx("p",{className:"empty-msg",children:"A forja est fria. Nenhum item no cofre."})]})]})}),u.jsx("style",{children:`
        /* ESTILO PADRO (FIXO) */
        .forja-trigger-btn { position: fixed; bottom: 30px; right: 110px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #f44; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; color: #f44; font-weight: bold; font-size: 10px; }
        .forja-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 20px #f44; }
        .forja-trigger-btn img { width: 80%; height: 80%; object-fit: contain; }

        /* ESTILO QUANDO NO DOCK DO VTT (SOBRESCREVE O FIXO) */
        .forja-trigger-btn.vtt-dock-style {
            position: relative; 
            bottom: auto; 
            right: auto; 
            width: 50px; 
            height: 50px; 
            margin: 0; 
            z-index: auto;
            border: 2px solid #555;
            background: #111;
            box-shadow: 0 0 10px #000;
        }
        .forja-trigger-btn.vtt-dock-style:hover {
            border-color: #ffcc00;
            color: #ffcc00;
            transform: scale(1.1);
        }

        .forja-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 100000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .forja-modal { width: 800px; max-height: 90vh; background: #150a0a; border: 1px solid #f44; display: flex; flex-direction: column; box-shadow: 0 0 50px rgba(255, 68, 68, 0.2); border-radius: 8px; overflow: hidden; }
        .forja-header { background: linear-gradient(90deg, #2a0e0e, #000); padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #f44; }
        .forja-header h2 { margin: 0; color: #f44; font-family: serif; letter-spacing: 2px; text-shadow: 0 0 10px #f44; font-size: 24px; }
        .close-btn { background: transparent; border: none; color: #fff; font-size: 30px; cursor: pointer; }
        .mestre-panel-forja { background: rgba(255, 68, 68, 0.05); padding: 20px; border-bottom: 1px solid #333; }
        .forja-form { display: flex; flex-direction: column; gap: 10px; }
        .forja-form .row { display: flex; gap: 10px; }
        .forja-input { background: #000; border: 1px solid #522; color: #fff; padding: 10px; flex: 1; outline: none; font-family: serif; }
        .forja-input:focus { border-color: #f44; }
        .forja-input.area { height: 80px; resize: none; }
        .btn-forjar { flex: 1; background: #f44; border: none; padding: 12px; font-weight: bold; cursor: pointer; color: #fff; text-transform: uppercase; letter-spacing: 1px; }
        .btn-forjar:hover { background: #d00; box-shadow: 0 0 10px #d00; }
        .btn-cancel { background: #333; color: #fff; border: 1px solid #555; padding: 10px; cursor: pointer; }
        .search-bar-container-forja { padding: 15px; background: #000; border-bottom: 1px solid #333; }
        .search-input-forja { width: 100%; background: #111; border: 1px solid #522; color: #fff; padding: 12px; border-radius: 20px; text-align: center; outline: none; font-size: 16px; }
        .forja-grid { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; scrollbar-width: none; -ms-overflow-style: none; }
        .forja-grid::-webkit-scrollbar { display: none; }
        .forja-item-card { background: linear-gradient(90deg, rgba(40,10,10,0.9), rgba(0,0,0,0.8)); border: 1px solid #522; display: flex; align-items: center; padding: 10px; border-radius: 4px; transition: 0.2s; }
        .forja-item-card:hover { border-color: #f44; }
        .item-img { width: 70px; height: 70px; background-size: cover; background-position: center; border: 1px solid #633; margin-right: 15px; border-radius: 4px; background-color: #000; }
        .item-info { flex: 1; }
        .item-info h4 { margin: 0 0 5px 0; color: #fff; font-size: 18px; }
        .item-info .desc { margin: 0; color: #aaa; font-size: 12px; font-style: italic; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .owner-tag { background: #00f2ff; color: #000; font-size: 10px; font-weight: bold; padding: 2px 6px; border-radius: 4px; display: inline-block; margin-bottom: 4px; }
        .item-actions { display: flex; gap: 8px; margin-left: 15px; }
        .btn-icon { background: transparent; border: 1px solid #444; color: #fff; padding: 8px; cursor: pointer; border-radius: 4px; }
        .btn-icon:hover { background: #fff; color: #000; }
        .btn-icon.delete:hover { background: #f44; border-color: #f44; color: #fff; }
        .empty-msg { text-align: center; color: #666; margin-top: 50px; font-style: italic; }
      `})]})}const N5=["h-Basica.png","h-avanada.png","h-lendaria.png","h-magica.png","h-mestre.png","h-passiva.png","h-reacao.png","h-secreta.png"],R5=({isOpen:i,onClose:e,onSave:n,label:s})=>{const[o,c]=w.useState("");return i?u.jsx("div",{className:"img-modal-overlay",onClick:e,children:u.jsxs("div",{className:"img-modal-content",onClick:f=>f.stopPropagation(),children:[u.jsxs("h3",{children:["ALTERAR IMAGEM: ",s.toUpperCase()]}),u.jsx("input",{placeholder:"Cole o link da imagem (Imgur, Discord, etc)...",value:o,onChange:f=>c(f.target.value),autoFocus:!0}),u.jsxs("div",{className:"img-modal-actions",children:[u.jsx("button",{onClick:()=>{n(o),e()},className:"btn-confirm",children:"CONFIRMAR"}),u.jsx("button",{onClick:e,className:"btn-cancel",children:"CANCELAR"})]})]})}):null};function zg({characterData:i,isMaster:e,onClose:n}){const[s,o]=w.useState(i.character_sheet||{}),[c,f]=w.useState("geral"),[m,g]=w.useState(!1),[y,_]=w.useState(!1),[E,T]=w.useState(!1),[V,U]=w.useState(""),[L,O]=w.useState(null),[X,Q]=w.useState(!1),[te,ie]=w.useState([]),[pe,fe]=w.useState(null),[I,N]=w.useState(null),[j,P]=w.useState(null),[k,C]=w.useState(null),[R,Se]=w.useState(null);w.useRef(s.basic_info?.level),w.useEffect(()=>{i&&i.character_sheet&&o(i.character_sheet)},[i]);const ae=(F,xe)=>{if(!e)return;const he=JSON.parse(JSON.stringify(s)),_e=F.split(".");let Ie=he;for(let mt=0;mt<_e.length-1;mt++)Ie[_e[mt]]||(Ie[_e[mt]]={}),Ie=Ie[_e[mt]];Ie[_e[_e.length-1]]=xe,o(he),_(!0)},H=async()=>{try{const F=ze(Ae,"characters",i.uid||i.id);await dt(F,{character_sheet:s}),_(!1)}catch(F){console.error("Erro ao salvar:",F),alert("Erro ao salvar ficha.")}},re=(F,xe)=>{e&&(U(F),O(()=>xe),T(!0))},ye=(F,xe,he,_e)=>{e&&(P({skill:xe,index:_e}),C(he),F.dataTransfer.effectAllowed="move")},qe=F=>{F.preventDefault()},Je=(F,xe,he)=>{if(F.preventDefault(),!j||!e)return;const _e=JSON.parse(JSON.stringify(s)),Ie=_e.job_system[k==="primary"?"primary_class":"secondary_class"].skills,mt=_e.job_system[xe==="primary"?"primary_class":"secondary_class"].skills,[K]=Ie.splice(j.index,1);k===xe?Ie.splice(he,0,K):mt.splice(he,0,K),o(_e),_(!0),P(null),C(null)},M=F=>{const xe=()=>"_"+Math.random().toString(36).substr(2,9),he=JSON.parse(JSON.stringify(s));he.job_system[F].skills.push({id:xe(),name:"",cost:"",effect:"",xp:{current:0,max:100},master:!1,icon:"h-Basica.png"}),o(he),_(!0)},ee=(F,xe)=>{if(!window.confirm("Remover este slot de habilidade?"))return;const he=JSON.parse(JSON.stringify(s));he.job_system[F].skills.splice(xe,1),o(he),_(!0)},de=(F,xe)=>{const he=JSON.parse(JSON.stringify(s)),_e=he.job_system[F].skills[xe];_e.master=!0,_e.xp.current=_e.xp.max,o(he),_(!0)},be=F=>{if(!R)return;const{classType:xe,skillIndex:he}=R;ae(`job_system.${xe}.skills.${he}.icon`,F),Se(null)},me=async F=>{if(!e)return;fe(F);const xe=kn(Ut(Ae,"game_items"),ya("status","==","vault")),Ie=(await wm(xe)).docs.map(mt=>({id:mt.id,...mt.data()})).filter(mt=>!mt.ownerId||mt.ownerId===(i.uid||i.id));ie(Ie),Q(!0)},Ne=async F=>{const xe=JSON.parse(JSON.stringify(s));xe.equipment.slots[pe]={item_id:F.id,item_name:F.nome,item_img:F.imagem,description:F.descricao,effect:""},o(xe),_(!0);const he=ze(Ae,"game_items",F.id);await dt(he,{status:"equipped",ownerId:i.uid||i.id,slotIndex:pe,updatedAt:qn()}),Q(!1)},Te=async F=>{if(!e)return;const xe=s.equipment.slots[F];if(xe.item_id&&window.confirm("Isso devolver o item para a Forja (Cofre). Confirmar?")){const _e=ze(Ae,"game_items",xe.item_id);await dt(_e,{status:"vault",slotIndex:null,updatedAt:qn()})}const he=JSON.parse(JSON.stringify(s));he.equipment.slots[F]={item_name:"",item_img:"",effect:""},o(he),_(!0)},ft=async()=>{e&&(g(!0),setTimeout(async()=>{g(!1);const F=s.basic_info.level||1,xe=Math.floor(s.basic_info.experience.max*1.5),he=JSON.parse(JSON.stringify(s));he.basic_info.level=F+1,he.basic_info.experience.current=0,he.basic_info.experience.max=xe,o(he);const _e=ze(Ae,"characters",i.uid||i.id);await dt(_e,{character_sheet:he})},4e3))},tt=["FOR","INT","SOR","CAR","VEL","CONS"],Wt=100,Gt=85,ve=125,je=(F,xe,he)=>{const _e=Math.PI*2*xe/he-Math.PI/2,Ie=ve+Gt*(F/Wt)*Math.cos(_e),mt=ve+Gt*(F/Wt)*Math.sin(_e);return{x:Ie,y:mt}},it=tt.map((F,xe)=>{const he=s.attributes?.[F]?.value||0,{x:_e,y:Ie}=je(he,xe,tt.length);return`${_e},${Ie}`}).join(" "),Fe=F=>F&&F.length>5?{backgroundImage:`url(${F})`}:{backgroundColor:"#111",border:"1px solid #333"};return u.jsxs("div",{className:"ficha-overlay-fixed",children:[u.jsx(R5,{isOpen:E,onClose:()=>T(!1),onSave:L,label:V}),e&&y&&u.jsx("button",{className:"save-fab glowing",onClick:H,title:"Salvar Alteraes",children:""}),u.jsxs("div",{className:"ficha-container fade-in",children:[u.jsx("button",{className:"close-btn-ficha",onClick:n,children:""}),u.jsxs("div",{className:"ficha-header",children:[u.jsxs("div",{className:"header-left-group",style:{display:"flex",gap:"20px",alignItems:"flex-end"},children:[u.jsxs("div",{className:"guild-insignia-box",children:[u.jsx("span",{className:"header-label-top",children:"SIGNO"}),u.jsx("div",{className:`insignia-display ${e?"clickable":""}`,style:Fe(s.basic_info.guild_insignia),onClick:()=>re("Signo",F=>ae("basic_info.guild_insignia",F)),title:e?"Clique para alterar imagem":""})]}),u.jsxs("div",{className:"guild-item-box",children:[u.jsx("span",{className:"header-label-top",children:"RAA"}),u.jsx("div",{className:`special-display ${e?"clickable":""}`,style:Fe(s.basic_info.special_image),onClick:()=>re("Raa",F=>ae("basic_info.special_image",F)),title:e?"Clique para alterar imagem":""})]})]}),u.jsxs("div",{className:"header-info",children:[u.jsx("h1",{children:s.basic_info.character_name}),u.jsxs("span",{className:"sub-header",children:[s.basic_info.race," // ",i.class]}),u.jsxs("div",{className:"xp-container",children:[u.jsxs("div",{className:"lvl-box",children:[u.jsx("small",{children:"LVL"}),e?u.jsx("input",{className:"lvl-input",type:"number",value:s.basic_info.level,onChange:F=>ae("basic_info.level",Number(F.target.value))}):u.jsx("span",{children:s.basic_info.level})]}),u.jsxs("div",{className:"xp-bar-box",children:[u.jsxs("div",{className:"xp-text",children:["XP ",e?u.jsx("input",{className:"xp-mini-input",value:s.basic_info.experience.current,onChange:F=>ae("basic_info.experience.current",Number(F.target.value))}):s.basic_info.experience.current," / ",e?u.jsx("input",{className:"xp-mini-input",value:s.basic_info.experience.max,onChange:F=>ae("basic_info.experience.max",Number(F.target.value))}):s.basic_info.experience.max]}),u.jsx("div",{className:"xp-track",children:u.jsx("div",{className:"xp-fill",style:{width:`${Math.min(s.basic_info.experience.current/s.basic_info.experience.max*100,100)}%`}})})]}),e&&s.basic_info.experience.current>=s.basic_info.experience.max&&u.jsx("button",{className:"btn-levelup glowing",onClick:ft,children:" UP"})]})]}),u.jsxs("div",{className:"header-right-group",children:[u.jsxs("div",{className:"guild-item-box",children:[u.jsx("span",{className:"header-label-top",children:"CLASSE 1"}),u.jsx("div",{className:`special-display ${e?"clickable":""}`,style:Fe(s.basic_info.class1_image),onClick:()=>re("Classe 1",F=>ae("basic_info.class1_image",F)),title:e?"Clique para alterar imagem":""})]}),u.jsxs("div",{className:"guild-item-box",children:[u.jsx("span",{className:"header-label-top",children:"CLASSE 2"}),u.jsx("div",{className:`special-display ${e?"clickable":""}`,style:Fe(s.basic_info.class2_image),onClick:()=>re("Classe 2",F=>ae("basic_info.class2_image",F)),title:e?"Clique para alterar imagem":""})]}),u.jsxs("div",{className:"guild-item-box",children:[u.jsx("span",{className:"header-label-top",children:"RANK"}),u.jsx("div",{className:`rank-display ${e?"clickable":""}`,style:Fe(s.basic_info.guild_rank_image),onClick:()=>re("Rank",F=>ae("basic_info.guild_rank_image",F)),title:e?"Clique para alterar imagem":""})]})]})]}),u.jsxs("div",{className:"ficha-tabs",children:[u.jsx("button",{className:`tab-btn ${c==="geral"?"active":""}`,onClick:()=>f("geral"),children:"VISO GERAL"}),u.jsx("button",{className:`tab-btn ${c==="habilidades"?"active":""}`,onClick:()=>f("habilidades"),children:"GRIMRIO DE HABILIDADES"})]}),u.jsx("div",{className:"ficha-body",children:c==="geral"?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"col-attributes",children:[u.jsx("h3",{className:"section-title",children:"ATRIBUTOS"}),u.jsx("div",{className:"radar-wrapper",children:u.jsxs("svg",{width:"250",height:"250",viewBox:"0 0 250 250",children:[[20,40,60,80,100].map(F=>u.jsx("polygon",{points:tt.map((xe,he)=>{const{x:_e,y:Ie}=je(F,he,6);return`${_e},${Ie}`}).join(" "),fill:"none",stroke:"#333",strokeWidth:"1"},F)),u.jsx("polygon",{points:it,fill:"rgba(0, 242, 255, 0.2)",stroke:"#00f2ff",strokeWidth:"2"}),tt.map((F,xe)=>{const{x:he,y:_e}=je(120,xe,6),Ie=s.attributes?.[F]?.value||0;return u.jsx("foreignObject",{x:he-20,y:_e-15,width:"40",height:"30",children:u.jsxs("div",{className:"stat-box-chart",children:[u.jsx("span",{className:"sb-label",children:F}),e?u.jsx("input",{className:"sb-input",value:Ie,onChange:mt=>ae(`attributes.${F}.value`,Number(mt.target.value))}):u.jsx("span",{className:"sb-val",children:Ie})]})},F)})]})}),u.jsxs("div",{className:"secondary-stats",children:[u.jsxs("div",{className:"stat-row",children:[u.jsx("label",{children:"HP"}),u.jsxs("div",{className:"stat-bars-inputs",children:[e?u.jsx("input",{value:s.status.hp.current,onChange:F=>ae("status.hp.current",Number(F.target.value))}):u.jsx("span",{children:s.status.hp.current}),"/",e?u.jsx("input",{value:s.status.hp.max,onChange:F=>ae("status.hp.max",Number(F.target.value))}):u.jsx("span",{children:s.status.hp.max})]})]}),u.jsxs("div",{className:"stat-row",children:[u.jsx("label",{children:"MP"}),u.jsxs("div",{className:"stat-bars-inputs mp",children:[e?u.jsx("input",{value:s.status.mp.current,onChange:F=>ae("status.mp.current",Number(F.target.value))}):u.jsx("span",{children:s.status.mp.current}),"/",e?u.jsx("input",{value:s.status.mp.max,onChange:F=>ae("status.mp.max",Number(F.target.value))}):u.jsx("span",{children:s.status.mp.max})]})]}),u.jsxs("div",{className:"stat-row-simple",children:[u.jsxs("div",{className:"s-box",children:[u.jsx("img",{src:"/simbolos/ARM.png",alt:"ARM",className:"stat-icon-img"}),e?u.jsx("input",{value:s.status.arm.value,onChange:F=>ae("status.arm.value",Number(F.target.value))}):u.jsx("span",{children:s.status.arm.value})]}),u.jsxs("div",{className:"s-box",children:[u.jsx("img",{src:"/simbolos/RES.png",alt:"RES",className:"stat-icon-img"}),e?u.jsx("input",{value:s.status.res.value,onChange:F=>ae("status.res.value",Number(F.target.value))}):u.jsx("span",{children:s.status.res.value})]}),u.jsxs("div",{className:"s-box",children:[u.jsx("img",{src:"/simbolos/MOV.png",alt:"MOV",className:"stat-icon-img"}),e?u.jsx("input",{value:s.status.mov?.value||3,onChange:F=>ae("status.mov.value",Number(F.target.value))}):u.jsx("span",{children:s.status.mov?.value||3})]})]})]})]}),u.jsxs("div",{className:"col-center-equip",children:[u.jsx("div",{className:`char-image-frame ${e?"clickable":""}`,onClick:()=>re("Personagem",F=>ae("imgUrl",F)),title:e?"Clique para alterar foto":"",children:u.jsx("div",{className:"image-display",style:Fe(s.imgUrl)})}),u.jsx("div",{className:"equip-slots-overlay",children:[{id:0,label:"CABEA",style:{top:"-30px",left:"50%",transform:"translateX(-50%)"}},{id:1,label:"ACESS. 2",style:{top:"80px",right:"-15px"}},{id:2,label:"MO DIR.",style:{bottom:"120px",right:"-15px"}},{id:3,label:"MO ESQ.",style:{bottom:"120px",left:"-15px"}},{id:4,label:"ACESS. 1",style:{top:"80px",left:"-15px"}},{id:5,label:"CORPO",style:{bottom:"-20px",left:"60px"}},{id:6,label:"PS",style:{bottom:"-20px",right:"60px"}}].map((F,xe)=>u.jsxs("div",{className:"equip-slot",style:F.style,children:[u.jsx("div",{className:"slot-label",children:F.label}),u.jsxs("div",{className:"slot-square",children:[!s.equipment?.slots?.[xe]?.item_img&&e&&u.jsx("button",{className:"btn-plus-item",onClick:()=>me(xe),children:"+"}),s.equipment?.slots?.[xe]?.item_img?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"item-bg",style:Fe(s.equipment.slots[xe].item_img)}),u.jsx("button",{className:"btn-eye-item",onClick:()=>N(s.equipment.slots[xe]),children:""}),e&&u.jsx("button",{className:"btn-return-forge",title:"Devolver para Forja",onClick:()=>Te(xe),children:""})]}):!e&&u.jsx("span",{className:"empty-text",children:"Vazio"})]})]},xe))})]}),u.jsxs("div",{className:"col-inventory",children:[u.jsx("h3",{className:"section-title",children:"BOLSA & GIL"}),u.jsxs("div",{className:"gil-display",children:[u.jsx("span",{className:"coin-icon",children:""}),e?u.jsx("input",{type:"number",className:"gil-input-master",value:s.inventory.gil,onChange:F=>ae("inventory.gil",Number(F.target.value))}):u.jsx("span",{className:"gil-amount",children:s.inventory.gil}),u.jsx("span",{className:"currency",children:"GIL"})]}),u.jsxs("div",{className:"items-list",children:[u.jsx("h4",{children:"MOCHILA"}),u.jsxs("div",{className:"items-scroll",children:[(s.inventory.items||[]).map((F,xe)=>u.jsx("div",{className:"inv-row",children:e?u.jsxs(u.Fragment,{children:[u.jsx("input",{className:"inv-name",value:F.name,onChange:he=>ae(`inventory.items.${xe}.name`,he.target.value)}),u.jsx("input",{className:"inv-qtd",type:"number",value:F.quantity,onChange:he=>ae(`inventory.items.${xe}.quantity`,Number(he.target.value))}),u.jsx("button",{className:"btn-x-red",onClick:()=>{const he=s.inventory.items.filter((_e,Ie)=>Ie!==xe);ae("inventory.items",he)},children:""})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"i-name",children:F.name||"Slot Vazio"}),u.jsxs("span",{className:"i-qtd",children:["x",F.quantity||0]})]})},xe)),e&&u.jsx("button",{className:"add-item-btn",onClick:()=>ae("inventory.items",[...s.inventory.items||[],{name:"Novo Item",quantity:1}]),children:"+ Slot"})]})]})]})]}):u.jsxs("div",{className:"skills-tab-content",children:[["primary_class","secondary_class"].map((F,xe)=>u.jsxs("div",{className:"skills-col",children:[u.jsxs("h3",{className:`class-header ${F==="secondary_class"?"secondary":""}`,children:[e?u.jsx("input",{className:"class-name-input",value:s.job_system?.[F]?.name,onChange:he=>ae(`job_system.${F}.name`,he.target.value)}):s.job_system?.[F]?.name,e&&u.jsx("button",{className:"btn-add-skill-slot",onClick:()=>M(F),children:"+"})]}),u.jsx("div",{className:"skills-list",children:(s.job_system?.[F]?.skills||[]).map((he,_e)=>u.jsxs("div",{className:`skill-card ${F==="secondary_class"?"secondary":""} ${he.master?"mastered":""}`,draggable:e,onDragStart:Ie=>ye(Ie,he,F==="primary_class"?"primary":"secondary",_e),onDragOver:qe,onDrop:Ie=>Je(Ie,F==="primary_class"?"primary":"secondary",_e),children:[u.jsxs("div",{className:"skill-top",children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",flex:1},children:[he.master&&u.jsx("span",{className:"star-icon pulsing",children:""}),e?u.jsx("input",{placeholder:"Nome",value:he.name,onChange:Ie=>ae(`job_system.${F}.skills.${_e}.name`,Ie.target.value),className:"skill-name-in"}):u.jsx("strong",{className:"skill-name",children:he.name||"Slot Vazio"})]}),u.jsx("div",{className:`skill-type-icon ${e?"clickable":""}`,onClick:()=>e&&Se({classType:F,skillIndex:_e}),title:e?"Mudar Tipo":"",children:u.jsx("img",{src:`/simbolos/${he.icon||"h-Basica.png"}`,alt:"Tipo"})}),e&&u.jsx("button",{className:"btn-x-red-small",onClick:()=>ee(F,_e),children:""})]}),e?u.jsx("textarea",{placeholder:"Efeito...",value:he.effect,onChange:Ie=>ae(`job_system.${F}.skills.${_e}.effect`,Ie.target.value),className:"skill-desc-in"}):u.jsx("p",{className:"skill-desc",children:he.effect}),u.jsxs("div",{className:"skill-xp-box",children:[u.jsxs("div",{className:"xp-labels",children:[u.jsx("span",{children:"XP"}),e?u.jsxs("div",{style:{display:"flex"},children:[u.jsx("input",{className:"xp-tiny",value:he.xp?.current||0,onChange:Ie=>ae(`job_system.${F}.skills.${_e}.xp.current`,Number(Ie.target.value))})," /",u.jsx("input",{className:"xp-tiny",value:he.xp?.max||100,onChange:Ie=>ae(`job_system.${F}.skills.${_e}.xp.max`,Number(Ie.target.value))})]}):u.jsxs("span",{children:[he.xp?.current||0," / ",he.xp?.max||100]})]}),u.jsx("div",{className:`skill-track ${he.master?"grayed":""}`,children:u.jsx("div",{className:"skill-fill",style:{width:`${Math.min((he.xp?.current||0)/(he.xp?.max||100)*100,100)}%`}})}),e&&!he.master&&he.xp?.current>=he.xp?.max&&u.jsx("button",{className:"btn-masterize",onClick:()=>de(F,_e),children:"MASTERIZAR"})]})]},he.id))})]},F)),u.jsx("div",{className:"skills-col extra-col",children:u.jsxs("div",{className:"extra-abilities-box",children:[u.jsxs("div",{className:"ability-row",children:[u.jsx("label",{children:"REAO"}),e?u.jsx("input",{value:s.job_system?.reaction_ability?.name,onChange:F=>ae("job_system.reaction_ability.name",F.target.value),className:"ab-input"}):u.jsx("span",{children:s.job_system?.reaction_ability?.name||"-"})]}),u.jsxs("div",{className:"ability-row",children:[u.jsx("label",{children:"PASSIVA"}),e?u.jsx("input",{value:s.job_system?.passive_ability?.name,onChange:F=>ae("job_system.passive_ability.name",F.target.value),className:"ab-input"}):u.jsx("span",{children:s.job_system?.passive_ability?.name||"-"})]}),u.jsxs("div",{className:"bonus-row",children:[u.jsx("label",{children:"BNUS DE CLASSE"}),e?u.jsx("textarea",{value:s.job_system?.class_bonus?.value,onChange:F=>ae("job_system.class_bonus.value",F.target.value),className:"bonus-area"}):u.jsx("p",{children:s.job_system?.class_bonus?.value||"Nenhum"})]}),u.jsxs("div",{className:"bonus-row",style:{marginTop:"15px"},children:[u.jsx("label",{children:"TTULO"}),e?u.jsx("input",{className:"ab-input",style:{background:"rgba(0,0,0,0.5)",padding:"5px",width:"100%",border:"1px solid #444",borderRadius:"4px"},value:s.basic_info?.custom_title||"",onChange:F=>ae("basic_info.custom_title",F.target.value)}):u.jsx("p",{style:{background:"rgba(0,0,0,0.5)",padding:"8px",borderRadius:"4px",fontSize:"12px",color:"#ffcc00",fontWeight:"bold",margin:0},children:s.basic_info?.custom_title||"Sem Ttulo"})]})]})})]})}),R&&u.jsx("div",{className:"item-selector-overlay",onClick:()=>Se(null),children:u.jsxs("div",{className:"item-selector-box",onClick:F=>F.stopPropagation(),style:{height:"auto",maxHeight:"400px"},children:[u.jsx("h3",{children:"ESCOLHA O TIPO"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"10px",padding:"10px"},children:N5.map(F=>u.jsx("div",{style:{cursor:"pointer",border:"1px solid #333",padding:"5px",borderRadius:"4px",textAlign:"center",background:"#fff"},onClick:()=>be(F),children:u.jsx("img",{src:`/simbolos/${F}`,alt:F,style:{width:"40px",height:"auto"}})},F))}),u.jsx("button",{className:"btn-cancel-modal",onClick:()=>Se(null),children:"CANCELAR"})]})}),X&&u.jsx("div",{className:"item-selector-overlay",onClick:()=>Q(!1),children:u.jsxs("div",{className:"item-selector-box",onClick:F=>F.stopPropagation(),children:[u.jsx("h3",{children:"EQUIPAR DO COFRE"}),u.jsxs("div",{className:"forge-list-scroll",children:[te.length===0&&u.jsx("p",{className:"empty-text",children:"Nenhum item disponvel na Forja."}),te.map(F=>u.jsxs("div",{className:"forge-item-row",onClick:()=>Ne(F),children:[u.jsx("div",{className:"forge-thumb",style:Fe(F.imagem)}),u.jsxs("div",{children:[u.jsx("strong",{children:F.nome}),F.ownerId&&u.jsx("small",{style:{color:"#0f0"},children:" (Seu Item)"}),u.jsxs("p",{children:[F.descricao.substring(0,40),"..."]})]})]},F.id))]}),u.jsx("button",{className:"btn-cancel-modal",onClick:()=>Q(!1),children:"CANCELAR"})]})}),I&&u.jsx("div",{className:"item-selector-overlay",onClick:()=>N(null),children:u.jsxs("div",{className:"item-details-box",onClick:F=>F.stopPropagation(),children:[u.jsx("div",{className:"detail-img-large",style:Fe(I.item_img)}),u.jsx("h3",{children:I.item_name}),u.jsx("p",{className:"details-desc",children:I.description||"Sem descrio"}),u.jsxs("p",{className:"details-effect",children:["Efeito: ",I.effect||"Nenhum"]}),u.jsx("button",{className:"btn-cancel-modal",onClick:()=>N(null),children:"FECHAR"})]})}),m&&u.jsx("div",{className:"level-up-overlay",children:u.jsx("h1",{className:"levelup-text",children:"LEVEL UP!"})})]}),u.jsx("style",{children:`
        /* GERAL */
        .ficha-overlay-fixed { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.95); z-index: 200000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(8px); }
        .ficha-container { width: 1200px; height: 850px; max-width: 95vw; max-height: 98vh; background: #050a10; border: 2px solid #ffcc00; display: flex; flex-direction: column; position: relative; box-shadow: 0 0 50px rgba(255, 204, 0, 0.2); border-radius: 8px; overflow: hidden; font-family: 'Cinzel', serif; color: #fff; }
        .close-btn-ficha { position: absolute; top: 10px; right: 15px; background: transparent; border: none; color: #f44; font-size: 24px; cursor: pointer; z-index: 200; font-weight: bold; }
        .save-fab { position: absolute; bottom: 30px; right: 30px; width: 60px; height: 60px; border-radius: 50%; background: #222; border: 2px solid #444; color: #fff; font-size: 30px; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 300; transition: 0.3s; box-shadow: 0 0 15px #000; }
        .save-fab:hover { background: #00f2ff; border-color: #fff; color: #000; box-shadow: 0 0 30px #00f2ff; }
        .save-fab.glowing { animation: pulseSave 1.5s infinite; border-color: #00f2ff; color: #00f2ff; }
        @keyframes pulseSave { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        /* HEADER */
        .ficha-header { padding: 25px 30px 10px 30px; background: linear-gradient(90deg, #101020, #000); border-bottom: 2px solid #333; display: flex; justify-content: space-between; align-items: center; height: 140px; position: relative; }
        .guild-insignia-box, .guild-rank-box, .guild-item-box { display: flex; flex-direction: column; align-items: center; width: 80px; position: relative; padding-top: 10px; }
        .header-right-group { display: flex; gap: 20px; align-items: flex-end; }
        .header-label-top { font-size: 10px; color: #ffcc00; font-weight: bold; letter-spacing: 1px; margin-bottom: 2px; }
        .insignia-display, .rank-display, .special-display { width: 70px; height: 70px; background-size: contain; background-repeat: no-repeat; background-position: center; border: 1px solid #333; border-radius: 50%; background-color: #000; position: relative; transition: 0.2s; }
        .special-display { border-radius: 12px; }
        .clickable:hover { cursor: pointer; border-color: #ffcc00; box-shadow: 0 0 10px #ffcc00; }
        .header-info { flex: 1; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .header-info h1 { margin: 0; color: #ffcc00; font-size: 36px; letter-spacing: 4px; text-shadow: 0 0 10px rgba(255,204,0,0.3); }
        .sub-header { color: #00f2ff; font-size: 14px; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 15px; }
        .xp-container { display: flex; align-items: center; gap: 15px; width: 60%; margin-top: -5px; }
        .lvl-box { display: flex; flex-direction: column; align-items: center; background: #222; border: 1px solid #ffcc00; padding: 5px 12px; border-radius: 4px; box-shadow: 0 0 10px rgba(255,204,0,0.2); }
        .lvl-box small { font-size: 8px; color: #ffcc00; }
        .lvl-box span { font-size: 24px; font-weight: bold; line-height: 1; }
        .lvl-input { width: 40px; background: transparent; border: none; color: #fff; font-size: 24px; font-weight: bold; text-align: center; }
        .xp-bar-box { flex: 1; display: flex; flex-direction: column; }
        .xp-text { text-align: right; font-size: 10px; color: #aaa; margin-bottom: 2px; }
        .xp-mini-input { background: #111; border: none; color: #fff; width: 30px; text-align: center; font-size: 10px; }
        .xp-track { width: 100%; height: 8px; background: #111; border: 1px solid #444; border-radius: 4px; overflow: hidden; }
        .xp-fill { height: 100%; background: linear-gradient(90deg, #00f2ff, #0088ff); transition: width 0.5s; }
        .btn-levelup { background: linear-gradient(to bottom, #ffcc00, #ff8800); border: 2px solid #fff; color: #000; font-weight: bold; padding: 5px 15px; cursor: pointer; border-radius: 20px; animation: glow 1s infinite alternate; font-family: 'Cinzel', serif; font-size: 10px; }
        @keyframes glow { from { box-shadow: 0 0 10px #ffcc00; } to { box-shadow: 0 0 30px #ffcc00; transform: scale(1.05); } }
        .ficha-tabs { display: flex; background: #111; border-bottom: 1px solid #333; margin-top: 0; }
        .tab-btn { flex: 1; background: transparent; border: none; padding: 15px; color: #666; font-family: 'Cinzel', serif; font-size: 16px; cursor: pointer; transition: 0.3s; border-bottom: 3px solid transparent; }
        .tab-btn:hover { color: #fff; background: rgba(255,255,255,0.05); }
        .tab-btn.active { color: #ffcc00; border-bottom: 3px solid #ffcc00; background: rgba(255, 204, 0, 0.05); }
        .ficha-body { flex: 1; display: flex; padding: 30px 20px; gap: 20px; overflow: hidden; position: relative; }
        
        /* ESTILOS DE HABILIDADES */
        .skills-tab-content { display: flex; width: 100%; height: 100%; gap: 20px; }
        .skills-col { flex: 1; display: flex; flex-direction: column; background: rgba(0,0,0,0.3); border: 1px solid #333; padding: 10px; border-radius: 4px; overflow: hidden; }
        .skills-col.extra-col { flex: 0.5; }
        .class-header { color: #00f2ff; font-size: 16px; border-bottom: 2px solid #00f2ff; padding-bottom: 5px; margin-bottom: 10px; text-transform: uppercase; display: flex; justify-content: space-between; align-items: center; }
        .class-header.secondary { color: #aaa; border-color: #666; }
        .class-name-input { background: transparent; border: none; color: inherit; font-size: inherit; font-weight: bold; width: 80%; }
        .btn-add-skill-slot { background: transparent; border: 1px solid #555; color: #fff; width: 20px; height: 20px; cursor: pointer; font-size: 14px; line-height: 1; }
        
        .skills-list { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; padding-right: 5px; 
            scrollbar-width: none; 
        }
        .skills-list::-webkit-scrollbar { display: none; }
        
        .skill-card { background: rgba(0, 30, 60, 0.4); border: 1px solid #005577; padding: 8px; border-radius: 4px; cursor: grab; transition: 0.2s; position: relative; }
        .skill-card.secondary { background: rgba(30, 30, 30, 0.4); border-color: #444; }
        .skill-card:active { cursor: grabbing; border-color: #ffcc00; }
        .skill-card.mastered { border-color: #ffd700; background: rgba(50, 40, 0, 0.4); }
        .skill-top { display: flex; justify-content: space-between; margin-bottom: 5px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; align-items: flex-start; }
        .skill-name { color: #ffcc00; font-size: 13px; }
        .skill-cost { color: #00f2ff; font-size: 11px; font-weight: bold; margin-left: auto; margin-right: 10px; }
        .skill-desc { font-size: 11px; color: #ccc; line-height: 1.3; margin: 0 0 5px 0; }
        .skill-name-in, .skill-cost-in { background: transparent; border: none; color: #fff; font-size: 12px; }
        .skill-name-in { flex: 1; font-weight: bold; color: #ffcc00; }
        .skill-cost-in { width: 40px; text-align: right; color: #00f2ff; margin-right: 10px; }
        .skill-desc-in { width: 100%; background: transparent; border: none; color: #ccc; font-size: 11px; resize: none; font-family: sans-serif; height: 30px; }
        
        /* ICONE NO GRID PEQUENO E BRANCO */
        .skill-type-icon { width: 30px; height: 30px; margin-left: 5px; background: #fff; padding: 2px; border-radius: 4px; display: flex; align-items: center; justify-content: center; }
        .skill-type-icon img { width: 100%; height: 100%; object-fit: contain; }
        
        .skill-xp-box { margin-top: 5px; background: rgba(0,0,0,0.3); padding: 4px; border-radius: 3px; }
        .xp-labels { display: flex; justify-content: space-between; font-size: 9px; color: #888; margin-bottom: 2px; }
        .xp-tiny { background: transparent; border: none; color: #aaa; width: 20px; text-align: center; font-size: 9px; }
        .skill-track { width: 100%; height: 5px; background: #222; border-radius: 2px; overflow: hidden; }
        .skill-track.grayed .skill-fill { background: #888; }
        .skill-fill { height: 100%; background: #00f2ff; transition: width 0.3s; }
        .btn-masterize { width: 100%; margin-top: 4px; background: linear-gradient(to right, #d4af37, #b8860b); border: none; color: #000; font-size: 9px; font-weight: bold; cursor: pointer; padding: 2px; border-radius: 2px; }
        .star-icon { color: #ffd700; font-size: 14px; margin-right: 5px; text-shadow: 0 0 5px #ffd700; }
        .pulsing { animation: pulseStar 1.5s infinite; }
        @keyframes pulseStar { 0% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.3); opacity: 1; } 100% { transform: scale(1); opacity: 0.8; } }
        .btn-x-red-small { color: #f44; background: none; border: none; font-weight: bold; cursor: pointer; font-size: 12px; margin-left: 5px; }

        /* OUTRAS COLUNAS */
        .col-attributes { width: 300px; display: flex; flex-direction: column; align-items: center; border-right: 1px solid #333; padding-right: 20px; }
        .col-center-equip { flex: 1; position: relative; display: flex; justify-content: center; align-items: center; }
        .col-inventory { width: 280px; border-left: 1px solid #333; padding-left: 20px; display: flex; flex-direction: column; }
        .section-title { color: #aaa; font-size: 14px; border-bottom: 1px solid #00f2ff; width: 100%; text-align: center; margin-bottom: 15px; padding-bottom: 5px; }
        .radar-wrapper { position: relative; margin-bottom: 20px; }
        .stat-box-chart { background: #000; border: 1px solid #ffcc00; width: 40px; height: 30px; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 4px; box-shadow: 0 0 5px #000; }
        .sb-label { font-size: 8px; color: #aaa; }
        .sb-val { font-size: 12px; font-weight: bold; color: #fff; }
        .sb-input { width: 100%; height: 100%; background: transparent; border: none; color: #ffcc00; text-align: center; font-weight: bold; padding: 0; font-size: 12px; }
        .secondary-stats { width: 100%; }
        .stat-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
        .stat-row label { font-weight: bold; color: #ffcc00; width: 30px; }
        .stat-bars-inputs { flex: 1; background: rgba(255,0,0,0.1); border: 1px solid #522; padding: 5px; display: flex; align-items: center; justify-content: center; gap: 5px; color: #fff; border-radius: 4px; }
        .stat-bars-inputs.mp { background: rgba(0,0,255,0.1); border-color: #225; }
        .stat-bars-inputs input { background: transparent; border: none; color: #fff; width: 40px; text-align: center; font-family: 'serif'; font-weight: bold; }
        .stat-row-simple { display: flex; justify-content: space-between; gap: 10px; margin-top: 15px; }
        .s-box { flex: 1; background: #111; border: 1px solid #444; padding: 10px; text-align: center; border-radius: 4px; display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .s-box label { display: block; font-size: 10px; color: #888; margin-bottom: 5px; }
        .s-box input { background: transparent; border: none; color: #fff; text-align: center; font-size: 18px; width: 100%; font-weight: bold; }
        .s-box span { font-size: 18px; font-weight: bold; }
        .stat-icon-img { width: 30px; height: 30px; object-fit: contain; }
        .char-image-frame { width: 300px; height: 450px; border: 2px solid #333; position: relative; background: #000; border-radius: 150px; overflow: hidden; box-shadow: inset 0 0 50px #000; margin-top: -20px; z-index: 1; transition: 0.2s; }
        .char-image-frame.clickable:hover { border-color: #ffcc00; cursor: pointer; }
        .image-display { width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.8; }
        .equip-slots-overlay { position: absolute; width: 300px; height: 450px; left: 50%; top: 50%; transform: translate(-50%, -50%); pointer-events: none; z-index: 2; margin-top: -10px; }
        .equip-slot { position: absolute; width: 80px; display: flex; flex-direction: column; align-items: center; pointer-events: auto; }
        .slot-label { font-size: 9px; color: #00f2ff; text-shadow: 0 0 2px #000; margin-bottom: 2px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        .slot-square { width: 60px; height: 60px; background: rgba(0, 10, 30, 0.9); border: 1px solid #ffcc00; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 15px rgba(0,0,0,0.8); position: relative; overflow: hidden; border-radius: 4px; }
        .item-bg { width: 100%; height: 100%; background-size: cover; background-position: center; position: absolute; top: 0; left: 0; }
        .empty-text { font-size: 9px; color: #666; text-align: center; line-height: 1; padding: 2px; }
        .btn-plus-item { background: transparent; color: #ffcc00; font-size: 24px; border: none; cursor: pointer; font-weight: bold; }
        .btn-eye-item { position: absolute; bottom: 2px; right: 2px; font-size: 10px; background: rgba(0,0,0,0.8); color: #fff; border: none; border-radius: 3px; cursor: pointer; padding: 2px 4px; z-index: 5; }
        .btn-return-forge { position: absolute; top: 2px; left: 2px; font-size: 10px; background: rgba(200, 0, 0, 0.8); color: #fff; border: none; border-radius: 3px; cursor: pointer; padding: 2px 4px; z-index: 5; }
        .gil-display { background: linear-gradient(90deg, rgba(255,204,0,0.1), transparent); border: 1px solid #ffcc00; padding: 15px; border-radius: 4px; display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .coin-icon { font-size: 20px; }
        .gil-amount { font-size: 24px; font-weight: bold; color: #fff; flex: 1; text-align: right; }
        .gil-input-master { background: transparent; border: none; color: #fff; font-size: 24px; font-weight: bold; width: 100%; text-align: right; outline: none; }
        input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        .currency { font-size: 10px; color: #ffcc00; font-weight: bold; }
        .items-list { flex: 1; display: flex; flex-direction: column; }
        .items-list h4 { color: #888; font-size: 12px; border-bottom: 1px solid #444; padding-bottom: 5px; margin-bottom: 10px; }
        .items-scroll { flex: 1; overflow-y: auto; padding-right: 5px; }
        .inv-row { display: flex; justify-content: space-between; border-bottom: 1px solid #222; padding: 8px 0; font-size: 12px; align-items: center; }
        .inv-name { background: transparent; border: none; color: #ddd; flex: 1; font-family: 'serif'; }
        .inv-qtd { background: transparent; border: none; color: #00f2ff; width: 40px; text-align: right; font-weight: bold; }
        .btn-x-red { color: #f44; background: none; border: none; cursor: pointer; font-weight: bold; margin-left: 5px; }
        .i-name { color: #ddd; }
        .i-qtd { color: #00f2ff; font-weight: bold; }
        .add-item-btn { width: 100%; background: #222; border: 1px dashed #555; color: #888; padding: 5px; cursor: pointer; margin-top: 10px; font-size: 10px; }
        .img-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 300000; display: flex; align-items: center; justify-content: center; }
        .img-modal-content { background: #111; border: 1px solid #ffcc00; padding: 25px; width: 400px; border-radius: 8px; text-align: center; box-shadow: 0 0 30px rgba(255,204,0,0.2); }
        .img-modal-content h3 { color: #ffcc00; margin-top: 0; font-family: 'Cinzel', serif; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 20px; }
        .img-modal-content input { width: 100%; padding: 12px; background: #000; border: 1px solid #444; color: #fff; margin-bottom: 20px; outline: none; border-radius: 4px; }
        .img-modal-content input:focus { border-color: #00f2ff; }
        .img-modal-actions { display: flex; gap: 15px; justify-content: center; }
        .btn-confirm { background: #00f2ff; color: #000; padding: 10px 25px; border: none; cursor: pointer; font-weight: bold; border-radius: 4px; transition: 0.2s; }
        .btn-confirm:hover { background: #fff; box-shadow: 0 0 15px #00f2ff; }
        .btn-cancel { background: #333; color: #fff; padding: 10px 25px; border: none; cursor: pointer; border-radius: 4px; }
        .btn-cancel:hover { background: #444; }
        .item-selector-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 300000; display: flex; align-items: center; justify-content: center; }
        .item-selector-box { width: 400px; height: 500px; background: #111; border: 1px solid #ffcc00; padding: 20px; display: flex; flex-direction: column; border-radius: 8px; }
        .item-selector-box h3 { color: #ffcc00; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0; }
        .forge-list-scroll { flex: 1; overflow-y: auto; margin-bottom: 15px; }
        .forge-item-row { display: flex; align-items: center; padding: 10px; border-bottom: 1px solid #333; cursor: pointer; }
        .forge-item-row:hover { background: rgba(255,255,255,0.1); }
        .forge-item-row img { width: 40px; height: 40px; border: 1px solid #555; margin-right: 10px; }
        .forge-thumb { width: 40px; height: 40px; border: 1px solid #555; margin-right: 10px; background-size: cover; background-position: center; }
        .forge-item-row strong { color: #00f2ff; display: block; font-size: 12px; }
        .forge-item-row p { font-size: 10px; color: #aaa; margin: 0; }
        .btn-cancel-modal { width: 100%; padding: 10px; background: #333; color: #fff; border: none; cursor: pointer; }
        .item-details-box { width: 300px; background: #000; border: 1px solid #00f2ff; padding: 20px; text-align: center; border-radius: 8px; }
        .item-details-box img { width: 80px; height: 80px; border: 1px solid #fff; margin-bottom: 10px; }
        .detail-img-large { width: 80px; height: 80px; border: 1px solid #fff; margin: 0 auto 10px auto; background-size: cover; background-position: center; }
        .item-details-box h3 { color: #00f2ff; margin: 0 0 10px 0; }
        .details-desc { font-size: 12px; color: #ccc; margin-bottom: 10px; font-style: italic; }
        .details-effect { font-size: 12px; color: #ffcc00; font-weight: bold; margin-bottom: 20px; }
        .extra-abilities-box { margin-top: 20px; border-top: 2px solid #444; padding-top: 15px; }
        .ability-row { display: flex; align-items: center; margin-bottom: 10px; background: #222; padding: 8px; border-radius: 4px; border-left: 3px solid #ffcc00; }
        .ability-row label { font-size: 10px; color: #888; width: 60px; font-weight: bold; }
        .ability-row span { font-size: 12px; color: #fff; font-weight: bold; }
        .ab-input { background: transparent; border: none; color: #fff; font-weight: bold; flex: 1; font-size: 12px; }
        .bonus-row { margin-top: 10px; }
        .bonus-row label { font-size: 10px; color: #00f2ff; display: block; margin-bottom: 5px; font-weight: bold; }
        .bonus-row p { font-size: 12px; color: #ddd; font-style: italic; background: rgba(0,0,0,0.5); padding: 8px; border-radius: 4px; }
        .bonus-area { width: 100%; height: 60px; background: rgba(0,0,0,0.5); border: 1px solid #444; color: #ddd; font-size: 12px; padding: 5px; resize: none; }
        .level-up-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 100; display: flex; align-items: center; justify-content: center; animation: fadeOverlay 4s forwards; pointer-events: none; }
        .levelup-text { font-size: 80px; color: #ffcc00; text-shadow: 0 0 50px #ffcc00, 0 0 20px #fff; animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); letter-spacing: 5px; }
        @keyframes popIn { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes fadeOverlay { 0% { opacity: 1; } 80% { opacity: 1; } 100% { opacity: 0; } }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
      `})]})}const C5="/assets/ficha-icon-Ds6_MepT.png",n_=({expiry:i})=>{const[e,n]=w.useState("");return w.useEffect(()=>{const s=setInterval(()=>{const o=new Date().getTime(),c=new Date(i).getTime()-o;if(c<0)n("EXPIRADA"),clearInterval(s);else{const f=Math.floor(c/864e5),m=Math.floor(c%(1e3*60*60*24)/(1e3*60*60)),g=Math.floor(c%(1e3*60*60)/(1e3*60));n(`${f}d ${m}h ${g}m`)}},1e3);return()=>clearInterval(s)},[i]),u.jsxs("span",{className:"mission-timer",children:[" ",e]})};function I5(){const i=Yi(),[e,n]=w.useState(null),[s,o]=w.useState([]),[c,f]=w.useState([]),[m,g]=w.useState([]),[y,_]=w.useState([]),[E,T]=w.useState(!0),[V,U]=w.useState(!1),[L,O]=w.useState(!1),[X,Q]=w.useState(!1),[te,ie]=w.useState(!1),[pe,fe]=w.useState(!1),[I,N]=w.useState(null),[j,P]=w.useState(null),[k,C]=w.useState(null),[R,Se]=w.useState(null),[ae,H]=w.useState(null),[re,ye]=w.useState(""),[qe,Je]=w.useState(""),[M,ee]=w.useState([]),[de,be]=w.useState([]),[me,Ne]=w.useState({nome:"",local:"",contratante:"",descricaoMissao:"",objetivosMissao:"",requisitos:"",grupo:"",recompensa:"",rank:"E",imagem:"",duracao:"",gilRecompensa:""}),[Te,ft]=w.useState({missaoId:"",dataInicio:"",mapas:[],cenarios:[],monstros:[],npcs:[],jogadores:[]}),[tt,Wt]=w.useState(""),[Gt,ve]=w.useState("mapas"),[je,it]=w.useState(()=>localStorage.getItem("mestreAssinatura")||"Narrador");w.useEffect(()=>{localStorage.setItem("mestreAssinatura",je)},[je]),w.useEffect(()=>{const K=setTimeout(()=>{U(!0)},2e3);return()=>clearTimeout(K)},[]),w.useEffect(()=>{zt&&zt.pause();const K=rf(jt,Me=>{if(Me){n(Me);const gt=kn(Ut(Ae,"missoes"),ya("mestreId","==",Me.uid),zo("createdAt","desc")),$t=kn(Ut(Ae,"resenhas"),ya("mestreId","==",Me.uid),zo("createdAt","desc")),W=kn(Ut(Ae,"sessoes"),ya("mestreId","==",Me.uid),zo("dataInicio","asc")),Pe=kn(Ut(Ae,"characters")),$e=On(gt,ht=>o(ht.docs.map(He=>({id:He.id,...He.data()})))),ce=On($t,ht=>f(ht.docs.map(He=>({id:He.id,...He.data()})))),Be=On(W,ht=>g(ht.docs.map(He=>({id:He.id,...He.data()})))),xt=On(Pe,ht=>{_(ht.docs.map(He=>({id:He.id,...He.data()}))),T(!1)});return()=>{$e(),ce(),Be(),xt()}}else T(!1),i("/login")});return()=>K()},[i]),w.useEffect(()=>{if(I){const K=y.find(Me=>Me.id===I.id);K&&N(K)}},[y]);const Fe=async K=>{if(K.preventDefault(),!!e)try{const Me=(me.duracao.match(/(\d+)w/)||[0,0])[1]*6048e5+(me.duracao.match(/(\d+)d/)||[0,0])[1]*864e5+(me.duracao.match(/(\d+)h/)||[0,0])[1]*36e5;await Lo(Ut(Ae,"missoes"),{...me,mestreNome:je,mestreId:e.uid,createdAt:qn(),expiraEm:new Date(Date.now()+(Me||36e5)).toISOString()}),O(!1),Ne({nome:"",local:"",contratante:"",descricaoMissao:"",objetivosMissao:"",requisitos:"",grupo:"",recompensa:"",rank:"E",imagem:"",duracao:"",gilRecompensa:""})}catch(Me){alert("Erro ao forjar cartaz: "+Me.message)}},F=async()=>{if(!qe||!re||!e)return alert("Preencha ttulo e contedo!");try{const K=new Date;K.setDate(K.getDate()+7),await Lo(Ut(Ae,"resenhas"),{titulo:qe,conteudo:re,mestre:je,mestreId:e.uid,destinatarios:M,createdAt:qn(),expiraEm:K.toISOString()}),Q(!1),ye(""),Je(""),ee([])}catch{alert("Erro ao publicar.")}},xe=async(K,Me)=>{if(window.confirm(`Remover ${Me.nome} da misso?`)){const gt=ze(Ae,"missoes",K);await dt(gt,{candidatos:Ig(Me)})}},he=()=>{tt&&(ft(K=>({...K,[Gt]:[...K[Gt],tt]})),Wt(""))},_e=(K,Me)=>{ft(gt=>({...gt,[K]:gt[K].filter(($t,W)=>W!==Me)}))},Ie=async K=>{if(K.preventDefault(),!Te.missaoId||!Te.dataInicio||!e)return alert("Selecione a misso e o horrio!");try{const Me=s.find(W=>W.id===Te.missaoId),gt=new Date(Te.dataInicio),$t=new Date(gt.getTime()+1440*60*1e3);await Lo(Ut(Ae,"sessoes"),{missaoId:Te.missaoId,missaoNome:Me?Me.nome:"Misso Desconhecida",mestreId:e.uid,dataInicio:Te.dataInicio,expiraEm:$t.toISOString(),participantes:de,mapas:Te.mapas,cenarios:Te.cenarios,monstros:Te.monstros,npcs:Te.npcs,jogadores:Te.jogadores,connected_players:[],dm_online:!1,createdAt:qn()}),ie(!1),ft({missaoId:"",dataInicio:"",mapas:[],cenarios:[],monstros:[],npcs:[],jogadores:[]}),be([]),alert("Sesso criada com sucesso!")}catch(Me){alert("Erro ao criar sesso: "+Me.message)}},mt=K=>{i("/mestre-vtt")};return E||!V?u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",background:"radial-gradient(circle at center, #001a33 0%, #000000 100%)",color:"#ffcc00",fontFamily:"Cinzel, serif",zIndex:9999,position:"fixed",top:0,left:0},children:[u.jsx("img",{src:Cf,alt:"Carregando...",style:{width:"120px",marginBottom:"20px"}}),u.jsx("p",{style:{fontSize:"18px",letterSpacing:"4px",textTransform:"uppercase",animation:"pulseText 2s infinite ease-in-out"},children:"Sintonizando ter..."}),u.jsx("style",{children:`
          @keyframes pulseText { 
            0% { opacity: 0.4; transform: scale(0.98); } 
            50% { opacity: 1; transform: scale(1.02); } 
            100% { opacity: 0.4; transform: scale(0.98); } 
          }
        `})]}):u.jsxs("div",{className:"mestre-container",children:[u.jsx("div",{className:"mestre-bg-image-full",style:{backgroundImage:`url(${nA})`}}),u.jsxs("div",{className:"mestre-content",children:[u.jsxs("div",{className:"top-bar-flex",children:[u.jsx("h1",{className:"ff-title",children:"HUB DO NARRADOR"}),u.jsxs("div",{className:"mestre-identity-box ff-card fade-in",children:[u.jsx("label",{children:"ASSINATURA DO MESTRE:"}),u.jsx("input",{type:"text",value:je,onChange:K=>it(K.target.value)})]})]}),u.jsxs("div",{className:"mestre-grid",children:[u.jsxs("div",{className:"ff-card board-column",children:[u.jsxs("div",{className:"card-header no-border",children:[u.jsx("h3",{children:"QUADRO DE MISSES"}),u.jsxs("button",{className:"ff-add-btn",onClick:()=>O(!0),children:[u.jsx("span",{children:"+"})," ADICIONAR CARTAZ"]})]}),u.jsx("div",{className:"mission-scroll",children:s.map(K=>{const Me=parseInt(K.grupo)||0,gt=K.candidatos?K.candidatos.length:0,$t=Me>0?gt/Me*100:0,W=gt>=Me&&Me>0;return u.jsxs("div",{className:`mission-poster rank-${K.rank}`,children:[u.jsx("div",{className:"poster-rank-label-fixed",children:K.rank}),u.jsxs("span",{className:"mestre-tag",children:["Narrador: ",K.mestreNome]}),u.jsx("h4",{children:K.nome}),u.jsxs("p",{className:"gil-recompensa",children:[" Recompensa: ",K.gilRecompensa," Gil"]}),u.jsxs("div",{className:"vagas-container",children:[u.jsxs("div",{className:"vagas-labels",children:[u.jsx("span",{children:"JOGADORES:"}),u.jsxs("span",{style:{color:W?"#f44":"#0f0"},children:[gt," / ",Me]})]}),u.jsx("div",{className:"vagas-track",children:u.jsx("div",{className:"vagas-fill",style:{width:`${$t}%`,background:W?"#f44":"#00f2ff"}})})]}),K.candidatos&&K.candidatos.length>0&&u.jsxs("div",{className:"candidates-mini-box",children:[u.jsx("strong",{children:"Candidatos:"}),K.candidatos.map(Pe=>u.jsxs("div",{className:"cand-row-master",children:[u.jsxs("span",{style:{color:Pe.isLeader?"#ffcc00":"#ccc"},children:[Pe.isLeader&&""," ",Pe.nome," (",Pe.classe,")"]}),u.jsx("button",{className:"btn-kick-x",title:"Remover Jogador",onClick:()=>xe(K.id,Pe),children:""})]},Pe.uid))]}),u.jsx(n_,{expiry:K.expiraEm}),u.jsxs("div",{className:"poster-actions",children:[u.jsx("button",{className:"btn-cyan",onClick:()=>Se(K.imagem),children:"CARTAZ"}),u.jsx("button",{className:"btn-cyan",onClick:()=>P(K),children:"DETALHES"}),u.jsx("button",{className:"btn-red",onClick:()=>Nr(ze(Ae,"missoes",K.id)),children:"EXCLUIR"})]})]},K.id)})})]}),u.jsxs("div",{className:"ff-card sanchez-card board-column",children:[u.jsxs("div",{className:"sanchez-header-top no-border",children:[u.jsx("h3",{children:"RESENHA DO SANCHES"}),u.jsx("button",{className:"ff-add-btn-gold-small",onClick:()=>Q(!0),children:"+ CRIAR NOVA RESENHA"})]}),u.jsx("div",{className:"mission-scroll",children:c.map(K=>u.jsxs("div",{className:"resenha-item-card",children:[u.jsx("h4",{children:K.titulo}),u.jsx(n_,{expiry:K.expiraEm}),u.jsxs("div",{className:"poster-actions",children:[u.jsx("button",{className:"btn-cyan",onClick:()=>C(K),children:"VISUALIZAR"}),u.jsx("button",{className:"btn-red",onClick:()=>Nr(ze(Ae,"resenhas",K.id)),children:"EXCLUIR"})]})]},K.id))})]}),u.jsxs("div",{className:"ff-card board-column",children:[u.jsxs("div",{className:"card-header no-border",children:[u.jsx("h3",{children:"SESSES DE JOGO"}),u.jsx("button",{className:"ff-add-btn small-btn",onClick:()=>ie(!0),children:"INICIAR NOVA SESSO"})]}),u.jsx("div",{className:"mission-scroll",children:m.length===0?u.jsx("div",{className:"empty-instancia",children:"NENHUMA INSTNCIA ATIVA"}):m.map(K=>u.jsxs("div",{className:"sessao-card",children:[u.jsx("div",{className:"sessao-status",children:" AO VIVO / AGENDADA"}),u.jsx("h4",{className:"sessao-title",children:K.missaoNome}),u.jsxs("div",{className:"sessao-info",children:[u.jsxs("span",{children:[" ",new Date(K.dataInicio).toLocaleString()]}),u.jsxs("span",{className:"sessao-players",children:[" ",K.participantes?.length||0," Jogadores"]})]}),u.jsxs("div",{className:"sessao-assets-count",children:[" ",(K.mapas?.length||0)+(K.cenarios?.length||0)," Imagens"]}),u.jsxs("div",{className:"poster-actions",style:{marginTop:"15px"},children:[u.jsx("button",{className:"btn-cyan",onClick:()=>H(K),children:" MEMBROS"}),u.jsx("button",{className:"btn-play-vtt",onClick:()=>mt(),children:" ACESSAR VTT"}),u.jsx("button",{className:"btn-red",onClick:()=>Nr(ze(Ae,"sessoes",K.id)),children:"CANCELAR"})]})]},K.id))})]})]})]}),u.jsx("button",{className:"fichas-trigger-btn",onClick:()=>fe(!0),title:"Acessar Fichas",children:u.jsx("img",{src:C5,alt:"Fichas"})}),u.jsx(Vg,{isMestre:!0}),u.jsx(sA,{}),pe&&u.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>fe(!1),children:u.jsxs("div",{className:"ff-modal-scrollable ff-card",onClick:K=>K.stopPropagation(),children:[u.jsx("h3",{className:"modal-title-ff",children:"PERSONAGENS REGISTRADOS"}),u.jsx("div",{className:"destinatarios-grid-fixed",children:y.map(K=>u.jsxs("div",{className:"ficha-list-item",children:[u.jsxs("div",{className:"ficha-row-name",children:[u.jsx("strong",{children:K.name}),u.jsxs("small",{children:[K.race," // ",K.class]})]}),u.jsx("button",{className:"btn-cyan",onClick:()=>{N(K),fe(!1)},children:"ABRIR FICHA "})]},K.id))}),u.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"20px"},onClick:()=>fe(!1),children:"FECHAR"})]})}),I&&u.jsx(zg,{characterData:I,isMaster:!0,onClose:()=>N(null)}),L&&u.jsx("div",{className:"ff-modal-overlay-fixed",children:u.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[u.jsx("h3",{className:"modal-title-ff",children:"NOVA MISSO"}),u.jsxs("form",{onSubmit:Fe,children:[u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"NOME DA MISSO"}),u.jsx("input",{placeholder:"Ttulo...",value:me.nome,onChange:K=>Ne({...me,nome:K.target.value}),required:!0})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"LOCAL"}),u.jsx("input",{placeholder:"Onde ocorre...",value:me.local,onChange:K=>Ne({...me,local:K.target.value})})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"CONTRATANTE"}),u.jsx("input",{placeholder:"Quem paga...",value:me.contratante,onChange:K=>Ne({...me,contratante:K.target.value})})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"DESCRIO DA MISSO"}),u.jsx("textarea",{className:"tall-area-dark",placeholder:"Detalhes da histria e contexto...",value:me.descricaoMissao,onChange:K=>Ne({...me,descricaoMissao:K.target.value})})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"OBJETIVOS DA MISSO"}),u.jsx("textarea",{className:"tall-area-dark",placeholder:"O que deve ser feito passo a passo...",value:me.objetivosMissao,onChange:K=>Ne({...me,objetivosMissao:K.target.value})})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"REQUISITOS DA MISSO"}),u.jsx("textarea",{className:"tall-area-dark",placeholder:"O que  necessrio para aceitar...",value:me.requisitos,onChange:K=>Ne({...me,requisitos:K.target.value})})]}),u.jsxs("div",{className:"row-double-ff",children:[u.jsxs("div",{className:"field-group",children:[u.jsx("label",{children:"GRUPO MXIMO"}),u.jsx("input",{placeholder:"Ex: 4",value:me.grupo,onChange:K=>Ne({...me,grupo:K.target.value})})]}),u.jsxs("div",{className:"field-group",children:[u.jsx("label",{children:"RANK"}),u.jsx("select",{value:me.rank,onChange:K=>Ne({...me,rank:K.target.value}),children:["E","D","C","B","A","S","SS","SC"].map(K=>u.jsxs("option",{value:K,children:["RANK ",K]},K))})]})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"RECOMPENSAS EXTRAS"}),u.jsx("textarea",{className:"tall-area-dark",placeholder:"Itens, especiarias...",value:me.recompensa,onChange:K=>Ne({...me,recompensa:K.target.value})})]}),u.jsxs("div",{className:"row-double-ff",children:[u.jsxs("div",{className:"field-group",children:[u.jsx("label",{children:"GIL"}),u.jsx("input",{type:"text",className:"gil-input",placeholder:"Ex: 5000",value:me.gilRecompensa,onChange:K=>Ne({...me,gilRecompensa:K.target.value.replace(/\D/g,"")})})]}),u.jsxs("div",{className:"field-group",children:[u.jsx("label",{children:"DURAO"}),u.jsx("input",{placeholder:"Ex: 1d 10h",value:me.duracao,onChange:K=>Ne({...me,duracao:K.target.value}),required:!0})]})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"IMAGEM"}),u.jsx("input",{placeholder:"Link Imgur...",value:me.imagem,onChange:K=>Ne({...me,imagem:K.target.value})})]}),u.jsxs("div",{className:"btn-group-ff",children:[u.jsx("button",{type:"submit",className:"btn-forjar-main",children:"FORJAR MISSO"}),u.jsx("button",{type:"button",className:"btn-cancelar-main",onClick:()=>O(!1),children:"FECHAR"})]})]})]})}),X&&u.jsx("div",{className:"ff-modal-overlay-fixed",children:u.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[u.jsx("h3",{className:"modal-title-ff",children:"ESCREVER CRNICA"}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"TTULO"}),u.jsx("input",{className:"ff-modal-input-dark",value:qe,onChange:K=>Je(K.target.value)})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"CORPO"}),u.jsx("textarea",{className:"tall-area-ff-dark",value:re,onChange:K=>ye(K.target.value)})]}),u.jsxs("div",{className:"player-selector-box-fixed",children:[u.jsx("label",{children:"DESTINATRIOS:"}),u.jsx("div",{className:"destinatarios-grid-fixed",children:y.map(K=>u.jsxs("label",{className:"chip-label-ff",children:[u.jsx("input",{type:"checkbox",checked:M.includes(K.name),onChange:()=>M.includes(K.name)?ee(M.filter(Me=>Me!==K.name)):ee([...M,K.name])})," ",K.name]},K.id))})]}),u.jsxs("div",{className:"btn-group-ff",children:[u.jsx("button",{className:"btn-forjar-main",onClick:F,children:"PUBLICAR"}),u.jsx("button",{className:"btn-cancelar-main",onClick:()=>Q(!1),children:"FECHAR"})]})]})}),te&&u.jsx("div",{className:"ff-modal-overlay-fixed",children:u.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[u.jsx("h3",{className:"modal-title-ff",children:"CRIAR NOVA SESSO"}),u.jsxs("form",{onSubmit:Ie,children:[u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"SELECIONAR MISSO"}),u.jsxs("select",{className:"ff-select-dark",value:Te.missaoId,onChange:K=>ft({...Te,missaoId:K.target.value}),required:!0,children:[u.jsx("option",{value:"",children:"-- Escolha --"}),s.map(K=>u.jsxs("option",{value:K.id,children:[K.nome," (Rank ",K.rank,")"]},K.id))]})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"DATA E HORRIO"}),u.jsx("input",{type:"datetime-local",className:"ff-input-dark",value:Te.dataInicio,onChange:K=>ft({...Te,dataInicio:K.target.value}),required:!0})]}),u.jsxs("div",{className:"player-selector-box-fixed",children:[u.jsx("label",{children:"JOGADORES:"}),u.jsx("div",{className:"destinatarios-grid-fixed",children:y.map(K=>u.jsxs("label",{className:"chip-label-ff",children:[u.jsx("input",{type:"checkbox",checked:de.includes(K.name),onChange:()=>de.includes(K.name)?be(de.filter(Me=>Me!==K.name)):be([...de,K.name])})," ",K.name," (",K.class,")"]},K.id))})]}),u.jsxs("div",{className:"upload-section-box",children:[u.jsx("h4",{className:"upload-section-title",children:"IMPORTAR IMAGENS"}),u.jsxs("div",{className:"link-import-row",children:[u.jsx("input",{className:"ff-input-dark",placeholder:"Link da imagem...",value:tt,onChange:K=>Wt(K.target.value)}),u.jsxs("select",{className:"ff-select-dark small-select",value:Gt,onChange:K=>ve(K.target.value),children:[u.jsx("option",{value:"mapas",children:"Tabletop"}),u.jsx("option",{value:"cenarios",children:"Cenrio"}),u.jsx("option",{value:"npcs",children:"NPCs"})]}),u.jsx("button",{type:"button",className:"btn-cyan",onClick:he,children:"+"})]}),u.jsxs("div",{className:"assets-lists",children:[Te.mapas.map((K,Me)=>u.jsxs("div",{className:"asset-item",children:[u.jsxs("span",{className:"truncate-link",children:["[TABLETOP] ",K]}),u.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>_e("mapas",Me),children:""})]},`map-${Me}`)),Te.cenarios.map((K,Me)=>u.jsxs("div",{className:"asset-item",children:[u.jsxs("span",{className:"truncate-link",children:["[CENRIO] ",K]}),u.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>_e("cenarios",Me),children:""})]},`cen-${Me}`)),Te.npcs.map((K,Me)=>u.jsxs("div",{className:"asset-item",children:[u.jsxs("span",{className:"truncate-link",children:["[NPC] ",K]}),u.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>_e("npcs",Me),children:""})]},`npc-${Me}`))]})]}),u.jsxs("div",{className:"btn-group-ff",children:[u.jsx("button",{type:"submit",className:"btn-forjar-main",children:"AGENDAR"}),u.jsx("button",{type:"button",className:"btn-cancelar-main",onClick:()=>ie(!1),children:"CANCELAR"})]})]})]})}),ae&&u.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>H(null),children:u.jsxs("div",{className:"ff-modal-scrollable ff-card",onClick:K=>K.stopPropagation(),style:{height:"auto",maxHeight:"500px"},children:[u.jsx("h3",{className:"modal-title-ff",children:"MEMBROS ALOCADOS"}),u.jsx("div",{className:"destinatarios-grid-fixed",children:ae.participantes?.map((K,Me)=>u.jsxs("div",{className:"chip-label-ff",style:{cursor:"default",color:"#fff",borderColor:"#00f2ff"},children:[" ",K]},Me))}),u.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"20px",width:"100%"},onClick:()=>H(null),children:"FECHAR"})]})}),j&&u.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>P(null),children:u.jsxs("div",{className:"ff-modal ff-card detail-view-main",onClick:K=>K.stopPropagation(),children:[u.jsxs("div",{className:"detail-header-modern",children:[u.jsx("div",{className:`detail-rank-badge rank-${j.rank}`,children:j.rank}),u.jsxs("div",{className:"detail-title-col",children:[u.jsx("h2",{children:j.nome}),u.jsxs("span",{className:"detail-narrator",children:["Narrador: ",j.mestreNome]})]})]}),u.jsxs("div",{className:"detail-body-grid",children:[u.jsxs("div",{className:"detail-info-row",children:[u.jsxs("div",{className:"info-item",children:[u.jsx("label",{children:" LOCAL"}),u.jsx("span",{children:j.local||"Desconhecido"})]}),u.jsxs("div",{className:"info-item",children:[u.jsx("label",{children:" CONTRATANTE"}),u.jsx("span",{children:j.contratante||"Annimo"})]})]}),u.jsxs("div",{className:"detail-section",children:[u.jsx("label",{className:"section-label",children:"VAGAS"}),u.jsxs("div",{style:{background:"#111",padding:"10px",borderRadius:"4px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",color:"#aaa",marginBottom:"5px"},children:[u.jsx("span",{children:"STATUS DO GRUPO"}),u.jsxs("span",{children:[j.candidatos?j.candidatos.length:0," / ",j.grupo||"?"]})]}),u.jsx("div",{style:{width:"100%",height:"6px",background:"#333",borderRadius:"3px"},children:u.jsx("div",{style:{width:`${Math.min((j.candidatos?.length||0)/(parseInt(j.grupo)||1)*100,100)}%`,height:"100%",background:j.candidatos?.length>=parseInt(j.grupo)?"#f44":"#00f2ff"}})})]})]}),u.jsxs("div",{className:"detail-section",children:[u.jsx("label",{className:"section-label",children:" DESCRIO"}),u.jsx("p",{className:"section-text",children:j.descricaoMissao})]}),u.jsxs("div",{className:"detail-section",children:[u.jsx("label",{className:"section-label",children:" OBJETIVOS"}),u.jsx("p",{className:"section-text",children:j.objetivosMissao})]}),u.jsxs("div",{className:"detail-section",children:[u.jsx("label",{className:"section-label",children:" REQUISITOS"}),u.jsx("p",{className:"section-text",children:j.requisitos})]}),u.jsxs("div",{className:"detail-section reward-section",children:[u.jsx("label",{className:"section-label",children:" RECOMPENSAS"}),u.jsxs("div",{className:"reward-content-box",children:[u.jsxs("div",{className:"gil-display-row",children:[u.jsx("span",{className:"gil-icon",children:""})," ",u.jsxs("span",{className:"gil-value",children:[j.gilRecompensa||0," GIL"]})]}),j.recompensa&&u.jsx("div",{className:"extra-rewards-list",children:j.recompensa.split(`
`).map((K,Me)=>u.jsxs("div",{className:"reward-item",children:[" ",K]},Me))})]})]})]}),u.jsx("button",{className:"ff-final-close-btn",onClick:()=>P(null),children:"FECHAR RELATRIO"})]})}),R&&u.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>Se(null),children:u.jsxs("div",{className:"lightbox-wrap",children:[u.jsx("button",{className:"close-lightbox",onClick:()=>Se(null),children:""}),u.jsx("img",{src:R,alt:"Cartaz",className:"cartaz-full-view"})]})}),k&&u.jsx("div",{className:"papiro-overlay-full",onClick:()=>C(null),children:u.jsxs("div",{className:"papiro-real-container",style:{backgroundImage:`url(${iA})`},onClick:K=>K.stopPropagation(),children:[u.jsx("div",{className:"sanchez-oval-view-no-border",style:{backgroundImage:`url(${aA})`}}),u.jsx("h2",{className:"papiro-title-real",children:k.titulo}),u.jsxs("p",{className:"papiro-mestre-sub",children:["Narrador: ",k.mestre]}),u.jsx("div",{className:"papiro-body-real",dangerouslySetInnerHTML:{__html:k.conteudo}}),u.jsx("button",{className:"papiro-close-btn",onClick:()=>C(null),children:"FECHAR"})]})}),u.jsx("style",{children:`
        /* --- ESTILOS PRINCIPAIS MESTRE --- */
        .mestre-container { width: 100vw; height: 100vh; overflow: hidden; position: relative; background: #020617; font-family: 'Cinzel', serif; color: #e2e8f0; }
        .mestre-bg-image-full { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.3; z-index: 0; animation: slowPan 60s infinite alternate; }
        @keyframes slowPan { from { transform: scale(1.0); } to { transform: scale(1.1); } }
        
        .mestre-content { position: relative; z-index: 10; height: 100%; display: flex; flex-direction: column; padding: 20px; box-sizing: border-box; }
        .top-bar-flex { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .ff-title { font-size: 2rem; color: #fbbf24; text-shadow: 0 0 10px rgba(251, 191, 36, 0.5); letter-spacing: 4px; margin: 0; }
        .mestre-identity-box { padding: 10px 20px; display: flex; align-items: center; gap: 10px; background: rgba(0,0,0,0.6); border: 1px solid #fbbf24; border-radius: 4px; }
        .mestre-identity-box label { font-size: 0.8rem; color: #fbbf24; font-weight: bold; }
        .mestre-identity-box input { background: transparent; border: none; border-bottom: 1px solid #555; color: #fff; font-family: 'Cinzel', serif; text-align: center; width: 150px; }
        
        .mestre-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; flex: 1; min-height: 0; }
        .board-column { display: flex; flex-direction: column; height: 100%; background: rgba(15, 23, 42, 0.85); border: 1px solid #334155; border-radius: 8px; overflow: hidden; backdrop-filter: blur(5px); box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        .card-header { padding: 15px; border-bottom: 1px solid #334155; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.3); }
        .card-header h3 { margin: 0; color: #e2e8f0; font-size: 1rem; letter-spacing: 2px; }
        .no-border { border-bottom: none !important; }
        
        .mission-scroll { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 15px; scrollbar-width: thin; scrollbar-color: #fbbf24 #0f172a; }
        .mission-scroll::-webkit-scrollbar { width: 6px; }
        .mission-scroll::-webkit-scrollbar-thumb { background: #fbbf24; border-radius: 3px; }
        
        /* CARD MISSO */
        .mission-poster { background: #1e293b; border: 1px solid #334155; padding: 15px; border-radius: 4px; position: relative; transition: transform 0.2s; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .mission-poster:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.3); border-color: #fbbf24; }
        .mission-poster h4 { margin: 25px 0 5px 0; color: #fbbf24; font-size: 1.1rem; text-transform: uppercase; }
        .poster-rank-label-fixed { position: absolute; top: 10px; right: 10px; font-weight: 900; font-size: 1.5rem; opacity: 0.3; color: #fff; }
        .mestre-tag { font-size: 0.7rem; color: #94a3b8; display: block; margin-bottom: 5px; }
        .gil-recompensa { font-size: 0.9rem; color: #fcd34d; font-weight: bold; margin-bottom: 10px; }
        
        .vagas-container { background: #0f172a; padding: 8px; border-radius: 4px; margin-bottom: 10px; border: 1px solid #334155; }
        .vagas-labels { display: flex; justify-content: space-between; font-size: 0.7rem; color: #cbd5e1; margin-bottom: 4px; }
        .vagas-track { height: 6px; background: #334155; border-radius: 3px; overflow: hidden; }
        .vagas-fill { height: 100%; transition: width 0.3s ease; }
        
        .candidates-mini-box { background: rgba(0,0,0,0.3); padding: 8px; border-radius: 4px; margin-bottom: 10px; font-size: 0.75rem; }
        .cand-row-master { display: flex; justify-content: space-between; align-items: center; margin-top: 4px; padding-bottom: 2px; border-bottom: 1px dashed #334155; }
        .btn-kick-x { background: transparent; border: none; color: #ef4444; cursor: pointer; font-weight: bold; font-size: 14px; }
        .btn-kick-x:hover { color: #f87171; }
        
        .mission-timer { display: block; text-align: center; font-size: 0.8rem; color: #94a3b8; margin: 10px 0; font-weight: bold; }
        
        .poster-actions { display: flex; gap: 5px; justify-content: space-between; }
        .btn-cyan { flex: 1; padding: 6px; font-size: 0.7rem; background: transparent; border: 1px solid #00f2ff; color: #00f2ff; cursor: pointer; transition: 0.2s; font-weight: bold; }
        .btn-cyan:hover { background: rgba(0, 242, 255, 0.1); }
        .btn-red { flex: 1; padding: 6px; font-size: 0.7rem; background: transparent; border: 1px solid #ef4444; color: #ef4444; cursor: pointer; transition: 0.2s; font-weight: bold; }
        .btn-red:hover { background: rgba(239, 68, 68, 0.1); }
        
        /* SANCHES */
        .sanchez-card { border-color: #00f2ff; }
        .sanchez-header-top { padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #00f2ff; background: rgba(0, 242, 255, 0.05); }
        .sanchez-header-top h3 { color: #00f2ff; text-shadow: 0 0 5px rgba(0, 242, 255, 0.5); }
        .resenha-item-card { background: #0f172a; border: 1px solid #334155; padding: 15px; border-radius: 4px; border-left: 3px solid #00f2ff; }
        .resenha-item-card h4 { margin: 0 0 10px 0; color: #e2e8f0; font-size: 1rem; }
        
        /* SESSES */
        .sessao-card { background: #1e293b; border: 1px solid #fbbf24; padding: 15px; border-radius: 4px; position: relative; }
        .sessao-status { position: absolute; top: -10px; left: 10px; background: #fbbf24; color: #000; font-size: 0.6rem; font-weight: bold; padding: 2px 6px; border-radius: 2px; }
        .sessao-title { margin: 10px 0 5px 0; color: #fff; font-size: 1.1rem; }
        .sessao-info { font-size: 0.8rem; color: #94a3b8; display: flex; flex-direction: column; gap: 2px; }
        .sessao-assets-count { font-size: 0.75rem; color: #cbd5e1; margin-top: 5px; font-style: italic; }
        .btn-play-vtt { background: #fbbf24; color: #000; border: none; padding: 8px; font-weight: bold; cursor: pointer; flex: 2; transition: 0.2s; }
        .btn-play-vtt:hover { background: #f59e0b; box-shadow: 0 0 10px rgba(251, 191, 36, 0.4); }
        .empty-instancia { text-align: center; color: #475569; padding: 20px; font-style: italic; border: 2px dashed #334155; border-radius: 8px; }

        /* MODAIS GERAIS */
        .ff-modal-overlay-fixed { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 9999; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .ff-modal-scrollable { background: #0f172a; border: 1px solid #fbbf24; width: 600px; max-width: 95vw; max-height: 90vh; overflow-y: auto; padding: 25px; border-radius: 8px; box-shadow: 0 0 30px rgba(0,0,0,0.8); }
        .modal-title-ff { color: #fbbf24; text-align: center; border-bottom: 1px solid #334155; padding-bottom: 15px; margin-bottom: 20px; letter-spacing: 2px; font-size: 1.5rem; }
        .modal-input-group { margin-bottom: 15px; }
        .modal-input-group label { display: block; color: #94a3b8; font-size: 0.8rem; margin-bottom: 5px; font-weight: bold; }
        .modal-input-group input, .modal-input-group textarea, .modal-input-group select { width: 100%; background: #1e293b; border: 1px solid #334155; color: #fff; padding: 10px; font-family: 'Lato', sans-serif; border-radius: 4px; outline: none; }
        .modal-input-group input:focus, .modal-input-group textarea:focus { border-color: #fbbf24; }
        .tall-area-dark { min-height: 100px; resize: vertical; }
        .row-double-ff { display: flex; gap: 15px; margin-bottom: 15px; }
        .field-group { flex: 1; }
        .field-group input, .field-group select { width: 100%; padding: 10px; background: #1e293b; border: 1px solid #334155; color: #fff; border-radius: 4px; }
        
        .btn-group-ff { display: flex; gap: 10px; margin-top: 20px; }
        .btn-forjar-main { flex: 1; background: #fbbf24; color: #000; border: none; padding: 12px; font-weight: bold; cursor: pointer; transition: 0.2s; font-family: 'Cinzel', serif; letter-spacing: 1px; }
        .btn-forjar-main:hover { background: #f59e0b; }
        .btn-cancelar-main { flex: 1; background: transparent; color: #94a3b8; border: 1px solid #334155; padding: 12px; font-weight: bold; cursor: pointer; transition: 0.2s; font-family: 'Cinzel', serif; }
        .btn-cancelar-main:hover { border-color: #fff; color: #fff; }

        .ff-add-btn { background: transparent; border: 1px dashed #fbbf24; color: #fbbf24; padding: 5px 15px; cursor: pointer; font-size: 0.8rem; font-weight: bold; transition: 0.2s; }
        .ff-add-btn:hover { background: rgba(251, 191, 36, 0.1); }
        .ff-add-btn-gold-small { background: transparent; border: 1px dashed #00f2ff; color: #00f2ff; padding: 5px 10px; cursor: pointer; font-size: 0.7rem; font-weight: bold; }
        .ff-add-btn-gold-small:hover { background: rgba(0, 242, 255, 0.1); }

        /* UPLOAD SECTION (SESSO) */
        .upload-section-box { border: 1px solid #334155; padding: 15px; border-radius: 4px; margin-top: 20px; background: rgba(0,0,0,0.2); }
        .upload-section-title { font-size: 0.9rem; color: #fbbf24; margin-bottom: 10px; text-transform: uppercase; border-bottom: 1px solid #334155; padding-bottom: 5px; }
        .link-import-row { display: flex; gap: 10px; margin-bottom: 10px; }
        .ff-input-dark { flex: 1; background: #1e293b; border: 1px solid #334155; color: #fff; padding: 8px; border-radius: 4px; outline: none; }
        .ff-select-dark { background: #1e293b; border: 1px solid #334155; color: #fff; padding: 8px; border-radius: 4px; outline: none; }
        .small-select { width: 120px; }
        .assets-lists { display: flex; flex-direction: column; gap: 5px; max-height: 150px; overflow-y: auto; }
        .asset-item { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); padding: 5px 10px; border-radius: 4px; font-size: 0.8rem; color: #ccc; }
        .truncate-link { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 90%; }
        .btn-remove-x { background: transparent; border: none; color: #f44; cursor: pointer; font-weight: bold; }

        /* SELEO DE JOGADORES */
        .player-selector-box-fixed { margin: 15px 0; }
        .destinatarios-grid-fixed { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; max-height: 150px; overflow-y: auto; background: #020617; padding: 10px; border: 1px solid #334155; border-radius: 4px; }
        .chip-label-ff { display: flex; align-items: center; gap: 8px; font-size: 0.8rem; color: #94a3b8; cursor: pointer; padding: 5px; border: 1px solid transparent; border-radius: 4px; transition: 0.2s; }
        .chip-label-ff:hover { background: rgba(255,255,255,0.05); }
        .chip-label-ff input { width: auto; margin: 0; }

        /* PAPIRO REAL (FIXED & IMPROVED) */
        .papiro-overlay-full { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 10000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(8px); }
        .papiro-real-container { width: 800px; max-width: 95vw; height: 85vh; background-size: 100% 100%; position: relative; padding: 100px 90px; box-sizing: border-box; display: flex; flex-direction: column; align-items: center; color: #3e2723; font-family: 'Cinzel', serif; text-shadow: 0 1px 0 rgba(255,255,255,0.5); }
        .sanchez-oval-view-no-border { width: 80px; height: 80px; border-radius: 50%; background-size: cover; border: 4px solid #8d6e63; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .papiro-title-real { font-size: 2.5rem; margin: 0; border-bottom: 2px solid #5d4037; padding-bottom: 10px; width: 100%; text-align: center; }
        .papiro-mestre-sub { font-size: 0.9rem; font-style: italic; color: #5d4037; margin-bottom: 30px; }
        .papiro-body-real { font-size: 1.2rem; line-height: 1.8; text-align: justify; overflow-y: auto; width: 100%; flex: 1; padding-right: 15px; font-family: 'Lato', serif; font-weight: 600; }
        .papiro-close-btn { margin-top: 20px; background: transparent; color: #d7ccc8; border: 2px solid #5d4037; color: #5d4037; padding: 10px 40px; font-weight: bold; cursor: pointer; transition: 0.2s; font-family: 'Cinzel', serif; font-size: 1.1rem; }
        .papiro-close-btn:hover { background: #5d4037; color: #fff; }
        .papiro-body-real::-webkit-scrollbar { width: 8px; }
        .papiro-body-real::-webkit-scrollbar-thumb { background: #8d6e63; border-radius: 4px; }

        /* DETALHES MISSO (MODERN DARK) */
        .detail-view-main { width: 800px; height: 600px; display: flex; flex-direction: column; overflow: hidden; background: #0f172a; border: 2px solid #fbbf24; border-radius: 8px; }
        .detail-header-modern { background: linear-gradient(90deg, #1e293b, #0f172a); padding: 20px; border-bottom: 1px solid #334155; display: flex; gap: 20px; align-items: center; }
        .detail-rank-badge { font-size: 3rem; font-weight: 900; color: rgba(255,255,255,0.1); text-shadow: 0 0 20px rgba(251, 191, 36, 0.5); }
        .detail-rank-badge.rank-S, .detail-rank-badge.rank-SS { color: #fbbf24; opacity: 1; }
        .detail-title-col h2 { margin: 0; font-size: 2rem; color: #f1f5f9; letter-spacing: 2px; }
        .detail-narrator { color: #00f2ff; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }
        .detail-body-grid { flex: 1; overflow-y: auto; padding: 30px; display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .detail-info-row { grid-column: 1 / -1; display: flex; gap: 40px; border-bottom: 1px solid #334155; padding-bottom: 20px; }
        .info-item label { color: #fbbf24; font-size: 0.7rem; font-weight: bold; display: block; margin-bottom: 5px; }
        .info-item span { color: #fff; font-size: 1.1rem; }
        .detail-section { margin-bottom: 10px; }
        .section-label { display: block; color: #94a3b8; font-size: 0.75rem; font-weight: bold; margin-bottom: 8px; border-left: 3px solid #fbbf24; padding-left: 8px; }
        .section-text { color: #cbd5e1; line-height: 1.6; font-size: 0.95rem; white-space: pre-wrap; }
        .reward-section { grid-column: 1 / -1; background: rgba(251, 191, 36, 0.05); padding: 15px; border: 1px solid rgba(251, 191, 36, 0.2); border-radius: 6px; }
        .reward-content-box { display: flex; justify-content: space-between; align-items: center; }
        .gil-display-row { font-size: 1.5rem; font-weight: bold; color: #fff; display: flex; align-items: center; gap: 10px; }
        .gil-value { color: #fcd34d; }
        .extra-rewards-list { text-align: right; color: #fbbf24; font-size: 0.9rem; font-style: italic; }
        .ff-final-close-btn { width: 100%; padding: 20px; background: #020617; color: #fff; border: none; border-top: 1px solid #334155; font-family: 'Cinzel', serif; font-weight: bold; cursor: pointer; transition: 0.2s; letter-spacing: 2px; }
        .ff-final-close-btn:hover { background: #fbbf24; color: #000; }

        /* LIGHTBOX */
        .lightbox-wrap { position: relative; max-width: 90vw; max-height: 90vh; }
        .cartaz-full-view { max-width: 100%; max-height: 90vh; border: 3px solid #ffcc00; box-shadow: 0 0 50px #000; }
        .close-lightbox { position: absolute; top: -40px; right: -40px; background: transparent; border: none; color: #fff; font-size: 40px; cursor: pointer; }
        
        /* BOTO FLUTUANTE DE FICHAS */
        .fichas-trigger-btn { position: fixed; bottom: 30px; right: 190px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #00f2ff; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; }
        .fichas-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 25px #00f2ff; }
        .fichas-trigger-btn img { width: 70%; height: 70%; object-fit: contain; }

        /* LISTA DE FICHAS */
        .ficha-list-item { display: flex; justify-content: space-between; align-items: center; background: #1e293b; padding: 15px; border-radius: 4px; margin-bottom: 10px; border: 1px solid #334155; }
        .ficha-row-name strong { display: block; color: #fff; font-size: 1.1rem; }
        .ficha-row-name small { color: #94a3b8; }
        .btn-cyan { padding: 8px 15px; font-size: 0.8rem; }
      `})]})}const j5=[{id:"humes",name:"Humes",image:"races/humes.png",description:"Os Humes so a raa mais comum e predominante em Ivalice. Adaptveis, curiosos e persistentes, habitam desde as grandes capitais at vilarejos fronteirios. Sua origem  antiga e pouco documentada, mas acredita-se que foram os primeiros a construir grandes cidades e fundar os cls atuais.",characteristics:"Sua maior qualidade  a versatilidade. No se destacam naturalmente em nenhum atributo especfico, mas aprendem qualquer funo rapidamente, prosperando em qualquer lugar que chamem de lar.",racial_bonus:{value:5,detail:"5 pontos extras para distribuir livremente entre os atributos durante a criao de personagem."},base_classes:["Soldado","Mago Branco","Qumico"]},{id:"viera",name:"Viera",image:"races/viera.png",description:"Uma raa graciosa e enigmtica, marcada por longas orelhas e aparncia esguia. Vivem em florestas profundas, isoladas do mundo exterior e conectadas aos espritos da natureza. A sociedade  matriarcal.",characteristics:"Conhecidas por sentidos aguados, velocidade impressionante e habilidades mgicas refinadas. Os machos so raros e exilados ao atingirem a maturidade.",racial_bonus:{female:{VEL:3,INT:2},male_exiled:{"pontos-livres":5}},base_classes:{female:["Arqueira","Esgrimista","Curandeira"],male:["Exilado"]}},{id:"moogles",name:"Moogles",image:"races/moogles.png",description:"Pequenos, adorveis e envoltos em mistrio. Possuem corpos peludos, antenas com pompons flutuantes e pequenas asas de morcego. No possuem gnero definido.",characteristics:"Extremamente inteligentes e obcecados por tecnologia e invenes, misturando cincia com feitiaria. Carregam um estranho 'magnetismo da sorte'.",racial_bonus:{SOR:5},base_classes:["Animista","Engenheiro"]},{id:"bangaa",name:"Bangaa",image:"races/bangaa.png",description:"Guerreiros reptilianos robustos, com pele escamosa e traos que lembram drages antigos. So temidos pela fora bruta e respeitados pela honra em combate.",characteristics:"Sua origem remonta a tempos ancestrais e acredita-se que possuam sangue dracnico. Valorizam a lealdade, a disciplina fsica e o dever.",racial_bonus:{FOR:3,CONS:2},base_classes:["Monge","Guerreiro"]},{id:"grias",name:"Grias",image:"races/grias.png",description:"Guerreiras aladas, exclusivamente femininas, nascidas para dominar os cus. Possuem corpos atlticos, chifres, caudas e asas fortes.",characteristics:"Mestres da caa alada e emboscadas areas. Usam a altura como vantagem ttica e seus ataques de mergulho so devastadores.",racial_bonus:{VEL:2},passive_ability:{name:"Imunidade a Dano de Queda",effect:"No sofrem dano ao cair de qualquer altura nem de impactos ascendentes."},base_classes:["Raptora","Rastreadora"]},{id:"elvaan",name:"Elvaan",image:"races/elvaan.png",description:"Originrios de Valendia, so guerreiros altos, nobres e disciplinados, com orelhas alongadas. Simbolizam tradio e justia em Ivalice.",characteristics:"Treinados desde a infncia no manejo de lminas e estilos de combate ancestrais. Desprezam truques e valorizam o confronto direto.",racial_bonus:{FOR:2},passive_ability:{name:"Domnio de Reao",effect:"Aprendem habilidades de reao com o dobro de rapidez."},base_classes:["Soldado","Espadachim"]},{id:"mithra",name:"Mithra",image:"races/mithra.png",description:"Raa com traos felinos, gil e astuta. Compartilham uma origem ancestral com as Viera, mas se espalharam por matas tropicais e runas.",characteristics:"Especialistas em furtividade, espionagem e ladronagem. Possuem forte senso de honra ligado  astcia.",racial_bonus:{VEL:2},passive_ability:{name:"Bnus de Camuflagem",effect:"Recebem vantagem em testes de furtividade, infiltrao e disfarce."},base_classes:["Ladra","Espreitadora"]},{id:"nu_mou",name:"Nu Mou",image:"races/nu-mou.png",description:"Pequenos em estatura, com aparncia canina e pelagem espessa, mas imensos em conhecimento. So magos natos que vivem sculos acumulando sabedoria.",characteristics:"Frequentemente ocupam cargos de conselheiros. Possuem empatia natural com a vida selvagem, comunicando-se com monstros e animais.",racial_bonus:{INT:3,CAR:2},base_classes:["Mago Branco","Adestrador"]},{id:"hypello",name:"Hypello",image:"races/hypello.png",description:"Raa anfbia dos pntanos de Kerwon. Possuem grande estatura, corpos robustos e pele azulada ou esverdeada.",characteristics:"Herbalistas por excelncia, mestres em usar plantas para curas ou venenos. Sua maior fora  a vitalidade e a empatia.",racial_bonus:{CONS:5},base_classes:["Escudeiro","Curandeiro"]},{id:"umbros",name:"Umbros",image:"races/umbros.png",description:"Seres de pele negra e marcas brilhantes que reagem  lua. Descendentes dos seres tocados pelas Pedras Zodiacais.",characteristics:"Alta resistncia  corrupo e aptido mgica. Vistos como orculos ou andarilhos que carregam segredos esquecidos.",racial_bonus:{INT:2},passive_ability:{name:"Modo Luar",effect:"Sob luz direta da lua visvel, causam o dobro de dano final com qualquer magia."},base_classes:["Mago Negro","Ocultista"]}],k5={races:j5},O5=JSON.parse(`[{"id":"soldado","name":"Soldado","type":"Bsica","role":"Tanque / Suporte de status","description":"Guerreiros de linha de frente, treinados para resistir aos maiores impactos do campo de batalha e desestabilizar o inimigo com habilidades tticas conhecidas como 'Pausas'.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Primeiro Socorro","description":"Trata os prprios ferimentos, restaurando 25% do HP.","cost":"N/A","type":"HB"},{"name":"Quebra de Poder","description":"Reduz a FOR do alvo pela metade, por trs turnos.","cost":"N/A","type":"HB"},{"name":"Quebra Magia","description":"Reduz a INT do alvo pela metade, por trs turnos.","cost":"N/A","type":"HB"},{"name":"Quebra de Mana","description":"Reduz a MP do alvo pela metade por trs turnos.","cost":"N/A","type":"HB"},{"name":"Provocar","description":"Inflige FURIA a um alvo.","cost":"N/A","type":"HB"},{"name":"Shieldbearer","description":"Permite ao usurio equipar escudos, mesmo fora da classe Soldado.","cost":"N/A","type":"Passiva"}]},{"id":"mago_branco","name":"Mago Branco","type":"Bsica","role":"Suporte / Cura / Anti-morto-vivo","description":"Especialistas em suporte mgico, sua principal funo  manter o grupo de p com curas poderosas, proteo espiritual e magias de ressuscitao.","bonus_class":{"MP":5},"requirements":[],"abilities":[{"name":"Cure","description":"Cura magicamente os ferimentos do alvo. Restaura 10% do PV e causa dano a mortos-vivos.","cost":"8 MP","type":"Magia"},{"name":"Cura","description":"Restaura magicamente 25% de HP. Causa dano a mortos-vivos.","cost":"18 MP","type":"Magia"},{"name":"Curaga","description":"Restaura magicamente 75% de HP. Causa dano a mortos-vivos.","cost":"32 MP","type":"Magia"},{"name":"Esuna","description":"Remove magicamente os efeitos negativos do alvo.","cost":"10 MP","type":"Magia"},{"name":"Arise","description":"Revive magicamente o alvo, removendo o KO. Causa dano a mortos-vivos.","cost":"40 MP","type":"Magia"},{"name":"Turbo MP","description":"Os feitios custam o dobro de seus MP normais, e do o dobro de dano.","cost":"N/A","type":"Passiva"}]},{"id":"quimico","name":"Qumico","type":"Bsica","role":"Suporte / Manipulador de Itens","description":"Mestres do preparo e uso ttico de poes. Utilizam conhecimentos alqumicos para curar aliados e enfraquecer inimigos.","bonus_class":{"SOR":2,"CAR":3},"requirements":[],"abilities":[{"name":"Preparar Poo","description":"Cria uma poo bsica durante o turno.","cost":"N/A","type":"HB"},{"name":"Arremessar Poo","description":"Permite arremessar qualquer poo equipada em um aliado ou inimigo a at 3 quadrados.","cost":"N/A","type":"HB"},{"name":"Frasco Instvel","description":"Arremessa uma mistura explosiva improvisada que causa dano de elemento aleatrio.","cost":"N/A","type":"HB"},{"name":"Reao em Cadeia","description":"Permite usar duas poes diferentes ao mesmo tempo.","cost":"N/A","type":"HB"},{"name":"Reciclagem Alqumica","description":"Recupera uma poo gasta no combate.","cost":"N/A","type":"HB"},{"name":"Inventrio Estendido","description":"Bolsa exclusiva para poes que no ocupa espao no inventrio padro (at 8 poes).","cost":"N/A","type":"Passiva"}]},{"id":"arqueira","name":"Arqueira","type":"Bsica","role":"Atiradora / Controle de Campo","description":"Especialistas em combate  distncia, treinadas para derrubar inimigos com preciso e neutralizar alvos.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Foco","description":"Aumenta drasticamente a preciso e dobra o dano final do ataque.","cost":"N/A","type":"HB"},{"name":"Acerto na Perna","description":"Causa IMOBILIZAO, impedindo movimentos por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Acerto na Mo","description":"Causa DESARME por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Mira Precisa","description":"Adiciona o atributo SORTE ao dano final do ataque.","cost":"N/A","type":"HB"},{"name":"Apago","description":"Causa CEGUEIRA, reduzindo severamente a chance de acerto do alvo por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Concentrao","description":"Aumenta a chance de acerto em todos os disparos de longa distncia.","cost":"N/A","type":"Passiva"}]},{"id":"esgrimista","name":"Esgrimista","type":"Bsica","role":"Duelista / Assassina de preciso","description":"Combatentes graciosas e letais, treinadas no uso refinado da rapieira.","bonus_class":{"VEL":3,"FOR":2},"requirements":[],"abilities":[{"name":"Picada Venenosa","description":"Causa dano e aplica VENENO ao alvo.","cost":"N/A","type":"HB"},{"name":"Voo da Andorinha","description":"Ataca todos os inimigos ao redor, podendo derrub-los.","cost":"N/A","type":"HB"},{"name":"Golpe Perfurante","description":"Estocada que atravessa o primeiro alvo e atinge um segundo atrs dele.","cost":"N/A","type":"HB"},{"name":"Golpe de Mana","description":"Causa dano e reduz o MP do inimigo.","cost":"N/A","type":"HB"},{"name":"Xeque-mate","description":"Inflige CONDENAO (morte aps 3 turnos).","cost":"N/A","type":"HB"},{"name":"Passos Leves","description":"Pode atravessar reas de gua rasa sem perder mobilidade.","cost":"N/A","type":"Passiva"}]},{"id":"curandeira","name":"Curandeira","type":"Bsica","role":"Suporte / Cura Natural","description":"Guardis da vida e das florestas, conectadas  energia da natureza para curar e proteger.","bonus_class":{"HP":3,"MP":2},"requirements":[],"abilities":[{"name":"Folha Serena","description":"Cura um aliado em 10 de HP.","cost":"8 MP","type":"Magia"},{"name":"Broto Purificador","description":"Remove um status negativo de um aliado.","cost":"18 MP","type":"Magia"},{"name":"Conexo Natural","description":"25% do dano recebido pelo aliado  transferido para a Curandeira por 3 turnos.","cost":"20 MP","type":"Magia"},{"name":"Vinhas Enlaantes","description":"Prende at 3 inimigos, impedindo movimento por 2 turnos.","cost":"24 MP","type":"Magia"},{"name":"Nvoa Vigorosa","description":"Cura leve em todos os aliados prximos (rea 3 blocos).","cost":"35 MP","type":"Magia"},{"name":"Refrigrio da Floresta","description":"30% de chance de conceder Resistncia Natural (+5 ARM ou +5 RES) ao curar.","cost":"N/A","type":"Passiva"}]},{"id":"exilado","name":"Exilado","type":"Bsica","role":"Lutador Adaptvel / Sobrevivente","description":"Viera masculinos banidos que aprenderam a sobreviver por conta prpria, adaptando-se a qualquer arma.","bonus_class":{"Livre":5},"requirements":[],"abilities":[{"name":"Tiro Preciso","description":"Disparo com preciso perfeita (usa SOR).","cost":"N/A","type":"HB (Arco)"},{"name":"Golpe Silencioso","description":"Causa DANO CRTICO automtico se o alvo estiver de costas.","cost":"N/A","type":"HB (Adaga)"},{"name":"Finta Desarmante","description":"Reduz o ATAQUE do inimigo por 2 turnos.","cost":"N/A","type":"HB (Espada)"},{"name":"Ruptura Selvagem","description":"Ignora a DEFESA do inimigo e causa dano elevado.","cost":"N/A","type":"HB (Espado)"},{"name":"Primeiros Socorros","description":"Cura 20% do HP a si mesmo ou aliado.","cost":"N/A","type":"HB"},{"name":"Adaptao de Combate","description":"Pode trocar a arma equipada 1 vez por turno sem custo de ao.","cost":"N/A","type":"Passiva"}]},{"id":"guerreiro","name":"Guerreiro","type":"Bsica","role":"Linha de Frente / Espancador","description":"Muralhas de msculo treinados para esmagar o inimigo com pura fora fsica.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Primeiro Socorro","description":"Trata os prprios ferimentos, restaurando 20% do HP.","cost":"N/A","type":"HB"},{"name":"Poder de Rend","description":"Reduz o ATAQUE do alvo.","cost":"N/A","type":"HB"},{"name":"Rend Magick","description":"Reduz a MAGIA do alvo.","cost":"N/A","type":"HB"},{"name":"Batida Corporal","description":"Investida causando dano FOR+CONS, volta 40% do dano a si mesmo.","cost":"N/A","type":"HB"},{"name":"Grito de Guerra","description":"Imobiliza o inimigo por 2 turnos e pode causar medo.","cost":"N/A","type":"HB"},{"name":"Monkey Grip","description":"Permite empunhar armas de duas mos com uma mo s.","cost":"N/A","type":"Passiva"}]},{"id":"monge","name":"Monge","type":"Bsica","role":"Linha de Frente / Espancador","description":"Lutadores que usam o ki e seus prprios corpos como armas letais.","bonus_class":{"FOR":3,"CONS":2},"requirements":[],"abilities":[{"name":"Onda Giratria","description":"Ataque giratrio que atinge todos ao redor em 1 bloco.","cost":"N/A","type":"HB"},{"name":"Pulso de Ar","description":"Soco com ki que causa dano e empurra o alvo 2 blocos.","cost":"N/A","type":"HB"},{"name":"Pulso de Terra","description":"Dano terrestre em linha reta (at 3 blocos).","cost":"N/A","type":"HB"},{"name":"Exploso de Ki","description":"Dano em rea de 2 blocos ao redor do monge.","cost":"N/A","type":"HB"},{"name":"Meditao","description":"Restaura 20% de HP e remove status negativos.","cost":"N/A","type":"HB"},{"name":"Reflexo","description":"50% de chance de desviar de ataques bsicos fsicos.","cost":"N/A","type":"Reao"}]},{"id":"animista","name":"Animista","type":"Bsica","role":"Suporte / Manipulador de Status","description":"Moogles que usam instrumentos e talentos imprevisveis para causar efeitos absurdos no campo.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"L Fofa","description":"Garante status 'Proteo' e 'Shell' por 3 turnos.","cost":"8 MP","type":"Magia"},{"name":"Erva de Gato","description":"Aplica 'BERSERK' no inimigo.","cost":"8 MP","type":"HB"},{"name":"Canto do Sapo","description":"Transforma o alvo em SAPO por 2 turnos.","cost":"22 MP","type":"Magia"},{"name":"Cozinhar","description":"Restaura 50% do HP do Alvo.","cost":"22 MP","type":"HB"},{"name":"Conte Ovelhinhas","description":"Faz todos os inimigos em pequena rea adormecerem.","cost":"15 MP","type":"Magia"},{"name":"Abanar o Rabo","description":"20% de chance de ENCANTAR o atacante quando alvejado.","cost":"N/A","type":"Reao"}]},{"id":"engenheiro","name":"Engenheiro","type":"Bsica","role":"Suporte Aleatrio / Caos Tecnolgico","description":"Gnios insanos que usam aparatos e mecanismos imprevisveis.","bonus_class":{"SOR":3,"INT":2},"requirements":[],"abilities":[{"name":"Box Vermelha","description":"Lana 'Haste' em uma unidade aleatria.","cost":"8 MP","type":"HB"},{"name":"Kit Azul","description":"Lana 'Dissipar' ao colidir com alvo aleatrio.","cost":"8 MP","type":"HB"},{"name":"Chaves Negras","description":"Aplica 'Condenao' em quem for atingido.","cost":"20 MP","type":"HB"},{"name":"Bateria Dourada","description":"Restaura 50% HP em uma unidade aleatria.","cost":"16 MP","type":"HB"},{"name":"Borrifador Verde","description":"Aplica VENENO em uma unidade aleatria na rea.","cost":"8 MP","type":"HB"},{"name":"Ajuste Rpido","description":"Permite reutilizar habilidade que falhou no turno seguinte sem custo de MP.","cost":"N/A","type":"Passiva"}]},{"id":"raptora","name":"Raptora","type":"Bsica","role":"Lutadora de Linha de Frente / Alta Mobilidade","description":"Guerreiras aladas que usam velocidade e instintos aguados para ataques rpidos.","bonus_class":{"FOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Ciclone","description":"Causa dano de vento em rea pequena.","cost":"N/A","type":"HB"},{"name":"Poder de Rend","description":"Reduz o ATAQUE do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Rend Magick","description":"Reduz a MAGIA do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Rend MP","description":"Diminui MP do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Redemoinho","description":"Lminas de vento causam dano e CONFUSO.","cost":"N/A","type":"HB"},{"name":"Salvaguarda","description":"Impede que a arma seja roubada ou destruda.","cost":"N/A","type":"Passiva"}]},{"id":"rastreadora","name":"Rastreadora","type":"Bsica","role":"Caadora / Suporte de Rastreio e Preciso","description":"Mestres da observao que leem o terreno e perseguem presas.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Sonic Boom","description":"Dano sonoro impossvel de desviar.","cost":"N/A","type":"HB"},{"name":"Expulsar","description":"Fora um monstro a fugir do combate.","cost":"N/A","type":"HB"},{"name":"Rastrear","description":"Marca um Monstro como 'presa', causando DANO DOBRADO.","cost":"N/A","type":"HB"},{"name":"Investigar","description":"Revela todas as informaes do alvo.","cost":"N/A","type":"HB"},{"name":"ltimo Tiro","description":"Alto dano com chance de infligir CONDENAO.","cost":"N/A","type":"HB"},{"name":"Sobrevivente","description":"Recebe REGEN quando estiver com 20% de HP ou menos.","cost":"N/A","type":"Passiva"}]},{"id":"espadachim","name":"Espadachim","type":"Bsica","role":"Lutador Verstil / Duelo & Tcnica","description":"Guerreiros disciplinados que combinam preciso fsica e poder mgico na lmina.","bonus_class":{"FOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Corte Cruzado","description":"Dano em rea frontal (arco) em at 3 inimigos.","cost":"N/A","type":"HB"},{"name":"Olhos no Duelo","description":"+25% de dano se enfrentar apenas um inimigo.","cost":"N/A","type":"HB"},{"name":"Corte Etreo","description":"Golpe mgico  distncia (FOR+INT).","cost":"10 MP","type":"HB"},{"name":"Passo Veloz","description":"Move-se para trs do inimigo com +50% de chance de crtico.","cost":"N/A","type":"HB"},{"name":"Trifria","description":"Combo de 3 ataques com chance de Sangramento.","cost":"N/A","type":"HB"},{"name":"Corte Reflexivo","description":"30% de chance de aparar projteis fsicos.","cost":"N/A","type":"Reao"}]},{"id":"ladra","name":"Ladra","type":"Bsica","role":"Furtividade / Roubo","description":"Mestras do furto e agilidade que roubam itens e gil em combate.","bonus_class":{"SOR":3,"CAR":2},"requirements":[],"abilities":[{"name":"Roubar Gil","description":"Tenta roubar dinheiro.","cost":"N/A","type":"HB"},{"name":"Roubar Item","description":"Tenta roubar um item.","cost":"N/A","type":"HB"},{"name":"Roubar Equipamento","description":"Tenta roubar o Equipamento do alvo.","cost":"N/A","type":"HB"},{"name":"Destrancar","description":"Pode destrancar portas ou bas.","cost":"N/A","type":"HB"},{"name":"Golpe Furtivo","description":"Dobro de dano se estiver Escondida.","cost":"N/A","type":"HB"},{"name":"Instinto Possessivo","description":"Evita roubo e tenta roubar a arma do ladro.","cost":"N/A","type":"Reao"}]},{"id":"espreitadora","name":"Espreitadora","type":"Bsica","role":"Furtividade / Infiltrao","description":"Especialistas em camuflagem e eliminao silenciosa.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Ataque Surpresa","description":"Crtico automtico se fora do campo de viso.","cost":"N/A","type":"HB"},{"name":"Rpida e Escondida","description":"Velocidade dobrada quando camuflada.","cost":"N/A","type":"Passiva"},{"name":"Manto Noturno","description":"Aumenta chance de camuflagem  noite.","cost":"N/A","type":"Passiva"},{"name":"Silncio","description":"Aplica Silncio por 3 turnos (apenas camuflada).","cost":"N/A","type":"HB"},{"name":"Derrubada Mortal","description":"Elimina instantaneamente alvo pelas costas (apenas camuflada).","cost":"N/A","type":"HB"},{"name":"Morte Silenciosa","description":"50% de chance de permanecer camuflada aps eliminar alvo.","cost":"N/A","type":"Passiva"}]},{"id":"adestrador","name":"Adestrador","type":"Bsica","role":"Controle de Criaturas / Suporte Ttico","description":"Especialistas em lidar com a vida selvagem, controlando monstros temporariamente.","bonus_class":{"CAR":5},"requirements":[],"abilities":[{"name":"Adestrar","description":"Controla um monstro por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Bater ou Correr","description":"Recebe Haste quando HP chega a 10%.","cost":"N/A","type":"Reao"}]},{"id":"escudeiro","name":"Escudeiro","type":"Bsica","role":"Defensor / Suporte com Itens","description":"Pilares de defesa que protegem aliados e usam itens de suporte.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Postura de Defesa","description":"Reduz pela metade o dano recebido at o prximo turno.","cost":"N/A","type":"HB"},{"name":"Apoio Vital","description":"Usa at 2 poes para curar aliados adjacentes.","cost":"N/A","type":"HB"},{"name":"Eu te Protejo!","description":"Salta no aliado que tomar dano e absorve o golpe.","cost":"N/A","type":"Reao"},{"name":"Lanamento Cuidadoso","description":"Arremessa item a at 3 blocos.","cost":"N/A","type":"HB"},{"name":"Grito Protetor","description":"Provoca inimigos forando ataque ao Escudeiro.","cost":"N/A","type":"HB"},{"name":"Reao Instintiva","description":"Usa poo automaticamente ao sofrer golpe com HP baixo.","cost":"N/A","type":"Reao"}]},{"id":"mago_negro","name":"Mago Negro","type":"Bsica","role":"Ofensivo Mgico / Controle Elemental","description":"Conjuradores que dominam a magia elemental destrutiva.","bonus_class":{"INT":3,"MP":2},"requirements":[],"abilities":[{"name":"Fire","description":"Esfera de fogo em rea (alvo + 1 casa cada lado).","cost":"10 MP","type":"Magia"},{"name":"Blizzard","description":"Fragmento congelante perfurante.","cost":"10 MP","type":"Magia"},{"name":"Thunder","description":"Raio direto sobre inimigo e adjacentes.","cost":"10 MP","type":"Magia"},{"name":"Aero","description":"Turbilho de vento em rea.","cost":"10 MP","type":"Magia"},{"name":"Telecinese","description":"Move objeto/unidade at 5 blocos.","cost":"10 MP","type":"Magia"},{"name":"Absorver Mana","description":"Absorve 20% do dano mgico recebido como Mana.","cost":"N/A","type":"Reao"}]},{"id":"ocultista","name":"Ocultista","type":"Bsica","role":"Mago das Sombras / Maldies","description":"Estudiosos do proibido que manipulam trevas e maldies.","bonus_class":{"MP":3,"INT":2},"requirements":[],"abilities":[{"name":"Escurido","description":"Dano mgico de trevas em rea.","cost":"10 MP","type":"Magia"},{"name":"Ritual da Condenao","description":"Aplica CONDENAO no alvo.","cost":"15 MP","type":"Magia"},{"name":"Barreira do Silncio","description":"Aplica SILNCIO no alvo.","cost":"15 MP","type":"Magia"},{"name":"Vu Cego","description":"Aplica CEGUEIRA no alvo.","cost":"15 MP","type":"Magia"},{"name":"Avada Mortis","description":"Tenta aplicar morte instantnea.","cost":"30 MP","type":"Magia"},{"name":"Olhar do Abismo","description":"Aumenta INT aps concluir maldio.","cost":"N/A","type":"Passiva"}]},{"id":"quimico_avancado","name":"Qumico Avanado","type":"Avanada","role":"Suporte / Manipulador de Itens","description":"Evoluo do Qumico, usa reaes elementares e poes ofensivas em rea.","bonus_class":{"SOR":4,"CAR":2},"requirements":["3 Habilidades Mestre em Qumico","+30 SOR"],"abilities":[{"name":"Criar Poo Avanada","description":"Cria poes de qualidade superior.","cost":"N/A","type":"HB"},{"name":"Arremesso Rpido","description":"Arremessa at 3 poes em um movimento.","cost":"N/A","type":"HB"},{"name":"Frasco Venenoso","description":"Libera veneno em rea.","cost":"N/A","type":"HB"},{"name":"Frasco Milagroso","description":"Remove todos status negativos.","cost":"N/A","type":"HB"},{"name":"Dose Grande","description":"Aumenta rea de efeito da poo.","cost":"N/A","type":"HB"},{"name":"Pr-Preparo","description":"Inicia combate com 2 poes prontas.","cost":"N/A","type":"Passiva"}]},{"id":"clerigo","name":"Clrigo","type":"Avanada","role":"Curandeiro de Linha de Frente","description":"Elo entre fora e f, luta na frente enquanto cura aliados.","bonus_class":{"CONS":4,"MANA":2},"requirements":["1 Habilidade Mestre em Soldado","2 Habilidades Mestre em Mago Branco","+20 FOR"],"abilities":[{"name":"Julgamento Divino","description":"Dano sagrado (FOR+Luz).","cost":"20 MP","type":"Magia"},{"name":"Palavras de F","description":"Concede Barreira e Shell.","cost":"15 MP","type":"Magia"},{"name":"Espurgar","description":"Expulsa monstros espirituais.","cost":"25 MP","type":"Magia"},{"name":"Martelo Giratrio","description":"Dano em rea ao redor (CONS+FOR+Luz).","cost":"30 MP","type":"HB"},{"name":"Ruptura Divina","description":"Exploso triangular de luz.","cost":"50 MP","type":"HB"},{"name":"Estou com Voc","description":"Cura auto 10% de aliado adjacente por turno.","cost":"N/A","type":"Passiva"}]},{"id":"alquimista","name":"Alquimista","type":"Avanada","role":"Suporte / Manipulador de Campo","description":"Molda o mundo convertendo solo e energia em poder.","bonus_class":{"INT":4,"MANA":2},"requirements":["2 Habilidades Mestre em Mago Branco","1 Habilidade Mestre em Qumico","+30 INT"],"abilities":[{"name":"Pilar de Pedra","description":"Pilar de rocha atinge inimigo (INT+Terra).","cost":"20 MP","type":"Magia"},{"name":"Canho de Pedra","description":"Projtil de rocha distante.","cost":"20 MP","type":"Magia"},{"name":"Correntes de Solo","description":"Imobiliza inimigo.","cost":"17 MP","type":"Magia"},{"name":"Transmutao Peridica","description":"Altera elemento natural de rea/objeto.","cost":"30 MP","type":"Magia"},{"name":"Golem de Pedra","description":"Cria golem controlvel.","cost":"50 MP","type":"Magia"},{"name":"Muro","description":"Bloqueia ataque com muro de pedra.","cost":"N/A","type":"Reao"}]},{"id":"duelista","name":"Duelista","type":"Avanada","role":"Lutador de Elite / Combate Singular","description":"pice do domnio da espada, focado em preciso e duelos.","bonus_class":{"FOR":4,"VEL":2},"requirements":["3 Habilidades Mestre em Espadachim","+30 FOR","+20 VEL"],"abilities":[{"name":"BackStep","description":"Salta 2 blocos para esquiva.","cost":"N/A","type":"HB"},{"name":"Eu Contra Voc","description":"+50% dano em alvo nico.","cost":"N/A","type":"HB"},{"name":"Chuva de Lminas","description":"Trs cortes de ar consecutivos.","cost":"N/A","type":"HB"},{"name":"Postura de Batalha","description":"Aumenta ataque fsico em 50%.","cost":"N/A","type":"HB"},{"name":"Grande Slash","description":"Golpe que percorre o campo todo.","cost":"N/A","type":"HB"},{"name":"Defesa Contnua","description":"Desvia golpe se FOR > inimigo.","cost":"N/A","type":"Reao"}]},{"id":"iluminista","name":"Iluminista","type":"Avanada","role":"Mago Supremo / Controlador Elemental Global","description":"Concentra energia para ataques globais ou curas totais.","bonus_class":{"INT":5,"MANA":5},"requirements":["5 Habilidades Mestre em Mago Branco","5 Habilidades Mestre em Mago Negro"],"abilities":[{"name":"Piromancia","description":"Dano global de Fogo aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Aquamancia","description":"Dano global de gua aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Raiomancia","description":"Dano global de Trovo aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Whitemancia","description":"Cura global 50% HP aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Tretamancia","description":"Plasma linear de ponta a ponta.","cost":"50 MP","type":"Magia"},{"name":"Ritual Seguro","description":"Ativa Barreira/Veloz ao ser alvejado conjurando.","cost":"N/A","type":"Reao"}]},{"id":"oppenheir","name":"Oppenheir","type":"Avanada","role":"Mestre Qumico / Manipulador da Destruio","description":"Alquimia levada ao limite de exploses e reaes em cadeia.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Qumico","5 Habilidades Mestre em Qumico Avanado"],"abilities":[{"name":"Reao Altrusta","description":"Exploso de cura e remoo de status.","cost":"N/A","type":"HB"},{"name":"Nuvem Txica","description":"Veneno em rea e reduz preciso.","cost":"N/A","type":"HB"},{"name":"Ignis Vitae","description":"Chamas conscientes perseguidoras.","cost":"N/A","type":"HB"},{"name":"Fragmento Celular","description":"Microexploso de dano massivo.","cost":"N/A","type":"HB"},{"name":"Bomba Atmica","description":"Exploso que elimina todos no campo (exceto cobertura).","cost":"N/A","type":"HB"},{"name":"Entropia Perfeita","description":"Chance de remover penalidades ao explodir.","cost":"N/A","type":"Passiva"}]},{"id":"eremita","name":"Eremita","type":"Avanada","role":"Tanque / Protetor Espiritual","description":"Sacerdote de batalha que converte dano em sacrifcio e proteo.","bonus_class":{"CONS":10},"requirements":["5 Habilidades Mestre em Clrigo","+100 CONS"],"abilities":[{"name":"F ao Meu Redor","description":"Aura cura 50% HP aliados prximos.","cost":"N/A","type":"HB"},{"name":"F do Sol","description":"Raio solar expurga mortos-vivos e queima.","cost":"N/A","type":"HB"},{"name":"F da Lua","description":"Cura 100% HP aliados prximos.","cost":"N/A","type":"HB"},{"name":"F do Ferro","description":"Concede Shell+ e Barreira+.","cost":"N/A","type":"HB"},{"name":"F do Brbaro","description":"Provoca inimigos e soma CONS ao dano.","cost":"N/A","type":"HB"},{"name":"Aquele que Me Protege","description":"Converte 20% do dano recebido em cura.","cost":"N/A","type":"Passiva"}]},{"id":"arquidenio","name":"Arquidnio","type":"Avanada","role":"Suporte / Manipulador de Probabilidades","description":"Mago matemtico que manipula valores e estatsticas de combate.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Alquimista","+100 INT"],"abilities":[{"name":"O Dobro","description":"Dobra qualquer valor por 1 turno.","cost":"50 MP","type":"Magia"},{"name":"Pela Metade","description":"Divide qualquer valor por 2.","cost":"50 MP","type":"Magia"},{"name":"100%","description":"Garante acerto absoluto.","cost":"70 MP","type":"Magia"},{"name":"0%","description":"Anula valor ou chance a 0.","cost":"70 MP","type":"Magia"},{"name":"Septania","description":"Multiplica valor por 7x.","cost":"100 MP","type":"Magia"},{"name":"Lgica Perfeita","description":"Resultado natural 20 uma vez por batalha.","cost":"N/A","type":"Passiva"}]},{"id":"samurai","name":"Samurai","type":"Avanada","role":"Ofensivo / Especialista em Duelo","description":"Guerreiro disciplinado que une velocidade e fora em cortes perfeitos.","bonus_class":{"FOR":5,"VEL":5},"requirements":["5 Habilidades Mestre em Espadachim","5 Habilidades Mestre em Duelista"],"abilities":[{"name":"Saque Rpido","description":"Duplica FOR e VEL por 1 turno.","cost":"N/A","type":"HB"},{"name":"Furaco da Folha","description":"Tornado de cortes em linha reta.","cost":"N/A","type":"HB"},{"name":"Olhos de Falco","description":"Soma FOR + SOR contra alvo.","cost":"N/A","type":"HB"},{"name":"Corte do Drago","description":"Golpe instantneo. 20 natural elimina alvo.","cost":"N/A","type":"HB"},{"name":"Cu Limpo","description":"Corte vertical colossal aps preparao.","cost":"N/A","type":"HB"},{"name":"Empunhadura Dupla","description":"Pode empunhar duas armas.","cost":"N/A","type":"Passiva"}]},{"id":"gladiador","name":"Gladiador","type":"Avanada","role":"Linha de Frente / Controle e Fora Bruta","description":"Colosso de arena que luta por glria e brutalidade.","bonus_class":{"FOR":4,"CONS":2},"requirements":["2 Habilidades Mestre em Guerreiro","+30 FOR"],"abilities":[{"name":"Grito Selvagem","description":"Aumenta FOR e provoca inimigos.","cost":"N/A","type":"HB"},{"name":"Investida de Escudo","description":"Dano de impacto com escudo.","cost":"N/A","type":"HB"},{"name":"Espancamento","description":"5 golpes consecutivos, pode imobilizar.","cost":"N/A","type":"HB"},{"name":"Espada Flamejante","description":"Causa Queimadura com ataques fsicos.","cost":"N/A","type":"HB"},{"name":"Postura de Luta","description":"Evita ataques e contra-ataca.","cost":"N/A","type":"HB"},{"name":"Escudeiro","description":"Pode usar escudos em qualquer classe.","cost":"N/A","type":"Passiva"}]},{"id":"artista_marcial","name":"Artista Marcial","type":"Avanada","role":"Linha de Frente / Especialista em Combos","description":"Especialista em golpes precisos e canalizao de fora vital.","bonus_class":{"VEL":4,"CONS":2},"requirements":["2 Habilidades Mestre em Monge","+30 VEL"],"abilities":[{"name":"Combo do Tigre","description":"3 golpes, dano aumenta a cada acerto.","cost":"N/A","type":"HB"},{"name":"Golpe Serpenteante","description":"Aproximao em zigue-zague e crtico.","cost":"N/A","type":"HB"},{"name":"Palma Sagrada","description":"Golpe de dano puro que ignora armadura.","cost":"N/A","type":"HB"},{"name":"Passo do Vento","description":"Teleporte curto e ataque surpresa.","cost":"N/A","type":"HB"},{"name":"Punhos do Drago","description":"5 golpes simultneos com chance de atordoar.","cost":"N/A","type":"HB"},{"name":"Esprito Indomvel","description":"Ganha FOR e VEL quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"lanceiro","name":"Lanceiro","type":"Avanada","role":"Ofensivo / Alcance e Preciso","description":"Predador de longo alcance com lanas.","bonus_class":{"VEL":4,"SOR":2},"requirements":["2 Habilidades Mestre em Guerreiro","+30 VEL"],"abilities":[{"name":"Ponta Longa","description":"Estende alcance para 4 blocos.","cost":"N/A","type":"HB"},{"name":"Dardo de Javali","description":"Arremessa a lana perfurando linha reta.","cost":"N/A","type":"HB"},{"name":"Jump","description":"Salta e cai sobre inimigo com dano alto.","cost":"N/A","type":"HB"},{"name":"Barreira de Cabo","description":"Empurra inimigos adjacentes.","cost":"N/A","type":"HB"},{"name":"Ponta Perfurante","description":"Golpe linear que perfura alvos.","cost":"N/A","type":"HB"},{"name":"Rpido como uma Lana","description":"Converte VEL em dano quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"lutador_de_rua","name":"Lutador de Rua","type":"Avanada","role":"Ofensivo / Anti-Honra","description":"Brigo desonesto que usa fora bruta e truques sujos.","bonus_class":{"Livre":6},"requirements":["2 Habilidades Mestre em Monge","1 Habilidade Mestre em outra classe"],"abilities":[{"name":"Vou te Arrebentar!","description":"+20% dano contra alvo marcado.","cost":"N/A","type":"HB"},{"name":"Lariat de Msculos","description":"Golpe de brao com chance de Atordoar.","cost":"N/A","type":"HB"},{"name":"Soco na Costela","description":"Finta e golpe crtico preciso.","cost":"N/A","type":"HB"},{"name":"Rasteira Malandra","description":"Aplica Imobilizado.","cost":"N/A","type":"HB"},{"name":"Sequncia de Raiva","description":"5 ataques e entra em Fria.","cost":"N/A","type":"HB"},{"name":"Covarde","description":"Dobra VEL para fugir quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"vinking","name":"Vinking","type":"Avanada","role":"Brbaro Mstico","description":"Guerreiro ancestral guiado por troves e fria divina.","bonus_class":{"FOR":4,"CONS":2},"requirements":["3 Habilidades Mestre em Gladiador","+50 FOR","+50 CONS"],"abilities":[{"name":"Marchar de Heimdall","description":"Dobra VEL prpria e de aliados.","cost":"N/A","type":"HB"},{"name":"Trovo de Thor","description":"Raio cai a distncia.","cost":"N/A","type":"HB"},{"name":"Confronto de Tyr","description":"Dobra FOR por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Ma de Iduna","description":"Recupera 80% HP e remove status.","cost":"N/A","type":"HB"},{"name":"Por Odin!","description":"Aumenta todos atributos por 1 turno.","cost":"N/A","type":"HB"},{"name":"At Valhalla","description":"Converte CONS em FOR quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"templario","name":"Templrio","type":"Avanada","role":"Mobilidade Extrema / Linha de Frente","description":"Soldado perfeito que domina o campo com lana e velocidade.","bonus_class":{"VEL":4,"CONS":2},"requirements":["3 Habilidades Mestre em Lanceiro","+50 VEL","+50 FOR"],"abilities":[{"name":"Salto Rpido","description":"Teleporte para qualquer parte do mapa.","cost":"N/A","type":"HB"},{"name":"Avano Perfurante","description":"Avano linear perfurante.","cost":"N/A","type":"HB"},{"name":"Dardos Perfurantes","description":"5 ataques em sequncia.","cost":"N/A","type":"HB"},{"name":"Lana Flamejante","description":"Adiciona Fogo aos ataques.","cost":"N/A","type":"HB"},{"name":"Dardo do Drago","description":"Arremesso perfurante em linha reta.","cost":"N/A","type":"HB"},{"name":"Lana Giratria","description":"Evita ataques  distncia.","cost":"N/A","type":"Reao"}]},{"id":"mestre_artes_marciais","name":"Mestre das Artes Marciais","type":"Avanada","role":"Duelista / Manipulador de Ki","description":"Harmonia total entre corpo e Ki.","bonus_class":{"CONS":4,"Livre":2},"requirements":["5 Habilidades Mestre em Monge","5 Habilidades Mestre em Artista Marcial"],"abilities":[{"name":"Dana do Carvalho Vermelho","description":"Combo de 5 golpes de vento.","cost":"N/A","type":"HB"},{"name":"Palma do Drago","description":"Ondas de ar  distncia.","cost":"N/A","type":"HB"},{"name":"Teken","description":"Dobra ARM e RES por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Dana do Sabugueiro Marrom","description":"Reduz ARM do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Dana do Esprito Branco","description":"Clone dobra aes por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Intuio de Ki","description":"Imune a surpresas.","cost":"N/A","type":"Passiva"}]},{"id":"brutamontes","name":"Brutamontes","type":"Avanada","role":"Tanque Ofensivo","description":"Muralha do submundo que protege e esmaga.","bonus_class":{"CAR":4,"SOR":2},"requirements":["5 Habilidades Mestre em Lutador de Rua","100 FOR"],"abilities":[{"name":"No Vai Passar","description":"Bloqueia avano inimigo e dobra defesa.","cost":"N/A","type":"HB"},{"name":"Lariat Duplo","description":"Arrasta inimigos adjacentes.","cost":"N/A","type":"HB"},{"name":"Emboscada","description":"Recupera HP e contra-ataca quem aproximar.","cost":"N/A","type":"HB"},{"name":"Pose do Brutamontes","description":"Salto esmagador com onda de choque.","cost":"N/A","type":"HB"},{"name":"Manda-Chuva","description":"Buffa aliados e debuffa inimigos em rea.","cost":"N/A","type":"HB"},{"name":"Fraco Demais","description":"Nega dano menor que sua FOR.","cost":"N/A","type":"Passiva"}]},{"id":"cavaleiro_dragao","name":"Cavaleiro Drago","type":"Avanada","role":"Caador de Drages / Ofensivo Elemental","description":"Guerreiros que usam poderes de drago.","bonus_class":{"CONS":5,"BonusDanoDragao":"20%"},"requirements":["Eliminar um Drago"],"abilities":[{"name":"Bafo do Drago Vermelho","description":"Fogo em rea triangular.","cost":"N/A","type":"HB"},{"name":"Garras do Drago Ciano","description":"Golpe de gelo com avano.","cost":"N/A","type":"HB"},{"name":"Salto do Drago Amarelo","description":"Salto eltrico (1 turno no ar).","cost":"N/A","type":"HB"},{"name":"Beno do Drago Azul","description":"Cura 50% HP.","cost":"N/A","type":"HB"},{"name":"Energia do Drago Branco","description":"Raio de luz linear.","cost":"N/A","type":"HB"},{"name":"Aura de Drago","description":"Monstros fracos sentem medo.","cost":"N/A","type":"Passiva"}]},{"id":"dragonslayer","name":"Dragonslayer","type":"Avanada","role":"Anti-Drago / Executador","description":"Arma final contra drages, capaz de subjugar feras colossais.","bonus_class":{"FOR":6,"BonusDanoDragao":"60%"},"requirements":["5 Habilidades Mestre em Cavaleiro Drago"],"abilities":[{"name":"Sopro do Drago Esmeralda","description":"Nuvem txica em rea.","cost":"N/A","type":"HB"},{"name":"Rasante do Drago Prateado","description":"Rasante de vento linear mapa todo.","cost":"N/A","type":"HB"},{"name":"Escamas do Drago Ouro","description":"Dobra ARM e RES.","cost":"N/A","type":"HB"},{"name":"Tremor do Drago de Bronze","description":"Estacas de pedra e tremor.","cost":"N/A","type":"HB"},{"name":"Ameaa do Drago Negro","description":"Miasma negra aplica Condenao.","cost":"N/A","type":"HB"},{"name":"Escamas Elementais","description":"Absorve dano elemental convertendo em CONS.","cost":"N/A","type":"Passiva"}]},{"id":"xama","name":"Xam","type":"Avanada","role":"Debuff / Manipulador de Caos","description":"Lida com foras ocultas e ancestrais dos pntanos.","bonus_class":{"MANA":3,"CONS":2},"requirements":["2 Habilidades Mestre em Curandeiro","+30 MANA"],"abilities":[{"name":"Xabala Cegaris","description":"Cega alvo por 5 turnos.","cost":"15 MP","type":"Magia"},{"name":"Ziriki Sileci","description":"Silencia alvo por 5 turnos.","cost":"15 MP","type":"Magia"},{"name":"Urucubaca","description":"Aplica Envenenamento.","cost":"20 MP","type":"Magia"},{"name":"Ianhamaj","description":"Imobiliza alvo por 5 turnos.","cost":"20 MP","type":"Magia"},{"name":"Zakarinhad","description":"Aplica Condenao.","cost":"30 MP","type":"Magia"},{"name":"Oshala","description":"Imune a status negativos.","cost":"N/A","type":"Passiva"}]},{"id":"monge_do_pantano","name":"Monge do Pntano","type":"Avanada","role":"Lutador de Terreno / Porradeiro","description":"Canaliza a densidade do pntano em golpes pesados.","bonus_class":{"CONS":3,"FOR":2},"requirements":["1 Habilidade Mestre em Curandeiro","1 Habilidade Mestre em Escudeiro","+20 FOR"],"abilities":[{"name":"Soco do Pntano","description":"Golpe aqutico carregado.","cost":"N/A","type":"HB"},{"name":"Barrigada","description":"Esmaga e empurra.","cost":"N/A","type":"HB"},{"name":"Vu do Pntano","description":"Dobra RES por 3 turnos.","cost":"N/A","type":"HB"},{"name":"Abrao do Pntano","description":"Agarro esmagador.","cost":"N/A","type":"HB"},{"name":"Boxe do Pntano","description":"3 golpes consecutivos pantanosos.","cost":"N/A","type":"HB"},{"name":"gua Est Comigo","description":"Dobra dano em terreno de gua.","cost":"N/A","type":"Passiva"}]},{"id":"glutao","name":"Gluto","type":"Avanada","role":"Tank / Absorvedor de Dano","description":"Foras da natureza famintas e indestrutveis.","bonus_class":{"CONS":5},"requirements":["1 Habilidade Mestre em Curandeiro","1 Habilidade Mestre em Escudeiro","+20 CONS"],"abilities":[{"name":"Investida do Sapo","description":"Atropela em linha reta.","cost":"N/A","type":"HB"},{"name":"Descanso do Sapo","description":"Cura e dobra defesa (imvel).","cost":"N/A","type":"HB"},{"name":"Arroto do Sapo","description":"Dano de impacto sonoro.","cost":"N/A","type":"HB"},{"name":"Pulo do Sapo","description":"Esmaga alvo com peso.","cost":"N/A","type":"HB"},{"name":"Vou Te Comer","description":"Devora inimigo com 25% HP ou menos.","cost":"N/A","type":"HB"},{"name":"Boca Sempre Mexendo","description":"Recupera 10% HP se no agir.","cost":"N/A","type":"Passiva"}]},{"id":"protetor","name":"Protetor","type":"Avanada","role":"Tank / Guardio de Campo","description":"Muralhas vivas dedicadas a proteger aliados.","bonus_class":{"CONS":5},"requirements":["2 Habilidades Mestre em Escudeiro","+30 CONS"],"abilities":[{"name":"Eu Tanko, Voc Mata","description":"Absorve 80% do dano de aliado e buffa FOR dele.","cost":"N/A","type":"HB"},{"name":"Investida do Escudo","description":"Corre com escudo e atordoa.","cost":"N/A","type":"HB"},{"name":"Reflexo do Escudo","description":"Escudo ricocheteia em inimigos.","cost":"N/A","type":"HB"},{"name":"Sapo Protetor","description":"Compartilha defesa com aliados ao redor.","cost":"N/A","type":"HB"},{"name":"Escudo de Proteo Areo","description":"Anula prximo dano em aliado.","cost":"N/A","type":"HB"},{"name":"Socorros Rpidos","description":"Salta para tomar golpe por aliado.","cost":"N/A","type":"Reao"}]},{"id":"pai_do_pantano","name":"Pai do Pntano","type":"Avanada","role":"Mago de Terreno / Controle","description":"Tornou-se um com o pntano, controlando razes e mars.","bonus_class":{"MANA":6},"requirements":["5 Habilidades Mestre em Xam","5 Habilidades Mestre em Curandeiro"],"abilities":[{"name":"Razes do Sabugueiro de Ihoa","description":"Imobiliza inimigos em rea.","cost":"50 MP","type":"Magia"},{"name":"Pico dos Pinheiros","description":"Pinheiros empalam inimigos.","cost":"50 MP","type":"Magia"},{"name":"Gota de Orvalho","description":"Cura 100% HP e remove status (rea).","cost":"50 MP","type":"Magia"},{"name":"Primavera Serena","description":"Dobra INT e RES de aliados.","cost":"40 MP","type":"Magia"},{"name":"Mar do Mangue","description":"Empurra inimigos, remove buffs e cura aliados (global).","cost":"100 MP","type":"Magia"},{"name":"Floresta Viva","description":"Razes prendem inimigos engajados.","cost":"N/A","type":"Passiva"}]},{"id":"sabio_do_pantano","name":"Sbio do Pntano","type":"Avanada","role":"Controle de gua / Contra-Golpe","description":"Domina a energia viva do pntano com constituio colossal.","bonus_class":{"CONS":6},"requirements":["5 Habilidades Mestre em Monge do Pntano","+100 CONS"],"abilities":[{"name":"Punho do Pntano","description":"Ataques ganham elemento gua.","cost":"N/A","type":"Passiva"},{"name":"Serpente do Pntano","description":"Ataque linear de gua.","cost":"N/A","type":"HB"},{"name":"AquaReflete","description":"Esfera de gua empurra alvo.","cost":"N/A","type":"HB"},{"name":"Pantanogan","description":"Esfera de gua empurra alvo.","cost":"N/A","type":"HB"},{"name":"Bola de Canho","description":"Projtil vivo de dano massivo.","cost":"N/A","type":"HB"},{"name":"Contra-Corpo","description":"Contra-ataca fsico e empurra.","cost":"N/A","type":"Reao"}]},{"id":"burgues_do_pantano","name":"Burgus do Pntano","type":"Avanada","role":"Tanque / Controle","description":"Suprema ganncia, usa corpo colossal e autoridade.","bonus_class":{"CONS":6},"requirements":["5 Habilidades Mestre em Gluto","+100 CONS"],"abilities":[{"name":"Imposto do Pntano","description":"Rouba 20% HP do alvo e remove buff.","cost":"N/A","type":"HB"},{"name":"Barriga Monrquica","description":"Dobra defesa e bloqueia passagem.","cost":"N/A","type":"HB"},{"name":"Banquete Exclusivo","description":"Cura 100% HP e ganha Fria.","cost":"N/A","type":"HB"},{"name":"Tesouro do Pntano","description":"Exploso de cofre.","cost":"N/A","type":"HB"},{"name":"Decreto de Propriedade","description":"Debuffa inimigos e buffa aliados em rea.","cost":"N/A","type":"HB"},{"name":"Soberania do Pntano","description":"Cura ao aproximar inimigo e aplica Lentido.","cost":"N/A","type":"Passiva"}]},{"id":"guardiao_do_pantano","name":"Guardio do Pntano","type":"Avanada","role":"Tanque / Suporte Supremo","description":"Monlito vivo que ergue muralhas de escudos.","bonus_class":{"CONS":10},"requirements":["5 Habilidades Mestre em Escudeiro","5 Habilidades Mestre em Protetor"],"abilities":[{"name":"Priso de Escudo","description":"Prende alvo em 4 escudos.","cost":"N/A","type":"HB"},{"name":"Dobro de Escudo","description":"Dobra qualquer escudo em jogo.","cost":"N/A","type":"HB"},{"name":"Grande Escudo","description":"Protege rea enorme atrs dele.","cost":"N/A","type":"HB"},{"name":"Escudo Revitalizador","description":"Cura 100% HP rea.","cost":"N/A","type":"HB"},{"name":"Proteo em Grande Escala","description":"Anula prximo dano em TODOS aliados.","cost":"N/A","type":"HB"},{"name":"Proteo Mgica","description":"Usa habilidade de proteo em aliado alvejado.","cost":"N/A","type":"Reao"}]},{"id":"cantor_das_mares","name":"Cantor das Mars","type":"Avanada","role":"Suporte / Buffer Musical","description":"Bardos que usam melodias espirituais.","bonus_class":{"CAR":5},"requirements":["+50 CAR"],"abilities":[{"name":"Cantar","description":"Executa msica do repertrio (efeitos variados).","cost":"N/A","type":"HB"},{"name":"Palco Improvisado","description":"Dobro de efeito se estiver em terreno elevado.","cost":"N/A","type":"Passiva"}]},{"id":"astro_do_pantano","name":"Astro do Pntano","type":"Avanada","role":"Suporte Musical / Manipulador de Moral","description":"cone musical que move multides.","bonus_class":{"CAR":10},"requirements":["Ttulo musical com Cantor das Mars"],"abilities":[{"name":"Mashup","description":"Combina duas msicas simultneas.","cost":"N/A","type":"HB"},{"name":"Charme Musical","description":"Enfeitia atacante.","cost":"N/A","type":"Reao"}]},{"id":"sutileira","name":"Sutileira","type":"Avanada","role":"Roubo de Elite / Suporte Social","description":"Ladras de alta classe, elegantes e imperceptveis.","bonus_class":{"CAR":3,"SOR":2},"requirements":["2 Habilidades Mestre em Ladra","+20 SOR"],"abilities":[{"name":"Roubar Arma Principal","description":"Furta a arma equipada do alvo.","cost":"N/A","type":"HB"},{"name":"Roubar Acessrios","description":"Furta anis/colares.","cost":"N/A","type":"HB"},{"name":"Roubar Item de Luxo","description":"Furta item mais raro.","cost":"N/A","type":"HB"},{"name":"Detectar Armadilhas","description":"Percebe armadilhas em raio de 5 blocos.","cost":"N/A","type":"HB"},{"name":"Famme Fatale","description":"Encanta alvo e pode aplicar Condenao.","cost":"N/A","type":"HB"},{"name":"Mestre dos Assaltos","description":"No ativa armadilhas.","cost":"N/A","type":"Passiva"}]},{"id":"rastreadora_avancada","name":"Rastreadora (Avanada)","type":"Avanada","role":"Dano / Furtividade / Controle","description":"Felinas letais que unem furtividade com caa predatria.","bonus_class":{"SOR":3,"VEL":2},"requirements":["2 Habilidades Mestre em Espreitadora","+20 VEL"],"abilities":[{"name":"Cheiro do Medo","description":"Dobra MOV na direo do alvo.","cost":"N/A","type":"HB"},{"name":"Detectar Fraqueza","description":"Prximo ataque soma SOR ao dano.","cost":"N/A","type":"HB"},{"name":"Colocar Armadilhas","description":"Instala armadilha no campo.","cost":"N/A","type":"HB"},{"name":"Salto da Morte","description":"Ataque de cima com bnus de SOR.","cost":"N/A","type":"HB"},{"name":"Morte em Sequncia","description":"Golpe linear em todos no trajeto.","cost":"N/A","type":"HB"},{"name":"Contra Ataque","description":"Contra-ataca fsico adjacente.","cost":"N/A","type":"Reao"}]},{"id":"kunoichi","name":"Kunoichi","type":"Avanada","role":"Ninjutsu / Controle Elemental","description":"Assassinas discretas que usam iluses e ninjutsu.","bonus_class":{"INT":3,"SOR":2},"requirements":["2 Habilidades Mestre em Ladra","2 Habilidades Mestre em Espreitadora"],"abilities":[{"name":"Arremesso de Kunai","description":"Kunai amplificada com INT.","cost":"N/A","type":"HB"},{"name":"Bomba de Fumaa","description":"Fica camuflada instantaneamente.","cost":"N/A","type":"HB"},{"name":"Genjutsu","description":"Iluso causa Confuso.","cost":"25 MP","type":"Magia"},{"name":"Suiton","description":"Vrtice de gua (INT+gua).","cost":"30 MP","type":"Magia"},{"name":"Doton","description":"Pilar de terra (INT+Terra).","cost":"30 MP","type":"Magia"},{"name":"Clone das Sombras","description":"Clone repete ninjutsu.","cost":"N/A","type":"Passiva"}]},{"id":"chefona","name":"Chefona","type":"Avanada","role":"DPS / Suporte Criminoso","description":"Mandachuva do crime que usa pistolas e capangas.","bonus_class":{"SOR":6},"requirements":["5 Habilidades Mestre em Ladra","5 Habilidades Mestre em Sutileira","+100 SOR"],"abilities":[{"name":"Paredo","description":"Saraivada de balas em alvo.","cost":"N/A","type":"HB"},{"name":"Tiroteio","description":"Tiros em rea ao redor.","cost":"N/A","type":"HB"},{"name":"Estragar o Velrio","description":"Tiro na cabea (morte instantnea) se camuflada.","cost":"N/A","type":"HB"},{"name":"Bora Rapaziada","description":"Buffa MOV e VEL de aliados.","cost":"N/A","type":"HB"},{"name":"Meus Capangas","description":"Invoca 2 capangas.","cost":"N/A","type":"HB"},{"name":"Dois Ferros","description":"Pode usar duas armas de fogo.","cost":"N/A","type":"Passiva"}]},{"id":"assassina","name":"Assassina","type":"Avanada","role":"Eliminadora de Alvos","description":"Lenda das sombras, elimina alvos silenciosamente.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Espreitadora","5 Habilidades Mestre em Rastreadora","+100 SOR"],"abilities":[{"name":"Lmina de Veneno","description":"Ataques causam Envenenamento.","cost":"N/A","type":"HB"},{"name":"Sombras Caminhantes","description":"Teleporte via sombras.","cost":"N/A","type":"HB"},{"name":"Tendes Frgeis","description":"Aplica Imobilizado.","cost":"N/A","type":"HB"},{"name":"Instinto Assassino","description":"Causa Medo em alvos com <20% HP.","cost":"N/A","type":"Passiva"},{"name":"Frenesi das Sombras","description":"Fria de sombra, dobra VEL.","cost":"N/A","type":"HB"},{"name":"Minha Garrucha","description":"Finaliza alvo com <15% HP.","cost":"N/A","type":"Reao"}]},{"id":"jounin","name":"Jounin","type":"Avanada","role":"Mestre Elemental / Ttico","description":"Elite ninja que domina ninjutsu avanado.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Kunoichi","+100 INT"],"abilities":[{"name":"Futon","description":"5 lminas de ar em alvos diversos.","cost":"50 MP","type":"Magia"},{"name":"Raiton","description":"5 troves em alvos diversos.","cost":"50 MP","type":"Magia"},{"name":"Katon","description":"Esfera de fogo linear larga.","cost":"50 MP","type":"Magia"},{"name":"Embuir Arma","description":"Infunde arma com elemento.","cost":"30 MP","type":"Magia"},{"name":"Invocao","description":"Invoca animal ninja (D20).","cost":"N/A","type":"HB"},{"name":"Substituio","description":"Troca com tronco ao ser alvejada.","cost":"N/A","type":"Reao"}]},{"id":"dancarina","name":"Danarina","type":"Avanada","role":"Performer Mstica","description":"Transforma o campo em palco com performances mgicas.","bonus_class":{"CAR":5},"requirements":["+50 CAR"],"abilities":[{"name":"Danar","description":"Executa performance ligada ao equipamento.","cost":"N/A","type":"HB"},{"name":"Pirueta Defensiva","description":"Chance de esquivar de ataque fsico.","cost":"N/A","type":"Reao"}]},{"id":"odalisca_de_batalha","name":"Odalisca de Batalha","type":"Avanada","role":"Suporte Supremo / DPS Elegante","description":"Danarina de elite com armas exticas e danas agressivas.","bonus_class":{"CAR":10},"requirements":["4 Performances de Danarina"],"abilities":[{"name":"Swicth","description":"Troca equipamento de dana sem gastar ao.","cost":"N/A","type":"HB"},{"name":"Mestre da Dana","description":"Equipa dois instrumentos simultneos.","cost":"N/A","type":"Passiva"}]},{"id":"cavaleira_alada","name":"Cavaleira Alada","type":"Avanada","role":"Duelista Area","description":"Elite militar do cu, mergulha com velocidade devastadora.","bonus_class":{"FOR":3,"VEL":2},"requirements":["3 Habilidades Mestre em Raptora","+30 FOR"],"abilities":[{"name":"Por Glria","description":"Buffa FOR de aliados.","cost":"N/A","type":"HB"},{"name":"Redemoinho de Lmina","description":"Corte circular de vento.","cost":"N/A","type":"HB"},{"name":"Brisa da Guerra","description":"Ataques ganham lmina de vento extra.","cost":"N/A","type":"HB"},{"name":"Slash de Vento","description":"Lmina de ar  distncia.","cost":"N/A","type":"HB"},{"name":"Suplex Aero","description":"Agarra e arremessa inimigo do cu.","cost":"N/A","type":"HB"},{"name":"Escudo Meu","description":"Pode usar escudos.","cost":"N/A","type":"Passiva"}]},{"id":"cacadora_alada","name":"Caadora Alada","type":"Avanada","role":"DPS / Rastreio","description":"Predadora do cu com viso aguada e arco.","bonus_class":{"VEL":3,"SOR":2},"requirements":["3 Habilidades Mestre em Ranged","+30 VEL"],"abilities":[{"name":"Animal Guia","description":"Invoca esprito animal companheiro.","cost":"N/A","type":"HB"},{"name":"Camuflagem","description":"Entra em camuflagem.","cost":"N/A","type":"HB"},{"name":"Saraivada Area","description":"Chuva de flechas em rea.","cost":"N/A","type":"HB"},{"name":"Colocar Armadilhas","description":"Posiciona armadilha.","cost":"N/A","type":"HB"},{"name":"Tiro Avanado","description":"Flecha colossal linear (Arco Grande).","cost":"N/A","type":"HB"},{"name":"Tiro Duplo","description":"Dispara duas flechas por ataque.","cost":"N/A","type":"Passiva"}]},{"id":"terrana","name":"Terrana","type":"Avanada","role":"Lutadora Arcana / Terra","description":"Devotada  fora bruta da terra, usa martelos e magia.","bonus_class":{"INT":3,"MANA":2},"requirements":["1 Habilidade Mestre em Raptora","1 Habilidade Mestre em Ranged","+30 INT"],"abilities":[{"name":"Me Terra","description":"Cura em rea ao bater martelo.","cost":"20 MP","type":"Magia"},{"name":"Fissura Terrana","description":"Cria fissura no solo.","cost":"30 MP","type":"Magia"},{"name":"A Terra Sobre Mim","description":"Armadura de rocha (dobra AMR/RES).","cost":"20 MP","type":"Magia"},{"name":"Pilar do Martelo","description":"Ataque  distncia com pilar.","cost":"40 MP","type":"Magia"},{"name":"Terremoto Aero","description":"Impacto ssmico ao saltar.","cost":"50 MP","type":"Magia"},{"name":"Vibrao do Solo","description":"Detecta inimigos no solo.","cost":"N/A","type":"Passiva"}]},{"id":"devastadora","name":"Devastadora","type":"Avanada","role":"Dano Areo / Linha de Frente","description":"Especialista em combate areo com espades colossais.","bonus_class":{"FOR":4,"VEL":2},"requirements":["5 Habilidades Mestre em Raptora","5 Habilidades Mestre em Cavaleira Alada","+100 FOR"],"abilities":[{"name":"Ventania do Espado","description":"Empurra alvos com vento.","cost":"N/A","type":"HB"},{"name":"Arrasante Cortante","description":"Corte em alta velocidade.","cost":"N/A","type":"HB"},{"name":"Furaco de Lminas","description":"Tornado de lminas em rea.","cost":"N/A","type":"HB"},{"name":"Rpida e Veloz","description":"Dobra VEL.","cost":"N/A","type":"HB"},{"name":"Corte da Montanha","description":"Corte colossal de vento.","cost":"N/A","type":"HB"},{"name":"Contra-ataque do Vento","description":"Rebate fsico e empurra.","cost":"N/A","type":"Reao"}]},{"id":"atiradora_dos_ceus","name":"Atiradora dos Cus","type":"Avanada","role":"DPS Area","description":"Caadora suprema que domina territrios do ar.","bonus_class":{"VEL":4,"SOR":2},"requirements":["5 Habilidades Mestre em Ranged","5 Habilidades Mestre em Caadora Alada","+100 VEL"],"abilities":[{"name":"Ataque Areo","description":"Disparo vertical preciso.","cost":"N/A","type":"HB"},{"name":"Reposicionamento Areo","description":"Voo rpido e ataque.","cost":"N/A","type":"HB"},{"name":"Bombardeio Areo","description":"Atinge inimigos no trajeto de voo.","cost":"N/A","type":"HB"},{"name":"Alvo Marcado","description":"Marca alvo adicionando SOR ao dano.","cost":"N/A","type":"HB"},{"name":"Alvos Certeiros","description":"Tiros perfeitos em 5 alvos.","cost":"N/A","type":"HB"},{"name":"Minha Flecha  Melhor","description":"Desvia de projtil e contra-ataca.","cost":"N/A","type":"Reao"}]},{"id":"geomancer","name":"Geomancer","type":"Avanada","role":"Maga Elemental / Joias","description":"Maga que desperta poder oculto de joias antigas.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Terrana","+100 INT"],"abilities":[{"name":"Ressonncia","description":"Disparo elemental da joia.","cost":"30 MP","type":"Magia"},{"name":"Jia Equipada","description":"Engata joia na arma (dano elemental).","cost":"N/A","type":"HB"},{"name":"Joia Astral","description":"Buff poderoso da joia.","cost":"30 MP","type":"Magia"},{"name":"Sacrifcio da Jia","description":"Destri joia para duplicar efeito.","cost":"40 MP","type":"Magia"},{"name":"Triplo Gen","description":"Feixe combinado de 3 joias.","cost":"70 MP","type":"Magia"},{"name":"Joalheira","description":"Troca de joias sem gastar ao.","cost":"N/A","type":"Passiva"}]},{"id":"demon","name":"Demon","type":"Avanada","role":"Ameaa / Controle","description":"Guerreiras marcadas pela morte, brutais e imprevisveis.","bonus_class":{"Livre":5},"requirements":["Voltar da morte 10 vezes"],"abilities":[{"name":"Rugido do Demnio","description":"Aplica Medo em rea.","cost":"N/A","type":"HB"},{"name":"Vampirismo","description":"Rouba HP do alvo.","cost":"N/A","type":"HB"},{"name":"Consumir Arma","description":"Destri arma para ganhar status.","cost":"N/A","type":"HB"},{"name":"Embuir Demon","description":"Infunde arma com escurido.","cost":"N/A","type":"HB"},{"name":"Demon Ark","description":"Aplica Medo/Condenao/Morte.","cost":"N/A","type":"HB"},{"name":"Mestre de Armas","description":"Equipa arma instantaneamente.","cost":"N/A","type":"Passiva"}]},{"id":"lord_demon","name":"Lord Demon","type":"Avanada","role":"Senhora da Morte","description":"pice da linhagem demonaca, comanda almas.","bonus_class":{"Livre":10},"requirements":["5 Habilidades Mestre em Demon","Colher 100 almas"],"abilities":[{"name":"Dark Esfera","description":"Absorve alma de inimigos com Medo.","cost":"N/A","type":"HB"},{"name":"Colheita","description":"Suga alma de alvo com Medo (Morte).","cost":"N/A","type":"HB"},{"name":"Aura da Lord","description":"Dobra RES e fora Medo.","cost":"N/A","type":"HB"},{"name":"Dark Arma","description":"Lana armas sacrificadas.","cost":"N/A","type":"HB"},{"name":"ltimo Rugido","description":"Medo global e morte em quem j tem.","cost":"N/A","type":"HB"},{"name":"Tenha Medo de Mim","description":"Chance de aplicar Medo ao receber dano.","cost":"N/A","type":"Reao"}]},{"id":"magos_elementais","name":"Magos Elementais","type":"Avanada","role":"DPS Mgico de rea","description":"Umbros que transformam magia em cataclismos.","bonus_class":{"INT":3,"MANA":2},"requirements":["3 Habilidades Mestre em Mago Negro","+30 INT"],"abilities":[{"name":"Fire+","description":"Exploso de fogo grande rea.","cost":"20 MP","type":"Magia"},{"name":"Blizzard+","description":"Estilhaos de gelo grande rea.","cost":"20 MP","type":"Magia"},{"name":"Thunder+","description":"Trovo colossal em rea.","cost":"20 MP","type":"Magia"},{"name":"Maremoto","description":"Onda empurra inimigos.","cost":"40 MP","type":"Magia"},{"name":"Trifsico","description":"Combina 3 elementos em exploso.","cost":"50 MP","type":"Magia"},{"name":"Manto Refletor","description":"Reflete magia com 50% dano.","cost":"N/A","type":"Reao"}]},{"id":"arcanistas","name":"Arcanistas","type":"Avanada","role":"Maldies / Invocador","description":"Preservam artes proibidas e invocam demnios.","bonus_class":{"MANA":3,"INT":2},"requirements":["3 Habilidades Mestre em Ocultista","+50 MANA"],"abilities":[{"name":"Escurido+","description":"Exploso de trevas.","cost":"25 MP","type":"Magia"},{"name":"Cruz Mana","description":"Drena Mana.","cost":"30 MP","type":"Magia"},{"name":"Sentidus Mortis","description":"Remove sentidos (Silncio/Cegueira).","cost":"40 MP","type":"Magia"},{"name":"Petrificatis","description":"Petrifica alvo.","cost":"40 MP","type":"Magia"},{"name":"Invocar Demnio Menor","description":"Invoca demnio (D20).","cost":"50 MP","type":"Magia"},{"name":"Pacto","description":"Dobra VEL e RES com demnio ativo.","cost":"N/A","type":"Passiva"}]},{"id":"malandro","name":"Malandro","type":"Avanada","role":"Suporte Social / Manipulao","description":"Usa lbia e cartas para manipular o campo.","bonus_class":{"CAR":3,"SOR":2},"requirements":["+20 CAR"],"abilities":[{"name":"Fala Positiva","description":"Dobra atributo de alvo.","cost":"N/A","type":"HB"},{"name":"Fala Negativa","description":"Reduz atributo pela metade.","cost":"N/A","type":"HB"},{"name":"Carta Voadora","description":"Carta ricocheteia em alvos.","cost":"N/A","type":"HB"},{"name":"Carta Marcada","description":"Dobra dano recebido pelo alvo.","cost":"N/A","type":"HB"},{"name":"Malabarismo de Cartas","description":"Impede movimentos em rea.","cost":"N/A","type":"HB"},{"name":"Fala Mansa","description":"Chance de convencer atacante a desistir.","cost":"N/A","type":"Reao"}]},{"id":"arquimagos","name":"Arquimagos","type":"Avanada","role":"DPS Mgico Supremo","description":"Moldam elementos, invocando meteoros e tempestades.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Mago Negro","5 Habilidades Mestre em Mago Elemental","+100 INT"],"abilities":[{"name":"Meteoro","description":"Destruio massiva em rea.","cost":"100 MP","type":"Magia"},{"name":"Vrtex de Fogo","description":"Vrtex que queima rea por turnos.","cost":"50 MP","type":"Magia"},{"name":"Chuva de Raios","description":"Atinge inimigos aleatrios por turnos.","cost":"50 MP","type":"Magia"},{"name":"Nevasca Afiada","description":"Estalactites aleatrias por turnos.","cost":"50 MP","type":"Magia"},{"name":"Super Lua","description":"Lua cura aliados e permanece.","cost":"80 MP","type":"Magia"},{"name":"OVER LUNA","description":"Ignora RES sob efeito da Lua.","cost":"N/A","type":"Passiva"}]},{"id":"necromago","name":"Necromago","type":"Avanada","role":"Controle Absoluto / Necromancia","description":"Traz mortos e usa rituais profanos.","bonus_class":{"MANA":10},"requirements":["5 Habilidades Mestre em Ocultista","5 Habilidades Mestre em Arcanista","+100 INT"],"abilities":[{"name":"Necromancia","description":"Controla alma cada.","cost":"70 MP","type":"Magia"},{"name":"Mortis Dorner","description":"Tenta Morte Instantnea.","cost":"40 MP","type":"Magia"},{"name":"Redoma Sentis","description":"Cega e Silencia rea ao redor.","cost":"50 MP","type":"Magia"},{"name":"Invocar Demnio Superior","description":"Invoca demnio brutal (D20).","cost":"90 MP","type":"Magia"},{"name":"Buraco Negro","description":"Remove todos do campo.","cost":"200 MP","type":"Magia"},{"name":"Toque da Morte","description":"Chance de Condenao ao ser atacado.","cost":"N/A","type":"Reao"}]},{"id":"king_street","name":"King Street","type":"Avanada","role":"Controle Mental / Dominao Social","description":"Rei das ruas que controla vontades com a voz.","bonus_class":{"CAR":10},"requirements":["5 Habilidades Mestre em Malandro","+100 CAR"],"abilities":[{"name":"Corra!","description":"Impulsiona mobilidade de alvo.","cost":"N/A","type":"HB"},{"name":"Beleza Sedutora","description":"Encanta alvos em rea.","cost":"N/A","type":"HB"},{"name":"Ajoelhe-se","description":"Obriga inimigos a se ajoelharem.","cost":"N/A","type":"HB"},{"name":" Sua Vez de Novo","description":"Concede ao extra a aliado.","cost":"N/A","type":"HB"},{"name":"Charme do Malandro","description":"Transforma inimigo em aliado.","cost":"N/A","type":"HB"},{"name":"Estrondo Vocal","description":"Atinge todos atributos do alvo.","cost":"N/A","type":"Passiva"}]},{"id":"apostador","name":"Apostador","type":"Avanada","role":"Manipulador de Probabilidades","description":"Usa baralho especial para efeitos aleatrios poderosos.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Malandro","+100 SOR"],"abilities":[{"name":"Escolha uma Carta","description":"Puxa carta (D80) com efeito contnuo.","cost":"N/A","type":"HB"},{"name":"Valete Rpido","description":"Dobra status fsicos (Carta Valete).","cost":"N/A","type":"HB"},{"name":"Dama Salvadora","description":"Cura e remove status (Carta Dama).","cost":"N/A","type":"HB"},{"name":"Rei do Poder","description":"Exploso em rea (Carta Rei).","cost":"N/A","type":"HB"},{"name":"s da Sorte","description":"Puxa todas cartas (Carta s).","cost":"N/A","type":"HB"},{"name":"Carta na Manga","description":"Troca carta guardada instantaneamente.","cost":"N/A","type":"Passiva"}]},{"id":"shadow_hunters","name":"Shadow Hunters","type":"Avanada","role":"Invocador Sombrio","description":"Extrai sombras de mortos para lutar.","bonus_class":{"Livre":10},"requirements":["Chegar a 1 HP em batalha 100 vezes"],"abilities":[{"name":"Erga-se","description":"Extrai sombra de cadver como soldado.","cost":"N/A","type":"HB"},{"name":"Sombra Salvadora","description":"Sombra absorve dano fatal.","cost":"N/A","type":"Reao"}]},{"id":"monarca_das_sombras","name":"Monarca das Sombras","type":"Avanada","role":"Exrcito Vivo","description":"Comanda exrcito sombrio sozinho.","bonus_class":{"Livre":10},"requirements":["Possuir 4 sombras no nvel 10"],"abilities":[{"name":"Troca de Sombra","description":"Troca de lugar com sombra.","cost":"N/A","type":"HB"},{"name":"Retorno das Sombras","description":"Cura ao perder sombra.","cost":"N/A","type":"Passiva"}]}]`),D5={classes:O5},M5=()=>{const i=Yi(),e=w.useRef(null),[n,s]=w.useState("carousel"),[o,c]=w.useState(0),[f,m]=w.useState(null),[g,y]=w.useState("female"),[_,E]=w.useState(null),[T,V]=w.useState(!1),[U,L]=w.useState(""),[O,X]=w.useState(!1),Q=k5.races;w.useEffect(()=>{zt&&(zt.pause(),zt.currentTime=0)},[]),w.useEffect(()=>{(async()=>{if(jt.currentUser)try{const C=ze(Ae,"characters",jt.currentUser.uid);(await kd(C)).exists()&&(console.log("Personagem j existe. Redirecionando..."),i("/jogador-vtt"))}catch(C){console.error("Erro ao verificar personagem:",C)}})()},[i]),w.useEffect(()=>{document.querySelectorAll("audio, video").forEach(R=>{if(!(R.tagName==="VIDEO"&&R.classList.contains("background-video")))try{R.pause(),R.currentTime=0}catch{}})},[]),w.useEffect(()=>{if(n==="carousel"&&e.current){const C=window.innerWidth/2-130,R=o*300-C+130;e.current.scrollTo({left:R,behavior:"smooth"})}},[o,n]);const te=k=>{e.current&&(e.current.scrollLeft+=k.deltaY*4)},ie=k=>{if(!k)return"Nenhum";const C={value:"Valor",detail:"Detalhes",details:"Detalhes",free_points:"Pontos Livres",female:"Feminino",male:"Masculino",male_exiled:"Masculino (Exilado)"};return typeof k=="object"?Object.entries(k).map(([R,Se],ae)=>{if(R==="type")return null;const H=C[R]||R.toUpperCase().replace(/_/g," ");let re=Se;return typeof Se=="object"&&(re=JSON.stringify(Se).replace(/["{}]/g,"").replace(/:/g,": ").replace(/,/g,", ")),u.jsxs("div",{className:"mb-1",children:[u.jsxs("span",{className:"text-gray-400 font-bold",children:[H,":"]})," ",u.jsx("span",{className:"text-gray-200",children:re})]},ae)}):k},pe=()=>f?typeof f.base_classes=="object"&&!Array.isArray(f.base_classes)?f.id==="viera"?g==="female"?f.base_classes.female:f.base_classes.male||f.base_classes.male_exiled:[]:f.base_classes||[]:[],fe=k=>D5.classes.find(C=>C.name===k),I=()=>{m(Q[o]),E(null),s("details")},N=()=>{s("carousel"),E(null)},j=async()=>{if(!(!U.trim()||!jt.currentUser||O)){X(!0);try{const k={basic_info:{character_name:U,race:f.name,level:1,experience:{current:0,max:100},guild_insignia:"",special_image:"",guild_rank_image:""},attributes:{FOR:{value:10},INT:{value:10},SOR:{value:10},CAR:{value:10},VEL:{value:10},CONS:{value:10}},status:{hp:{current:20,max:20},mp:{current:10,max:10},arm:{value:0},res:{value:0},mov:{value:3}},inventory:{gil:500,items:[]},equipment:{slots:[{},{},{},{},{},{},{}]},job_system:{primary_class:{name:_,skills:[]},secondary_class:{name:"Nenhuma",skills:[]},reaction_ability:{name:""},passive_ability:{name:""},class_bonus:{value:""}}};await Dg(ze(Ae,"characters",jt.currentUser.uid),{uid:jt.currentUser.uid,email:jt.currentUser.email,name:U,race:f.name,class:_,gender:g,createdAt:qn(),character_sheet:k}),i("/jogador-vtt")}catch(k){console.error("Erro ao salvar personagem:",k),alert("Falha ao invocar personagem."),X(!1)}}},P=Q[o];return u.jsxs("div",{className:"relative w-full h-screen overflow-hidden",children:[u.jsx("style",{children:`
        @keyframes scaleIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        .rpg-modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0, 0, 0, 0.85); backdrop-filter: blur(8px); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .rpg-modal-box { position: relative; width: 500px; max-width: 90%; background: #1a120b; border: 2px solid #b45309; box-shadow: 0 0 50px rgba(234, 179, 8, 0.4); padding: 6px; border-radius: 8px; animation: scaleIn 0.3s ease-out forwards; }
        .rpg-modal-inner { background: linear-gradient(to bottom, #f3e6d5, #e7cba8); border: 1px solid #78350f; padding: 40px 20px; border-radius: 4px; text-align: center; display: flex; flex-direction: column; align-items: center; gap: 20px; }
        .rpg-modal-title { font-family: 'Cinzel', serif; font-size: 32px; color: #78350f; font-weight: bold; text-transform: uppercase; text-shadow: 0px 1px 0px rgba(255,255,255,0.6); margin-bottom: 5px; }
        .rpg-modal-subtitle { font-family: 'Cinzel', serif; font-size: 14px; color: #92400e; font-style: italic; border-top: 1px solid rgba(146, 64, 14, 0.3); padding-top: 10px; width: 100%; }
        .rpg-input { width: 100%; padding: 12px; background: #fff8ed; border: 2px solid #854d0e; font-family: 'Cinzel', serif; font-size: 18px; color: #451a03; outline: none; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); border-radius: 4px; }
        .rpg-input:focus { border-color: #d97706; background: #ffffff; }
        .rpg-btn-go { background: linear-gradient(to bottom, #fcd34d, #d97706); border: 1px solid #92400e; padding: 10px 30px; font-family: 'Cinzel', serif; font-weight: bold; font-size: 18px; color: #451a03; text-transform: uppercase; cursor: pointer; border-radius: 4px; box-shadow: 0 4px 0 #92400e; transition: transform 0.1s; }
        .rpg-btn-go:active { transform: translateY(4px); box-shadow: 0 0 0 #92400e; }
        .rpg-btn-go:disabled { filter: grayscale(1); opacity: 0.6; cursor: not-allowed; }
        .rpg-close-btn { position: absolute; top: 10px; right: 15px; background: none; border: none; font-size: 20px; color: #92400e; cursor: pointer; font-weight: bold; }
        .rpg-close-btn:hover { color: #ff0000; }
        .corner { position: absolute; width: 20px; height: 20px; border-color: #fcd34d; border-style: solid; }
        .tl { top: -2px; left: -2px; border-width: 3px 0 0 3px; }
        .tr { top: -2px; right: -2px; border-width: 3px 3px 0 0; }
        .bl { bottom: -2px; left: -2px; border-width: 0 0 3px 3px; }
        .br { bottom: -2px; right: -2px; border-width: 0 3px 3px 0; }
      `}),u.jsxs("div",{className:"ether-container",children:[u.jsx("div",{className:"ether-vortex"}),u.jsx("div",{className:"ether-particles"})]}),u.jsxs("header",{className:"absolute top-0 w-full p-6 z-50 flex justify-between items-center bg-gradient-to-b from-black/90 to-transparent",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"rpg-title text-3xl",children:"Gnese da Alma"}),u.jsx("p",{className:"rpg-subtitle-styled mt-2",children:n==="carousel"?"Determine sua Linhagem Ancestral":`${f?.name} // Customizao`})]}),n==="details"&&u.jsxs("button",{onClick:N,className:"nav-back-btn",children:[u.jsx("span",{children:""})," Seleo"]})]}),n==="carousel"&&u.jsxs("div",{className:"w-full h-full flex flex-col justify-center animate-[fadeIn_1s]",children:[u.jsx("div",{className:"text-center mb-4 z-10",children:u.jsx("h2",{className:"rpg-title text-5xl text-yellow-500 drop-shadow-lg",children:P.name})}),u.jsx("div",{ref:e,onWheel:te,className:"carousel-viewport",children:Q.map((k,C)=>u.jsxs("div",{onClick:()=>c(C),className:`race-card-frame ${C===o?"active":""}`,children:[u.jsx("img",{src:k.image,alt:k.name}),u.jsx("div",{className:"card-label",children:k.name})]},k.id))}),u.jsx("div",{className:"text-center mt-10 z-10",children:u.jsxs("button",{onClick:I,className:"confirm-btn w-64 mx-auto",children:["Escolher ",P.name]})})]}),n==="details"&&f&&u.jsxs("div",{className:"details-grid",children:[u.jsx("div",{className:"char-portrait-container",children:u.jsx("img",{src:f.image,alt:f.name,className:"char-portrait"})}),u.jsxs("div",{className:"info-scroll-area custom-scrollbar",children:[u.jsxs("div",{className:"glass-panel mt-8 border-l-4 border-yellow-600",children:[u.jsx("h3",{className:"section-header !border-none !mb-2 text-yellow-500",children:"Descrio"}),u.jsxs("p",{className:"description-text",children:['"',f.description,'"']}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-[10px] uppercase text-blue-400 font-bold",children:"Caractersticas"}),u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.characteristics})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-[10px] uppercase text-green-400 font-bold",children:"Bnus Racial"}),u.jsx("div",{className:"text-xs text-gray-300 font-mono mt-1",children:ie(f.racial_bonus)})]})]})]}),u.jsxs("div",{className:"glass-panel flex flex-col gap-2",children:[u.jsx("span",{className:"text-xs text-gray-400 uppercase font-bold tracking-widest",children:"Gnero"}),u.jsxs("div",{className:"flex w-full",children:[u.jsx("div",{onClick:()=>{y("female"),E(null)},className:`gender-option ${g==="female"?"active":""}`,children:"Feminino"}),u.jsx("div",{onClick:()=>{y("male"),E(null)},className:`gender-option ${g==="male"?"active":""}`,children:"Masculino"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"rpg-title text-xl mb-4 text-white",children:"Vocao"}),u.jsx("div",{className:"class-selector-grid",children:pe().map(k=>{const C=fe(k);return u.jsxs("div",{onClick:()=>E(k),className:`class-btn ${_===k?"selected":""}`,children:[u.jsx("span",{className:"class-btn-title",children:k}),u.jsx("span",{className:"class-btn-role",children:C?.role||"Bsico"})]},k)})}),_&&(()=>{const k=fe(_);return k?u.jsxs("div",{className:"class-detail-container",children:[u.jsxs("div",{className:"cd-header",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"cd-title rpg-title",children:k.name}),u.jsxs("div",{className:"cd-meta text-blue-400",children:[k.type," // ",k.role]})]}),u.jsxs("div",{className:"cd-req",children:[u.jsx("span",{className:"cd-req-label",children:"Requisitos"}),u.jsx("div",{className:"cd-req-val",children:k.requirements?.length?k.requirements.join(", "):"Nenhum"})]})]}),u.jsxs("div",{className:"cd-desc",children:['"',k.description,'"']}),u.jsxs("div",{className:"cd-bonus-box",children:[u.jsx("span",{className:"text-xs uppercase font-bold text-blue-300",children:"Bnus de Classe"}),u.jsx("span",{className:"font-mono text-sm text-white",children:ie(k.bonus_class)})]}),u.jsxs("div",{children:[u.jsx("h5",{className:"text-xs uppercase text-yellow-500 font-bold mb-3 tracking-wider border-b border-white/10 pb-1 inline-block",children:"Habilidades Iniciais"}),u.jsx("div",{className:"cd-abilities-grid",children:k.abilities?.map((C,R)=>u.jsxs("div",{className:"cd-ability-card",children:[u.jsxs("div",{className:"cd-ab-header",children:[u.jsx("span",{className:"cd-ab-name",children:C.name}),u.jsx("span",{className:"cd-ab-cost",children:C.cost})]}),u.jsx("p",{className:"cd-ab-desc",children:C.description})]},R))})]})]}):u.jsx("div",{className:"p-4 text-center",children:"Carregando..."})})()]}),u.jsx("div",{className:"mt-8 mb-10",children:u.jsx("button",{disabled:!_,onClick:()=>V(!0),className:"confirm-btn",children:_?"Finalizar Criao":"Selecione uma Vocao"})})]})]}),T&&u.jsx("div",{className:"rpg-modal-overlay",children:u.jsxs("div",{className:"rpg-modal-box",children:[u.jsx("div",{className:"corner tl"}),u.jsx("div",{className:"corner tr"}),u.jsx("div",{className:"corner bl"}),u.jsx("div",{className:"corner br"}),u.jsxs("div",{className:"rpg-modal-inner",children:[u.jsxs("div",{className:"w-full",children:[u.jsx("h3",{className:"rpg-modal-title",children:"Identidade"}),u.jsx("p",{className:"rpg-modal-subtitle",children:"Como a histria o conhecer?"})]}),u.jsxs("div",{className:"w-full flex gap-2",children:[u.jsx("input",{type:"text",value:U,onChange:k=>L(k.target.value),placeholder:"Nome do Aventureiro",className:"rpg-input",autoFocus:!0}),u.jsx("button",{onClick:j,disabled:!U.trim()||O,className:"rpg-btn-go",children:O?"...":"GO"})]}),u.jsx("button",{className:"rpg-close-btn",onClick:()=>V(!1),children:""})]})]})})]})},P5="/assets/fundo-jogador-nsWQkznx.jpg",V5="/assets/level-up-BOEM_DXL.mp3",z5=({token:i,gridSize:e,isMaster:n,onUpdate:s,onMouseDown:o,charData:c})=>{const[f,m]=w.useState(""),g=w.useRef(i.stats?.hp?.current);w.useEffect(()=>{let U;i.type==="player"&&c?U=c.character_sheet?.status?.hp?.current:i.type==="enemy"&&i.stats&&(U=i.stats.hp.current);const L=g.current;if(L!==void 0&&U!==void 0&&U!==L){U<L?m("flash-damage"):U>L&&m("flash-heal");const O=setTimeout(()=>m(""),1e3);return()=>clearTimeout(O)}g.current=U},[i.stats?.hp?.current,c?.character_sheet?.status?.hp?.current]);const y=e*(i.size||1);let _=i.img;i.type==="player"&&c&&c.character_sheet?.imgUrl&&(_=c.character_sheet.imgUrl);const E=i.imgX!==void 0?i.imgX:50,T=i.imgY!==void 0?i.imgY:50,V=i.visible!==!1;return!n&&!V?null:u.jsxs("div",{className:`vtt-token ${i.type} ${f} ${V?"":"ghost-token"}`,style:{width:y,height:y,left:i.x*e,top:i.y*e,cursor:n||i.type==="player"&&i.controlledBy==="me"?"grab":"default",zIndex:n?100:50},onMouseDown:U=>o(U,i),children:[u.jsx("div",{className:"token-inner",style:{backgroundImage:`url(${_})`,backgroundPosition:`${E}% ${T}%`}}),n&&u.jsxs("div",{className:"token-sizer",children:[u.jsx("button",{onMouseDown:U=>{U.stopPropagation(),s("resize",i,-1)},children:"-"}),u.jsx("button",{onMouseDown:U=>{U.stopPropagation(),s("resize",i,1)},children:"+"})]}),u.jsx("div",{className:"token-name",children:i.name})]})};function rA({sessaoData:i,isMaster:e,showManager:n,onCloseManager:s,currentUserUid:o,personagensData:c}){const[f,m]=w.useState(null),[g,y]=w.useState(!1),[_,E]=w.useState([]),[T,V]=w.useState([]),[U,L]=w.useState(""),[O,X]=w.useState(null),[Q,te]=w.useState(i?.grid_cols||25),[ie,pe]=w.useState(0),[fe,I]=w.useState(null),[N,j]=w.useState({x:0,y:0}),[P,k]=w.useState("cursor"),[C,R]=w.useState(!1),[Se,ae]=w.useState(null),[H,re]=w.useState(null),ye=w.useRef(null),qe=w.useRef(null);w.useEffect(()=>{if(i&&(m(i.active_map||null),i.grid_cols&&i.grid_cols!==Q&&te(i.grid_cols),i.tokens?E(i.tokens):E([]),e)){const ve=i.mapas||[],je=i.saved_maps||[],it=ve.map((Fe,F)=>{const xe=je.find(he=>he.url===Fe);return xe||{id:`temp_${F}`,name:`Mapa Importado ${F+1}`,url:Fe,isTemp:!0}});V(it)}},[i,e]);const Je=()=>{if(ye.current){const ve=ye.current.offsetWidth;if(Q>0){const je=ve/Q;pe(je)}}};w.useEffect(()=>(Je(),window.addEventListener("resize",Je),()=>window.removeEventListener("resize",Je)),[f,Q]);const M=ve=>{if(!ye.current)return{x:0,y:0};const je=ye.current.getBoundingClientRect();return{x:ve.clientX-je.left,y:ve.clientY-je.top}},ee=(ve,je)=>{if(P==="ruler")return;const it=je.type==="player"&&je.uid===o;if(!e&&!it)return;ve.stopPropagation(),ve.preventDefault();const Fe=ve.currentTarget.getBoundingClientRect();j({x:ve.clientX-Fe.left,y:ve.clientY-Fe.top}),I({...je,tempX:je.x*ie,tempY:je.y*ie})},de=ve=>{if(C&&re(M(ve)),fe){const je=ye.current.getBoundingClientRect();let it=ve.clientX-je.left-N.x,Fe=ve.clientY-je.top-N.y;const F=fe.size||1,xe=je.width-ie*F,he=je.height-ie*F;I(_e=>({..._e,tempX:Math.max(0,Math.min(it,xe)),tempY:Math.max(0,Math.min(Fe,he))}))}},be=async()=>{if(C&&(R(!1),ae(null),re(null)),fe){const ve=Math.round(fe.tempX/ie),je=Math.round(fe.tempY/ie),it=_.map(Fe=>Fe.id===fe.id?{...Fe,x:ve,y:je}:Fe);E(it),I(null);try{await dt(ze(Ae,"sessoes",i.id),{tokens:it})}catch(Fe){console.error("Erro ao mover token",Fe)}}},me=async(ve,je,it)=>{if(!e)return;let Fe=[..._];const F=Fe.findIndex(xe=>xe.id===je.id);if(F!==-1&&ve==="resize"){let xe=(Fe[F].size||1)+it;xe<1&&(xe=1),xe>4&&(xe=4),Fe[F].size=xe,E(Fe),await dt(ze(Ae,"sessoes",i.id),{tokens:Fe})}},Ne=ve=>{if(P==="ruler"||ve.button===2){ve.preventDefault(),R(!0);const je=M(ve);ae(je),re(je)}},Te=async ve=>{if(!e)return;const je=Math.max(1,Math.min(100,Number(ve)));te(je),await dt(ze(Ae,"sessoes",i.id),{grid_cols:je})},ft=()=>{if(!Se||!H||!ie)return"0m";const ve=Math.abs(Se.x-H.x),je=Math.abs(Se.y-H.y),Fe=Math.sqrt(ve*ve+je*je)/ie;return`${(Fe*1.5).toFixed(1)}m (${Fe.toFixed(1)} qd)`},tt=async ve=>{const je={id:ve.id.toString().startsWith("temp")?Date.now().toString():ve.id,name:U||ve.name,url:ve.url},it=ze(Ae,"sessoes",i.id);ve.isTemp||await dt(it,{saved_maps:Ig(ve)}),await dt(it,{saved_maps:Am(je)}),X(null),L("")},Wt=async ve=>{await dt(ze(Ae,"sessoes",i.id),{active_map:ve}),s&&s(),y(!1)},Gt=async()=>{window.confirm("Fechar o mapa para todos?")&&await dt(ze(Ae,"sessoes",i.id),{active_map:null})};return!f&&!e&&!n?null:u.jsxs(u.Fragment,{children:[f&&u.jsxs("div",{className:`tabletop-wrapper ${g?"minimized":""}`,children:[u.jsxs("div",{className:"tt-header",children:[u.jsxs("span",{className:"tt-title",children:[" ",f.name]}),!g&&u.jsxs("div",{className:"tt-toolbar",children:[u.jsx("button",{className:`tool-btn ${P==="cursor"?"active":""}`,onClick:()=>k("cursor"),title:"Mover",children:""}),u.jsx("button",{className:`tool-btn ${P==="ruler"?"active":""}`,onClick:()=>k("ruler"),title:"Rgua",children:""}),e&&u.jsxs("div",{className:"grid-control-box",children:[u.jsx("span",{className:"grid-label",children:"GRID"}),u.jsxs("div",{className:"grid-input-wrapper",children:[u.jsx("button",{className:"grid-btn-mini",onClick:()=>Te(Q-1),children:"-"}),u.jsx("input",{type:"number",className:"grid-number-display",value:Q,onChange:ve=>Te(ve.target.value)}),u.jsx("button",{className:"grid-btn-mini",onClick:()=>Te(Q+1),children:"+"})]})]})]}),u.jsxs("div",{className:"tt-controls",children:[u.jsx("button",{onClick:()=>y(!g),children:g?"":""}),e&&u.jsx("button",{className:"close-x",onClick:Gt,children:""})]})]}),!g&&u.jsx("div",{className:"tt-viewport",children:u.jsxs("div",{className:"map-layer-container",ref:ye,onMouseDown:Ne,onMouseMove:de,onMouseUp:be,onMouseLeave:be,onContextMenu:ve=>ve.preventDefault(),style:{cursor:P==="ruler"?"crosshair":"default"},children:[u.jsx("img",{ref:qe,src:f.url,alt:"Map",className:"map-img-element"}),ie>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"grid-layer",style:{backgroundSize:`${ie}px ${ie}px`,backgroundImage:"linear-gradient(to right, rgba(255,255,255,0.2) 1px, transparent 1px), linear-gradient(to bottom, rgba(255,255,255,0.2) 1px, transparent 1px)"}}),u.jsxs("div",{className:"tokens-layer",children:[_.map(ve=>fe&&fe.id===ve.id?null:u.jsx(z5,{token:ve,gridSize:ie,isMaster:e,onUpdate:me,onMouseDown:ee,charData:ve.type==="player"?c.find(je=>je.uid===ve.uid):null},ve.id)),fe&&u.jsx("div",{className:`vtt-token ${fe.type} dragging`,style:{width:ie*(fe.size||1),height:ie*(fe.size||1),left:fe.tempX,top:fe.tempY,cursor:"grabbing",zIndex:1e3},children:u.jsx("div",{className:"token-inner",style:{backgroundImage:`url(${fe.img})`,backgroundPosition:`${fe.imgX||50}% ${fe.imgY||50}%`}})})]})]}),C&&Se&&H&&u.jsxs("div",{className:"ruler-overlay",children:[u.jsxs("svg",{width:"100%",height:"100%",children:[u.jsx("line",{x1:Se.x,y1:Se.y,x2:H.x,y2:H.y,stroke:"#ffcc00",strokeWidth:"3",strokeDasharray:"10,5",filter:"drop-shadow(0px 0px 2px black)"}),u.jsx("circle",{cx:Se.x,cy:Se.y,r:"4",fill:"#ffcc00",stroke:"black"}),u.jsx("circle",{cx:H.x,cy:H.y,r:"4",fill:"#ffcc00",stroke:"black"})]}),u.jsx("div",{className:"ruler-tag",style:{left:H.x+15,top:H.y+15},children:ft()})]})]})})]}),e&&n&&u.jsx("div",{className:"manager-overlay",onClick:s,children:u.jsxs("div",{className:"manager-box",onClick:ve=>ve.stopPropagation(),children:[u.jsx("h3",{className:"manager-title",children:"SALA DE CARTOGRAFIA"}),u.jsx("div",{className:"manager-list",children:T.map((ve,je)=>u.jsxs("div",{className:"manager-item",children:[u.jsx("img",{src:ve.url,className:"thumb-preview",alt:"thumb"}),O===ve.id?u.jsx("input",{className:"manager-name-input",value:U,onChange:it=>L(it.target.value),placeholder:"Nome",autoFocus:!0}):u.jsx("span",{className:"map-name-span",children:ve.name}),O===ve.id?u.jsx("button",{className:"btn-action-sm btn-save-name",onClick:()=>tt(ve),children:"SALVAR"}):u.jsx("button",{className:"btn-action-sm",onClick:()=>{X(ve.id),L(ve.name)},children:"RENOMEAR"}),u.jsx("button",{className:"btn-action-sm btn-activate",onClick:()=>Wt(ve),children:"ABRIR"})]},je))}),u.jsx("button",{className:"btn-cancelar-main",onClick:s,children:"FECHAR"})]})}),u.jsx("style",{children:`
            .tabletop-wrapper { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90vw; height: 85vh; background: #0b0b0b; border: 2px solid #ffcc00; z-index: 1000; display: flex; flex-direction: column; box-shadow: 0 0 100px rgba(0,0,0,0.9); border-radius: 8px; }
            .tabletop-wrapper.minimized { width: 400px; height: 45px; top: 96%; left: 50%; border-color: #444; border-radius: 10px 10px 0 0; }
            .tt-header { height: 45px; background: #1a1a1a; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; padding: 0 15px; }
            .tt-title { color: #ffcc00; font-weight: bold; letter-spacing: 1px; font-size: 14px; }
            .tt-toolbar { display: flex; gap: 15px; align-items: center; background: #000; padding: 4px 15px; border-radius: 20px; border: 1px solid #333; }
            .tool-btn { background: none; border: none; font-size: 18px; cursor: pointer; opacity: 0.5; }
            .tool-btn.active { opacity: 1; border-bottom: 2px solid #00f2ff; }
            .tt-controls button { background: none; border: none; color: #aaa; cursor: pointer; margin-left: 10px; }
            .tt-viewport { flex: 1; background: #050505; overflow: hidden; display: flex; align-items: center; justify-content: center; position: relative; }
            .grid-control-box { display: flex; align-items: center; gap: 8px; border-left: 1px solid #444; padding-left: 12px; margin-left: 5px; }
            .grid-label { font-size: 10px; color: #888; font-weight: bold; }
            .grid-input-wrapper { display: flex; align-items: center; background: #222; border: 1px solid #444; border-radius: 4px; }
            .grid-btn-mini { background: #333; color: #fff; border: none; width: 20px; cursor: pointer; }
            .grid-number-display { width: 30px; background: #222; border: none; color: #ffcc00; text-align: center; font-size: 12px; outline: none; }
            
            .map-layer-container { position: relative; box-shadow: 0 0 30px #000; user-select: none; }
            .map-img-element { display: block; max-width: 100%; max-height: 80vh; object-fit: contain; pointer-events: none; }
            .grid-layer, .tokens-layer, .ruler-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
            .grid-layer { pointer-events: none; z-index: 2; opacity: 0.6; }
            .tokens-layer { z-index: 5; }
            .ruler-overlay { z-index: 10; pointer-events: none; }
            .ruler-tag { position: absolute; background: rgba(0,0,0,0.9); color: #ffcc00; border: 1px solid #ffcc00; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; pointer-events: none; z-index: 20; }

            .vtt-token { position: absolute; border-radius: 50%; box-shadow: 0 0 10px #000; z-index: 10; overflow: visible; }
            .vtt-token.dragging { z-index: 100; transition: none; box-shadow: 0 10px 20px rgba(0,0,0,0.8); transform: scale(1.05); }
            .vtt-token.enemy { border: 2px solid #f44; }
            .vtt-token.player { border: 2px solid #00f2ff; }
            
            /* GHOST MODE: Para tokens ocultos vistos pelo Mestre */
            .vtt-token.ghost-token { opacity: 0.5; filter: grayscale(100%); border-style: dashed; }

            .token-inner { width: 100%; height: 100%; border-radius: 50%; background-size: cover; pointer-events: none; background-repeat: no-repeat; }
            .token-name { position: absolute; bottom: -15px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color: #fff; font-size: 10px; padding: 2px 5px; border-radius: 4px; white-space: nowrap; pointer-events: none; opacity: 0; transition: 0.2s; z-index: 15; text-shadow: 0 0 3px #000; }
            .vtt-token:hover .token-name { opacity: 1; }
            
            .token-sizer { position: absolute; top: -10px; right: -20px; display: flex; flex-direction: column; opacity: 0; transition: 0.2s; gap: 2px; }
            .vtt-token:hover .token-sizer { opacity: 1; }
            .token-sizer button { width: 15px; height: 15px; background: #000; color: #fff; border: 1px solid #555; border-radius: 50%; font-size: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
            .token-sizer button:hover { border-color: #ffcc00; color: #ffcc00; }

            .flash-damage { animation: flashRed 0.5s; }
            .flash-heal { animation: flashGreen 0.5s; }
            @keyframes flashRed { 0% { box-shadow: 0 0 0 #f00; } 50% { box-shadow: 0 0 20px #f00; border-color: #f00; } 100% { box-shadow: 0 0 0 #000; } }
            @keyframes flashGreen { 0% { box-shadow: 0 0 0 #0f0; } 50% { box-shadow: 0 0 20px #0f0; border-color: #0f0; } 100% { box-shadow: 0 0 0 #000; } }

            .manager-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index: 10000; display:flex; align-items:center; justify-content:center; }
            .manager-box { width: 700px; max-height: 85vh; background: #080808; border: 2px solid #00f2ff; padding: 25px; display:flex; flex-direction:column; border-radius: 8px; }
            .manager-title { color: #00f2ff; border-bottom: 1px solid #00f2ff; padding-bottom: 15px; margin: 0; }
            .manager-list { overflow-y: auto; flex: 1; margin-top: 20px; border: 1px solid #333; background: #000; }
            .manager-item { display: flex; align-items: center; padding: 15px; border-bottom: 1px solid #333; gap: 15px; }
            .thumb-preview { width: 80px; height: 50px; object-fit: cover; border: 1px solid #555; }
            .manager-name-input { flex: 1; background: #111; border: 1px solid #444; color: #fff; padding: 8px; }
            .map-name-span { flex: 1; color: #fff; font-size: 14px; }
            .btn-action-sm { padding: 8px 15px; font-size: 11px; cursor: pointer; border: 1px solid #555; background: transparent; color: #ccc; }
            .btn-activate { border-color: #00f2ff; color: #00f2ff; margin-left: 10px; }
            .btn-save-name { color: #0f0; border-color: #0f0; }
            .btn-cancelar-main { width: 100%; background: #000; color: #fff; border: 1px solid #fff; padding: 14px; cursor: pointer; margin-top: 20px; }
        `})]})}function oA({sessaoData:i,isMaster:e,showManager:n,onCloseManager:s}){const[o,c]=w.useState(null),[f,m]=w.useState(!1),[g,y]=w.useState([]),[_,E]=w.useState(""),[T,V]=w.useState(null);w.useEffect(()=>{if(i&&(c(i.active_scenery||null),e)){const O=i.cenarios||[];y(O)}},[i,e]),w.useEffect(()=>{o&&m(!1)},[o?.url]);const U=async()=>{if(!T)return;const X={url:T,name:_||"Ambiente",timestamp:Date.now()};try{const Q=ze(Ae,"sessoes",i.id);await dt(Q,{active_scenery:X}),s&&s(),E(""),V(null)}catch(Q){console.error("Erro ao projetar cenrio:",Q)}},L=async()=>{if(window.confirm("Fechar o cenrio para todos?"))try{const O=ze(Ae,"sessoes",i.id);await dt(O,{active_scenery:null})}catch(O){console.error(O)}};return!o&&!n?null:u.jsxs(u.Fragment,{children:[o&&u.jsxs("div",{className:`scenery-layer ${f?"minimized":"immersive"}`,children:[!f&&u.jsxs("div",{className:"scenery-viewport",children:[u.jsx("div",{className:"vignette-mask"}),u.jsx("img",{src:o.url,alt:"Cenrio",className:"scenery-img"}),u.jsx("div",{className:"scenery-title-overlay",children:u.jsx("h2",{children:o.name})})]}),u.jsxs("div",{className:"scenery-hud",children:[f&&u.jsxs("span",{className:"mini-label",children:[" ",o.name]}),u.jsxs("div",{className:"scenery-actions",children:[u.jsx("button",{className:"btn-scenery-toggle",onClick:()=>m(!f),title:f?"Maximizar Cenrio":"Minimizar",children:f?"":""}),e&&u.jsx("button",{className:"btn-scenery-close",onClick:L,title:"Encerrar Projeo",children:""})]})]})]}),e&&n&&u.jsx("div",{className:"scenery-manager-overlay",onClick:s,children:u.jsxs("div",{className:"scenery-manager-box",onClick:O=>O.stopPropagation(),children:[u.jsx("h3",{className:"manager-title",children:"PROJETOR DE AMBIENTES"}),u.jsxs("div",{className:"scenery-grid",children:[g.length===0&&u.jsx("p",{className:"empty-txt",children:"Nenhuma imagem de cenrio carregada na sesso."}),g.map((O,X)=>u.jsx("div",{className:`scenery-thumb ${T===O?"selected":""}`,onClick:()=>V(O),children:u.jsx("img",{src:O,alt:`Opo ${X}`})},X))]}),u.jsxs("div",{className:"scenery-input-row",children:[u.jsx("input",{type:"text",placeholder:"Nome do Local (Ex: Runas Antigas)",value:_,onChange:O=>E(O.target.value)}),u.jsx("button",{className:"btn-project",onClick:U,disabled:!T,children:"PROJETAR"})]}),u.jsx("button",{className:"btn-close-manager",onClick:s,children:"CANCELAR"})]})}),u.jsx("style",{children:`
        /* --- ESTILO IMERSIVO --- */
        .scenery-layer {
            position: fixed;
            transition: all 0.8s cubic-bezier(0.2, 2, 0.2, 1);
            overflow: hidden;
            /* Z-INDEX EXTREMAMENTE ALTO PARA COBRIR TUDO (Bazar, Fichas, etc) */
            z-index: 200000; 
        }

        .scenery-layer.immersive {
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            animation: fadeInDeep 4s ease-out;
        }

        .scenery-layer.minimized {
            top: 0; /* Cola no teto */
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 40px;
            background: rgba(0,0,0,0.9);
            border: 1px solid #ffcc00;
            border-top: none;
            border-radius: 0 0 15px 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 200001;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }

        @keyframes fadeInDeep { from { opacity: 0; filter: blur(10px); } to { opacity: 1; filter: blur(0); } }

        .scenery-viewport {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .scenery-img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Garante que cubra a tela toda sem bordas internas */
            /* Efeito Ken Burns lento e suave */
            animation: kenBurns 80s infinite alternate ease-in-out;
            opacity: 0.9; /* Levemente escuro para o texto brilhar */
        }

        @keyframes kenBurns { from { transform: scale(1.0); } to { transform: scale(1.15); } }

        /* VIGNETTE CINEMATOGRFICA (OVAL) */
        .vignette-mask {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 2;
            /* Gradiente ELPTICO: Comea transparente no centro e escurece forte nas bordas */
            background: radial-gradient(
                ellipse at center, 
                rgba(0,0,0,0) 30%, 
                rgba(0,0,0,0.3) 60%, 
                rgba(0,0,0,0.8) 85%, 
                #000 100%
            );
            /* Adiciona uma sombra interna extra para garantir bordas pretas */
            box-shadow: inset 0 0 150px #000;
        }

        .scenery-title-overlay {
            position: absolute;
            top: 80px; /* Um pouco mais para baixo para no colar no topo */
            width: 100%;
            text-align: center;
            z-index: 5;
            pointer-events: none;
        }

        .scenery-title-overlay h2 {
            font-family: 'Cinzel', serif;
            font-size: 4.5rem;
            color: #ffcc00;
            text-transform: uppercase;
            letter-spacing: 15px;
            /* Sombra profunda para destacar no fundo */
            text-shadow: 0 10px 30px #000, 0 0 50px rgba(255, 204, 0, 0.2);
            margin: 0;
            opacity: 0;
            /* ANIMAO DE SEQUNCIA: Entra -> Espera -> Sai */
            animation: cinematicTitleSequence 8s ease-in-out 0.5s forwards;
        }

        @keyframes cinematicTitleSequence { 
            0% { 
                opacity: 0; 
                transform: translateY(30px) scale(0.9); 
                letter-spacing: 30px; 
            } 
            20% { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
                letter-spacing: 15px; 
            }
            80% { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
                letter-spacing: 15px; 
            }
            100% { 
                opacity: 0; 
                transform: translateY(-20px) scale(1.05); 
                letter-spacing: 30px; /* Volta a espalhar ao sair */
            } 
        }

        /* HUD DE CONTROLE */
        .scenery-hud {
            position: absolute;
            top: 0; left: 0; width: 100%;
            padding: 20px;
            display: flex;
            justify-content: flex-end; /* Botes na direita */
            align-items: flex-start;
            z-index: 10;
            opacity: 0; /* Invisvel por padro */
            transition: opacity 0.3s;
        }
        
        /* Aparece ao passar o mouse ou se estiver minimizado */
        .scenery-layer:hover .scenery-hud, .scenery-layer.minimized .scenery-hud {
            opacity: 1;
        }
        
        .scenery-layer.minimized .scenery-hud {
            position: relative;
            padding: 0 15px;
            align-items: center;
            justify-content: space-between; /* Espalha texto e botes no modo mini */
            width: 100%;
        }

        .scenery-actions {
            display: flex;
            gap: 15px;
        }

        .btn-scenery-toggle, .btn-scenery-close {
            background: rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.3);
            color: #fff;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.3s;
            pointer-events: auto;
            backdrop-filter: blur(5px);
        }
        .btn-scenery-toggle:hover { background: #fff; color: #000; transform: scale(1.1); }
        .btn-scenery-close { border-color: rgba(255, 68, 68, 0.5); color: #f44; }
        .btn-scenery-close:hover { background: #f44; color: #fff; transform: scale(1.1); }

        .mini-label {
            color: #ffcc00;
            font-family: 'Cinzel', serif;
            font-weight: bold;
            font-size: 14px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-right: 10px;
            text-shadow: 0 0 10px rgba(255,204,0,0.5);
        }

        /* --- GERENCIADOR (MODAL) --- */
        .scenery-manager-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 200002; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .scenery-manager-box { width: 700px; background: #080808; border: 2px solid #ffcc00; padding: 30px; border-radius: 8px; box-shadow: 0 0 80px rgba(255, 204, 0, 0.15); }
        .manager-title { color: #ffcc00; font-family: 'Cinzel', serif; margin: 0 0 25px 0; text-align: center; border-bottom: 1px solid #333; padding-bottom: 15px; letter-spacing: 3px; font-size: 24px; }
        
        .scenery-grid { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 20px; 
            max-height: 50vh; overflow-y: auto; margin-bottom: 25px; padding: 10px;
            background: #000; border: 1px solid #222; border-radius: 4px;
        }
        .scenery-thumb { height: 100px; border: 2px solid #333; border-radius: 6px; overflow: hidden; cursor: pointer; opacity: 0.6; transition: 0.3s; position: relative; }
        .scenery-thumb:hover { opacity: 1; transform: scale(1.05); border-color: #777; }
        .scenery-thumb.selected { border-color: #ffcc00; opacity: 1; box-shadow: 0 0 20px rgba(255,204,0,0.3); transform: scale(1.05); }
        .scenery-thumb img { width: 100%; height: 100%; object-fit: cover; }
        
        .scenery-input-row { display: flex; gap: 15px; margin-bottom: 20px; }
        .scenery-input-row input { flex: 1; background: #111; border: 1px solid #444; color: #fff; padding: 15px; font-family: 'Cinzel', serif; outline: none; font-size: 16px; border-radius: 4px; }
        .scenery-input-row input:focus { border-color: #ffcc00; box-shadow: 0 0 10px rgba(255,204,0,0.1); }
        
        .btn-project { background: linear-gradient(45deg, #ffcc00, #d4a000); color: #000; border: none; padding: 0 35px; font-weight: bold; cursor: pointer; font-family: 'Cinzel', serif; font-size: 16px; border-radius: 4px; }
        .btn-project:hover:not(:disabled) { filter: brightness(1.2); box-shadow: 0 0 25px rgba(255,204,0,0.4); }
        .btn-project:disabled { opacity: 0.5; cursor: not-allowed; background: #444; }
        
        .btn-close-manager { width: 100%; background: transparent; border: 1px solid #555; color: #aaa; padding: 12px; cursor: pointer; transition: 0.2s; font-family: sans-serif; letter-spacing: 2px; font-size: 12px; }
        .btn-close-manager:hover { border-color: #fff; color: #fff; background: rgba(255,255,255,0.05); }
        .empty-txt { color: #666; text-align: center; grid-column: 1 / -1; padding: 30px; font-style: italic; }
      `})]})}function lA({sessaoData:i,isMaster:e,showManager:n,onCloseManager:s}){const[o,c]=w.useState(null),[f,m]=w.useState([]),[g,y]=w.useState(""),[_,E]=w.useState(null);w.useEffect(()=>{if(i&&(c(i.active_npc||null),e)){const L=i.npcs||[];m(L)}},[i,e]);const T=async L=>{if(!_&&!o)return;let O;_?O={url:_,name:g||"Desconhecido",visible:L,timestamp:Date.now()}:o&&(O={...o,visible:L});try{const X=ze(Ae,"sessoes",i.id);await dt(X,{active_npc:O}),_&&(E(null),y(""))}catch(X){console.error("Erro ao atualizar NPC:",X)}},V=async()=>{if(window.confirm("Remover NPC da cena?"))try{const L=ze(Ae,"sessoes",i.id);await dt(L,{active_npc:null})}catch(L){console.error(L)}},U=()=>{if(!o)return null;const L=o.visible;return u.jsx("div",{className:`npc-overlay-container ${L?"slide-in":"slide-out"}`,children:u.jsxs("div",{className:"npc-content-wrapper",children:[u.jsxs("div",{className:"npc-image-box",children:[u.jsx("img",{src:o.url,alt:"NPC",className:"npc-img"}),u.jsx("div",{className:"npc-fade-bottom"})]}),u.jsxs("div",{className:"npc-title-container",children:[u.jsx("div",{className:"npc-title-line"}),u.jsx("h3",{className:"npc-title-text",children:o.name})]})]})})};return u.jsxs(u.Fragment,{children:[U(),e&&n&&u.jsx("div",{className:"npc-manager-overlay",onClick:s,children:u.jsxs("div",{className:"npc-manager-box",onClick:L=>L.stopPropagation(),children:[u.jsxs("div",{className:"npc-manager-header",children:[u.jsx("h3",{children:"CONVOCAO DE NPCS"}),u.jsx("button",{className:"close-x",onClick:s,children:""})]}),u.jsxs("div",{className:"npc-grid-list",children:[f.length===0&&u.jsx("p",{className:"empty-msg",children:"Nenhum NPC cadastrado na sesso."}),f.map((L,O)=>u.jsx("div",{className:`npc-thumb ${_===L?"selected":""}`,onClick:()=>{E(L),y("")},children:u.jsx("img",{src:L,alt:"NPC Thumb"})},O))]}),u.jsxs("div",{className:"npc-controls-row",children:[u.jsx("input",{type:"text",placeholder:"Nome (Ex: Lorde das Sombras)",value:g,onChange:L=>y(L.target.value)}),u.jsxs("div",{className:"btn-group",children:[u.jsx("button",{className:"btn-npc-action visible",onClick:()=>T(!0),children:"ENTRAR"}),u.jsx("button",{className:"btn-npc-action hidden",onClick:()=>T(!1),children:"PREPARAR"})]})]}),o&&!_&&u.jsxs("div",{className:"current-npc-controls",children:[u.jsxs("h4",{children:["EM CENA: ",u.jsx("span",{style:{color:"#fff"},children:o.name})]}),u.jsxs("div",{className:"active-actions",children:[u.jsx("button",{className:`toggle-btn ${o.visible?"is-on":"is-off"}`,onClick:()=>T(!o.visible),children:o.visible?"OCULTAR (SAIR)":"REVELAR (ENTRAR)"}),u.jsx("button",{className:"remove-btn",onClick:V,children:"REMOVER"})]})]})]})}),u.jsx("style",{children:`
        /* --- CAMADA DO NPC --- */
        .npc-overlay-container {
            position: fixed;
            top: 50%;
            /* Z-INDEX SUPERIOR AO CENRIO */
            z-index: 210000; 
            width: 33vw; /* 1/3 da tela */
            height: 90vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            
            /* Transies cinematogrficas */
            transition: left 1.5s cubic-bezier(0.22, 1, 0.36, 1), 
                        transform 1.5s cubic-bezier(0.22, 1, 0.36, 1), 
                        opacity 1.5s ease;
        }

        /* SAINDO (Esquerda) */
        .npc-overlay-container.slide-out {
            left: -40%; 
            transform: translate(-100%, -50%);
            opacity: 0;
        }

        /* ENTRANDO (Centro) */
        .npc-overlay-container.slide-in {
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 1;
        }

        .npc-content-wrapper {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            /* Animao de respirao/flutuao */
            animation: breatheNPC 8s ease-in-out infinite;
        }

        @keyframes breatheNPC {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        /* IMAGEM DO NPC (SEM BORDAS, S PNG) */
        .npc-image-box {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
            /* Mscara suave para as bordas no ficarem duras */
            -webkit-mask-image: radial-gradient(ellipse at center, black 70%, transparent 100%);
            mask-image: radial-gradient(ellipse at center, black 70%, transparent 100%);
        }

        .npc-img {
            width: 100%;
            height: auto;
            max-height: 75vh;
            object-fit: contain;
            filter: drop-shadow(0 0 20px rgba(0,0,0,0.8));
        }

        /* FADE INFERIOR (Opcional, para misturar ps com o ttulo) */
        .npc-fade-bottom {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20%;
            background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.0) 100%);
        }

        /* --- TTULO DARK FANTASY (LINHA NO MEIO) --- */
        .npc-title-container {
            position: relative;
            width: 120%; /* Um pouco maior que a imagem */
            text-align: center;
            margin-top: -30px; /* Sobe um pouco para sobrepor a base da imagem */
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .npc-title-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #ffcc00, transparent);
            box-shadow: 0 0 10px #ffcc00;
            z-index: 1;
        }

        .npc-title-text {
            font-family: 'Cinzel', serif;
            font-size: 42px;
            color: #ffcc00;
            text-transform: uppercase;
            letter-spacing: 4px;
            margin: 0;
            padding: 0 20px;
            position: relative;
            z-index: 2;
            
            /* Sombra pesada para simular contorno e cortar a linha visualmente */
            text-shadow: 
                3px 3px 0 #000,
                -1px -1px 0 #000,  
                1px -1px 0 #000,
                -1px 1px 0 #000,
                1px 1px 0 #000,
                0 0 20px rgba(0,0,0,0.8);
        }

        /* --- GERENCIADOR (CANTO SUPERIOR DIREITO) --- */
        .npc-manager-overlay { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100vw; 
            height: 100vh; 
            background: rgba(0,0,0,0.0); /* Fundo transparente para ver o NPC */
            z-index: 200020; 
            display: flex; 
            align-items: flex-start; /* Alinha no topo */
            justify-content: flex-end; /* Alinha na direita */
            padding: 80px 30px; /* Espaamento da borda */
            pointer-events: none; /* Permite clicar atravs do overlay vazio */
        }

        .npc-manager-box { 
            width: 400px; /* Mais compacto */
            background: rgba(10, 10, 10, 0.95); 
            border: 1px solid #ffcc00; 
            padding: 20px; 
            border-radius: 4px; 
            box-shadow: 0 0 30px rgba(0,0,0,0.8);
            pointer-events: auto; /* Reativa cliques na caixa */
            backdrop-filter: blur(10px);
        }

        .npc-manager-header { display: flex; justify-content: space-between; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 15px; }
        .npc-manager-header h3 { color: #ffcc00; margin: 0; font-family: 'Cinzel', serif; font-size: 16px; }
        .close-x { background: none; border: none; color: #fff; font-size: 18px; cursor: pointer; }

        .npc-grid-list { 
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; 
            max-height: 30vh; overflow-y: auto; margin-bottom: 15px; padding: 5px; 
            background: rgba(0,0,0,0.5); border: 1px solid #333;
        }
        .npc-thumb { height: 80px; border: 1px solid #444; cursor: pointer; opacity: 0.6; transition: 0.2s; overflow: hidden; border-radius: 4px; }
        .npc-thumb:hover { opacity: 1; border-color: #fff; }
        .npc-thumb.selected { border-color: #ffcc00; opacity: 1; box-shadow: 0 0 10px rgba(255, 204, 0, 0.2); }
        .npc-thumb img { width: 100%; height: 100%; object-fit: cover; }

        .npc-controls-row { display: flex; gap: 8px; flex-direction: column; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #333; }
        .npc-controls-row input { background: #000; border: 1px solid #444; color: #fff; padding: 8px; font-family: 'Cinzel', serif; outline: none; font-size: 14px; }
        .npc-controls-row input:focus { border-color: #ffcc00; }
        
        .btn-group { display: flex; gap: 5px; }
        .btn-npc-action { flex: 1; padding: 8px; font-weight: bold; cursor: pointer; border: none; font-family: 'Cinzel', serif; transition: 0.2s; font-size: 12px; }
        .btn-npc-action.visible { background: #ffcc00; color: #000; }
        .btn-npc-action.visible:hover { background: #fff; }
        .btn-npc-action.hidden { background: #222; color: #aaa; border: 1px solid #444; }
        .btn-npc-action.hidden:hover { border-color: #fff; color: #fff; }

        .current-npc-controls { background: rgba(255, 204, 0, 0.05); padding: 10px; border: 1px solid #ffcc00; border-radius: 4px; }
        .current-npc-controls h4 { margin: 0 0 8px 0; color: #ffcc00; font-size: 12px; }
        .active-actions { display: flex; gap: 5px; }
        .toggle-btn { flex: 2; padding: 8px; font-weight: bold; cursor: pointer; border: none; transition: 0.3s; font-size: 11px; }
        .toggle-btn.is-on { background: #0f0; color: #000; box-shadow: 0 0 5px #0f0; }
        .toggle-btn.is-off { background: #f44; color: #fff; }
        .remove-btn { flex: 1; background: transparent; border: 1px solid #f44; color: #f44; cursor: pointer; font-size: 11px; font-weight: bold; }
        .remove-btn:hover { background: #f44; color: #fff; }
        .empty-msg { color: #666; text-align: center; padding: 15px; font-style: italic; font-size: 12px; }
      `})]})}const L5=[{type:"d4",sides:4,label:"D4"},{type:"d6",sides:6,label:"D6"},{type:"d8",sides:8,label:"D8"},{type:"d10",sides:10,label:"D10"},{type:"d12",sides:12,label:"D12"},{type:"d20",sides:20,label:"D20"},{type:"d100",sides:100,label:"D100"}],cA=({sessaoId:i,playerName:e,onClose:n})=>{const[s,o]=w.useState({d4:0,d6:0,d8:0,d10:0,d12:0,d20:0,d100:0}),[c,f]=w.useState(""),[m,g]=w.useState(!1),y=(E,T)=>{o(V=>({...V,[E]:Math.max(0,V[E]+T)}))},_=async()=>{if(Object.values(s).reduce((X,Q)=>X+Q,0)===0)return alert("Selecione pelo menos um dado!");g(!0),n();let T=0,V=[];Object.keys(s).forEach(X=>{const Q=s[X],te=parseInt(X.substring(1));for(let ie=0;ie<Q;ie++){const pe=Math.floor(Math.random()*te)+1;T+=pe,V.push({die:X,value:pe})}});let U=0;if(c){const X=c.replace(/\s/g,"");U=parseInt(X),isNaN(U)&&(U=0)}const L=T+U,O={playerName:e,rolls:V,modifier:U,total:L,timestamp:Date.now()};try{const X=ze(Ae,"sessoes",i);await dt(X,{latest_roll:O})}catch(X){console.error("Erro ao rolar dados:",X)}};return u.jsxs("div",{className:"dice-modal-overlay",children:[u.jsxs("div",{className:"dice-selector-box",children:[u.jsxs("div",{className:"ds-header",children:[u.jsx("h3",{children:"CAIXA DE DADOS"}),u.jsx("button",{className:"ds-close-btn",onClick:n,children:""})]}),u.jsx("div",{className:"ds-grid",children:L5.map(E=>u.jsxs("div",{className:"die-control",children:[u.jsx("span",{className:"die-label",children:E.label}),u.jsxs("div",{className:"die-actions",children:[u.jsx("button",{onClick:()=>y(E.type,-1),children:"-"}),u.jsx("span",{className:`die-count ${s[E.type]>0?"active":""}`,children:s[E.type]}),u.jsx("button",{onClick:()=>y(E.type,1),children:"+"})]})]},E.type))}),u.jsxs("div",{className:"ds-footer",children:[u.jsxs("div",{className:"mod-input-group",children:[u.jsx("label",{children:"MODIFICADOR"}),u.jsx("input",{type:"text",placeholder:"+0",value:c,onChange:E=>f(E.target.value)})]}),u.jsx("button",{className:"btn-roll-final",onClick:_,disabled:m,children:m?"...":"ROLAR DADOS"})]})]}),u.jsx("style",{children:`
         .dice-modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.6); z-index: 20000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(2px); }
         /* AUMENTADO A LARGURA PARA 400px PARA CABER O BOTO */
         .dice-selector-box { background: #0d0d15; border: 2px solid #ffcc00; padding: 25px; border-radius: 8px; width: 400px; box-shadow: 0 0 30px rgba(255, 204, 0, 0.2); box-sizing: border-box; }
         .ds-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px; }
         .ds-header h3 { margin: 0; color: #ffcc00; font-family: 'Cinzel', serif; }
         .ds-close-btn { background: none; border: none; color: #fff; font-size: 20px; cursor: pointer; }
         
         .ds-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 25px; }
         .die-control { background: rgba(255,255,255,0.05); padding: 8px 12px; border-radius: 4px; display: flex; justify-content: space-between; align-items: center; }
         .die-label { color: #00f2ff; font-weight: bold; font-family: sans-serif; font-size: 14px; }
         .die-actions { display: flex; align-items: center; gap: 8px; }
         .die-actions button { background: #333; border: 1px solid #555; color: #fff; width: 24px; height: 24px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
         .die-actions button:hover { background: #ffcc00; color: #000; border-color: #ffcc00; }
         .die-count { width: 20px; text-align: center; font-weight: bold; color: #555; }
         .die-count.active { color: #fff; text-shadow: 0 0 5px #fff; }

         /* AJUSTE DO FOOTER PARA O BOTO NO SAIR */
         .ds-footer { display: flex; gap: 15px; align-items: flex-end; width: 100%; }
         .mod-input-group { width: 100px; display: flex; flex-direction: column; }
         .mod-input-group label { font-size: 10px; color: #aaa; margin-bottom: 4px; font-weight: bold; }
         .mod-input-group input { width: 100%; background: #000; border: 1px solid #444; color: #fff; padding: 10px; border-radius: 4px; text-align: center; font-weight: bold; font-size: 16px; outline: none; box-sizing: border-box; }
         .mod-input-group input:focus { border-color: #ffcc00; }
         
         .btn-roll-final { flex: 1; background: linear-gradient(45deg, #ffcc00, #d4a000); border: none; padding: 0 20px; color: #000; font-weight: bold; border-radius: 4px; cursor: pointer; font-family: 'Cinzel', serif; font-size: 16px; height: 44px; display: flex; align-items: center; justify-content: center; white-space: nowrap; }
         .btn-roll-final:hover { filter: brightness(1.2); box-shadow: 0 0 15px #ffcc00; }
         .btn-roll-final:disabled { opacity: 0.5; cursor: not-allowed; }
       `})]})},uA=({rollData:i,onClose:e})=>i?u.jsxs("div",{className:"dice-result-overlay",children:[u.jsxs("div",{className:"dice-result-content fade-in-scale",children:[u.jsxs("div",{className:"dr-title",children:[u.jsx("span",{className:"dr-player-name",children:i.playerName}),u.jsx("span",{className:"dr-action",children:"ROLOU OS DADOS"})]}),u.jsx("div",{className:"dr-dice-list",children:i.rolls.map((n,s)=>u.jsxs("div",{className:`dr-die die-${n.die}`,children:[u.jsx("span",{className:"die-icon-bg",children:""}),u.jsx("span",{className:"die-val",children:n.value}),u.jsx("span",{className:"die-type",children:n.die})]},s))}),u.jsxs("div",{className:"dr-calculation",children:[u.jsxs("span",{className:"calc-label",children:["SOMA: ",i.rolls.reduce((n,s)=>n+s.value,0)]}),u.jsxs("span",{className:"calc-mod",children:["MOD: ",i.modifier>=0?`+${i.modifier}`:i.modifier]})]}),u.jsxs("div",{className:"dr-total",children:[u.jsx("span",{className:"total-label",children:"RESULTADO"}),u.jsx("span",{className:"total-value",children:i.total})]}),u.jsx("button",{className:"dr-close-btn",onClick:e,children:"FECHAR"})]}),u.jsx("style",{children:`
         .dice-result-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 19000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
         .dice-result-content { text-align: center; color: #fff; max-width: 80%; }
         .fade-in-scale { animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
         @keyframes popIn { 0% { opacity: 0; transform: scale(0.5); } 100% { opacity: 1; transform: scale(1); } }
         
         .dr-title { margin-bottom: 30px; }
         .dr-player-name { display: block; font-size: 32px; color: #ffcc00; font-family: 'Cinzel', serif; font-weight: bold; text-shadow: 0 0 10px #ffcc00; }
         .dr-action { font-size: 14px; color: #aaa; letter-spacing: 2px; }

         .dr-dice-list { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-bottom: 30px; }
         .dr-die { position: relative; width: 80px; height: 80px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
         .die-icon-bg { font-size: 80px; position: absolute; color: rgba(255,255,255,0.1); z-index: 0; }
         .die-val { font-size: 36px; font-weight: bold; color: #fff; z-index: 1; text-shadow: 0 2px 4px #000; }
         .die-type { font-size: 12px; color: #00f2ff; z-index: 1; margin-top: -5px; text-transform: uppercase; font-weight: bold; }
         
         .die-d20 .die-val { color: #ffcc00; } /* Destaque pro D20 */

         .dr-calculation { font-family: monospace; color: #aaa; font-size: 18px; margin-bottom: 10px; display: flex; gap: 20px; justify-content: center; }
         
         .dr-total { margin-bottom: 30px; background: linear-gradient(90deg, transparent, rgba(255,204,0,0.2), transparent); padding: 10px; }
         .total-label { display: block; font-size: 14px; color: #ffcc00; letter-spacing: 3px; margin-bottom: 5px; }
         .total-value { font-size: 64px; font-weight: bold; color: #fff; line-height: 1; text-shadow: 0 0 20px #ffcc00; }

         .dr-close-btn { background: transparent; border: 2px solid #555; color: #aaa; padding: 10px 40px; cursor: pointer; border-radius: 30px; font-weight: bold; transition: 0.3s; pointer-events: auto; }
         .dr-close-btn:hover { border-color: #ffcc00; color: #ffcc00; background: rgba(255,255,255,0.1); }
       `})]}):null,U5=({targetDate:i})=>{const[e,n]=w.useState("");return w.useEffect(()=>{const s=()=>{const c=new Date().getTime(),f=new Date(i).getTime()-c;if(f<0)n("AGORA");else{const m=Math.floor(f/864e5),g=Math.floor(f%(1e3*60*60*24)/(1e3*60*60)),y=Math.floor(f%(1e3*60*60)/(1e3*60)),_=Math.floor(f%(1e3*60)/1e3);n(`${m}d ${g}h ${y}m ${_}s`)}};s();const o=setInterval(s,1e3);return()=>clearInterval(o)},[i]),u.jsx("span",{className:"countdown-text",children:e})},B5=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M14.5 17.5L3 6V3h3l11.5 11.5"}),u.jsx("path",{d:"M13 19l6-6"}),u.jsx("path",{d:"M16 16l4 4"}),u.jsx("path",{d:"M19 21l2-2"})]});function H5(){const i=Yi(),[e,n]=w.useState(null),[s,o]=w.useState(!0),[c,f]=w.useState([]),[m,g]=w.useState([]),[y,_]=w.useState([]),[E,T]=w.useState([]),[V,U]=w.useState(!1),[L,O]=w.useState(new Date),[X,Q]=w.useState(!1),[te,ie]=w.useState(null),[pe,fe]=w.useState(null),[I,N]=w.useState([]),[j,P]=w.useState(!1),[k,C]=w.useState(null),[R,Se]=w.useState(null),[ae,H]=w.useState(null),[re,ye]=w.useState(!1),[qe,Je]=w.useState(!1),[M,ee]=w.useState(null),[de,be]=w.useState({x:280,y:100}),[me,Ne]=w.useState(!1),[Te,ft]=w.useState({x:0,y:0}),[tt,Wt]=w.useState(!1),[Gt,ve]=w.useState(null),je=w.useRef(0),[it,Fe]=w.useState(0),[F,xe]=w.useState(!1),he=w.useRef(null),_e=w.useRef(new Audio(V5)),[Ie,mt]=w.useState(!1);w.useEffect(()=>{zt&&(zt.pause(),zt.currentTime=0)},[]),w.useEffect(()=>{_e.current.volume=.2;const ce=setInterval(()=>O(new Date),1e3);return()=>clearInterval(ce)},[]),w.useEffect(()=>{const ce=[],Be=[];m.forEach(xt=>{const ht=new Date(xt.dataInicio),He=new Date(xt.expiraEm);L>=ht&&L<=He?ce.push(xt):L<ht&&Be.push(xt)}),_(ce),T(Be)},[L,m]),w.useEffect(()=>{const ce=setTimeout(()=>{mt(!0)},2e3);return()=>clearTimeout(ce)},[]),w.useEffect(()=>{let ce=()=>{},Be=()=>{};const xt=rf(jt,ht=>{if(ht){const He=ze(Ae,"characters",ht.uid);ce=On(He,Xe=>{if(Xe.exists()){const Ke=Xe.data(),xa=Ke.character_sheet?.basic_info?.level||1;he.current!==null&&xa>he.current&&(xe(!0),_e.current.currentTime=0,_e.current.play().catch(console.error)),he.current=xa,n(Ke),o(!1)}else o(!1)});const ke=kn(Ut(Ae,"missoes"));Be=On(ke,Xe=>f(Xe.docs.map(Ke=>({id:Ke.id,...Ke.data()}))))}else o(!1),i("/login")});return()=>{xt(),ce(),Be()}},[i]),w.useEffect(()=>{if(!e)return;const ce=kn(Ut(Ae,"sessoes"),ya("participantes","array-contains",e.name)),Be=On(ce,He=>{const ke=He.docs.map(Xe=>({id:Xe.id,...Xe.data()}));if(g(ke),ae){const Xe=ke.find(Ke=>Ke.id===ae.id);if(Xe){if(H(Xe),Xe.latest_roll){const xa=Xe.latest_roll;xa.timestamp>je.current&&ve(Pa=>!Pa||Pa.timestamp!==xa.timestamp?xa:Pa)}const Ke=Xe.connected_players?.includes(jt.currentUser?.uid);Se(Ke?"connected":"waiting")}}}),xt=kn(Ut(Ae,"resenhas"),ya("destinatarios","array-contains",e.name)),ht=On(xt,He=>{const ke=He.docs.map(Ke=>({id:Ke.id,...Ke.data()})).filter(Ke=>new Date(Ke.expiraEm)>new Date);N(ke);const Xe=parseInt(localStorage.getItem("sanchez_last_read_count")||"0");ke.length>Xe?Fe(ke.length-Xe):Fe(0)});return()=>{Be(),ht()}},[e,ae?.id]),w.useEffect(()=>{if(!ae||!jt.currentUser)return;const ce=ze(Ae,"sessoes",ae.id),Be=jt.currentUser.uid;dt(ce,{connected_players:Am(Be)}).catch(console.error);const xt=()=>{};return window.addEventListener("beforeunload",xt),()=>{window.removeEventListener("beforeunload",xt),dt(ce,{connected_players:Ig(Be)}).catch(console.error)}},[ae?.id]);const K=()=>{xe(!1),_e.current.pause()},Me=async ce=>{if(!e)return;if(ce.candidatos?.some(ht=>ht.uid===jt.currentUser.uid))return alert("J candidatado!");const Be=!ce.candidatos||ce.candidatos.length===0,xt={uid:jt.currentUser.uid,nome:e.name,classe:e.class,isLeader:Be,dataCandidatura:new Date().toISOString()};try{await dt(ze(Ae,"missoes",ce.id),{candidatos:Am(xt)}),alert(Be?"Voc  o LDER DO GRUPO!":"Candidatura realizada!")}catch(ht){console.error(ht),alert("Erro ao candidatar.")}},gt=ce=>{H(ce),U(!0),Se(new Date>=new Date(ce.dataInicio)?"connected":"waiting")},$t=()=>{P(!0),localStorage.setItem("sanchez_last_read_count",I.length.toString()),Fe(0)},W=ce=>{Ne(!0),ft({x:ce.clientX-de.x,y:ce.clientY-de.y})},Pe=ce=>{me&&be({x:ce.clientX-Te.x,y:ce.clientY-Te.y})},$e=()=>{Ne(!1)};return s||!Ie?u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",background:"radial-gradient(circle at center, #001a33 0%, #000000 100%)",color:"#ffcc00",fontFamily:"Cinzel, serif",zIndex:9999,position:"fixed",top:0,left:0},children:[u.jsx("img",{src:Cf,alt:"Carregando...",style:{width:"100px",marginBottom:"20px"}}),u.jsx("p",{style:{fontSize:"18px",letterSpacing:"2px",textTransform:"uppercase",animation:"pulseText 2s infinite ease-in-out"},children:"Sintonizando ter..."}),u.jsx("style",{children:`
          @keyframes pulseText { 
            0% { opacity: 0.3; } 
            50% { opacity: 1; } 
            100% { opacity: 0.3; } 
          }
        `})]}):e?u.jsxs("div",{className:"jogador-container",onMouseMove:Pe,onMouseUp:$e,children:[u.jsx("div",{className:"background-layer",style:{backgroundImage:`url(${P5})`}}),u.jsxs("div",{className:"content-layer",children:[u.jsxs("div",{className:"char-hud clickable-hud",onClick:()=>ye(!0),title:"Abrir Ficha",children:[u.jsx("div",{className:"char-avatar",children:u.jsx("div",{className:"avatar-circle",children:u.jsx("span",{className:"hud-level",children:e.character_sheet?.basic_info?.level||1})})}),u.jsxs("div",{className:"char-info",children:[u.jsx("h2",{className:"char-name",children:e.name}),u.jsxs("span",{className:"char-meta",children:[e.race," // ",e.class]})]})]}),ae&&ae.active_map&&u.jsx(rA,{sessaoData:ae,isMaster:!1,currentUserUid:jt.currentUser?.uid,personagensData:[e]}),u.jsx(oA,{sessaoData:ae,isMaster:!1}),u.jsx(lA,{sessaoData:ae,isMaster:!1}),Gt&&u.jsx(uA,{rollData:Gt,onClose:()=>{je.current=Gt.timestamp,ve(null)}}),tt&&ae&&u.jsx(cA,{sessaoId:ae.id,playerName:e.name,onClose:()=>Wt(!1)}),qe&&ae&&u.jsxs("div",{className:"combat-tracker-panel player-view fade-in",style:{top:de.y,left:de.x,zIndex:1e3},children:[u.jsx("div",{className:"tracker-header",onMouseDown:W,style:{cursor:"grab"},children:u.jsx("h3",{className:"tracker-title",children:"COMBATE"})}),u.jsxs("div",{className:"tracker-list",children:[ae.tokens?.map((ce,Be)=>{if(!(ce.visible!==!1))return null;let ht=ce.img;ce.uid===jt.currentUser.uid&&e.character_sheet?.imgUrl&&(ht=e.character_sheet.imgUrl);let He="?",ke="?",Xe="?",Ke="?";return ce.uid===jt.currentUser.uid?(He=e.character_sheet?.status?.hp?.current,Xe=e.character_sheet?.status?.hp?.max,ke=e.character_sheet?.status?.mp?.current,Ke=e.character_sheet?.status?.mp?.max):(ce.type==="enemy"||ce.visibleBars)&&(He=ce.stats?.hp?.current,Xe=ce.stats?.hp?.max,ke=ce.stats?.mp?.current,Ke=ce.stats?.mp?.max),u.jsxs("div",{className:"tracker-item readonly",children:[u.jsxs("div",{className:"t-col-img",children:[u.jsx("div",{className:"t-index",children:Be+1}),u.jsx("div",{className:"t-img",style:{backgroundImage:`url(${ht})`,backgroundPosition:`${ce.imgX||50}% ${ce.imgY||50}%`}})]}),u.jsxs("div",{className:"t-col-info",children:[u.jsx("div",{className:"t-name",children:ce.name}),u.jsxs("div",{className:"t-stats-row",children:[u.jsxs("div",{className:"t-stat hp",children:[u.jsx("label",{children:"HP"}),u.jsx("span",{children:He}),Xe!=="?"&&u.jsxs("small",{children:["/",Xe]})]}),u.jsxs("div",{className:"t-stat mp",children:[u.jsx("label",{children:"MP"}),u.jsx("span",{children:ke}),Ke!=="?"&&u.jsxs("small",{children:["/",Ke]})]})]})]}),ce.type==="enemy"&&u.jsx("div",{className:"t-col-actions",children:u.jsx("button",{className:"btn-icon-sm",title:"Detalhes",onClick:()=>ee({...ce.details,img:ce.img}),children:""})})]},ce.id)}),(!ae.tokens||ae.tokens.length===0)&&u.jsx("div",{className:"empty-tracker",children:"Mesa Vazia"})]})]}),M&&u.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>ee(null),children:u.jsxs("div",{className:"monster-detail-card",onClick:ce=>ce.stopPropagation(),children:[u.jsxs("div",{className:"md-header",children:[u.jsxs("div",{className:"md-title-row",children:[u.jsx("h2",{children:M.name}),u.jsxs("div",{className:"md-stars",children:[[...Array(M.stars||1)].map((ce,Be)=>u.jsx("span",{children:""},Be)),M.difficultyQ&&u.jsx("span",{className:"md-boss-mark",children:"?"})]})]}),u.jsx("div",{className:"md-sub",children:"Nvel de Ameaa"})]}),u.jsxs("div",{className:"md-body",children:[u.jsx("div",{className:"md-img-col",children:u.jsx("div",{className:"md-portrait",style:{backgroundImage:`url(${M.img})`}})}),u.jsxs("div",{className:"md-info-col custom-scrollbar",children:[u.jsxs("div",{className:"md-block",children:[u.jsx("label",{children:"DESCRIO"}),u.jsx("p",{children:M.description||"Sem dados disponveis."})]}),M.drops&&u.jsxs("div",{className:"md-block",children:[u.jsx("label",{children:"DROPS CONHECIDOS"}),u.jsx("p",{children:M.drops})]})]})]}),u.jsx("button",{className:"md-close-btn",onClick:()=>ee(null),children:"FECHAR"})]})}),F&&u.jsx("div",{className:"levelup-global-overlay",children:u.jsxs("div",{className:"levelup-content",children:[u.jsx("h1",{className:"levelup-title",children:"LEVEL UP!"}),u.jsx("button",{className:"levelup-confirm-btn",onClick:K,children:"CONFIRMAR"})]})}),E.length>0&&y.length===0&&!V&&u.jsxs("div",{className:"upcoming-sessions-banner",children:[u.jsx("h3",{children:"A SESSO VAI COMEAR EM BREVE"}),E.map(ce=>u.jsxs("div",{className:"countdown-row",children:[u.jsx("span",{className:"sessao-nome-future",children:ce.missaoNome}),u.jsx(U5,{targetDate:ce.dataInicio})]},ce.id))]}),y.length>0&&!V&&u.jsxs("div",{className:"active-sessions-banner fade-in",children:[u.jsx("h3",{children:"SESSO EM ANDAMENTO!"}),y.map(ce=>u.jsxs("div",{className:"session-entry-row",children:[u.jsx("span",{className:"sessao-nome-active",children:ce.missaoNome}),u.jsx("button",{className:"btn-enter-session",onClick:()=>gt(ce),children:"ENTRAR AGORA"})]},ce.id))]}),R&&ae&&u.jsxs("div",{className:`vtt-status-widget ${R}`,children:[u.jsx("div",{className:"status-indicator"}),u.jsx("div",{className:"status-text",children:R==="waiting"?u.jsxs(u.Fragment,{children:[u.jsx("h4",{children:"AGUARDANDO"}),u.jsx("small",{children:"Conectado..."})]}):u.jsxs(u.Fragment,{children:[u.jsx("h4",{children:"ONLINE"}),u.jsx("small",{children:"Na Mesa"})]})})]}),u.jsx("button",{className:"floating-mission-btn",onClick:()=>Q(!0),title:"Misses",children:""}),R==="connected"&&u.jsx("button",{className:"floating-combat-btn",onClick:()=>Je(!qe),title:"Ver Combate",children:u.jsx(B5,{})}),R==="connected"&&u.jsx("button",{className:"floating-dice-btn",onClick:()=>Wt(!0),title:"Rolar Dados",children:""}),I.length>0&&u.jsxs("button",{className:"floating-sanchez-btn",onClick:$t,title:"Resenhas",children:[u.jsx("div",{className:"sanchez-icon-face",style:{backgroundImage:`url(${aA})`}}),it>0&&u.jsx("span",{className:"notification-badge",children:it})]}),u.jsx(Vg,{isMestre:!1,playerData:e}),X&&u.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>Q(!1),children:u.jsxs("div",{className:"ff-modal-compact ff-card",onClick:ce=>ce.stopPropagation(),children:[u.jsxs("div",{className:"modal-header-compact",children:[u.jsx("h3",{className:"modal-title-ff",children:"QUADRO DE CONTRATOS"}),u.jsx("button",{className:"btn-close-x",onClick:()=>Q(!1),children:""})]}),u.jsx("div",{className:"missions-grid-compact",children:c.map(ce=>u.jsxs("div",{className:`mission-card-compact rank-${ce.rank}`,children:[u.jsx("div",{className:"mc-left",children:u.jsx("span",{className:"mc-rank",children:ce.rank})}),u.jsxs("div",{className:"mc-center",children:[u.jsx("h4",{className:"mc-title",children:ce.nome}),u.jsxs("span",{className:"mc-reward",children:[" ",ce.gilRecompensa," Gil"]})]}),u.jsxs("div",{className:"mc-right",children:[u.jsx("button",{className:"btn-details-mini",onClick:()=>ie(ce),children:"Ver Detalhes"}),u.jsx("button",{className:"btn-accept-mini",onClick:()=>Me(ce),children:"ACEITAR"})]})]},ce.id))})]})}),te&&u.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>ie(null),style:{zIndex:1e5},children:u.jsxs("div",{className:"ff-modal-details-wide ff-card",onClick:ce=>ce.stopPropagation(),children:[u.jsxs("div",{className:"detail-wide-header",children:[u.jsx("div",{className:"dw-rank-badge",children:te.rank}),u.jsxs("div",{className:"dw-title-box",children:[u.jsx("h2",{children:te.nome}),u.jsxs("span",{className:"dw-narrator",children:["Narrador: ",te.mestreNome]})]}),u.jsxs("div",{className:"dw-vagas-box",children:[u.jsxs("span",{className:"dw-vagas-label",children:["Grupo: ",te.candidatos?te.candidatos.length:0," / ",te.grupo||"?"]}),u.jsx("div",{className:"dw-vagas-bar",children:u.jsx("div",{style:{width:`${Math.min((te.candidatos?.length||0)/(parseInt(te.grupo)||1)*100,100)}%`}})})]})]}),u.jsxs("div",{className:"detail-wide-body",children:[u.jsxs("div",{className:"dw-col-left",children:[u.jsxs("div",{className:"dw-info-item",children:[u.jsx("label",{children:" LOCAL"}),u.jsx("span",{children:te.local||"Desconhecido"})]}),u.jsxs("div",{className:"dw-info-item",children:[u.jsx("label",{children:" CONTRATANTE"}),u.jsx("span",{children:te.contratante||"Annimo"})]}),u.jsxs("div",{className:"dw-reward-box",children:[u.jsx("label",{children:"RECOMPENSAS"}),u.jsxs("div",{className:"dw-gil-row",children:[u.jsx("span",{className:"gil-icon",children:""})," ",u.jsxs("span",{className:"gil-val",children:[te.gilRecompensa," GIL"]})]}),te.recompensa&&u.jsx("div",{className:"dw-extra-rewards",children:te.recompensa.split(`
`).map((ce,Be)=>u.jsxs("div",{className:"reward-item",children:[" ",ce]},Be))})]}),u.jsxs("div",{className:"dw-candidates-box",children:[u.jsx("label",{children:"AVENTUREIROS INSCRITOS"}),u.jsx("div",{className:"dw-cand-list",children:te.candidatos&&te.candidatos.length>0?te.candidatos.map((ce,Be)=>u.jsxs("div",{className:"dw-cand-item",style:{color:ce.isLeader?"#ffcc00":"#ccc"},children:[ce.isLeader?"":""," ",ce.nome]},Be)):u.jsx("span",{style:{fontSize:"11px",color:"#666"},children:"Seja o primeiro!"})})]}),te.imagem&&u.jsx("button",{className:"btn-cartaz-full",onClick:()=>fe(te.imagem),children:" VER CARTAZ"})]}),u.jsxs("div",{className:"dw-col-right custom-scrollbar",children:[u.jsxs("div",{className:"dw-text-block",children:[u.jsx("label",{children:" DESCRIO"}),u.jsx("p",{children:te.descricaoMissao})]}),u.jsxs("div",{className:"dw-text-block",children:[u.jsx("label",{children:" OBJETIVOS"}),u.jsx("p",{children:te.objetivosMissao})]}),u.jsxs("div",{className:"dw-text-block",children:[u.jsx("label",{children:" REQUISITOS"}),u.jsx("p",{children:te.requisitos})]})]})]}),u.jsx("button",{className:"dw-close-btn",onClick:()=>ie(null),children:"FECHAR"})]})}),pe&&u.jsx("div",{className:"ff-modal-overlay-flex",style:{zIndex:100001},onClick:()=>fe(null),children:u.jsxs("div",{className:"lightbox-wrap",children:[u.jsx("button",{className:"close-lightbox",onClick:()=>fe(null),children:""}),u.jsx("img",{src:pe,alt:"Cartaz",className:"cartaz-full-view"})]})}),j&&u.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>P(!1),children:u.jsxs("div",{className:"ff-modal-content ff-card",onClick:ce=>ce.stopPropagation(),children:[u.jsxs("div",{className:"modal-header-row",children:[u.jsx("h3",{className:"modal-title-ff",children:"RESENHAS"}),u.jsx("button",{className:"btn-close-x",onClick:()=>P(!1),children:""})]}),u.jsx("div",{className:"resenhas-list-container",children:I.map(ce=>u.jsx("div",{className:"resenha-row-player",onClick:()=>{C(ce),P(!1)},children:u.jsx("h4",{children:ce.titulo})},ce.id))})]})}),k&&u.jsx("div",{className:"papiro-overlay-full",onClick:()=>C(null),children:u.jsxs("div",{className:"papiro-real-container",style:{backgroundImage:`url(${iA})`},onClick:ce=>ce.stopPropagation(),children:[u.jsx("h2",{className:"papiro-title-real",children:k.titulo}),u.jsx("div",{className:"papiro-body-real",dangerouslySetInnerHTML:{__html:k.conteudo}}),u.jsx("button",{className:"papiro-close-btn",onClick:()=>C(null),children:"FECHAR"})]})}),re&&e&&u.jsx(zg,{characterData:e,isMaster:!1,onClose:()=>ye(!1)})]}),u.jsx("style",{children:`
        /* CSS IGUAL AO ANTERIOR + NOVOS */
        .jogador-container { position: relative; width: 100vw; height: 100vh; overflow: hidden; background: #000; font-family: 'Cinzel', serif; color: white; }
        .background-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; z-index: 0; }
        .content-layer { position: relative; z-index: 10; width: 100%; height: 100%; }
        
        .char-hud { position: absolute; top: 20px; left: 20px; display: flex; align-items: center; gap: 15px; background: rgba(0,0,0,0.8); padding: 15px 25px; border-radius: 50px; border: 1px solid #ffcc00; z-index: 50; cursor: pointer; }
        .avatar-circle { width: 60px; height: 60px; background: #222; border-radius: 50%; border: 2px solid #fff; display: flex; align-items: center; justify-content: center; }
        .hud-level { font-size: 28px; font-weight: bold; color: #ffcc00; }
        .char-info h2 { margin: 0; font-size: 20px; color: #ffcc00; text-shadow: 0 0 10px rgba(255, 204, 0, 0.5); }
        .char-meta { font-size: 12px; color: #00f2ff; }
        
        /* BOTES FLUTUANTES EMPILHADOS */
        .floating-mission-btn { position: fixed; bottom: 30px; left: 15px; width: 50px; height: 50px; border-radius: 50%; border: 2px solid #ffcc00; background: #000; color: #fff; font-size: 24px; cursor: pointer; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-mission-btn:hover { transform: scale(1.1); box-shadow: 0 0 15px #ffcc00; }

        .floating-dice-btn { position: fixed; bottom: 90px; left: 18px; width: 45px; height: 45px; border-radius: 50%; border: 2px solid #fff; background: #111; color: #fff; font-size: 20px; cursor: pointer; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-dice-btn:hover { border-color: #ffcc00; transform: scale(1.1); box-shadow: 0 0 15px #ffcc00; }
        
        .floating-combat-btn { position: fixed; bottom: 150px; left: 18px; width: 45px; height: 45px; border-radius: 50%; border: 2px solid #f44; background: #111; color: #f44; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-combat-btn:hover { border-color: #fff; color: #fff; transform: scale(1.1); box-shadow: 0 0 15px #f44; }

        .floating-sanchez-btn { position: fixed; bottom: 210px; left: 15px; width: 50px; height: 50px; border-radius: 50%; border: 2px solid #00f2ff; background: #000; cursor: pointer; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-sanchez-btn:hover { transform: scale(1.1); box-shadow: 0 0 15px #00f2ff; }

        .sanchez-icon-face { width: 100%; height: 100%; border-radius: 50%; background-size: cover; opacity: 0.8; }
        .floating-sanchez-btn:hover .sanchez-icon-face { opacity: 1; }
        .notification-badge { position: absolute; top: -2px; right: -2px; background: #f00; color: #fff; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; border: 1px solid #fff; font-weight: bold; font-size: 10px; z-index: 1000; box-shadow: 0 0 5px #000; }
        
        /* TRACKER VISUAL PLAYER */
        .combat-tracker-panel { 
            position: absolute; 
            width: 300px; 
            max-height: 70vh; 
            background: linear-gradient(180deg, #0d0d10 0%, #000 100%);
            border: 2px solid #b8860b; 
            border-radius: 6px; 
            z-index: 55; 
            display: flex; flex-direction: column; 
            box-shadow: 0 0 25px rgba(0,0,0,0.9);
        }
        .tracker-header { background: #15100a; border-bottom: 2px solid #b8860b; padding: 10px; text-align: center; }
        .tracker-title { color: #ffcc00; margin: 0; font-family: 'Cinzel', serif; letter-spacing: 3px; font-size: 16px; text-shadow: 0 0 5px #ffcc00; }
        .tracker-list { flex: 1; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 8px; }
        
        .tracker-item { display: flex; align-items: center; background: rgba(20, 20, 25, 0.9); border: 1px solid #444; border-radius: 4px; padding: 8px 5px; gap: 8px; transition: 0.2s; }
        .tracker-item:hover { border-color: #ffcc00; }
        .t-col-img { display: flex; flex-direction: column; align-items: center; width: 45px; flex-shrink: 0; }
        .t-index { color: #666; font-size: 10px; font-weight: bold; margin-bottom: 2px; }
        .t-img { width: 40px; height: 40px; border-radius: 50%; background-size: cover; border: 1px solid #777; box-shadow: 0 0 5px #000; }
        .t-col-info { flex: 1; display: flex; flex-direction: column; gap: 4px; overflow: hidden; }
        .t-name { font-size: 13px; font-weight: bold; color: #eec; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .t-stats-row { display: flex; gap: 5px; }
        .t-stat { display: flex; align-items: center; font-size: 11px; background: #080808; padding: 2px 5px; border-radius: 3px; border: 1px solid #333; }
        .t-stat label { margin-right: 4px; font-weight: bold; font-size: 9px; }
        .t-stat.hp label { color: #f44; } .t-stat.mp label { color: #00f2ff; }
        .t-stat span { color: #fff; font-weight: bold; }
        .t-stat small { color: #555; margin-left: 2px; font-size: 9px; }
        .t-col-actions { display: flex; gap: 6px; align-items: center; margin-left: auto; }
        .btn-icon-sm { background: #222; border: 1px solid #555; color: #ccc; width: 22px; height: 22px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center; border-radius: 3px; }
        .btn-icon-sm:hover { border-color: #ffcc00; color: #fff; }
        .empty-tracker { text-align: center; padding: 30px; color: #666; font-style: italic; font-size: 12px; font-family: 'serif'; }

        /* MONSTER DETAIL MODAL DARK FANTASY */
        .monster-detail-card { 
            width: 500px; max-width: 95vw;
            background: #0d0d10 url('https://www.transparenttextures.com/patterns/dark-matter.png');
            border: 2px solid #b8860b;
            box-shadow: 0 0 50px rgba(0,0,0,0.9), inset 0 0 100px rgba(0,0,0,0.8);
            border-radius: 8px; overflow: hidden; display: flex; flex-direction: column;
        }
        .md-header { background: linear-gradient(90deg, #15100a, #000); padding: 15px 20px; border-bottom: 1px solid #b8860b; }
        .md-title-row { display: flex; justify-content: space-between; align-items: center; }
        .md-title-row h2 { margin: 0; font-family: 'Cinzel', serif; color: #ffcc00; font-size: 20px; letter-spacing: 2px; }
        .md-stars { color: #ffd700; font-size: 14px; text-shadow: 0 0 5px #ffd700; }
        .md-boss-mark { color: #f44; font-weight: bold; margin-left: 5px; font-size: 16px; }
        .md-sub { font-size: 12px; color: #888; margin-top: 5px; font-style: italic; }
        .md-body { display: flex; padding: 20px; gap: 20px; min-height: 250px; }
        .md-img-col { width: 120px; flex-shrink: 0; }
        .md-portrait { width: 120px; height: 120px; border: 2px solid #444; border-radius: 4px; background-size: cover; background-position: center; box-shadow: 0 0 15px #000; }
        .md-info-col { flex: 1; overflow-y: auto; max-height: 400px; padding-right: 5px; }
        .md-block { margin-bottom: 15px; }
        .md-block label { display: block; color: #b8860b; font-size: 10px; font-weight: bold; border-bottom: 1px solid #333; margin-bottom: 5px; }
        .md-block p { margin: 0; font-size: 13px; color: #ccc; line-height: 1.4; white-space: pre-wrap; }
        .md-close-btn { width: 100%; padding: 15px; background: #111; color: #fff; border: none; border-top: 1px solid #b8860b; font-family: 'Cinzel', serif; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .md-close-btn:hover { background: #b8860b; color: #000; }

        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        /* OUTROS ESTILOS (Sesso, VTT Widget, etc) */
        .vtt-status-widget { position: fixed; top: 20px; right: 20px; background: rgba(0,0,0,0.9); border: 2px solid; padding: 15px; border-radius: 8px; display: flex; align-items: center; gap: 15px; z-index: 90; width: 200px; }
        .vtt-status-widget.waiting { border-color: #ffcc00; }
        .vtt-status-widget.connected { border-color: #0f0; }
        .status-indicator { width: 15px; height: 15px; border-radius: 50%; background: #fff; }
        .waiting .status-indicator { background: #ffcc00; }
        .connected .status-indicator { background: #0f0; }
        .status-text h4 { margin: 0; font-size: 14px; color: #fff; }
        .status-text small { font-size: 11px; color: #ccc; }
        
        .upcoming-sessions-banner { position: absolute; top: 150px; left: 50%; transform: translateX(-50%); background: rgba(13, 13, 21, 0.95); border: 2px solid #ffcc00; padding: 30px 50px; border-radius: 8px; text-align: center; z-index: 80; min-width: 400px; }
        .upcoming-sessions-banner h3 { color: #ffcc00; margin: 0 0 15px 0; font-size: 20px; letter-spacing: 2px; }
        .countdown-row { display: flex; justify-content: space-between; align-items: center; gap: 20px; margin-top: 10px; }
        .sessao-nome-future { font-size: 16px; color: #fff; text-transform: uppercase; }
        .countdown-text { color: #00f2ff; font-family: monospace; font-size: 24px; font-weight: bold; }

        .active-sessions-banner { position: absolute; top: 150px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, rgba(20, 0, 0, 0.95), rgba(0,0,0,0.95)); border: 2px solid #f44; padding: 30px 50px; border-radius: 12px; text-align: center; z-index: 80; min-width: 450px; animation: pulseBanner 2s infinite; }
        @keyframes pulseBanner { 0% { box-shadow: 0 0 20px rgba(255,0,0,0.2); } 50% { box-shadow: 0 0 50px rgba(255,0,0,0.5); } 100% { box-shadow: 0 0 20px rgba(255,0,0,0.2); } }
        .session-entry-row { display: flex; justify-content: space-between; align-items: center; gap: 30px; }
        .sessao-nome-active { font-size: 18px; color: #fff; font-weight: bold; text-transform: uppercase; }
        .btn-enter-session { background: #f00; color: #fff; border: none; padding: 12px 30px; cursor: pointer; font-weight: bold; font-size: 16px; border-radius: 4px; }
        
        .ff-modal-overlay-flex { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 99999; display: flex; align-items: center; justify-content: center; }
        .ff-modal-content { width: 600px; background: #0d0d15; border: 2px solid #ffcc00; padding: 25px; border-radius: 8px; }
        .modal-header-row { display: flex; justify-content: space-between; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 15px; }
        .modal-title-ff { color: #ffcc00; margin: 0; }
        .btn-close-x { background: none; border: none; color: #fff; font-size: 24px; cursor: pointer; }
        
        .ff-modal-compact { width: 650px; background: #050505; border: 2px solid #ffcc00; padding: 20px; border-radius: 8px; max-height: 80vh; display: flex; flex-direction: column; }
        .modal-header-compact { display: flex; justify-content: space-between; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px; align-items: center; }
        .missions-grid-compact { overflow-y: auto; padding-right: 5px; display: grid; grid-template-columns: 1fr; gap: 10px; }
        .mission-card-compact { display: flex; background: rgba(255,255,255,0.05); border: 1px solid #333; border-radius: 4px; padding: 10px; align-items: center; transition: 0.2s; }
        .mission-card-compact:hover { border-color: #ffcc00; background: rgba(255,204,0,0.05); }
        .mc-left { width: 50px; display: flex; justify-content: center; font-size: 24px; font-weight: bold; color: #444; }
        .mc-center { flex: 1; padding: 0 15px; }
        .mc-title { margin: 0; font-size: 16px; color: #fff; text-transform: uppercase; }
        .mc-reward { font-size: 12px; color: #ffcc00; }
        .mc-right { display: flex; gap: 10px; }
        .btn-details-mini { background: transparent; border: 1px solid #00f2ff; color: #00f2ff; padding: 5px 10px; font-size: 10px; cursor: pointer; text-transform: uppercase; }
        .btn-accept-mini { background: #00f2ff; color: #000; border: none; padding: 5px 15px; font-size: 10px; font-weight: bold; cursor: pointer; }

        .ff-modal-details-wide { width: 800px; height: 500px; background: #000814; border: 2px solid #ffcc00; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 0 50px #000; border-radius: 6px; }
        .detail-wide-header { height: 70px; background: linear-gradient(90deg, #111, #000); border-bottom: 1px solid #333; display: flex; align-items: center; padding: 0 20px; gap: 20px; }
        .dw-rank-badge { font-size: 36px; font-weight: bold; color: #333; text-shadow: -1px -1px 0 #ffcc00; }
        .dw-title-box h2 { margin: 0; color: #fff; font-size: 22px; text-transform: uppercase; letter-spacing: 1px; }
        .dw-narrator { font-size: 11px; color: #00f2ff; text-transform: uppercase; }
        .dw-vagas-box { flex: 1; display: flex; flex-direction: column; align-items: flex-end; justify-content: center; }
        .dw-vagas-label { font-size: 10px; color: #888; margin-bottom: 3px; }
        .dw-vagas-bar { width: 120px; height: 4px; background: #222; border-radius: 2px; overflow: hidden; }
        .dw-vagas-bar div { height: 100%; background: #0f0; transition: width 0.3s; }
        .detail-wide-body { flex: 1; display: flex; overflow: hidden; }
        .dw-col-left { width: 300px; background: rgba(255,255,255,0.02); border-right: 1px solid #333; padding: 20px; display: flex; flex-direction: column; gap: 20px; overflow-y: auto; }
        .dw-info-item label { display: block; font-size: 10px; color: #ffcc00; font-weight: bold; margin-bottom: 3px; }
        .dw-info-item span { font-size: 13px; color: #fff; }
        .dw-reward-box { background: rgba(255,204,0,0.05); padding: 15px; border: 1px solid rgba(255,204,0,0.1); border-radius: 4px; }
        .dw-reward-box label { display: block; font-size: 10px; color: #ffcc00; font-weight: bold; border-bottom: 1px solid rgba(255,204,0,0.2); padding-bottom: 5px; margin-bottom: 8px; }
        .dw-gil-row { display: flex; align-items: center; gap: 8px; font-size: 16px; color: #fff; font-weight: bold; }
        .dw-extra-rewards { margin-top: 10px; display: flex; flex-direction: column; gap: 4px; }
        .reward-pill { font-size: 11px; color: #ccc; font-style: italic; }
        .dw-candidates-box label { font-size: 10px; color: #666; font-weight: bold; display: block; margin-bottom: 8px; }
        .dw-cand-list { display: flex; flex-direction: column; gap: 5px; }
        .dw-cand-item { font-size: 12px; }
        .btn-cartaz-full { width: 100%; background: #000; border: 1px solid #00f2ff; color: #00f2ff; padding: 10px; font-size: 11px; font-weight: bold; cursor: pointer; margin-top: auto; }
        .btn-cartaz-full:hover { background: #00f2ff; color: #000; }
        .dw-col-right { flex: 1; padding: 25px; overflow-y: auto; }
        .dw-text-block { margin-bottom: 20px; }
        .dw-text-block label { color: #ffcc00; font-size: 11px; font-weight: bold; border-bottom: 1px solid #333; display: block; padding-bottom: 5px; margin-bottom: 8px; }
        .dw-text-block p { color: #ddd; font-size: 14px; line-height: 1.5; white-space: pre-wrap; margin: 0; }
        .dw-close-btn { width: 100%; background: #111; border: none; border-top: 1px solid #333; color: #fff; padding: 12px; cursor: pointer; font-weight: bold; font-size: 12px; }
        .dw-close-btn:hover { background: #222; color: #ffcc00; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #444; border-radius: 3px; }
        .lightbox-wrap { position: relative; max-width: 90vw; max-height: 90vh; display: flex; align-items: center; justify-content: center; }
        .cartaz-full-view { max-width: 100%; max-height: 90vh; border: 3px solid #ffcc00; box-shadow: 0 0 50px #000; }
        .close-lightbox { position: absolute; top: -40px; right: -40px; background: transparent; border: none; color: #fff; font-size: 40px; cursor: pointer; }
        .btn-cyan { border: 1px solid #00f2ff; color: #00f2ff; padding: 10px 15px; background: transparent; cursor: pointer; font-size: 12px; font-weight: bold; transition: 0.2s; text-transform: uppercase; }
        .btn-cyan:hover { background: rgba(0, 242, 255, 0.1); box-shadow: 0 0 10px rgba(0, 242, 255, 0.2); }

        /* PAPIRO REAL (CORRIGIDO PARA ELIMINAR BORDA E AJUSTAR TEXTO) */
        .papiro-overlay-full { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 100000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .papiro-real-container { 
            width: 850px; 
            max-width: 95vw; 
            height: 90vh; 
            background-size: 100% 100%; 
            background-repeat: no-repeat;
            position: relative; 
            /* AUMENTO DO PADDING PARA FUGIR DAS BORDAS DO DESENHO */
            padding: 140px 100px 120px 100px; 
            box-sizing: border-box; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            color: #3e2723; 
            font-family: 'Cinzel', serif; 
            text-shadow: none; 
            /* REMOVIDO box-shadow QUADRADO E TROCADO POR DROP-SHADOW NO PNG */
            box-shadow: none; 
            filter: drop-shadow(0 10px 30px rgba(0,0,0,0.8));
        }
        .papiro-title-real { font-size: 2.5rem; margin: 0 0 20px 0; border-bottom: 2px solid #5d4037; padding-bottom: 10px; width: 100%; text-align: center; color: #3e2723; }
        .papiro-body-real { font-size: 1.2rem; line-height: 1.8; text-align: justify; overflow-y: auto; width: 100%; flex: 1; padding-right: 15px; font-family: 'Lato', serif; font-weight: 600; color: #3e2723; }
        .papiro-close-btn { margin-top: 20px; background: transparent; color: #5d4037; border: 2px solid #5d4037; padding: 10px 40px; font-weight: bold; cursor: pointer; transition: 0.2s; font-family: 'Cinzel', serif; font-size: 1.1rem; }
        .papiro-close-btn:hover { background: #5d4037; color: #d7ccc8; }
        .papiro-body-real::-webkit-scrollbar { width: 8px; }
        .papiro-body-real::-webkit-scrollbar-thumb { background: #8d6e63; border-radius: 4px; }
      `})]}):u.jsx("div",{className:"loading-screen",children:"Nenhum personagem encontrado."})}const q5=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),u.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"18"}),u.jsx("line",{x1:"16",y1:"6",x2:"16",y2:"22"})]}),F5=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 7v10l10 5 10-5V7"}),u.jsx("path",{d:"M12 22V12"})]}),G5=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),u.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),u.jsx("polyline",{points:"21 15 16 10 5 21"})]}),$5=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 2c-4 0-8 3-8 8 0 4 3 7 5 7.5V21h6v-3.5c2-.5 5-3.5 5-7.5 0-5-4-8-8-8z"}),u.jsx("path",{d:"M9 10h.01"}),u.jsx("path",{d:"M15 10h.01"}),u.jsx("path",{d:"M10 14h4"})]}),K5=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),u.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),Y5=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 2a3 3 0 0 1 3 3c0 2-3 3-3 3s-3-1-3-3a3 3 0 0 1 3-3z"}),u.jsx("path",{d:"M15 9c1 1 2.5 2 2.5 4 0 2-2.5 4-2.5 4H9s-2.5-2-2.5-4c0-2 1.5-3 2.5-4"}),u.jsx("path",{d:"M9 17v1a3 3 0 0 0 6 0v-1"}),u.jsx("line",{x1:"7",y1:"22",x2:"17",y2:"22"})]}),Q5=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M14.5 17.5L3 6V3h3l11.5 11.5"}),u.jsx("path",{d:"M13 19l6-6"}),u.jsx("path",{d:"M16 16l4 4"}),u.jsx("path",{d:"M19 21l2-2"})]});function X5(){const i=Yi(),[e,n]=w.useState(null),[s,o]=w.useState(!0),[c,f]=w.useState([]),[m,g]=w.useState([]),[y,_]=w.useState(null),[E,T]=w.useState(!1),[V,U]=w.useState(!1),[L,O]=w.useState(!1),[X,Q]=w.useState(!1),[te,ie]=w.useState(!1),[pe,fe]=w.useState(!1),[I,N]=w.useState(null),[j,P]=w.useState({x:280,y:100}),[k,C]=w.useState(!1),[R,Se]=w.useState({x:0,y:0}),[ae,H]=w.useState(null),[re,ye]=w.useState({name:"",img:"",stars:1,difficultyQ:!1,hpCurrent:10,hpMax:10,mpCurrent:10,mpMax:10,xp:0,drops:"",tips:"",description:"",visibleBars:!1}),[qe,Je]=w.useState([]),[M,ee]=w.useState("list"),[de,be]=w.useState([]),[me,Ne]=w.useState(!1),[Te,ft]=w.useState(null),tt=w.useRef(0),Wt=w.useRef(null);w.useEffect(()=>{Wt.current=e},[e]),w.useEffect(()=>{const W=setTimeout(()=>{ve(!0)},2e3);return()=>clearTimeout(W)},[]);const[Gt,ve]=w.useState(!1);w.useEffect(()=>{let W=()=>{};const Pe=rf(jt,$e=>{if($e){const ce=kn(Ut(Ae,"sessoes"),ya("mestreId","==",$e.uid));W=On(ce,xt=>{const He=xt.docs.map(ke=>({id:ke.id,...ke.data()})).find(ke=>{const Xe=new Date,Ke=new Date(ke.expiraEm);return Xe<=Ke});if(He&&(n(He),g(He.connected_players||[]),He.latest_roll)){const ke=He.latest_roll;ke.timestamp>tt.current&&ft(Xe=>!Xe||Xe.timestamp!==ke.timestamp?ke:Xe)}o(!1)});const Be=kn(Ut(Ae,"bestiary"),ya("mestreId","==",$e.uid));On(Be,xt=>Je(xt.docs.map(ht=>({id:ht.id,...ht.data()}))))}else o(!1),i("/login")});return()=>{Pe(),W()}},[i]),w.useEffect(()=>{if(e?.id)return dt(ze(Ae,"sessoes",e.id),{dm_online:!0}).catch(console.error),()=>dt(ze(Ae,"sessoes",e.id),{dm_online:!1}).catch(console.error)},[e?.id]),w.useEffect(()=>{const W=kn(Ut(Ae,"characters")),Pe=On(W,$e=>{const ce=$e.docs.map(Be=>({id:Be.id,...Be.data()}));if(be(ce),e&&e.participantes){const Be=ce.filter(xt=>e.participantes.includes(xt.name));f(Be)}});return()=>Pe()},[e?.participantes]);const je=async()=>{try{await Lo(Ut(Ae,"bestiary"),{...re,mestreId:jt.currentUser.uid,createdAt:new Date().toISOString()}),ee("list"),ye({name:"",img:"",stars:1,difficultyQ:!1,hpCurrent:10,hpMax:10,mpCurrent:10,mpMax:10,xp:0,drops:"",tips:"",description:"",visibleBars:!1})}catch(W){alert("Erro: "+W.message)}},it=async W=>{if(!e)return;const Pe={id:`enemy_${Date.now()}`,type:"enemy",name:W.name,img:W.img,x:0,y:0,size:1,visible:!0,visibleBars:W.visibleBars,stats:{hp:{current:W.hpCurrent,max:W.hpMax},mp:{current:W.mpCurrent,max:W.mpMax}},details:{...W}};await dt(ze(Ae,"sessoes",e.id),{tokens:[...e.tokens||[],Pe]}),Q(!1)},Fe=async W=>{if(!e)return;if(e.tokens?.find($e=>$e.uid===W.uid))return alert("Jogador j est no mapa!");const Pe={id:`player_${W.uid}`,type:"player",uid:W.uid,name:W.name,img:W.character_sheet?.imgUrl||"",x:0,y:0,size:1,visible:!0,controlledBy:W.uid};await dt(ze(Ae,"sessoes",e.id),{tokens:[...e.tokens||[],Pe]}),ie(!1)},F=async W=>{const Pe=e.tokens.filter($e=>$e.id!==W);await dt(ze(Ae,"sessoes",e.id),{tokens:Pe})},xe=async(W,Pe)=>{const $e=e.tokens.map(ce=>ce.id===W.id?{...ce,...Pe}:ce);await dt(ze(Ae,"sessoes",e.id),{tokens:$e})},he=async(W,Pe,$e)=>{if(W.type!=="enemy")return;const ce=e.tokens.map(Be=>Be.id===W.id?{...Be,stats:{...Be.stats,[Pe]:{...Be.stats[Pe],current:Number($e)}}}:Be);await dt(ze(Ae,"sessoes",e.id),{tokens:ce})},_e=(W,Pe)=>{W.dataTransfer.setData("dragIndex",Pe)},Ie=async(W,Pe)=>{const $e=W.dataTransfer.getData("dragIndex");if($e==="")return;const ce=[...e.tokens],[Be]=ce.splice($e,1);ce.splice(Pe,0,Be),await dt(ze(Ae,"sessoes",e.id),{tokens:ce})},mt=W=>{C(!0),Se({x:W.clientX-j.x,y:W.clientY-j.y})},K=W=>{k&&P({x:W.clientX-R.x,y:W.clientY-R.y})},Me=()=>{C(!1)},gt=async()=>{if(!ae||!e)return;const W=e.tokens.map(Pe=>{if(Pe.id===ae.id){let $e={...Pe};return ae.stats&&($e.stats={hp:{...Pe.stats?.hp,current:ae.stats.hp.current},mp:{...Pe.stats?.mp,current:ae.stats.mp.current}}),$e.imgX=ae.imgX,$e.imgY=ae.imgY,$e}return Pe});await dt(ze(Ae,"sessoes",e.id),{tokens:W}),H(null)},$t=(W,Pe)=>{if(!ae)return;const $e=ae[W]!==void 0?ae[W]:50;H({...ae,[W]:$e+Pe})};return s||!Gt?u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",background:"radial-gradient(circle at center, #001a33 0%, #000000 100%)",color:"#ffcc00",fontFamily:"Cinzel, serif",zIndex:9999,position:"fixed",top:0,left:0},children:[u.jsx("img",{src:Cf,alt:"Carregando...",style:{width:"100px",marginBottom:"20px"}}),u.jsx("p",{style:{fontSize:"18px",letterSpacing:"2px",textTransform:"uppercase",animation:"pulseText 2s infinite ease-in-out"},children:"Sintonizando ter..."}),u.jsx("style",{children:`
          @keyframes pulseText { 
            0% { opacity: 0.3; } 
            50% { opacity: 1; } 
            100% { opacity: 0.3; } 
          }
        `})]}):u.jsxs("div",{className:"mestre-vtt-container",onMouseMove:K,onMouseUp:Me,children:[u.jsx("div",{className:"mestre-bg-layer",style:{backgroundImage:`url(${nA})`}}),u.jsxs("div",{className:"dm-players-sidebar",children:[u.jsx("h3",{className:"sidebar-title",children:"AVENTUREIROS"}),u.jsx("div",{className:"players-list-scroll",children:c.map(W=>{const Pe=m.includes(W.uid),$e=W.character_sheet?.imgUrl;return u.jsxs("div",{className:`mini-player-card ${Pe?"online":"offline"}`,onClick:()=>_(W),title:"Ficha",children:[u.jsxs("div",{className:"mini-avatar",children:[$e?u.jsx("div",{className:"avatar-img",style:{backgroundImage:`url(${$e})`}}):u.jsx("div",{className:"avatar-placeholder",children:W.name.charAt(0)}),u.jsx("div",{className:`status-dot ${Pe?"green":"gray"}`})]}),u.jsxs("div",{className:"mini-info",children:[u.jsx("span",{className:"p-name",children:W.name}),u.jsxs("span",{className:"p-lvl",children:["LVL ",W.character_sheet?.basic_info?.level||1]})]})]},W.id)})})]}),u.jsxs("div",{className:"session-status-top",children:[u.jsx("div",{className:"status-indicator active"}),u.jsxs("div",{className:"status-info",children:[u.jsxs("h2",{children:["SESSO ATIVA: ",e.missaoNome]}),u.jsxs("p",{children:["Mestre Online  ",m.length," Jogadores Conectados"]})]})]}),u.jsx(rA,{sessaoData:e,isMaster:!0,showManager:E,onCloseManager:()=>T(!1),personagensData:c,onEditToken:W=>H(JSON.parse(JSON.stringify(W)))}),u.jsx(oA,{sessaoData:e,isMaster:!0,showManager:V,onCloseManager:()=>U(!1)}),u.jsx(lA,{sessaoData:e,isMaster:!0,showManager:L,onCloseManager:()=>O(!1)}),Te&&u.jsx(uA,{rollData:Te,onClose:()=>{tt.current=Te.timestamp,ft(null)}}),me&&u.jsx(cA,{sessaoId:e.id,playerName:"MESTRE",onClose:()=>Ne(!1)}),pe&&u.jsxs("div",{className:"combat-tracker-panel fade-in",style:{top:j.y,left:j.x,zIndex:1e3},children:[u.jsx("div",{className:"tracker-header",onMouseDown:mt,style:{cursor:"grab"},children:u.jsx("h3",{className:"tracker-title",children:"COMBATE"})}),u.jsxs("div",{className:"tracker-list",children:[e.tokens?.map((W,Pe)=>{let $e=0,ce=0,Be=0,xt=0,ht=W.img;if(W.type==="player"){const ke=c.find(Xe=>Xe.uid===W.uid);ke&&($e=ke.character_sheet?.status?.hp?.current||0,ce=ke.character_sheet?.status?.hp?.max||0,Be=ke.character_sheet?.status?.mp?.current||0,xt=ke.character_sheet?.status?.mp?.max||0,ke.character_sheet?.imgUrl&&(ht=ke.character_sheet.imgUrl))}else $e=W.stats.hp.current,ce=W.stats.hp.max,Be=W.stats.mp.current,xt=W.stats.mp.max;const He=W.visible!==!1;return u.jsxs("div",{className:"tracker-item",draggable:!0,onDragStart:ke=>_e(ke,Pe),onDragOver:ke=>ke.preventDefault(),onDrop:ke=>Ie(ke,Pe),children:[u.jsxs("div",{className:"t-col-img",children:[u.jsx("div",{className:"t-index",children:Pe+1}),u.jsx("div",{className:"t-img",style:{backgroundImage:`url(${ht})`,backgroundPosition:`${W.imgX||50}% ${W.imgY||50}%`,opacity:He?1:.5}})]}),u.jsxs("div",{className:"t-col-info",children:[u.jsx("div",{className:"t-name",children:W.name}),u.jsxs("div",{className:"t-stats-row",children:[u.jsxs("div",{className:"t-stat hp",children:[u.jsx("label",{children:"HP"}),W.type==="enemy"?u.jsx("input",{type:"number",value:$e,onChange:ke=>he(W,"hp",ke.target.value)}):u.jsx("span",{children:$e}),u.jsxs("small",{children:["/",ce]})]}),u.jsxs("div",{className:"t-stat mp",children:[u.jsx("label",{children:"MP"}),W.type==="enemy"?u.jsx("input",{type:"number",value:Be,onChange:ke=>he(W,"mp",ke.target.value)}):u.jsx("span",{children:Be}),u.jsxs("small",{children:["/",xt]})]})]})]}),u.jsxs("div",{className:"t-col-actions",children:[u.jsxs("div",{className:"img-adj-grid",children:[u.jsx("button",{onClick:()=>xe(W,{imgY:(W.imgY||50)-10}),children:""}),u.jsxs("div",{style:{display:"flex"},children:[u.jsx("button",{onClick:()=>xe(W,{imgX:(W.imgX||50)-10}),children:""}),u.jsx("button",{onClick:()=>xe(W,{imgX:(W.imgX||50)+10}),children:""})]}),u.jsx("button",{onClick:()=>xe(W,{imgY:(W.imgY||50)+10}),children:""})]}),u.jsxs("div",{className:"act-btns",children:[u.jsx("button",{className:"btn-icon-sm",title:He?"Ocultar":"Mostrar",onClick:()=>xe(W,{visible:!He}),style:{color:He?"#ffcc00":"#666"},children:He?"":""}),W.type==="enemy"&&u.jsx("button",{className:"btn-icon-sm",title:"Detalhes",onClick:()=>N({...W.details,img:W.img}),children:""}),u.jsx("button",{className:"btn-icon-sm delete",title:"Remover",onClick:()=>F(W.id),children:""})]})]})]},W.id)}),(!e.tokens||e.tokens.length===0)&&u.jsx("div",{className:"empty-tracker",children:"Mesa Vazia"})]})]}),I&&u.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>N(null),children:u.jsxs("div",{className:"monster-detail-card",onClick:W=>W.stopPropagation(),children:[u.jsxs("div",{className:"md-header",children:[u.jsxs("div",{className:"md-title-row",children:[u.jsx("h2",{children:I.name}),u.jsxs("div",{className:"md-stars",children:[[...Array(I.stars||1)].map((W,Pe)=>u.jsx("span",{children:""},Pe)),I.difficultyQ&&u.jsx("span",{className:"md-boss-mark",children:"?"})]})]}),u.jsxs("div",{className:"md-sub",children:["XP: ",I.xp]})]}),u.jsxs("div",{className:"md-body",children:[u.jsx("div",{className:"md-img-col",children:u.jsx("div",{className:"md-portrait",style:{backgroundImage:`url(${I.img})`}})}),u.jsxs("div",{className:"md-info-col custom-scrollbar",children:[u.jsxs("div",{className:"md-block",children:[u.jsx("label",{children:"DESCRIO"}),u.jsx("p",{children:I.description||"Sem descrio."})]}),I.drops&&u.jsxs("div",{className:"md-block",children:[u.jsx("label",{children:"DROPS & ITENS"}),u.jsx("p",{children:I.drops})]}),I.tips&&u.jsxs("div",{className:"md-block tips",children:[u.jsx("label",{children:"DICAS DO SANCHEZ (GM)"}),u.jsx("p",{children:I.tips})]})]})]}),u.jsx("button",{className:"md-close-btn",onClick:()=>N(null),children:"FECHAR"})]})}),u.jsxs("div",{className:"dm-tools-dock",children:[u.jsxs("div",{className:"tool-group",children:[u.jsx(Vg,{isMestre:!0,vttDock:!0}),u.jsx("div",{className:"tool-label",children:"BAZAR"})]}),u.jsxs("div",{className:"tool-group",children:[u.jsx(sA,{vttDock:!0}),u.jsx("div",{className:"tool-label",children:"FORJA"})]}),u.jsxs("div",{className:"tool-group",children:[u.jsx("button",{className:"tool-btn-placeholder",onClick:()=>T(!0),children:u.jsx(q5,{})}),u.jsx("div",{className:"tool-label",children:"TABLETOP"})]}),u.jsxs("div",{className:"tool-group",children:[u.jsx("button",{className:"tool-btn-placeholder",onClick:()=>fe(!pe),title:"Rastreador de Combate",children:u.jsx(Q5,{})}),u.jsx("div",{className:"tool-label",children:"COMBATE"})]}),u.jsxs("div",{className:"tool-group",children:[u.jsx("button",{className:"tool-btn-placeholder",onClick:()=>Ne(!0),children:u.jsx(F5,{})}),u.jsx("div",{className:"tool-label",children:"DADOS"})]}),u.jsxs("div",{className:"tool-group",children:[u.jsx("button",{className:"tool-btn-placeholder",onClick:()=>U(!0),children:u.jsx(G5,{})}),u.jsx("div",{className:"tool-label",children:"CENRIOS"})]}),u.jsxs("div",{className:"tool-group",children:[u.jsx("button",{className:"tool-btn-placeholder",onClick:()=>Q(!0),children:u.jsx($5,{})}),u.jsx("div",{className:"tool-label",children:"MONSTROS"})]}),u.jsxs("div",{className:"tool-group",children:[u.jsx("button",{className:"tool-btn-placeholder",onClick:()=>O(!0),children:u.jsx(K5,{})}),u.jsx("div",{className:"tool-label",children:"NPCS"})]}),u.jsxs("div",{className:"tool-group",children:[u.jsx("button",{className:"tool-btn-placeholder",onClick:()=>ie(!0),children:u.jsx(Y5,{})}),u.jsx("div",{className:"tool-label",children:"JOGADORES"})]})]}),y&&u.jsx(zg,{characterData:y,isMaster:!0,onClose:()=>_(null)}),X&&u.jsx("div",{className:"modal-overlay-custom",onClick:()=>Q(!1),children:u.jsxs("div",{className:"modal-box-custom wide",onClick:W=>W.stopPropagation(),children:[u.jsxs("div",{className:"modal-header-c",children:[u.jsx("h3",{children:"BESTIRIO"}),u.jsx("button",{className:"close-c",onClick:()=>Q(!1),children:""})]}),M==="list"?u.jsxs("div",{className:"monster-list-view",children:[u.jsx("button",{className:"btn-create-monster",onClick:()=>ee("create"),children:"+ CRIAR NOVA AMEAA"}),u.jsx("div",{className:"bestiary-grid",children:qe.map(W=>u.jsxs("div",{className:"monster-card-db",children:[u.jsx("div",{className:"m-thumb",style:{backgroundImage:`url(${W.img})`}}),u.jsxs("div",{className:"m-info",children:[u.jsx("strong",{children:W.name}),u.jsxs("small",{children:["HP: ",W.hpMax]})]}),u.jsx("div",{className:"m-actions",children:u.jsx("button",{className:"btn-deploy",onClick:()=>it(W),children:"INSERIR"})})]},W.id))})]}):u.jsxs("div",{className:"monster-create-view",children:[u.jsxs("div",{className:"create-row",children:[u.jsxs("div",{className:"img-upload-box",children:[u.jsx("div",{className:"preview-img",style:{backgroundImage:`url(${re.img})`}}),u.jsx("input",{placeholder:"Link Imagem...",value:re.img,onChange:W=>ye({...re,img:W.target.value})})]}),u.jsxs("div",{className:"details-inputs",children:[u.jsx("input",{className:"input-title",placeholder:"Nome",value:re.name,onChange:W=>ye({...re,name:W.target.value})}),u.jsxs("div",{className:"stats-row-c",children:[u.jsxs("div",{children:[u.jsx("label",{children:"HP Max"}),u.jsx("input",{type:"number",value:re.hpMax,onChange:W=>ye({...re,hpMax:Number(W.target.value),hpCurrent:Number(W.target.value)})})]}),u.jsxs("div",{children:[u.jsx("label",{children:"MP Max"}),u.jsx("input",{type:"number",value:re.mpMax,onChange:W=>ye({...re,mpMax:Number(W.target.value),mpCurrent:Number(W.target.value)})})]})]}),u.jsxs("div",{className:"toggle-row",children:[u.jsx("input",{type:"checkbox",checked:re.visibleBars,onChange:W=>ye({...re,visibleBars:W.target.checked})}),u.jsx("label",{children:"Barras visveis?"})]})]})]}),u.jsxs("div",{className:"text-areas-row",style:{flexDirection:"column",height:"auto"},children:[u.jsx("textarea",{style:{height:"60px"},placeholder:"Descrio (Lore)...",value:re.description,onChange:W=>ye({...re,description:W.target.value})}),u.jsx("textarea",{style:{height:"60px"},placeholder:"Drops (Use Enter para tpicos)",value:re.drops,onChange:W=>ye({...re,drops:W.target.value})}),u.jsx("textarea",{style:{height:"60px"},placeholder:"Dicas do Sanchez (Secreto)",value:re.tips,onChange:W=>ye({...re,tips:W.target.value})})]}),u.jsxs("div",{className:"actions-row-bottom",children:[u.jsx("button",{className:"btn-save-m",onClick:je,children:"SALVAR"}),u.jsx("button",{className:"btn-cancel-m",onClick:()=>ee("list"),children:"VOLTAR"})]})]})]})}),te&&u.jsx("div",{className:"modal-overlay-custom",onClick:()=>ie(!1),children:u.jsxs("div",{className:"modal-box-custom",onClick:W=>W.stopPropagation(),children:[u.jsxs("div",{className:"modal-header-c",children:[u.jsx("h3",{children:"INSERIR JOGADOR"}),u.jsx("button",{className:"close-c",onClick:()=>ie(!1),children:""})]}),u.jsx("div",{className:"player-select-grid",children:de.map(W=>u.jsxs("div",{className:"char-select-card",onClick:()=>Fe(W),children:[u.jsx("div",{className:"c-avatar",style:{backgroundImage:`url(${W.character_sheet?.imgUrl})`}}),u.jsx("span",{children:W.name})]},W.id))})]})}),ae&&u.jsx("div",{className:"modal-overlay-custom",onClick:()=>H(null),children:u.jsxs("div",{className:"modal-box-custom refined-edit",onClick:W=>W.stopPropagation(),children:[u.jsxs("h3",{className:"modal-edit-title",children:["EDITAR: ",ae.name]}),u.jsxs("div",{className:"refined-stats-container",children:[u.jsxs("div",{className:"refined-stat-row",children:[u.jsx("span",{className:"stat-label hp",children:"HP"}),u.jsx("button",{className:"btn-adj",onClick:()=>H({...ae,stats:{...ae.stats,hp:{...ae.stats.hp,current:ae.stats.hp.current-1}}}),children:"-"}),u.jsxs("span",{className:"stat-value",children:[ae.stats.hp.current," / ",ae.stats.hp.max]}),u.jsx("button",{className:"btn-adj",onClick:()=>H({...ae,stats:{...ae.stats,hp:{...ae.stats.hp,current:ae.stats.hp.current+1}}}),children:"+"})]}),u.jsxs("div",{className:"refined-stat-row",children:[u.jsx("span",{className:"stat-label mp",children:"MP"}),u.jsx("button",{className:"btn-adj",onClick:()=>H({...ae,stats:{...ae.stats,mp:{...ae.stats.mp,current:ae.stats.mp.current-1}}}),children:"-"}),u.jsxs("span",{className:"stat-value",children:[ae.stats.mp.current," / ",ae.stats.mp.max]}),u.jsx("button",{className:"btn-adj",onClick:()=>H({...ae,stats:{...ae.stats,mp:{...ae.stats.mp,current:ae.stats.mp.current+1}}}),children:"+"})]})]}),u.jsxs("div",{className:"refined-image-control",children:[u.jsx("label",{children:"AJUSTAR ROSTO (POSIO)"}),u.jsxs("div",{className:"d-pad-grid",children:[u.jsx("div",{}),u.jsx("button",{onClick:()=>$t("imgY",-10),children:""}),u.jsx("div",{}),u.jsx("button",{onClick:()=>$t("imgX",-10),children:""}),u.jsx("div",{className:"center-dot"}),u.jsx("button",{onClick:()=>$t("imgX",10),children:""}),u.jsx("div",{}),u.jsx("button",{onClick:()=>$t("imgY",10),children:""}),u.jsx("div",{})]})]}),u.jsx("button",{className:"btn-save-refined",onClick:gt,children:"OK (SALVAR)"})]})}),u.jsx("style",{children:`
        .mestre-vtt-container { width: 100vw; height: 100vh; overflow: hidden; position: relative; background: #000; font-family: 'Cinzel', serif; color: #fff; }
        .mestre-bg-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.4; z-index: 0; }
        .dm-players-sidebar { position: absolute; top: 20px; left: 20px; width: 200px; background: rgba(0, 10, 20, 0.95); border: 2px solid #ffcc00; border-radius: 8px; padding: 10px; z-index: 50; max-height: 80vh; display: flex; flex-direction: column; }
        .sidebar-title { color: #ffcc00; font-size: 12px; border-bottom: 1px solid #444; padding-bottom: 5px; margin-bottom: 10px; text-align: center; }
        .players-list-scroll { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; }
        .mini-player-card { display: flex; align-items: center; padding: 5px; background: rgba(255,255,255,0.05); border: 1px solid #333; border-radius: 4px; cursor: pointer; }
        .mini-player-card.online { border-left: 3px solid #00f2ff; }
        .mini-avatar { position: relative; margin-right: 8px; }
        .avatar-img, .avatar-placeholder { width: 30px; height: 30px; border-radius: 50%; background-size: cover; border: 1px solid #fff; }
        .avatar-placeholder { background: #222; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .status-dot { width: 6px; height: 6px; border-radius: 50%; position: absolute; bottom: 0; right: 0; border: 1px solid #000; }
        .status-dot.green { background: #00f2ff; } .status-dot.gray { background: #666; }
        .p-name { font-size: 11px; font-weight: bold; display: block; }
        .p-lvl { font-size: 9px; color: #ffcc00; }

        .session-status-top { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); border: 1px solid #00f2ff; padding: 5px 20px; border-radius: 20px; display: flex; align-items: center; gap: 10px; z-index: 40; }
        .status-indicator { width: 10px; height: 10px; background: #00f2ff; border-radius: 50%; box-shadow: 0 0 10px #00f2ff; animation: pulse 2s infinite; }
        .status-info h2 { margin: 0; font-size: 14px; color: #fff; }
        .status-info p { margin: 0; font-size: 10px; color: #00f2ff; }

        /* COMBAT TRACKER */
        .combat-tracker-panel { position: absolute; width: 320px; max-height: 70vh; background: linear-gradient(180deg, #0d0d10 0%, #000 100%); border: 2px solid #b8860b; border-radius: 6px; display: flex; flex-direction: column; box-shadow: 0 0 25px rgba(0,0,0,0.9); }
        .tracker-header { background: #15100a; border-bottom: 2px solid #b8860b; padding: 10px; text-align: center; }
        .tracker-title { color: #ffcc00; margin: 0; font-family: 'Cinzel', serif; letter-spacing: 3px; font-size: 16px; text-shadow: 0 0 5px #ffcc00; }
        .tracker-list { flex: 1; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 8px; }
        .tracker-item { display: flex; align-items: center; background: rgba(20, 20, 25, 0.9); border: 1px solid #444; border-radius: 4px; padding: 8px 5px; gap: 8px; transition: 0.2s; }
        .tracker-item:hover { border-color: #ffcc00; }
        .t-col-img { display: flex; flex-direction: column; align-items: center; width: 45px; flex-shrink: 0; }
        .t-index { color: #666; font-size: 10px; font-weight: bold; margin-bottom: 2px; }
        .t-img { width: 40px; height: 40px; border-radius: 50%; background-size: cover; border: 1px solid #777; box-shadow: 0 0 5px #000; }
        .t-col-info { flex: 1; display: flex; flex-direction: column; gap: 4px; overflow: hidden; }
        .t-name { font-size: 13px; font-weight: bold; color: #eec; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .t-stats-row { display: flex; gap: 5px; }
        .t-stat { display: flex; align-items: center; font-size: 11px; background: #080808; padding: 2px 5px; border-radius: 3px; border: 1px solid #333; }
        .t-stat label { margin-right: 4px; font-weight: bold; font-size: 9px; }
        .t-stat.hp label { color: #f44; } .t-stat.mp label { color: #00f2ff; }
        .t-stat input { width: 28px; background: transparent; border: none; color: #fff; text-align: center; padding: 0; font-size: 11px; font-weight: bold; }
        .t-stat span { color: #fff; font-weight: bold; }
        .t-stat small { color: #555; margin-left: 2px; font-size: 9px; }
        .t-col-actions { display: flex; gap: 6px; align-items: center; }
        .img-adj-grid { display: flex; flex-direction: column; align-items: center; gap: 1px; }
        .img-adj-grid button { width: 14px; height: 12px; font-size: 7px; padding: 0; line-height: 1; background: #222; border: 1px solid #555; color: #aaa; cursor: pointer; }
        .img-adj-grid button:hover { background: #ffcc00; color: #000; }
        .act-btns { display: flex; flex-direction: column; gap: 3px; }
        .btn-icon-sm { background: #222; border: 1px solid #555; color: #ccc; width: 22px; height: 22px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center; border-radius: 3px; }
        .btn-icon-sm:hover { border-color: #ffcc00; color: #fff; }
        .btn-icon-sm.delete:hover { background: #300; border-color: #f44; color: #f44; }
        .empty-tracker { text-align: center; padding: 30px; color: #666; font-style: italic; font-size: 12px; font-family: 'serif'; }

        /* MONSTER DETAIL */
        .monster-detail-card { width: 500px; max-width: 95vw; background: #0d0d10 url('https://www.transparenttextures.com/patterns/dark-matter.png'); border: 2px solid #b8860b; box-shadow: 0 0 50px rgba(0,0,0,0.9), inset 0 0 100px rgba(0,0,0,0.8); border-radius: 8px; overflow: hidden; display: flex; flex-direction: column; }
        .md-header { background: linear-gradient(90deg, #15100a, #000); padding: 15px 20px; border-bottom: 1px solid #b8860b; }
        .md-title-row { display: flex; justify-content: space-between; align-items: center; }
        .md-title-row h2 { margin: 0; font-family: 'Cinzel', serif; color: #ffcc00; font-size: 20px; letter-spacing: 2px; }
        .md-stars { color: #ffd700; font-size: 14px; text-shadow: 0 0 5px #ffd700; }
        .md-boss-mark { color: #f44; font-weight: bold; margin-left: 5px; font-size: 16px; }
        .md-sub { font-size: 12px; color: #888; margin-top: 5px; font-style: italic; }
        .md-body { display: flex; padding: 20px; gap: 20px; min-height: 250px; }
        .md-img-col { width: 120px; flex-shrink: 0; }
        .md-portrait { width: 120px; height: 120px; border: 2px solid #444; border-radius: 4px; background-size: cover; background-position: center; box-shadow: 0 0 15px #000; }
        .md-info-col { flex: 1; overflow-y: auto; max-height: 400px; padding-right: 5px; }
        .md-block { margin-bottom: 15px; }
        .md-block label { display: block; color: #b8860b; font-size: 10px; font-weight: bold; border-bottom: 1px solid #333; margin-bottom: 5px; }
        .md-block p { margin: 0; font-size: 13px; color: #ccc; line-height: 1.4; white-space: pre-wrap; }
        .md-block.tips p { color: #00f2ff; font-style: italic; }
        .md-close-btn { width: 100%; padding: 15px; background: #111; color: #fff; border: none; border-top: 1px solid #b8860b; font-family: 'Cinzel', serif; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .md-close-btn:hover { background: #b8860b; color: #000; }

        /* DOCK COM Z-INDEX ALTO (2000) */
        .dm-tools-dock { position: absolute; right: 20px; bottom: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 2000; align-items: flex-end; }
        .tool-group { display: flex; align-items: center; gap: 10px; flex-direction: row-reverse; }
        .tool-label { background: rgba(0,0,0,0.8); padding: 4px 8px; border-radius: 4px; font-size: 10px; color: #ffcc00; opacity: 0; transition: 0.2s; pointer-events: none; transform: translateX(10px); }
        .tool-group:hover .tool-label { opacity: 1; transform: translateX(0); }
        .tool-btn-placeholder { width: 50px; height: 50px; border-radius: 50%; background: #111; border: 2px solid #555; color: #fff; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s; box-shadow: 0 0 10px #000; pointer-events: auto; }
        .tool-btn-placeholder:hover { border-color: #ffcc00; color: #ffcc00; transform: scale(1.1); }

        /* MODAIS GERAIS */
        .modal-overlay-custom { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .modal-box-custom { background: #080808; border: 2px solid #ffcc00; padding: 20px; border-radius: 8px; width: 500px; max-height: 90vh; overflow-y: auto; display: flex; flex-direction: column; }
        .modal-box-custom.wide { width: 800px; }
        .modal-header-c { display: flex; justify-content: space-between; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 20px; align-items: center; }
        .modal-header-c h3 { margin: 0; color: #ffcc00; }
        .close-c { background: none; border: none; color: #fff; font-size: 20px; cursor: pointer; }
        
        /* ESTILOS REPARADOS PARA BESTIRIO E LISTA JOGADORES */
        .monster-list-view { display: flex; flex-direction: column; gap: 15px; width: 100%; }
        .btn-create-monster { background: #222; border: 1px dashed #ffcc00; color: #ffcc00; padding: 15px; font-weight: bold; cursor: pointer; transition: 0.2s; text-align: center; width: 100%; }
        .btn-create-monster:hover { background: rgba(255, 204, 0, 0.1); }
        .bestiary-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 15px; width: 100%; }
        .monster-card-db { display: flex; background: rgba(255,255,255,0.05); border: 1px solid #333; padding: 10px; gap: 10px; align-items: center; }
        .m-thumb { width: 50px; height: 50px; background-size: cover; border-radius: 4px; border: 1px solid #555; flex-shrink: 0; }
        .m-info { flex: 1; display: flex; flex-direction: column; font-size: 12px; }
        .m-info strong { color: #fff; font-size: 14px; }
        .m-info small { color: #888; }
        .btn-deploy { background: #00f2ff; color: #000; border: none; font-size: 10px; font-weight: bold; padding: 4px 8px; cursor: pointer; border-radius: 2px; }
        
        .player-select-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 10px; }
        .char-select-card { background: rgba(255,255,255,0.05); border: 1px solid #333; padding: 10px; display: flex; align-items: center; gap: 10px; cursor: pointer; transition: 0.2s; border-radius: 4px; }
        .char-select-card:hover { border-color: #00f2ff; background: rgba(0, 242, 255, 0.1); }
        .c-avatar { width: 40px; height: 40px; border-radius: 50%; background-size: cover; border: 1px solid #fff; flex-shrink: 0; }

        /* REFINED EDIT MODAL (CORRIGIDO PARA NO CORTAR) */
        .modal-box-custom.refined-edit { width: 450px; padding: 30px; overflow: visible; background: #0d0d10; border: 2px solid #ffcc00; box-shadow: 0 0 50px rgba(255, 204, 0, 0.2); max-height: none; height: auto; }
        .modal-edit-title { text-align: center; color: #ffcc00; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0; letter-spacing: 1px; }
        .refined-stats-container { margin: 20px 0; display: flex; flex-direction: column; gap: 10px; }
        .refined-stat-row { display: flex; align-items: center; background: #1a1a1a; padding: 5px; border-radius: 4px; border: 1px solid #333; }
        .stat-label { width: 40px; font-weight: bold; font-size: 14px; text-align: center; }
        .stat-label.hp { color: #f44; } .stat-label.mp { color: #00f2ff; }
        .btn-adj { width: 30px; height: 30px; background: #333; color: #fff; border: 1px solid #555; cursor: pointer; font-weight: bold; transition: 0.2s; display: flex; align-items: center; justify-content: center; }
        .btn-adj:hover { background: #fff; color: #000; }
        .stat-value { flex: 1; text-align: center; font-size: 18px; font-weight: bold; letter-spacing: 1px; }
        .refined-image-control { text-align: center; margin: 20px 0; border-top: 1px solid #333; padding-top: 15px; }
        .refined-image-control label { color: #888; font-size: 10px; letter-spacing: 1px; margin-bottom: 10px; display: block; }
        .d-pad-grid { display: inline-grid; grid-template-columns: 30px 30px 30px; gap: 5px; justify-content: center; }
        .d-pad-grid button { width: 30px; height: 30px; background: #222; border: 1px solid #555; color: #ffcc00; cursor: pointer; font-size: 10px; display: flex; align-items: center; justify-content: center; }
        .d-pad-grid button:hover { background: #ffcc00; color: #000; }
        .center-dot { width: 6px; height: 6px; background: #555; border-radius: 50%; margin: auto; }
        .btn-save-refined { width: 100%; padding: 15px; font-size: 14px; font-weight: bold; background: #ffcc00; color: #000; border: none; cursor: pointer; text-transform: uppercase; margin-top: 10px; transition: 0.2s; }
        .btn-save-refined:hover { background: #fff; box-shadow: 0 0 20px #ffcc00; }

        .monster-create-view .create-row { display: flex; gap: 15px; margin-bottom: 15px; }
        .img-upload-box { width: 120px; display: flex; flex-direction: column; gap: 5px; }
        .preview-img { width: 120px; height: 120px; background: #000; border: 1px solid #444; background-size: cover; }
        .details-inputs { flex: 1; display: flex; flex-direction: column; gap: 8px; }
        .input-title { width: 100%; background: #111; border: 1px solid #444; padding: 8px; color: #ffcc00; font-weight: bold; }
        .stats-row-c { display: flex; gap: 10px; }
        .stats-row-c div { flex: 1; }
        .stats-row-c input { width: 100%; background: #111; border: 1px solid #444; color: #fff; padding: 5px; text-align: center; }
        .actions-row-bottom { display: flex; gap: 10px; margin-top: 15px; }
        .btn-save-m { flex: 1; background: #ffcc00; color: #000; border: none; padding: 10px; font-weight: bold; cursor: pointer; }
        .btn-cancel-m { background: #333; color: #fff; border: none; padding: 10px; cursor: pointer; }
        
        .toggle-row { display: flex; align-items: center; gap: 10px; color: #aaa; font-size: 12px; margin-top: 5px; }
        .text-areas-row { display: flex; gap: 10px; }
        .text-areas-row textarea { background: #111; border: 1px solid #444; color: #ccc; padding: 10px; resize: none; margin-bottom: 5px; }

        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
      `})]})}const J5=({user:i,initializing:e,children:n})=>e?null:i&&i.email==="fffvtt10@gmail.com"?n:u.jsx(y_,{to:"/admin-login"});function W5(){const[i,e]=w.useState(!0),[n,s]=w.useState(null);return w.useEffect(()=>rf(jt,c=>{s(c),e(!1)}),[]),i?u.jsxs("div",{style:{height:"100vh",width:"100vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#000",overflow:"hidden"},children:[u.jsx("img",{src:Cf,alt:"Loading...",style:{width:"100px",marginBottom:"20px",filter:"drop-shadow(0 0 10px #ffcc00)"}}),u.jsx("div",{style:{width:"200px",height:"4px",background:"#333",borderRadius:"2px",overflow:"hidden"},children:u.jsx("div",{className:"progress-bar"})}),u.jsx("p",{style:{marginTop:"10px"},children:"SINTONIZANDO TER..."}),u.jsx("style",{children:`
          .progress-bar { height: 100%; background: #ffcc00; width: 0%; box-shadow: 0 0 10px #ffcc00; animation: fillProgress 2s ease-in-out forwards; }
          p { color: #ffcc00; font-family: 'serif'; font-size: 10px; letter-spacing: 3px; animation: fadeText 1s infinite alternate; }
          @keyframes fillProgress { from { width: 0%; } to { width: 100%; } }
          @keyframes fadeText { from { opacity: 0.4; } to { opacity: 1; } }
        `})]}):u.jsxs(QS,{children:[u.jsx(ii,{path:"/",element:u.jsx(v5,{})}),u.jsx(ii,{path:"/login",element:u.jsx(E5,{})}),u.jsx(ii,{path:"/mestre",element:u.jsx(I5,{})}),u.jsx(ii,{path:"/mestre-vtt",element:u.jsx(X5,{})}),u.jsx(ii,{path:"/create-character",element:u.jsx(M5,{})}),u.jsx(ii,{path:"/jogador-vtt",element:u.jsx(H5,{})}),u.jsx(ii,{path:"/admin-login",element:u.jsx(A5,{})}),u.jsx(ii,{path:"/admin",element:u.jsx(J5,{user:n,initializing:i,children:u.jsx(w5,{})})}),u.jsx(ii,{path:"*",element:u.jsx(y_,{to:"/"})})]})}Ww.createRoot(document.getElementById("root")).render(u.jsx(Fw.StrictMode,{children:u.jsx(xT,{children:u.jsx(W5,{})})}));
