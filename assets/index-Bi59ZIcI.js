(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function kx(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var vp={exports:{}},Yl={};var Bv;function uS(){if(Bv)return Yl;Bv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:d,ref:o!==void 0?o:null,props:c}}return Yl.Fragment=e,Yl.jsx=n,Yl.jsxs=n,Yl}var Hv;function dS(){return Hv||(Hv=1,vp.exports=uS()),vp.exports}var h=dS(),bp={exports:{}},ke={};var qv;function fS(){if(qv)return ke;qv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function L(j){return j===null||typeof j!="object"?null:(j=T&&j[T]||j["@@iterator"],typeof j=="function"?j:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,Q={};function ie(j,J,oe){this.props=j,this.context=J,this.refs=Q,this.updater=oe||H}ie.prototype.isReactComponent={},ie.prototype.setState=function(j,J){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,J,"setState")},ie.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function B(){}B.prototype=ie.prototype;function se(j,J,oe){this.props=j,this.context=J,this.refs=Q,this.updater=oe||H}var me=se.prototype=new B;me.constructor=se,z(me,ie.prototype),me.isPureReactComponent=!0;var Ae=Array.isArray;function ye(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function N(j,J,oe){var de=oe.ref;return{$$typeof:i,type:j,key:J,ref:de!==void 0?de:null,props:oe}}function k(j,J){return N(j.type,J,j.props)}function w(j){return typeof j=="object"&&j!==null&&j.$$typeof===i}function P(j){var J={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(oe){return J[oe]})}var C=/\/+/g;function fe(j,J){return typeof j=="object"&&j!==null&&j.key!=null?P(""+j.key):J.toString(36)}function ze(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(ye,ye):(j.status="pending",j.then(function(J){j.status==="pending"&&(j.status="fulfilled",j.value=J)},function(J){j.status==="pending"&&(j.status="rejected",j.reason=J)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function X(j,J,oe,de,Ee){var Ne=typeof j;(Ne==="undefined"||Ne==="boolean")&&(j=null);var Me=!1;if(j===null)Me=!0;else switch(Ne){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(j.$$typeof){case i:case e:Me=!0;break;case _:return Me=j._init,X(Me(j._payload),J,oe,de,Ee)}}if(Me)return Ee=Ee(j),Me=de===""?"."+fe(j,0):de,Ae(Ee)?(oe="",Me!=null&&(oe=Me.replace(C,"$&/")+"/"),X(Ee,J,oe,"",function(Jt){return Jt})):Ee!=null&&(w(Ee)&&(Ee=k(Ee,oe+(Ee.key==null||j&&j.key===Ee.key?"":(""+Ee.key).replace(C,"$&/")+"/")+Me)),J.push(Ee)),1;Me=0;var Je=de===""?".":de+":";if(Ae(j))for(var Ue=0;Ue<j.length;Ue++)de=j[Ue],Ne=Je+fe(de,Ue),Me+=X(de,J,oe,Ne,Ee);else if(Ue=L(j),typeof Ue=="function")for(j=Ue.call(j),Ue=0;!(de=j.next()).done;)de=de.value,Ne=Je+fe(de,Ue++),Me+=X(de,J,oe,Ne,Ee);else if(Ne==="object"){if(typeof j.then=="function")return X(ze(j),J,oe,de,Ee);throw J=String(j),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Me}function le(j,J,oe){if(j==null)return j;var de=[],Ee=0;return X(j,de,"","",function(Ne){return J.call(oe,Ne,Ee++)}),de}function Z(j){if(j._status===-1){var J=j._result;J=J(),J.then(function(oe){(j._status===0||j._status===-1)&&(j._status=1,j._result=oe)},function(oe){(j._status===0||j._status===-1)&&(j._status=2,j._result=oe)}),j._status===-1&&(j._status=0,j._result=J)}if(j._status===1)return j._result.default;throw j._result}var ve=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},_e={map:le,forEach:function(j,J,oe){le(j,function(){J.apply(this,arguments)},oe)},count:function(j){var J=0;return le(j,function(){J++}),J},toArray:function(j){return le(j,function(J){return J})||[]},only:function(j){if(!w(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return ke.Activity=E,ke.Children=_e,ke.Component=ie,ke.Fragment=n,ke.Profiler=o,ke.PureComponent=se,ke.StrictMode=r,ke.Suspense=g,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,ke.__COMPILER_RUNTIME={__proto__:null,c:function(j){return I.H.useMemoCache(j)}},ke.cache=function(j){return function(){return j.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(j,J,oe){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var de=z({},j.props),Ee=j.key;if(J!=null)for(Ne in J.key!==void 0&&(Ee=""+J.key),J)!R.call(J,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&J.ref===void 0||(de[Ne]=J[Ne]);var Ne=arguments.length-2;if(Ne===1)de.children=oe;else if(1<Ne){for(var Me=Array(Ne),Je=0;Je<Ne;Je++)Me[Je]=arguments[Je+2];de.children=Me}return N(j.type,Ee,de)},ke.createContext=function(j){return j={$$typeof:d,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:c,_context:j},j},ke.createElement=function(j,J,oe){var de,Ee={},Ne=null;if(J!=null)for(de in J.key!==void 0&&(Ne=""+J.key),J)R.call(J,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(Ee[de]=J[de]);var Me=arguments.length-2;if(Me===1)Ee.children=oe;else if(1<Me){for(var Je=Array(Me),Ue=0;Ue<Me;Ue++)Je[Ue]=arguments[Ue+2];Ee.children=Je}if(j&&j.defaultProps)for(de in Me=j.defaultProps,Me)Ee[de]===void 0&&(Ee[de]=Me[de]);return N(j,Ne,Ee)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(j){return{$$typeof:m,render:j}},ke.isValidElement=w,ke.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:Z}},ke.memo=function(j,J){return{$$typeof:y,type:j,compare:J===void 0?null:J}},ke.startTransition=function(j){var J=I.T,oe={};I.T=oe;try{var de=j(),Ee=I.S;Ee!==null&&Ee(oe,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(ye,ve)}catch(Ne){ve(Ne)}finally{J!==null&&oe.types!==null&&(J.types=oe.types),I.T=J}},ke.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},ke.use=function(j){return I.H.use(j)},ke.useActionState=function(j,J,oe){return I.H.useActionState(j,J,oe)},ke.useCallback=function(j,J){return I.H.useCallback(j,J)},ke.useContext=function(j){return I.H.useContext(j)},ke.useDebugValue=function(){},ke.useDeferredValue=function(j,J){return I.H.useDeferredValue(j,J)},ke.useEffect=function(j,J){return I.H.useEffect(j,J)},ke.useEffectEvent=function(j){return I.H.useEffectEvent(j)},ke.useId=function(){return I.H.useId()},ke.useImperativeHandle=function(j,J,oe){return I.H.useImperativeHandle(j,J,oe)},ke.useInsertionEffect=function(j,J){return I.H.useInsertionEffect(j,J)},ke.useLayoutEffect=function(j,J){return I.H.useLayoutEffect(j,J)},ke.useMemo=function(j,J){return I.H.useMemo(j,J)},ke.useOptimistic=function(j,J){return I.H.useOptimistic(j,J)},ke.useReducer=function(j,J,oe){return I.H.useReducer(j,J,oe)},ke.useRef=function(j){return I.H.useRef(j)},ke.useState=function(j){return I.H.useState(j)},ke.useSyncExternalStore=function(j,J,oe){return I.H.useSyncExternalStore(j,J,oe)},ke.useTransition=function(){return I.H.useTransition()},ke.version="19.2.4",ke}var Fv;function pm(){return Fv||(Fv=1,bp.exports=fS()),bp.exports}var O=pm();const hS=kx(O);var xp={exports:{}},$l={},_p={exports:{}},Ep={};var Gv;function pS(){return Gv||(Gv=1,(function(i){function e(X,le){var Z=X.length;X.push(le);e:for(;0<Z;){var ve=Z-1>>>1,_e=X[ve];if(0<o(_e,le))X[ve]=le,X[Z]=_e,Z=ve;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var le=X[0],Z=X.pop();if(Z!==le){X[0]=Z;e:for(var ve=0,_e=X.length,j=_e>>>1;ve<j;){var J=2*(ve+1)-1,oe=X[J],de=J+1,Ee=X[de];if(0>o(oe,Z))de<_e&&0>o(Ee,oe)?(X[ve]=Ee,X[de]=Z,ve=de):(X[ve]=oe,X[J]=Z,ve=J);else if(de<_e&&0>o(Ee,Z))X[ve]=Ee,X[de]=Z,ve=de;else break e}}return le}function o(X,le){var Z=X.sortIndex-le.sortIndex;return Z!==0?Z:X.id-le.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var g=[],y=[],_=1,E=null,T=3,L=!1,H=!1,z=!1,Q=!1,ie=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function me(X){for(var le=n(y);le!==null;){if(le.callback===null)r(y);else if(le.startTime<=X)r(y),le.sortIndex=le.expirationTime,e(g,le);else break;le=n(y)}}function Ae(X){if(z=!1,me(X),!H)if(n(g)!==null)H=!0,ye||(ye=!0,P());else{var le=n(y);le!==null&&ze(Ae,le.startTime-X)}}var ye=!1,I=-1,R=5,N=-1;function k(){return Q?!0:!(i.unstable_now()-N<R)}function w(){if(Q=!1,ye){var X=i.unstable_now();N=X;var le=!0;try{e:{H=!1,z&&(z=!1,B(I),I=-1),L=!0;var Z=T;try{t:{for(me(X),E=n(g);E!==null&&!(E.expirationTime>X&&k());){var ve=E.callback;if(typeof ve=="function"){E.callback=null,T=E.priorityLevel;var _e=ve(E.expirationTime<=X);if(X=i.unstable_now(),typeof _e=="function"){E.callback=_e,me(X),le=!0;break t}E===n(g)&&r(g),me(X)}else r(g);E=n(g)}if(E!==null)le=!0;else{var j=n(y);j!==null&&ze(Ae,j.startTime-X),le=!1}}break e}finally{E=null,T=Z,L=!1}le=void 0}}finally{le?P():ye=!1}}}var P;if(typeof se=="function")P=function(){se(w)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,fe=C.port2;C.port1.onmessage=w,P=function(){fe.postMessage(null)}}else P=function(){ie(w,0)};function ze(X,le){I=ie(function(){X(i.unstable_now())},le)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(X){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var Z=T;T=le;try{return X()}finally{T=Z}},i.unstable_requestPaint=function(){Q=!0},i.unstable_runWithPriority=function(X,le){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Z=T;T=X;try{return le()}finally{T=Z}},i.unstable_scheduleCallback=function(X,le,Z){var ve=i.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ve+Z:ve):Z=ve,X){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=Z+_e,X={id:_++,callback:le,priorityLevel:X,startTime:Z,expirationTime:_e,sortIndex:-1},Z>ve?(X.sortIndex=Z,e(y,X),n(g)===null&&X===n(y)&&(z?(B(I),I=-1):z=!0,ze(Ae,Z-ve))):(X.sortIndex=_e,e(g,X),H||L||(H=!0,ye||(ye=!0,P()))),X},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(X){var le=T;return function(){var Z=T;T=le;try{return X.apply(this,arguments)}finally{T=Z}}}})(Ep)),Ep}var Qv;function mS(){return Qv||(Qv=1,_p.exports=pS()),_p.exports}var Ap={exports:{}},ln={};var Kv;function gS(){if(Kv)return ln;Kv=1;var i=pm();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:y,implementation:_}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ln.createPortal=function(g,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,_)},ln.flushSync=function(g){var y=d.T,_=r.p;try{if(d.T=null,r.p=2,g)return g()}finally{d.T=y,r.p=_,r.d.f()}},ln.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},ln.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},ln.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var _=y.as,E=m(_,y.crossOrigin),T=typeof y.integrity=="string"?y.integrity:void 0,L=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:L}):_==="script"&&r.d.X(g,{crossOrigin:E,integrity:T,fetchPriority:L,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},ln.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=m(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},ln.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,E=m(_,y.crossOrigin);r.d.L(g,_,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},ln.preloadModule=function(g,y){if(typeof g=="string")if(y){var _=m(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},ln.requestFormReset=function(g){r.d.r(g)},ln.unstable_batchedUpdates=function(g,y){return g(y)},ln.useFormState=function(g,y,_){return d.H.useFormState(g,y,_)},ln.useFormStatus=function(){return d.H.useHostTransitionStatus()},ln.version="19.2.4",ln}var Yv;function yS(){if(Yv)return Ap.exports;Yv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Ap.exports=gS(),Ap.exports}var $v;function vS(){if($v)return $l;$v=1;var i=mS(),e=pm(),n=yS();function r(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)a+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var a=t,s=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(s=a.return),t=a.return;while(t)}return a.tag===3?s:null}function d(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function m(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(r(188))}function y(t){var a=t.alternate;if(!a){if(a=c(t),a===null)throw Error(r(188));return a!==t?null:t}for(var s=t,l=a;;){var f=s.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){s=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===s)return g(f),t;if(p===l)return g(f),a;p=p.sibling}throw Error(r(188))}if(s.return!==l.return)s=f,l=p;else{for(var b=!1,A=f.child;A;){if(A===s){b=!0,s=f,l=p;break}if(A===l){b=!0,l=f,s=p;break}A=A.sibling}if(!b){for(A=p.child;A;){if(A===s){b=!0,s=p,l=f;break}if(A===l){b=!0,l=p,s=f;break}A=A.sibling}if(!b)throw Error(r(189))}}if(s.alternate!==l)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?t:a}function _(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=_(t),a!==null)return a;t=t.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),se=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),w=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=w&&t[w]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function fe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case ie:return"Profiler";case Q:return"StrictMode";case Ae:return"Suspense";case ye:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case H:return"Portal";case se:return t.displayName||"Context";case B:return(t._context.displayName||"Context")+".Consumer";case me:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return a=t.displayName||null,a!==null?a:fe(t.type)||"Memo";case R:a=t._payload,t=t._init;try{return fe(t(a))}catch{}}return null}var ze=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ve=[],_e=-1;function j(t){return{current:t}}function J(t){0>_e||(t.current=ve[_e],ve[_e]=null,_e--)}function oe(t,a){_e++,ve[_e]=t.current,t.current=a}var de=j(null),Ee=j(null),Ne=j(null),Me=j(null);function Je(t,a){switch(oe(Ne,a),oe(Ee,t),oe(de,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?uv(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=uv(a),t=dv(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}J(de),oe(de,t)}function Ue(){J(de),J(Ee),J(Ne)}function Jt(t){t.memoizedState!==null&&oe(Me,t);var a=de.current,s=dv(a,t.type);a!==s&&(oe(Ee,t),oe(de,s))}function mn(t){Ee.current===t&&(J(de),J(Ee)),Me.current===t&&(J(Me),Fl._currentValue=Z)}var ra,W;function be(t){if(ra===void 0)try{throw Error()}catch(s){var a=s.stack.trim().match(/\n( *(at )?)/);ra=a&&a[1]||"",W=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ra+t+W}var D=!1;function ce(t,a){if(!t||D)return"";D=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch($){var K=$}Reflect.construct(t,[],ae)}else{try{ae.call()}catch($){K=$}t.call(ae.prototype)}}else{try{throw Error()}catch($){K=$}(ae=t())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch($){if($&&K&&typeof $.stack=="string")return[$.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),b=p[0],A=p[1];if(b&&A){var M=b.split(`
`),G=A.split(`
`);for(f=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(l===M.length||f===G.length)for(l=M.length-1,f=G.length-1;1<=l&&0<=f&&M[l]!==G[f];)f--;for(;1<=l&&0<=f;l--,f--)if(M[l]!==G[f]){if(l!==1||f!==1)do if(l--,f--,0>f||M[l]!==G[f]){var ee=`
`+M[l].replace(" at new "," at ");return t.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",t.displayName)),ee}while(1<=l&&0<=f);break}}}finally{D=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?be(s):""}function Se(t,a){switch(t.tag){case 26:case 27:case 5:return be(t.type);case 16:return be("Lazy");case 13:return t.child!==a&&a!==null?be("Suspense Fallback"):be("Suspense");case 19:return be("SuspenseList");case 0:case 15:return ce(t.type,!1);case 11:return ce(t.type.render,!1);case 1:return ce(t.type,!0);case 31:return be("Activity");default:return""}}function et(t){try{var a="",s=null;do a+=Se(t,s),s=t,t=t.return;while(t);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var $e=Object.prototype.hasOwnProperty,ct=i.unstable_scheduleCallback,Aa=i.unstable_cancelCallback,Qo=i.unstable_shouldYield,Bn=i.unstable_requestPaint,mt=i.unstable_now,Sa=i.unstable_getCurrentPriorityLevel,Ko=i.unstable_ImmediatePriority,Yo=i.unstable_UserBlockingPriority,ji=i.unstable_NormalPriority,_f=i.unstable_LowPriority,Dc=i.unstable_IdlePriority,kc=i.log,jc=i.unstable_setDisableYieldValue,sa=null,Wt=null;function Hn(t){if(typeof kc=="function"&&jc(t),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(sa,t)}catch{}}var Nt=Math.clz32?Math.clz32:Vc,Pc=Math.log,Ss=Math.LN2;function Vc(t){return t>>>=0,t===0?32:31-(Pc(t)/Ss|0)|0}var Ta=256,jr=262144,Dt=4194304;function wa(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Na(t,a,s){var l=t.pendingLanes;if(l===0)return 0;var f=0,p=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~p,l!==0?f=wa(l):(b&=A,b!==0?f=wa(b):s||(s=A&~t,s!==0&&(f=wa(s))))):(A=l&~p,A!==0?f=wa(A):b!==0?f=wa(b):s||(s=l&~t,s!==0&&(f=wa(s)))),f===0?0:a!==0&&a!==f&&(a&p)===0&&(p=f&-f,s=a&-a,p>=s||p===32&&(s&4194048)!==0)?a:f}function oa(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Ef(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lc(){var t=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),t}function Ra(t){for(var a=[],s=0;31>s;s++)a.push(t);return a}function Pr(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Af(t,a,s,l,f,p){var b=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var A=t.entanglements,M=t.expirationTimes,G=t.hiddenUpdates;for(s=b&~s;0<s;){var ee=31-Nt(s),ae=1<<ee;A[ee]=0,M[ee]=-1;var K=G[ee];if(K!==null)for(G[ee]=null,ee=0;ee<K.length;ee++){var $=K[ee];$!==null&&($.lane&=-536870913)}s&=~ae}l!==0&&Vr(t,l,0),p!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=p&~(b&~a))}function Vr(t,a,s){t.pendingLanes|=a,t.suspendedLanes&=~a;var l=31-Nt(a);t.entangledLanes|=a,t.entanglements[l]=t.entanglements[l]|1073741824|s&261930}function $o(t,a){var s=t.entangledLanes|=a;for(t=t.entanglements;s;){var l=31-Nt(s),f=1<<l;f&a|t[l]&a&&(t[l]|=a),s&=~f}}function Xo(t,a){var s=a&-a;return s=(s&42)!==0?1:Lr(s),(s&(t.suspendedLanes|a))!==0?0:s}function Lr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ni(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function zc(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:kv(t.type))}function la(t,a){var s=le.p;try{return le.p=t,a()}finally{le.p=s}}var ca=Math.random().toString(36).slice(2),kt="__reactFiber$"+ca,Kt="__reactProps$"+ca,Ca="__reactContainer$"+ca,Ts="__reactEvents$"+ca,Sf="__reactListeners$"+ca,Uc="__reactHandles$"+ca,Bc="__reactResources$"+ca,Ia="__reactMarker$"+ca;function ws(t){delete t[kt],delete t[Kt],delete t[Ts],delete t[Sf],delete t[Uc]}function Oa(t){var a=t[kt];if(a)return a;for(var s=t.parentNode;s;){if(a=s[Ca]||s[kt]){if(s=a.alternate,a.child!==null||s!==null&&s.child!==null)for(t=vv(t);t!==null;){if(s=t[kt])return s;t=vv(t)}return a}t=s,s=t.parentNode}return null}function qn(t){if(t=t[kt]||t[Ca]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function Cn(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(r(33))}function Ma(t){var a=t[Bc];return a||(a=t[Bc]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function jt(t){t[Ia]=!0}var Jo=new Set,Wo={};function Da(t,a){ka(t,a),ka(t+"Capture",a)}function ka(t,a){for(Wo[t]=a,t=0;t<a.length;t++)Jo.add(a[t])}var Zo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),el={},tl={};function Hc(t){return $e.call(tl,t)?!0:$e.call(el,t)?!1:Zo.test(t)?tl[t]=!0:(el[t]=!0,!1)}function Ns(t,a,s){if(Hc(a))if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+s)}}function In(t,a,s){if(s===null)t.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+s)}}function Pt(t,a,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(a,s,""+l)}}function Yt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pi(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function nl(t,a,s){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,p=l.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return f.call(this)},set:function(b){s=""+b,p.call(this,b)}}),Object.defineProperty(t,a,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(b){s=""+b},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function st(t){if(!t._valueTracker){var a=Pi(t)?"checked":"value";t._valueTracker=nl(t,a,""+t[a])}}function zr(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var s=a.getValue(),l="";return t&&(l=Pi(t)?t.checked?"true":"false":t.value),t=l,t!==s?(a.setValue(t),!0):!1}function ja(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ur=/[\n"\\]/g;function gn(t){return t.replace(Ur,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Rs(t,a,s,l,f,p,b,A){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),a!=null?b==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Yt(a)):t.value!==""+Yt(a)&&(t.value=""+Yt(a)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),a!=null?al(t,b,Yt(a)):s!=null?al(t,b,Yt(s)):l!=null&&t.removeAttribute("value"),f==null&&p!=null&&(t.defaultChecked=!!p),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+Yt(A):t.removeAttribute("name")}function qc(t,a,s,l,f,p,b,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),a!=null||s!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){st(t);return}s=s!=null?""+Yt(s):"",a=a!=null?""+Yt(a):s,A||a===t.value||(t.value=a),t.defaultValue=a}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),st(t)}function al(t,a,s){a==="number"&&ja(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Vi(t,a,s,l){if(t=t.options,a){a={};for(var f=0;f<s.length;f++)a["$"+s[f]]=!0;for(s=0;s<t.length;s++)f=a.hasOwnProperty("$"+t[s].value),t[s].selected!==f&&(t[s].selected=f),f&&l&&(t[s].defaultSelected=!0)}else{for(s=""+Yt(s),a=null,f=0;f<t.length;f++){if(t[f].value===s){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}a!==null||t[f].disabled||(a=t[f])}a!==null&&(a.selected=!0)}}function Fc(t,a,s){if(a!=null&&(a=""+Yt(a),a!==t.value&&(t.value=a),s==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=s!=null?""+Yt(s):""}function Li(t,a,s,l){if(a==null){if(l!=null){if(s!=null)throw Error(r(92));if(ze(l)){if(1<l.length)throw Error(r(93));l=l[0]}s=l}s==null&&(s=""),a=s}s=Yt(a),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l),st(t)}function yn(t,a){if(a){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=a;return}}t.textContent=a}var Gc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function il(t,a,s){var l=a.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":l?t.setProperty(a,s):typeof s!="number"||s===0||Gc.has(a)?a==="float"?t.cssFloat=s:t[a]=(""+s).trim():t[a]=s+"px"}function rl(t,a,s){if(a!=null&&typeof a!="object")throw Error(r(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in a)l=a[f],a.hasOwnProperty(f)&&s[f]!==l&&il(t,f,l)}else for(var p in a)a.hasOwnProperty(p)&&il(t,p,a[p])}function Cs(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Is(t){return zi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ua(){}var sl=null;function Fn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ui=null,Pa=null;function Br(t){var a=qn(t);if(a&&(t=a.stateNode)){var s=t[Kt]||null;e:switch(t=a.stateNode,a.type){case"input":if(Rs(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),a=s.name,s.type==="radio"&&a!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+gn(""+a)+'"][type="radio"]'),a=0;a<s.length;a++){var l=s[a];if(l!==t&&l.form===t.form){var f=l[Kt]||null;if(!f)throw Error(r(90));Rs(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<s.length;a++)l=s[a],l.form===t.form&&zr(l)}break e;case"textarea":Fc(t,s.value,s.defaultValue);break e;case"select":a=s.value,a!=null&&Vi(t,!!s.multiple,a,!1)}}}var Os=!1;function Bi(t,a,s){if(Os)return t(a,s);Os=!0;try{var l=t(a);return l}finally{if(Os=!1,(Ui!==null||Pa!==null)&&(zu(),Ui&&(a=Ui,t=Pa,Pa=Ui=null,Br(a),t)))for(a=0;a<t.length;a++)Br(t[a])}}function da(t,a){var s=t.stateNode;if(s===null)return null;var l=s[Kt]||null;if(l===null)return null;s=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(r(231,a,typeof s));return s}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hr=!1;if(Gn)try{var ut={};Object.defineProperty(ut,"passive",{get:function(){Hr=!0}}),window.addEventListener("test",ut,ut),window.removeEventListener("test",ut,ut)}catch{Hr=!1}var Va=null,ol=null,qr=null;function ll(){if(qr)return qr;var t,a=ol,s=a.length,l,f="value"in Va?Va.value:Va.textContent,p=f.length;for(t=0;t<s&&a[t]===f[t];t++);var b=s-t;for(l=1;l<=b&&a[s-l]===f[p-l];l++);return qr=f.slice(t,1<l?1-l:void 0)}function Fr(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function ai(){return!0}function fa(){return!1}function Zt(t){function a(s,l,f,p,b){this._reactName=s,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=b,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(s=t[A],this[A]=s?s(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ai:fa,this.isPropagationStopped=fa,this}return E(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),a}var ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},La=Zt(ii),Hi=E({},ii,{view:0,detail:0}),cl=Zt(Hi),qi,Ms,za,Ds=E({},Hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==za&&(za&&t.type==="mousemove"?(qi=t.screenX-za.screenX,Ms=t.screenY-za.screenY):Ms=qi=0,za=t),qi)},movementY:function(t){return"movementY"in t?t.movementY:Ms}}),ul=Zt(Ds),Gr=E({},Ds,{dataTransfer:0}),Kc=Zt(Gr),Yc=E({},Hi,{relatedTarget:0}),Qr=Zt(Yc),dl=E({},ii,{animationName:0,elapsedTime:0,pseudoElement:0}),$c=Zt(dl),ks=E({},ii,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Xc=Zt(ks),Jc=E({},ii,{data:0}),Ua=Zt(Jc),Wc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tu(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=eu[t])?!!a[t]:!1}function Fi(){return tu}var hn=E({},Hi,{key:function(t){if(t.key){var a=Wc[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Fr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Zc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fi,charCode:function(t){return t.type==="keypress"?Fr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nu=Zt(hn),au=E({},Ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ri=Zt(au),u=E({},Hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fi}),v=Zt(u),x=E({},ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Zt(x),q=E({},Ds,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=Zt(q),ue=E({},ii,{newState:0,oldState:0}),Pe=Zt(ue),Rt=[9,13,27,32],tt=Gn&&"CompositionEvent"in window,xt=null;Gn&&"documentMode"in document&&(xt=document.documentMode);var Qn=Gn&&"TextEvent"in window&&!xt,Ba=Gn&&(!tt||xt&&8<xt&&11>=xt),ha=" ",pa=!1;function Kr(t,a){switch(t){case"keyup":return Rt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function js(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ps=!1;function kA(t,a){switch(t){case"compositionend":return js(a);case"keypress":return a.which!==32?null:(pa=!0,ha);case"textInput":return t=a.data,t===ha&&pa?null:t;default:return null}}function jA(t,a){if(Ps)return t==="compositionend"||!tt&&Kr(t,a)?(t=ll(),qr=ol=Va=null,Ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ba&&a.locale!=="ko"?null:a.data;default:return null}}var PA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _g(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!PA[t.type]:a==="textarea"}function Eg(t,a,s,l){Ui?Pa?Pa.push(l):Pa=[l]:Ui=l,a=Qu(a,"onChange"),0<a.length&&(s=new La("onChange","change",null,s,l),t.push({event:s,listeners:a}))}var fl=null,hl=null;function VA(t){iv(t,0)}function iu(t){var a=Cn(t);if(zr(a))return t}function Ag(t,a){if(t==="change")return a}var Sg=!1;if(Gn){var Tf;if(Gn){var wf="oninput"in document;if(!wf){var Tg=document.createElement("div");Tg.setAttribute("oninput","return;"),wf=typeof Tg.oninput=="function"}Tf=wf}else Tf=!1;Sg=Tf&&(!document.documentMode||9<document.documentMode)}function wg(){fl&&(fl.detachEvent("onpropertychange",Ng),hl=fl=null)}function Ng(t){if(t.propertyName==="value"&&iu(hl)){var a=[];Eg(a,hl,t,Fn(t)),Bi(VA,a)}}function LA(t,a,s){t==="focusin"?(wg(),fl=a,hl=s,fl.attachEvent("onpropertychange",Ng)):t==="focusout"&&wg()}function zA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iu(hl)}function UA(t,a){if(t==="click")return iu(a)}function BA(t,a){if(t==="input"||t==="change")return iu(a)}function HA(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var On=typeof Object.is=="function"?Object.is:HA;function pl(t,a){if(On(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var s=Object.keys(t),l=Object.keys(a);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var f=s[l];if(!$e.call(a,f)||!On(t[f],a[f]))return!1}return!0}function Rg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cg(t,a){var s=Rg(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=a&&l>=a)return{node:s,offset:a-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Rg(s)}}function Ig(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Ig(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Og(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=ja(t.document);a instanceof t.HTMLIFrameElement;){try{var s=typeof a.contentWindow.location.href=="string"}catch{s=!1}if(s)t=a.contentWindow;else break;a=ja(t.document)}return a}function Nf(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var qA=Gn&&"documentMode"in document&&11>=document.documentMode,Vs=null,Rf=null,ml=null,Cf=!1;function Mg(t,a,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Cf||Vs==null||Vs!==ja(l)||(l=Vs,"selectionStart"in l&&Nf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ml&&pl(ml,l)||(ml=l,l=Qu(Rf,"onSelect"),0<l.length&&(a=new La("onSelect","select",null,a,s),t.push({event:a,listeners:l}),a.target=Vs)))}function Yr(t,a){var s={};return s[t.toLowerCase()]=a.toLowerCase(),s["Webkit"+t]="webkit"+a,s["Moz"+t]="moz"+a,s}var Ls={animationend:Yr("Animation","AnimationEnd"),animationiteration:Yr("Animation","AnimationIteration"),animationstart:Yr("Animation","AnimationStart"),transitionrun:Yr("Transition","TransitionRun"),transitionstart:Yr("Transition","TransitionStart"),transitioncancel:Yr("Transition","TransitionCancel"),transitionend:Yr("Transition","TransitionEnd")},If={},Dg={};Gn&&(Dg=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function $r(t){if(If[t])return If[t];if(!Ls[t])return t;var a=Ls[t],s;for(s in a)if(a.hasOwnProperty(s)&&s in Dg)return If[t]=a[s];return t}var kg=$r("animationend"),jg=$r("animationiteration"),Pg=$r("animationstart"),FA=$r("transitionrun"),GA=$r("transitionstart"),QA=$r("transitioncancel"),Vg=$r("transitionend"),Lg=new Map,Of="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Of.push("scrollEnd");function ma(t,a){Lg.set(t,a),Da(a,[t])}var ru=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Kn=[],zs=0,Mf=0;function su(){for(var t=zs,a=Mf=zs=0;a<t;){var s=Kn[a];Kn[a++]=null;var l=Kn[a];Kn[a++]=null;var f=Kn[a];Kn[a++]=null;var p=Kn[a];if(Kn[a++]=null,l!==null&&f!==null){var b=l.pending;b===null?f.next=f:(f.next=b.next,b.next=f),l.pending=f}p!==0&&zg(s,f,p)}}function ou(t,a,s,l){Kn[zs++]=t,Kn[zs++]=a,Kn[zs++]=s,Kn[zs++]=l,Mf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Df(t,a,s,l){return ou(t,a,s,l),lu(t)}function Xr(t,a){return ou(t,null,null,a),lu(t)}function zg(t,a,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var f=!1,p=t.return;p!==null;)p.childLanes|=s,l=p.alternate,l!==null&&(l.childLanes|=s),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(f=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,f&&a!==null&&(f=31-Nt(s),t=p.hiddenUpdates,l=t[f],l===null?t[f]=[a]:l.push(a),a.lane=s|536870912),p):null}function lu(t){if(50<Vl)throw Vl=0,Hh=null,Error(r(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var Us={};function KA(t,a,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,a,s,l){return new KA(t,a,s,l)}function kf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function si(t,a){var s=t.alternate;return s===null?(s=Mn(t.tag,a,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=a,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,a=t.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Ug(t,a){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,a=s.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function cu(t,a,s,l,f,p){var b=0;if(l=t,typeof t=="function")kf(t)&&(b=1);else if(typeof t=="string")b=W1(t,s,de.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case N:return t=Mn(31,s,a,f),t.elementType=N,t.lanes=p,t;case z:return Jr(s.children,f,p,a);case Q:b=8,f|=24;break;case ie:return t=Mn(12,s,a,f|2),t.elementType=ie,t.lanes=p,t;case Ae:return t=Mn(13,s,a,f),t.elementType=Ae,t.lanes=p,t;case ye:return t=Mn(19,s,a,f),t.elementType=ye,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case se:b=10;break e;case B:b=9;break e;case me:b=11;break e;case I:b=14;break e;case R:b=16,l=null;break e}b=29,s=Error(r(130,t===null?"null":typeof t,"")),l=null}return a=Mn(b,s,a,f),a.elementType=t,a.type=l,a.lanes=p,a}function Jr(t,a,s,l){return t=Mn(7,t,l,a),t.lanes=s,t}function jf(t,a,s){return t=Mn(6,t,null,a),t.lanes=s,t}function Bg(t){var a=Mn(18,null,null,0);return a.stateNode=t,a}function Pf(t,a,s){return a=Mn(4,t.children!==null?t.children:[],t.key,a),a.lanes=s,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Hg=new WeakMap;function Yn(t,a){if(typeof t=="object"&&t!==null){var s=Hg.get(t);return s!==void 0?s:(a={value:t,source:a,stack:et(a)},Hg.set(t,a),a)}return{value:t,source:a,stack:et(a)}}var Bs=[],Hs=0,uu=null,gl=0,$n=[],Xn=0,Gi=null,Ha=1,qa="";function oi(t,a){Bs[Hs++]=gl,Bs[Hs++]=uu,uu=t,gl=a}function qg(t,a,s){$n[Xn++]=Ha,$n[Xn++]=qa,$n[Xn++]=Gi,Gi=t;var l=Ha;t=qa;var f=32-Nt(l)-1;l&=~(1<<f),s+=1;var p=32-Nt(a)+f;if(30<p){var b=f-f%5;p=(l&(1<<b)-1).toString(32),l>>=b,f-=b,Ha=1<<32-Nt(a)+f|s<<f|l,qa=p+t}else Ha=1<<p|s<<f|l,qa=t}function Vf(t){t.return!==null&&(oi(t,1),qg(t,1,0))}function Lf(t){for(;t===uu;)uu=Bs[--Hs],Bs[Hs]=null,gl=Bs[--Hs],Bs[Hs]=null;for(;t===Gi;)Gi=$n[--Xn],$n[Xn]=null,qa=$n[--Xn],$n[Xn]=null,Ha=$n[--Xn],$n[Xn]=null}function Fg(t,a){$n[Xn++]=Ha,$n[Xn++]=qa,$n[Xn++]=Gi,Ha=a.id,qa=a.overflow,Gi=t}var en=null,yt=null,Ye=!1,Qi=null,Jn=!1,zf=Error(r(519));function Ki(t){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yl(Yn(a,t)),zf}function Gg(t){var a=t.stateNode,s=t.type,l=t.memoizedProps;switch(a[kt]=t,a[Kt]=l,s){case"dialog":He("cancel",a),He("close",a);break;case"iframe":case"object":case"embed":He("load",a);break;case"video":case"audio":for(s=0;s<zl.length;s++)He(zl[s],a);break;case"source":He("error",a);break;case"img":case"image":case"link":He("error",a),He("load",a);break;case"details":He("toggle",a);break;case"input":He("invalid",a),qc(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":He("invalid",a);break;case"textarea":He("invalid",a),Li(a,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||a.textContent===""+s||l.suppressHydrationWarning===!0||lv(a.textContent,s)?(l.popover!=null&&(He("beforetoggle",a),He("toggle",a)),l.onScroll!=null&&He("scroll",a),l.onScrollEnd!=null&&He("scrollend",a),l.onClick!=null&&(a.onclick=ua),a=!0):a=!1,a||Ki(t,!0)}function Qg(t){for(en=t.return;en;)switch(en.tag){case 5:case 31:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:en=en.return}}function qs(t){if(t!==en)return!1;if(!Ye)return Qg(t),Ye=!0,!1;var a=t.tag,s;if((s=a!==3&&a!==27)&&((s=a===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||ap(t.type,t.memoizedProps)),s=!s),s&&yt&&Ki(t),Qg(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));yt=yv(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));yt=yv(t)}else a===27?(a=yt,or(t.type)?(t=lp,lp=null,yt=t):yt=a):yt=en?Zn(t.stateNode.nextSibling):null;return!0}function Wr(){yt=en=null,Ye=!1}function Uf(){var t=Qi;return t!==null&&(_n===null?_n=t:_n.push.apply(_n,t),Qi=null),t}function yl(t){Qi===null?Qi=[t]:Qi.push(t)}var Bf=j(null),Zr=null,li=null;function Yi(t,a,s){oe(Bf,a._currentValue),a._currentValue=s}function ci(t){t._currentValue=Bf.current,J(Bf)}function Hf(t,a,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===s)break;t=t.return}}function qf(t,a,s,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var p=f.dependencies;if(p!==null){var b=f.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=f;for(var M=0;M<a.length;M++)if(A.context===a[M]){p.lanes|=s,A=p.alternate,A!==null&&(A.lanes|=s),Hf(p.return,s,t),l||(b=null);break e}p=A.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(r(341));b.lanes|=s,p=b.alternate,p!==null&&(p.lanes|=s),Hf(b,s,t),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===t){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function Fs(t,a,s,l){t=null;for(var f=a,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var A=f.type;On(f.pendingProps.value,b.value)||(t!==null?t.push(A):t=[A])}}else if(f===Me.current){if(b=f.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Fl):t=[Fl])}f=f.return}t!==null&&qf(a,t,s,l),a.flags|=262144}function du(t){for(t=t.firstContext;t!==null;){if(!On(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function es(t){Zr=t,li=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function tn(t){return Kg(Zr,t)}function fu(t,a){return Zr===null&&es(t),Kg(t,a)}function Kg(t,a){var s=a._currentValue;if(a={context:a,memoizedValue:s,next:null},li===null){if(t===null)throw Error(r(308));li=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else li=li.next=a;return s}var YA=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){a.aborted=!0,t.forEach(function(s){return s()})}},$A=i.unstable_scheduleCallback,XA=i.unstable_NormalPriority,Vt={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ff(){return{controller:new YA,data:new Map,refCount:0}}function vl(t){t.refCount--,t.refCount===0&&$A(XA,function(){t.controller.abort()})}var bl=null,Gf=0,Gs=0,Qs=null;function JA(t,a){if(bl===null){var s=bl=[];Gf=0,Gs=Yh(),Qs={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Gf++,a.then(Yg,Yg),a}function Yg(){if(--Gf===0&&bl!==null){Qs!==null&&(Qs.status="fulfilled");var t=bl;bl=null,Gs=0,Qs=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function WA(t,a){var s=[],l={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return t.then(function(){l.status="fulfilled",l.value=a;for(var f=0;f<s.length;f++)(0,s[f])(a)},function(f){for(l.status="rejected",l.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),l}var $g=X.S;X.S=function(t,a){M0=mt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&JA(t,a),$g!==null&&$g(t,a)};var ts=j(null);function Qf(){var t=ts.current;return t!==null?t:pt.pooledCache}function hu(t,a){a===null?oe(ts,ts.current):oe(ts,a.pool)}function Xg(){var t=Qf();return t===null?null:{parent:Vt._currentValue,pool:t}}var Ks=Error(r(460)),Kf=Error(r(474)),pu=Error(r(542)),mu={then:function(){}};function Jg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Wg(t,a,s){switch(s=t[s],s===void 0?t.push(a):s!==a&&(a.then(ua,ua),a=s),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,ey(t),t;default:if(typeof a.status=="string")a.then(ua,ua);else{if(t=pt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=a,t.status="pending",t.then(function(l){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=l}},function(l){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,ey(t),t}throw as=a,Ks}}function ns(t){try{var a=t._init;return a(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(as=s,Ks):s}}var as=null;function Zg(){if(as===null)throw Error(r(459));var t=as;return as=null,t}function ey(t){if(t===Ks||t===pu)throw Error(r(483))}var Ys=null,xl=0;function gu(t){var a=xl;return xl+=1,Ys===null&&(Ys=[]),Wg(Ys,t,a)}function _l(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function yu(t,a){throw a.$$typeof===T?Error(r(525)):(t=Object.prototype.toString.call(a),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function ty(t){function a(U,V){if(t){var F=U.deletions;F===null?(U.deletions=[V],U.flags|=16):F.push(V)}}function s(U,V){if(!t)return null;for(;V!==null;)a(U,V),V=V.sibling;return null}function l(U){for(var V=new Map;U!==null;)U.key!==null?V.set(U.key,U):V.set(U.index,U),U=U.sibling;return V}function f(U,V){return U=si(U,V),U.index=0,U.sibling=null,U}function p(U,V,F){return U.index=F,t?(F=U.alternate,F!==null?(F=F.index,F<V?(U.flags|=67108866,V):F):(U.flags|=67108866,V)):(U.flags|=1048576,V)}function b(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function A(U,V,F,te){return V===null||V.tag!==6?(V=jf(F,U.mode,te),V.return=U,V):(V=f(V,F),V.return=U,V)}function M(U,V,F,te){var Te=F.type;return Te===z?ee(U,V,F.props.children,te,F.key):V!==null&&(V.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===R&&ns(Te)===V.type)?(V=f(V,F.props),_l(V,F),V.return=U,V):(V=cu(F.type,F.key,F.props,null,U.mode,te),_l(V,F),V.return=U,V)}function G(U,V,F,te){return V===null||V.tag!==4||V.stateNode.containerInfo!==F.containerInfo||V.stateNode.implementation!==F.implementation?(V=Pf(F,U.mode,te),V.return=U,V):(V=f(V,F.children||[]),V.return=U,V)}function ee(U,V,F,te,Te){return V===null||V.tag!==7?(V=Jr(F,U.mode,te,Te),V.return=U,V):(V=f(V,F),V.return=U,V)}function ae(U,V,F){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=jf(""+V,U.mode,F),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case L:return F=cu(V.type,V.key,V.props,null,U.mode,F),_l(F,V),F.return=U,F;case H:return V=Pf(V,U.mode,F),V.return=U,V;case R:return V=ns(V),ae(U,V,F)}if(ze(V)||P(V))return V=Jr(V,U.mode,F,null),V.return=U,V;if(typeof V.then=="function")return ae(U,gu(V),F);if(V.$$typeof===se)return ae(U,fu(U,V),F);yu(U,V)}return null}function K(U,V,F,te){var Te=V!==null?V.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Te!==null?null:A(U,V,""+F,te);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case L:return F.key===Te?M(U,V,F,te):null;case H:return F.key===Te?G(U,V,F,te):null;case R:return F=ns(F),K(U,V,F,te)}if(ze(F)||P(F))return Te!==null?null:ee(U,V,F,te,null);if(typeof F.then=="function")return K(U,V,gu(F),te);if(F.$$typeof===se)return K(U,V,fu(U,F),te);yu(U,F)}return null}function $(U,V,F,te,Te){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return U=U.get(F)||null,A(V,U,""+te,Te);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case L:return U=U.get(te.key===null?F:te.key)||null,M(V,U,te,Te);case H:return U=U.get(te.key===null?F:te.key)||null,G(V,U,te,Te);case R:return te=ns(te),$(U,V,F,te,Te)}if(ze(te)||P(te))return U=U.get(F)||null,ee(V,U,te,Te,null);if(typeof te.then=="function")return $(U,V,F,gu(te),Te);if(te.$$typeof===se)return $(U,V,F,fu(V,te),Te);yu(V,te)}return null}function ge(U,V,F,te){for(var Te=null,We=null,xe=V,Le=V=0,Fe=null;xe!==null&&Le<F.length;Le++){xe.index>Le?(Fe=xe,xe=null):Fe=xe.sibling;var Ze=K(U,xe,F[Le],te);if(Ze===null){xe===null&&(xe=Fe);break}t&&xe&&Ze.alternate===null&&a(U,xe),V=p(Ze,V,Le),We===null?Te=Ze:We.sibling=Ze,We=Ze,xe=Fe}if(Le===F.length)return s(U,xe),Ye&&oi(U,Le),Te;if(xe===null){for(;Le<F.length;Le++)xe=ae(U,F[Le],te),xe!==null&&(V=p(xe,V,Le),We===null?Te=xe:We.sibling=xe,We=xe);return Ye&&oi(U,Le),Te}for(xe=l(xe);Le<F.length;Le++)Fe=$(xe,U,Le,F[Le],te),Fe!==null&&(t&&Fe.alternate!==null&&xe.delete(Fe.key===null?Le:Fe.key),V=p(Fe,V,Le),We===null?Te=Fe:We.sibling=Fe,We=Fe);return t&&xe.forEach(function(fr){return a(U,fr)}),Ye&&oi(U,Le),Te}function Re(U,V,F,te){if(F==null)throw Error(r(151));for(var Te=null,We=null,xe=V,Le=V=0,Fe=null,Ze=F.next();xe!==null&&!Ze.done;Le++,Ze=F.next()){xe.index>Le?(Fe=xe,xe=null):Fe=xe.sibling;var fr=K(U,xe,Ze.value,te);if(fr===null){xe===null&&(xe=Fe);break}t&&xe&&fr.alternate===null&&a(U,xe),V=p(fr,V,Le),We===null?Te=fr:We.sibling=fr,We=fr,xe=Fe}if(Ze.done)return s(U,xe),Ye&&oi(U,Le),Te;if(xe===null){for(;!Ze.done;Le++,Ze=F.next())Ze=ae(U,Ze.value,te),Ze!==null&&(V=p(Ze,V,Le),We===null?Te=Ze:We.sibling=Ze,We=Ze);return Ye&&oi(U,Le),Te}for(xe=l(xe);!Ze.done;Le++,Ze=F.next())Ze=$(xe,U,Le,Ze.value,te),Ze!==null&&(t&&Ze.alternate!==null&&xe.delete(Ze.key===null?Le:Ze.key),V=p(Ze,V,Le),We===null?Te=Ze:We.sibling=Ze,We=Ze);return t&&xe.forEach(function(cS){return a(U,cS)}),Ye&&oi(U,Le),Te}function ht(U,V,F,te){if(typeof F=="object"&&F!==null&&F.type===z&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case L:e:{for(var Te=F.key;V!==null;){if(V.key===Te){if(Te=F.type,Te===z){if(V.tag===7){s(U,V.sibling),te=f(V,F.props.children),te.return=U,U=te;break e}}else if(V.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===R&&ns(Te)===V.type){s(U,V.sibling),te=f(V,F.props),_l(te,F),te.return=U,U=te;break e}s(U,V);break}else a(U,V);V=V.sibling}F.type===z?(te=Jr(F.props.children,U.mode,te,F.key),te.return=U,U=te):(te=cu(F.type,F.key,F.props,null,U.mode,te),_l(te,F),te.return=U,U=te)}return b(U);case H:e:{for(Te=F.key;V!==null;){if(V.key===Te)if(V.tag===4&&V.stateNode.containerInfo===F.containerInfo&&V.stateNode.implementation===F.implementation){s(U,V.sibling),te=f(V,F.children||[]),te.return=U,U=te;break e}else{s(U,V);break}else a(U,V);V=V.sibling}te=Pf(F,U.mode,te),te.return=U,U=te}return b(U);case R:return F=ns(F),ht(U,V,F,te)}if(ze(F))return ge(U,V,F,te);if(P(F)){if(Te=P(F),typeof Te!="function")throw Error(r(150));return F=Te.call(F),Re(U,V,F,te)}if(typeof F.then=="function")return ht(U,V,gu(F),te);if(F.$$typeof===se)return ht(U,V,fu(U,F),te);yu(U,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,V!==null&&V.tag===6?(s(U,V.sibling),te=f(V,F),te.return=U,U=te):(s(U,V),te=jf(F,U.mode,te),te.return=U,U=te),b(U)):s(U,V)}return function(U,V,F,te){try{xl=0;var Te=ht(U,V,F,te);return Ys=null,Te}catch(xe){if(xe===Ks||xe===pu)throw xe;var We=Mn(29,xe,null,U.mode);return We.lanes=te,We.return=U,We}}}var is=ty(!0),ny=ty(!1),$i=!1;function Yf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $f(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Xi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ji(t,a,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(nt&2)!==0){var f=l.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),l.pending=a,a=lu(t),zg(t,null,s),a}return ou(t,l,a,s),lu(t)}function El(t,a,s){if(a=a.updateQueue,a!==null&&(a=a.shared,(s&4194048)!==0)){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,$o(t,s)}}function Xf(t,a){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var f=null,p=null;if(s=s.firstBaseUpdate,s!==null){do{var b={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};p===null?f=p=b:p=p.next=b,s=s.next}while(s!==null);p===null?f=p=a:p=p.next=a}else f=p=a;s={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=a:t.next=a,s.lastBaseUpdate=a}var Jf=!1;function Al(){if(Jf){var t=Qs;if(t!==null)throw t}}function Sl(t,a,s,l){Jf=!1;var f=t.updateQueue;$i=!1;var p=f.firstBaseUpdate,b=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var M=A,G=M.next;M.next=null,b===null?p=G:b.next=G,b=M;var ee=t.alternate;ee!==null&&(ee=ee.updateQueue,A=ee.lastBaseUpdate,A!==b&&(A===null?ee.firstBaseUpdate=G:A.next=G,ee.lastBaseUpdate=M))}if(p!==null){var ae=f.baseState;b=0,ee=G=M=null,A=p;do{var K=A.lane&-536870913,$=K!==A.lane;if($?(qe&K)===K:(l&K)===K){K!==0&&K===Gs&&(Jf=!0),ee!==null&&(ee=ee.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ge=t,Re=A;K=a;var ht=s;switch(Re.tag){case 1:if(ge=Re.payload,typeof ge=="function"){ae=ge.call(ht,ae,K);break e}ae=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Re.payload,K=typeof ge=="function"?ge.call(ht,ae,K):ge,K==null)break e;ae=E({},ae,K);break e;case 2:$i=!0}}K=A.callback,K!==null&&(t.flags|=64,$&&(t.flags|=8192),$=f.callbacks,$===null?f.callbacks=[K]:$.push(K))}else $={lane:K,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ee===null?(G=ee=$,M=ae):ee=ee.next=$,b|=K;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;$=A,A=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);ee===null&&(M=ae),f.baseState=M,f.firstBaseUpdate=G,f.lastBaseUpdate=ee,p===null&&(f.shared.lanes=0),nr|=b,t.lanes=b,t.memoizedState=ae}}function ay(t,a){if(typeof t!="function")throw Error(r(191,t));t.call(a)}function iy(t,a){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)ay(s[t],a)}var $s=j(null),vu=j(0);function ry(t,a){t=vi,oe(vu,t),oe($s,a),vi=t|a.baseLanes}function Wf(){oe(vu,vi),oe($s,$s.current)}function Zf(){vi=vu.current,J($s),J(vu)}var Dn=j(null),Wn=null;function Wi(t){var a=t.alternate;oe(Ct,Ct.current&1),oe(Dn,t),Wn===null&&(a===null||$s.current!==null||a.memoizedState!==null)&&(Wn=t)}function eh(t){oe(Ct,Ct.current),oe(Dn,t),Wn===null&&(Wn=t)}function sy(t){t.tag===22?(oe(Ct,Ct.current),oe(Dn,t),Wn===null&&(Wn=t)):Zi()}function Zi(){oe(Ct,Ct.current),oe(Dn,Dn.current)}function kn(t){J(Dn),Wn===t&&(Wn=null),J(Ct)}var Ct=j(0);function bu(t){for(var a=t;a!==null;){if(a.tag===13){var s=a.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||sp(s)||op(s)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ui=0,Ve=null,dt=null,Lt=null,xu=!1,Xs=!1,rs=!1,_u=0,Tl=0,Js=null,ZA=0;function St(){throw Error(r(321))}function th(t,a){if(a===null)return!1;for(var s=0;s<a.length&&s<t.length;s++)if(!On(t[s],a[s]))return!1;return!0}function nh(t,a,s,l,f,p){return ui=p,Ve=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,X.H=t===null||t.memoizedState===null?qy:yh,rs=!1,p=s(l,f),rs=!1,Xs&&(p=ly(a,s,l,f)),oy(t),p}function oy(t){X.H=Rl;var a=dt!==null&&dt.next!==null;if(ui=0,Lt=dt=Ve=null,xu=!1,Tl=0,Js=null,a)throw Error(r(300));t===null||zt||(t=t.dependencies,t!==null&&du(t)&&(zt=!0))}function ly(t,a,s,l){Ve=t;var f=0;do{if(Xs&&(Js=null),Tl=0,Xs=!1,25<=f)throw Error(r(301));if(f+=1,Lt=dt=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}X.H=Fy,p=a(s,l)}while(Xs);return p}function e1(){var t=X.H,a=t.useState()[0];return a=typeof a.then=="function"?wl(a):a,t=t.useState()[0],(dt!==null?dt.memoizedState:null)!==t&&(Ve.flags|=1024),a}function ah(){var t=_u!==0;return _u=0,t}function ih(t,a,s){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~s}function rh(t){if(xu){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}xu=!1}ui=0,Lt=dt=Ve=null,Xs=!1,Tl=_u=0,Js=null}function pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?Ve.memoizedState=Lt=t:Lt=Lt.next=t,Lt}function It(){if(dt===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var a=Lt===null?Ve.memoizedState:Lt.next;if(a!==null)Lt=a,dt=t;else{if(t===null)throw Ve.alternate===null?Error(r(467)):Error(r(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Lt===null?Ve.memoizedState=Lt=t:Lt=Lt.next=t}return Lt}function Eu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wl(t){var a=Tl;return Tl+=1,Js===null&&(Js=[]),t=Wg(Js,t,a),a=Ve,(Lt===null?a.memoizedState:Lt.next)===null&&(a=a.alternate,X.H=a===null||a.memoizedState===null?qy:yh),t}function Au(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wl(t);if(t.$$typeof===se)return tn(t)}throw Error(r(438,String(t)))}function sh(t){var a=null,s=Ve.updateQueue;if(s!==null&&(a=s.memoCache),a==null){var l=Ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),s===null&&(s=Eu(),Ve.updateQueue=s),s.memoCache=a,s=a.data[a.index],s===void 0)for(s=a.data[a.index]=Array(t),l=0;l<t;l++)s[l]=k;return a.index++,s}function di(t,a){return typeof a=="function"?a(t):a}function Su(t){var a=It();return oh(a,dt,t)}function oh(t,a,s){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=s;var f=t.baseQueue,p=l.pending;if(p!==null){if(f!==null){var b=f.next;f.next=p.next,p.next=b}a.baseQueue=f=p,l.pending=null}if(p=t.baseState,f===null)t.memoizedState=p;else{a=f.next;var A=b=null,M=null,G=a,ee=!1;do{var ae=G.lane&-536870913;if(ae!==G.lane?(qe&ae)===ae:(ui&ae)===ae){var K=G.revertLane;if(K===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ae===Gs&&(ee=!0);else if((ui&K)===K){G=G.next,K===Gs&&(ee=!0);continue}else ae={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(A=M=ae,b=p):M=M.next=ae,Ve.lanes|=K,nr|=K;ae=G.action,rs&&s(p,ae),p=G.hasEagerState?G.eagerState:s(p,ae)}else K={lane:ae,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(A=M=K,b=p):M=M.next=K,Ve.lanes|=ae,nr|=ae;G=G.next}while(G!==null&&G!==a);if(M===null?b=p:M.next=A,!On(p,t.memoizedState)&&(zt=!0,ee&&(s=Qs,s!==null)))throw s;t.memoizedState=p,t.baseState=b,t.baseQueue=M,l.lastRenderedState=p}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function lh(t){var a=It(),s=a.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=t;var l=s.dispatch,f=s.pending,p=a.memoizedState;if(f!==null){s.pending=null;var b=f=f.next;do p=t(p,b.action),b=b.next;while(b!==f);On(p,a.memoizedState)||(zt=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),s.lastRenderedState=p}return[p,l]}function cy(t,a,s){var l=Ve,f=It(),p=Ye;if(p){if(s===void 0)throw Error(r(407));s=s()}else s=a();var b=!On((dt||f).memoizedState,s);if(b&&(f.memoizedState=s,zt=!0),f=f.queue,dh(fy.bind(null,l,f,t),[t]),f.getSnapshot!==a||b||Lt!==null&&Lt.memoizedState.tag&1){if(l.flags|=2048,Ws(9,{destroy:void 0},dy.bind(null,l,f,s,a),null),pt===null)throw Error(r(349));p||(ui&127)!==0||uy(l,a,s)}return s}function uy(t,a,s){t.flags|=16384,t={getSnapshot:a,value:s},a=Ve.updateQueue,a===null?(a=Eu(),Ve.updateQueue=a,a.stores=[t]):(s=a.stores,s===null?a.stores=[t]:s.push(t))}function dy(t,a,s,l){a.value=s,a.getSnapshot=l,hy(a)&&py(t)}function fy(t,a,s){return s(function(){hy(a)&&py(t)})}function hy(t){var a=t.getSnapshot;t=t.value;try{var s=a();return!On(t,s)}catch{return!0}}function py(t){var a=Xr(t,2);a!==null&&En(a,t,2)}function ch(t){var a=pn();if(typeof t=="function"){var s=t;if(t=s(),rs){Hn(!0);try{s()}finally{Hn(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:t},a}function my(t,a,s,l){return t.baseState=s,oh(t,dt,typeof l=="function"?l:di)}function t1(t,a,s,l,f){if(Nu(t))throw Error(r(485));if(t=a.action,t!==null){var p={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){p.listeners.push(b)}};X.T!==null?s(!0):p.isTransition=!1,l(p),s=a.pending,s===null?(p.next=a.pending=p,gy(a,p)):(p.next=s.next,a.pending=s.next=p)}}function gy(t,a){var s=a.action,l=a.payload,f=t.state;if(a.isTransition){var p=X.T,b={};X.T=b;try{var A=s(f,l),M=X.S;M!==null&&M(b,A),yy(t,a,A)}catch(G){uh(t,a,G)}finally{p!==null&&b.types!==null&&(p.types=b.types),X.T=p}}else try{p=s(f,l),yy(t,a,p)}catch(G){uh(t,a,G)}}function yy(t,a,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){vy(t,a,l)},function(l){return uh(t,a,l)}):vy(t,a,s)}function vy(t,a,s){a.status="fulfilled",a.value=s,by(a),t.state=s,a=t.pending,a!==null&&(s=a.next,s===a?t.pending=null:(s=s.next,a.next=s,gy(t,s)))}function uh(t,a,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=s,by(a),a=a.next;while(a!==l)}t.action=null}function by(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function xy(t,a){return a}function _y(t,a){if(Ye){var s=pt.formState;if(s!==null){e:{var l=Ve;if(Ye){if(yt){t:{for(var f=yt,p=Jn;f.nodeType!==8;){if(!p){f=null;break t}if(f=Zn(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){yt=Zn(f.nextSibling),l=f.data==="F!";break e}}Ki(l)}l=!1}l&&(a=s[0])}}return s=pn(),s.memoizedState=s.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xy,lastRenderedState:a},s.queue=l,s=Uy.bind(null,Ve,l),l.dispatch=s,l=ch(!1),p=gh.bind(null,Ve,!1,l.queue),l=pn(),f={state:a,dispatch:null,action:t,pending:null},l.queue=f,s=t1.bind(null,Ve,f,p,s),f.dispatch=s,l.memoizedState=t,[a,s,!1]}function Ey(t){var a=It();return Ay(a,dt,t)}function Ay(t,a,s){if(a=oh(t,a,xy)[0],t=Su(di)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=wl(a)}catch(b){throw b===Ks?pu:b}else l=a;a=It();var f=a.queue,p=f.dispatch;return s!==a.memoizedState&&(Ve.flags|=2048,Ws(9,{destroy:void 0},n1.bind(null,f,s),null)),[l,p,t]}function n1(t,a){t.action=a}function Sy(t){var a=It(),s=dt;if(s!==null)return Ay(a,s,t);It(),a=a.memoizedState,s=It();var l=s.queue.dispatch;return s.memoizedState=t,[a,l,!1]}function Ws(t,a,s,l){return t={tag:t,create:s,deps:l,inst:a,next:null},a=Ve.updateQueue,a===null&&(a=Eu(),Ve.updateQueue=a),s=a.lastEffect,s===null?a.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,a.lastEffect=t),t}function Ty(){return It().memoizedState}function Tu(t,a,s,l){var f=pn();Ve.flags|=t,f.memoizedState=Ws(1|a,{destroy:void 0},s,l===void 0?null:l)}function wu(t,a,s,l){var f=It();l=l===void 0?null:l;var p=f.memoizedState.inst;dt!==null&&l!==null&&th(l,dt.memoizedState.deps)?f.memoizedState=Ws(a,p,s,l):(Ve.flags|=t,f.memoizedState=Ws(1|a,p,s,l))}function wy(t,a){Tu(8390656,8,t,a)}function dh(t,a){wu(2048,8,t,a)}function a1(t){Ve.flags|=4;var a=Ve.updateQueue;if(a===null)a=Eu(),Ve.updateQueue=a,a.events=[t];else{var s=a.events;s===null?a.events=[t]:s.push(t)}}function Ny(t){var a=It().memoizedState;return a1({ref:a,nextImpl:t}),function(){if((nt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function Ry(t,a){return wu(4,2,t,a)}function Cy(t,a){return wu(4,4,t,a)}function Iy(t,a){if(typeof a=="function"){t=t();var s=a(t);return function(){typeof s=="function"?s():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Oy(t,a,s){s=s!=null?s.concat([t]):null,wu(4,4,Iy.bind(null,a,t),s)}function fh(){}function My(t,a){var s=It();a=a===void 0?null:a;var l=s.memoizedState;return a!==null&&th(a,l[1])?l[0]:(s.memoizedState=[t,a],t)}function Dy(t,a){var s=It();a=a===void 0?null:a;var l=s.memoizedState;if(a!==null&&th(a,l[1]))return l[0];if(l=t(),rs){Hn(!0);try{t()}finally{Hn(!1)}}return s.memoizedState=[l,a],l}function hh(t,a,s){return s===void 0||(ui&1073741824)!==0&&(qe&261930)===0?t.memoizedState=a:(t.memoizedState=s,t=k0(),Ve.lanes|=t,nr|=t,s)}function ky(t,a,s,l){return On(s,a)?s:$s.current!==null?(t=hh(t,s,l),On(t,a)||(zt=!0),t):(ui&42)===0||(ui&1073741824)!==0&&(qe&261930)===0?(zt=!0,t.memoizedState=s):(t=k0(),Ve.lanes|=t,nr|=t,a)}function jy(t,a,s,l,f){var p=le.p;le.p=p!==0&&8>p?p:8;var b=X.T,A={};X.T=A,gh(t,!1,a,s);try{var M=f(),G=X.S;if(G!==null&&G(A,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ee=WA(M,l);Nl(t,a,ee,Vn(t))}else Nl(t,a,l,Vn(t))}catch(ae){Nl(t,a,{then:function(){},status:"rejected",reason:ae},Vn())}finally{le.p=p,b!==null&&A.types!==null&&(b.types=A.types),X.T=b}}function i1(){}function ph(t,a,s,l){if(t.tag!==5)throw Error(r(476));var f=Py(t).queue;jy(t,f,a,Z,s===null?i1:function(){return Vy(t),s(l)})}function Py(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:Z},next:null};var s={};return a.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:s},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Vy(t){var a=Py(t);a.next===null&&(a=t.alternate.memoizedState),Nl(t,a.next.queue,{},Vn())}function mh(){return tn(Fl)}function Ly(){return It().memoizedState}function zy(){return It().memoizedState}function r1(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var s=Vn();t=Xi(s);var l=Ji(a,t,s);l!==null&&(En(l,a,s),El(l,a,s)),a={cache:Ff()},t.payload=a;return}a=a.return}}function s1(t,a,s){var l=Vn();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Nu(t)?By(a,s):(s=Df(t,a,s,l),s!==null&&(En(s,t,l),Hy(s,a,l)))}function Uy(t,a,s){var l=Vn();Nl(t,a,s,l)}function Nl(t,a,s,l){var f={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Nu(t))By(a,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var b=a.lastRenderedState,A=p(b,s);if(f.hasEagerState=!0,f.eagerState=A,On(A,b))return ou(t,a,f,0),pt===null&&su(),!1}catch{}if(s=Df(t,a,f,l),s!==null)return En(s,t,l),Hy(s,a,l),!0}return!1}function gh(t,a,s,l){if(l={lane:2,revertLane:Yh(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Nu(t)){if(a)throw Error(r(479))}else a=Df(t,s,l,2),a!==null&&En(a,t,2)}function Nu(t){var a=t.alternate;return t===Ve||a!==null&&a===Ve}function By(t,a){Xs=xu=!0;var s=t.pending;s===null?a.next=a:(a.next=s.next,s.next=a),t.pending=a}function Hy(t,a,s){if((s&4194048)!==0){var l=a.lanes;l&=t.pendingLanes,s|=l,a.lanes=s,$o(t,s)}}var Rl={readContext:tn,use:Au,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};Rl.useEffectEvent=St;var qy={readContext:tn,use:Au,useCallback:function(t,a){return pn().memoizedState=[t,a===void 0?null:a],t},useContext:tn,useEffect:wy,useImperativeHandle:function(t,a,s){s=s!=null?s.concat([t]):null,Tu(4194308,4,Iy.bind(null,a,t),s)},useLayoutEffect:function(t,a){return Tu(4194308,4,t,a)},useInsertionEffect:function(t,a){Tu(4,2,t,a)},useMemo:function(t,a){var s=pn();a=a===void 0?null:a;var l=t();if(rs){Hn(!0);try{t()}finally{Hn(!1)}}return s.memoizedState=[l,a],l},useReducer:function(t,a,s){var l=pn();if(s!==void 0){var f=s(a);if(rs){Hn(!0);try{s(a)}finally{Hn(!1)}}}else f=a;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=s1.bind(null,Ve,t),[l.memoizedState,t]},useRef:function(t){var a=pn();return t={current:t},a.memoizedState=t},useState:function(t){t=ch(t);var a=t.queue,s=Uy.bind(null,Ve,a);return a.dispatch=s,[t.memoizedState,s]},useDebugValue:fh,useDeferredValue:function(t,a){var s=pn();return hh(s,t,a)},useTransition:function(){var t=ch(!1);return t=jy.bind(null,Ve,t.queue,!0,!1),pn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,s){var l=Ve,f=pn();if(Ye){if(s===void 0)throw Error(r(407));s=s()}else{if(s=a(),pt===null)throw Error(r(349));(qe&127)!==0||uy(l,a,s)}f.memoizedState=s;var p={value:s,getSnapshot:a};return f.queue=p,wy(fy.bind(null,l,p,t),[t]),l.flags|=2048,Ws(9,{destroy:void 0},dy.bind(null,l,p,s,a),null),s},useId:function(){var t=pn(),a=pt.identifierPrefix;if(Ye){var s=qa,l=Ha;s=(l&~(1<<32-Nt(l)-1)).toString(32)+s,a="_"+a+"R_"+s,s=_u++,0<s&&(a+="H"+s.toString(32)),a+="_"}else s=ZA++,a="_"+a+"r_"+s.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:mh,useFormState:_y,useActionState:_y,useOptimistic:function(t){var a=pn();a.memoizedState=a.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=s,a=gh.bind(null,Ve,!0,s),s.dispatch=a,[t,a]},useMemoCache:sh,useCacheRefresh:function(){return pn().memoizedState=r1.bind(null,Ve)},useEffectEvent:function(t){var a=pn(),s={impl:t};return a.memoizedState=s,function(){if((nt&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}},yh={readContext:tn,use:Au,useCallback:My,useContext:tn,useEffect:dh,useImperativeHandle:Oy,useInsertionEffect:Ry,useLayoutEffect:Cy,useMemo:Dy,useReducer:Su,useRef:Ty,useState:function(){return Su(di)},useDebugValue:fh,useDeferredValue:function(t,a){var s=It();return ky(s,dt.memoizedState,t,a)},useTransition:function(){var t=Su(di)[0],a=It().memoizedState;return[typeof t=="boolean"?t:wl(t),a]},useSyncExternalStore:cy,useId:Ly,useHostTransitionStatus:mh,useFormState:Ey,useActionState:Ey,useOptimistic:function(t,a){var s=It();return my(s,dt,t,a)},useMemoCache:sh,useCacheRefresh:zy};yh.useEffectEvent=Ny;var Fy={readContext:tn,use:Au,useCallback:My,useContext:tn,useEffect:dh,useImperativeHandle:Oy,useInsertionEffect:Ry,useLayoutEffect:Cy,useMemo:Dy,useReducer:lh,useRef:Ty,useState:function(){return lh(di)},useDebugValue:fh,useDeferredValue:function(t,a){var s=It();return dt===null?hh(s,t,a):ky(s,dt.memoizedState,t,a)},useTransition:function(){var t=lh(di)[0],a=It().memoizedState;return[typeof t=="boolean"?t:wl(t),a]},useSyncExternalStore:cy,useId:Ly,useHostTransitionStatus:mh,useFormState:Sy,useActionState:Sy,useOptimistic:function(t,a){var s=It();return dt!==null?my(s,dt,t,a):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:sh,useCacheRefresh:zy};Fy.useEffectEvent=Ny;function vh(t,a,s,l){a=t.memoizedState,s=s(l,a),s=s==null?a:E({},a,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var bh={enqueueSetState:function(t,a,s){t=t._reactInternals;var l=Vn(),f=Xi(l);f.payload=a,s!=null&&(f.callback=s),a=Ji(t,f,l),a!==null&&(En(a,t,l),El(a,t,l))},enqueueReplaceState:function(t,a,s){t=t._reactInternals;var l=Vn(),f=Xi(l);f.tag=1,f.payload=a,s!=null&&(f.callback=s),a=Ji(t,f,l),a!==null&&(En(a,t,l),El(a,t,l))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var s=Vn(),l=Xi(s);l.tag=2,a!=null&&(l.callback=a),a=Ji(t,l,s),a!==null&&(En(a,t,s),El(a,t,s))}};function Gy(t,a,s,l,f,p,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,b):a.prototype&&a.prototype.isPureReactComponent?!pl(s,l)||!pl(f,p):!0}function Qy(t,a,s,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(s,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(s,l),a.state!==t&&bh.enqueueReplaceState(a,a.state,null)}function ss(t,a){var s=a;if("ref"in a){s={};for(var l in a)l!=="ref"&&(s[l]=a[l])}if(t=t.defaultProps){s===a&&(s=E({},s));for(var f in t)s[f]===void 0&&(s[f]=t[f])}return s}function Ky(t){ru(t)}function Yy(t){console.error(t)}function $y(t){ru(t)}function Ru(t,a){try{var s=t.onUncaughtError;s(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function Xy(t,a,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function xh(t,a,s){return s=Xi(s),s.tag=3,s.payload={element:null},s.callback=function(){Ru(t,a)},s}function Jy(t){return t=Xi(t),t.tag=3,t}function Wy(t,a,s,l){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;t.payload=function(){return f(p)},t.callback=function(){Xy(a,s,l)}}var b=s.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Xy(a,s,l),typeof f!="function"&&(ar===null?ar=new Set([this]):ar.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function o1(t,a,s,l,f){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=s.alternate,a!==null&&Fs(a,s,f,!0),s=Dn.current,s!==null){switch(s.tag){case 31:case 13:return Wn===null?Uu():s.alternate===null&&Tt===0&&(Tt=3),s.flags&=-257,s.flags|=65536,s.lanes=f,l===mu?s.flags|=16384:(a=s.updateQueue,a===null?s.updateQueue=new Set([l]):a.add(l),Gh(t,l,f)),!1;case 22:return s.flags|=65536,l===mu?s.flags|=16384:(a=s.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=a):(s=a.retryQueue,s===null?a.retryQueue=new Set([l]):s.add(l)),Gh(t,l,f)),!1}throw Error(r(435,s.tag))}return Gh(t,l,f),Uu(),!1}if(Ye)return a=Dn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,l!==zf&&(t=Error(r(422),{cause:l}),yl(Yn(t,s)))):(l!==zf&&(a=Error(r(423),{cause:l}),yl(Yn(a,s))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=Yn(l,s),f=xh(t.stateNode,l,f),Xf(t,f),Tt!==4&&(Tt=2)),!1;var p=Error(r(520),{cause:l});if(p=Yn(p,s),Pl===null?Pl=[p]:Pl.push(p),Tt!==4&&(Tt=2),a===null)return!0;l=Yn(l,s),s=a;do{switch(s.tag){case 3:return s.flags|=65536,t=f&-f,s.lanes|=t,t=xh(s.stateNode,l,t),Xf(s,t),!1;case 1:if(a=s.type,p=s.stateNode,(s.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ar===null||!ar.has(p))))return s.flags|=65536,f&=-f,s.lanes|=f,f=Jy(f),Wy(f,t,s,l),Xf(s,f),!1}s=s.return}while(s!==null);return!1}var _h=Error(r(461)),zt=!1;function nn(t,a,s,l){a.child=t===null?ny(a,null,s,l):is(a,t.child,s,l)}function Zy(t,a,s,l,f){s=s.render;var p=a.ref;if("ref"in l){var b={};for(var A in l)A!=="ref"&&(b[A]=l[A])}else b=l;return es(a),l=nh(t,a,s,b,p,f),A=ah(),t!==null&&!zt?(ih(t,a,f),fi(t,a,f)):(Ye&&A&&Vf(a),a.flags|=1,nn(t,a,l,f),a.child)}function e0(t,a,s,l,f){if(t===null){var p=s.type;return typeof p=="function"&&!kf(p)&&p.defaultProps===void 0&&s.compare===null?(a.tag=15,a.type=p,t0(t,a,p,l,f)):(t=cu(s.type,null,l,a,a.mode,f),t.ref=a.ref,t.return=a,a.child=t)}if(p=t.child,!Ch(t,f)){var b=p.memoizedProps;if(s=s.compare,s=s!==null?s:pl,s(b,l)&&t.ref===a.ref)return fi(t,a,f)}return a.flags|=1,t=si(p,l),t.ref=a.ref,t.return=a,a.child=t}function t0(t,a,s,l,f){if(t!==null){var p=t.memoizedProps;if(pl(p,l)&&t.ref===a.ref)if(zt=!1,a.pendingProps=l=p,Ch(t,f))(t.flags&131072)!==0&&(zt=!0);else return a.lanes=t.lanes,fi(t,a,f)}return Eh(t,a,s,l,f)}function n0(t,a,s,l){var f=l.children,p=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|s:s,t!==null){for(l=a.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~p}else l=0,a.child=null;return a0(t,a,p,s,l)}if((s&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&hu(a,p!==null?p.cachePool:null),p!==null?ry(a,p):Wf(),sy(a);else return l=a.lanes=536870912,a0(t,a,p!==null?p.baseLanes|s:s,s,l)}else p!==null?(hu(a,p.cachePool),ry(a,p),Zi(),a.memoizedState=null):(t!==null&&hu(a,null),Wf(),Zi());return nn(t,a,f,s),a.child}function Cl(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function a0(t,a,s,l,f){var p=Qf();return p=p===null?null:{parent:Vt._currentValue,pool:p},a.memoizedState={baseLanes:s,cachePool:p},t!==null&&hu(a,null),Wf(),sy(a),t!==null&&Fs(t,a,l,!0),a.childLanes=f,null}function Cu(t,a){return a=Ou({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function i0(t,a,s){return is(a,t.child,null,s),t=Cu(a,a.pendingProps),t.flags|=2,kn(a),a.memoizedState=null,t}function l1(t,a,s){var l=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(Ye){if(l.mode==="hidden")return t=Cu(a,l),a.lanes=536870912,Cl(null,t);if(eh(a),(t=yt)?(t=gv(t,Jn),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Gi!==null?{id:Ha,overflow:qa}:null,retryLane:536870912,hydrationErrors:null},s=Bg(t),s.return=a,a.child=s,en=a,yt=null)):t=null,t===null)throw Ki(a);return a.lanes=536870912,null}return Cu(a,l)}var p=t.memoizedState;if(p!==null){var b=p.dehydrated;if(eh(a),f)if(a.flags&256)a.flags&=-257,a=i0(t,a,s);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(r(558));else if(zt||Fs(t,a,s,!1),f=(s&t.childLanes)!==0,zt||f){if(l=pt,l!==null&&(b=Xo(l,s),b!==0&&b!==p.retryLane))throw p.retryLane=b,Xr(t,b),En(l,t,b),_h;Uu(),a=i0(t,a,s)}else t=p.treeContext,yt=Zn(b.nextSibling),en=a,Ye=!0,Qi=null,Jn=!1,t!==null&&Fg(a,t),a=Cu(a,l),a.flags|=4096;return a}return t=si(t.child,{mode:l.mode,children:l.children}),t.ref=a.ref,a.child=t,t.return=a,t}function Iu(t,a){var s=a.ref;if(s===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(r(284));(t===null||t.ref!==s)&&(a.flags|=4194816)}}function Eh(t,a,s,l,f){return es(a),s=nh(t,a,s,l,void 0,f),l=ah(),t!==null&&!zt?(ih(t,a,f),fi(t,a,f)):(Ye&&l&&Vf(a),a.flags|=1,nn(t,a,s,f),a.child)}function r0(t,a,s,l,f,p){return es(a),a.updateQueue=null,s=ly(a,l,s,f),oy(t),l=ah(),t!==null&&!zt?(ih(t,a,p),fi(t,a,p)):(Ye&&l&&Vf(a),a.flags|=1,nn(t,a,s,p),a.child)}function s0(t,a,s,l,f){if(es(a),a.stateNode===null){var p=Us,b=s.contextType;typeof b=="object"&&b!==null&&(p=tn(b)),p=new s(l,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=bh,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=l,p.state=a.memoizedState,p.refs={},Yf(a),b=s.contextType,p.context=typeof b=="object"&&b!==null?tn(b):Us,p.state=a.memoizedState,b=s.getDerivedStateFromProps,typeof b=="function"&&(vh(a,s,b,l),p.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(b=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),b!==p.state&&bh.enqueueReplaceState(p,p.state,null),Sl(a,l,p,f),Al(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(t===null){p=a.stateNode;var A=a.memoizedProps,M=ss(s,A);p.props=M;var G=p.context,ee=s.contextType;b=Us,typeof ee=="object"&&ee!==null&&(b=tn(ee));var ae=s.getDerivedStateFromProps;ee=typeof ae=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,ee||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||G!==b)&&Qy(a,p,l,b),$i=!1;var K=a.memoizedState;p.state=K,Sl(a,l,p,f),Al(),G=a.memoizedState,A||K!==G||$i?(typeof ae=="function"&&(vh(a,s,ae,l),G=a.memoizedState),(M=$i||Gy(a,s,M,l,K,G,b))?(ee||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=G),p.props=l,p.state=G,p.context=b,l=M):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{p=a.stateNode,$f(t,a),b=a.memoizedProps,ee=ss(s,b),p.props=ee,ae=a.pendingProps,K=p.context,G=s.contextType,M=Us,typeof G=="object"&&G!==null&&(M=tn(G)),A=s.getDerivedStateFromProps,(G=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b!==ae||K!==M)&&Qy(a,p,l,M),$i=!1,K=a.memoizedState,p.state=K,Sl(a,l,p,f),Al();var $=a.memoizedState;b!==ae||K!==$||$i||t!==null&&t.dependencies!==null&&du(t.dependencies)?(typeof A=="function"&&(vh(a,s,A,l),$=a.memoizedState),(ee=$i||Gy(a,s,ee,l,K,$,M)||t!==null&&t.dependencies!==null&&du(t.dependencies))?(G||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,$,M),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,$,M)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=$),p.props=l,p.state=$,p.context=M,l=ee):(typeof p.componentDidUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(a.flags|=1024),l=!1)}return p=l,Iu(t,a),l=(a.flags&128)!==0,p||l?(p=a.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,t!==null&&l?(a.child=is(a,t.child,null,f),a.child=is(a,null,s,f)):nn(t,a,s,f),a.memoizedState=p.state,t=a.child):t=fi(t,a,f),t}function o0(t,a,s,l){return Wr(),a.flags|=256,nn(t,a,s,l),a.child}var Ah={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sh(t){return{baseLanes:t,cachePool:Xg()}}function Th(t,a,s){return t=t!==null?t.childLanes&~s:0,a&&(t|=Pn),t}function l0(t,a,s){var l=a.pendingProps,f=!1,p=(a.flags&128)!==0,b;if((b=p)||(b=t!==null&&t.memoizedState===null?!1:(Ct.current&2)!==0),b&&(f=!0,a.flags&=-129),b=(a.flags&32)!==0,a.flags&=-33,t===null){if(Ye){if(f?Wi(a):Zi(),(t=yt)?(t=gv(t,Jn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Gi!==null?{id:Ha,overflow:qa}:null,retryLane:536870912,hydrationErrors:null},s=Bg(t),s.return=a,a.child=s,en=a,yt=null)):t=null,t===null)throw Ki(a);return op(t)?a.lanes=32:a.lanes=536870912,null}var A=l.children;return l=l.fallback,f?(Zi(),f=a.mode,A=Ou({mode:"hidden",children:A},f),l=Jr(l,f,s,null),A.return=a,l.return=a,A.sibling=l,a.child=A,l=a.child,l.memoizedState=Sh(s),l.childLanes=Th(t,b,s),a.memoizedState=Ah,Cl(null,l)):(Wi(a),wh(a,A))}var M=t.memoizedState;if(M!==null&&(A=M.dehydrated,A!==null)){if(p)a.flags&256?(Wi(a),a.flags&=-257,a=Nh(t,a,s)):a.memoizedState!==null?(Zi(),a.child=t.child,a.flags|=128,a=null):(Zi(),A=l.fallback,f=a.mode,l=Ou({mode:"visible",children:l.children},f),A=Jr(A,f,s,null),A.flags|=2,l.return=a,A.return=a,l.sibling=A,a.child=l,is(a,t.child,null,s),l=a.child,l.memoizedState=Sh(s),l.childLanes=Th(t,b,s),a.memoizedState=Ah,a=Cl(null,l));else if(Wi(a),op(A)){if(b=A.nextSibling&&A.nextSibling.dataset,b)var G=b.dgst;b=G,l=Error(r(419)),l.stack="",l.digest=b,yl({value:l,source:null,stack:null}),a=Nh(t,a,s)}else if(zt||Fs(t,a,s,!1),b=(s&t.childLanes)!==0,zt||b){if(b=pt,b!==null&&(l=Xo(b,s),l!==0&&l!==M.retryLane))throw M.retryLane=l,Xr(t,l),En(b,t,l),_h;sp(A)||Uu(),a=Nh(t,a,s)}else sp(A)?(a.flags|=192,a.child=t.child,a=null):(t=M.treeContext,yt=Zn(A.nextSibling),en=a,Ye=!0,Qi=null,Jn=!1,t!==null&&Fg(a,t),a=wh(a,l.children),a.flags|=4096);return a}return f?(Zi(),A=l.fallback,f=a.mode,M=t.child,G=M.sibling,l=si(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,G!==null?A=si(G,A):(A=Jr(A,f,s,null),A.flags|=2),A.return=a,l.return=a,l.sibling=A,a.child=l,Cl(null,l),l=a.child,A=t.child.memoizedState,A===null?A=Sh(s):(f=A.cachePool,f!==null?(M=Vt._currentValue,f=f.parent!==M?{parent:M,pool:M}:f):f=Xg(),A={baseLanes:A.baseLanes|s,cachePool:f}),l.memoizedState=A,l.childLanes=Th(t,b,s),a.memoizedState=Ah,Cl(t.child,l)):(Wi(a),s=t.child,t=s.sibling,s=si(s,{mode:"visible",children:l.children}),s.return=a,s.sibling=null,t!==null&&(b=a.deletions,b===null?(a.deletions=[t],a.flags|=16):b.push(t)),a.child=s,a.memoizedState=null,s)}function wh(t,a){return a=Ou({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Ou(t,a){return t=Mn(22,t,null,a),t.lanes=0,t}function Nh(t,a,s){return is(a,t.child,null,s),t=wh(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function c0(t,a,s){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),Hf(t.return,a,s)}function Rh(t,a,s,l,f,p){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:f,treeForkCount:p}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=l,b.tail=s,b.tailMode=f,b.treeForkCount=p)}function u0(t,a,s){var l=a.pendingProps,f=l.revealOrder,p=l.tail;l=l.children;var b=Ct.current,A=(b&2)!==0;if(A?(b=b&1|2,a.flags|=128):b&=1,oe(Ct,b),nn(t,a,l,s),l=Ye?gl:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&c0(t,s,a);else if(t.tag===19)c0(t,s,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(s=a.child,f=null;s!==null;)t=s.alternate,t!==null&&bu(t)===null&&(f=s),s=s.sibling;s=f,s===null?(f=a.child,a.child=null):(f=s.sibling,s.sibling=null),Rh(a,!1,f,s,p,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,f=a.child,a.child=null;f!==null;){if(t=f.alternate,t!==null&&bu(t)===null){a.child=f;break}t=f.sibling,f.sibling=s,s=f,f=t}Rh(a,!0,s,null,p,l);break;case"together":Rh(a,!1,null,null,void 0,l);break;default:a.memoizedState=null}return a.child}function fi(t,a,s){if(t!==null&&(a.dependencies=t.dependencies),nr|=a.lanes,(s&a.childLanes)===0)if(t!==null){if(Fs(t,a,s,!1),(s&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(r(153));if(a.child!==null){for(t=a.child,s=si(t,t.pendingProps),a.child=s,s.return=a;t.sibling!==null;)t=t.sibling,s=s.sibling=si(t,t.pendingProps),s.return=a;s.sibling=null}return a.child}function Ch(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&du(t)))}function c1(t,a,s){switch(a.tag){case 3:Je(a,a.stateNode.containerInfo),Yi(a,Vt,t.memoizedState.cache),Wr();break;case 27:case 5:Jt(a);break;case 4:Je(a,a.stateNode.containerInfo);break;case 10:Yi(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,eh(a),null;break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(Wi(a),a.flags|=128,null):(s&a.child.childLanes)!==0?l0(t,a,s):(Wi(a),t=fi(t,a,s),t!==null?t.sibling:null);Wi(a);break;case 19:var f=(t.flags&128)!==0;if(l=(s&a.childLanes)!==0,l||(Fs(t,a,s,!1),l=(s&a.childLanes)!==0),f){if(l)return u0(t,a,s);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(Ct,Ct.current),l)break;return null;case 22:return a.lanes=0,n0(t,a,s,a.pendingProps);case 24:Yi(a,Vt,t.memoizedState.cache)}return fi(t,a,s)}function d0(t,a,s){if(t!==null)if(t.memoizedProps!==a.pendingProps)zt=!0;else{if(!Ch(t,s)&&(a.flags&128)===0)return zt=!1,c1(t,a,s);zt=(t.flags&131072)!==0}else zt=!1,Ye&&(a.flags&1048576)!==0&&qg(a,gl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var l=a.pendingProps;if(t=ns(a.elementType),a.type=t,typeof t=="function")kf(t)?(l=ss(t,l),a.tag=1,a=s0(null,a,t,l,s)):(a.tag=0,a=Eh(null,a,t,l,s));else{if(t!=null){var f=t.$$typeof;if(f===me){a.tag=11,a=Zy(null,a,t,l,s);break e}else if(f===I){a.tag=14,a=e0(null,a,t,l,s);break e}}throw a=fe(t)||t,Error(r(306,a,""))}}return a;case 0:return Eh(t,a,a.type,a.pendingProps,s);case 1:return l=a.type,f=ss(l,a.pendingProps),s0(t,a,l,f,s);case 3:e:{if(Je(a,a.stateNode.containerInfo),t===null)throw Error(r(387));l=a.pendingProps;var p=a.memoizedState;f=p.element,$f(t,a),Sl(a,l,null,s);var b=a.memoizedState;if(l=b.cache,Yi(a,Vt,l),l!==p.cache&&qf(a,[Vt],s,!0),Al(),l=b.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:b.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=o0(t,a,l,s);break e}else if(l!==f){f=Yn(Error(r(424)),a),yl(f),a=o0(t,a,l,s);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,yt=Zn(t.firstChild),en=a,Ye=!0,Qi=null,Jn=!0,s=ny(a,null,l,s),a.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Wr(),l===f){a=fi(t,a,s);break e}nn(t,a,l,s)}a=a.child}return a;case 26:return Iu(t,a),t===null?(s=Ev(a.type,null,a.pendingProps,null))?a.memoizedState=s:Ye||(s=a.type,t=a.pendingProps,l=Ku(Ne.current).createElement(s),l[kt]=a,l[Kt]=t,an(l,s,t),jt(l),a.stateNode=l):a.memoizedState=Ev(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Jt(a),t===null&&Ye&&(l=a.stateNode=bv(a.type,a.pendingProps,Ne.current),en=a,Jn=!0,f=yt,or(a.type)?(lp=f,yt=Zn(l.firstChild)):yt=f),nn(t,a,a.pendingProps.children,s),Iu(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Ye&&((f=l=yt)&&(l=z1(l,a.type,a.pendingProps,Jn),l!==null?(a.stateNode=l,en=a,yt=Zn(l.firstChild),Jn=!1,f=!0):f=!1),f||Ki(a)),Jt(a),f=a.type,p=a.pendingProps,b=t!==null?t.memoizedProps:null,l=p.children,ap(f,p)?l=null:b!==null&&ap(f,b)&&(a.flags|=32),a.memoizedState!==null&&(f=nh(t,a,e1,null,null,s),Fl._currentValue=f),Iu(t,a),nn(t,a,l,s),a.child;case 6:return t===null&&Ye&&((t=s=yt)&&(s=U1(s,a.pendingProps,Jn),s!==null?(a.stateNode=s,en=a,yt=null,t=!0):t=!1),t||Ki(a)),null;case 13:return l0(t,a,s);case 4:return Je(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=is(a,null,l,s):nn(t,a,l,s),a.child;case 11:return Zy(t,a,a.type,a.pendingProps,s);case 7:return nn(t,a,a.pendingProps,s),a.child;case 8:return nn(t,a,a.pendingProps.children,s),a.child;case 12:return nn(t,a,a.pendingProps.children,s),a.child;case 10:return l=a.pendingProps,Yi(a,a.type,l.value),nn(t,a,l.children,s),a.child;case 9:return f=a.type._context,l=a.pendingProps.children,es(a),f=tn(f),l=l(f),a.flags|=1,nn(t,a,l,s),a.child;case 14:return e0(t,a,a.type,a.pendingProps,s);case 15:return t0(t,a,a.type,a.pendingProps,s);case 19:return u0(t,a,s);case 31:return l1(t,a,s);case 22:return n0(t,a,s,a.pendingProps);case 24:return es(a),l=tn(Vt),t===null?(f=Qf(),f===null&&(f=pt,p=Ff(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=s),f=p),a.memoizedState={parent:l,cache:f},Yf(a),Yi(a,Vt,f)):((t.lanes&s)!==0&&($f(t,a),Sl(a,null,null,s),Al()),f=t.memoizedState,p=a.memoizedState,f.parent!==l?(f={parent:l,cache:l},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),Yi(a,Vt,l)):(l=p.cache,Yi(a,Vt,l),l!==f.cache&&qf(a,[Vt],s,!0))),nn(t,a,a.pendingProps.children,s),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function hi(t){t.flags|=4}function Ih(t,a,s,l,f){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(L0())t.flags|=8192;else throw as=mu,Kf}else t.flags&=-16777217}function f0(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Nv(a))if(L0())t.flags|=8192;else throw as=mu,Kf}function Mu(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Lc():536870912,t.lanes|=a,no|=a)}function Il(t,a){if(!Ye)switch(t.tailMode){case"hidden":a=t.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function vt(t){var a=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(a)for(var f=t.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=s,a}function u1(t,a,s){var l=a.pendingProps;switch(Lf(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(a),null;case 1:return vt(a),null;case 3:return s=a.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),ci(Vt),Ue(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(qs(a)?hi(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Uf())),vt(a),null;case 26:var f=a.type,p=a.memoizedState;return t===null?(hi(a),p!==null?(vt(a),f0(a,p)):(vt(a),Ih(a,f,null,l,s))):p?p!==t.memoizedState?(hi(a),vt(a),f0(a,p)):(vt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==l&&hi(a),vt(a),Ih(a,f,t,l,s)),null;case 27:if(mn(a),s=Ne.current,f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&hi(a);else{if(!l){if(a.stateNode===null)throw Error(r(166));return vt(a),null}t=de.current,qs(a)?Gg(a):(t=bv(f,l,s),a.stateNode=t,hi(a))}return vt(a),null;case 5:if(mn(a),f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&hi(a);else{if(!l){if(a.stateNode===null)throw Error(r(166));return vt(a),null}if(p=de.current,qs(a))Gg(a);else{var b=Ku(Ne.current);switch(p){case 1:p=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=b.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?b.createElement("select",{is:l.is}):b.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?b.createElement(f,{is:l.is}):b.createElement(f)}}p[kt]=a,p[Kt]=l;e:for(b=a.child;b!==null;){if(b.tag===5||b.tag===6)p.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===a)break e;for(;b.sibling===null;){if(b.return===null||b.return===a)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}a.stateNode=p;e:switch(an(p,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&hi(a)}}return vt(a),Ih(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,s),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==l&&hi(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(r(166));if(t=Ne.current,qs(a)){if(t=a.stateNode,s=a.memoizedProps,l=null,f=en,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[kt]=a,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||lv(t.nodeValue,s)),t||Ki(a,!0)}else t=Ku(t).createTextNode(l),t[kt]=a,a.stateNode=t}return vt(a),null;case 31:if(s=a.memoizedState,t===null||t.memoizedState!==null){if(l=qs(a),s!==null){if(t===null){if(!l)throw Error(r(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[kt]=a}else Wr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;vt(a),t=!1}else s=Uf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return a.flags&256?(kn(a),a):(kn(a),null);if((a.flags&128)!==0)throw Error(r(558))}return vt(a),null;case 13:if(l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=qs(a),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(r(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[kt]=a}else Wr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;vt(a),f=!1}else f=Uf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(kn(a),a):(kn(a),null)}return kn(a),(a.flags&128)!==0?(a.lanes=s,a):(s=l!==null,t=t!==null&&t.memoizedState!==null,s&&(l=a.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)),s!==t&&s&&(a.child.flags|=8192),Mu(a,a.updateQueue),vt(a),null);case 4:return Ue(),t===null&&Wh(a.stateNode.containerInfo),vt(a),null;case 10:return ci(a.type),vt(a),null;case 19:if(J(Ct),l=a.memoizedState,l===null)return vt(a),null;if(f=(a.flags&128)!==0,p=l.rendering,p===null)if(f)Il(l,!1);else{if(Tt!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(p=bu(t),p!==null){for(a.flags|=128,Il(l,!1),t=p.updateQueue,a.updateQueue=t,Mu(a,t),a.subtreeFlags=0,t=s,s=a.child;s!==null;)Ug(s,t),s=s.sibling;return oe(Ct,Ct.current&1|2),Ye&&oi(a,l.treeForkCount),a.child}t=t.sibling}l.tail!==null&&mt()>Vu&&(a.flags|=128,f=!0,Il(l,!1),a.lanes=4194304)}else{if(!f)if(t=bu(p),t!==null){if(a.flags|=128,f=!0,t=t.updateQueue,a.updateQueue=t,Mu(a,t),Il(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!Ye)return vt(a),null}else 2*mt()-l.renderingStartTime>Vu&&s!==536870912&&(a.flags|=128,f=!0,Il(l,!1),a.lanes=4194304);l.isBackwards?(p.sibling=a.child,a.child=p):(t=l.last,t!==null?t.sibling=p:a.child=p,l.last=p)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=mt(),t.sibling=null,s=Ct.current,oe(Ct,f?s&1|2:s&1),Ye&&oi(a,l.treeForkCount),t):(vt(a),null);case 22:case 23:return kn(a),Zf(),l=a.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(s&536870912)!==0&&(a.flags&128)===0&&(vt(a),a.subtreeFlags&6&&(a.flags|=8192)):vt(a),s=a.updateQueue,s!==null&&Mu(a,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==s&&(a.flags|=2048),t!==null&&J(ts),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),a.memoizedState.cache!==s&&(a.flags|=2048),ci(Vt),vt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function d1(t,a){switch(Lf(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return ci(Vt),Ue(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return mn(a),null;case 31:if(a.memoizedState!==null){if(kn(a),a.alternate===null)throw Error(r(340));Wr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(kn(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Wr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return J(Ct),null;case 4:return Ue(),null;case 10:return ci(a.type),null;case 22:case 23:return kn(a),Zf(),t!==null&&J(ts),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return ci(Vt),null;case 25:return null;default:return null}}function h0(t,a){switch(Lf(a),a.tag){case 3:ci(Vt),Ue();break;case 26:case 27:case 5:mn(a);break;case 4:Ue();break;case 31:a.memoizedState!==null&&kn(a);break;case 13:kn(a);break;case 19:J(Ct);break;case 10:ci(a.type);break;case 22:case 23:kn(a),Zf(),t!==null&&J(ts);break;case 24:ci(Vt)}}function Ol(t,a){try{var s=a.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var f=l.next;s=f;do{if((s.tag&t)===t){l=void 0;var p=s.create,b=s.inst;l=p(),b.destroy=l}s=s.next}while(s!==f)}}catch(A){lt(a,a.return,A)}}function er(t,a,s){try{var l=a.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&t)===t){var b=l.inst,A=b.destroy;if(A!==void 0){b.destroy=void 0,f=a;var M=s,G=A;try{G()}catch(ee){lt(f,M,ee)}}}l=l.next}while(l!==p)}}catch(ee){lt(a,a.return,ee)}}function p0(t){var a=t.updateQueue;if(a!==null){var s=t.stateNode;try{iy(a,s)}catch(l){lt(t,t.return,l)}}}function m0(t,a,s){s.props=ss(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){lt(t,a,l)}}function Ml(t,a){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(f){lt(t,a,f)}}function Fa(t,a){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(f){lt(t,a,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){lt(t,a,f)}else s.current=null}function g0(t){var a=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(f){lt(t,t.return,f)}}function Oh(t,a,s){try{var l=t.stateNode;D1(l,t.type,s,a),l[Kt]=a}catch(f){lt(t,t.return,f)}}function y0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&or(t.type)||t.tag===4}function Mh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||y0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&or(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dh(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,a):(a=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,a.appendChild(t),s=s._reactRootContainer,s!=null||a.onclick!==null||(a.onclick=ua));else if(l!==4&&(l===27&&or(t.type)&&(s=t.stateNode,a=null),t=t.child,t!==null))for(Dh(t,a,s),t=t.sibling;t!==null;)Dh(t,a,s),t=t.sibling}function Du(t,a,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?s.insertBefore(t,a):s.appendChild(t);else if(l!==4&&(l===27&&or(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Du(t,a,s),t=t.sibling;t!==null;)Du(t,a,s),t=t.sibling}function v0(t){var a=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);an(a,l,s),a[kt]=t,a[Kt]=s}catch(p){lt(t,t.return,p)}}var pi=!1,Ut=!1,kh=!1,b0=typeof WeakSet=="function"?WeakSet:Set,$t=null;function f1(t,a){if(t=t.containerInfo,tp=ed,t=Og(t),Nf(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{s.nodeType,p.nodeType}catch{s=null;break e}var b=0,A=-1,M=-1,G=0,ee=0,ae=t,K=null;t:for(;;){for(var $;ae!==s||f!==0&&ae.nodeType!==3||(A=b+f),ae!==p||l!==0&&ae.nodeType!==3||(M=b+l),ae.nodeType===3&&(b+=ae.nodeValue.length),($=ae.firstChild)!==null;)K=ae,ae=$;for(;;){if(ae===t)break t;if(K===s&&++G===f&&(A=b),K===p&&++ee===l&&(M=b),($=ae.nextSibling)!==null)break;ae=K,K=ae.parentNode}ae=$}s=A===-1||M===-1?null:{start:A,end:M}}else s=null}s=s||{start:0,end:0}}else s=null;for(np={focusedElem:t,selectionRange:s},ed=!1,$t=a;$t!==null;)if(a=$t,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,$t=t;else for(;$t!==null;){switch(a=$t,p=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)f=t[s],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,s=a,f=p.memoizedProps,p=p.memoizedState,l=s.stateNode;try{var ge=ss(s.type,f);t=l.getSnapshotBeforeUpdate(ge,p),l.__reactInternalSnapshotBeforeUpdate=t}catch(Re){lt(s,s.return,Re)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,s=t.nodeType,s===9)rp(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":rp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=a.sibling,t!==null){t.return=a.return,$t=t;break}$t=a.return}}function x0(t,a,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:gi(t,s),l&4&&Ol(5,s);break;case 1:if(gi(t,s),l&4)if(t=s.stateNode,a===null)try{t.componentDidMount()}catch(b){lt(s,s.return,b)}else{var f=ss(s.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(f,a,t.__reactInternalSnapshotBeforeUpdate)}catch(b){lt(s,s.return,b)}}l&64&&p0(s),l&512&&Ml(s,s.return);break;case 3:if(gi(t,s),l&64&&(t=s.updateQueue,t!==null)){if(a=null,s.child!==null)switch(s.child.tag){case 27:case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}try{iy(t,a)}catch(b){lt(s,s.return,b)}}break;case 27:a===null&&l&4&&v0(s);case 26:case 5:gi(t,s),a===null&&l&4&&g0(s),l&512&&Ml(s,s.return);break;case 12:gi(t,s);break;case 31:gi(t,s),l&4&&A0(t,s);break;case 13:gi(t,s),l&4&&S0(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=_1.bind(null,s),B1(t,s))));break;case 22:if(l=s.memoizedState!==null||pi,!l){a=a!==null&&a.memoizedState!==null||Ut,f=pi;var p=Ut;pi=l,(Ut=a)&&!p?yi(t,s,(s.subtreeFlags&8772)!==0):gi(t,s),pi=f,Ut=p}break;case 30:break;default:gi(t,s)}}function _0(t){var a=t.alternate;a!==null&&(t.alternate=null,_0(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&ws(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var _t=null,vn=!1;function mi(t,a,s){for(s=s.child;s!==null;)E0(t,a,s),s=s.sibling}function E0(t,a,s){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(sa,s)}catch{}switch(s.tag){case 26:Ut||Fa(s,a),mi(t,a,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Ut||Fa(s,a);var l=_t,f=vn;or(s.type)&&(_t=s.stateNode,vn=!1),mi(t,a,s),Bl(s.stateNode),_t=l,vn=f;break;case 5:Ut||Fa(s,a);case 6:if(l=_t,f=vn,_t=null,mi(t,a,s),_t=l,vn=f,_t!==null)if(vn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(s.stateNode)}catch(p){lt(s,a,p)}else try{_t.removeChild(s.stateNode)}catch(p){lt(s,a,p)}break;case 18:_t!==null&&(vn?(t=_t,pv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),uo(t)):pv(_t,s.stateNode));break;case 4:l=_t,f=vn,_t=s.stateNode.containerInfo,vn=!0,mi(t,a,s),_t=l,vn=f;break;case 0:case 11:case 14:case 15:er(2,s,a),Ut||er(4,s,a),mi(t,a,s);break;case 1:Ut||(Fa(s,a),l=s.stateNode,typeof l.componentWillUnmount=="function"&&m0(s,a,l)),mi(t,a,s);break;case 21:mi(t,a,s);break;case 22:Ut=(l=Ut)||s.memoizedState!==null,mi(t,a,s),Ut=l;break;default:mi(t,a,s)}}function A0(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{uo(t)}catch(s){lt(a,a.return,s)}}}function S0(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{uo(t)}catch(s){lt(a,a.return,s)}}function h1(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new b0),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new b0),a;default:throw Error(r(435,t.tag))}}function ku(t,a){var s=h1(t);a.forEach(function(l){if(!s.has(l)){s.add(l);var f=E1.bind(null,t,l);l.then(f,f)}})}function bn(t,a){var s=a.deletions;if(s!==null)for(var l=0;l<s.length;l++){var f=s[l],p=t,b=a,A=b;e:for(;A!==null;){switch(A.tag){case 27:if(or(A.type)){_t=A.stateNode,vn=!1;break e}break;case 5:_t=A.stateNode,vn=!1;break e;case 3:case 4:_t=A.stateNode.containerInfo,vn=!0;break e}A=A.return}if(_t===null)throw Error(r(160));E0(p,b,f),_t=null,vn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)T0(a,t),a=a.sibling}var ga=null;function T0(t,a){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:bn(a,t),xn(t),l&4&&(er(3,t,t.return),Ol(3,t),er(5,t,t.return));break;case 1:bn(a,t),xn(t),l&512&&(Ut||s===null||Fa(s,s.return)),l&64&&pi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var f=ga;if(bn(a,t),xn(t),l&512&&(Ut||s===null||Fa(s,s.return)),l&4){var p=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Ia]||p[kt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),an(p,l,s),p[kt]=t,jt(p),l=p;break e;case"link":var b=Tv("link","href",f).get(l+(s.href||""));if(b){for(var A=0;A<b.length;A++)if(p=b[A],p.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&p.getAttribute("rel")===(s.rel==null?null:s.rel)&&p.getAttribute("title")===(s.title==null?null:s.title)&&p.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){b.splice(A,1);break t}}p=f.createElement(l),an(p,l,s),f.head.appendChild(p);break;case"meta":if(b=Tv("meta","content",f).get(l+(s.content||""))){for(A=0;A<b.length;A++)if(p=b[A],p.getAttribute("content")===(s.content==null?null:""+s.content)&&p.getAttribute("name")===(s.name==null?null:s.name)&&p.getAttribute("property")===(s.property==null?null:s.property)&&p.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&p.getAttribute("charset")===(s.charSet==null?null:s.charSet)){b.splice(A,1);break t}}p=f.createElement(l),an(p,l,s),f.head.appendChild(p);break;default:throw Error(r(468,l))}p[kt]=t,jt(p),l=p}t.stateNode=l}else wv(f,t.type,t.stateNode);else t.stateNode=Sv(f,l,t.memoizedProps);else p!==l?(p===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):p.count--,l===null?wv(f,t.type,t.stateNode):Sv(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Oh(t,t.memoizedProps,s.memoizedProps)}break;case 27:bn(a,t),xn(t),l&512&&(Ut||s===null||Fa(s,s.return)),s!==null&&l&4&&Oh(t,t.memoizedProps,s.memoizedProps);break;case 5:if(bn(a,t),xn(t),l&512&&(Ut||s===null||Fa(s,s.return)),t.flags&32){f=t.stateNode;try{yn(f,"")}catch(ge){lt(t,t.return,ge)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Oh(t,f,s!==null?s.memoizedProps:f)),l&1024&&(kh=!0);break;case 6:if(bn(a,t),xn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(ge){lt(t,t.return,ge)}}break;case 3:if(Xu=null,f=ga,ga=Yu(a.containerInfo),bn(a,t),ga=f,xn(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{uo(a.containerInfo)}catch(ge){lt(t,t.return,ge)}kh&&(kh=!1,w0(t));break;case 4:l=ga,ga=Yu(t.stateNode.containerInfo),bn(a,t),xn(t),ga=l;break;case 12:bn(a,t),xn(t);break;case 31:bn(a,t),xn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ku(t,l)));break;case 13:bn(a,t),xn(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Pu=mt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ku(t,l)));break;case 22:f=t.memoizedState!==null;var M=s!==null&&s.memoizedState!==null,G=pi,ee=Ut;if(pi=G||f,Ut=ee||M,bn(a,t),Ut=ee,pi=G,xn(t),l&8192)e:for(a=t.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(s===null||M||pi||Ut||os(t)),s=null,a=t;;){if(a.tag===5||a.tag===26){if(s===null){M=s=a;try{if(p=M.stateNode,f)b=p.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{A=M.stateNode;var ae=M.memoizedProps.style,K=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;A.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ge){lt(M,M.return,ge)}}}else if(a.tag===6){if(s===null){M=a;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(ge){lt(M,M.return,ge)}}}else if(a.tag===18){if(s===null){M=a;try{var $=M.stateNode;f?mv($,!0):mv(M.stateNode,!1)}catch(ge){lt(M,M.return,ge)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;s===a&&(s=null),a=a.return}s===a&&(s=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,ku(t,s))));break;case 19:bn(a,t),xn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ku(t,l)));break;case 30:break;case 21:break;default:bn(a,t),xn(t)}}function xn(t){var a=t.flags;if(a&2){try{for(var s,l=t.return;l!==null;){if(y0(l)){s=l;break}l=l.return}if(s==null)throw Error(r(160));switch(s.tag){case 27:var f=s.stateNode,p=Mh(t);Du(t,p,f);break;case 5:var b=s.stateNode;s.flags&32&&(yn(b,""),s.flags&=-33);var A=Mh(t);Du(t,A,b);break;case 3:case 4:var M=s.stateNode.containerInfo,G=Mh(t);Dh(t,G,M);break;default:throw Error(r(161))}}catch(ee){lt(t,t.return,ee)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function w0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;w0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function gi(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)x0(t,a.alternate,a),a=a.sibling}function os(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:er(4,a,a.return),os(a);break;case 1:Fa(a,a.return);var s=a.stateNode;typeof s.componentWillUnmount=="function"&&m0(a,a.return,s),os(a);break;case 27:Bl(a.stateNode);case 26:case 5:Fa(a,a.return),os(a);break;case 22:a.memoizedState===null&&os(a);break;case 30:os(a);break;default:os(a)}t=t.sibling}}function yi(t,a,s){for(s=s&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,f=t,p=a,b=p.flags;switch(p.tag){case 0:case 11:case 15:yi(f,p,s),Ol(4,p);break;case 1:if(yi(f,p,s),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){lt(l,l.return,G)}if(l=p,f=l.updateQueue,f!==null){var A=l.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)ay(M[f],A)}catch(G){lt(l,l.return,G)}}s&&b&64&&p0(p),Ml(p,p.return);break;case 27:v0(p);case 26:case 5:yi(f,p,s),s&&l===null&&b&4&&g0(p),Ml(p,p.return);break;case 12:yi(f,p,s);break;case 31:yi(f,p,s),s&&b&4&&A0(f,p);break;case 13:yi(f,p,s),s&&b&4&&S0(f,p);break;case 22:p.memoizedState===null&&yi(f,p,s),Ml(p,p.return);break;case 30:break;default:yi(f,p,s)}a=a.sibling}}function jh(t,a){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&vl(s))}function Ph(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&vl(t))}function ya(t,a,s,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)N0(t,a,s,l),a=a.sibling}function N0(t,a,s,l){var f=a.flags;switch(a.tag){case 0:case 11:case 15:ya(t,a,s,l),f&2048&&Ol(9,a);break;case 1:ya(t,a,s,l);break;case 3:ya(t,a,s,l),f&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&vl(t)));break;case 12:if(f&2048){ya(t,a,s,l),t=a.stateNode;try{var p=a.memoizedProps,b=p.id,A=p.onPostCommit;typeof A=="function"&&A(b,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){lt(a,a.return,M)}}else ya(t,a,s,l);break;case 31:ya(t,a,s,l);break;case 13:ya(t,a,s,l);break;case 23:break;case 22:p=a.stateNode,b=a.alternate,a.memoizedState!==null?p._visibility&2?ya(t,a,s,l):Dl(t,a):p._visibility&2?ya(t,a,s,l):(p._visibility|=2,Zs(t,a,s,l,(a.subtreeFlags&10256)!==0||!1)),f&2048&&jh(b,a);break;case 24:ya(t,a,s,l),f&2048&&Ph(a.alternate,a);break;default:ya(t,a,s,l)}}function Zs(t,a,s,l,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=t,b=a,A=s,M=l,G=b.flags;switch(b.tag){case 0:case 11:case 15:Zs(p,b,A,M,f),Ol(8,b);break;case 23:break;case 22:var ee=b.stateNode;b.memoizedState!==null?ee._visibility&2?Zs(p,b,A,M,f):Dl(p,b):(ee._visibility|=2,Zs(p,b,A,M,f)),f&&G&2048&&jh(b.alternate,b);break;case 24:Zs(p,b,A,M,f),f&&G&2048&&Ph(b.alternate,b);break;default:Zs(p,b,A,M,f)}a=a.sibling}}function Dl(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var s=t,l=a,f=l.flags;switch(l.tag){case 22:Dl(s,l),f&2048&&jh(l.alternate,l);break;case 24:Dl(s,l),f&2048&&Ph(l.alternate,l);break;default:Dl(s,l)}a=a.sibling}}var kl=8192;function eo(t,a,s){if(t.subtreeFlags&kl)for(t=t.child;t!==null;)R0(t,a,s),t=t.sibling}function R0(t,a,s){switch(t.tag){case 26:eo(t,a,s),t.flags&kl&&t.memoizedState!==null&&Z1(s,ga,t.memoizedState,t.memoizedProps);break;case 5:eo(t,a,s);break;case 3:case 4:var l=ga;ga=Yu(t.stateNode.containerInfo),eo(t,a,s),ga=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=kl,kl=16777216,eo(t,a,s),kl=l):eo(t,a,s));break;default:eo(t,a,s)}}function C0(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function jl(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];$t=l,O0(l,t)}C0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)I0(t),t=t.sibling}function I0(t){switch(t.tag){case 0:case 11:case 15:jl(t),t.flags&2048&&er(9,t,t.return);break;case 3:jl(t);break;case 12:jl(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,ju(t)):jl(t);break;default:jl(t)}}function ju(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var s=0;s<a.length;s++){var l=a[s];$t=l,O0(l,t)}C0(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:er(8,a,a.return),ju(a);break;case 22:s=a.stateNode,s._visibility&2&&(s._visibility&=-3,ju(a));break;default:ju(a)}t=t.sibling}}function O0(t,a){for(;$t!==null;){var s=$t;switch(s.tag){case 0:case 11:case 15:er(8,s,a);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:vl(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,$t=l;else e:for(s=t;$t!==null;){l=$t;var f=l.sibling,p=l.return;if(_0(l),l===s){$t=null;break e}if(f!==null){f.return=p,$t=f;break e}$t=p}}}var p1={getCacheForType:function(t){var a=tn(Vt),s=a.data.get(t);return s===void 0&&(s=t(),a.data.set(t,s)),s},cacheSignal:function(){return tn(Vt).controller.signal}},m1=typeof WeakMap=="function"?WeakMap:Map,nt=0,pt=null,Be=null,qe=0,ot=0,jn=null,tr=!1,to=!1,Vh=!1,vi=0,Tt=0,nr=0,ls=0,Lh=0,Pn=0,no=0,Pl=null,_n=null,zh=!1,Pu=0,M0=0,Vu=1/0,Lu=null,ar=null,Ft=0,ir=null,ao=null,bi=0,Uh=0,Bh=null,D0=null,Vl=0,Hh=null;function Vn(){return(nt&2)!==0&&qe!==0?qe&-qe:X.T!==null?Yh():zc()}function k0(){if(Pn===0)if((qe&536870912)===0||Ye){var t=jr;jr<<=1,(jr&3932160)===0&&(jr=262144),Pn=t}else Pn=536870912;return t=Dn.current,t!==null&&(t.flags|=32),Pn}function En(t,a,s){(t===pt&&(ot===2||ot===9)||t.cancelPendingCommit!==null)&&(io(t,0),rr(t,qe,Pn,!1)),Pr(t,s),((nt&2)===0||t!==pt)&&(t===pt&&((nt&2)===0&&(ls|=s),Tt===4&&rr(t,qe,Pn,!1)),Ga(t))}function j0(t,a,s){if((nt&6)!==0)throw Error(r(327));var l=!s&&(a&127)===0&&(a&t.expiredLanes)===0||oa(t,a),f=l?v1(t,a):Fh(t,a,!0),p=l;do{if(f===0){to&&!l&&rr(t,a,0,!1);break}else{if(s=t.current.alternate,p&&!g1(s)){f=Fh(t,a,!1),p=!1;continue}if(f===2){if(p=a,t.errorRecoveryDisabledLanes&p)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){a=b;e:{var A=t;f=Pl;var M=A.current.memoizedState.isDehydrated;if(M&&(io(A,b).flags|=256),b=Fh(A,b,!1),b!==2){if(Vh&&!M){A.errorRecoveryDisabledLanes|=p,ls|=p,f=4;break e}p=_n,_n=f,p!==null&&(_n===null?_n=p:_n.push.apply(_n,p))}f=b}if(p=!1,f!==2)continue}}if(f===1){io(t,0),rr(t,a,0,!0);break}e:{switch(l=t,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:rr(l,a,Pn,!tr);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(f=Pu+300-mt(),10<f)){if(rr(l,a,Pn,!tr),Na(l,0,!0)!==0)break e;bi=a,l.timeoutHandle=fv(P0.bind(null,l,s,_n,Lu,zh,a,Pn,ls,no,tr,p,"Throttled",-0,0),f);break e}P0(l,s,_n,Lu,zh,a,Pn,ls,no,tr,p,null,-0,0)}}break}while(!0);Ga(t)}function P0(t,a,s,l,f,p,b,A,M,G,ee,ae,K,$){if(t.timeoutHandle=-1,ae=a.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ua},R0(a,p,ae);var ge=(p&62914560)===p?Pu-mt():(p&4194048)===p?M0-mt():0;if(ge=eS(ae,ge),ge!==null){bi=p,t.cancelPendingCommit=ge(F0.bind(null,t,a,p,s,l,f,b,A,M,ee,ae,null,K,$)),rr(t,p,b,!G);return}}F0(t,a,p,s,l,f,b,A,M)}function g1(t){for(var a=t;;){var s=a.tag;if((s===0||s===11||s===15)&&a.flags&16384&&(s=a.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var f=s[l],p=f.getSnapshot;f=f.value;try{if(!On(p(),f))return!1}catch{return!1}}if(s=a.child,a.subtreeFlags&16384&&s!==null)s.return=a,a=s;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function rr(t,a,s,l){a&=~Lh,a&=~ls,t.suspendedLanes|=a,t.pingedLanes&=~a,l&&(t.warmLanes|=a),l=t.expirationTimes;for(var f=a;0<f;){var p=31-Nt(f),b=1<<p;l[p]=-1,f&=~b}s!==0&&Vr(t,s,a)}function zu(){return(nt&6)===0?(Ll(0),!1):!0}function qh(){if(Be!==null){if(ot===0)var t=Be.return;else t=Be,li=Zr=null,rh(t),Ys=null,xl=0,t=Be;for(;t!==null;)h0(t.alternate,t),t=t.return;Be=null}}function io(t,a){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,P1(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),bi=0,qh(),pt=t,Be=s=si(t.current,null),qe=a,ot=0,jn=null,tr=!1,to=oa(t,a),Vh=!1,no=Pn=Lh=ls=nr=Tt=0,_n=Pl=null,zh=!1,(a&8)!==0&&(a|=a&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=a;0<l;){var f=31-Nt(l),p=1<<f;a|=t[f],l&=~p}return vi=a,su(),s}function V0(t,a){Ve=null,X.H=Rl,a===Ks||a===pu?(a=Zg(),ot=3):a===Kf?(a=Zg(),ot=4):ot=a===_h?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,jn=a,Be===null&&(Tt=1,Ru(t,Yn(a,t.current)))}function L0(){var t=Dn.current;return t===null?!0:(qe&4194048)===qe?Wn===null:(qe&62914560)===qe||(qe&536870912)!==0?t===Wn:!1}function z0(){var t=X.H;return X.H=Rl,t===null?Rl:t}function U0(){var t=X.A;return X.A=p1,t}function Uu(){Tt=4,tr||(qe&4194048)!==qe&&Dn.current!==null||(to=!0),(nr&134217727)===0&&(ls&134217727)===0||pt===null||rr(pt,qe,Pn,!1)}function Fh(t,a,s){var l=nt;nt|=2;var f=z0(),p=U0();(pt!==t||qe!==a)&&(Lu=null,io(t,a)),a=!1;var b=Tt;e:do try{if(ot!==0&&Be!==null){var A=Be,M=jn;switch(ot){case 8:qh(),b=6;break e;case 3:case 2:case 9:case 6:Dn.current===null&&(a=!0);var G=ot;if(ot=0,jn=null,ro(t,A,M,G),s&&to){b=0;break e}break;default:G=ot,ot=0,jn=null,ro(t,A,M,G)}}y1(),b=Tt;break}catch(ee){V0(t,ee)}while(!0);return a&&t.shellSuspendCounter++,li=Zr=null,nt=l,X.H=f,X.A=p,Be===null&&(pt=null,qe=0,su()),b}function y1(){for(;Be!==null;)B0(Be)}function v1(t,a){var s=nt;nt|=2;var l=z0(),f=U0();pt!==t||qe!==a?(Lu=null,Vu=mt()+500,io(t,a)):to=oa(t,a);e:do try{if(ot!==0&&Be!==null){a=Be;var p=jn;t:switch(ot){case 1:ot=0,jn=null,ro(t,a,p,1);break;case 2:case 9:if(Jg(p)){ot=0,jn=null,H0(a);break}a=function(){ot!==2&&ot!==9||pt!==t||(ot=7),Ga(t)},p.then(a,a);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:Jg(p)?(ot=0,jn=null,H0(a)):(ot=0,jn=null,ro(t,a,p,7));break;case 5:var b=null;switch(Be.tag){case 26:b=Be.memoizedState;case 5:case 27:var A=Be;if(b?Nv(b):A.stateNode.complete){ot=0,jn=null;var M=A.sibling;if(M!==null)Be=M;else{var G=A.return;G!==null?(Be=G,Bu(G)):Be=null}break t}}ot=0,jn=null,ro(t,a,p,5);break;case 6:ot=0,jn=null,ro(t,a,p,6);break;case 8:qh(),Tt=6;break e;default:throw Error(r(462))}}b1();break}catch(ee){V0(t,ee)}while(!0);return li=Zr=null,X.H=l,X.A=f,nt=s,Be!==null?0:(pt=null,qe=0,su(),Tt)}function b1(){for(;Be!==null&&!Qo();)B0(Be)}function B0(t){var a=d0(t.alternate,t,vi);t.memoizedProps=t.pendingProps,a===null?Bu(t):Be=a}function H0(t){var a=t,s=a.alternate;switch(a.tag){case 15:case 0:a=r0(s,a,a.pendingProps,a.type,void 0,qe);break;case 11:a=r0(s,a,a.pendingProps,a.type.render,a.ref,qe);break;case 5:rh(a);default:h0(s,a),a=Be=Ug(a,vi),a=d0(s,a,vi)}t.memoizedProps=t.pendingProps,a===null?Bu(t):Be=a}function ro(t,a,s,l){li=Zr=null,rh(a),Ys=null,xl=0;var f=a.return;try{if(o1(t,f,a,s,qe)){Tt=1,Ru(t,Yn(s,t.current)),Be=null;return}}catch(p){if(f!==null)throw Be=f,p;Tt=1,Ru(t,Yn(s,t.current)),Be=null;return}a.flags&32768?(Ye||l===1?t=!0:to||(qe&536870912)!==0?t=!1:(tr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Dn.current,l!==null&&l.tag===13&&(l.flags|=16384))),q0(a,t)):Bu(a)}function Bu(t){var a=t;do{if((a.flags&32768)!==0){q0(a,tr);return}t=a.return;var s=u1(a.alternate,a,vi);if(s!==null){Be=s;return}if(a=a.sibling,a!==null){Be=a;return}Be=a=t}while(a!==null);Tt===0&&(Tt=5)}function q0(t,a){do{var s=d1(t.alternate,t);if(s!==null){s.flags&=32767,Be=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!a&&(t=t.sibling,t!==null)){Be=t;return}Be=t=s}while(t!==null);Tt=6,Be=null}function F0(t,a,s,l,f,p,b,A,M){t.cancelPendingCommit=null;do Hu();while(Ft!==0);if((nt&6)!==0)throw Error(r(327));if(a!==null){if(a===t.current)throw Error(r(177));if(p=a.lanes|a.childLanes,p|=Mf,Af(t,s,p,b,A,M),t===pt&&(Be=pt=null,qe=0),ao=a,ir=t,bi=s,Uh=p,Bh=f,D0=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,A1(ji,function(){return $0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,f=le.p,le.p=2,b=nt,nt|=4;try{f1(t,a,s)}finally{nt=b,le.p=f,X.T=l}}Ft=1,G0(),Q0(),K0()}}function G0(){if(Ft===1){Ft=0;var t=ir,a=ao,s=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||s){s=X.T,X.T=null;var l=le.p;le.p=2;var f=nt;nt|=4;try{T0(a,t);var p=np,b=Og(t.containerInfo),A=p.focusedElem,M=p.selectionRange;if(b!==A&&A&&A.ownerDocument&&Ig(A.ownerDocument.documentElement,A)){if(M!==null&&Nf(A)){var G=M.start,ee=M.end;if(ee===void 0&&(ee=G),"selectionStart"in A)A.selectionStart=G,A.selectionEnd=Math.min(ee,A.value.length);else{var ae=A.ownerDocument||document,K=ae&&ae.defaultView||window;if(K.getSelection){var $=K.getSelection(),ge=A.textContent.length,Re=Math.min(M.start,ge),ht=M.end===void 0?Re:Math.min(M.end,ge);!$.extend&&Re>ht&&(b=ht,ht=Re,Re=b);var U=Cg(A,Re),V=Cg(A,ht);if(U&&V&&($.rangeCount!==1||$.anchorNode!==U.node||$.anchorOffset!==U.offset||$.focusNode!==V.node||$.focusOffset!==V.offset)){var F=ae.createRange();F.setStart(U.node,U.offset),$.removeAllRanges(),Re>ht?($.addRange(F),$.extend(V.node,V.offset)):(F.setEnd(V.node,V.offset),$.addRange(F))}}}}for(ae=[],$=A;$=$.parentNode;)$.nodeType===1&&ae.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ae.length;A++){var te=ae[A];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}ed=!!tp,np=tp=null}finally{nt=f,le.p=l,X.T=s}}t.current=a,Ft=2}}function Q0(){if(Ft===2){Ft=0;var t=ir,a=ao,s=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||s){s=X.T,X.T=null;var l=le.p;le.p=2;var f=nt;nt|=4;try{x0(t,a.alternate,a)}finally{nt=f,le.p=l,X.T=s}}Ft=3}}function K0(){if(Ft===4||Ft===3){Ft=0,Bn();var t=ir,a=ao,s=bi,l=D0;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ft=5:(Ft=0,ao=ir=null,Y0(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(ar=null),ni(s),a=a.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(sa,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=X.T,f=le.p,le.p=2,X.T=null;try{for(var p=t.onRecoverableError,b=0;b<l.length;b++){var A=l[b];p(A.value,{componentStack:A.stack})}}finally{X.T=a,le.p=f}}(bi&3)!==0&&Hu(),Ga(t),f=t.pendingLanes,(s&261930)!==0&&(f&42)!==0?t===Hh?Vl++:(Vl=0,Hh=t):Vl=0,Ll(0)}}function Y0(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,vl(a)))}function Hu(){return G0(),Q0(),K0(),$0()}function $0(){if(Ft!==5)return!1;var t=ir,a=Uh;Uh=0;var s=ni(bi),l=X.T,f=le.p;try{le.p=32>s?32:s,X.T=null,s=Bh,Bh=null;var p=ir,b=bi;if(Ft=0,ao=ir=null,bi=0,(nt&6)!==0)throw Error(r(331));var A=nt;if(nt|=4,I0(p.current),N0(p,p.current,b,s),nt=A,Ll(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(sa,p)}catch{}return!0}finally{le.p=f,X.T=l,Y0(t,a)}}function X0(t,a,s){a=Yn(s,a),a=xh(t.stateNode,a,2),t=Ji(t,a,2),t!==null&&(Pr(t,2),Ga(t))}function lt(t,a,s){if(t.tag===3)X0(t,t,s);else for(;a!==null;){if(a.tag===3){X0(a,t,s);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ar===null||!ar.has(l))){t=Yn(s,t),s=Jy(2),l=Ji(a,s,2),l!==null&&(Wy(s,l,a,t),Pr(l,2),Ga(l));break}}a=a.return}}function Gh(t,a,s){var l=t.pingCache;if(l===null){l=t.pingCache=new m1;var f=new Set;l.set(a,f)}else f=l.get(a),f===void 0&&(f=new Set,l.set(a,f));f.has(s)||(Vh=!0,f.add(s),t=x1.bind(null,t,a,s),a.then(t,t))}function x1(t,a,s){var l=t.pingCache;l!==null&&l.delete(a),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,pt===t&&(qe&s)===s&&(Tt===4||Tt===3&&(qe&62914560)===qe&&300>mt()-Pu?(nt&2)===0&&io(t,0):Lh|=s,no===qe&&(no=0)),Ga(t)}function J0(t,a){a===0&&(a=Lc()),t=Xr(t,a),t!==null&&(Pr(t,a),Ga(t))}function _1(t){var a=t.memoizedState,s=0;a!==null&&(s=a.retryLane),J0(t,s)}function E1(t,a){var s=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(s=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(a),J0(t,s)}function A1(t,a){return ct(t,a)}var qu=null,so=null,Qh=!1,Fu=!1,Kh=!1,sr=0;function Ga(t){t!==so&&t.next===null&&(so===null?qu=so=t:so=so.next=t),Fu=!0,Qh||(Qh=!0,T1())}function Ll(t,a){if(!Kh&&Fu){Kh=!0;do for(var s=!1,l=qu;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var b=l.suspendedLanes,A=l.pingedLanes;p=(1<<31-Nt(42|t)+1)-1,p&=f&~(b&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(s=!0,tv(l,p))}else p=qe,p=Na(l,l===pt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||oa(l,p)||(s=!0,tv(l,p));l=l.next}while(s);Kh=!1}}function S1(){W0()}function W0(){Fu=Qh=!1;var t=0;sr!==0&&j1()&&(t=sr);for(var a=mt(),s=null,l=qu;l!==null;){var f=l.next,p=Z0(l,a);p===0?(l.next=null,s===null?qu=f:s.next=f,f===null&&(so=s)):(s=l,(t!==0||(p&3)!==0)&&(Fu=!0)),l=f}Ft!==0&&Ft!==5||Ll(t),sr!==0&&(sr=0)}function Z0(t,a){for(var s=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var b=31-Nt(p),A=1<<b,M=f[b];M===-1?((A&s)===0||(A&l)!==0)&&(f[b]=Ef(A,a)):M<=a&&(t.expiredLanes|=A),p&=~A}if(a=pt,s=qe,s=Na(t,t===a?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===a&&(ot===2||ot===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Aa(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||oa(t,s)){if(a=s&-s,a===t.callbackPriority)return a;switch(l!==null&&Aa(l),ni(s)){case 2:case 8:s=Yo;break;case 32:s=ji;break;case 268435456:s=Dc;break;default:s=ji}return l=ev.bind(null,t),s=ct(s,l),t.callbackPriority=a,t.callbackNode=s,a}return l!==null&&l!==null&&Aa(l),t.callbackPriority=2,t.callbackNode=null,2}function ev(t,a){if(Ft!==0&&Ft!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Hu()&&t.callbackNode!==s)return null;var l=qe;return l=Na(t,t===pt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(j0(t,l,a),Z0(t,mt()),t.callbackNode!=null&&t.callbackNode===s?ev.bind(null,t):null)}function tv(t,a){if(Hu())return null;j0(t,a,!0)}function T1(){V1(function(){(nt&6)!==0?ct(Ko,S1):W0()})}function Yh(){if(sr===0){var t=Gs;t===0&&(t=Ta,Ta<<=1,(Ta&261888)===0&&(Ta=256)),sr=t}return sr}function nv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Is(""+t)}function av(t,a){var s=a.ownerDocument.createElement("input");return s.name=a.name,s.value=a.value,t.id&&s.setAttribute("form",t.id),a.parentNode.insertBefore(s,a),t=new FormData(t),s.parentNode.removeChild(s),t}function w1(t,a,s,l,f){if(a==="submit"&&s&&s.stateNode===f){var p=nv((f[Kt]||null).action),b=l.submitter;b&&(a=(a=b[Kt]||null)?nv(a.formAction):b.getAttribute("formAction"),a!==null&&(p=a,b=null));var A=new La("action","action",null,l,f);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(sr!==0){var M=b?av(f,b):new FormData(f);ph(s,{pending:!0,data:M,method:f.method,action:p},null,M)}}else typeof p=="function"&&(A.preventDefault(),M=b?av(f,b):new FormData(f),ph(s,{pending:!0,data:M,method:f.method,action:p},p,M))},currentTarget:f}]})}}for(var $h=0;$h<Of.length;$h++){var Xh=Of[$h],N1=Xh.toLowerCase(),R1=Xh[0].toUpperCase()+Xh.slice(1);ma(N1,"on"+R1)}ma(kg,"onAnimationEnd"),ma(jg,"onAnimationIteration"),ma(Pg,"onAnimationStart"),ma("dblclick","onDoubleClick"),ma("focusin","onFocus"),ma("focusout","onBlur"),ma(FA,"onTransitionRun"),ma(GA,"onTransitionStart"),ma(QA,"onTransitionCancel"),ma(Vg,"onTransitionEnd"),ka("onMouseEnter",["mouseout","mouseover"]),ka("onMouseLeave",["mouseout","mouseover"]),ka("onPointerEnter",["pointerout","pointerover"]),ka("onPointerLeave",["pointerout","pointerover"]),Da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Da("onBeforeInput",["compositionend","keypress","textInput","paste"]),Da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function iv(t,a){a=(a&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],f=l.event;l=l.listeners;e:{var p=void 0;if(a)for(var b=l.length-1;0<=b;b--){var A=l[b],M=A.instance,G=A.currentTarget;if(A=A.listener,M!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=G;try{p(f)}catch(ee){ru(ee)}f.currentTarget=null,p=M}else for(b=0;b<l.length;b++){if(A=l[b],M=A.instance,G=A.currentTarget,A=A.listener,M!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=G;try{p(f)}catch(ee){ru(ee)}f.currentTarget=null,p=M}}}}function He(t,a){var s=a[Ts];s===void 0&&(s=a[Ts]=new Set);var l=t+"__bubble";s.has(l)||(rv(a,t,2,!1),s.add(l))}function Jh(t,a,s){var l=0;a&&(l|=4),rv(s,t,l,a)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function Wh(t){if(!t[Gu]){t[Gu]=!0,Jo.forEach(function(s){s!=="selectionchange"&&(C1.has(s)||Jh(s,!1,t),Jh(s,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Gu]||(a[Gu]=!0,Jh("selectionchange",!1,a))}}function rv(t,a,s,l){switch(kv(a)){case 2:var f=aS;break;case 8:f=iS;break;default:f=hp}s=f.bind(null,a,s,t),f=void 0,!Hr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(a,s,{capture:!0,passive:f}):t.addEventListener(a,s,!0):f!==void 0?t.addEventListener(a,s,{passive:f}):t.addEventListener(a,s,!1)}function Zh(t,a,s,l,f){var p=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var A=l.stateNode.containerInfo;if(A===f)break;if(b===4)for(b=l.return;b!==null;){var M=b.tag;if((M===3||M===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;A!==null;){if(b=Oa(A),b===null)return;if(M=b.tag,M===5||M===6||M===26||M===27){l=p=b;continue e}A=A.parentNode}}l=l.return}Bi(function(){var G=p,ee=Fn(s),ae=[];e:{var K=Lg.get(t);if(K!==void 0){var $=La,ge=t;switch(t){case"keypress":if(Fr(s)===0)break e;case"keydown":case"keyup":$=nu;break;case"focusin":ge="focus",$=Qr;break;case"focusout":ge="blur",$=Qr;break;case"beforeblur":case"afterblur":$=Qr;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Kc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=v;break;case kg:case jg:case Pg:$=$c;break;case Vg:$=S;break;case"scroll":case"scrollend":$=cl;break;case"wheel":$=Y;break;case"copy":case"cut":case"paste":$=Xc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=ri;break;case"toggle":case"beforetoggle":$=Pe}var Re=(a&4)!==0,ht=!Re&&(t==="scroll"||t==="scrollend"),U=Re?K!==null?K+"Capture":null:K;Re=[];for(var V=G,F;V!==null;){var te=V;if(F=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||F===null||U===null||(te=da(V,U),te!=null&&Re.push(Ul(V,te,F))),ht)break;V=V.return}0<Re.length&&(K=new $(K,ge,null,s,ee),ae.push({event:K,listeners:Re}))}}if((a&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",$=t==="mouseout"||t==="pointerout",K&&s!==sl&&(ge=s.relatedTarget||s.fromElement)&&(Oa(ge)||ge[Ca]))break e;if(($||K)&&(K=ee.window===ee?ee:(K=ee.ownerDocument)?K.defaultView||K.parentWindow:window,$?(ge=s.relatedTarget||s.toElement,$=G,ge=ge?Oa(ge):null,ge!==null&&(ht=c(ge),Re=ge.tag,ge!==ht||Re!==5&&Re!==27&&Re!==6)&&(ge=null)):($=null,ge=G),$!==ge)){if(Re=ul,te="onMouseLeave",U="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Re=ri,te="onPointerLeave",U="onPointerEnter",V="pointer"),ht=$==null?K:Cn($),F=ge==null?K:Cn(ge),K=new Re(te,V+"leave",$,s,ee),K.target=ht,K.relatedTarget=F,te=null,Oa(ee)===G&&(Re=new Re(U,V+"enter",ge,s,ee),Re.target=F,Re.relatedTarget=ht,te=Re),ht=te,$&&ge)t:{for(Re=I1,U=$,V=ge,F=0,te=U;te;te=Re(te))F++;te=0;for(var Te=V;Te;Te=Re(Te))te++;for(;0<F-te;)U=Re(U),F--;for(;0<te-F;)V=Re(V),te--;for(;F--;){if(U===V||V!==null&&U===V.alternate){Re=U;break t}U=Re(U),V=Re(V)}Re=null}else Re=null;$!==null&&sv(ae,K,$,Re,!1),ge!==null&&ht!==null&&sv(ae,ht,ge,Re,!0)}}e:{if(K=G?Cn(G):window,$=K.nodeName&&K.nodeName.toLowerCase(),$==="select"||$==="input"&&K.type==="file")var We=Ag;else if(_g(K))if(Sg)We=BA;else{We=zA;var xe=LA}else $=K.nodeName,!$||$.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&Cs(G.elementType)&&(We=Ag):We=UA;if(We&&(We=We(t,G))){Eg(ae,We,s,ee);break e}xe&&xe(t,K,G),t==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&al(K,"number",K.value)}switch(xe=G?Cn(G):window,t){case"focusin":(_g(xe)||xe.contentEditable==="true")&&(Vs=xe,Rf=G,ml=null);break;case"focusout":ml=Rf=Vs=null;break;case"mousedown":Cf=!0;break;case"contextmenu":case"mouseup":case"dragend":Cf=!1,Mg(ae,s,ee);break;case"selectionchange":if(qA)break;case"keydown":case"keyup":Mg(ae,s,ee)}var Le;if(tt)e:{switch(t){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Ps?Kr(t,s)&&(Fe="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Fe="onCompositionStart");Fe&&(Ba&&s.locale!=="ko"&&(Ps||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Ps&&(Le=ll()):(Va=ee,ol="value"in Va?Va.value:Va.textContent,Ps=!0)),xe=Qu(G,Fe),0<xe.length&&(Fe=new Ua(Fe,t,null,s,ee),ae.push({event:Fe,listeners:xe}),Le?Fe.data=Le:(Le=js(s),Le!==null&&(Fe.data=Le)))),(Le=Qn?kA(t,s):jA(t,s))&&(Fe=Qu(G,"onBeforeInput"),0<Fe.length&&(xe=new Ua("onBeforeInput","beforeinput",null,s,ee),ae.push({event:xe,listeners:Fe}),xe.data=Le)),w1(ae,t,G,s,ee)}iv(ae,a)})}function Ul(t,a,s){return{instance:t,listener:a,currentTarget:s}}function Qu(t,a){for(var s=a+"Capture",l=[];t!==null;){var f=t,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=da(t,s),f!=null&&l.unshift(Ul(t,f,p)),f=da(t,a),f!=null&&l.push(Ul(t,f,p))),t.tag===3)return l;t=t.return}return[]}function I1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function sv(t,a,s,l,f){for(var p=a._reactName,b=[];s!==null&&s!==l;){var A=s,M=A.alternate,G=A.stateNode;if(A=A.tag,M!==null&&M===l)break;A!==5&&A!==26&&A!==27||G===null||(M=G,f?(G=da(s,p),G!=null&&b.unshift(Ul(s,G,M))):f||(G=da(s,p),G!=null&&b.push(Ul(s,G,M)))),s=s.return}b.length!==0&&t.push({event:a,listeners:b})}var O1=/\r\n?/g,M1=/\u0000|\uFFFD/g;function ov(t){return(typeof t=="string"?t:""+t).replace(O1,`
`).replace(M1,"")}function lv(t,a){return a=ov(a),ov(t)===a}function ft(t,a,s,l,f,p){switch(s){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||yn(t,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&yn(t,""+l);break;case"className":In(t,"class",l);break;case"tabIndex":In(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":In(t,s,l);break;case"style":rl(t,l,p);break;case"data":if(a!=="object"){In(t,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Is(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(s==="formAction"?(a!=="input"&&ft(t,a,"name",f.name,f,null),ft(t,a,"formEncType",f.formEncType,f,null),ft(t,a,"formMethod",f.formMethod,f,null),ft(t,a,"formTarget",f.formTarget,f,null)):(ft(t,a,"encType",f.encType,f,null),ft(t,a,"method",f.method,f,null),ft(t,a,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Is(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=ua);break;case"onScroll":l!=null&&He("scroll",t);break;case"onScrollEnd":l!=null&&He("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(s=l.__html,s!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=Is(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":He("beforetoggle",t),He("toggle",t),Ns(t,"popover",l);break;case"xlinkActuate":Pt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Pt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Pt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Pt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Pt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Pt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Pt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Pt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Pt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ns(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Qc.get(s)||s,Ns(t,s,l))}}function ep(t,a,s,l,f,p){switch(s){case"style":rl(t,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(s=l.__html,s!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=s}}break;case"children":typeof l=="string"?yn(t,l):(typeof l=="number"||typeof l=="bigint")&&yn(t,""+l);break;case"onScroll":l!=null&&He("scroll",t);break;case"onScrollEnd":l!=null&&He("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ua);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wo.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),a=s.slice(2,f?s.length-7:void 0),p=t[Kt]||null,p=p!=null?p[s]:null,typeof p=="function"&&t.removeEventListener(a,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(a,l,f);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):Ns(t,s,l)}}}function an(t,a,s){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",t),He("load",t);var l=!1,f=!1,p;for(p in s)if(s.hasOwnProperty(p)){var b=s[p];if(b!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:ft(t,a,p,b,s,null)}}f&&ft(t,a,"srcSet",s.srcSet,s,null),l&&ft(t,a,"src",s.src,s,null);return;case"input":He("invalid",t);var A=p=b=f=null,M=null,G=null;for(l in s)if(s.hasOwnProperty(l)){var ee=s[l];if(ee!=null)switch(l){case"name":f=ee;break;case"type":b=ee;break;case"checked":M=ee;break;case"defaultChecked":G=ee;break;case"value":p=ee;break;case"defaultValue":A=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,a));break;default:ft(t,a,l,ee,s,null)}}qc(t,p,A,M,G,b,f,!1);return;case"select":He("invalid",t),l=b=p=null;for(f in s)if(s.hasOwnProperty(f)&&(A=s[f],A!=null))switch(f){case"value":p=A;break;case"defaultValue":b=A;break;case"multiple":l=A;default:ft(t,a,f,A,s,null)}a=p,s=b,t.multiple=!!l,a!=null?Vi(t,!!l,a,!1):s!=null&&Vi(t,!!l,s,!0);return;case"textarea":He("invalid",t),p=f=l=null;for(b in s)if(s.hasOwnProperty(b)&&(A=s[b],A!=null))switch(b){case"value":l=A;break;case"defaultValue":f=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:ft(t,a,b,A,s,null)}Li(t,l,f,p);return;case"option":for(M in s)s.hasOwnProperty(M)&&(l=s[M],l!=null)&&(M==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":ft(t,a,M,l,s,null));return;case"dialog":He("beforetoggle",t),He("toggle",t),He("cancel",t),He("close",t);break;case"iframe":case"object":He("load",t);break;case"video":case"audio":for(l=0;l<zl.length;l++)He(zl[l],t);break;case"image":He("error",t),He("load",t);break;case"details":He("toggle",t);break;case"embed":case"source":case"link":He("error",t),He("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in s)if(s.hasOwnProperty(G)&&(l=s[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:ft(t,a,G,l,s,null)}return;default:if(Cs(a)){for(ee in s)s.hasOwnProperty(ee)&&(l=s[ee],l!==void 0&&ep(t,a,ee,l,s,void 0));return}}for(A in s)s.hasOwnProperty(A)&&(l=s[A],l!=null&&ft(t,a,A,l,s,null))}function D1(t,a,s,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,b=null,A=null,M=null,G=null,ee=null;for($ in s){var ae=s[$];if(s.hasOwnProperty($)&&ae!=null)switch($){case"checked":break;case"value":break;case"defaultValue":M=ae;default:l.hasOwnProperty($)||ft(t,a,$,null,l,ae)}}for(var K in l){var $=l[K];if(ae=s[K],l.hasOwnProperty(K)&&($!=null||ae!=null))switch(K){case"type":p=$;break;case"name":f=$;break;case"checked":G=$;break;case"defaultChecked":ee=$;break;case"value":b=$;break;case"defaultValue":A=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,a));break;default:$!==ae&&ft(t,a,K,$,l,ae)}}Rs(t,b,A,M,G,ee,p,f);return;case"select":$=b=A=K=null;for(p in s)if(M=s[p],s.hasOwnProperty(p)&&M!=null)switch(p){case"value":break;case"multiple":$=M;default:l.hasOwnProperty(p)||ft(t,a,p,null,l,M)}for(f in l)if(p=l[f],M=s[f],l.hasOwnProperty(f)&&(p!=null||M!=null))switch(f){case"value":K=p;break;case"defaultValue":A=p;break;case"multiple":b=p;default:p!==M&&ft(t,a,f,p,l,M)}a=A,s=b,l=$,K!=null?Vi(t,!!s,K,!1):!!l!=!!s&&(a!=null?Vi(t,!!s,a,!0):Vi(t,!!s,s?[]:"",!1));return;case"textarea":$=K=null;for(A in s)if(f=s[A],s.hasOwnProperty(A)&&f!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ft(t,a,A,null,l,f)}for(b in l)if(f=l[b],p=s[b],l.hasOwnProperty(b)&&(f!=null||p!=null))switch(b){case"value":K=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&ft(t,a,b,f,l,p)}Fc(t,K,$);return;case"option":for(var ge in s)K=s[ge],s.hasOwnProperty(ge)&&K!=null&&!l.hasOwnProperty(ge)&&(ge==="selected"?t.selected=!1:ft(t,a,ge,null,l,K));for(M in l)K=l[M],$=s[M],l.hasOwnProperty(M)&&K!==$&&(K!=null||$!=null)&&(M==="selected"?t.selected=K&&typeof K!="function"&&typeof K!="symbol":ft(t,a,M,K,l,$));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in s)K=s[Re],s.hasOwnProperty(Re)&&K!=null&&!l.hasOwnProperty(Re)&&ft(t,a,Re,null,l,K);for(G in l)if(K=l[G],$=s[G],l.hasOwnProperty(G)&&K!==$&&(K!=null||$!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,a));break;default:ft(t,a,G,K,l,$)}return;default:if(Cs(a)){for(var ht in s)K=s[ht],s.hasOwnProperty(ht)&&K!==void 0&&!l.hasOwnProperty(ht)&&ep(t,a,ht,void 0,l,K);for(ee in l)K=l[ee],$=s[ee],!l.hasOwnProperty(ee)||K===$||K===void 0&&$===void 0||ep(t,a,ee,K,l,$);return}}for(var U in s)K=s[U],s.hasOwnProperty(U)&&K!=null&&!l.hasOwnProperty(U)&&ft(t,a,U,null,l,K);for(ae in l)K=l[ae],$=s[ae],!l.hasOwnProperty(ae)||K===$||K==null&&$==null||ft(t,a,ae,K,l,$)}function cv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function k1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var f=s[l],p=f.transferSize,b=f.initiatorType,A=f.duration;if(p&&A&&cv(b)){for(b=0,A=f.responseEnd,l+=1;l<s.length;l++){var M=s[l],G=M.startTime;if(G>A)break;var ee=M.transferSize,ae=M.initiatorType;ee&&cv(ae)&&(M=M.responseEnd,b+=ee*(M<A?1:(A-G)/(M-G)))}if(--l,a+=8*(p+b)/(f.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var tp=null,np=null;function Ku(t){return t.nodeType===9?t:t.ownerDocument}function uv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dv(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function ap(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var ip=null;function j1(){var t=window.event;return t&&t.type==="popstate"?t===ip?!1:(ip=t,!0):(ip=null,!1)}var fv=typeof setTimeout=="function"?setTimeout:void 0,P1=typeof clearTimeout=="function"?clearTimeout:void 0,hv=typeof Promise=="function"?Promise:void 0,V1=typeof queueMicrotask=="function"?queueMicrotask:typeof hv<"u"?function(t){return hv.resolve(null).then(t).catch(L1)}:fv;function L1(t){setTimeout(function(){throw t})}function or(t){return t==="head"}function pv(t,a){var s=a,l=0;do{var f=s.nextSibling;if(t.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"||s==="/&"){if(l===0){t.removeChild(f),uo(a);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")Bl(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,Bl(s);for(var p=s.firstChild;p;){var b=p.nextSibling,A=p.nodeName;p[Ia]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&p.rel.toLowerCase()==="stylesheet"||s.removeChild(p),p=b}}else s==="body"&&Bl(t.ownerDocument.body);s=f}while(s);uo(a)}function mv(t,a){var s=t;t=0;do{var l=s.nextSibling;if(s.nodeType===1?a?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(a?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=l}while(s)}function rp(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var s=a;switch(a=a.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":rp(s),ws(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function z1(t,a,s,l){for(;t.nodeType===1;){var f=s;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ia])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=Zn(t.nextSibling),t===null)break}return null}function U1(t,a,s){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Zn(t.nextSibling),t===null))return null;return t}function gv(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Zn(t.nextSibling),t===null))return null;return t}function sp(t){return t.data==="$?"||t.data==="$~"}function op(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function B1(t,a){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||s.readyState!=="loading")a();else{var l=function(){a(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Zn(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var lp=null;function yv(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(a===0)return Zn(t.nextSibling);a--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||a++}t=t.nextSibling}return null}function vv(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(a===0)return t;a--}else s!=="/$"&&s!=="/&"||a++}t=t.previousSibling}return null}function bv(t,a,s){switch(a=Ku(s),t){case"html":if(t=a.documentElement,!t)throw Error(r(452));return t;case"head":if(t=a.head,!t)throw Error(r(453));return t;case"body":if(t=a.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Bl(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);ws(t)}var ea=new Map,xv=new Set;function Yu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var xi=le.d;le.d={f:H1,r:q1,D:F1,C:G1,L:Q1,m:K1,X:$1,S:Y1,M:X1};function H1(){var t=xi.f(),a=zu();return t||a}function q1(t){var a=qn(t);a!==null&&a.tag===5&&a.type==="form"?Vy(a):xi.r(t)}var oo=typeof document>"u"?null:document;function _v(t,a,s){var l=oo;if(l&&typeof a=="string"&&a){var f=gn(a);f='link[rel="'+t+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),xv.has(f)||(xv.add(f),t={rel:t,crossOrigin:s,href:a},l.querySelector(f)===null&&(a=l.createElement("link"),an(a,"link",t),jt(a),l.head.appendChild(a)))}}function F1(t){xi.D(t),_v("dns-prefetch",t,null)}function G1(t,a){xi.C(t,a),_v("preconnect",t,a)}function Q1(t,a,s){xi.L(t,a,s);var l=oo;if(l&&t&&a){var f='link[rel="preload"][as="'+gn(a)+'"]';a==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+gn(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+gn(s.imageSizes)+'"]')):f+='[href="'+gn(t)+'"]';var p=f;switch(a){case"style":p=lo(t);break;case"script":p=co(t)}ea.has(p)||(t=E({rel:"preload",href:a==="image"&&s&&s.imageSrcSet?void 0:t,as:a},s),ea.set(p,t),l.querySelector(f)!==null||a==="style"&&l.querySelector(Hl(p))||a==="script"&&l.querySelector(ql(p))||(a=l.createElement("link"),an(a,"link",t),jt(a),l.head.appendChild(a)))}}function K1(t,a){xi.m(t,a);var s=oo;if(s&&t){var l=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+gn(l)+'"][href="'+gn(t)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=co(t)}if(!ea.has(p)&&(t=E({rel:"modulepreload",href:t},a),ea.set(p,t),s.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(ql(p)))return}l=s.createElement("link"),an(l,"link",t),jt(l),s.head.appendChild(l)}}}function Y1(t,a,s){xi.S(t,a,s);var l=oo;if(l&&t){var f=Ma(l).hoistableStyles,p=lo(t);a=a||"default";var b=f.get(p);if(!b){var A={loading:0,preload:null};if(b=l.querySelector(Hl(p)))A.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":a},s),(s=ea.get(p))&&cp(t,s);var M=b=l.createElement("link");jt(M),an(M,"link",t),M._p=new Promise(function(G,ee){M.onload=G,M.onerror=ee}),M.addEventListener("load",function(){A.loading|=1}),M.addEventListener("error",function(){A.loading|=2}),A.loading|=4,$u(b,a,l)}b={type:"stylesheet",instance:b,count:1,state:A},f.set(p,b)}}}function $1(t,a){xi.X(t,a);var s=oo;if(s&&t){var l=Ma(s).hoistableScripts,f=co(t),p=l.get(f);p||(p=s.querySelector(ql(f)),p||(t=E({src:t,async:!0},a),(a=ea.get(f))&&up(t,a),p=s.createElement("script"),jt(p),an(p,"link",t),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function X1(t,a){xi.M(t,a);var s=oo;if(s&&t){var l=Ma(s).hoistableScripts,f=co(t),p=l.get(f);p||(p=s.querySelector(ql(f)),p||(t=E({src:t,async:!0,type:"module"},a),(a=ea.get(f))&&up(t,a),p=s.createElement("script"),jt(p),an(p,"link",t),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function Ev(t,a,s,l){var f=(f=Ne.current)?Yu(f):null;if(!f)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(a=lo(s.href),s=Ma(f).hoistableStyles,l=s.get(a),l||(l={type:"style",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=lo(s.href);var p=Ma(f).hoistableStyles,b=p.get(t);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,b),(p=f.querySelector(Hl(t)))&&!p._p&&(b.instance=p,b.state.loading=5),ea.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ea.set(t,s),p||J1(f,t,s,b.state))),a&&l===null)throw Error(r(528,""));return b}if(a&&l!==null)throw Error(r(529,""));return null;case"script":return a=s.async,s=s.src,typeof s=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=co(s),s=Ma(f).hoistableScripts,l=s.get(a),l||(l={type:"script",instance:null,count:0,state:null},s.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function lo(t){return'href="'+gn(t)+'"'}function Hl(t){return'link[rel="stylesheet"]['+t+"]"}function Av(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function J1(t,a,s,l){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=t.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),an(a,"link",s),jt(a),t.head.appendChild(a))}function co(t){return'[src="'+gn(t)+'"]'}function ql(t){return"script[async]"+t}function Sv(t,a,s){if(a.count++,a.instance===null)switch(a.type){case"style":var l=t.querySelector('style[data-href~="'+gn(s.href)+'"]');if(l)return a.instance=l,jt(l),l;var f=E({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),jt(l),an(l,"style",f),$u(l,s.precedence,t),a.instance=l;case"stylesheet":f=lo(s.href);var p=t.querySelector(Hl(f));if(p)return a.state.loading|=4,a.instance=p,jt(p),p;l=Av(s),(f=ea.get(f))&&cp(l,f),p=(t.ownerDocument||t).createElement("link"),jt(p);var b=p;return b._p=new Promise(function(A,M){b.onload=A,b.onerror=M}),an(p,"link",l),a.state.loading|=4,$u(p,s.precedence,t),a.instance=p;case"script":return p=co(s.src),(f=t.querySelector(ql(p)))?(a.instance=f,jt(f),f):(l=s,(f=ea.get(p))&&(l=E({},s),up(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),jt(f),an(f,"link",l),t.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,$u(l,s.precedence,t));return a.instance}function $u(t,a,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,b=0;b<l.length;b++){var A=l[b];if(A.dataset.precedence===a)p=A;else if(p!==f)break}p?p.parentNode.insertBefore(t,p.nextSibling):(a=s.nodeType===9?s.head:s,a.insertBefore(t,a.firstChild))}function cp(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function up(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Xu=null;function Tv(t,a,s){if(Xu===null){var l=new Map,f=Xu=new Map;f.set(s,l)}else f=Xu,l=f.get(s),l||(l=new Map,f.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),f=0;f<s.length;f++){var p=s[f];if(!(p[Ia]||p[kt]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var b=p.getAttribute(a)||"";b=t+b;var A=l.get(b);A?A.push(p):l.set(b,[p])}}return l}function wv(t,a,s){t=t.ownerDocument||t,t.head.insertBefore(s,a==="title"?t.querySelector("head > title"):null)}function W1(t,a,s){if(s===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Nv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Z1(t,a,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=lo(l.href),p=a.querySelector(Hl(f));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Ju.bind(t),a.then(t,t)),s.state.loading|=4,s.instance=p,jt(p);return}p=a.ownerDocument||a,l=Av(l),(f=ea.get(f))&&cp(l,f),p=p.createElement("link"),jt(p);var b=p;b._p=new Promise(function(A,M){b.onload=A,b.onerror=M}),an(p,"link",l),s.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,a),(a=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=Ju.bind(t),a.addEventListener("load",s),a.addEventListener("error",s))}}var dp=0;function eS(t,a){return t.stylesheets&&t.count===0&&Zu(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var l=setTimeout(function(){if(t.stylesheets&&Zu(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+a);0<t.imgBytes&&dp===0&&(dp=62500*k1());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Zu(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>dp?50:800)+a);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Ju(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Wu=null;function Zu(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Wu=new Map,a.forEach(tS,t),Wu=null,Ju.call(t))}function tS(t,a){if(!(a.state.loading&4)){var s=Wu.get(t);if(s)var l=s.get(null);else{s=new Map,Wu.set(t,s);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var b=f[p];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(s.set(b.dataset.precedence,b),l=b)}l&&s.set(null,l)}f=a.instance,b=f.getAttribute("data-precedence"),p=s.get(b)||l,p===l&&s.set(null,f),s.set(b,f),this.count++,l=Ju.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),a.state.loading|=4}}var Fl={$$typeof:se,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function nS(t,a,s,l,f,p,b,A,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ra(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ra(0),this.hiddenUpdates=Ra(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Rv(t,a,s,l,f,p,b,A,M,G,ee,ae){return t=new nS(t,a,s,b,M,G,ee,ae,A),a=1,p===!0&&(a|=24),p=Mn(3,null,null,a),t.current=p,p.stateNode=t,a=Ff(),a.refCount++,t.pooledCache=a,a.refCount++,p.memoizedState={element:l,isDehydrated:s,cache:a},Yf(p),t}function Cv(t){return t?(t=Us,t):Us}function Iv(t,a,s,l,f,p){f=Cv(f),l.context===null?l.context=f:l.pendingContext=f,l=Xi(a),l.payload={element:s},p=p===void 0?null:p,p!==null&&(l.callback=p),s=Ji(t,l,a),s!==null&&(En(s,t,a),El(s,t,a))}function Ov(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<a?s:a}}function fp(t,a){Ov(t,a),(t=t.alternate)&&Ov(t,a)}function Mv(t){if(t.tag===13||t.tag===31){var a=Xr(t,67108864);a!==null&&En(a,t,67108864),fp(t,67108864)}}function Dv(t){if(t.tag===13||t.tag===31){var a=Vn();a=Lr(a);var s=Xr(t,a);s!==null&&En(s,t,a),fp(t,a)}}var ed=!0;function aS(t,a,s,l){var f=X.T;X.T=null;var p=le.p;try{le.p=2,hp(t,a,s,l)}finally{le.p=p,X.T=f}}function iS(t,a,s,l){var f=X.T;X.T=null;var p=le.p;try{le.p=8,hp(t,a,s,l)}finally{le.p=p,X.T=f}}function hp(t,a,s,l){if(ed){var f=pp(l);if(f===null)Zh(t,a,l,td,s),jv(t,l);else if(sS(f,t,a,s,l))l.stopPropagation();else if(jv(t,l),a&4&&-1<rS.indexOf(t)){for(;f!==null;){var p=qn(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var b=wa(p.pendingLanes);if(b!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;b;){var M=1<<31-Nt(b);A.entanglements[1]|=M,b&=~M}Ga(p),(nt&6)===0&&(Vu=mt()+500,Ll(0))}}break;case 31:case 13:A=Xr(p,2),A!==null&&En(A,p,2),zu(),fp(p,2)}if(p=pp(l),p===null&&Zh(t,a,l,td,s),p===f)break;f=p}f!==null&&l.stopPropagation()}else Zh(t,a,l,null,s)}}function pp(t){return t=Fn(t),mp(t)}var td=null;function mp(t){if(td=null,t=Oa(t),t!==null){var a=c(t);if(a===null)t=null;else{var s=a.tag;if(s===13){if(t=d(a),t!==null)return t;t=null}else if(s===31){if(t=m(a),t!==null)return t;t=null}else if(s===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return td=t,null}function kv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sa()){case Ko:return 2;case Yo:return 8;case ji:case _f:return 32;case Dc:return 268435456;default:return 32}default:return 32}}var gp=!1,lr=null,cr=null,ur=null,Gl=new Map,Ql=new Map,dr=[],rS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jv(t,a){switch(t){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":Gl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(a.pointerId)}}function Kl(t,a,s,l,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:a,domEventName:s,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},a!==null&&(a=qn(a),a!==null&&Mv(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),t)}function sS(t,a,s,l,f){switch(a){case"focusin":return lr=Kl(lr,t,a,s,l,f),!0;case"dragenter":return cr=Kl(cr,t,a,s,l,f),!0;case"mouseover":return ur=Kl(ur,t,a,s,l,f),!0;case"pointerover":var p=f.pointerId;return Gl.set(p,Kl(Gl.get(p)||null,t,a,s,l,f)),!0;case"gotpointercapture":return p=f.pointerId,Ql.set(p,Kl(Ql.get(p)||null,t,a,s,l,f)),!0}return!1}function Pv(t){var a=Oa(t.target);if(a!==null){var s=c(a);if(s!==null){if(a=s.tag,a===13){if(a=d(s),a!==null){t.blockedOn=a,la(t.priority,function(){Dv(s)});return}}else if(a===31){if(a=m(s),a!==null){t.blockedOn=a,la(t.priority,function(){Dv(s)});return}}else if(a===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nd(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var s=pp(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);sl=l,s.target.dispatchEvent(l),sl=null}else return a=qn(s),a!==null&&Mv(a),t.blockedOn=s,!1;a.shift()}return!0}function Vv(t,a,s){nd(t)&&s.delete(a)}function oS(){gp=!1,lr!==null&&nd(lr)&&(lr=null),cr!==null&&nd(cr)&&(cr=null),ur!==null&&nd(ur)&&(ur=null),Gl.forEach(Vv),Ql.forEach(Vv)}function ad(t,a){t.blockedOn===a&&(t.blockedOn=null,gp||(gp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,oS)))}var id=null;function Lv(t){id!==t&&(id=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){id===t&&(id=null);for(var a=0;a<t.length;a+=3){var s=t[a],l=t[a+1],f=t[a+2];if(typeof l!="function"){if(mp(l||s)===null)continue;break}var p=qn(s);p!==null&&(t.splice(a,3),a-=3,ph(p,{pending:!0,data:f,method:s.method,action:l},l,f))}}))}function uo(t){function a(M){return ad(M,t)}lr!==null&&ad(lr,t),cr!==null&&ad(cr,t),ur!==null&&ad(ur,t),Gl.forEach(a),Ql.forEach(a);for(var s=0;s<dr.length;s++){var l=dr[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<dr.length&&(s=dr[0],s.blockedOn===null);)Pv(s),s.blockedOn===null&&dr.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var f=s[l],p=s[l+1],b=f[Kt]||null;if(typeof p=="function")b||Lv(s);else if(b){var A=null;if(p&&p.hasAttribute("formAction")){if(f=p,b=p[Kt]||null)A=b.formAction;else if(mp(f)!==null)continue}else A=b.action;typeof A=="function"?s[l+1]=A:(s.splice(l,3),l-=3),Lv(s)}}}function zv(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(b){return f=b})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function yp(t){this._internalRoot=t}rd.prototype.render=yp.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(r(409));var s=a.current,l=Vn();Iv(s,l,t,a,null,null)},rd.prototype.unmount=yp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Iv(t.current,2,null,t,null,null),zu(),a[Ca]=null}};function rd(t){this._internalRoot=t}rd.prototype.unstable_scheduleHydration=function(t){if(t){var a=zc();t={blockedOn:null,target:t,priority:a};for(var s=0;s<dr.length&&a!==0&&a<dr[s].priority;s++);dr.splice(s,0,t),s===0&&Pv(t)}};var Uv=e.version;if(Uv!=="19.2.4")throw Error(r(527,Uv,"19.2.4"));le.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(a),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var lS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{sa=sd.inject(lS),Wt=sd}catch{}}return $l.createRoot=function(t,a){if(!o(t))throw Error(r(299));var s=!1,l="",f=Ky,p=Yy,b=$y;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError)),a=Rv(t,1,!1,null,null,s,l,null,f,p,b,zv),t[Ca]=a.current,Wh(t),new yp(a)},$l.hydrateRoot=function(t,a,s){if(!o(t))throw Error(r(299));var l=!1,f="",p=Ky,b=Yy,A=$y,M=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError),s.formState!==void 0&&(M=s.formState)),a=Rv(t,1,!0,a,s??null,l,f,M,p,b,A,zv),a.context=Cv(null),s=a.current,l=Vn(),l=Lr(l),f=Xi(l),f.callback=null,Ji(s,f,l),s=l,a.current.lanes=s,Pr(a,s),Ga(a),t[Ca]=a.current,Wh(t),new rd(a)},$l.version="19.2.4",$l}var Xv;function bS(){if(Xv)return xp.exports;Xv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),xp.exports=vS(),xp.exports}var xS=bS();const _S=kx(xS);var Jv="popstate";function ES(i={}){function e(o,c){let{pathname:d="/",search:m="",hash:g=""}=xs(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),zp("",{pathname:d,search:m,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let d=o.document.querySelector("base"),m="";if(d&&d.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");m=y===-1?g:g.slice(0,y)}return m+"#"+(typeof c=="string"?c:dc(c))}function r(o,c){ia(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return SS(e,n,r,i)}function Et(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ia(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AS(){return Math.random().toString(36).substring(2,10)}function Wv(i,e){return{usr:i.state,key:i.key,idx:e}}function zp(i,e,n=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?xs(e):e,state:n,key:e&&e.key||r||AS()}}function dc({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function xs(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function SS(i,e,n,r={}){let{window:o=document.defaultView,v5Compat:c=!1}=r,d=o.history,m="POP",g=null,y=_();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function _(){return(d.state||{idx:null}).idx}function E(){m="POP";let Q=_(),ie=Q==null?null:Q-y;y=Q,g&&g({action:m,location:z.location,delta:ie})}function T(Q,ie){m="PUSH";let B=zp(z.location,Q,ie);n&&n(B,Q),y=_()+1;let se=Wv(B,y),me=z.createHref(B);try{d.pushState(se,"",me)}catch(Ae){if(Ae instanceof DOMException&&Ae.name==="DataCloneError")throw Ae;o.location.assign(me)}c&&g&&g({action:m,location:z.location,delta:1})}function L(Q,ie){m="REPLACE";let B=zp(z.location,Q,ie);n&&n(B,Q),y=_();let se=Wv(B,y),me=z.createHref(B);d.replaceState(se,"",me),c&&g&&g({action:m,location:z.location,delta:0})}function H(Q){return TS(Q)}let z={get action(){return m},get location(){return i(o,d)},listen(Q){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Jv,E),g=Q,()=>{o.removeEventListener(Jv,E),g=null}},createHref(Q){return e(o,Q)},createURL:H,encodeLocation(Q){let ie=H(Q);return{pathname:ie.pathname,search:ie.search,hash:ie.hash}},push:T,replace:L,go(Q){return d.go(Q)}};return z}function TS(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Et(n,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:dc(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function jx(i,e,n="/"){return wS(i,e,n,!1)}function wS(i,e,n,r){let o=typeof e=="string"?xs(e):e,c=wi(o.pathname||"/",n);if(c==null)return null;let d=Px(i);NS(d);let m=null;for(let g=0;m==null&&g<d.length;++g){let y=LS(c);m=PS(d[g],y,r)}return m}function Px(i,e=[],n=[],r="",o=!1){let c=(d,m,g=o,y)=>{let _={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(r)&&g)return;Et(_.relativePath.startsWith(r),`Absolute route path "${_.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(r.length)}let E=Ai([r,_.relativePath]),T=n.concat(_);d.children&&d.children.length>0&&(Et(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Px(d.children,e,T,E,g)),!(d.path==null&&!d.index)&&e.push({path:E,score:kS(E,d.index),routesMeta:T})};return i.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))c(d,m);else for(let g of Vx(d.path))c(d,m,!0,g)}),e}function Vx(i){let e=i.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return o?[c,""]:[c];let d=Vx(r.join("/")),m=[];return m.push(...d.map(g=>g===""?c:[c,g].join("/"))),o&&m.push(...d),m.map(g=>i.startsWith("/")&&g===""?"/":g)}function NS(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:jS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var RS=/^:[\w-]+$/,CS=3,IS=2,OS=1,MS=10,DS=-2,Zv=i=>i==="*";function kS(i,e){let n=i.split("/"),r=n.length;return n.some(Zv)&&(r+=DS),e&&(r+=IS),n.filter(o=>!Zv(o)).reduce((o,c)=>o+(RS.test(c)?CS:c===""?OS:MS),r)}function jS(i,e){return i.length===e.length&&i.slice(0,-1).every((r,o)=>r===e[o])?i[i.length-1]-e[e.length-1]:0}function PS(i,e,n=!1){let{routesMeta:r}=i,o={},c="/",d=[];for(let m=0;m<r.length;++m){let g=r[m],y=m===r.length-1,_=c==="/"?e:e.slice(c.length)||"/",E=Nd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},_),T=g.route;if(!E&&y&&n&&!r[r.length-1].route.index&&(E=Nd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},_)),!E)return null;Object.assign(o,E.params),d.push({params:o,pathname:Ai([c,E.pathname]),pathnameBase:HS(Ai([c,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(c=Ai([c,E.pathnameBase]))}return d}function Nd(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,r]=VS(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:r.reduce((y,{paramName:_,isOptional:E},T)=>{if(_==="*"){let H=m[T]||"";d=c.slice(0,c.length-H.length).replace(/(.)\/+$/,"$1")}const L=m[T];return E&&!L?y[_]=void 0:y[_]=(L||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:d,pattern:i}}function VS(i,e=!1,n=!0){ia(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,g)=>(r.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(r.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function LS(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ia(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function wi(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=i.charAt(n);return r&&r!=="/"?null:i.slice(n)||"/"}var zS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function US(i,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof i=="string"?xs(i):i,c;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?c=eb(n.substring(1),"/"):c=eb(n,e)):c=e,{pathname:c,search:qS(r),hash:FS(o)}}function eb(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Sp(i,e,n,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function BS(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function mm(i){let e=BS(i);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function gm(i,e,n,r=!1){let o;typeof i=="string"?o=xs(i):(o={...i},Et(!o.pathname||!o.pathname.includes("?"),Sp("?","pathname","search",o)),Et(!o.pathname||!o.pathname.includes("#"),Sp("#","pathname","hash",o)),Et(!o.search||!o.search.includes("#"),Sp("#","search","hash",o)));let c=i===""||o.pathname==="",d=c?"/":o.pathname,m;if(d==null)m=n;else{let E=e.length-1;if(!r&&d.startsWith("..")){let T=d.split("/");for(;T[0]==="..";)T.shift(),E-=1;o.pathname=T.join("/")}m=E>=0?e[E]:"/"}let g=US(o,m),y=d&&d!=="/"&&d.endsWith("/"),_=(c||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||_)&&(g.pathname+="/"),g}var Ai=i=>i.join("/").replace(/\/\/+/g,"/"),HS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),qS=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,FS=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,GS=class{constructor(i,e,n,r=!1){this.status=i,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function QS(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function KS(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Lx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function zx(i,e){let n=i;if(typeof n!="string"||!zS.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,o=!1;if(Lx)try{let c=new URL(window.location.href),d=n.startsWith("//")?new URL(c.protocol+n):new URL(n),m=wi(d.pathname,e);d.origin===c.origin&&m!=null?n=m+d.search+d.hash:o=!0}catch{ia(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ux=["POST","PUT","PATCH","DELETE"];new Set(Ux);var YS=["GET",...Ux];new Set(YS);var ko=O.createContext(null);ko.displayName="DataRouter";var Yd=O.createContext(null);Yd.displayName="DataRouterState";var $S=O.createContext(!1),Bx=O.createContext({isTransitioning:!1});Bx.displayName="ViewTransition";var XS=O.createContext(new Map);XS.displayName="Fetchers";var JS=O.createContext(null);JS.displayName="Await";var Un=O.createContext(null);Un.displayName="Navigation";var xc=O.createContext(null);xc.displayName="Location";var ei=O.createContext({outlet:null,matches:[],isDataRoute:!1});ei.displayName="Route";var ym=O.createContext(null);ym.displayName="RouteError";var Hx="REACT_ROUTER_ERROR",WS="REDIRECT",ZS="ROUTE_ERROR_RESPONSE";function eT(i){if(i.startsWith(`${Hx}:${WS}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function tT(i){if(i.startsWith(`${Hx}:${ZS}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new GS(e.status,e.statusText,e.data)}catch{}}function nT(i,{relative:e}={}){Et(jo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=O.useContext(Un),{hash:o,pathname:c,search:d}=_c(i,{relative:e}),m=c;return n!=="/"&&(m=c==="/"?n:Ai([n,c])),r.createHref({pathname:m,search:d,hash:o})}function jo(){return O.useContext(xc)!=null}function Ir(){return Et(jo(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(xc).location}var qx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Fx(i){O.useContext(Un).static||O.useLayoutEffect(i)}function Po(){let{isDataRoute:i}=O.useContext(ei);return i?mT():aT()}function aT(){Et(jo(),"useNavigate() may be used only in the context of a <Router> component.");let i=O.useContext(ko),{basename:e,navigator:n}=O.useContext(Un),{matches:r}=O.useContext(ei),{pathname:o}=Ir(),c=JSON.stringify(mm(r)),d=O.useRef(!1);return Fx(()=>{d.current=!0}),O.useCallback((g,y={})=>{if(ia(d.current,qx),!d.current)return;if(typeof g=="number"){n.go(g);return}let _=gm(g,JSON.parse(c),o,y.relative==="path");i==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Ai([e,_.pathname])),(y.replace?n.replace:n.push)(_,y.state,y)},[e,n,c,o,i])}O.createContext(null);function _c(i,{relative:e}={}){let{matches:n}=O.useContext(ei),{pathname:r}=Ir(),o=JSON.stringify(mm(n));return O.useMemo(()=>gm(i,JSON.parse(o),r,e==="path"),[i,o,r,e])}function iT(i,e){return Gx(i,e)}function Gx(i,e,n,r,o){Et(jo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=O.useContext(Un),{matches:d}=O.useContext(ei),m=d[d.length-1],g=m?m.params:{},y=m?m.pathname:"/",_=m?m.pathnameBase:"/",E=m&&m.route;{let B=E&&E.path||"";Kx(y,!E||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let T=Ir(),L;if(e){let B=typeof e=="string"?xs(e):e;Et(_==="/"||B.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${B.pathname}" was given in the \`location\` prop.`),L=B}else L=T;let H=L.pathname||"/",z=H;if(_!=="/"){let B=_.replace(/^\//,"").split("/");z="/"+H.replace(/^\//,"").split("/").slice(B.length).join("/")}let Q=jx(i,{pathname:z});ia(E||Q!=null,`No routes matched location "${L.pathname}${L.search}${L.hash}" `),ia(Q==null||Q[Q.length-1].route.element!==void 0||Q[Q.length-1].route.Component!==void 0||Q[Q.length-1].route.lazy!==void 0,`Matched leaf route at location "${L.pathname}${L.search}${L.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ie=cT(Q&&Q.map(B=>Object.assign({},B,{params:Object.assign({},g,B.params),pathname:Ai([_,c.encodeLocation?c.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?_:Ai([_,c.encodeLocation?c.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),d,n,r,o);return e&&ie?O.createElement(xc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...L},navigationType:"POP"}},ie):ie}function rT(){let i=pT(),e=QS(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},c={padding:"2px 4px",backgroundColor:r},d=null;return console.error("Error handled by React Router default ErrorBoundary:",i),d=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:c},"ErrorBoundary")," or"," ",O.createElement("code",{style:c},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:o},n):null,d)}var sT=O.createElement(rT,null),Qx=class extends O.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const n=tT(i.digest);n&&(i=n)}let e=i!==void 0?O.createElement(ei.Provider,{value:this.props.routeContext},O.createElement(ym.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?O.createElement(oT,{error:i},e):e}};Qx.contextType=$S;var Tp=new WeakMap;function oT({children:i,error:e}){let{basename:n}=O.useContext(Un);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=eT(e.digest);if(r){let o=Tp.get(e);if(o)throw o;let c=zx(r.location,n);if(Lx&&!Tp.get(e))if(c.isExternal||r.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:r.replace}));throw Tp.set(e,d),d}return O.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return i}function lT({routeContext:i,match:e,children:n}){let r=O.useContext(ko);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(ei.Provider,{value:i},n)}function cT(i,e=[],n=null,r=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let c=i,d=n?.errors;if(d!=null){let _=c.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);Et(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,_+1))}let m=!1,g=-1;if(n)for(let _=0;_<c.length;_++){let E=c[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=_),E.route.id){let{loaderData:T,errors:L}=n,H=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!L||L[E.route.id]===void 0);if(E.route.lazy||H){m=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}let y=n&&r?(_,E)=>{r(_,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:KS(n.matches),errorInfo:E})}:void 0;return c.reduceRight((_,E,T)=>{let L,H=!1,z=null,Q=null;n&&(L=d&&E.route.id?d[E.route.id]:void 0,z=E.route.errorElement||sT,m&&(g<0&&T===0?(Kx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),H=!0,Q=null):g===T&&(H=!0,Q=E.route.hydrateFallbackElement||null)));let ie=e.concat(c.slice(0,T+1)),B=()=>{let se;return L?se=z:H?se=Q:E.route.Component?se=O.createElement(E.route.Component,null):E.route.element?se=E.route.element:se=_,O.createElement(lT,{match:E,routeContext:{outlet:_,matches:ie,isDataRoute:n!=null},children:se})};return n&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?O.createElement(Qx,{location:n.location,revalidation:n.revalidation,component:z,error:L,children:B(),routeContext:{outlet:null,matches:ie,isDataRoute:!0},onError:y}):B()},null)}function vm(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uT(i){let e=O.useContext(ko);return Et(e,vm(i)),e}function dT(i){let e=O.useContext(Yd);return Et(e,vm(i)),e}function fT(i){let e=O.useContext(ei);return Et(e,vm(i)),e}function bm(i){let e=fT(i),n=e.matches[e.matches.length-1];return Et(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function hT(){return bm("useRouteId")}function pT(){let i=O.useContext(ym),e=dT("useRouteError"),n=bm("useRouteError");return i!==void 0?i:e.errors?.[n]}function mT(){let{router:i}=uT("useNavigate"),e=bm("useNavigate"),n=O.useRef(!1);return Fx(()=>{n.current=!0}),O.useCallback(async(o,c={})=>{ia(n.current,qx),n.current&&(typeof o=="number"?await i.navigate(o):await i.navigate(o,{fromRouteId:e,...c}))},[i,e])}var tb={};function Kx(i,e,n){!e&&!tb[i]&&(tb[i]=!0,ia(!1,n))}O.memo(gT);function gT({routes:i,future:e,state:n,onError:r}){return Gx(i,void 0,n,r,e)}function yT({to:i,replace:e,state:n,relative:r}){Et(jo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=O.useContext(Un);ia(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=O.useContext(ei),{pathname:d}=Ir(),m=Po(),g=gm(i,mm(c),d,r==="path"),y=JSON.stringify(g);return O.useEffect(()=>{m(JSON.parse(y),{replace:e,state:n,relative:r})},[m,y,r,e,n]),null}function Qa(i){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vT({basename:i="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:c=!1,unstable_useTransitions:d}){Et(!jo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=i.replace(/^\/*/,"/"),g=O.useMemo(()=>({basename:m,navigator:o,static:c,unstable_useTransitions:d,future:{}}),[m,o,c,d]);typeof n=="string"&&(n=xs(n));let{pathname:y="/",search:_="",hash:E="",state:T=null,key:L="default"}=n,H=O.useMemo(()=>{let z=wi(y,m);return z==null?null:{location:{pathname:z,search:_,hash:E,state:T,key:L},navigationType:r}},[m,y,_,E,T,L,r]);return ia(H!=null,`<Router basename="${m}"> is not able to match the URL "${y}${_}${E}" because it does not start with the basename, so the <Router> won't render anything.`),H==null?null:O.createElement(Un.Provider,{value:g},O.createElement(xc.Provider,{children:e,value:H}))}function bT({children:i,location:e}){return iT(Up(i),e)}function Up(i,e=[]){let n=[];return O.Children.forEach(i,(r,o)=>{if(!O.isValidElement(r))return;let c=[...e,o];if(r.type===O.Fragment){n.push.apply(n,Up(r.props.children,c));return}Et(r.type===Qa,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!r.props.index||!r.props.children,"An index route cannot have child routes.");let d={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(d.children=Up(r.props.children,c)),n.push(d)}),n}var pd="get",md="application/x-www-form-urlencoded";function $d(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function xT(i){return $d(i)&&i.tagName.toLowerCase()==="button"}function _T(i){return $d(i)&&i.tagName.toLowerCase()==="form"}function ET(i){return $d(i)&&i.tagName.toLowerCase()==="input"}function AT(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function ST(i,e){return i.button===0&&(!e||e==="_self")&&!AT(i)}var od=null;function TT(){if(od===null)try{new FormData(document.createElement("form"),0),od=!1}catch{od=!0}return od}var wT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wp(i){return i!=null&&!wT.has(i)?(ia(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${md}"`),null):i}function NT(i,e){let n,r,o,c,d;if(_T(i)){let m=i.getAttribute("action");r=m?wi(m,e):null,n=i.getAttribute("method")||pd,o=wp(i.getAttribute("enctype"))||md,c=new FormData(i)}else if(xT(i)||ET(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||m.getAttribute("action");if(r=g?wi(g,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||pd,o=wp(i.getAttribute("formenctype"))||wp(m.getAttribute("enctype"))||md,c=new FormData(m,i),!TT()){let{name:y,type:_,value:E}=i;if(_==="image"){let T=y?`${y}.`:"";c.append(`${T}x`,"0"),c.append(`${T}y`,"0")}else y&&c.append(y,E)}}else{if($d(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=pd,r=null,o=md,d=i}return c&&o==="text/plain"&&(d=c,c=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function xm(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function RT(i,e,n,r){let o=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${r}`:o.pathname=`${o.pathname}.${r}`:o.pathname==="/"?o.pathname=`_root.${r}`:e&&wi(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${r}`,o}async function CT(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function IT(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function OT(i,e,n){let r=await Promise.all(i.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await CT(c,n);return d.links?d.links():[]}return[]}));return jT(r.flat(1).filter(IT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function nb(i,e,n,r,o,c){let d=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,m=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return c==="assets"?e.filter((g,y)=>d(g,y)||m(g,y)):c==="data"?e.filter((g,y)=>{let _=r.routes[g.route.id];if(!_||!_.hasLoader)return!1;if(d(g,y)||m(g,y))return!0;if(g.route.shouldRevalidate){let E=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function MT(i,e,{includeHydrateFallback:n}={}){return DT(i.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function DT(i){return[...new Set(i)]}function kT(i){let e={},n=Object.keys(i).sort();for(let r of n)e[r]=i[r];return e}function jT(i,e){let n=new Set;return new Set(e),i.reduce((r,o)=>{let c=JSON.stringify(kT(o));return n.has(c)||(n.add(c),r.push({key:c,link:o})),r},[])}function Yx(){let i=O.useContext(ko);return xm(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function PT(){let i=O.useContext(Yd);return xm(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var _m=O.createContext(void 0);_m.displayName="FrameworkContext";function $x(){let i=O.useContext(_m);return xm(i,"You must render this element inside a <HydratedRouter> element"),i}function VT(i,e){let n=O.useContext(_m),[r,o]=O.useState(!1),[c,d]=O.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:y,onMouseLeave:_,onTouchStart:E}=e,T=O.useRef(null);O.useEffect(()=>{if(i==="render"&&d(!0),i==="viewport"){let z=ie=>{ie.forEach(B=>{d(B.isIntersecting)})},Q=new IntersectionObserver(z,{threshold:.5});return T.current&&Q.observe(T.current),()=>{Q.disconnect()}}},[i]),O.useEffect(()=>{if(r){let z=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(z)}}},[r]);let L=()=>{o(!0)},H=()=>{o(!1),d(!1)};return n?i!=="intent"?[c,T,{}]:[c,T,{onFocus:Xl(m,L),onBlur:Xl(g,H),onMouseEnter:Xl(y,L),onMouseLeave:Xl(_,H),onTouchStart:Xl(E,L)}]:[!1,T,{}]}function Xl(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function LT({page:i,...e}){let{router:n}=Yx(),r=O.useMemo(()=>jx(n.routes,i,n.basename),[n.routes,i,n.basename]);return r?O.createElement(UT,{page:i,matches:r,...e}):null}function zT(i){let{manifest:e,routeModules:n}=$x(),[r,o]=O.useState([]);return O.useEffect(()=>{let c=!1;return OT(i,e,n).then(d=>{c||o(d)}),()=>{c=!0}},[i,e,n]),r}function UT({page:i,matches:e,...n}){let r=Ir(),{future:o,manifest:c,routeModules:d}=$x(),{basename:m}=Yx(),{loaderData:g,matches:y}=PT(),_=O.useMemo(()=>nb(i,e,y,c,r,"data"),[i,e,y,c,r]),E=O.useMemo(()=>nb(i,e,y,c,r,"assets"),[i,e,y,c,r]),T=O.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let z=new Set,Q=!1;if(e.forEach(B=>{let se=c.routes[B.route.id];!se||!se.hasLoader||(!_.some(me=>me.route.id===B.route.id)&&B.route.id in g&&d[B.route.id]?.shouldRevalidate||se.hasClientLoader?Q=!0:z.add(B.route.id))}),z.size===0)return[];let ie=RT(i,m,o.unstable_trailingSlashAwareDataRequests,"data");return Q&&z.size>0&&ie.searchParams.set("_routes",e.filter(B=>z.has(B.route.id)).map(B=>B.route.id).join(",")),[ie.pathname+ie.search]},[m,o.unstable_trailingSlashAwareDataRequests,g,r,c,_,e,i,d]),L=O.useMemo(()=>MT(E,c),[E,c]),H=zT(E);return O.createElement(O.Fragment,null,T.map(z=>O.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...n})),L.map(z=>O.createElement("link",{key:z,rel:"modulepreload",href:z,...n})),H.map(({key:z,link:Q})=>O.createElement("link",{key:z,nonce:n.nonce,...Q,crossOrigin:Q.crossOrigin??n.crossOrigin})))}function BT(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var HT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{HT&&(window.__reactRouterVersion="7.13.0")}catch{}function qT({basename:i,children:e,unstable_useTransitions:n,window:r}){let o=O.useRef();o.current==null&&(o.current=ES({window:r,v5Compat:!0}));let c=o.current,[d,m]=O.useState({action:c.action,location:c.location}),g=O.useCallback(y=>{n===!1?m(y):O.startTransition(()=>m(y))},[n]);return O.useLayoutEffect(()=>c.listen(g),[c,g]),O.createElement(vT,{basename:i,children:e,location:d.location,navigationType:d.action,navigator:c,unstable_useTransitions:n})}var Xx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jx=O.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:c,replace:d,state:m,target:g,to:y,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:T,...L},H){let{basename:z,unstable_useTransitions:Q}=O.useContext(Un),ie=typeof y=="string"&&Xx.test(y),B=zx(y,z);y=B.to;let se=nT(y,{relative:o}),[me,Ae,ye]=VT(r,L),I=KT(y,{replace:d,state:m,target:g,preventScrollReset:_,relative:o,viewTransition:E,unstable_defaultShouldRevalidate:T,unstable_useTransitions:Q});function R(k){e&&e(k),k.defaultPrevented||I(k)}let N=O.createElement("a",{...L,...ye,href:B.absoluteURL||se,onClick:B.isExternal||c?e:R,ref:BT(H,Ae),target:g,"data-discover":!ie&&n==="render"?"true":void 0});return me&&!ie?O.createElement(O.Fragment,null,N,O.createElement(LT,{page:se})):N});Jx.displayName="Link";var FT=O.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:c,to:d,viewTransition:m,children:g,...y},_){let E=_c(d,{relative:y.relative}),T=Ir(),L=O.useContext(Yd),{navigator:H,basename:z}=O.useContext(Un),Q=L!=null&&WT(E)&&m===!0,ie=H.encodeLocation?H.encodeLocation(E).pathname:E.pathname,B=T.pathname,se=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;n||(B=B.toLowerCase(),se=se?se.toLowerCase():null,ie=ie.toLowerCase()),se&&z&&(se=wi(se,z)||se);const me=ie!=="/"&&ie.endsWith("/")?ie.length-1:ie.length;let Ae=B===ie||!o&&B.startsWith(ie)&&B.charAt(me)==="/",ye=se!=null&&(se===ie||!o&&se.startsWith(ie)&&se.charAt(ie.length)==="/"),I={isActive:Ae,isPending:ye,isTransitioning:Q},R=Ae?e:void 0,N;typeof r=="function"?N=r(I):N=[r,Ae?"active":null,ye?"pending":null,Q?"transitioning":null].filter(Boolean).join(" ");let k=typeof c=="function"?c(I):c;return O.createElement(Jx,{...y,"aria-current":R,className:N,ref:_,style:k,to:d,viewTransition:m},typeof g=="function"?g(I):g)});FT.displayName="NavLink";var GT=O.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:c,method:d=pd,action:m,onSubmit:g,relative:y,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:T,...L},H)=>{let{unstable_useTransitions:z}=O.useContext(Un),Q=XT(),ie=JT(m,{relative:y}),B=d.toLowerCase()==="get"?"get":"post",se=typeof m=="string"&&Xx.test(m),me=Ae=>{if(g&&g(Ae),Ae.defaultPrevented)return;Ae.preventDefault();let ye=Ae.nativeEvent.submitter,I=ye?.getAttribute("formmethod")||d,R=()=>Q(ye||Ae.currentTarget,{fetcherKey:e,method:I,navigate:n,replace:o,state:c,relative:y,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:T});z&&n!==!1?O.startTransition(()=>R()):R()};return O.createElement("form",{ref:H,method:B,action:ie,onSubmit:r?g:me,...L,"data-discover":!se&&i==="render"?"true":void 0})});GT.displayName="Form";function QT(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Wx(i){let e=O.useContext(ko);return Et(e,QT(i)),e}function KT(i,{target:e,replace:n,state:r,preventScrollReset:o,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:m,unstable_useTransitions:g}={}){let y=Po(),_=Ir(),E=_c(i,{relative:c});return O.useCallback(T=>{if(ST(T,e)){T.preventDefault();let L=n!==void 0?n:dc(_)===dc(E),H=()=>y(i,{replace:L,state:r,preventScrollReset:o,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:m});g?O.startTransition(()=>H()):H()}},[_,y,E,n,r,e,i,o,c,d,m,g])}var YT=0,$T=()=>`__${String(++YT)}__`;function XT(){let{router:i}=Wx("useSubmit"),{basename:e}=O.useContext(Un),n=hT(),r=i.fetch,o=i.navigate;return O.useCallback(async(c,d={})=>{let{action:m,method:g,encType:y,formData:_,body:E}=NT(c,e);if(d.navigate===!1){let T=d.fetcherKey||$T();await r(T,n,d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:_,body:E,formMethod:d.method||g,formEncType:d.encType||y,flushSync:d.flushSync})}else await o(d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:_,body:E,formMethod:d.method||g,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[r,o,e,n])}function JT(i,{relative:e}={}){let{basename:n}=O.useContext(Un),r=O.useContext(ei);Et(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),c={..._c(i||".",{relative:e})},d=Ir();if(i==null){c.search=d.search;let m=new URLSearchParams(c.search),g=m.getAll("index");if(g.some(_=>_==="")){m.delete("index"),g.filter(E=>E).forEach(E=>m.append("index",E));let _=m.toString();c.search=_?`?${_}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Ai([n,c.pathname])),dc(c)}function WT(i,{relative:e}={}){let n=O.useContext(Bx);Et(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Wx("useViewTransitionState"),o=_c(i,{relative:e});if(!n.isTransitioning)return!1;let c=wi(n.currentLocation.pathname,r)||n.currentLocation.pathname,d=wi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Nd(o.pathname,d)!=null||Nd(o.pathname,c)!=null}const ZT=()=>{};var ab={};const Zx=function(i){const e=[];let n=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},ew=function(i){const e=[];let n=0,r=0;for(;n<i.length;){const o=i[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],d=i[n++],m=i[n++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=i[n++],d=i[n++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},e_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],d=o+1<i.length,m=d?i[o+1]:0,g=o+2<i.length,y=g?i[o+2]:0,_=c>>2,E=(c&3)<<4|m>>4;let T=(m&15)<<2|y>>6,L=y&63;g||(L=64,d||(T=64)),r.push(n[_],n[E],n[T],n[L])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Zx(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):ew(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const E=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||m==null||y==null||E==null)throw new tw;const T=c<<2|m>>4;if(r.push(T),y!==64){const L=m<<4&240|y>>2;if(r.push(L),E!==64){const H=y<<6&192|E;r.push(H)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class tw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nw=function(i){const e=Zx(i);return e_.encodeByteArray(e,!0)},Rd=function(i){return nw(i).replace(/\./g,"")},t_=function(i){try{return e_.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function aw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const iw=()=>aw().__FIREBASE_DEFAULTS__,rw=()=>{if(typeof process>"u"||typeof ab>"u")return;const i=ab.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},sw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&t_(i[1]);return e&&JSON.parse(e)},Xd=()=>{try{return ZT()||iw()||rw()||sw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},n_=i=>Xd()?.emulatorHosts?.[i],ow=i=>{const e=n_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},a_=()=>Xd()?.config,i_=i=>Xd()?.[`_${i}`];class lw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Vo(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function r_(i){return(await fetch(i,{credentials:"include"})).ok}function cw(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Rd(JSON.stringify(n)),Rd(JSON.stringify(d)),""].join(".")}const ic={};function uw(){const i={prod:[],emulator:[]};for(const e of Object.keys(ic))ic[e]?i.emulator.push(e):i.prod.push(e);return i}function dw(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let ib=!1;function s_(i,e){if(typeof window>"u"||typeof document>"u"||!Vo(window.location.host)||ic[i]===e||ic[i]||ib)return;ic[i]=e;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",c=uw().prod.length>0;function d(){const T=document.getElementById(r);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,L){T.setAttribute("width","24"),T.setAttribute("id",L),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{ib=!0,d()},T}function _(T,L){T.setAttribute("id",L),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=dw(r),L=n("text"),H=document.getElementById(L)||document.createElement("span"),z=n("learnmore"),Q=document.getElementById(z)||document.createElement("a"),ie=n("preprendIcon"),B=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const se=T.element;m(se),_(Q,z);const me=y();g(B,ie),se.append(B,H,Q,me),document.body.appendChild(se)}c?(H.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function hw(){const i=Xd()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function gw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yw(){const i=fn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function vw(){return!hw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bw(){try{return typeof indexedDB=="object"}catch{return!1}}function xw(){return new Promise((i,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const _w="FirebaseError";class Di extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_w,Object.setPrototypeOf(this,Di.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ec.prototype.create)}}class Ec{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?Ew(c,r):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Di(o,m,r)}}function Ew(i,e){return i.replace(Aw,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const Aw=/\{\$([^}]+)}/g;function Sw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ni(i,e){if(i===e)return!0;const n=Object.keys(i),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const c=i[o],d=e[o];if(rb(c)&&rb(d)){if(!Ni(c,d))return!1}else if(c!==d)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function rb(i){return i!==null&&typeof i=="object"}function Ac(i){const e=[];for(const[n,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wl(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,c]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Zl(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function Tw(i,e){const n=new ww(i,e);return n.subscribe.bind(n)}class ww{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Nw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=Np),o.error===void 0&&(o.error=Np),o.complete===void 0&&(o.complete=Np);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nw(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Np(){}function Qt(i){return i&&i._delegate?i._delegate:i}class ps{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const cs="[DEFAULT]";class Rw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Iw(e))try{this.getOrInitializeService({instanceIdentifier:cs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cs){return this.instances.has(e)}getOptions(e=cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);r===m&&d.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const c=this.instances.get(r);return c&&e(c,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Cw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=cs){return this.component?this.component.multipleInstances?e:cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Cw(i){return i===cs?void 0:i}function Iw(i){return i.instantiationMode==="EAGER"}class Ow{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Rw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Ge;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ge||(Ge={}));const Mw={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},Dw=Ge.INFO,kw={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},jw=(i,e,...n)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=kw[e];if(o)console[o](`[${r}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Em{constructor(e){this.name=e,this._logLevel=Dw,this._logHandler=jw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const Pw=(i,e)=>e.some(n=>i instanceof n);let sb,ob;function Vw(){return sb||(sb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Lw(){return ob||(ob=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const o_=new WeakMap,Bp=new WeakMap,l_=new WeakMap,Rp=new WeakMap,Am=new WeakMap;function zw(i){const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{n(br(i.result)),o()},d=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&o_.set(n,i)}).catch(()=>{}),Am.set(e,i),e}function Uw(i){if(Bp.has(i))return;const e=new Promise((n,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});Bp.set(i,e)}let Hp={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Bp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||l_.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return br(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Bw(i){Hp=i(Hp)}function Hw(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=i.call(Cp(this),e,...n);return l_.set(r,e.sort?e.sort():[e]),br(r)}:Lw().includes(i)?function(...e){return i.apply(Cp(this),e),br(o_.get(this))}:function(...e){return br(i.apply(Cp(this),e))}}function qw(i){return typeof i=="function"?Hw(i):(i instanceof IDBTransaction&&Uw(i),Pw(i,Vw())?new Proxy(i,Hp):i)}function br(i){if(i instanceof IDBRequest)return zw(i);if(Rp.has(i))return Rp.get(i);const e=qw(i);return e!==i&&(Rp.set(i,e),Am.set(e,i)),e}const Cp=i=>Am.get(i);function Fw(i,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const d=indexedDB.open(i,e),m=br(d);return r&&d.addEventListener("upgradeneeded",g=>{r(br(d.result),g.oldVersion,g.newVersion,br(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const Gw=["get","getKey","getAll","getAllKeys","count"],Qw=["put","add","delete","clear"],Ip=new Map;function lb(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Ip.get(e))return Ip.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=Qw.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Gw.includes(n)))return;const c=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&g.done]))[0]};return Ip.set(e,c),c}Bw(i=>({...i,get:(e,n,r)=>lb(e,n)||i.get(e,n,r),has:(e,n)=>!!lb(e,n)||i.has(e,n)}));class Kw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Yw(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Yw(i){return i.getComponent()?.type==="VERSION"}const qp="@firebase/app",cb="0.14.7";const Ri=new Em("@firebase/app"),$w="@firebase/app-compat",Xw="@firebase/analytics-compat",Jw="@firebase/analytics",Ww="@firebase/app-check-compat",Zw="@firebase/app-check",eN="@firebase/auth",tN="@firebase/auth-compat",nN="@firebase/database",aN="@firebase/data-connect",iN="@firebase/database-compat",rN="@firebase/functions",sN="@firebase/functions-compat",oN="@firebase/installations",lN="@firebase/installations-compat",cN="@firebase/messaging",uN="@firebase/messaging-compat",dN="@firebase/performance",fN="@firebase/performance-compat",hN="@firebase/remote-config",pN="@firebase/remote-config-compat",mN="@firebase/storage",gN="@firebase/storage-compat",yN="@firebase/firestore",vN="@firebase/ai",bN="@firebase/firestore-compat",xN="firebase",_N="12.8.0";const Fp="[DEFAULT]",EN={[qp]:"fire-core",[$w]:"fire-core-compat",[Jw]:"fire-analytics",[Xw]:"fire-analytics-compat",[Zw]:"fire-app-check",[Ww]:"fire-app-check-compat",[eN]:"fire-auth",[tN]:"fire-auth-compat",[nN]:"fire-rtdb",[aN]:"fire-data-connect",[iN]:"fire-rtdb-compat",[rN]:"fire-fn",[sN]:"fire-fn-compat",[oN]:"fire-iid",[lN]:"fire-iid-compat",[cN]:"fire-fcm",[uN]:"fire-fcm-compat",[dN]:"fire-perf",[fN]:"fire-perf-compat",[hN]:"fire-rc",[pN]:"fire-rc-compat",[mN]:"fire-gcs",[gN]:"fire-gcs-compat",[yN]:"fire-fst",[bN]:"fire-fst-compat",[vN]:"fire-vertex","fire-js":"fire-js",[xN]:"fire-js-all"};const Cd=new Map,AN=new Map,Gp=new Map;function ub(i,e){try{i.container.addComponent(e)}catch(n){Ri.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ao(i){const e=i.name;if(Gp.has(e))return Ri.debug(`There were multiple attempts to register component ${e}.`),!1;Gp.set(e,i);for(const n of Cd.values())ub(n,i);for(const n of AN.values())ub(n,i);return!0}function Sm(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function ta(i){return i==null?!1:i.settings!==void 0}const SN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xr=new Ec("app","Firebase",SN);class TN{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}}const Lo=_N;function c_(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const r={name:Fp,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw xr.create("bad-app-name",{appName:String(o)});if(n||(n=a_()),!n)throw xr.create("no-options");const c=Cd.get(o);if(c){if(Ni(n,c.options)&&Ni(r,c.config))return c;throw xr.create("duplicate-app",{appName:o})}const d=new Ow(o);for(const g of Gp.values())d.addComponent(g);const m=new TN(n,r,d);return Cd.set(o,m),m}function u_(i=Fp){const e=Cd.get(i);if(!e&&i===Fp&&a_())return c_();if(!e)throw xr.create("no-app",{appName:i});return e}function _r(i,e,n){let r=EN[i]??i;n&&(r+=`-${n}`);const o=r.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${r}" with version "${e}":`];o&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ri.warn(d.join(" "));return}Ao(new ps(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const wN="firebase-heartbeat-database",NN=1,fc="firebase-heartbeat-store";let Op=null;function d_(){return Op||(Op=Fw(wN,NN,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(fc)}catch(n){console.warn(n)}}}}).catch(i=>{throw xr.create("idb-open",{originalErrorMessage:i.message})})),Op}async function RN(i){try{const n=(await d_()).transaction(fc),r=await n.objectStore(fc).get(f_(i));return await n.done,r}catch(e){if(e instanceof Di)Ri.warn(e.message);else{const n=xr.create("idb-get",{originalErrorMessage:e?.message});Ri.warn(n.message)}}}async function db(i,e){try{const r=(await d_()).transaction(fc,"readwrite");await r.objectStore(fc).put(e,f_(i)),await r.done}catch(n){if(n instanceof Di)Ri.warn(n.message);else{const r=xr.create("idb-set",{originalErrorMessage:n?.message});Ri.warn(r.message)}}}function f_(i){return`${i.name}!${i.options.appId}`}const CN=1024,IN=30;class ON{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=fb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>IN){const o=kN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ri.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=fb(),{heartbeatsToSend:n,unsentEntries:r}=MN(this._heartbeatsCache.heartbeats),o=Rd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ri.warn(e),""}}}function fb(){return new Date().toISOString().substring(0,10)}function MN(i,e=CN){const n=[];let r=i.slice();for(const o of i){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),hb(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),hb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bw()?xw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await RN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return db(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return db(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function hb(i){return Rd(JSON.stringify({version:2,heartbeats:i})).length}function kN(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let r=1;r<i.length;r++)i[r].date<n&&(n=i[r].date,e=r);return e}function jN(i){Ao(new ps("platform-logger",e=>new Kw(e),"PRIVATE")),Ao(new ps("heartbeat",e=>new ON(e),"PRIVATE")),_r(qp,cb,i),_r(qp,cb,"esm2020"),_r("fire-js","")}jN("");var PN="firebase",VN="12.8.0";_r(PN,VN,"app");function h_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LN=h_,p_=new Ec("auth","Firebase",h_());const Id=new Em("@firebase/auth");function zN(i,...e){Id.logLevel<=Ge.WARN&&Id.warn(`Auth (${Lo}): ${i}`,...e)}function gd(i,...e){Id.logLevel<=Ge.ERROR&&Id.error(`Auth (${Lo}): ${i}`,...e)}function _a(i,...e){throw Tm(i,...e)}function Ya(i,...e){return Tm(i,...e)}function m_(i,e,n){const r={...LN(),[e]:n};return new Ec("auth","Firebase",r).create(e,{appName:i.name})}function Si(i){return m_(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tm(i,...e){if(typeof i!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(n,...r)}return p_.create(i,...e)}function Ie(i,e,...n){if(!i)throw Tm(e,...n)}function _i(i){const e="INTERNAL ASSERTION FAILED: "+i;throw gd(e),new Error(e)}function Ci(i,e){i||_i(e)}function Qp(){return typeof self<"u"&&self.location?.href||""}function UN(){return pb()==="http:"||pb()==="https:"}function pb(){return typeof self<"u"&&self.location?.protocol||null}function BN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UN()||mw()||"connection"in navigator)?navigator.onLine:!0}function HN(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Sc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ci(n>e,"Short delay should be less than long delay!"),this.isMobile=fw()||gw()}get(){return BN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wm(i,e){Ci(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class g_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const FN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GN=new Sc(3e4,6e4);function ki(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function ti(i,e,n,r,o={}){return y_(i,o,async()=>{let c={},d={};r&&(e==="GET"?d=r:c={body:JSON.stringify(r)});const m=Ac({key:i.config.apiKey,...d}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:g,...c};return pw()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&Vo(i.emulatorConfig.host)&&(y.credentials="include"),g_.fetch()(await v_(i,i.config.apiHost,n,m),y)})}async function y_(i,e,n){i._canInitEmulator=!1;const r={...qN,...e};try{const o=new KN(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw ld(i,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw ld(i,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw ld(i,"email-already-in-use",d);if(g==="USER_DISABLED")throw ld(i,"user-disabled",d);const _=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw m_(i,_,y);_a(i,_)}}catch(o){if(o instanceof Di)throw o;_a(i,"network-request-failed",{message:String(o)})}}async function Tc(i,e,n,r,o={}){const c=await ti(i,e,n,r,o);return"mfaPendingCredential"in c&&_a(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function v_(i,e,n,r){const o=`${e}${n}?${r}`,c=i,d=c.config.emulator?wm(i.config,o):`${i.config.apiScheme}://${o}`;return FN.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function QN(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class KN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ya(this.auth,"network-request-failed")),GN.get())})}}function ld(i,e,n){const r={appName:i.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Ya(i,e,r);return o.customData._tokenResponse=n,o}function mb(i){return i!==void 0&&i.enterprise!==void 0}class YN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return QN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $N(i,e){return ti(i,"GET","/v2/recaptchaConfig",ki(i,e))}async function XN(i,e){return ti(i,"POST","/v1/accounts:delete",e)}async function Od(i,e){return ti(i,"POST","/v1/accounts:lookup",e)}function rc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JN(i,e=!1){const n=Qt(i),r=await n.getIdToken(e),o=Nm(r);Ie(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:r,authTime:rc(Mp(o.auth_time)),issuedAtTime:rc(Mp(o.iat)),expirationTime:rc(Mp(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Mp(i){return Number(i)*1e3}function Nm(i){const[e,n,r]=i.split(".");if(e===void 0||n===void 0||r===void 0)return gd("JWT malformed, contained fewer than 3 sections"),null;try{const o=t_(n);return o?JSON.parse(o):(gd("Failed to decode base64 JWT payload"),null)}catch(o){return gd("Caught error parsing JWT payload as JSON",o?.toString()),null}}function gb(i){const e=Nm(i);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function So(i,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Di&&WN(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function WN({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class ZN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Kp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rc(this.lastLoginAt),this.creationTime=rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Md(i){const e=i.auth,n=await i.getIdToken(),r=await So(i,Od(e,{idToken:n}));Ie(r?.users.length,e,"internal-error");const o=r.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?b_(o.providerUserInfo):[],d=tR(i.providerData,c),m=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!d?.length,y=m?g:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Kp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,_)}async function eR(i){const e=Qt(i);await Md(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tR(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function b_(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function nR(i,e){const n=await y_(i,{},async()=>{const r=Ac({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,d=await v_(i,o,"/v1/token",`key=${c}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return i.emulatorConfig&&Vo(i.emulatorConfig.host)&&(g.credentials="include"),g_.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function aR(i,e){return ti(i,"POST","/v2/accounts:revokeToken",ki(i,e))}class yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=gb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:c}=await nR(e,n);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:c}=n,d=new yo;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),o&&(Ie(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Ie(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yo,this.toJSON())}_performRefresh(){return _i("not implemented")}}function hr(i,e){Ie(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class va{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new ZN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Kp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await So(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return JN(this,e)}reload(){return eR(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new va({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Md(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ta(this.auth.app))return Promise.reject(Si(this.auth));const e=await this.getIdToken();return await So(this,XN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:L,providerData:H,stsTokenManager:z}=n;Ie(E&&z,e,"internal-error");const Q=yo.fromJSON(this.name,z);Ie(typeof E=="string",e,"internal-error"),hr(r,e.name),hr(o,e.name),Ie(typeof T=="boolean",e,"internal-error"),Ie(typeof L=="boolean",e,"internal-error"),hr(c,e.name),hr(d,e.name),hr(m,e.name),hr(g,e.name),hr(y,e.name),hr(_,e.name);const ie=new va({uid:E,auth:e,email:o,emailVerified:T,displayName:r,isAnonymous:L,photoURL:d,phoneNumber:c,tenantId:m,stsTokenManager:Q,createdAt:y,lastLoginAt:_});return H&&Array.isArray(H)&&(ie.providerData=H.map(B=>({...B}))),g&&(ie._redirectEventId=g),ie}static async _fromIdTokenResponse(e,n,r=!1){const o=new yo;o.updateFromServerResponse(n);const c=new va({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Md(c),c}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Ie(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?b_(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,m=new yo;m.updateFromIdToken(r);const g=new va({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Kp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,y),g}}const yb=new Map;function Ei(i){Ci(i instanceof Function,"Expected a class definition");let e=yb.get(i);return e?(Ci(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,yb.set(i,e),e)}class x_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}x_.type="NONE";const vb=x_;function yd(i,e,n){return`firebase:${i}:${e}:${n}`}class vo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=yd(this.userKey,o.apiKey,c),this.fullPersistenceKey=yd("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Od(this.auth,{idToken:e}).catch(()=>{});return n?va._fromGetAccountInfoResponse(this.auth,n,e):null}return va._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new vo(Ei(vb),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||Ei(vb);const d=yd(r,e.config.apiKey,e.name);let m=null;for(const y of n)try{const _=await y._get(d);if(_){let E;if(typeof _=="string"){const T=await Od(e,{idToken:_}).catch(()=>{});if(!T)break;E=await va._fromGetAccountInfoResponse(e,T,_)}else E=va._fromJSON(e,_);y!==c&&(m=E),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new vo(c,e,r):(c=g[0],m&&await c._set(d,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new vo(c,e,r))}}function bb(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(S_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(__(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(w_(e))return"Blackberry";if(N_(e))return"Webos";if(E_(e))return"Safari";if((e.includes("chrome/")||A_(e))&&!e.includes("edge/"))return"Chrome";if(T_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(n);if(r?.length===2)return r[1]}return"Other"}function __(i=fn()){return/firefox\//i.test(i)}function E_(i=fn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function A_(i=fn()){return/crios\//i.test(i)}function S_(i=fn()){return/iemobile/i.test(i)}function T_(i=fn()){return/android/i.test(i)}function w_(i=fn()){return/blackberry/i.test(i)}function N_(i=fn()){return/webos/i.test(i)}function Rm(i=fn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function iR(i=fn()){return Rm(i)&&!!window.navigator?.standalone}function rR(){return yw()&&document.documentMode===10}function R_(i=fn()){return Rm(i)||T_(i)||N_(i)||w_(i)||/windows phone/i.test(i)||S_(i)}function C_(i,e=[]){let n;switch(i){case"Browser":n=bb(fn());break;case"Worker":n=`${bb(fn())}-${i}`;break;default:n=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Lo}/${r}`}class sR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((d,m)=>{try{const g=e(c);d(g)}catch(g){m(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function oR(i,e={}){return ti(i,"GET","/v2/passwordPolicy",ki(i,e))}const lR=6;class cR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??lR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class uR{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xb(this),this.idTokenSubscription=new xb(this),this.beforeStateQueue=new sR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ei(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await vo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Od(this,{idToken:e}),r=await va._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ta(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Md(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ta(this.app))return Promise.reject(Si(this));const n=e?Qt(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ta(this.app)?Promise.reject(Si(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ta(this.app)?Promise.reject(Si(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ei(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oR(this),n=new cR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ec("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await aR(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ei(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await vo.create(this,[Ei(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=C_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ta(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&zN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Or(i){return Qt(i)}class xb{constructor(e){this.auth=e,this.observer=null,this.addObserver=Tw(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Jd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dR(i){Jd=i}function I_(i){return Jd.loadJS(i)}function fR(){return Jd.recaptchaEnterpriseScript}function hR(){return Jd.gapiScript}function pR(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class mR{constructor(){this.enterprise=new gR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class gR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const yR="recaptcha-enterprise",O_="NO_RECAPTCHA";class vR{constructor(e){this.type=yR,this.auth=Or(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{$N(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new YN(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(g=>{m(g)})})}function o(c,d,m){const g=window.grecaptcha;mb(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{d(y)}).catch(()=>{d(O_)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mR().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{r(this.auth).then(m=>{if(!n&&mb(window.grecaptcha))o(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=fR();g.length!==0&&(g+=m),I_(g).then(()=>{o(m,c,d)}).catch(y=>{d(y)})}}).catch(m=>{d(m)})})}}async function _b(i,e,n,r=!1,o=!1){const c=new vR(i);let d;if(o)d=O_;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Dd(i,e,n,r,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await _b(i,e,n,n==="getOobCode");return r(i,c)}else return r(i,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await _b(i,e,n,n==="getOobCode");return r(i,d)}else return Promise.reject(c)})}function bR(i,e){const n=Sm(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Ni(c,e??{}))return o;_a(o,"already-initialized")}return n.initialize({options:e})}function xR(i,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ei);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function _R(i,e,n){const r=Or(i);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=M_(e),{host:d,port:m}=ER(e),g=m===null?"":`:${m}`,y={url:`${c}//${d}${g}/`},_=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Ni(y,r.config.emulator)&&Ni(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Vo(d)?(r_(`${c}//${d}${g}`),s_("Auth",!0)):AR()}function M_(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function ER(i){const e=M_(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:Eb(r.substr(c.length+1))}}else{const[c,d]=r.split(":");return{host:c,port:Eb(d)}}}function Eb(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function AR(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class Cm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,n){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}async function SR(i,e){return ti(i,"POST","/v1/accounts:update",e)}async function TR(i,e){return ti(i,"POST","/v1/accounts:signUp",e)}async function wR(i,e){return Tc(i,"POST","/v1/accounts:signInWithPassword",ki(i,e))}async function NR(i,e){return ti(i,"POST","/v1/accounts:sendOobCode",ki(i,e))}async function RR(i,e){return NR(i,e)}async function CR(i,e){return Tc(i,"POST","/v1/accounts:signInWithEmailLink",ki(i,e))}async function IR(i,e){return Tc(i,"POST","/v1/accounts:signInWithEmailLink",ki(i,e))}class hc extends Cm{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new hc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new hc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dd(e,n,"signInWithPassword",wR);case"emailLink":return CR(e,{email:this._email,oobCode:this._password});default:_a(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dd(e,r,"signUpPassword",TR);case"emailLink":return IR(e,{idToken:n,email:this._email,oobCode:this._password});default:_a(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function bo(i,e){return Tc(i,"POST","/v1/accounts:signInWithIdp",ki(i,e))}const OR="http://localhost";class ms extends Cm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_a("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...c}=n;if(!r||!o)return null;const d=new ms(r,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return bo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,bo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bo(e,n)}buildRequest(){const e={requestUri:OR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ac(n)}return e}}function MR(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DR(i){const e=Wl(Zl(i)).link,n=e?Wl(Zl(e)).deep_link_id:null,r=Wl(Zl(i)).deep_link_id;return(r?Wl(Zl(r)).link:null)||r||n||e||i}class Im{constructor(e){const n=Wl(Zl(e)),r=n.apiKey??null,o=n.oobCode??null,c=MR(n.mode??null);Ie(r&&o&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=DR(e);try{return new Im(n)}catch{return null}}}class zo{constructor(){this.providerId=zo.PROVIDER_ID}static credential(e,n){return hc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Im.parseLink(n);return Ie(r,"argument-error"),hc._fromEmailAndCode(e,r.code,r.tenantId)}}zo.PROVIDER_ID="password";zo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class D_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class wc extends D_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class pr extends wc{constructor(){super("facebook.com")}static credential(e){return ms._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";pr.PROVIDER_ID="facebook.com";class mr extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ms._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return mr.credential(n,r)}catch{return null}}}mr.GOOGLE_SIGN_IN_METHOD="google.com";mr.PROVIDER_ID="google.com";class gr extends wc{constructor(){super("github.com")}static credential(e){return ms._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gr.credential(e.oauthAccessToken)}catch{return null}}}gr.GITHUB_SIGN_IN_METHOD="github.com";gr.PROVIDER_ID="github.com";class yr extends wc{constructor(){super("twitter.com")}static credential(e,n){return ms._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return yr.credential(n,r)}catch{return null}}}yr.TWITTER_SIGN_IN_METHOD="twitter.com";yr.PROVIDER_ID="twitter.com";async function kR(i,e){return Tc(i,"POST","/v1/accounts:signUp",ki(i,e))}class gs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const c=await va._fromIdTokenResponse(e,r,o),d=Ab(r);return new gs({user:c,providerId:d,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=Ab(r);return new gs({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function Ab(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class kd extends Di{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,kd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new kd(e,n,r,o)}}function k_(i,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?kd._fromErrorAndOperation(i,c,e,r):c})}async function jR(i,e,n=!1){const r=await So(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return gs._forOperation(i,"link",r)}async function PR(i,e,n=!1){const{auth:r}=i;if(ta(r.app))return Promise.reject(Si(r));const o="reauthenticate";try{const c=await So(i,k_(r,o,e,i),n);Ie(c.idToken,r,"internal-error");const d=Nm(c.idToken);Ie(d,r,"internal-error");const{sub:m}=d;return Ie(i.uid===m,r,"user-mismatch"),gs._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&_a(r,"user-mismatch"),c}}async function j_(i,e,n=!1){if(ta(i.app))return Promise.reject(Si(i));const r="signIn",o=await k_(i,r,e),c=await gs._fromIdTokenResponse(i,r,o);return n||await i._updateCurrentUser(c.user),c}async function VR(i,e){return j_(Or(i),e)}async function P_(i){const e=Or(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LR(i,e,n){const r=Or(i);await Dd(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",RR)}async function zR(i,e,n){if(ta(i.app))return Promise.reject(Si(i));const r=Or(i),d=await Dd(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&P_(i),g}),m=await gs._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(m.user),m}function V_(i,e,n){return ta(i.app)?Promise.reject(Si(i)):VR(Qt(i),zo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&P_(i),r})}function UR(i,e){return BR(Qt(i),null,e)}async function BR(i,e,n){const{auth:r}=i,c={idToken:await i.getIdToken(),returnSecureToken:!0};n&&(c.password=n);const d=await So(i,SR(r,c));await i._updateTokensIfNecessary(d,!0)}function HR(i,e,n,r){return Qt(i).onIdTokenChanged(e,n,r)}function qR(i,e,n){return Qt(i).beforeAuthStateChanged(e,n)}function FR(i,e,n,r){return Qt(i).onAuthStateChanged(e,n,r)}const jd="__sak";class L_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jd,"1"),this.storage.removeItem(jd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const GR=1e3,QR=10;class z_ extends L_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=R_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(r);!n&&this.localCache[r]===d||this.notifyListeners(r,d)},c=this.storage.getItem(r);rR()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,QR):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},GR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}z_.type="LOCAL";const KR=z_;class U_ extends L_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}U_.type="SESSION";const B_=U_;function YR(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new Wd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(d).map(async y=>y(n.origin,c)),g=await YR(m);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wd.receivers=[];function Om(i="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return i+n}class $R{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((m,g)=>{const y=Om("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},r);d={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(T.data.response);break;default:clearTimeout(_),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function $a(){return window}function XR(i){$a().location.href=i}function H_(){return typeof $a().WorkerGlobalScope<"u"&&typeof $a().importScripts=="function"}async function JR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WR(){return navigator?.serviceWorker?.controller||null}function ZR(){return H_()?self:null}const q_="firebaseLocalStorageDb",eC=1,Pd="firebaseLocalStorage",F_="fbase_key";class Nc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zd(i,e){return i.transaction([Pd],e?"readwrite":"readonly").objectStore(Pd)}function tC(){const i=indexedDB.deleteDatabase(q_);return new Nc(i).toPromise()}function Yp(){const i=indexedDB.open(q_,eC);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Pd,{keyPath:F_})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Pd)?e(r):(r.close(),await tC(),e(await Yp()))})})}async function Sb(i,e,n){const r=Zd(i,!0).put({[F_]:e,value:n});return new Nc(r).toPromise()}async function nC(i,e){const n=Zd(i,!1).get(e),r=await new Nc(n).toPromise();return r===void 0?null:r.value}function Tb(i,e){const n=Zd(i,!0).delete(e);return new Nc(n).toPromise()}const aC=800,iC=3;class G_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>iC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return H_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wd._getInstance(ZR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await JR(),!this.activeServiceWorker)return;this.sender=new $R(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yp();return await Sb(e,jd,"1"),await Tb(e,jd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Sb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>nC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Tb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Zd(o,!1).getAll();return new Nc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}G_.type="LOCAL";const rC=G_;new Sc(3e4,6e4);function sC(i,e){return e?Ei(e):(Ie(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Mm extends Cm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oC(i){return j_(i.auth,new Mm(i),i.bypassAuthState)}function lC(i){const{auth:e,user:n}=i;return Ie(n,e,"internal-error"),PR(n,new Mm(i),i.bypassAuthState)}async function cC(i){const{auth:e,user:n}=i;return Ie(n,e,"internal-error"),jR(n,new Mm(i),i.bypassAuthState)}class Q_{constructor(e,n,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oC;case"linkViaPopup":case"linkViaRedirect":return cC;case"reauthViaPopup":case"reauthViaRedirect":return lC;default:_a(this.auth,"internal-error")}}resolve(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const uC=new Sc(2e3,1e4);class go extends Q_{constructor(e,n,r,o,c){super(e,n,o,c),this.provider=r,this.authWindow=null,this.pollId=null,go.currentPopupAction&&go.currentPopupAction.cancel(),go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Ci(this.filter.length===1,"Popup operations only handle one event");const e=Om();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ya(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ya(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,go.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ya(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uC.get())};e()}}go.currentPopupAction=null;const dC="pendingRedirect",vd=new Map;class fC extends Q_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=vd.get(this.auth._key());if(!e){try{const r=await hC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}vd.set(this.auth._key(),e)}return this.bypassAuthState||vd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hC(i,e){const n=gC(e),r=mC(i);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function pC(i,e){vd.set(i._key(),e)}function mC(i){return Ei(i._redirectPersistence)}function gC(i){return yd(dC,i.config.apiKey,i.name)}async function yC(i,e,n=!1){if(ta(i.app))return Promise.reject(Si(i));const r=Or(i),o=sC(r,e),d=await new fC(r,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}const vC=600*1e3;class bC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!K_(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Ya(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vC&&this.cachedEventUids.clear(),this.cachedEventUids.has(wb(e))}saveEventToCache(e){this.cachedEventUids.add(wb(e)),this.lastProcessedEventTime=Date.now()}}function wb(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function K_({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function xC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return K_(i);default:return!1}}async function _C(i,e={}){return ti(i,"GET","/v1/projects",e)}const EC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AC=/^https?/;async function SC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await _C(i);for(const n of e)try{if(TC(n))return}catch{}_a(i,"unauthorized-domain")}function TC(i){const e=Qp(),{protocol:n,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&r===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===r}if(!AC.test(n))return!1;if(EC.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const wC=new Sc(3e4,6e4);function Nb(){const i=$a().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function NC(i){return new Promise((e,n)=>{function r(){Nb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Nb(),n(Ya(i,"network-request-failed"))},timeout:wC.get()})}if($a().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if($a().gapi?.load)r();else{const o=pR("iframefcb");return $a()[o]=()=>{gapi.load?r():n(Ya(i,"network-request-failed"))},I_(`${hR()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw bd=null,e})}let bd=null;function RC(i){return bd=bd||NC(i),bd}const CC=new Sc(5e3,15e3),IC="__/auth/iframe",OC="emulator/auth/iframe",MC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kC(i){const e=i.config;Ie(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?wm(e,OC):`https://${i.config.authDomain}/${IC}`,r={apiKey:e.apiKey,appName:i.name,v:Lo},o=DC.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${Ac(r).slice(1)}`}async function jC(i){const e=await RC(i),n=$a().gapi;return Ie(n,i,"internal-error"),e.open({where:document.body,url:kC(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MC,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const d=Ya(i,"network-request-failed"),m=$a().setTimeout(()=>{c(d)},CC.get());function g(){$a().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{c(d)})}))}const PC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VC=500,LC=600,zC="_blank",UC="http://localhost";class Rb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BC(i,e,n,r=VC,o=LC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...PC,width:r.toString(),height:o.toString(),top:c,left:d},y=fn().toLowerCase();n&&(m=A_(y)?zC:n),__(y)&&(e=e||UC,g.scrollbars="yes");const _=Object.entries(g).reduce((T,[L,H])=>`${T}${L}=${H},`,"");if(iR(y)&&m!=="_self")return HC(e||"",m),new Rb(null);const E=window.open(e||"",m,_);Ie(E,i,"popup-blocked");try{E.focus()}catch{}return new Rb(E)}function HC(i,e){const n=document.createElement("a");n.href=i,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const qC="__/auth/handler",FC="emulator/auth/handler",GC=encodeURIComponent("fac");async function Cb(i,e,n,r,o,c){Ie(i.config.authDomain,i,"auth-domain-config-required"),Ie(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:r,v:Lo,eventId:o};if(e instanceof D_){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",Sw(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))d[_]=E}if(e instanceof wc){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(d.scopes=_.join(","))}i.tenantId&&(d.tid=i.tenantId);const m=d;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const g=await i._getAppCheckToken(),y=g?`#${GC}=${encodeURIComponent(g)}`:"";return`${QC(i)}?${Ac(m).slice(1)}${y}`}function QC({config:i}){return i.emulator?wm(i,FC):`https://${i.authDomain}/${qC}`}const Dp="webStorageSupport";class KC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=B_,this._completeRedirectFn=yC,this._overrideRedirectResult=pC}async _openPopup(e,n,r,o){Ci(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Cb(e,n,r,Qp(),o);return BC(e,c,Om())}async _openRedirect(e,n,r,o){await this._originValidation(e);const c=await Cb(e,n,r,Qp(),o);return XR(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Ci(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await jC(e),r=new bC(e);return n.register("authEvent",o=>(Ie(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dp,{type:Dp},o=>{const c=o?.[0]?.[Dp];c!==void 0&&n(!!c),_a(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return R_()||E_()||Rm()}}const YC=KC;var Ib="@firebase/auth",Ob="1.12.0";class $C{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function XC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JC(i){Ao(new ps("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=r.options;Ie(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:d,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:C_(i)},y=new uR(r,o,c,g);return xR(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ao(new ps("auth-internal",e=>{const n=Or(e.getProvider("auth").getImmediate());return(r=>new $C(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_r(Ib,Ob,XC(i)),_r(Ib,Ob,"esm2020")}const WC=300,ZC=i_("authIdTokenMaxAge")||WC;let Mb=null;const e2=i=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ZC)return;const o=n?.token;Mb!==o&&(Mb=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function t2(i=u_()){const e=Sm(i,"auth");if(e.isInitialized())return e.getImmediate();const n=bR(i,{popupRedirectResolver:YC,persistence:[rC,KR,B_]}),r=i_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const d=e2(c.toString());qR(n,d,()=>d(n.currentUser)),HR(n,m=>d(m))}}const o=n_("auth");return o&&_R(n,`http://${o}`),n}function n2(){return document.getElementsByTagName("head")?.[0]??document}dR({loadJS(i){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=Ya("internal-error");c.customData=o,n(c)},r.type="text/javascript",r.charset="UTF-8",n2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JC("Browser");var Db=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Er,Y_;(function(){var i;function e(I,R){function N(){}N.prototype=R.prototype,I.F=R.prototype,I.prototype=new N,I.prototype.constructor=I,I.D=function(k,w,P){for(var C=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)C[fe-2]=arguments[fe];return R.prototype[w].apply(k,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,R,N){N||(N=0);const k=Array(16);if(typeof R=="string")for(var w=0;w<16;++w)k[w]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(w=0;w<16;++w)k[w]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=I.g[0],N=I.g[1],w=I.g[2];let P=I.g[3],C;C=R+(P^N&(w^P))+k[0]+3614090360&4294967295,R=N+(C<<7&4294967295|C>>>25),C=P+(w^R&(N^w))+k[1]+3905402710&4294967295,P=R+(C<<12&4294967295|C>>>20),C=w+(N^P&(R^N))+k[2]+606105819&4294967295,w=P+(C<<17&4294967295|C>>>15),C=N+(R^w&(P^R))+k[3]+3250441966&4294967295,N=w+(C<<22&4294967295|C>>>10),C=R+(P^N&(w^P))+k[4]+4118548399&4294967295,R=N+(C<<7&4294967295|C>>>25),C=P+(w^R&(N^w))+k[5]+1200080426&4294967295,P=R+(C<<12&4294967295|C>>>20),C=w+(N^P&(R^N))+k[6]+2821735955&4294967295,w=P+(C<<17&4294967295|C>>>15),C=N+(R^w&(P^R))+k[7]+4249261313&4294967295,N=w+(C<<22&4294967295|C>>>10),C=R+(P^N&(w^P))+k[8]+1770035416&4294967295,R=N+(C<<7&4294967295|C>>>25),C=P+(w^R&(N^w))+k[9]+2336552879&4294967295,P=R+(C<<12&4294967295|C>>>20),C=w+(N^P&(R^N))+k[10]+4294925233&4294967295,w=P+(C<<17&4294967295|C>>>15),C=N+(R^w&(P^R))+k[11]+2304563134&4294967295,N=w+(C<<22&4294967295|C>>>10),C=R+(P^N&(w^P))+k[12]+1804603682&4294967295,R=N+(C<<7&4294967295|C>>>25),C=P+(w^R&(N^w))+k[13]+4254626195&4294967295,P=R+(C<<12&4294967295|C>>>20),C=w+(N^P&(R^N))+k[14]+2792965006&4294967295,w=P+(C<<17&4294967295|C>>>15),C=N+(R^w&(P^R))+k[15]+1236535329&4294967295,N=w+(C<<22&4294967295|C>>>10),C=R+(w^P&(N^w))+k[1]+4129170786&4294967295,R=N+(C<<5&4294967295|C>>>27),C=P+(N^w&(R^N))+k[6]+3225465664&4294967295,P=R+(C<<9&4294967295|C>>>23),C=w+(R^N&(P^R))+k[11]+643717713&4294967295,w=P+(C<<14&4294967295|C>>>18),C=N+(P^R&(w^P))+k[0]+3921069994&4294967295,N=w+(C<<20&4294967295|C>>>12),C=R+(w^P&(N^w))+k[5]+3593408605&4294967295,R=N+(C<<5&4294967295|C>>>27),C=P+(N^w&(R^N))+k[10]+38016083&4294967295,P=R+(C<<9&4294967295|C>>>23),C=w+(R^N&(P^R))+k[15]+3634488961&4294967295,w=P+(C<<14&4294967295|C>>>18),C=N+(P^R&(w^P))+k[4]+3889429448&4294967295,N=w+(C<<20&4294967295|C>>>12),C=R+(w^P&(N^w))+k[9]+568446438&4294967295,R=N+(C<<5&4294967295|C>>>27),C=P+(N^w&(R^N))+k[14]+3275163606&4294967295,P=R+(C<<9&4294967295|C>>>23),C=w+(R^N&(P^R))+k[3]+4107603335&4294967295,w=P+(C<<14&4294967295|C>>>18),C=N+(P^R&(w^P))+k[8]+1163531501&4294967295,N=w+(C<<20&4294967295|C>>>12),C=R+(w^P&(N^w))+k[13]+2850285829&4294967295,R=N+(C<<5&4294967295|C>>>27),C=P+(N^w&(R^N))+k[2]+4243563512&4294967295,P=R+(C<<9&4294967295|C>>>23),C=w+(R^N&(P^R))+k[7]+1735328473&4294967295,w=P+(C<<14&4294967295|C>>>18),C=N+(P^R&(w^P))+k[12]+2368359562&4294967295,N=w+(C<<20&4294967295|C>>>12),C=R+(N^w^P)+k[5]+4294588738&4294967295,R=N+(C<<4&4294967295|C>>>28),C=P+(R^N^w)+k[8]+2272392833&4294967295,P=R+(C<<11&4294967295|C>>>21),C=w+(P^R^N)+k[11]+1839030562&4294967295,w=P+(C<<16&4294967295|C>>>16),C=N+(w^P^R)+k[14]+4259657740&4294967295,N=w+(C<<23&4294967295|C>>>9),C=R+(N^w^P)+k[1]+2763975236&4294967295,R=N+(C<<4&4294967295|C>>>28),C=P+(R^N^w)+k[4]+1272893353&4294967295,P=R+(C<<11&4294967295|C>>>21),C=w+(P^R^N)+k[7]+4139469664&4294967295,w=P+(C<<16&4294967295|C>>>16),C=N+(w^P^R)+k[10]+3200236656&4294967295,N=w+(C<<23&4294967295|C>>>9),C=R+(N^w^P)+k[13]+681279174&4294967295,R=N+(C<<4&4294967295|C>>>28),C=P+(R^N^w)+k[0]+3936430074&4294967295,P=R+(C<<11&4294967295|C>>>21),C=w+(P^R^N)+k[3]+3572445317&4294967295,w=P+(C<<16&4294967295|C>>>16),C=N+(w^P^R)+k[6]+76029189&4294967295,N=w+(C<<23&4294967295|C>>>9),C=R+(N^w^P)+k[9]+3654602809&4294967295,R=N+(C<<4&4294967295|C>>>28),C=P+(R^N^w)+k[12]+3873151461&4294967295,P=R+(C<<11&4294967295|C>>>21),C=w+(P^R^N)+k[15]+530742520&4294967295,w=P+(C<<16&4294967295|C>>>16),C=N+(w^P^R)+k[2]+3299628645&4294967295,N=w+(C<<23&4294967295|C>>>9),C=R+(w^(N|~P))+k[0]+4096336452&4294967295,R=N+(C<<6&4294967295|C>>>26),C=P+(N^(R|~w))+k[7]+1126891415&4294967295,P=R+(C<<10&4294967295|C>>>22),C=w+(R^(P|~N))+k[14]+2878612391&4294967295,w=P+(C<<15&4294967295|C>>>17),C=N+(P^(w|~R))+k[5]+4237533241&4294967295,N=w+(C<<21&4294967295|C>>>11),C=R+(w^(N|~P))+k[12]+1700485571&4294967295,R=N+(C<<6&4294967295|C>>>26),C=P+(N^(R|~w))+k[3]+2399980690&4294967295,P=R+(C<<10&4294967295|C>>>22),C=w+(R^(P|~N))+k[10]+4293915773&4294967295,w=P+(C<<15&4294967295|C>>>17),C=N+(P^(w|~R))+k[1]+2240044497&4294967295,N=w+(C<<21&4294967295|C>>>11),C=R+(w^(N|~P))+k[8]+1873313359&4294967295,R=N+(C<<6&4294967295|C>>>26),C=P+(N^(R|~w))+k[15]+4264355552&4294967295,P=R+(C<<10&4294967295|C>>>22),C=w+(R^(P|~N))+k[6]+2734768916&4294967295,w=P+(C<<15&4294967295|C>>>17),C=N+(P^(w|~R))+k[13]+1309151649&4294967295,N=w+(C<<21&4294967295|C>>>11),C=R+(w^(N|~P))+k[4]+4149444226&4294967295,R=N+(C<<6&4294967295|C>>>26),C=P+(N^(R|~w))+k[11]+3174756917&4294967295,P=R+(C<<10&4294967295|C>>>22),C=w+(R^(P|~N))+k[2]+718787259&4294967295,w=P+(C<<15&4294967295|C>>>17),C=N+(P^(w|~R))+k[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(w+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+w&4294967295,I.g[3]=I.g[3]+P&4294967295}r.prototype.v=function(I,R){R===void 0&&(R=I.length);const N=R-this.blockSize,k=this.C;let w=this.h,P=0;for(;P<R;){if(w==0)for(;P<=N;)o(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<R;)if(k[w++]=I.charCodeAt(P++),w==this.blockSize){o(this,k),w=0;break}}else for(;P<R;)if(k[w++]=I[P++],w==this.blockSize){o(this,k),w=0;break}}this.h=w,this.o+=R},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;R=this.o*8;for(var N=I.length-8;N<I.length;++N)I[N]=R&255,R/=256;for(this.v(I),I=Array(16),R=0,N=0;N<4;++N)for(let k=0;k<32;k+=8)I[R++]=this.g[N]>>>k&255;return I};function c(I,R){var N=m;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=R(I)}function d(I,R){this.h=R;const N=[];let k=!0;for(let w=I.length-1;w>=0;w--){const P=I[w]|0;k&&P==R||(N[w]=P,k=!1)}this.g=N}var m={};function g(I){return-128<=I&&I<128?c(I,function(R){return new d([R|0],R<0?-1:0)}):new d([I|0],I<0?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return E;if(I<0)return Q(y(-I));const R=[];let N=1;for(let k=0;I>=N;k++)R[k]=I/N|0,N*=4294967296;return new d(R,0)}function _(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return Q(_(I.substring(1),R));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=y(Math.pow(R,8));let k=E;for(let P=0;P<I.length;P+=8){var w=Math.min(8,I.length-P);const C=parseInt(I.substring(P,P+w),R);w<8?(w=y(Math.pow(R,w)),k=k.j(w).add(y(C))):(k=k.j(N),k=k.add(y(C)))}return k}var E=g(0),T=g(1),L=g(16777216);i=d.prototype,i.m=function(){if(z(this))return-Q(this).m();let I=0,R=1;for(let N=0;N<this.g.length;N++){const k=this.i(N);I+=(k>=0?k:4294967296+k)*R,R*=4294967296}return I},i.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(H(this))return"0";if(z(this))return"-"+Q(this).toString(I);const R=y(Math.pow(I,6));var N=this;let k="";for(;;){const w=me(N,R).g;N=ie(N,w.j(R));let P=((N.g.length>0?N.g[0]:N.h)>>>0).toString(I);if(N=w,H(N))return P+k;for(;P.length<6;)P="0"+P;k=P+k}},i.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function H(I){if(I.h!=0)return!1;for(let R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function z(I){return I.h==-1}i.l=function(I){return I=ie(this,I),z(I)?-1:H(I)?0:1};function Q(I){const R=I.g.length,N=[];for(let k=0;k<R;k++)N[k]=~I.g[k];return new d(N,~I.h).add(T)}i.abs=function(){return z(this)?Q(this):this},i.add=function(I){const R=Math.max(this.g.length,I.g.length),N=[];let k=0;for(let w=0;w<=R;w++){let P=k+(this.i(w)&65535)+(I.i(w)&65535),C=(P>>>16)+(this.i(w)>>>16)+(I.i(w)>>>16);k=C>>>16,P&=65535,C&=65535,N[w]=C<<16|P}return new d(N,N[N.length-1]&-2147483648?-1:0)};function ie(I,R){return I.add(Q(R))}i.j=function(I){if(H(this)||H(I))return E;if(z(this))return z(I)?Q(this).j(Q(I)):Q(Q(this).j(I));if(z(I))return Q(this.j(Q(I)));if(this.l(L)<0&&I.l(L)<0)return y(this.m()*I.m());const R=this.g.length+I.g.length,N=[];for(var k=0;k<2*R;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(let w=0;w<I.g.length;w++){const P=this.i(k)>>>16,C=this.i(k)&65535,fe=I.i(w)>>>16,ze=I.i(w)&65535;N[2*k+2*w]+=C*ze,B(N,2*k+2*w),N[2*k+2*w+1]+=P*ze,B(N,2*k+2*w+1),N[2*k+2*w+1]+=C*fe,B(N,2*k+2*w+1),N[2*k+2*w+2]+=P*fe,B(N,2*k+2*w+2)}for(I=0;I<R;I++)N[I]=N[2*I+1]<<16|N[2*I];for(I=R;I<2*R;I++)N[I]=0;return new d(N,0)};function B(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function se(I,R){this.g=I,this.h=R}function me(I,R){if(H(R))throw Error("division by zero");if(H(I))return new se(E,E);if(z(I))return R=me(Q(I),R),new se(Q(R.g),Q(R.h));if(z(R))return R=me(I,Q(R)),new se(Q(R.g),R.h);if(I.g.length>30){if(z(I)||z(R))throw Error("slowDivide_ only works with positive integers.");for(var N=T,k=R;k.l(I)<=0;)N=Ae(N),k=Ae(k);var w=ye(N,1),P=ye(k,1);for(k=ye(k,2),N=ye(N,2);!H(k);){var C=P.add(k);C.l(I)<=0&&(w=w.add(N),P=C),k=ye(k,1),N=ye(N,1)}return R=ie(I,w.j(R)),new se(w,R)}for(w=E;I.l(R)>=0;){for(N=Math.max(1,Math.floor(I.m()/R.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),P=y(N),C=P.j(R);z(C)||C.l(I)>0;)N-=k,P=y(N),C=P.j(R);H(P)&&(P=T),w=w.add(P),I=ie(I,C)}return new se(w,I)}i.B=function(I){return me(this,I).h},i.and=function(I){const R=Math.max(this.g.length,I.g.length),N=[];for(let k=0;k<R;k++)N[k]=this.i(k)&I.i(k);return new d(N,this.h&I.h)},i.or=function(I){const R=Math.max(this.g.length,I.g.length),N=[];for(let k=0;k<R;k++)N[k]=this.i(k)|I.i(k);return new d(N,this.h|I.h)},i.xor=function(I){const R=Math.max(this.g.length,I.g.length),N=[];for(let k=0;k<R;k++)N[k]=this.i(k)^I.i(k);return new d(N,this.h^I.h)};function Ae(I){const R=I.g.length+1,N=[];for(let k=0;k<R;k++)N[k]=I.i(k)<<1|I.i(k-1)>>>31;return new d(N,I.h)}function ye(I,R){const N=R>>5;R%=32;const k=I.g.length-N,w=[];for(let P=0;P<k;P++)w[P]=R>0?I.i(P+N)>>>R|I.i(P+N+1)<<32-R:I.i(P+N);return new d(w,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Y_=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=_,Er=d}).apply(typeof Db<"u"?Db:typeof self<"u"?self:typeof window<"u"?window:{});var cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var $_,ec,X_,xd,$p,J_,W_,Z_;(function(){var i,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof cd=="object"&&cd];for(var v=0;v<u.length;++v){var x=u[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function o(u,v){if(v)e:{var x=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var q=u[S];if(!(q in x))break e;x=x[q]}u=u[u.length-1],S=x[u],v=v(S),v!=S&&v!=null&&e(x,u,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(v){var x=[],S;for(S in v)Object.prototype.hasOwnProperty.call(v,S)&&x.push([S,v[S]]);return x}});var c=c||{},d=this||self;function m(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function g(u,v,x){return u.call.apply(u.bind,arguments)}function y(u,v,x){return y=g,y.apply(null,arguments)}function _(u,v){var x=Array.prototype.slice.call(arguments,1);return function(){var S=x.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function E(u,v){function x(){}x.prototype=v.prototype,u.Z=v.prototype,u.prototype=new x,u.prototype.constructor=u,u.Ob=function(S,q,Y){for(var ue=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)ue[Pe-2]=arguments[Pe];return v.prototype[q].apply(S,ue)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function L(u){const v=u.length;if(v>0){const x=Array(v);for(let S=0;S<v;S++)x[S]=u[S];return x}return[]}function H(u,v){for(let S=1;S<arguments.length;S++){const q=arguments[S];var x=typeof q;if(x=x!="object"?x:q?Array.isArray(q)?"array":x:"null",x=="array"||x=="object"&&typeof q.length=="number"){x=u.length||0;const Y=q.length||0;u.length=x+Y;for(let ue=0;ue<Y;ue++)u[x+ue]=q[ue]}else u.push(q)}}class z{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function Q(u){d.setTimeout(()=>{throw u},0)}function ie(){var u=I;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class B{constructor(){this.h=this.g=null}add(v,x){const S=se.get();S.set(v,x),this.h?this.h.next=S:this.g=S,this.h=S}}var se=new z(()=>new me,u=>u.reset());class me{constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,ye=!1,I=new B,R=()=>{const u=Promise.resolve(void 0);Ae=()=>{u.then(N)}};function N(){for(var u;u=ie();){try{u.h.call(u.g)}catch(x){Q(x)}var v=se;v.j(u),v.h<100&&(v.h++,u.next=v.g,v.g=u)}ye=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function w(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};d.addEventListener("test",x,v),d.removeEventListener("test",x,v)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function fe(u,v){w.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,v)}E(fe,w),fe.prototype.init=function(u,v){const x=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget,v||(x=="mouseover"?v=u.fromElement:x=="mouseout"&&(v=u.toElement)),this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),X=0;function le(u,v,x,S,q){this.listener=u,this.proxy=null,this.src=v,this.type=x,this.capture=!!S,this.ha=q,this.key=++X,this.da=this.fa=!1}function Z(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ve(u,v,x){for(const S in u)v.call(x,u[S],S,u)}function _e(u,v){for(const x in u)v.call(void 0,u[x],x,u)}function j(u){const v={};for(const x in u)v[x]=u[x];return v}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(u,v){let x,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(x in S)u[x]=S[x];for(let Y=0;Y<J.length;Y++)x=J[Y],Object.prototype.hasOwnProperty.call(S,x)&&(u[x]=S[x])}}function de(u){this.src=u,this.g={},this.h=0}de.prototype.add=function(u,v,x,S,q){const Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);const ue=Ne(u,v,S,q);return ue>-1?(v=u[ue],x||(v.fa=!1)):(v=new le(v,this.src,Y,!!S,q),v.fa=x,u.push(v)),v};function Ee(u,v){const x=v.type;if(x in u.g){var S=u.g[x],q=Array.prototype.indexOf.call(S,v,void 0),Y;(Y=q>=0)&&Array.prototype.splice.call(S,q,1),Y&&(Z(v),u.g[x].length==0&&(delete u.g[x],u.h--))}}function Ne(u,v,x,S){for(let q=0;q<u.length;++q){const Y=u[q];if(!Y.da&&Y.listener==v&&Y.capture==!!x&&Y.ha==S)return q}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),Je={};function Ue(u,v,x,S,q){if(Array.isArray(v)){for(let Y=0;Y<v.length;Y++)Ue(u,v[Y],x,S,q);return null}return x=et(x),u&&u[ze]?u.J(v,x,m(S)?!!S.capture:!1,q):Jt(u,v,x,!1,S,q)}function Jt(u,v,x,S,q,Y){if(!v)throw Error("Invalid event type");const ue=m(q)?!!q.capture:!!q;let Pe=ce(u);if(Pe||(u[Me]=Pe=new de(u)),x=Pe.add(v,x,S,ue,Y),x.proxy)return x;if(S=mn(),x.proxy=S,S.src=u,S.listener=x,u.addEventListener)P||(q=ue),q===void 0&&(q=!1),u.addEventListener(v.toString(),S,q);else if(u.attachEvent)u.attachEvent(be(v.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return x}function mn(){function u(x){return v.call(u.src,u.listener,x)}const v=D;return u}function ra(u,v,x,S,q){if(Array.isArray(v))for(var Y=0;Y<v.length;Y++)ra(u,v[Y],x,S,q);else S=m(S)?!!S.capture:!!S,x=et(x),u&&u[ze]?(u=u.i,Y=String(v).toString(),Y in u.g&&(v=u.g[Y],x=Ne(v,x,S,q),x>-1&&(Z(v[x]),Array.prototype.splice.call(v,x,1),v.length==0&&(delete u.g[Y],u.h--)))):u&&(u=ce(u))&&(v=u.g[v.toString()],u=-1,v&&(u=Ne(v,x,S,q)),(x=u>-1?v[u]:null)&&W(x))}function W(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[ze])Ee(v.i,u);else{var x=u.type,S=u.proxy;v.removeEventListener?v.removeEventListener(x,S,u.capture):v.detachEvent?v.detachEvent(be(x),S):v.addListener&&v.removeListener&&v.removeListener(S),(x=ce(v))?(Ee(x,u),x.h==0&&(x.src=null,v[Me]=null)):Z(u)}}}function be(u){return u in Je?Je[u]:Je[u]="on"+u}function D(u,v){if(u.da)u=!0;else{v=new fe(v,this);const x=u.listener,S=u.ha||u.src;u.fa&&W(u),u=x.call(S,v)}return u}function ce(u){return u=u[Me],u instanceof de?u:null}var Se="__closure_events_fn_"+(Math.random()*1e9>>>0);function et(u){return typeof u=="function"?u:(u[Se]||(u[Se]=function(v){return u.handleEvent(v)}),u[Se])}function $e(){k.call(this),this.i=new de(this),this.M=this,this.G=null}E($e,k),$e.prototype[ze]=!0,$e.prototype.removeEventListener=function(u,v,x,S){ra(this,u,v,x,S)};function ct(u,v){var x,S=u.G;if(S)for(x=[];S;S=S.G)x.push(S);if(u=u.M,S=v.type||v,typeof v=="string")v=new w(v,u);else if(v instanceof w)v.target=v.target||u;else{var q=v;v=new w(S,u),oe(v,q)}q=!0;let Y,ue;if(x)for(ue=x.length-1;ue>=0;ue--)Y=v.g=x[ue],q=Aa(Y,S,!0,v)&&q;if(Y=v.g=u,q=Aa(Y,S,!0,v)&&q,q=Aa(Y,S,!1,v)&&q,x)for(ue=0;ue<x.length;ue++)Y=v.g=x[ue],q=Aa(Y,S,!1,v)&&q}$e.prototype.N=function(){if($e.Z.N.call(this),this.i){var u=this.i;for(const v in u.g){const x=u.g[v];for(let S=0;S<x.length;S++)Z(x[S]);delete u.g[v],u.h--}}this.G=null},$e.prototype.J=function(u,v,x,S){return this.i.add(String(u),v,!1,x,S)},$e.prototype.K=function(u,v,x,S){return this.i.add(String(u),v,!0,x,S)};function Aa(u,v,x,S){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();let q=!0;for(let Y=0;Y<v.length;++Y){const ue=v[Y];if(ue&&!ue.da&&ue.capture==x){const Pe=ue.listener,Rt=ue.ha||ue.src;ue.fa&&Ee(u.i,ue),q=Pe.call(Rt,S)!==!1&&q}}return q&&!S.defaultPrevented}function Qo(u,v){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:d.setTimeout(u,v||0)}function Bn(u){u.g=Qo(()=>{u.g=null,u.i&&(u.i=!1,Bn(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class mt extends k{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Bn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sa(u){k.call(this),this.h=u,this.g={}}E(Sa,k);var Ko=[];function Yo(u){ve(u.g,function(v,x){this.g.hasOwnProperty(x)&&W(v)},u),u.g={}}Sa.prototype.N=function(){Sa.Z.N.call(this),Yo(this)},Sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ji=d.JSON.stringify,_f=d.JSON.parse,Dc=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function kc(){}function jc(){}var sa={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){w.call(this,"d")}E(Wt,w);function Hn(){w.call(this,"c")}E(Hn,w);var Nt={},Pc=null;function Ss(){return Pc=Pc||new $e}Nt.Ia="serverreachability";function Vc(u){w.call(this,Nt.Ia,u)}E(Vc,w);function Ta(u){const v=Ss();ct(v,new Vc(v))}Nt.STAT_EVENT="statevent";function jr(u,v){w.call(this,Nt.STAT_EVENT,u),this.stat=v}E(jr,w);function Dt(u){const v=Ss();ct(v,new jr(v,u))}Nt.Ja="timingevent";function wa(u,v){w.call(this,Nt.Ja,u),this.size=v}E(wa,w);function Na(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},v)}function oa(){this.g=!0}oa.prototype.ua=function(){this.g=!1};function Ef(u,v,x,S,q,Y){u.info(function(){if(u.g)if(Y){var ue="",Pe=Y.split("&");for(let tt=0;tt<Pe.length;tt++){var Rt=Pe[tt].split("=");if(Rt.length>1){const xt=Rt[0];Rt=Rt[1];const Qn=xt.split("_");ue=Qn.length>=2&&Qn[1]=="type"?ue+(xt+"="+Rt+"&"):ue+(xt+"=redacted&")}}}else ue=null;else ue=Y;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+v+`
`+x+`
`+ue})}function Lc(u,v,x,S,q,Y,ue){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+v+`
`+x+`
`+Y+" "+ue})}function Ra(u,v,x,S){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+Af(u,x)+(S?" "+S:"")})}function Pr(u,v){u.info(function(){return"TIMEOUT: "+v})}oa.prototype.info=function(){};function Af(u,v){if(!u.g)return v;if(!v)return null;try{const Y=JSON.parse(v);if(Y){for(u=0;u<Y.length;u++)if(Array.isArray(Y[u])){var x=Y[u];if(!(x.length<2)){var S=x[1];if(Array.isArray(S)&&!(S.length<1)){var q=S[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ue=1;ue<S.length;ue++)S[ue]=""}}}}return ji(Y)}catch{return v}}var Vr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$o={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xo;function Lr(){}E(Lr,kc),Lr.prototype.g=function(){return new XMLHttpRequest},Xo=new Lr;function ni(u){return encodeURIComponent(String(u))}function zc(u){var v=1;u=u.split(":");const x=[];for(;v>0&&u.length;)x.push(u.shift()),v--;return u.length&&x.push(u.join(":")),x}function la(u,v,x,S){this.j=u,this.i=v,this.l=x,this.S=S||1,this.V=new Sa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ca}function ca(){this.i=null,this.g="",this.h=!1}var kt={},Kt={};function Ca(u,v,x){u.M=1,u.A=zr(Pt(v)),u.u=x,u.R=!0,Ts(u,null)}function Ts(u,v){u.F=Date.now(),Ia(u),u.B=Pt(u.A);var x=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),Cs(x.i,"t",S),u.C=0,x=u.j.L,u.h=new ca,u.g=eu(u.j,x?v:null,!u.u),u.P>0&&(u.O=new mt(y(u.Y,u,u.g),u.P)),v=u.V,x=u.g,S=u.ba;var q="readystatechange";Array.isArray(q)||(q&&(Ko[0]=q.toString()),q=Ko);for(let Y=0;Y<q.length;Y++){const ue=Ue(x,q[Y],S||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=u.J?j(u.J):{},u.u?(u.v||(u.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,v)):(u.v="GET",u.g.ea(u.B,u.v,null,v)),Ta(),Ef(u.i,u.v,u.B,u.l,u.S,u.u)}la.prototype.ba=function(u){u=u.target;const v=this.O;v&&fa(u)==3?v.j():this.Y(u)},la.prototype.Y=function(u){try{if(u==this.g)e:{const Pe=fa(this.g),Rt=this.g.ya(),tt=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||Zt(this.g)))){this.K||Pe!=4||Rt==7||(Rt==8||tt<=0?Ta(3):Ta(2)),Oa(this);var v=this.g.ca();this.X=v;var x=Sf(this);if(this.o=v==200,Lc(this.i,this.v,this.B,this.l,this.S,Pe,v),this.o){if(this.U&&!this.L){t:{if(this.g){var S,q=this.g;if((S=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(S)){var Y=S;break t}}Y=null}if(u=Y)Ra(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ma(this,u);else{this.o=!1,this.m=3,Dt(12),Cn(this),qn(this);break e}}if(this.R){u=!0;let xt;for(;!this.K&&this.C<x.length;)if(xt=Bc(this,x),xt==Kt){Pe==4&&(this.m=4,Dt(14),u=!1),Ra(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==kt){this.m=4,Dt(15),Ra(this.i,this.l,x,"[Invalid Chunk]"),u=!1;break}else Ra(this.i,this.l,xt,null),Ma(this,xt);if(Uc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||x.length!=0||this.h.h||(this.m=1,Dt(16),u=!1),this.o=this.o&&u,!u)Ra(this.i,this.l,x,"[Invalid Chunked Response]"),Cn(this),qn(this);else if(x.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),dl(ue),ue.P=!0,Dt(11))}}else Ra(this.i,this.l,x,null),Ma(this,x);Pe==4&&Cn(this),this.o&&!this.K&&(Pe==4?Xc(this.j,this):(this.o=!1,Ia(this)))}else ii(this.g),v==400&&x.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),Cn(this),qn(this)}}}catch{}};function Sf(u){if(!Uc(u))return u.g.la();const v=Zt(u.g);if(v==="")return"";let x="";const S=v.length,q=fa(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Cn(u),qn(u),"";u.h.i=new d.TextDecoder}for(let Y=0;Y<S;Y++)u.h.h=!0,x+=u.h.i.decode(v[Y],{stream:!(q&&Y==S-1)});return v.length=0,u.h.g+=x,u.C=0,u.h.g}function Uc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Bc(u,v){var x=u.C,S=v.indexOf(`
`,x);return S==-1?Kt:(x=Number(v.substring(x,S)),isNaN(x)?kt:(S+=1,S+x>v.length?Kt:(v=v.slice(S,S+x),u.C=S+x,v)))}la.prototype.cancel=function(){this.K=!0,Cn(this)};function Ia(u){u.T=Date.now()+u.H,ws(u,u.H)}function ws(u,v){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Na(y(u.aa,u),v)}function Oa(u){u.D&&(d.clearTimeout(u.D),u.D=null)}la.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Pr(this.i,this.B),this.M!=2&&(Ta(),Dt(17)),Cn(this),this.m=2,qn(this)):ws(this,this.T-u)};function qn(u){u.j.I==0||u.K||Xc(u.j,u)}function Cn(u){Oa(u);var v=u.O;v&&typeof v.dispose=="function"&&v.dispose(),u.O=null,Yo(u.V),u.g&&(v=u.g,u.g=null,v.abort(),v.dispose())}function Ma(u,v){try{var x=u.j;if(x.I!=0&&(x.g==u||ka(x.h,u))){if(!u.L&&ka(x.h,u)&&x.I==3){try{var S=x.Ba.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<u.F)ks(x),qi(x);else break e;Qr(x),Dt(18)}}else x.xa=q[1],0<x.xa-x.K&&q[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Na(y(x.Va,x),6e3));Da(x.h)<=1&&x.ta&&(x.ta=void 0)}else Ua(x,11)}else if((u.L||x.g==u)&&ks(x),!C(v))for(q=x.Ba.g.parse(v),v=0;v<q.length;v++){let tt=q[v];const xt=tt[0];if(!(xt<=x.K))if(x.K=xt,tt=tt[1],x.I==2)if(tt[0]=="c"){x.M=tt[1],x.ba=tt[2];const Qn=tt[3];Qn!=null&&(x.ka=Qn,x.j.info("VER="+x.ka));const Ba=tt[4];Ba!=null&&(x.za=Ba,x.j.info("SVER="+x.za));const ha=tt[5];ha!=null&&typeof ha=="number"&&ha>0&&(S=1.5*ha,x.O=S,x.j.info("backChannelRequestTimeoutMs_="+S)),S=x;const pa=u.g;if(pa){const Kr=pa.g?pa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kr){var Y=S.h;Y.g||Kr.indexOf("spdy")==-1&&Kr.indexOf("quic")==-1&&Kr.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Zo(Y,Y.h),Y.h=null))}if(S.G){const js=pa.g?pa.g.getResponseHeader("X-HTTP-Session-Id"):null;js&&(S.wa=js,st(S.J,S.G,js))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-u.F,x.j.info("Handshake RTT: "+x.T+"ms")),S=x;var ue=u;if(S.na=Zc(S,S.L?S.ba:null,S.W),ue.L){el(S.h,ue);var Pe=ue,Rt=S.O;Rt&&(Pe.H=Rt),Pe.D&&(Oa(Pe),Ia(Pe)),S.g=ue}else Yc(S);x.i.length>0&&za(x)}else tt[0]!="stop"&&tt[0]!="close"||Ua(x,7);else x.I==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Ua(x,7):cl(x):tt[0]!="noop"&&x.l&&x.l.qa(tt),x.A=0)}}Ta(4)}catch{}}var jt=class{constructor(u,v){this.g=u,this.map=v}};function Jo(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Wo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Da(u){return u.h?1:u.g?u.g.size:0}function ka(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function Zo(u,v){u.g?u.g.add(v):u.h=v}function el(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}Jo.prototype.cancel=function(){if(this.i=tl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function tl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const x of u.g.values())v=v.concat(x.G);return v}return L(u.i)}var Hc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ns(u,v){if(u){u=u.split("&");for(let x=0;x<u.length;x++){const S=u[x].indexOf("=");let q,Y=null;S>=0?(q=u[x].substring(0,S),Y=u[x].substring(S+1)):q=u[x],v(q,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function In(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;u instanceof In?(this.l=u.l,Yt(this,u.j),this.o=u.o,this.g=u.g,Pi(this,u.u),this.h=u.h,nl(this,Qc(u.i)),this.m=u.m):u&&(v=String(u).match(Hc))?(this.l=!1,Yt(this,v[1]||"",!0),this.o=ja(v[2]||""),this.g=ja(v[3]||"",!0),Pi(this,v[4]),this.h=ja(v[5]||"",!0),nl(this,v[6]||"",!0),this.m=ja(v[7]||"")):(this.l=!1,this.i=new Li(null,this.l))}In.prototype.toString=function(){const u=[];var v=this.j;v&&u.push(Ur(v,Rs,!0),":");var x=this.g;return(x||v=="file")&&(u.push("//"),(v=this.o)&&u.push(Ur(v,Rs,!0),"@"),u.push(ni(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&u.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(Ur(x,x.charAt(0)=="/"?al:qc,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",Ur(x,Fc)),u.join("")},In.prototype.resolve=function(u){const v=Pt(this);let x=!!u.j;x?Yt(v,u.j):x=!!u.o,x?v.o=u.o:x=!!u.g,x?v.g=u.g:x=u.u!=null;var S=u.h;if(x)Pi(v,u.u);else if(x=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var q=v.h.lastIndexOf("/");q!=-1&&(S=v.h.slice(0,q+1)+S)}if(q=S,q==".."||q==".")S="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){S=q.lastIndexOf("/",0)==0,q=q.split("/");const Y=[];for(let ue=0;ue<q.length;){const Pe=q[ue++];Pe=="."?S&&ue==q.length&&Y.push(""):Pe==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),S&&ue==q.length&&Y.push("")):(Y.push(Pe),S=!0)}S=Y.join("/")}else S=q}return x?v.h=S:x=u.i.toString()!=="",x?nl(v,Qc(u.i)):x=!!u.m,x&&(v.m=u.m),v};function Pt(u){return new In(u)}function Yt(u,v,x){u.j=x?ja(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function Pi(u,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);u.u=v}else u.u=null}function nl(u,v,x){v instanceof Li?(u.i=v,Is(u.i,u.l)):(x||(v=Ur(v,Vi)),u.i=new Li(v,u.l))}function st(u,v,x){u.i.set(v,x)}function zr(u){return st(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ja(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ur(u,v,x){return typeof u=="string"?(u=encodeURI(u).replace(v,gn),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function gn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Rs=/[#\/\?@]/g,qc=/[#\?:]/g,al=/[#\?]/g,Vi=/[#\?@]/g,Fc=/#/g;function Li(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function yn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ns(u.i,function(v,x){u.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}i=Li.prototype,i.add=function(u,v){yn(this),this.i=null,u=zi(this,u);let x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(v),this.h+=1,this};function Gc(u,v){yn(u),v=zi(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function il(u,v){return yn(u),v=zi(u,v),u.g.has(v)}i.forEach=function(u,v){yn(this),this.g.forEach(function(x,S){x.forEach(function(q){u.call(v,q,S,this)},this)},this)};function rl(u,v){yn(u);let x=[];if(typeof v=="string")il(u,v)&&(x=x.concat(u.g.get(zi(u,v))));else for(u=Array.from(u.g.values()),v=0;v<u.length;v++)x=x.concat(u[v]);return x}i.set=function(u,v){return yn(this),this.i=null,u=zi(this,u),il(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},i.get=function(u,v){return u?(u=rl(this,u),u.length>0?String(u[0]):v):v};function Cs(u,v,x){Gc(u,v),x.length>0&&(u.i=null,u.g.set(zi(u,v),L(x)),u.h+=x.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(let S=0;S<v.length;S++){var x=v[S];const q=ni(x);x=rl(this,x);for(let Y=0;Y<x.length;Y++){let ue=q;x[Y]!==""&&(ue+="="+ni(x[Y])),u.push(ue)}}return this.i=u.join("&")};function Qc(u){const v=new Li;return v.i=u.i,u.g&&(v.g=new Map(u.g),v.h=u.h),v}function zi(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function Is(u,v){v&&!u.j&&(yn(u),u.i=null,u.g.forEach(function(x,S){const q=S.toLowerCase();S!=q&&(Gc(this,S),Cs(this,q,x))},u)),u.j=v}function ua(u,v){const x=new oa;if(d.Image){const S=new Image;S.onload=_(Fn,x,"TestLoadImage: loaded",!0,v,S),S.onerror=_(Fn,x,"TestLoadImage: error",!1,v,S),S.onabort=_(Fn,x,"TestLoadImage: abort",!1,v,S),S.ontimeout=_(Fn,x,"TestLoadImage: timeout",!1,v,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else v(!1)}function sl(u,v){const x=new oa,S=new AbortController,q=setTimeout(()=>{S.abort(),Fn(x,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:S.signal}).then(Y=>{clearTimeout(q),Y.ok?Fn(x,"TestPingServer: ok",!0,v):Fn(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),Fn(x,"TestPingServer: error",!1,v)})}function Fn(u,v,x,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(x)}catch{}}function Ui(){this.g=new Dc}function Pa(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Pa,kc),Pa.prototype.g=function(){return new Br(this.i,this.h)};function Br(u,v){$e.call(this),this.H=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Br,$e),i=Br.prototype,i.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=v,this.readyState=1,da(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(v.body=u),(this.H||d).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Bi(this)),this.readyState=0},i.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,da(this)),this.g&&(this.readyState=3,da(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Os(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Os(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}i.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?Bi(this):da(this),this.readyState==3&&Os(this)}},i.Oa=function(u){this.g&&(this.response=this.responseText=u,Bi(this))},i.Na=function(u){this.g&&(this.response=u,Bi(this))},i.ga=function(){this.g&&Bi(this)};function Bi(u){u.readyState=4,u.l=null,u.j=null,u.B=null,da(u)}i.setRequestHeader=function(u,v){this.A.append(u,v)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=v.next();return u.join(`\r
`)};function da(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Br.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Gn(u){let v="";return ve(u,function(x,S){v+=S,v+=":",v+=x,v+=`\r
`}),v}function Hr(u,v,x){e:{for(S in x){var S=!1;break e}S=!0}S||(x=Gn(x),typeof u=="string"?x!=null&&ni(x):st(u,v,x))}function ut(u){$e.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(ut,$e);var Va=/^https?$/i,ol=["POST","PUT"];i=ut.prototype,i.Fa=function(u){this.H=u},i.ea=function(u,v,x,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xo.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(Y){qr(this,Y);return}if(u=x||"",x=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)x.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Y of S.keys())x.set(Y,S.get(Y));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(x.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(ol,v,void 0)>=0)||S||q||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ue]of x)this.g.setRequestHeader(Y,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Y){qr(this,Y)}};function qr(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.o=5,ll(u),ai(u)}function ll(u){u.A||(u.A=!0,ct(u,"complete"),ct(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ct(this,"complete"),ct(this,"abort"),ai(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ai(this,!0)),ut.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Fr(this):this.Xa())},i.Xa=function(){Fr(this)};function Fr(u){if(u.h&&typeof c<"u"){if(u.v&&fa(u)==4)setTimeout(u.Ca.bind(u),0);else if(ct(u,"readystatechange"),fa(u)==4){u.h=!1;try{const Y=u.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var S;if(S=Y===0){let ue=String(u.D).match(Hc)[1]||null;!ue&&d.self&&d.self.location&&(ue=d.self.location.protocol.slice(0,-1)),S=!Va.test(ue?ue.toLowerCase():"")}x=S}if(x)ct(u,"complete"),ct(u,"success");else{u.o=6;try{var q=fa(u)>2?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.ca()+"]",ll(u)}}finally{ai(u)}}}}function ai(u,v){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const x=u.g;u.g=null,v||ct(u,"ready");try{x.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function fa(u){return u.g?u.g.readyState:0}i.ca=function(){try{return fa(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),_f(v)}};function Zt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ii(u){const v={};u=(u.g&&fa(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(C(u[S]))continue;var x=zc(u[S]);const q=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Y=v[q]||[];v[q]=Y,Y.push(x)}_e(v,function(S){return S.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function La(u,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||v}function Hi(u){this.za=0,this.i=[],this.j=new oa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=La("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=La("baseRetryDelayMs",5e3,u),this.Za=La("retryDelaySeedMs",1e4,u),this.Ta=La("forwardChannelMaxRetries",2,u),this.va=La("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Jo(u&&u.concurrentRequestLimit),this.Ba=new Ui,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Hi.prototype,i.ka=8,i.I=1,i.connect=function(u,v,x,S){Dt(0),this.W=u,this.H=v||{},x&&S!==void 0&&(this.H.OSID=x,this.H.OAID=S),this.F=this.X,this.J=Zc(this,null,this.W),za(this)};function cl(u){if(Ms(u),u.I==3){var v=u.V++,x=Pt(u.J);if(st(x,"SID",u.M),st(x,"RID",v),st(x,"TYPE","terminate"),Gr(u,x),v=new la(u,u.j,v),v.M=2,v.A=zr(Pt(x)),x=!1,d.navigator&&d.navigator.sendBeacon)try{x=d.navigator.sendBeacon(v.A.toString(),"")}catch{}!x&&d.Image&&(new Image().src=v.A,x=!0),x||(v.g=eu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Ia(v)}Wc(u)}function qi(u){u.g&&(dl(u),u.g.cancel(),u.g=null)}function Ms(u){qi(u),u.v&&(d.clearTimeout(u.v),u.v=null),ks(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function za(u){if(!Wo(u.h)&&!u.m){u.m=!0;var v=u.Ea;Ae||R(),ye||(Ae(),ye=!0),I.add(v,u),u.D=0}}function Ds(u,v){return Da(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=v.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Na(y(u.Ea,u,v),Jc(u,u.D)),u.D++,!0)}i.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const q=new la(this,this.j,u);let Y=this.o;if(this.U&&(Y?(Y=j(Y),oe(Y,this.U)):Y=this.U),this.u!==null||this.R||(q.J=Y,Y=null),this.S)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var S=this.i[x];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,v>4096){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=Kc(this,q,v),x=Pt(this.J),st(x,"RID",u),st(x,"CVER",22),this.G&&st(x,"X-HTTP-Session-Id",this.G),Gr(this,x),Y&&(this.R?v="headers="+ni(Gn(Y))+"&"+v:this.u&&Hr(x,this.u,Y)),Zo(this.h,q),this.Ra&&st(x,"TYPE","init"),this.S?(st(x,"$req",v),st(x,"SID","null"),q.U=!0,Ca(q,x,null)):Ca(q,x,v),this.I=2}}else this.I==3&&(u?ul(this,u):this.i.length==0||Wo(this.h)||ul(this))};function ul(u,v){var x;v?x=v.l:x=u.V++;const S=Pt(u.J);st(S,"SID",u.M),st(S,"RID",x),st(S,"AID",u.K),Gr(u,S),u.u&&u.o&&Hr(S,u.u,u.o),x=new la(u,u.j,x,u.D+1),u.u===null&&(x.J=u.o),v&&(u.i=v.G.concat(u.i)),v=Kc(u,x,1e3),x.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Zo(u.h,x),Ca(x,S,v)}function Gr(u,v){u.H&&ve(u.H,function(x,S){st(v,S,x)}),u.l&&ve({},function(x,S){st(v,S,x)})}function Kc(u,v,x){x=Math.min(u.i.length,x);const S=u.l?y(u.l.Ka,u.l,u):null;e:{var q=u.i;let Pe=-1;for(;;){const Rt=["count="+x];Pe==-1?x>0?(Pe=q[0].g,Rt.push("ofs="+Pe)):Pe=0:Rt.push("ofs="+Pe);let tt=!0;for(let xt=0;xt<x;xt++){var Y=q[xt].g;const Qn=q[xt].map;if(Y-=Pe,Y<0)Pe=Math.max(0,q[xt].g-100),tt=!1;else try{Y="req"+Y+"_"||"";try{var ue=Qn instanceof Map?Qn:Object.entries(Qn);for(const[Ba,ha]of ue){let pa=ha;m(ha)&&(pa=ji(ha)),Rt.push(Y+Ba+"="+encodeURIComponent(pa))}}catch(Ba){throw Rt.push(Y+"type="+encodeURIComponent("_badmap")),Ba}}catch{S&&S(Qn)}}if(tt){ue=Rt.join("&");break e}}ue=void 0}return u=u.i.splice(0,x),v.G=u,ue}function Yc(u){if(!u.g&&!u.v){u.Y=1;var v=u.Da;Ae||R(),ye||(Ae(),ye=!0),I.add(v,u),u.A=0}}function Qr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Na(y(u.Da,u),Jc(u,u.A)),u.A++,!0)}i.Da=function(){if(this.v=null,$c(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Na(y(this.Wa,this),u)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),qi(this),$c(this))};function dl(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function $c(u){u.g=new la(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var v=Pt(u.na);st(v,"RID","rpc"),st(v,"SID",u.M),st(v,"AID",u.K),st(v,"CI",u.F?"0":"1"),!u.F&&u.ia&&st(v,"TO",u.ia),st(v,"TYPE","xmlhttp"),Gr(u,v),u.u&&u.o&&Hr(v,u.u,u.o),u.O&&(u.g.H=u.O);var x=u.g;u=u.ba,x.M=1,x.A=zr(Pt(v)),x.u=null,x.R=!0,Ts(x,u)}i.Va=function(){this.C!=null&&(this.C=null,qi(this),Qr(this),Dt(19))};function ks(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Xc(u,v){var x=null;if(u.g==v){ks(u),dl(u),u.g=null;var S=2}else if(ka(u.h,v))x=v.G,el(u.h,v),S=1;else return;if(u.I!=0){if(v.o)if(S==1){x=v.u?v.u.length:0,v=Date.now()-v.F;var q=u.D;S=Ss(),ct(S,new wa(S,x)),za(u)}else Yc(u);else if(q=v.m,q==3||q==0&&v.X>0||!(S==1&&Ds(u,v)||S==2&&Qr(u)))switch(x&&x.length>0&&(v=u.h,v.i=v.i.concat(x)),q){case 1:Ua(u,5);break;case 4:Ua(u,10);break;case 3:Ua(u,6);break;default:Ua(u,2)}}}function Jc(u,v){let x=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(x*=2),x*v}function Ua(u,v){if(u.j.info("Error code "+v),v==2){var x=y(u.bb,u),S=u.Ua;const q=!S;S=new In(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Yt(S,"https"),zr(S),q?ua(S.toString(),x):sl(S.toString(),x)}else Dt(2);u.I=0,u.l&&u.l.pa(v),Wc(u),Ms(u)}i.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Wc(u){if(u.I=0,u.ja=[],u.l){const v=tl(u.h);(v.length!=0||u.i.length!=0)&&(H(u.ja,v),H(u.ja,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.oa()}}function Zc(u,v,x){var S=x instanceof In?Pt(x):new In(x);if(S.g!="")v&&(S.g=v+"."+S.g),Pi(S,S.u);else{var q=d.location;S=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;const Y=new In(null);S&&Yt(Y,S),v&&(Y.g=v),q&&Pi(Y,q),x&&(Y.h=x),S=Y}return x=u.G,v=u.wa,x&&v&&st(S,x,v),st(S,"VER",u.ka),Gr(u,S),S}function eu(u,v,x){if(v&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Aa&&!u.ma?new ut(new Pa({ab:x})):new ut(u.ma),v.Fa(u.L),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function tu(){}i=tu.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Fi(){}Fi.prototype.g=function(u,v){return new hn(u,v)};function hn(u,v){$e.call(this),this.g=new Hi(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(u?u["X-WebChannel-Client-Profile"]=v.sa:u={"X-WebChannel-Client-Profile":v.sa}),this.g.U=u,(u=v&&v.Qb)&&!C(u)&&(this.g.u=u),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!C(v)&&(this.g.G=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new ri(this)}E(hn,$e),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){cl(this.g)},hn.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.v&&(x={},x.__data__=ji(u),u=x);v.i.push(new jt(v.Ya++,u)),v.I==3&&za(v)},hn.prototype.N=function(){this.g.l=null,delete this.j,cl(this.g),delete this.g,hn.Z.N.call(this)};function nu(u){Wt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const x in v){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}E(nu,Wt);function au(){Hn.call(this),this.status=1}E(au,Hn);function ri(u){this.g=u}E(ri,tu),ri.prototype.ra=function(){ct(this.g,"a")},ri.prototype.qa=function(u){ct(this.g,new nu(u))},ri.prototype.pa=function(u){ct(this.g,new au)},ri.prototype.oa=function(){ct(this.g,"b")},Fi.prototype.createWebChannel=Fi.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,Z_=function(){return new Fi},W_=function(){return Ss()},J_=Nt,$p={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Vr.NO_ERROR=0,Vr.TIMEOUT=8,Vr.HTTP_ERROR=6,xd=Vr,$o.COMPLETE="complete",X_=$o,jc.EventType=sa,sa.OPEN="a",sa.CLOSE="b",sa.ERROR="c",sa.MESSAGE="d",$e.prototype.listen=$e.prototype.J,ec=jc,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,$_=ut}).apply(typeof cd<"u"?cd:typeof self<"u"?self:typeof window<"u"?window:{});class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");let Uo="12.8.0";function a2(i){Uo=i}const ys=new Em("@firebase/firestore");function fo(){return ys.logLevel}function pe(i,...e){if(ys.logLevel<=Ge.DEBUG){const n=e.map(Dm);ys.debug(`Firestore (${Uo}): ${i}`,...n)}}function Ii(i,...e){if(ys.logLevel<=Ge.ERROR){const n=e.map(Dm);ys.error(`Firestore (${Uo}): ${i}`,...n)}}function To(i,...e){if(ys.logLevel<=Ge.WARN){const n=e.map(Dm);ys.warn(`Firestore (${Uo}): ${i}`,...n)}}function Dm(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function Oe(i,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,eE(i,r,n)}function eE(i,e,n){let r=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ii(r),new Error(r)}function rt(i,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,i||eE(e,o,r)}function je(i,e){return i}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Di{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ti{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class tE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(un.UNAUTHENTICATED)))}shutdown(){}}class r2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class s2{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rt(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let c=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ti,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ti)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rt(typeof r.accessToken=="string",31837,{l:r}),new tE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class o2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class l2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new o2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ta(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){rt(this.o===void 0,3512);const r=c=>{c.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,pe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const o=c=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new kb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(rt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new kb(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function u2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<i;r++)n[r]=Math.floor(256*Math.random());return n}class km{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=u2(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<n&&(r+=e.charAt(o[c]%62))}return r}}function Qe(i,e){return i<e?-1:i>e?1:0}function Xp(i,e){const n=Math.min(i.length,e.length);for(let r=0;r<n;r++){const o=i.charAt(r),c=e.charAt(r);if(o!==c)return kp(o)===kp(c)?Qe(o,c):kp(o)?1:-1}return Qe(i.length,e.length)}const d2=55296,f2=57343;function kp(i){const e=i.charCodeAt(0);return e>=d2&&e<=f2}function wo(i,e,n){return i.length===e.length&&i.every(((r,o)=>n(r,e[o])))}const jb="__name__";class Ka{constructor(e,n,r){n===void 0?n=0:n>e.length&&Oe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Oe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ka.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ka?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const c=Ka.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Qe(e.length,n.length)}static compareSegments(e,n){const r=Ka.isNumericId(e),o=Ka.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Ka.extractNumericId(e).compare(Ka.extractNumericId(n)):Xp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Er.fromString(e.substring(4,e.length-2))}}class gt extends Ka{construct(e,n,r){return new gt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new gt(n)}static emptyPath(){return new gt([])}}const h2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Ka{construct(e,n,r){return new sn(e,n,r)}static isValidIdentifier(e){return h2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jb}static keyField(){return new sn([jb])}static fromServerFormat(e){const n=[];let r="",o=0;const c=()=>{if(r.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(r+=m,o++):(c(),o++)}if(c(),d)throw new he(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(n)}static emptyPath(){return new sn([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(gt.fromString(e))}static fromName(e){return new we(gt.fromString(e).popFirst(5))}static empty(){return new we(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new gt(e.slice()))}}function nE(i,e,n){if(!n)throw new he(ne.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function p2(i,e,n,r){if(e===!0&&r===!0)throw new he(ne.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Pb(i){if(!we.isDocumentKey(i))throw new he(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Vb(i){if(we.isDocumentKey(i))throw new he(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function aE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function ef(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Oe(12329,{type:typeof i})}function Rn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new he(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ef(i);throw new he(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function qt(i,e){const n={typeString:i};return e&&(n.value=e),n}function Rc(i,e){if(!aE(i))throw new he(ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){n=`JSON missing required field: '${r}'`;break}const d=i[r];if(o&&typeof d!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new he(ne.INVALID_ARGUMENT,n);return!0}const Lb=-62135596800,zb=1e6;class bt{static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*zb);return new bt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Lb)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zb}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:bt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rc(e,bt._jsonSchema))return new bt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Lb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}bt._jsonSchemaVersion="firestore/timestamp/1.0",bt._jsonSchema={type:qt("string",bt._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new bt(0,0))}static max(){return new De(new bt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const pc=-1;function m2(i,e){const n=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=De.fromTimestamp(r===1e9?new bt(n+1,0):new bt(n,r));return new Sr(o,we.empty(),e)}function g2(i){return new Sr(i.readTime,i.key,pc)}class Sr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Sr(De.min(),we.empty(),pc)}static max(){return new Sr(De.max(),we.empty(),pc)}}function y2(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=we.comparator(i.documentKey,e.documentKey),n!==0?n:Qe(i.largestBatchId,e.largestBatchId))}const v2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Bo(i){if(i.code!==ne.FAILED_PRECONDITION||i.message!==v2)throw i;pe("LocalStore","Unexpectedly lost primary lease")}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re(((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):re.reject(n)}static resolve(e){return new re(((n,r)=>{n(e)}))}static reject(e){return new re(((n,r)=>{r(e)}))}static waitFor(e){return new re(((n,r)=>{let o=0,c=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++c,d&&c===o&&n()}),(g=>r(g)))})),d=!0,c===o&&n()}))}static or(e){let n=re.resolve(!1);for(const r of e)n=n.next((o=>o?re.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,c)=>{r.push(n.call(this,o,c))})),this.waitFor(r)}static mapArray(e,n){return new re(((r,o)=>{const c=e.length,d=new Array(c);let m=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((_=>{d[y]=_,++m,m===c&&r(d)}),(_=>o(_)))}}))}static doWhile(e,n){return new re(((r,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):r()};c()}))}}function x2(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ho(i){return i.name==="IndexedDbTransactionError"}class tf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}tf.ce=-1;const jm=-1;function nf(i){return i==null}function Vd(i){return i===0&&1/i==-1/0}function _2(i){return typeof i=="number"&&Number.isInteger(i)&&!Vd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const iE="";function E2(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Ub(e)),e=A2(i.get(n),e);return Ub(e)}function A2(i,e){let n=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case iE:n+="";break;default:n+=c}}return n}function Ub(i){return i+iE+""}function Bb(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Mr(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function rE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class At{constructor(e,n){this.comparator=e,this.root=n||rn.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ud(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ud(this.root,e,this.comparator,!1)}getReverseIterator(){return new ud(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ud(this.root,e,this.comparator,!0)}}class ud{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,n,r,o,c){this.key=e,this.value=n,this.color=r??rn.RED,this.left=o??rn.EMPTY,this.right=c??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,c){return new rn(e??this.key,n??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,r),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return rn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,n,r,o,c){return this}insert(e,n,r){return new rn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hb(this.data.getIterator())}getIteratorFrom(e){return new Hb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Gt(this.comparator);return n.data=e,n}}class Hb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class zn{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new zn([])}unionWith(e){let n=new Gt(sn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return wo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class sE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class on{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new sE("Invalid base64 string: "+c):c}})(e);return new on(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new on(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const S2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tr(i){if(rt(!!i,39018),typeof i=="string"){let e=0;const n=S2.exec(i);if(rt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ot(i.seconds),nanos:Ot(i.nanos)}}function Ot(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function wr(i){return typeof i=="string"?on.fromBase64String(i):on.fromUint8Array(i)}const oE="server_timestamp",lE="__type__",cE="__previous_value__",uE="__local_write_time__";function Pm(i){return(i?.mapValue?.fields||{})[lE]?.stringValue===oE}function af(i){const e=i.mapValue.fields[cE];return Pm(e)?af(e):e}function mc(i){const e=Tr(i.mapValue.fields[uE].timestampValue);return new bt(e.seconds,e.nanos)}class T2{constructor(e,n,r,o,c,d,m,g,y,_,E){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=_,this.apiKey=E}}const Ld="(default)";class gc{constructor(e,n){this.projectId=e,this.database=n||Ld}static empty(){return new gc("","")}get isDefaultDatabase(){return this.database===Ld}isEqual(e){return e instanceof gc&&e.projectId===this.projectId&&e.database===this.database}}function w2(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new he(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(i.options.projectId,e)}const dE="__type__",N2="__max__",dd={mapValue:{}},fE="__vector__",zd="value";function Nr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Pm(i)?4:C2(i)?9007199254740991:R2(i)?10:11:Oe(28295,{value:i})}function Za(i,e){if(i===e)return!0;const n=Nr(i);if(n!==Nr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return mc(i).isEqual(mc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=Tr(o.timestampValue),m=Tr(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return wr(o.bytesValue).isEqual(wr(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return Ot(o.geoPointValue.latitude)===Ot(c.geoPointValue.latitude)&&Ot(o.geoPointValue.longitude)===Ot(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Ot(o.integerValue)===Ot(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=Ot(o.doubleValue),m=Ot(c.doubleValue);return d===m?Vd(d)===Vd(m):isNaN(d)&&isNaN(m)}return!1})(i,e);case 9:return wo(i.arrayValue.values||[],e.arrayValue.values||[],Za);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},m=c.mapValue.fields||{};if(Bb(d)!==Bb(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!Za(d[g],m[g])))return!1;return!0})(i,e);default:return Oe(52216,{left:i})}}function yc(i,e){return(i.values||[]).find((n=>Za(n,e)))!==void 0}function No(i,e){if(i===e)return 0;const n=Nr(i),r=Nr(e);if(n!==r)return Qe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qe(i.booleanValue,e.booleanValue);case 2:return(function(c,d){const m=Ot(c.integerValue||c.doubleValue),g=Ot(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return qb(i.timestampValue,e.timestampValue);case 4:return qb(mc(i),mc(e));case 5:return Xp(i.stringValue,e.stringValue);case 6:return(function(c,d){const m=wr(c),g=wr(d);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(c,d){const m=c.split("/"),g=d.split("/");for(let y=0;y<m.length&&y<g.length;y++){const _=Qe(m[y],g[y]);if(_!==0)return _}return Qe(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,d){const m=Qe(Ot(c.latitude),Ot(d.latitude));return m!==0?m:Qe(Ot(c.longitude),Ot(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return Fb(i.arrayValue,e.arrayValue);case 10:return(function(c,d){const m=c.fields||{},g=d.fields||{},y=m[zd]?.arrayValue,_=g[zd]?.arrayValue,E=Qe(y?.values?.length||0,_?.values?.length||0);return E!==0?E:Fb(y,_)})(i.mapValue,e.mapValue);case 11:return(function(c,d){if(c===dd.mapValue&&d===dd.mapValue)return 0;if(c===dd.mapValue)return 1;if(d===dd.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),y=d.fields||{},_=Object.keys(y);g.sort(),_.sort();for(let E=0;E<g.length&&E<_.length;++E){const T=Xp(g[E],_[E]);if(T!==0)return T;const L=No(m[g[E]],y[_[E]]);if(L!==0)return L}return Qe(g.length,_.length)})(i.mapValue,e.mapValue);default:throw Oe(23264,{he:n})}}function qb(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Qe(i,e);const n=Tr(i),r=Tr(e),o=Qe(n.seconds,r.seconds);return o!==0?o:Qe(n.nanos,r.nanos)}function Fb(i,e){const n=i.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const c=No(n[o],r[o]);if(c)return c}return Qe(n.length,r.length)}function Ro(i){return Jp(i)}function Jp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const r=Tr(n);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return wr(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return we.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let r="[",o=!0;for(const c of n.values||[])o?o=!1:r+=",",r+=Jp(c);return r+"]"})(i.arrayValue):"mapValue"in i?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of r)c?c=!1:o+=",",o+=`${d}:${Jp(n.fields[d])}`;return o+"}"})(i.mapValue):Oe(61005,{value:i})}function _d(i){switch(Nr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=af(i);return e?16+_d(e):16;case 5:return 2*i.stringValue.length;case 6:return wr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,c)=>o+_d(c)),0)})(i.arrayValue);case 10:case 11:return(function(r){let o=0;return Mr(r.fields,((c,d)=>{o+=c.length+_d(d)})),o})(i.mapValue);default:throw Oe(13486,{value:i})}}function Gb(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Wp(i){return!!i&&"integerValue"in i}function Vm(i){return!!i&&"arrayValue"in i}function Qb(i){return!!i&&"nullValue"in i}function Kb(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ed(i){return!!i&&"mapValue"in i}function R2(i){return(i?.mapValue?.fields||{})[dE]?.stringValue===fE}function sc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Mr(i.mapValue.fields,((n,r)=>e.mapValue.fields[n]=sc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sc(i.arrayValue.values[n]);return e}return{...i}}function C2(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===N2}class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ed(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(n)}setAll(e){let n=sn.emptyPath(),r={},o=[];e.forEach(((d,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=m.popLast()}d?r[m.lastSegment()]=sc(d):o.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,o)}delete(e){const n=this.field(e.popLast());Ed(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Za(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Ed(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){Mr(n,((o,c)=>e[o]=c));for(const o of r)delete e[o]}clone(){return new Sn(sc(this.value))}}function hE(i){const e=[];return Mr(i.fields,((n,r)=>{const o=new sn([n]);if(Ed(r)){const c=hE(r.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new zn(e)}class dn{constructor(e,n,r,o,c,d,m){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new dn(e,0,De.min(),De.min(),De.min(),Sn.empty(),0)}static newFoundDocument(e,n,r,o){return new dn(e,1,n,De.min(),r,o,0)}static newNoDocument(e,n){return new dn(e,2,n,De.min(),De.min(),Sn.empty(),0)}static newUnknownDocument(e,n){return new dn(e,3,n,De.min(),De.min(),Sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ud{constructor(e,n){this.position=e,this.inclusive=n}}function Yb(i,e,n){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],d=i.position[o];if(c.field.isKeyField()?r=we.comparator(we.fromName(d.referenceValue),n.key):r=No(d,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function $b(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Za(i.position[n],e.position[n]))return!1;return!0}class vc{constructor(e,n="asc"){this.field=e,this.dir=n}}function I2(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class pE{}class Ht extends pE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new M2(e,n,r):n==="array-contains"?new j2(e,r):n==="in"?new P2(e,r):n==="not-in"?new V2(e,r):n==="array-contains-any"?new L2(e,r):new Ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new D2(e,r):new k2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(No(n,this.value)):n!==null&&Nr(this.value)===Nr(n)&&this.matchesComparison(No(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ea extends pE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ea(e,n)}matches(e){return mE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mE(i){return i.op==="and"}function gE(i){return O2(i)&&mE(i)}function O2(i){for(const e of i.filters)if(e instanceof Ea)return!1;return!0}function Zp(i){if(i instanceof Ht)return i.field.canonicalString()+i.op.toString()+Ro(i.value);if(gE(i))return i.filters.map((e=>Zp(e))).join(",");{const e=i.filters.map((n=>Zp(n))).join(",");return`${i.op}(${e})`}}function yE(i,e){return i instanceof Ht?(function(r,o){return o instanceof Ht&&r.op===o.op&&r.field.isEqual(o.field)&&Za(r.value,o.value)})(i,e):i instanceof Ea?(function(r,o){return o instanceof Ea&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((c,d,m)=>c&&yE(d,o.filters[m])),!0):!1})(i,e):void Oe(19439)}function vE(i){return i instanceof Ht?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ro(n.value)}`})(i):i instanceof Ea?(function(n){return n.op.toString()+" {"+n.getFilters().map(vE).join(" ,")+"}"})(i):"Filter"}class M2 extends Ht{constructor(e,n,r){super(e,n,r),this.key=we.fromName(r.referenceValue)}matches(e){const n=we.comparator(e.key,this.key);return this.matchesComparison(n)}}class D2 extends Ht{constructor(e,n){super(e,"in",n),this.keys=bE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class k2 extends Ht{constructor(e,n){super(e,"not-in",n),this.keys=bE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function bE(i,e){return(e.arrayValue?.values||[]).map((n=>we.fromName(n.referenceValue)))}class j2 extends Ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vm(n)&&yc(n.arrayValue,this.value)}}class P2 extends Ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yc(this.value.arrayValue,n)}}class V2 extends Ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yc(this.value.arrayValue,n)}}class L2 extends Ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>yc(this.value.arrayValue,r)))}}class z2{constructor(e,n=null,r=[],o=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=d,this.endAt=m,this.Te=null}}function Xb(i,e=null,n=[],r=[],o=null,c=null,d=null){return new z2(i,e,n,r,o,c,d)}function Lm(i){const e=je(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Zp(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),nf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Ro(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Ro(r))).join(",")),e.Te=n}return e.Te}function zm(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!I2(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!yE(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!$b(i.startAt,e.startAt)&&$b(i.endAt,e.endAt)}function em(i){return we.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class qo{constructor(e,n=null,r=[],o=[],c=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function U2(i,e,n,r,o,c,d,m){return new qo(i,e,n,r,o,c,d,m)}function rf(i){return new qo(i)}function Jb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function B2(i){return we.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function xE(i){return i.collectionGroup!==null}function oc(i){const e=je(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Gt(sn.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new vc(c,r))})),n.has(sn.keyField().canonicalString())||e.Ie.push(new vc(sn.keyField(),r))}return e.Ie}function Xa(i){const e=je(i);return e.Ee||(e.Ee=H2(e,oc(i))),e.Ee}function H2(i,e){if(i.limitType==="F")return Xb(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new vc(o.field,c)}));const n=i.endAt?new Ud(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new Ud(i.startAt.position,i.startAt.inclusive):null;return Xb(i.path,i.collectionGroup,e,i.filters,i.limit,n,r)}}function tm(i,e){const n=i.filters.concat([e]);return new qo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function q2(i,e){const n=i.explicitOrderBy.concat([e]);return new qo(i.path,i.collectionGroup,n,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function nm(i,e,n){return new qo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function sf(i,e){return zm(Xa(i),Xa(e))&&i.limitType===e.limitType}function _E(i){return`${Lm(Xa(i))}|lt:${i.limitType}`}function ho(i){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>vE(o))).join(", ")}]`),nf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>Ro(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>Ro(o))).join(",")),`Target(${r})`})(Xa(i))}; limitType=${i.limitType})`}function of(i,e){return e.isFoundDocument()&&(function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):we.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(i,e)&&(function(r,o){for(const c of oc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(r,o){return!(r.startAt&&!(function(d,m,g){const y=Yb(d,m,g);return d.inclusive?y<=0:y<0})(r.startAt,oc(r),o)||r.endAt&&!(function(d,m,g){const y=Yb(d,m,g);return d.inclusive?y>=0:y>0})(r.endAt,oc(r),o))})(i,e)}function F2(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function EE(i){return(e,n)=>{let r=!1;for(const o of oc(i)){const c=G2(o,e,n);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function G2(i,e,n){const r=i.field.isKeyField()?we.comparator(e.key,n.key):(function(c,d,m){const g=d.data.field(c),y=m.data.field(c);return g!==null&&y!==null?No(g,y):Oe(42886)})(i.field,e,n);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return Oe(19790,{direction:i.dir})}}class _s{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Mr(this.inner,((n,r)=>{for(const[o,c]of r)e(o,c)}))}isEmpty(){return rE(this.inner)}size(){return this.innerSize}}const Q2=new At(we.comparator);function Oi(){return Q2}const AE=new At(we.comparator);function tc(...i){let e=AE;for(const n of i)e=e.insert(n.key,n);return e}function SE(i){let e=AE;return i.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function us(){return lc()}function TE(){return lc()}function lc(){return new _s((i=>i.toString()),((i,e)=>i.isEqual(e)))}const K2=new At(we.comparator),Y2=new Gt(we.comparator);function Ke(...i){let e=Y2;for(const n of i)e=e.add(n);return e}const $2=new Gt(Qe);function X2(){return $2}function Um(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vd(e)?"-0":e}}function wE(i){return{integerValue:""+i}}function J2(i,e){return _2(e)?wE(e):Um(i,e)}class lf{constructor(){this._=void 0}}function W2(i,e,n){return i instanceof bc?(function(o,c){const d={fields:{[lE]:{stringValue:oE},[uE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Pm(c)&&(c=af(c)),c&&(d.fields[cE]=c),{mapValue:d}})(n,e):i instanceof Co?RE(i,e):i instanceof Io?CE(i,e):(function(o,c){const d=NE(o,c),m=Wb(d)+Wb(o.Ae);return Wp(d)&&Wp(o.Ae)?wE(m):Um(o.serializer,m)})(i,e)}function Z2(i,e,n){return i instanceof Co?RE(i,e):i instanceof Io?CE(i,e):n}function NE(i,e){return i instanceof Bd?(function(r){return Wp(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class bc extends lf{}class Co extends lf{constructor(e){super(),this.elements=e}}function RE(i,e){const n=IE(e);for(const r of i.elements)n.some((o=>Za(o,r)))||n.push(r);return{arrayValue:{values:n}}}class Io extends lf{constructor(e){super(),this.elements=e}}function CE(i,e){let n=IE(e);for(const r of i.elements)n=n.filter((o=>!Za(o,r)));return{arrayValue:{values:n}}}class Bd extends lf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Wb(i){return Ot(i.integerValue||i.doubleValue)}function IE(i){return Vm(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Bm{constructor(e,n){this.field=e,this.transform=n}}function eI(i,e){return i.field.isEqual(e.field)&&(function(r,o){return r instanceof Co&&o instanceof Co||r instanceof Io&&o instanceof Io?wo(r.elements,o.elements,Za):r instanceof Bd&&o instanceof Bd?Za(r.Ae,o.Ae):r instanceof bc&&o instanceof bc})(i.transform,e.transform)}class tI{constructor(e,n){this.version=e,this.transformResults=n}}class aa{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new aa}static exists(e){return new aa(void 0,e)}static updateTime(e){return new aa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ad(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class cf{}function OE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Hm(i.key,aa.none()):new Cc(i.key,i.data,aa.none());{const n=i.data,r=Sn.empty();let o=new Gt(sn.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?r.delete(c):r.set(c,d),o=o.add(c)}return new Dr(i.key,r,new zn(o.toArray()),aa.none())}}function nI(i,e,n){i instanceof Cc?(function(o,c,d){const m=o.value.clone(),g=ex(o.fieldTransforms,c,d.transformResults);m.setAll(g),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(i,e,n):i instanceof Dr?(function(o,c,d){if(!Ad(o.precondition,c))return void c.convertToUnknownDocument(d.version);const m=ex(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(ME(o)),g.setAll(m),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(i,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function cc(i,e,n,r){return i instanceof Cc?(function(c,d,m,g){if(!Ad(c.precondition,d))return m;const y=c.value.clone(),_=tx(c.fieldTransforms,g,d);return y.setAll(_),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(i,e,n,r):i instanceof Dr?(function(c,d,m,g){if(!Ad(c.precondition,d))return m;const y=tx(c.fieldTransforms,g,d),_=d.data;return _.setAll(ME(c)),_.setAll(y),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(i,e,n,r):(function(c,d,m){return Ad(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(i,e,n)}function aI(i,e){let n=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=NE(r.transform,o||null);c!=null&&(n===null&&(n=Sn.empty()),n.set(r.field,c))}return n||null}function Zb(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&wo(r,o,((c,d)=>eI(c,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Cc extends cf{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Dr extends cf{constructor(e,n,r,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function ME(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=i.data.field(n);e.set(n,r)}})),e}function ex(i,e,n){const r=new Map;rt(i.length===n.length,32656,{Ve:n.length,de:i.length});for(let o=0;o<n.length;o++){const c=i[o],d=c.transform,m=e.data.field(c.field);r.set(c.field,Z2(d,m,n[o]))}return r}function tx(i,e,n){const r=new Map;for(const o of i){const c=o.transform,d=n.data.field(o.field);r.set(o.field,W2(c,d,e))}return r}class Hm extends cf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iI extends cf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rI{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&nI(c,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=cc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=cc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=TE();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(o.key)?null:m;const g=OE(d,m);g!==null&&r.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(De.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&wo(this.mutations,e.mutations,((n,r)=>Zb(n,r)))&&wo(this.baseMutations,e.baseMutations,((n,r)=>Zb(n,r)))}}class qm{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){rt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return K2})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,r[d].version);return new qm(e,n,r,o)}}class sI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class oI{constructor(e,n){this.count=e,this.unchangedNames=n}}var Bt,Xe;function lI(i){switch(i){case ne.OK:return Oe(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Oe(15467,{code:i})}}function DE(i){if(i===void 0)return Ii("GRPC error has no .code"),ne.UNKNOWN;switch(i){case Bt.OK:return ne.OK;case Bt.CANCELLED:return ne.CANCELLED;case Bt.UNKNOWN:return ne.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return ne.INTERNAL;case Bt.UNAVAILABLE:return ne.UNAVAILABLE;case Bt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Bt.NOT_FOUND:return ne.NOT_FOUND;case Bt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Bt.ABORTED:return ne.ABORTED;case Bt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Bt.DATA_LOSS:return ne.DATA_LOSS;default:return Oe(39323,{code:i})}}(Xe=Bt||(Bt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";function cI(){return new TextEncoder}const uI=new Er([4294967295,4294967295],0);function nx(i){const e=cI().encode(i),n=new Y_;return n.update(e),new Uint8Array(n.digest())}function ax(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Er([n,r],0),new Er([o,c],0)]}class Fm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new nc(`Invalid padding: ${n}`);if(r<0)throw new nc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new nc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Er.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(Er.fromNumber(r)));return o.compare(uI)===1&&(o=new Er([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=nx(e),[r,o]=ax(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,o,c);if(!this.we(d))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Fm(c,o,n);return r.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const n=nx(e),[r,o]=ax(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,o,c);this.be(d)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class uf{constructor(e,n,r,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new uf(De.min(),o,new At(Qe),Oi(),Ke())}}class Ic{constructor(e,n,r,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ic(r,n,Ke(),Ke(),Ke())}}class Sd{constructor(e,n,r,o){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=o}}class kE{constructor(e,n){this.targetId=e,this.Ce=n}}class jE{constructor(e,n,r=on.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class ix{constructor(){this.ve=0,this.Fe=rx(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),n=Ke(),r=Ke();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Oe(38017,{changeType:c})}})),new Ic(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=rx()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class dI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Oi(),this.He=fd(),this.Je=fd(),this.Ze=new At(Qe)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Oe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(em(c))if(r===0){const d=new we(c.path);this.et(n,d,dn.newNoDocument(d,De.min()))}else rt(r===1,20013,{expectedCount:r});else{const d=this._t(n);if(d!==r){const m=this.ut(e),g=m?this.ct(m,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=n;let d,m;try{d=wr(r).toUint8Array()}catch(g){if(g instanceof sE)return To("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Fm(d,o,c)}catch(g){return To(g instanceof nc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((c=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const m=this.ot(d);if(m){if(c.current&&em(m.target)){const g=new we(m.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,dn.newNoDocument(g,e))}c.Be&&(n.set(d,c.ke()),c.Ke())}}));let r=Ke();this.Je.forEach(((c,d)=>{let m=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new uf(e,n,this.Ze,this.je,r);return this.je=Oi(),this.He=fd(),this.Je=fd(),this.Ze=new At(Qe),o}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new ix,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Gt(Qe),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Gt(Qe),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ix),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function fd(){return new At(we.comparator)}function rx(){return new At(we.comparator)}const fI={asc:"ASCENDING",desc:"DESCENDING"},hI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pI={and:"AND",or:"OR"};class mI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function am(i,e){return i.useProto3Json||nf(e)?e:{value:e}}function Hd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function gI(i,e){return Hd(i,e.toTimestamp())}function Ja(i){return rt(!!i,49232),De.fromTimestamp((function(n){const r=Tr(n);return new bt(r.seconds,r.nanos)})(i))}function Gm(i,e){return im(i,e).canonicalString()}function im(i,e){const n=(function(o){return new gt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function VE(i){const e=gt.fromString(i);return rt(HE(e),10190,{key:e.toString()}),e}function rm(i,e){return Gm(i.databaseId,e.path)}function jp(i,e){const n=VE(e);if(n.get(1)!==i.databaseId.projectId)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new we(zE(n))}function LE(i,e){return Gm(i.databaseId,e)}function yI(i){const e=VE(i);return e.length===4?gt.emptyPath():zE(e)}function sm(i){return new gt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function zE(i){return rt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function sx(i,e,n){return{name:rm(i,e),fields:n.value.mapValue.fields}}function vI(i,e){let n;if("targetChange"in e){e.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Oe(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,_){return y.useProto3Json?(rt(_===void 0||typeof _=="string",58123),on.fromBase64String(_||"")):(rt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),on.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(y){const _=y.code===void 0?ne.UNKNOWN:DE(y.code);return new he(_,y.message||"")})(d);n=new jE(r,o,c,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=jp(i,r.document.name),c=Ja(r.document.updateTime),d=r.document.createTime?Ja(r.document.createTime):De.min(),m=new Sn({mapValue:{fields:r.document.fields}}),g=dn.newFoundDocument(o,c,d,m),y=r.targetIds||[],_=r.removedTargetIds||[];n=new Sd(y,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=jp(i,r.document),c=r.readTime?Ja(r.readTime):De.min(),d=dn.newNoDocument(o,c),m=r.removedTargetIds||[];n=new Sd([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=jp(i,r.document),c=r.removedTargetIds||[];n=new Sd([],c,o,null)}else{if(!("filter"in e))return Oe(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,d=new oI(o,c),m=r.targetId;n=new kE(m,d)}}return n}function bI(i,e){let n;if(e instanceof Cc)n={update:sx(i,e.key,e.value)};else if(e instanceof Hm)n={delete:rm(i,e.key)};else if(e instanceof Dr)n={update:sx(i,e.key,e.data),updateMask:RI(e.fieldMask)};else{if(!(e instanceof iI))return Oe(16599,{dt:e.type});n={verify:rm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,d){const m=d.transform;if(m instanceof bc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Co)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Io)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Bd)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw Oe(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:gI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Oe(27497)})(i,e.precondition)),n}function xI(i,e){return i&&i.length>0?(rt(e!==void 0,14353),i.map((n=>(function(o,c){let d=o.updateTime?Ja(o.updateTime):Ja(c);return d.isEqual(De.min())&&(d=Ja(c)),new tI(d,o.transformResults||[])})(n,e)))):[]}function _I(i,e){return{documents:[LE(i,e.path)]}}function EI(i,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=LE(i,o);const c=(function(y){if(y.length!==0)return BE(Ea.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((_=>(function(T){return{field:po(T.field),direction:TI(T.dir)}})(_)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=am(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function AI(i){let e=yI(i.parent);const n=i.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){rt(r===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let c=[];n.where&&(c=(function(E){const T=UE(E);return T instanceof Ea&&gE(T)?T.getFilters():[T]})(n.where));let d=[];n.orderBy&&(d=(function(E){return E.map((T=>(function(H){return new vc(mo(H.field),(function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(T)))})(n.orderBy));let m=null;n.limit&&(m=(function(E){let T;return T=typeof E=="object"?E.value:E,nf(T)?null:T})(n.limit));let g=null;n.startAt&&(g=(function(E){const T=!!E.before,L=E.values||[];return new Ud(L,T)})(n.startAt));let y=null;return n.endAt&&(y=(function(E){const T=!E.before,L=E.values||[];return new Ud(L,T)})(n.endAt)),U2(e,o,d,c,m,"F",g,y)}function SI(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function UE(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=mo(n.unaryFilter.field);return Ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=mo(n.unaryFilter.field);return Ht.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=mo(n.unaryFilter.field);return Ht.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=mo(n.unaryFilter.field);return Ht.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Ht.create(mo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Ea.create(n.compositeFilter.filters.map((r=>UE(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}})(n.compositeFilter.op))})(i):Oe(30097,{filter:i})}function TI(i){return fI[i]}function wI(i){return hI[i]}function NI(i){return pI[i]}function po(i){return{fieldPath:i.canonicalString()}}function mo(i){return sn.fromServerFormat(i.fieldPath)}function BE(i){return i instanceof Ht?(function(n){if(n.op==="=="){if(Kb(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NAN"}};if(Qb(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kb(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NAN"}};if(Qb(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(n.field),op:wI(n.op),value:n.value}}})(i):i instanceof Ea?(function(n){const r=n.getFilters().map((o=>BE(o)));return r.length===1?r[0]:{compositeFilter:{op:NI(n.op),filters:r}}})(i):Oe(54877,{filter:i})}function RI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function HE(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function qE(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class vr{constructor(e,n,r,o,c=De.min(),d=De.min(),m=on.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class CI{constructor(e){this.yt=e}}function II(i){const e=AI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?nm(e,e.limit,"L"):e}class OI{constructor(){this.Sn=new MI}addToCollectionParentIndex(e,n){return this.Sn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(Sr.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(Sr.min())}updateCollectionGroup(e,n,r){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class MI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Gt(gt.comparator),c=!o.has(r);return this.index[n]=o.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Gt(gt.comparator)).toArray()}}const ox={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FE=41943040;class An{static withCacheSize(e){return new An(e,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(FE,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);class Oo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Oo(0)}static ar(){return new Oo(-1)}}const lx="LruGarbageCollector",DI=1048576;function cx([i,e],[n,r]){const o=Qe(i,n);return o===0?Qe(e,r):o}class kI{constructor(e){this.Pr=e,this.buffer=new Gt(cx),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();cx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){pe(lx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ho(n)?pe(lx,"Ignoring IndexedDB error during garbage collection: ",n):await Bo(n)}await this.Ar(3e5)}))}}class PI{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return re.resolve(tf.ce);const r=new kI(n);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(ox)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ox):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,o,c,d,m,g,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,d=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(r=E,m=Date.now(),this.removeTargets(e,r,n)))).next((E=>(c=E,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(y=Date.now(),fo()<=Ge.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-_}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:E}))))}}function VI(i,e){return new PI(i,e)}class LI{constructor(){this.changes=new _s((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?re.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class UI{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&cc(r.mutation,o,zn.empty(),bt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Ke()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Ke()){const o=us();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((c=>{let d=tc();return c.forEach(((m,g)=>{d=d.insert(m,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const r=us();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Ke())))}populateOverlays(e,n,r){const o=[];return r.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,m)=>{n.set(d,m)}))}))}computeViews(e,n,r,o){let c=Oi();const d=lc(),m=(function(){return lc()})();return n.forEach(((g,y)=>{const _=r.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Dr)?c=c.insert(y.key,y):_!==void 0?(d.set(y.key,_.mutation.getFieldMask()),cc(_.mutation,y,_.mutation.getFieldMask(),bt.now())):d.set(y.key,zn.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,_)=>d.set(y,_))),n.forEach(((y,_)=>m.set(y,new zI(_,d.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,n){const r=lc();let o=new At(((d,m)=>d-m)),c=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const m of d)m.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let _=r.get(g)||zn.empty();_=m.applyToLocalView(y,_),r.set(g,_);const E=(o.get(m.batchId)||Ke()).add(g);o=o.insert(m.batchId,E)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,_=g.value,E=TE();_.forEach((T=>{if(!c.has(T)){const L=OE(n.get(T),r.get(T));L!==null&&E.set(T,L),c=c.add(T)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,E))}return re.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return B2(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-c.size):re.resolve(us());let m=pc,g=c;return d.next((y=>re.forEach(y,((_,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),c.get(_)?re.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{g=g.insert(_,T)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,Ke()))).next((_=>({batchId:m,changes:SE(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new we(n)).next((r=>{let o=tc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const c=n.collectionGroup;let d=tc();return this.indexManager.getCollectionParents(e,c).next((m=>re.forEach(m,(g=>{const y=(function(E,T){return new qo(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next((_=>{_.forEach(((E,T)=>{d=d.insert(E,T)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,o)))).next((d=>{c.forEach(((g,y)=>{const _=y.getKey();d.get(_)===null&&(d=d.insert(_,dn.newInvalidDocument(_)))}));let m=tc();return d.forEach(((g,y)=>{const _=c.get(g);_!==void 0&&cc(_.mutation,y,zn.empty(),bt.now()),of(n,y)&&(m=m.insert(g,y))})),m}))}}class BI{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return re.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ja(o.createTime)}})(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:II(o.bundledQuery),readTime:Ja(o.readTime)}})(n)),re.resolve()}}class HI{constructor(){this.overlays=new At(we.comparator),this.Lr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const r=us();return re.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&r.set(o,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,c)=>{this.bt(e,n,c)})),re.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.Lr.get(r);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(r)),re.resolve()}getOverlaysForCollection(e,n,r){const o=us(),c=n.length+1,d=new we(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return re.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let c=new At(((y,_)=>y-_));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let _=c.get(y.largestBatchId);_===null&&(_=us(),c=c.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const m=us(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,_)=>m.set(y,_))),!(m.size()>=o)););return re.resolve(m)}bt(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const d=this.Lr.get(o.largestBatchId).delete(r.key);this.Lr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new sI(n,r));let c=this.Lr.get(n);c===void 0&&(c=Ke(),this.Lr.set(n,c)),this.Lr.set(n,c.add(r.key))}}class qI{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}class Qm{constructor(){this.kr=new Gt(Xt.Kr),this.qr=new Gt(Xt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Xt(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Xt(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new we(new gt([])),r=new Xt(n,e),o=new Xt(n,e+1),c=[];return this.qr.forEachInRange([r,o],(d=>{this.Wr(d),c.push(d.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new we(new gt([])),r=new Xt(n,e),o=new Xt(n,e+1);let c=Ke();return this.qr.forEachInRange([r,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Xt(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xt{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return we.comparator(e.key,n.key)||Qe(e.Hr,n.Hr)}static Ur(e,n){return Qe(e.Hr,n.Hr)||we.comparator(e.key,n.key)}}class FI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Gt(Xt.Kr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new rI(c,n,r,o);this.mutationQueue.push(d);for(const m of o)this.Jr=this.Jr.add(new Xt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(d)}lookupMutationBatch(e,n){return re.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.Xr(r),c=o<0?0:o;return re.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?jm:this.Yn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xt(n,0),o=new Xt(n,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([r,o],(d=>{const m=this.Zr(d.Hr);c.push(m)})),re.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Gt(Qe);return n.forEach((o=>{const c=new Xt(o,0),d=new Xt(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,d],(m=>{r=r.add(m.Hr)}))})),re.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let c=r;we.isDocumentKey(c)||(c=c.child(""));const d=new Xt(new we(c),0);let m=new Gt(Qe);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Hr)),!0)}),d),re.resolve(this.Yr(m))}Yr(e){const n=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){rt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return re.forEach(n.mutations,(o=>{const c=new Xt(o.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Xt(n,0),o=this.Jr.firstAfterOrEqual(r);return re.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class GI{constructor(e){this.ti=e,this.docs=(function(){return new At(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),c=o?o.size:0,d=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return re.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(n))}getEntries(e,n){let r=Oi();return n.forEach((o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():dn.newInvalidDocument(o))})),re.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let c=Oi();const d=n.path,m=new we(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:_}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||y2(g2(_),r)<=0||(o.has(_.key)||of(n,_))&&(c=c.insert(_.key,_.mutableCopy()))}return re.resolve(c)}getAllFromCollectionGroup(e,n,r,o){Oe(9500)}ni(e,n){return re.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new QI(this)}getSize(e){return re.resolve(this.size)}}class QI extends LI{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(r)})),re.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class KI{constructor(e){this.persistence=e,this.ri=new _s((n=>Lm(n)),zm),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.ii=0,this.si=new Qm,this.targetCount=0,this.oi=Oo._r()}forEachTarget(e,n){return this.ri.forEach(((r,o)=>n(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),re.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Oo(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.lr(n),re.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,r){let o=0;const c=[];return this.ri.forEach(((d,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.ri.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),re.waitFor(c).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return re.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),re.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),re.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return re.resolve(r)}containsKey(e,n){return re.resolve(this.si.containsKey(n))}}class GE{constructor(e,n){this._i={},this.overlays={},this.ai=new tf(0),this.ui=!1,this.ui=!0,this.ci=new qI,this.referenceDelegate=e(this),this.li=new KI(this),this.indexManager=new OI,this.remoteDocumentCache=(function(o){return new GI(o)})((r=>this.referenceDelegate.hi(r))),this.serializer=new CI(n),this.Pi=new BI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new HI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new FI(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){pe("MemoryPersistence","Starting transaction:",e);const o=new YI(this.ai.next());return this.referenceDelegate.Ti(),r(o).next((c=>this.referenceDelegate.Ii(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ei(e,n){return re.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class YI extends b2{constructor(e){super(),this.currentSequenceNumber=e}}class Km{constructor(e){this.persistence=e,this.Ri=new Qm,this.Ai=null}static Vi(e){return new Km(e)}get di(){if(this.Ai)return this.Ai;throw Oe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),re.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.di.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,(r=>{const o=we.fromPath(r);return this.mi(e,o).next((c=>{c||n.removeEntry(o,De.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class qd{constructor(e,n){this.persistence=e,this.fi=new _s((r=>E2(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=VI(this,n)}static Vi(e,n){return new qd(e,n)}Ti(){}Ii(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return re.forEach(this.fi,((r,o)=>this.wr(e,r,o).next((c=>c?re.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ni(e,(d=>this.wr(e,d,n).next((m=>{m||(r++,c.removeEntry(d,De.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),re.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),re.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_d(e.data.value)),n}wr(e,n,r){return re.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return re.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ym{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=o}static Es(e,n){let r=Ke(),o=Ke();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Ym(e,n.fromCache,r,o)}}class $I{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class XI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return vw()?8:x2(fn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const c={result:null};return this.gs(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ps(e,n,o,r).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new $I;return this.ys(e,n,d).next((m=>{if(c.result=m,this.As)return this.ws(e,n,d,m.size)}))})).next((()=>c.result))}ws(e,n,r,o){return r.documentReadCount<this.Vs?(fo()<=Ge.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(fo()<=Ge.DEBUG&&pe("QueryEngine","Query:",ho(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ds*o?(fo()<=Ge.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xa(n))):re.resolve())}gs(e,n){if(Jb(n))return re.resolve(null);let r=Xa(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=nm(n,null,"F"),r=Xa(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const d=Ke(...c);return this.fs.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,r).next((g=>{const y=this.bs(n,m);return this.Ss(n,y,d,g.readTime)?this.gs(e,nm(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,r,o){return Jb(n)||o.isEqual(De.min())?re.resolve(null):this.fs.getDocuments(e,r).next((c=>{const d=this.bs(n,c);return this.Ss(n,d,r,o)?re.resolve(null):(fo()<=Ge.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ho(n)),this.Ds(e,d,n,m2(o,pc)).next((m=>m)))}))}bs(e,n){let r=new Gt(EE(e));return n.forEach(((o,c)=>{of(e,c)&&(r=r.add(c))})),r}Ss(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}ys(e,n,r){return fo()<=Ge.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",ho(n)),this.fs.getDocumentsMatchingQuery(e,n,Sr.min(),r)}Ds(e,n,r,o){return this.fs.getDocumentsMatchingQuery(e,r,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}const $m="LocalStore",JI=3e8;class WI{constructor(e,n,r,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new At(Qe),this.Fs=new _s((c=>Lm(c)),zm),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function ZI(i,e,n,r){return new WI(i,e,n,r)}async function QE(i,e){const n=je(i);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((c=>(o=c,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const d=[],m=[];let g=Ke();for(const y of o){d.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}for(const y of c){m.push(y.batchId);for(const _ of y.mutations)g=g.add(_.key)}return n.localDocuments.getDocuments(r,g).next((y=>({Ns:y,removedBatchIds:d,addedBatchIds:m})))}))}))}function eO(i,e){const n=je(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),c=n.xs.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,_){const E=y.batch,T=E.keys();let L=re.resolve();return T.forEach((H=>{L=L.next((()=>_.getEntry(g,H))).next((z=>{const Q=y.docVersions.get(H);rt(Q!==null,48541),z.version.compareTo(Q)<0&&(E.applyToRemoteDocument(z,y),z.isValidDocument()&&(z.setReadTime(y.commitVersion),_.addEntry(z)))}))})),L.next((()=>m.mutationQueue.removeMutationBatch(g,E)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=Ke();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function KE(i){const e=je(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function tO(i,e){const n=je(i),r=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const m=[];e.targetChanges.forEach(((_,E)=>{const T=o.get(E);if(!T)return;m.push(n.li.removeMatchingKeys(c,_.removedDocuments,E).next((()=>n.li.addMatchingKeys(c,_.addedDocuments,E))));let L=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?L=L.withResumeToken(on.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):_.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(_.resumeToken,r)),o=o.insert(E,L),(function(z,Q,ie){return z.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=JI?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(T,L,_)&&m.push(n.li.updateTargetData(c,L))}));let g=Oi(),y=Ke();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,_))})),m.push(nO(c,d,e.documentUpdates).next((_=>{g=_.Bs,y=_.Ls}))),!r.isEqual(De.min())){const _=n.li.getLastRemoteSnapshotVersion(c).next((E=>n.li.setTargetsMetadata(c,c.currentSequenceNumber,r)));m.push(_)}return re.waitFor(m).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.vs=o,c)))}function nO(i,e,n){let r=Ke(),o=Ke();return n.forEach((c=>r=r.add(c))),e.getEntries(i,r).next((c=>{let d=Oi();return n.forEach(((m,g)=>{const y=c.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(De.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):pe($m,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{Bs:d,Ls:o}}))}function aO(i,e){const n=je(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=jm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function iO(i,e){const n=je(i);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.li.getTargetData(r,e).next((c=>c?(o=c,re.resolve(o)):n.li.allocateTargetId(r).next((d=>(o=new vr(e,d,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.vs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function om(i,e,n){const r=je(i),o=r.vs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Ho(d))throw d;pe($m,`Failed to update sequence numbers for target ${e}: ${d}`)}r.vs=r.vs.remove(e),r.Fs.delete(o.target)}function ux(i,e,n){const r=je(i);let o=De.min(),c=Ke();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,_){const E=je(g),T=E.Fs.get(_);return T!==void 0?re.resolve(E.vs.get(T)):E.li.getTargetData(y,_)})(r,d,Xa(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(d,m.targetId).next((g=>{c=g}))})).next((()=>r.Cs.getDocumentsMatchingQuery(d,e,n?o:De.min(),n?c:Ke()))).next((m=>(rO(r,F2(e),m),{documents:m,ks:c})))))}function rO(i,e,n){let r=i.Ms.get(e)||De.min();n.forEach(((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),i.Ms.set(e,r)}class dx{constructor(){this.activeTargetIds=X2()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sO{constructor(){this.vo=new dx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new dx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class oO{Mo(e){}shutdown(){}}const fx="ConnectivityMonitor";class hx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){pe(fx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){pe(fx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let hd=null;function lm(){return hd===null?hd=(function(){return 268435456+Math.round(2147483648*Math.random())})():hd++,"0x"+hd.toString(16)}const Pp="RestConnection",lO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class cO{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.$o=this.databaseId.database===Ld?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,n,r,o,c){const d=lm(),m=this.Qo(e,n.toUriEncodedString());pe(Pp,`Sending RPC '${e}' ${d}:`,m,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,c);const{host:y}=new URL(m),_=Vo(y);return this.zo(e,m,g,r,_).then((E=>(pe(Pp,`Received RPC '${e}' ${d}: `,E),E)),(E=>{throw To(Pp,`RPC '${e}' ${d} failed with error: `,E,"url: ",m,"request:",r),E}))}jo(e,n,r,o,c,d){return this.Wo(e,n,r,o,c)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),r&&r.headers.forEach(((o,c)=>e[c]=o))}Qo(e,n){const r=lO[e];let o=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class uO{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const cn="WebChannelConnection",Jl=(i,e,n)=>{i.listen(e,(r=>{try{n(r)}catch(o){setTimeout((()=>{throw o}),0)}}))};class xo extends cO{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!xo.c_){const e=W_();Jl(e,J_.STAT_EVENT,(n=>{n.stat===$p.PROXY?pe(cn,"STAT_EVENT: detected buffering proxy"):n.stat===$p.NOPROXY&&pe(cn,"STAT_EVENT: detected no buffering proxy")})),xo.c_=!0}}zo(e,n,r,o,c){const d=lm();return new Promise(((m,g)=>{const y=new $_;y.setWithCredentials(!0),y.listenOnce(X_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case xd.NO_ERROR:const E=y.getResponseJson();pe(cn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),m(E);break;case xd.TIMEOUT:pe(cn,`RPC '${e}' ${d} timed out`),g(new he(ne.DEADLINE_EXCEEDED,"Request time out"));break;case xd.HTTP_ERROR:const T=y.getStatus();if(pe(cn,`RPC '${e}' ${d} failed with status:`,T,"response text:",y.getResponseText()),T>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const H=L?.error;if(H&&H.status&&H.message){const z=(function(ie){const B=ie.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(B)>=0?B:ne.UNKNOWN})(H.status);g(new he(z,H.message))}else g(new he(ne.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new he(ne.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{pe(cn,`RPC '${e}' ${d} completed.`)}}));const _=JSON.stringify(o);pe(cn,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",_,r,15)}))}T_(e,n,r){const o=lm(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,n,r),m.encodeInitMessageHeaders=!0;const y=c.join("");pe(cn,`Creating RPC '${e}' stream ${o}: ${y}`,m);const _=d.createWebChannel(y,m);this.I_(_);let E=!1,T=!1;const L=new uO({Ho:H=>{T?pe(cn,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(E||(pe(cn,`Opening RPC '${e}' stream ${o} transport.`),_.open(),E=!0),pe(cn,`RPC '${e}' stream ${o} sending:`,H),_.send(H))},Jo:()=>_.close()});return Jl(_,ec.EventType.OPEN,(()=>{T||(pe(cn,`RPC '${e}' stream ${o} transport opened.`),L.i_())})),Jl(_,ec.EventType.CLOSE,(()=>{T||(T=!0,pe(cn,`RPC '${e}' stream ${o} transport closed`),L.o_(),this.E_(_))})),Jl(_,ec.EventType.ERROR,(H=>{T||(T=!0,To(cn,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),L.o_(new he(ne.UNAVAILABLE,"The operation could not be completed")))})),Jl(_,ec.EventType.MESSAGE,(H=>{if(!T){const z=H.data[0];rt(!!z,16349);const Q=z,ie=Q?.error||Q[0]?.error;if(ie){pe(cn,`RPC '${e}' stream ${o} received error:`,ie);const B=ie.status;let se=(function(ye){const I=Bt[ye];if(I!==void 0)return DE(I)})(B),me=ie.message;se===void 0&&(se=ne.INTERNAL,me="Unknown error status: "+B+" with message "+ie.message),T=!0,L.o_(new he(se,me)),_.close()}else pe(cn,`RPC '${e}' stream ${o} received:`,z),L.__(z)}})),xo.u_(),setTimeout((()=>{L.s_()}),0),L}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Z_()}}function dO(i){return new xo(i)}function Vp(){return typeof document<"u"?document:null}function df(i){return new mI(i,!0)}xo.c_=!1;class YE{constructor(e,n,r=1e3,o=1.5,c=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=o,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&pe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const px="PersistentStream";class $E{constructor(e,n,r,o,c,d,m,g){this.Ci=e,this.b_=r,this.S_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new YE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(Ii(n.toString()),Ii("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new he(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(px,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(pe(px,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class fO extends $E{constructor(e,n,r,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=vI(this.serializer,e),r=(function(c){if(!("targetChange"in c))return De.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?De.min():d.readTime?Ja(d.readTime):De.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=sm(this.serializer),n.addTarget=(function(c,d){let m;const g=d.target;if(m=em(g)?{documents:_I(c,g)}:{query:EI(c,g).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=PE(c,d.resumeToken);const y=am(c,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(De.min())>0){m.readTime=Hd(c,d.snapshotVersion.toTimestamp());const y=am(c,d.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const r=SI(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=sm(this.serializer),n.removeTarget=e,this.K_(n)}}class hO extends $E{constructor(e,n,r,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,d),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=xI(e.writeResults,e.commitTime),r=Ja(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=sm(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>bI(this.serializer,r)))};this.K_(n)}}class pO{}class mO extends pO{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Wo(e,im(n,r),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(ne.UNKNOWN,c.toString())}))}jo(e,n,r,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.jo(e,im(n,r),o,d,m,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new he(ne.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function gO(i,e,n,r){return new mO(i,e,n,r)}class yO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ii(n),this.aa=!1):pe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const vs="RemoteStore";class vO{constructor(e,n,r,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((d=>{r.enqueueAndForget((async()=>{Es(this)&&(pe(vs,"Restarting streams for network reachability change."),await(async function(g){const y=je(g);y.Ea.add(4),await Oc(y),y.Va.set("Unknown"),y.Ea.delete(4),await ff(y)})(this))}))})),this.Va=new yO(r,o)}}async function ff(i){if(Es(i))for(const e of i.Ra)await e(!0)}async function Oc(i){for(const e of i.Ra)await e(!1)}function XE(i,e){const n=je(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Zm(n)?Wm(n):Fo(n).O_()&&Jm(n,e))}function Xm(i,e){const n=je(i),r=Fo(n);n.Ia.delete(e),r.O_()&&JE(n,e),n.Ia.size===0&&(r.O_()?r.L_():Es(n)&&n.Va.set("Unknown"))}function Jm(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fo(i).Z_(e)}function JE(i,e){i.da.$e(e),Fo(i).X_(e)}function Wm(i){i.da=new dI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Fo(i).start(),i.Va.ua()}function Zm(i){return Es(i)&&!Fo(i).x_()&&i.Ia.size>0}function Es(i){return je(i).Ea.size===0}function WE(i){i.da=void 0}async function bO(i){i.Va.set("Online")}async function xO(i){i.Ia.forEach(((e,n)=>{Jm(i,e)}))}async function _O(i,e){WE(i),Zm(i)?(i.Va.ha(e),Wm(i)):i.Va.set("Unknown")}async function EO(i,e,n){if(i.Va.set("Online"),e instanceof jE&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.da.removeTarget(m))})(i,e)}catch(r){pe(vs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fd(i,r)}else if(e instanceof Sd?i.da.Xe(e):e instanceof kE?i.da.st(e):i.da.tt(e),!n.isEqual(De.min()))try{const r=await KE(i.localStore);n.compareTo(r)>=0&&await(function(c,d){const m=c.da.Tt(d);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const _=c.Ia.get(y);_&&c.Ia.set(y,_.withResumeToken(g.resumeToken,d))}})),m.targetMismatches.forEach(((g,y)=>{const _=c.Ia.get(g);if(!_)return;c.Ia.set(g,_.withResumeToken(on.EMPTY_BYTE_STRING,_.snapshotVersion)),JE(c,g);const E=new vr(_.target,g,y,_.sequenceNumber);Jm(c,E)})),c.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(r){pe(vs,"Failed to raise snapshot:",r),await Fd(i,r)}}async function Fd(i,e,n){if(!Ho(e))throw e;i.Ea.add(1),await Oc(i),i.Va.set("Offline"),n||(n=()=>KE(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{pe(vs,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await ff(i)}))}function ZE(i,e){return e().catch((n=>Fd(i,n,e)))}async function hf(i){const e=je(i),n=Rr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jm;for(;AO(e);)try{const o=await aO(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,SO(e,o)}catch(o){await Fd(e,o)}eA(e)&&tA(e)}function AO(i){return Es(i)&&i.Ta.length<10}function SO(i,e){i.Ta.push(e);const n=Rr(i);n.O_()&&n.Y_&&n.ea(e.mutations)}function eA(i){return Es(i)&&!Rr(i).x_()&&i.Ta.length>0}function tA(i){Rr(i).start()}async function TO(i){Rr(i).ra()}async function wO(i){const e=Rr(i);for(const n of i.Ta)e.ea(n.mutations)}async function NO(i,e,n){const r=i.Ta.shift(),o=qm.from(r,e,n);await ZE(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await hf(i)}async function RO(i,e){e&&Rr(i).Y_&&await(async function(r,o){if((function(d){return lI(d)&&d!==ne.ABORTED})(o.code)){const c=r.Ta.shift();Rr(r).B_(),await ZE(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o))),await hf(r)}})(i,e),eA(i)&&tA(i)}async function mx(i,e){const n=je(i);n.asyncQueue.verifyOperationInProgress(),pe(vs,"RemoteStore received new credentials");const r=Es(n);n.Ea.add(3),await Oc(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ff(n)}async function CO(i,e){const n=je(i);e?(n.Ea.delete(2),await ff(n)):e||(n.Ea.add(2),await Oc(n),n.Va.set("Unknown"))}function Fo(i){return i.ma||(i.ma=(function(n,r,o){const c=je(n);return c.sa(),new fO(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Zo:bO.bind(null,i),Yo:xO.bind(null,i),t_:_O.bind(null,i),J_:EO.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),Zm(i)?Wm(i):i.Va.set("Unknown")):(await i.ma.stop(),WE(i))}))),i.ma}function Rr(i){return i.fa||(i.fa=(function(n,r,o){const c=je(n);return c.sa(),new hO(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:TO.bind(null,i),t_:RO.bind(null,i),ta:wO.bind(null,i),na:NO.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await hf(i)):(await i.fa.stop(),i.Ta.length>0&&(pe(vs,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class eg{constructor(e,n,r,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,c){const d=Date.now()+r,m=new eg(e,n,d,o,c);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tg(i,e){if(Ii("AsyncQueue",`${e}: ${i}`),Ho(i))return new he(ne.UNAVAILABLE,`${e}: ${i}`);throw i}class _o{static emptySet(e){return new _o(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||we.comparator(n.key,r.key):(n,r)=>we.comparator(n.key,r.key),this.keyedMap=tc(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _o)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _o;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class gx{constructor(){this.ga=new At(we.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Oe(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Mo{constructor(e,n,r,o,c,d,m,g,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,c){const d=[];return n.forEach((m=>{d.push({type:0,doc:m})})),new Mo(e,n,_o.emptySet(n),d,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}class IO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class OO{constructor(){this.queries=yx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=je(n),c=o.queries;o.queries=yx(),c.forEach(((d,m)=>{for(const g of m.ba)g.onError(r)}))})(this,new he(ne.ABORTED,"Firestore shutting down"))}}function yx(){return new _s((i=>_E(i)),sf)}async function ng(i,e){const n=je(i);let r=3;const o=e.query;let c=n.queries.get(o);c?!c.Sa()&&e.Da()&&(r=2):(c=new IO,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=tg(d,`Initialization of query '${ho(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,c),c.ba.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&ig(n)}async function ag(i,e){const n=je(i),r=e.query;let o=3;const c=n.queries.get(r);if(c){const d=c.ba.indexOf(e);d>=0&&(c.ba.splice(d,1),c.ba.length===0?o=e.Da()?0:1:!c.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function MO(i,e){const n=je(i);let r=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const m of d.ba)m.Fa(o)&&(r=!0);d.wa=o}}r&&ig(n)}function DO(i,e,n){const r=je(i),o=r.queries.get(e);if(o)for(const c of o.ba)c.onError(n);r.queries.delete(e)}function ig(i){i.Ca.forEach((e=>{e.next()}))}var cm,vx;(vx=cm||(cm={})).Ma="default",vx.Cache="cache";class rg{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Mo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cm.Cache}}class nA{constructor(e){this.key=e}}class aA{constructor(e){this.key=e}}class kO{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ke(),this.mutatedKeys=Ke(),this.eu=EE(e),this.tu=new _o(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new gx,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const T=o.get(_),L=of(this.query,E)?E:null,H=!!T&&this.mutatedKeys.has(T.key),z=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let Q=!1;T&&L?T.data.isEqual(L.data)?H!==z&&(r.track({type:3,doc:L}),Q=!0):this.su(T,L)||(r.track({type:2,doc:L}),Q=!0,(g&&this.eu(L,g)>0||y&&this.eu(L,y)<0)&&(m=!0)):!T&&L?(r.track({type:0,doc:L}),Q=!0):T&&!L&&(r.track({type:1,doc:T}),Q=!0,(g||y)&&(m=!0)),Q&&(L?(d=d.add(L),c=z?c.add(_):c.delete(_)):(d=d.delete(_),c=c.delete(_)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),c=c.delete(_.key),r.track({type:1,doc:_})}return{tu:d,iu:r,Ss:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((_,E)=>(function(L,H){const z=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Vt:Q})}};return z(L)-z(H)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(r),o=o??!1;const m=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Xa;return this.Xa=g,d.length!==0||y?{snapshot:new Mo(this.query,e.tu,c,d,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gx,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ke(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new aA(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new nA(r))})),n}cu(e){this.Za=e.ks,this.Ya=Ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Mo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const sg="SyncEngine";class jO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class PO{constructor(e){this.key=e,this.hu=!1}}class VO{constructor(e,n,r,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new _s((m=>_E(m)),sf),this.Iu=new Map,this.Eu=new Set,this.Ru=new At(we.comparator),this.Au=new Map,this.Vu=new Qm,this.du={},this.mu=new Map,this.fu=Oo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LO(i,e,n=!0){const r=cA(i);let o;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await iA(r,e,n,!0),o}async function zO(i,e){const n=cA(i);await iA(n,e,!0,!1)}async function iA(i,e,n,r){const o=await iO(i.localStore,Xa(e)),c=o.targetId,d=i.sharedClientState.addLocalQueryTarget(c,n);let m;return r&&(m=await UO(i,e,c,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&XE(i.remoteStore,o),m}async function UO(i,e,n,r,o){i.pu=(E,T,L)=>(async function(z,Q,ie,B){let se=Q.view.ru(ie);se.Ss&&(se=await ux(z.localStore,Q.query,!1).then((({documents:I})=>Q.view.ru(I,se))));const me=B&&B.targetChanges.get(Q.targetId),Ae=B&&B.targetMismatches.get(Q.targetId)!=null,ye=Q.view.applyChanges(se,z.isPrimaryClient,me,Ae);return xx(z,Q.targetId,ye.au),ye.snapshot})(i,E,T,L);const c=await ux(i.localStore,e,!0),d=new kO(e,c.ks),m=d.ru(c.documents),g=Ic.createSynthesizedTargetChangeForCurrentChange(n,r&&i.onlineState!=="Offline",o),y=d.applyChanges(m,i.isPrimaryClient,g);xx(i,n,y.au);const _=new jO(e,n,d);return i.Tu.set(e,_),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),y.snapshot}async function BO(i,e,n){const r=je(i),o=r.Tu.get(e),c=r.Iu.get(o.targetId);if(c.length>1)return r.Iu.set(o.targetId,c.filter((d=>!sf(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await om(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Xm(r.remoteStore,o.targetId),um(r,o.targetId)})).catch(Bo)):(um(r,o.targetId),await om(r.localStore,o.targetId,!0))}async function HO(i,e){const n=je(i),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Xm(n.remoteStore,r.targetId))}async function qO(i,e,n){const r=XO(i);try{const o=await(function(d,m){const g=je(d),y=bt.now(),_=m.reduce(((L,H)=>L.add(H.key)),Ke());let E,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let H=Oi(),z=Ke();return g.xs.getEntries(L,_).next((Q=>{H=Q,H.forEach(((ie,B)=>{B.isValidDocument()||(z=z.add(ie))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,H))).next((Q=>{E=Q;const ie=[];for(const B of m){const se=aI(B,E.get(B.key).overlayedDocument);se!=null&&ie.push(new Dr(B.key,se,hE(se.value.mapValue),aa.exists(!0)))}return g.mutationQueue.addMutationBatch(L,y,ie,m)})).next((Q=>{T=Q;const ie=Q.applyToLocalDocumentSet(E,z);return g.documentOverlayCache.saveOverlays(L,Q.batchId,ie)}))})).then((()=>({batchId:T.batchId,changes:SE(E)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(d,m,g){let y=d.du[d.currentUser.toKey()];y||(y=new At(Qe)),y=y.insert(m,g),d.du[d.currentUser.toKey()]=y})(r,o.batchId,n),await Mc(r,o.changes),await hf(r.remoteStore)}catch(o){const c=tg(o,"Failed to persist write");n.reject(c)}}async function rA(i,e){const n=je(i);try{const r=await tO(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Au.get(c);d&&(rt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?rt(d.hu,14607):o.removedDocuments.size>0&&(rt(d.hu,42227),d.hu=!1))})),await Mc(n,r,e)}catch(r){await Bo(r)}}function bx(i,e,n){const r=je(i);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((c,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const g=je(d);g.onlineState=m;let y=!1;g.queries.forEach(((_,E)=>{for(const T of E.ba)T.va(m)&&(y=!0)})),y&&ig(g)})(r.eventManager,e),o.length&&r.Pu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FO(i,e,n){const r=je(i);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),c=o&&o.key;if(c){let d=new At(we.comparator);d=d.insert(c,dn.newNoDocument(c,De.min()));const m=Ke().add(c),g=new uf(De.min(),new Map,new At(Qe),d,m);await rA(r,g),r.Ru=r.Ru.remove(c),r.Au.delete(e),og(r)}else await om(r.localStore,e,!1).then((()=>um(r,e,n))).catch(Bo)}async function GO(i,e){const n=je(i),r=e.batch.batchId;try{const o=await eO(n.localStore,e);oA(n,r,null),sA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mc(n,o)}catch(o){await Bo(o)}}async function QO(i,e,n){const r=je(i);try{const o=await(function(d,m){const g=je(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return g.mutationQueue.lookupMutationBatch(y,m).next((E=>(rt(E!==null,37113),_=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,_,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>g.localDocuments.getDocuments(y,_)))}))})(r.localStore,e);oA(r,e,n),sA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Mc(r,o)}catch(o){await Bo(o)}}function sA(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function oA(i,e,n){const r=je(i);let o=r.du[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),r.du[r.currentUser.toKey()]=o}}function um(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Iu.get(e))i.Tu.delete(r),n&&i.Pu.yu(r,n);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((r=>{i.Vu.containsKey(r)||lA(i,r)}))}function lA(i,e){i.Eu.delete(e.path.canonicalString());const n=i.Ru.get(e);n!==null&&(Xm(i.remoteStore,n),i.Ru=i.Ru.remove(e),i.Au.delete(n),og(i))}function xx(i,e,n){for(const r of n)r instanceof nA?(i.Vu.addReference(r.key,e),KO(i,r)):r instanceof aA?(pe(sg,"Document no longer in limbo: "+r.key),i.Vu.removeReference(r.key,e),i.Vu.containsKey(r.key)||lA(i,r.key)):Oe(19791,{wu:r})}function KO(i,e){const n=e.key,r=n.path.canonicalString();i.Ru.get(n)||i.Eu.has(r)||(pe(sg,"New document in limbo: "+n),i.Eu.add(r),og(i))}function og(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new we(gt.fromString(e)),r=i.fu.next();i.Au.set(r,new PO(n)),i.Ru=i.Ru.insert(n,r),XE(i.remoteStore,new vr(Xa(rf(n.path)),r,"TargetPurposeLimboResolution",tf.ce))}}async function Mc(i,e,n){const r=je(i),o=[],c=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{d.push(r.pu(g,e,n).then((y=>{if((y||n)&&r.isPrimaryClient){const _=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(y){o.push(y);const _=Ym.Es(g.targetId,y);c.push(_)}})))})),await Promise.all(d),r.Pu.J_(o),await(async function(g,y){const _=je(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>re.forEach(y,(T=>re.forEach(T.Ts,(L=>_.persistence.referenceDelegate.addReference(E,T.targetId,L))).next((()=>re.forEach(T.Is,(L=>_.persistence.referenceDelegate.removeReference(E,T.targetId,L)))))))))}catch(E){if(!Ho(E))throw E;pe($m,"Failed to update sequence numbers: "+E)}for(const E of y){const T=E.targetId;if(!E.fromCache){const L=_.vs.get(T),H=L.snapshotVersion,z=L.withLastLimboFreeSnapshotVersion(H);_.vs=_.vs.insert(T,z)}}})(r.localStore,c))}async function YO(i,e){const n=je(i);if(!n.currentUser.isEqual(e)){pe(sg,"User change. New user:",e.toKey());const r=await QE(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new he(ne.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mc(n,r.Ns)}}function $O(i,e){const n=je(i),r=n.Au.get(e);if(r&&r.hu)return Ke().add(r.key);{let o=Ke();const c=n.Iu.get(e);if(!c)return o;for(const d of c){const m=n.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function cA(i){const e=je(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=rA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$O.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FO.bind(null,e),e.Pu.J_=MO.bind(null,e.eventManager),e.Pu.yu=DO.bind(null,e.eventManager),e}function XO(i){const e=je(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QO.bind(null,e),e}class Gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=df(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ZI(this.persistence,new XI,e.initialUser,this.serializer)}Cu(e){return new GE(Km.Vi,this.serializer)}Du(e){return new sO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gd.provider={build:()=>new Gd};class JO extends Gd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){rt(this.persistence.referenceDelegate instanceof qd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new jI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new GE((r=>qd.Vi(r,n)),this.serializer)}}class dm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=YO.bind(null,this.syncEngine),await CO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new OO})()}createDatastore(e){const n=df(e.databaseInfo.databaseId),r=dO(e.databaseInfo);return gO(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,c,d,m){return new vO(r,o,c,d,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>bx(this.syncEngine,n,0)),(function(){return hx.v()?new hx:new oO})())}createSyncEngine(e,n){return(function(o,c,d,m,g,y,_){const E=new VO(o,c,d,m,g,y);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=je(n);pe(vs,"RemoteStore shutting down."),r.Ea.add(5),await Oc(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}dm.provider={build:()=>new dm};class lg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ii("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Cr="FirestoreClient";class WO{constructor(e,n,r,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=km.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async d=>{pe(Cr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(pe(Cr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=tg(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Lp(i,e){i.asyncQueue.verifyOperationInProgress(),pe(Cr,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let r=n.initialUser;i.setCredentialChangeListener((async o=>{r.isEqual(o)||(await QE(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function _x(i,e){i.asyncQueue.verifyOperationInProgress();const n=await ZO(i);pe(Cr,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((r=>mx(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,o)=>mx(e.remoteStore,o))),i._onlineComponents=e}async function ZO(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){pe(Cr,"Using user provided OfflineComponentProvider");try{await Lp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;To("Error using user provided cache. Falling back to memory cache: "+n),await Lp(i,new Gd)}}else pe(Cr,"Using default OfflineComponentProvider"),await Lp(i,new JO(void 0));return i._offlineComponents}async function uA(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(pe(Cr,"Using user provided OnlineComponentProvider"),await _x(i,i._uninitializedComponentsProvider._online)):(pe(Cr,"Using default OnlineComponentProvider"),await _x(i,new dm))),i._onlineComponents}function eM(i){return uA(i).then((e=>e.syncEngine))}async function Qd(i){const e=await uA(i),n=e.eventManager;return n.onListen=LO.bind(null,e.syncEngine),n.onUnlisten=BO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HO.bind(null,e.syncEngine),n}function tM(i,e,n,r){const o=new lg(r),c=new rg(e,o,n);return i.asyncQueue.enqueueAndForget((async()=>ng(await Qd(i),c))),()=>{o.Nu(),i.asyncQueue.enqueueAndForget((async()=>ag(await Qd(i),c)))}}function nM(i,e,n={}){const r=new Ti;return i.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,g,y){const _=new lg({next:T=>{_.Nu(),d.enqueueAndForget((()=>ag(c,E)));const L=T.docs.has(m);!L&&T.fromCache?y.reject(new he(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&T.fromCache&&g&&g.source==="server"?y.reject(new he(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new rg(rf(m.path),_,{includeMetadataChanges:!0,Ka:!0});return ng(c,E)})(await Qd(i),i.asyncQueue,e,n,r))),r.promise}function aM(i,e,n={}){const r=new Ti;return i.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,g,y){const _=new lg({next:T=>{_.Nu(),d.enqueueAndForget((()=>ag(c,E))),T.fromCache&&g.source==="server"?y.reject(new he(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new rg(m,_,{includeMetadataChanges:!0,Ka:!0});return ng(c,E)})(await Qd(i),i.asyncQueue,e,n,r))),r.promise}function iM(i,e){const n=new Ti;return i.asyncQueue.enqueueAndForget((async()=>qO(await eM(i),e,n))),n.promise}function dA(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const rM="ComponentProvider",Ex=new Map;function sM(i,e,n,r,o){return new T2(i,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,dA(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,r)}const fA="firestore.googleapis.com",Ax=!0;class Sx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fA,this.ssl=Ax}else this.host=e.host,this.ssl=e.ssl??Ax;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DI)throw new he(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}p2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pf{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new i2;switch(r.type){case"firstParty":return new l2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Ex.get(n);r&&(pe(rM,"Removing Datastore"),Ex.delete(n),r.terminate())})(this),Promise.resolve()}}function oM(i,e,n,r={}){i=Rn(i,pf);const o=Vo(e),c=i._getSettings(),d={...c,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(r_(`https://${m}`),s_("Firestore",!0)),c.host!==fA&&c.host!==m&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:r};if(!Ni(g,d)&&(i._setSettings(g),r.mockUserToken)){let y,_;if(typeof r.mockUserToken=="string")y=r.mockUserToken,_=un.MOCK_USER;else{y=cw(r.mockUserToken,i._app?.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new he(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new un(E)}i._authCredentials=new r2(new tE(y,_))}}class kr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new kr(this.firestore,e,this._query)}}class wt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}toJSON(){return{type:wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Rc(n,wt._jsonSchema))return new wt(e,r||null,new we(gt.fromString(n.referencePath)))}}wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:qt("string",wt._jsonSchemaVersion),referencePath:qt("string")};class Ar extends kr{constructor(e,n,r){super(e,n,rf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new we(e))}withConverter(e){return new Ar(this.firestore,e,this._path)}}function Mt(i,e,...n){if(i=Qt(i),nE("collection","path",e),i instanceof pf){const r=gt.fromString(e,...n);return Vb(r),new Ar(i,null,r)}{if(!(i instanceof wt||i instanceof Ar))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(gt.fromString(e,...n));return Vb(r),new Ar(i.firestore,null,r)}}function it(i,e,...n){if(i=Qt(i),arguments.length===1&&(e=km.newId()),nE("doc","path",e),i instanceof pf){const r=gt.fromString(e,...n);return Pb(r),new wt(i,null,new we(r))}{if(!(i instanceof wt||i instanceof Ar))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(gt.fromString(e,...n));return Pb(r),new wt(i.firestore,i instanceof Ar?i.converter:null,new we(r))}}const Tx="AsyncQueue";class wx{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new YE(this,"async_queue_retry"),this._c=()=>{const r=Vp();r&&pe(Tx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Vp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Vp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ti;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ho(e))throw e;pe(Tx,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ii("INTERNAL UNHANDLED ERROR: ",Nx(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=eg.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Oe(47125,{Pc:Nx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Nx(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Mi extends pf{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new wx,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wx(e),this._firestoreClient=void 0,await e}}}function lM(i,e){const n=typeof i=="object"?i:u_(),r=typeof i=="string"?i:Ld,o=Sm(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=ow("firestore");c&&oM(o,...c)}return o}function mf(i){if(i._terminated)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||cM(i),i._firestoreClient}function cM(i){const e=i._freezeSettings(),n=sM(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new WO(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}class na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new na(on.fromBase64String(e))}catch(n){throw new he(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new na(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:na._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rc(e,na._jsonSchema))return na.fromBase64String(e.bytes)}}na._jsonSchemaVersion="firestore/bytes/1.0",na._jsonSchema={type:qt("string",na._jsonSchemaVersion),bytes:qt("string")};class cg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Go{constructor(e){this._methodName=e}}class Wa{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wa._jsonSchemaVersion}}static fromJSON(e){if(Rc(e,Wa._jsonSchema))return new Wa(e.latitude,e.longitude)}}Wa._jsonSchemaVersion="firestore/geoPoint/1.0",Wa._jsonSchema={type:qt("string",Wa._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};class ba{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ba._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rc(e,ba._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ba(e.vectorValues);throw new he(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ba._jsonSchemaVersion="firestore/vectorValue/1.0",ba._jsonSchema={type:qt("string",ba._jsonSchemaVersion),vectorValues:qt("object")};const uM=/^__.*__$/;class dM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cc(e,this.data,n,this.fieldTransforms)}}class hA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pA(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{dataSource:i})}}class gf{constructor(e,n,r,o,c,d){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new gf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Kd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(pA(this.dataSource)&&uM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class fM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||df(e)}createContext(e,n,r,o=!1){return new gf({dataSource:e,methodName:n,targetDoc:r,path:sn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yf(i){const e=i._freezeSettings(),n=df(i._databaseId);return new fM(i._databaseId,!!e.ignoreUndefinedProperties,n)}function mA(i,e,n,r,o,c={}){const d=i.createContext(c.merge||c.mergeFields?2:0,e,n,o);hg("Data must be an object, but it was:",d,r);const m=yA(r,d);let g,y;if(c.merge)g=new zn(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const _=[];for(const E of c.mergeFields){const T=bs(e,E,n);if(!d.contains(T))throw new he(ne.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);xA(_,T)||_.push(T)}g=new zn(_),y=d.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=d.fieldTransforms;return new dM(new Sn(m),g,y)}class vf extends Go{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vf}}function gA(i,e,n){return new gf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:i._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ug extends Go{_toFieldTransform(e){return new Bm(e.path,new bc)}isEqual(e){return e instanceof ug}}class dg extends Go{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=gA(this,e,!0),r=this.Ac.map((c=>As(c,n))),o=new Co(r);return new Bm(e.path,o)}isEqual(e){return e instanceof dg&&Ni(this.Ac,e.Ac)}}class fg extends Go{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=gA(this,e,!0),r=this.Ac.map((c=>As(c,n))),o=new Io(r);return new Bm(e.path,o)}isEqual(e){return e instanceof fg&&Ni(this.Ac,e.Ac)}}function hM(i,e,n,r){const o=i.createContext(1,e,n);hg("Data must be an object, but it was:",o,r);const c=[],d=Sn.empty();Mr(r,((g,y)=>{const _=bA(e,g,n);y=Qt(y);const E=o.childContextForFieldPath(_);if(y instanceof vf)c.push(_);else{const T=As(y,E);T!=null&&(c.push(_),d.set(_,T))}}));const m=new zn(c);return new hA(d,m,o.fieldTransforms)}function pM(i,e,n,r,o,c){const d=i.createContext(1,e,n),m=[bs(e,r,n)],g=[o];if(c.length%2!=0)throw new he(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<c.length;T+=2)m.push(bs(e,c[T])),g.push(c[T+1]);const y=[],_=Sn.empty();for(let T=m.length-1;T>=0;--T)if(!xA(y,m[T])){const L=m[T];let H=g[T];H=Qt(H);const z=d.childContextForFieldPath(L);if(H instanceof vf)y.push(L);else{const Q=As(H,z);Q!=null&&(y.push(L),_.set(L,Q))}}const E=new zn(y);return new hA(_,E,d.fieldTransforms)}function mM(i,e,n,r=!1){return As(n,i.createContext(r?4:3,e))}function As(i,e){if(vA(i=Qt(i)))return hg("Unsupported field value:",e,i),yA(i,e);if(i instanceof Go)return(function(r,o){if(!pA(o.dataSource))throw o.createError(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,o){const c=[];let d=0;for(const m of r){let g=As(m,o.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(i,e)}return(function(r,o){if((r=Qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return J2(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=bt.fromDate(r);return{timestampValue:Hd(o.serializer,c)}}if(r instanceof bt){const c=new bt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hd(o.serializer,c)}}if(r instanceof Wa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof na)return{bytesValue:PE(o.serializer,r._byteString)};if(r instanceof wt){const c=o.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw o.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Gm(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ba)return(function(d,m){const g=d instanceof ba?d.toArray():d;return{mapValue:{fields:{[dE]:{stringValue:fE},[zd]:{arrayValue:{values:g.map((_=>{if(typeof _!="number")throw m.createError("VectorValues must only contain numeric values.");return Um(m.serializer,_)}))}}}}}})(r,o);if(qE(r))return r._toProto(o.serializer);throw o.createError(`Unsupported field value: ${ef(r)}`)})(i,e)}function yA(i,e){const n={};return rE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mr(i,((r,o)=>{const c=As(o,e.childContextForField(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function vA(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof bt||i instanceof Wa||i instanceof na||i instanceof wt||i instanceof Go||i instanceof ba||qE(i))}function hg(i,e,n){if(!vA(n)||!aE(n)){const r=ef(n);throw r==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+r)}}function bs(i,e,n){if((e=Qt(e))instanceof cg)return e._internalPath;if(typeof e=="string")return bA(i,e);throw Kd("Field path arguments must be of type string or ",i,!1,void 0,n)}const gM=new RegExp("[~\\*/\\[\\]]");function bA(i,e,n){if(e.search(gM)>=0)throw Kd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new cg(...e.split("."))._internalPath}catch{throw Kd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Kd(i,e,n,r,o){const c=r&&!r.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${r}`),d&&(g+=` in document ${o}`),g+=")"),new he(ne.INVALID_ARGUMENT,m+i+g)}function xA(i,e){return i.some((n=>n.isEqual(e)))}class yM{convertValue(e,n="none"){switch(Nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Mr(e,((o,c)=>{r[o]=this.convertValue(c,n)})),r}convertVectorValue(e){const n=e.fields?.[zd].arrayValue?.values?.map((r=>Ot(r.doubleValue)));return new ba(n)}convertGeoPoint(e){return new Wa(Ot(e.latitude),Ot(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=af(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(mc(e));default:return null}}convertTimestamp(e){const n=Tr(e);return new bt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=gt.fromString(e);rt(HE(r),9688,{name:e});const o=new gc(r.get(1),r.get(3)),c=new we(r.popFirst(5));return o.isEqual(n)||Ii(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}class pg extends yM{constructor(e){super(),this.firestore=e}convertBytes(e){return new na(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}}function Ln(){return new ug("serverTimestamp")}function vM(...i){return new dg("arrayUnion",i)}function bM(...i){return new fg("arrayRemove",i)}const Rx="@firebase/firestore",Cx="4.10.0";function Ix(i){return(function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const c of r)if(c in o&&typeof o[c]=="function")return!0;return!1})(i,["next","error","complete"])}class _A{constructor(e,n,r,o,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(bs("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xM extends _A{data(){return super.data()}}function EA(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new he(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mg{}class AA extends mg{}function wn(i,e,...n){let r=[];e instanceof mg&&r.push(e),r=r.concat(n),(function(c){const d=c.filter((g=>g instanceof gg)).length,m=c.filter((g=>g instanceof bf)).length;if(d>1||d>0&&m>0)throw new he(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)i=o._apply(i);return i}class bf extends AA{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new bf(e,n,r)}_apply(e){const n=this._parse(e);return SA(e._query,n),new kr(e.firestore,e.converter,tm(e._query,n))}_parse(e){const n=yf(e.firestore);return(function(c,d,m,g,y,_,E){let T;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new he(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Mx(E,_);const H=[];for(const z of E)H.push(Ox(g,c,z));T={arrayValue:{values:H}}}else T=Ox(g,c,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Mx(E,_),T=mM(m,d,E,_==="in"||_==="not-in");return Ht.create(y,_,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function xa(i,e,n){const r=e,o=bs("where",i);return bf._create(o,r,n)}class gg extends mg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new gg(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ea.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const m=c.getFlattenedFilters();for(const g of m)SA(d,g),d=tm(d,g)})(e._query,n),new kr(e.firestore,e.converter,tm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yg extends AA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new yg(e,n)}_apply(e){const n=(function(o,c,d){if(o.startAt!==null)throw new he(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vc(c,d)})(e._query,this._field,this._direction);return new kr(e.firestore,e.converter,q2(e._query,n))}}function Eo(i,e="asc"){const n=e,r=bs("orderBy",i);return yg._create(r,n)}function Ox(i,e,n){if(typeof(n=Qt(n))=="string"){if(n==="")throw new he(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xE(e)&&n.indexOf("/")!==-1)throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(gt.fromString(n));if(!we.isDocumentKey(r))throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gb(i,new we(r))}if(n instanceof wt)return Gb(i,n._key);throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ef(n)}.`)}function Mx(i,e){if(!Array.isArray(i)||i.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SA(i,e){const n=(function(o,c){for(const d of o)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function TA(i,e,n){let r;return r=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,r}class ac{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ds extends _A{constructor(e,n,r,o,c,d){super(e,n,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Td(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(bs("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ds._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ds._jsonSchemaVersion="firestore/documentSnapshot/1.0",ds._jsonSchema={type:qt("string",ds._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};class Td extends ds{data(e={}){return super.data(e)}}class fs{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ac(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Td(this._firestore,this._userDataWriter,r.key,r,new ac(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const g=new Td(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ac(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new Td(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ac(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),_=d.indexOf(m.doc.key)),{type:_M(m.type),doc:g,oldIndex:y,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=fs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=km.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _M(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:i})}}fs._jsonSchemaVersion="firestore/querySnapshot/1.0",fs._jsonSchema={type:qt("string",fs._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};function wd(i){i=Rn(i,wt);const e=Rn(i.firestore,Mi),n=mf(e);return nM(n,i._key).then((r=>wA(e,i,r)))}function fm(i){i=Rn(i,kr);const e=Rn(i.firestore,Mi),n=mf(e),r=new pg(e);return EA(i._query),aM(n,i._query).then((o=>new fs(e,r,i,o)))}function vg(i,e,n){i=Rn(i,wt);const r=Rn(i.firestore,Mi),o=TA(i.converter,e,n),c=yf(r);return xf(r,[mA(c,"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,aa.none())])}function Tn(i,e,n,...r){i=Rn(i,wt);const o=Rn(i.firestore,Mi),c=yf(o);let d;return d=typeof(e=Qt(e))=="string"||e instanceof cg?pM(c,"updateDoc",i._key,e,n,r):hM(c,"updateDoc",i._key,e),xf(o,[d.toMutation(i._key,aa.exists(!0))])}function hs(i){return xf(Rn(i.firestore,Mi),[new Hm(i._key,aa.none())])}function uc(i,e){const n=Rn(i.firestore,Mi),r=it(i),o=TA(i.converter,e),c=yf(i.firestore);return xf(n,[mA(c,"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,aa.exists(!1))]).then((()=>r))}function Nn(i,...e){i=Qt(i);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Ix(e[r])||(n=e[r++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Ix(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let c,d,m;if(i instanceof wt)d=Rn(i.firestore,Mi),m=rf(i._key.path),c={next:y=>{e[r]&&e[r](wA(d,i,y))},error:e[r+1],complete:e[r+2]};else{const y=Rn(i,kr);d=Rn(y.firestore,Mi),m=y._query;const _=new pg(d);c={next:E=>{e[r]&&e[r](new fs(d,_,y,E))},error:e[r+1],complete:e[r+2]},EA(i._query)}const g=mf(d);return tM(g,m,o,c)}function xf(i,e){const n=mf(i);return iM(n,e)}function wA(i,e,n){const r=n.docs.get(e._key),o=new pg(i);return new ds(i,o,e._key,r,new ac(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){a2(Lo),Ao(new ps("firestore",((r,{instanceIdentifier:o,options:c})=>{const d=r.getProvider("app").getImmediate(),m=new Mi(new s2(r.getProvider("auth-internal")),new c2(d,r.getProvider("app-check-internal")),w2(d,o),d);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),_r(Rx,Cx,e),_r(Rx,Cx,"esm2020")})();const EM={apiKey:"AIzaSyB3p9kAAb0TJXvJMKzUS6pummdlkbzlt6I",authDomain:"fft12l.firebaseapp.com",projectId:"fft12l",storageBucket:"fft12l.firebasestorage.app",messagingSenderId:"459190857682",appId:"1:459190857682:web:d857f4bf1fa2e5ec11220b"},NA=c_(EM),at=t2(NA),Ce=lM(NA),RA=(i,e)=>V_(at,i,e),AM="/FF-12Liberation/assets/chocobo-loading-CZsGc2ZM.gif",CA="/FF-12Liberation/assets/musica-tema-78rqvj_H.mp3",SM="/FF-12Liberation/assets/fundo-rpg-BXz1tR4K.jpg",Do=new Audio(CA);Do.loop=!0;function TM(){const i=Po(),e=()=>{Do.play().then(()=>{console.log("ter musical sintonizado.")}).catch(n=>{console.log("Aguardando interao para liberar udio: ",n)}),i("/login")};return h.jsxs("div",{className:"landing-container",onClick:e,children:[h.jsxs("div",{className:"content",children:[h.jsx("h1",{className:"game-title",children:"FINAL FANTASY"}),h.jsx("h2",{className:"sub-title",children:"12 Libertao"}),h.jsx("div",{className:"press-start",children:"PRESS START"})]}),h.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .landing-container {
          height: 100vh;
          width: 100vw;
          display: flex;
          align-items: center;
          justify-content: center;
          /* Gradiente FF clssico sobre a imagem de fundo */
          background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), 
                      url(${SM}) no-repeat center center;
          background-size: cover; 
          cursor: pointer;
          position: fixed;
          top: 0;
          left: 0;
          z-index: 1000;
        }

        .content {
          text-align: center;
          /* Animao de entrada suave com blur */
          animation: fadeInSuave 4s ease-in-out; 
        }

        .game-title {
          font-size: clamp(30px, 8vw, 60px);
          letter-spacing: 8px;
          color: #fff;
          text-shadow: 3px 3px 5px #000, 0 0 20px rgba(0, 242, 255, 0.5);
          font-family: 'serif';
        }

        .sub-title {
          font-size: clamp(14px, 4vw, 24px);
          color: #ffcc00;
          margin-top: 10px;
          text-shadow: 1px 1px 3px #000;
          font-family: 'serif';
        }

        .press-start {
          margin-top: 80px;
          font-size: 20px;
          color: #fff;
          letter-spacing: 5px;
          text-shadow: 0 0 10px #00f2ff;
          /* Efeito pulsante clssico de menu */
          animation: blink 1.5s infinite;
          font-family: 'sans-serif';
        }

        @keyframes blink {
          0%, 100% { opacity: 0; }
          50% { opacity: 1; }
        }

        @keyframes fadeInSuave {
          from { opacity: 0; filter: blur(15px); transform: scale(0.9); }
          to { opacity: 1; filter: blur(0); transform: scale(1); }
        }
      `}})]})}const IA="/FF-12Liberation/assets/video-fundo-B5LPnOg0.mp4",wM="/FF-12Liberation/assets/botao-admin-T-iaDg61.png";function NM(){const i=Po(),e=O.useRef(null),[n,r]=O.useState(null),[o,c]=O.useState(""),[d,m]=O.useState(""),[g,y]=O.useState(""),_=()=>{e.current&&(e.current.pause(),e.current.currentTime=0)};O.useEffect(()=>{if(e.current){e.current.volume=.1;const L=e.current.play();L!==void 0&&L.catch(H=>{console.log("Autoplay bloqueado pelo navegador (interao necessria):",H)})}return()=>{_()}},[]);const E=async L=>{L.preventDefault(),y("");try{const z=(await RA(o,d)).user,Q=it(Ce,"users",z.uid),ie=await wd(Q);if(ie.exists()){const B=ie.data();if(n==="master"&&B.role!=="mestre"){y("ACESSO NEGADO: VOC NO  UM MESTRE.");return}if(_(),B.role==="mestre")i("/mestre");else{const se=it(Ce,"characters",z.uid);(await wd(se)).exists()?i("/jogador-vtt"):i("/create-character")}}else{const B=it(Ce,"characters",z.uid),se=await wd(B);_(),se.exists()?i("/jogador-vtt"):i("/create-character")}}catch(H){console.error(H),y("FALHA NA CONEXO COM O TER.")}},T=()=>{_(),i("/admin-login")};return h.jsxs("div",{className:"login-container",children:[h.jsx("audio",{ref:e,loop:!0,children:h.jsx("source",{src:CA,type:"audio/mp3"})}),h.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",className:"background-video",children:h.jsx("source",{src:IA,type:"video/mp4"})}),h.jsx("div",{className:"content-overlay",children:n?h.jsxs("form",{className:"login-panel fade-in",onSubmit:E,children:[h.jsx("button",{type:"button",className:"ff-back",onClick:()=>r(null),children:" RETORNAR"}),h.jsx("h3",{className:"ff-subtitle",children:n==="master"?"NARRADOR":"JOGADOR"}),h.jsxs("div",{className:"ff-input-group",children:[h.jsx("input",{type:"email",placeholder:"E-MAIL",value:o,onChange:L=>c(L.target.value),required:!0}),h.jsx("input",{type:"password",placeholder:"SENHA",value:d,onChange:L=>m(L.target.value),required:!0})]}),g&&h.jsx("p",{className:"ff-error",children:g}),h.jsx("button",{type:"submit",className:"ff-submit",children:"ENTRAR"})]}):h.jsxs("div",{className:"selection-screen fade-in",children:[h.jsx("h2",{className:"ff-title",children:"ESCOLHA SUA JORNADA"}),h.jsxs("div",{className:"ff-button-group",children:[h.jsx("button",{className:"ff-btn",onClick:()=>r("player"),children:"JOGADOR"}),h.jsx("button",{className:"ff-btn",onClick:()=>r("master"),children:"NARRADOR"})]})]})}),h.jsx("button",{className:"admin-portal-btn",onClick:T,title:"Acesso ao Narrador",children:h.jsx("img",{src:wM,alt:"Portal Admin"})}),h.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .login-container {
          height: 100vh;
          width: 100vw;
          background: #000;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          position: relative;
        }

        .background-video {
          position: absolute;
          top: 50%;
          left: 50%;
          min-width: 100%;
          min-height: 100%;
          width: auto;
          height: auto;
          z-index: 1; 
          transform: translate(-50%, -50%);
          object-fit: cover;
          animation: quickLoopFade 0.5s ease-in-out;
        }

        @keyframes quickLoopFade {
          0% { opacity: 0; }
          100% { opacity: 1; }
        }

        .content-overlay {
          position: relative;
          z-index: 10;
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.4);
        }

        .ff-title { 
          color: #fff; 
          font-size: 32px; 
          letter-spacing: 8px; 
          margin-bottom: 40px; 
          text-shadow: 0 0 15px rgba(255, 255, 255, 0.5); 
          text-align: center;
          font-family: 'serif'; 
        }

        .ff-subtitle { color: #ffcc00; letter-spacing: 4px; margin-bottom: 30px; text-align: center; }
        .ff-button-group { display: flex; flex-direction: column; gap: 20px; align-items: center; }
        
        /* Botes Iniciais */
        .ff-btn {
          background: rgba(0, 0, 30, 0.6); 
          border: 1px solid rgba(255, 255, 255, 0.6);
          color: #fff;
          padding: 15px 50px;
          letter-spacing: 3px;
          cursor: pointer;
          transition: 0.4s;
          width: 280px;
          backdrop-filter: blur(5px);
          font-weight: bold;
        }

        /* Boto de Entrar (Ajustado para igualar a largura dos inputs) */
        .ff-submit {
          background: rgba(0, 0, 30, 0.6); 
          border: 1px solid rgba(255, 255, 255, 0.6);
          color: #fff;
          padding: 15px 0; /* padding lateral removido para usar width */
          letter-spacing: 3px;
          cursor: pointer;
          transition: 0.4s;
          width: 326px; /* 300px input + 24px padding + 2px border */
          backdrop-filter: blur(5px);
          font-weight: bold;
          margin: 0 auto;
          display: block;
        }

        .ff-btn:hover, .ff-submit:hover { 
          background: #fff; 
          color: #000; 
          box-shadow: 0 0 20px #fff; 
        }

        .ff-input-group input {
          display: block; 
          width: 300px; 
          padding: 12px; 
          margin: 0 auto 20px auto;
          background: rgba(0, 0, 0, 0.7); 
          border: 1px solid #444;
          color: #fff; 
          text-align: center; 
          letter-spacing: 2px; 
          outline: none;
        }

        .ff-input-group input:focus { border-color: #ffcc00; }
        .ff-back { background: none; border: none; color: #ffcc00; cursor: pointer; margin-bottom: 15px; display: block; font-weight: bold; }
        .ff-error { color: #ff4444; font-size: 12px; margin-bottom: 15px; text-shadow: 0 0 5px #000; text-align: center; }

        .admin-portal-btn {
          position: absolute;
          bottom: 30px;
          right: 30px;
          z-index: 100;
          background: none;
          border: none;
          cursor: pointer;
          width: 70px;
          transition: 0.5s;
          filter: drop-shadow(0 0 8px rgba(0, 242, 255, 0.6));
        }

        .admin-portal-btn img { width: 100%; height: auto; }
        .admin-portal-btn:hover { transform: scale(1.2) rotate(-5deg); filter: drop-shadow(0 0 15px #00f2ff); }

        .fade-in { animation: fadeInFF 2s ease-out forwards; }

        @keyframes fadeInFF {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `}})]})}function RM(){const[i,e]=O.useState(""),[n,r]=O.useState(""),[o,c]=O.useState(""),d=Po(),m=async g=>{if(g.preventDefault(),i!=="fffvtt10@gmail.com"){c("VOC NO TEM PERMISSO DE NARRADOR.");return}try{await V_(at,i,n),d("/admin")}catch{c("SENHA INCORRETA PARA O MESTRE.")}};return h.jsxs("div",{className:"login-container",children:[h.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"background-video",children:h.jsx("source",{src:IA,type:"video/mp4"})}),h.jsx("div",{className:"content-overlay",children:h.jsxs("form",{className:"login-panel fade-in",onSubmit:m,children:[h.jsx("button",{type:"button",className:"ff-back",onClick:()=>d("/"),children:" RETORNAR"}),h.jsx("h3",{className:"ff-subtitle",children:"PORTAL DO ADMINISTRADOR"}),h.jsxs("div",{className:"ff-input-group",children:[h.jsx("input",{type:"email",placeholder:"E-MAIL",value:i,onChange:g=>e(g.target.value),required:!0}),h.jsx("input",{type:"password",placeholder:"CHAVE DE ACESSO",value:n,onChange:g=>r(g.target.value),required:!0})]}),o&&h.jsx("p",{className:"ff-error",children:o}),h.jsx("button",{type:"submit",className:"ff-submit",children:"DESBLOQUEAR"})]})}),h.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .login-container { height: 100vh; width: 100vw; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; background: #000; }
        .background-video { position: absolute; top: 50%; left: 50%; min-width: 100%; min-height: 100%; transform: translate(-50%, -50%); object-fit: cover; z-index: 1; }
        .content-overlay { position: relative; z-index: 10; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.5); }
        .login-panel { 
          background: rgba(0, 0, 30, 0.7); 
          padding: 40px; 
          border: 1px solid #00f2ff; 
          backdrop-filter: blur(10px); 
          text-align: center;
          box-shadow: 0 0 20px rgba(0, 242, 255, 0.2);
        }
        .ff-subtitle { color: #ffcc00; letter-spacing: 4px; margin-bottom: 20px; }
        input { display: block; width: 280px; padding: 12px; margin: 10px auto; background: rgba(0,0,0,0.8); border: 1px solid #444; color: #fff; text-align: center; outline: none; }
        input:focus { border-color: #00f2ff; }
        .ff-submit { background: transparent; border: 1px solid #fff; color: #fff; padding: 12px 40px; cursor: pointer; transition: 0.3s; width: 100%; letter-spacing: 2px; }
        .ff-submit:hover { background: #fff; color: #000; box-shadow: 0 0 15px #fff; }
        .ff-back { background: none; border: none; color: #ffcc00; cursor: pointer; margin-bottom: 10px; }
        .fade-in { animation: fadeInFF 1.5s ease-out; }
        @keyframes fadeInFF { from { opacity: 0; } to { opacity: 1; } }
      `}})]})}function CM(){const[i,e]=O.useState([]),[n,r]=O.useState([]),[o,c]=O.useState(""),[d,m]=O.useState(""),[g,y]=O.useState("jogador"),[_,E]=O.useState("");O.useEffect(()=>{Do&&Do.pause()},[]),O.useEffect(()=>{T()},[]);const T=async()=>{try{const se=(await fm(Mt(Ce,"users"))).docs.map(ye=>({id:ye.id,...ye.data()})).filter(ye=>ye.email!=="fffvtt10@gmail.com"),Ae=(await fm(Mt(Ce,"characters"))).docs.map(ye=>({id:ye.id,...ye.data()}));e(se),r(Ae)}catch(B){console.error("Erro ao carregar dados do ter: ",B)}},L=async B=>{B.preventDefault();const se="fffvtt10@gmail.com",me="SUA_SENHA_AQUI";try{const ye=(await zR(at,o,d)).user;await vg(it(Ce,"users",ye.uid),{email:o,role:g,active:!0,createdAt:new Date}),alert("Usurio invocado! Reconectando Admin..."),await RA(se,me),c(""),m(""),T()}catch(Ae){alert("Erro no processo (Verifique a senha no cdigo!): "+Ae.message)}},H=async(B,se)=>{if(window.confirm(`Deseja banir permanentemente ${se} do ter?`))try{await hs(it(Ce,"users",B)),await hs(it(Ce,"characters",B)),alert("Conta e personagem banidos com sucesso."),T()}catch(me){alert("Erro ao banir usurio: "+me.message)}},z=async B=>{if(window.confirm("Tem certeza que deseja apagar APENAS o personagem deste usurio? Ele ter que criar outro."))try{await hs(it(Ce,"characters",B)),alert("Personagem deletado. O usurio continua ativo."),T()}catch(se){alert("Erro ao deletar personagem: "+se.message)}},Q=B=>{const se=n.find(me=>me.uid===B);return se||null},ie=async()=>{if(_.length<6)return alert("A senha deve ter no mnimo 6 caracteres.");try{await UR(at.currentUser,_),alert("Sua chave de mestre foi alterada!"),E("")}catch{alert("Erro ao trocar senha. Tente fazer login novamente.")}};return h.jsxs("div",{className:"admin-dashboard",children:[h.jsx("div",{className:"ether-vortex"}),h.jsxs("div",{className:"admin-content",children:[h.jsx("h1",{className:"main-title",children:"GESTO DO TER SUPREMO"}),h.jsxs("div",{className:"cards-grid",children:[h.jsxs("div",{className:"ff-card fade-in",children:[h.jsx("h3",{children:"INVOCAR NOVA CONTA"}),h.jsxs("form",{onSubmit:L,children:[h.jsx("input",{type:"email",placeholder:"E-mail do Alvo",value:o,onChange:B=>c(B.target.value),required:!0}),h.jsx("input",{type:"password",placeholder:"Definir Senha Inicial",value:d,onChange:B=>m(B.target.value),required:!0}),h.jsxs("select",{value:g,onChange:B=>y(B.target.value),children:[h.jsx("option",{value:"jogador",children:"JOGADOR"}),h.jsx("option",{value:"mestre",children:"MESTRE"})]}),h.jsx("button",{type:"submit",children:"CRIAR ACESSO"})]})]}),h.jsxs("div",{className:"ff-card fade-in",children:[h.jsx("h3",{children:"VIAJANTES E MESTRES"}),h.jsx("div",{className:"list-box",children:i.map(B=>{const se=Q(B.id);return h.jsxs("div",{className:"item",children:[h.jsxs("div",{style:{flex:1},children:[h.jsx("span",{className:`badge ${B.role}`,children:B.role.toUpperCase()}),h.jsx("p",{className:"email-text",children:B.email}),se&&h.jsxs("div",{style:{display:"flex",alignItems:"center",marginTop:"4px"},children:[h.jsxs("span",{style:{fontSize:"10px",color:"#ffcc00",marginRight:"10px"},children:[" ",se.name," (",se.class,")"]}),h.jsx("button",{className:"btn-mini-del",onClick:()=>z(B.id),title:"Apagar Personagem",children:" Excluir Char"})]})]}),h.jsxs("div",{className:"btn-group",children:[h.jsx("button",{onClick:()=>{LR(at,B.email),alert("E-mail de reset enviado.")},children:"RESET"}),h.jsx("button",{className:"del",onClick:()=>H(B.id,B.email),children:"BANIR"})]})]},B.id)})})]}),h.jsxs("div",{className:"ff-card fade-in",children:[h.jsx("h3",{children:"MINHA CHAVE DE ADMIN"}),h.jsx("input",{type:"password",placeholder:"Nova Senha",value:_,onChange:B=>E(B.target.value)}),h.jsx("button",{onClick:ie,children:"TROCAR MINHA SENHA"})]})]})]}),h.jsx("style",{children:`
        .admin-dashboard { background: radial-gradient(circle at center, #001a33 0%, #000000 100%); min-height: 100vh; color: #fff; font-family: 'Segoe UI', sans-serif; position: relative; overflow: hidden; }
        .ether-vortex { content: ""; position: absolute; top: -100%; left: -100%; width: 300%; height: 300%; background: conic-gradient(from 0deg, transparent, rgba(0, 242, 255, 0.08), transparent); animation: rotateEther 30s linear infinite; z-index: 0; pointer-events: none; }
        @keyframes rotateEther { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .admin-content { position: relative; z-index: 1; padding: 40px; }
        .main-title { color: #ffcc00; text-align: center; letter-spacing: 5px; margin-bottom: 50px; text-shadow: 0 0 10px #ffcc00; }
        .cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); gap: 30px; }
        .ff-card { background: rgba(0, 10, 30, 0.85); border: 1px solid rgba(0, 242, 255, 0.5); padding: 25px; border-radius: 8px; box-shadow: 0 0 20px rgba(0,242,255,0.1); backdrop-filter: blur(10px); }
        h3 { color: #00f2ff; font-size: 14px; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 20px; }
        .item { display: flex; justify-content: space-between; align-items: flex-start; padding: 10px 0; border-bottom: 1px solid #111; }
        .email-text { font-size: 11px; color: #ccc; margin: 2px 0; overflow: hidden; text-overflow: ellipsis; }
        .badge { font-size: 9px; padding: 2px 6px; border-radius: 3px; font-weight: bold; color: #000; }
        .badge.mestre { background: #ffcc00; }
        .badge.jogador { background: #00f2ff; }
        .btn-group { display: flex; gap: 8px; align-items: center; }
        input, select { background: rgba(0,0,0,0.8); border: 1px solid #444; color: #fff; padding: 12px; width: 100%; margin-bottom: 15px; outline: none; transition: 0.3s; }
        input:focus { border-color: #ffcc00; }
        button { background: transparent; border: 1px solid #00f2ff; color: #fff; padding: 8px 15px; cursor: pointer; transition: 0.3s; font-size: 11px; }
        button:hover { background: #fff; color: #000; box-shadow: 0 0 10px #fff; }
        button.del { border-color: #ff4444; color: #ff4444; }
        button.del:hover { background: #ff4444; color: white; border-color: #ff4444; }
        .btn-mini-del { padding: 2px 6px; font-size: 9px; border-color: #ff4444; color: #ff4444; margin-left: 0; }
        .btn-mini-del:hover { background: #ff4444; color: #fff; }
        .list-box { max-height: 250px; overflow-y: auto; }
        .list-box::-webkit-scrollbar { width: 4px; }
        .list-box::-webkit-scrollbar-thumb { background: #00f2ff; }
        .fade-in { animation: fadeIn 1.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
      `})]})}const OA="/FF-12Liberation/assets/fundo-mestre-OTxRyTTC.jpg",hm="/FF-12Liberation/assets/sanchez-1nilABmc.jpeg",MA="/FF-12Liberation/assets/papiro-CRka9pgw.png",IM="/FF-12Liberation/assets/bazar-DZ7p321B.png";function bg({isMestre:i,playerData:e}){const[n,r]=O.useState(!1),[o,c]=O.useState([]),[d,m]=O.useState([]),[g,y]=O.useState(""),[_,E]=O.useState(null),[T,L]=O.useState(""),[H,z]=O.useState({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""});O.useEffect(()=>{if(!n)return;const w=wn(Mt(Ce,"game_items"),xa("status","==","bazar"),Eo("updatedAt","desc")),P=Nn(w,C=>{c(C.docs.map(fe=>({id:fe.id,...fe.data()})))});return()=>P()},[n]),O.useEffect(()=>{if(!n||!i)return;const w=wn(Mt(Ce,"game_items"),xa("status","==","vault"),Eo("nome","asc")),P=Nn(w,C=>{const fe=C.docs.map(ze=>({id:ze.id,...ze.data()})).filter(ze=>!ze.ownerId);m(fe)});return()=>P()},[n,i]);const Q=w=>{const P=w.target.value;if(L(P),!P)return;const C=d.find(fe=>fe.id===P);C&&z({...H,nome:C.nome,descricao:C.descricao,imagem:C.imagem,valorGil:"",valorReal:""})},ie=async w=>{if(w.preventDefault(),!H.nome||!H.valorGil)return alert("Preencha nome e valor em Gil!");try{const P={...H,updatedAt:Ln()};_?(await Tn(it(Ce,"game_items",_),P),E(null)):T?(await Tn(it(Ce,"game_items",T),{...P,status:"bazar"}),L("")):await uc(Mt(Ce,"game_items"),{...P,status:"bazar",ownerId:null,createdAt:Ln()}),z({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""})}catch{alert("Erro ao salvar item no Bazar.")}},B=async w=>{window.confirm("Remover do mercado? O item voltar para a Forja.")&&await Tn(it(Ce,"game_items",w),{status:"vault",updatedAt:Ln()})},se=async w=>{if(!at.currentUser)return alert("Voc precisa estar logado.");const P=e?.character_sheet?.inventory?.gil||0,C=Number(w.valorGil);if(P<C)return alert(`Saldo insuficiente! Voc tem ${P} Gil, mas o item custa ${C} Gil.`);if(window.confirm(`Comprar "${w.nome}" por ${w.valorGil} Gil?`))try{const ze=P-C,X=it(Ce,"characters",at.currentUser.uid),le=JSON.parse(JSON.stringify(e.character_sheet));le.inventory.gil=ze,await vg(X,{character_sheet:le},{merge:!0}),await Tn(it(Ce,"game_items",w.id),{status:"requested",ownerId:at.currentUser.uid,buyerName:e.name,updatedAt:Ln()}),alert(`Solicitao enviada! O Mestre aprovar a entrega em breve. Saldo restante: ${ze} Gil.`)}catch(ze){console.error("Erro na compra:",ze),alert("Erro na transao. Verifique o console.")}},[me,Ae]=O.useState([]);O.useEffect(()=>{if(!i||!n)return;const w=wn(Mt(Ce,"game_items"),xa("status","==","requested")),P=Nn(w,C=>{Ae(C.docs.map(fe=>({id:fe.id,...fe.data()})))});return()=>P()},[i,n]);const ye=async w=>{try{await Tn(it(Ce,"game_items",w.id),{status:"vault",ownerId:w.ownerId,buyerName:w.buyerName,updatedAt:Ln()}),alert(`Venda aprovada! O item "${w.nome}" foi enviado para o Cofre Pessoal de ${w.buyerName}.`)}catch{alert("Erro ao aprovar.")}},I=w=>{E(w.id),L(""),z(w)},R=()=>{E(null),L(""),z({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""})},N=o.filter(w=>w.nome.toLowerCase().includes(g.toLowerCase())),k=w=>w&&w.startsWith("http")?`url(${w})`:"url('https://via.placeholder.com/150?text=Item')";return h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"bazar-trigger-btn",onClick:()=>r(!0),title:"Abrir Bazar",children:h.jsx("img",{src:IM,alt:"Bazar",onError:w=>{w.target.style.display="none",w.target.parentNode.innerText="BAZAR"}})}),n&&h.jsx("div",{className:"bazar-overlay-flex",onClick:()=>r(!1),children:h.jsxs("div",{className:"bazar-modal-centered",onClick:w=>w.stopPropagation(),children:[h.jsxs("div",{className:"bazar-header",children:[h.jsx("h2",{children:"MERCADO NEGRO"}),h.jsx("button",{className:"close-btn",onClick:()=>r(!1),children:""})]}),i&&h.jsxs("div",{className:"mestre-panel",children:[me.length>0&&h.jsxs("div",{className:"requests-box",children:[h.jsxs("h4",{children:["PEDIDOS DE COMPRA (",me.length,")"]}),me.map(w=>h.jsxs("div",{className:"request-row",children:[h.jsxs("span",{children:[h.jsx("strong",{children:w.buyerName})," quer comprar ",h.jsx("strong",{children:w.nome})," (",w.valorGil," G)"]}),h.jsx("button",{className:"btn-approve",onClick:()=>ye(w),children:"APROVAR ENTREGA"})]},w.id))]}),h.jsxs("form",{onSubmit:ie,className:"bazar-form",children:[!_&&h.jsx("div",{className:"row",style:{marginBottom:"10px"},children:h.jsxs("select",{className:"bazar-input",onChange:Q,value:T,children:[h.jsx("option",{value:"",children:" Selecionar Item do Cofre (Forja)..."}),d.map(w=>h.jsx("option",{value:w.id,children:w.nome},w.id))]})}),h.jsxs("div",{className:"row",children:[h.jsx("input",{placeholder:"Nome do Item",value:H.nome,onChange:w=>z({...H,nome:w.target.value}),className:"bazar-input",readOnly:!!T&&!_}),h.jsx("input",{placeholder:"Link Imagem",value:H.imagem,onChange:w=>z({...H,imagem:w.target.value}),className:"bazar-input"})]}),h.jsxs("div",{className:"row",children:[h.jsx("input",{placeholder:"Valor Gil",type:"number",value:H.valorGil,onChange:w=>z({...H,valorGil:w.target.value}),className:"bazar-input",required:!0}),h.jsx("input",{placeholder:"Valor Real (R$)",type:"number",value:H.valorReal,onChange:w=>z({...H,valorReal:w.target.value}),className:"bazar-input"})]}),h.jsx("textarea",{placeholder:"Descrio do item...",value:H.descricao,onChange:w=>z({...H,descricao:w.target.value}),className:"bazar-input area"}),h.jsxs("div",{className:"form-actions",children:[h.jsx("button",{type:"submit",className:"btn-save",children:_?"SALVAR ALTERAES":T?"COLOCAR  VENDA":"CRIAR E VENDER"}),(_||T)&&h.jsx("button",{type:"button",onClick:R,className:"btn-cancel",children:"CANCELAR"})]})]})]}),h.jsx("div",{className:"search-bar-container",children:h.jsx("input",{type:"text",placeholder:" Procurar mercadoria...",value:g,onChange:w=>y(w.target.value),className:"search-input"})}),h.jsxs("div",{className:"bazar-grid",children:[N.map(w=>h.jsxs("div",{className:"bazar-item-card",children:[h.jsx("div",{className:"item-img",style:{backgroundImage:k(w.imagem)}}),h.jsxs("div",{className:"item-info",children:[h.jsx("h4",{children:w.nome}),h.jsx("p",{className:"desc",children:w.descricao}),h.jsxs("div",{className:"prices",children:[h.jsxs("span",{className:"price-tag gil",children:[" ",w.valorGil," G"]}),w.valorReal&&h.jsxs("span",{className:"price-tag real",children:[" R$ ",w.valorReal]})]})]}),h.jsx("div",{className:"item-actions",children:i?h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"btn-icon edit",onClick:()=>I(w),title:"Editar Preo",children:""}),h.jsx("button",{className:"btn-icon delete",onClick:()=>B(w.id),title:"Devolver para a Forja",children:""})]}):h.jsx("button",{className:"btn-buy",onClick:()=>se(w),children:"COMPRAR"})})]},w.id)),N.length===0&&h.jsx("p",{className:"empty-msg",children:"Nenhum item  venda no momento."})]})]})}),h.jsx("style",{children:`
        .bazar-trigger-btn { position: fixed; bottom: 30px; right: 30px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #ffcc00; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; }
        .bazar-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 25px #ffcc00; }
        .bazar-trigger-btn img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }

        /* NOVO CSS PARA CENTRALIZAR O MODAL SEM CORTAR */
        .bazar-overlay-flex { 
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; 
            background: rgba(0,0,0,0.85); z-index: 100000; 
            display: flex; align-items: center; justify-content: center; 
            backdrop-filter: blur(5px); 
        }
        .bazar-modal-centered { 
            width: 800px; max-width: 95vw; 
            height: 750px; max-height: 90vh; /* Garante que cabe na tela */
            background: #0d0d15; border: 1px solid #ffcc00; 
            display: flex; flex-direction: column; 
            box-shadow: 0 0 50px rgba(0,0,0,0.8); border-radius: 8px; 
            overflow: hidden; 
        }

        .bazar-header { background: linear-gradient(90deg, #1a1a1a, #000); padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #ffcc00; }
        .bazar-header h2 { margin: 0; color: #ffcc00; font-family: serif; letter-spacing: 2px; text-shadow: 0 0 10px #ffcc00; font-size: 24px; }
        .close-btn { background: transparent; border: none; color: #fff; font-size: 30px; cursor: pointer; }

        .mestre-panel { background: rgba(255, 204, 0, 0.05); padding: 15px; border-bottom: 1px solid #333; }
        
        .requests-box { background: rgba(0, 242, 255, 0.1); border: 1px solid #00f2ff; padding: 10px; margin-bottom: 15px; border-radius: 4px; }
        .requests-box h4 { color: #00f2ff; margin: 0 0 10px 0; font-size: 12px; }
        .request-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; font-size: 12px; color: #fff; }
        .btn-approve { background: #00f2ff; color: #000; border: none; padding: 5px 10px; font-weight: bold; cursor: pointer; border-radius: 3px; }

        .bazar-form { display: flex; flex-direction: column; gap: 10px; }
        .bazar-form .row { display: flex; gap: 10px; }
        .bazar-input { background: #000; border: 1px solid #444; color: #fff; padding: 10px; flex: 1; outline: none; font-family: serif; }
        .bazar-input.area { height: 60px; resize: none; }
        .form-actions { display: flex; gap: 10px; }
        .btn-save { flex: 1; background: #ffcc00; border: none; padding: 10px; font-weight: bold; cursor: pointer; color: #000; }
        .btn-cancel { background: #333; color: #fff; border: 1px solid #555; padding: 10px; cursor: pointer; }

        .search-bar-container { padding: 15px; background: #000; border-bottom: 1px solid #333; }
        .search-input { width: 100%; background: #111; border: 1px solid #444; color: #fff; padding: 12px; border-radius: 20px; text-align: center; outline: none; font-size: 16px; }

        .bazar-grid { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; scrollbar-width: none; -ms-overflow-style: none; }
        .bazar-grid::-webkit-scrollbar { display: none; }

        .bazar-item-card { background: linear-gradient(90deg, rgba(20,20,30,0.9), rgba(0,0,0,0.8)); border: 1px solid #444; display: flex; align-items: center; padding: 10px; border-radius: 4px; transition: 0.2s; }
        .bazar-item-card:hover { border-color: #00f2ff; box-shadow: 0 0 15px rgba(0, 242, 255, 0.1); }
        
        .item-img { width: 80px; height: 80px; background-size: cover; background-position: center; border: 1px solid #666; margin-right: 15px; border-radius: 4px; background-color: #000; }
        .item-info { flex: 1; }
        .item-info h4 { margin: 0 0 5px 0; color: #fff; font-size: 18px; letter-spacing: 1px; }
        .item-info .desc { margin: 0 0 10px 0; color: #aaa; font-size: 12px; font-style: italic; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        
        .prices { display: flex; gap: 10px; }
        .price-tag { padding: 4px 8px; border-radius: 3px; font-weight: bold; font-size: 12px; }
        .price-tag.gil { background: rgba(255,255,0,0.1); color: #ffcc00; border: 1px solid #ffcc00; }
        .price-tag.real { background: rgba(0, 242, 255, 0.1); color: #00f2ff; border: 1px solid #00f2ff; }

        .item-actions { display: flex; gap: 8px; align-items: center; margin-left: 15px; }
        .btn-buy { background: #00f2ff; color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; clip-path: polygon(10% 0, 100% 0, 100% 70%, 90% 100%, 0 100%, 0 30%); transition: 0.2s; }
        .btn-buy:hover { background: #fff; box-shadow: 0 0 15px #00f2ff; }
        
        .btn-icon { background: transparent; border: 1px solid #444; color: #fff; padding: 8px; cursor: pointer; border-radius: 4px; font-size: 16px; }
        .btn-icon:hover { background: #fff; color: #000; }
        .btn-icon.delete:hover { background: #f44; border-color: #f44; color: #fff; }
        .empty-msg { text-align: center; color: #666; margin-top: 50px; font-style: italic; }
      `})]})}const OM="/FF-12Liberation/assets/forja-Dr7AylP_.png";function DA(){const[i,e]=O.useState(!1),[n,r]=O.useState([]),[o,c]=O.useState(""),[d,m]=O.useState(null),[g,y]=O.useState({nome:"",descricao:"",imagem:""});O.useEffect(()=>{if(!i)return;const z=wn(Mt(Ce,"game_items"),xa("status","==","vault"),Eo("createdAt","desc")),Q=Nn(z,ie=>{r(ie.docs.map(B=>({id:B.id,...B.data()})))});return()=>Q()},[i]);const _=async z=>{if(z.preventDefault(),!g.nome)return alert("O item precisa de um nome!");try{const Q={...g,updatedAt:Ln()};d?(await Tn(it(Ce,"game_items",d),Q),m(null)):await uc(Mt(Ce,"game_items"),{...Q,status:"vault",ownerId:null,valorGil:0,createdAt:Ln()}),y({nome:"",descricao:"",imagem:""})}catch(Q){alert("Erro ao forjar item."),console.error(Q)}},E=async z=>{window.confirm("ATENO: Isso destruir o item permanentemente. Deseja continuar?")&&await hs(it(Ce,"game_items",z))},T=z=>{m(z.id),y(z)},L=()=>{m(null),y({nome:"",descricao:"",imagem:""})},H=n.filter(z=>z.nome.toLowerCase().includes(o.toLowerCase()));return h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"forja-trigger-btn",onClick:()=>e(!0),title:"Abrir Forja",children:h.jsx("img",{src:OM,alt:"Forja",onError:z=>{z.target.style.display="none",z.target.parentNode.innerText="FORJA"}})}),i&&h.jsx("div",{className:"forja-overlay",onClick:()=>e(!1),children:h.jsxs("div",{className:"forja-modal",onClick:z=>z.stopPropagation(),children:[h.jsxs("div",{className:"forja-header",children:[h.jsx("h2",{children:"A FORJA ANTIGA"}),h.jsx("button",{className:"close-btn",onClick:()=>e(!1),children:""})]}),h.jsxs("div",{className:"mestre-panel-forja",children:[h.jsx("h4",{style:{color:"#f44",margin:"0 0 10px 0"},children:"FORJAR NOVO ARTEFATO"}),h.jsxs("form",{onSubmit:_,className:"forja-form",children:[h.jsxs("div",{className:"row",children:[h.jsx("input",{placeholder:"Nome do Artefato",value:g.nome,onChange:z=>y({...g,nome:z.target.value}),className:"forja-input"}),h.jsx("input",{placeholder:"URL da Imagem (Imgur)",value:g.imagem,onChange:z=>y({...g,imagem:z.target.value}),className:"forja-input"})]}),h.jsx("textarea",{placeholder:"Descrio detalhada e lore do item...",value:g.descricao,onChange:z=>y({...g,descricao:z.target.value}),className:"forja-input area"}),h.jsxs("div",{className:"form-actions",children:[h.jsx("button",{type:"submit",className:"btn-forjar",children:d?"REFUNDIR (SALVAR)":"FORJAR ITEM"}),d&&h.jsx("button",{type:"button",onClick:L,className:"btn-cancel",children:"CANCELAR"})]})]})]}),h.jsx("div",{className:"search-bar-container-forja",children:h.jsx("input",{type:"text",placeholder:" Buscar nos arquivos da forja...",value:o,onChange:z=>c(z.target.value),className:"search-input-forja"})}),h.jsxs("div",{className:"forja-grid",children:[H.map(z=>h.jsxs("div",{className:"forja-item-card",children:[h.jsx("div",{className:"item-img",style:{backgroundImage:`url(${z.imagem||"https://via.placeholder.com/150?text=?"})`}}),h.jsxs("div",{className:"item-info",children:[h.jsx("h4",{children:z.nome}),z.ownerId&&h.jsxs("div",{className:"owner-tag",children:["COMPRADO POR: ",z.buyerName||"Jogador"]}),h.jsx("p",{className:"desc",children:z.descricao}),h.jsxs("small",{style:{color:"#666"},children:["Status: ",z.ownerId?"Cofre Pessoal":"Cofre Global"]})]}),h.jsxs("div",{className:"item-actions",children:[h.jsx("button",{className:"btn-icon edit",onClick:()=>T(z),title:"Editar",children:""}),h.jsx("button",{className:"btn-icon delete",onClick:()=>E(z.id),title:"Destruir",children:""})]})]},z.id)),H.length===0&&h.jsx("p",{className:"empty-msg",children:"A forja est fria. Nenhum item no cofre."})]})]})}),h.jsx("style",{children:`
        .forja-trigger-btn {
          position: fixed; bottom: 30px; right: 110px; width: 70px; height: 70px;
          border-radius: 50%; border: 2px solid #f44; background: #000; cursor: pointer; z-index: 9999;
          transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center;
          color: #f44; font-weight: bold; font-size: 10px;
        }
        .forja-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 20px #f44; }
        .forja-trigger-btn img { width: 80%; height: 80%; object-fit: contain; }

        .forja-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 100000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .forja-modal { width: 800px; max-height: 90vh; background: #150a0a; border: 1px solid #f44; display: flex; flex-direction: column; box-shadow: 0 0 50px rgba(255, 68, 68, 0.2); border-radius: 8px; overflow: hidden; }

        .forja-header { background: linear-gradient(90deg, #2a0e0e, #000); padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #f44; }
        .forja-header h2 { margin: 0; color: #f44; font-family: serif; letter-spacing: 2px; text-shadow: 0 0 10px #f44; font-size: 24px; }
        .close-btn { background: transparent; border: none; color: #fff; font-size: 30px; cursor: pointer; }

        .mestre-panel-forja { background: rgba(255, 68, 68, 0.05); padding: 20px; border-bottom: 1px solid #333; }
        .forja-form { display: flex; flex-direction: column; gap: 10px; }
        .forja-form .row { display: flex; gap: 10px; }
        .forja-input { background: #000; border: 1px solid #522; color: #fff; padding: 10px; flex: 1; outline: none; font-family: serif; }
        .forja-input:focus { border-color: #f44; }
        .forja-input.area { height: 80px; resize: none; }
        
        .btn-forjar { flex: 1; background: #f44; border: none; padding: 12px; font-weight: bold; cursor: pointer; color: #fff; text-transform: uppercase; letter-spacing: 1px; }
        .btn-forjar:hover { background: #d00; box-shadow: 0 0 10px #d00; }
        .btn-cancel { background: #333; color: #fff; border: 1px solid #555; padding: 10px; cursor: pointer; }

        .search-bar-container-forja { padding: 15px; background: #000; border-bottom: 1px solid #333; }
        .search-input-forja { width: 100%; background: #111; border: 1px solid #522; color: #fff; padding: 12px; border-radius: 20px; text-align: center; outline: none; font-size: 16px; }

        .forja-grid { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; scrollbar-width: none; -ms-overflow-style: none; }
        .forja-grid::-webkit-scrollbar { display: none; }

        .forja-item-card { background: linear-gradient(90deg, rgba(40,10,10,0.9), rgba(0,0,0,0.8)); border: 1px solid #522; display: flex; align-items: center; padding: 10px; border-radius: 4px; transition: 0.2s; }
        .forja-item-card:hover { border-color: #f44; }
        
        .item-img { width: 70px; height: 70px; background-size: cover; background-position: center; border: 1px solid #633; margin-right: 15px; border-radius: 4px; background-color: #000; }
        .item-info { flex: 1; }
        .item-info h4 { margin: 0 0 5px 0; color: #fff; font-size: 18px; }
        .item-info .desc { margin: 0; color: #aaa; font-size: 12px; font-style: italic; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        
        /* NOVA ETIQUETA DE DONO */
        .owner-tag { background: #00f2ff; color: #000; font-size: 10px; font-weight: bold; padding: 2px 6px; border-radius: 4px; display: inline-block; margin-bottom: 4px; }

        .item-actions { display: flex; gap: 8px; margin-left: 15px; }
        .btn-icon { background: transparent; border: 1px solid #444; color: #fff; padding: 8px; cursor: pointer; border-radius: 4px; }
        .btn-icon:hover { background: #fff; color: #000; }
        .btn-icon.delete:hover { background: #f44; border-color: #f44; color: #fff; }
        
        .empty-msg { text-align: center; color: #666; margin-top: 50px; font-style: italic; }
      `})]})}const MM=({isOpen:i,onClose:e,onSave:n,label:r})=>{const[o,c]=O.useState("");return i?h.jsx("div",{className:"img-modal-overlay",onClick:e,children:h.jsxs("div",{className:"img-modal-content",onClick:d=>d.stopPropagation(),children:[h.jsxs("h3",{children:["ALTERAR IMAGEM: ",r.toUpperCase()]}),h.jsx("input",{placeholder:"Cole o link da imagem (Imgur, Discord, etc)...",value:o,onChange:d=>c(d.target.value),autoFocus:!0}),h.jsxs("div",{className:"img-modal-actions",children:[h.jsx("button",{onClick:()=>{n(o),e()},className:"btn-confirm",children:"CONFIRMAR"}),h.jsx("button",{onClick:e,className:"btn-cancel",children:"CANCELAR"})]})]})}):null};function xg({characterData:i,isMaster:e,onClose:n}){const[r,o]=O.useState(i.character_sheet||{basic_info:{character_name:i.name,level:1,experience:{current:0,max:100},race:i.race,class:i.class,guild_rank:"Iniciado",guild_insignia:"",guild_rank_image:"",special_image:""},attributes:{FOR:{value:0},CONS:{value:0},INT:{value:0},SOR:{value:0},CAR:{value:0},VEL:{value:0}},status:{hp:{current:10,max:10},mp:{current:5,max:5},arm:{value:0},res:{value:0},mov:{value:3}},equipment:{slots:Array(7).fill({item_id:null,item_name:"",item_img:"",effect:"",description:""})},job_system:{primary_class:{name:i.class||"Classe Primria",skills:Array(4).fill({name:"",cost:"",effect:""})},secondary_class:{name:"Classe Secundria",skills:Array(4).fill({name:"",cost:"",effect:""})},reaction_ability:{name:"",effect:""},passive_ability:{name:"",effect:""},class_bonus:{value:""}},inventory:{gil:0,items:[]},imgUrl:""}),[c,d]=O.useState("geral"),[m,g]=O.useState(!1),[y,_]=O.useState(!1),[E,T]=O.useState(!1),[L,H]=O.useState(""),[z,Q]=O.useState(null),[ie,B]=O.useState(!1),[se,me]=O.useState([]),[Ae,ye]=O.useState(null),[I,R]=O.useState(null),[N,k]=O.useState(null),[w,P]=O.useState(null),C=()=>"_"+Math.random().toString(36).substr(2,9);O.useEffect(()=>{if(i&&i.character_sheet){const W=i.character_sheet;["primary_class","secondary_class"].forEach(be=>{W.job_system&&W.job_system[be]&&W.job_system[be].skills&&(W.job_system[be].skills=W.job_system[be].skills.map(D=>({...D,id:D.id||C(),xp:D.xp||{current:0,max:100},master:D.master||!1})))}),W.basic_info.special_image||(W.basic_info.special_image=""),o(W)}},[i]);const fe=(W,be)=>{if(!e)return;const D=JSON.parse(JSON.stringify(r)),ce=W.split(".");let Se=D;for(let et=0;et<ce.length-1;et++)Se[ce[et]]||(Se[ce[et]]={}),Se=Se[ce[et]];Se[ce[ce.length-1]]=be,o(D),_(!0)},ze=async()=>{try{const W=it(Ce,"characters",i.uid||i.id);await Tn(W,{character_sheet:r}),_(!1)}catch(W){console.error("Erro ao salvar:",W),alert("Erro ao salvar ficha.")}},X=(W,be)=>{e&&(H(W),Q(()=>be),T(!0))},le=(W,be,D,ce)=>{e&&(k({skill:be,index:ce}),P(D),W.dataTransfer.effectAllowed="move")},Z=W=>W.preventDefault(),ve=(W,be,D)=>{if(W.preventDefault(),!N||!e)return;const ce=JSON.parse(JSON.stringify(r)),Se=ce.job_system[w==="primary"?"primary_class":"secondary_class"].skills,et=ce.job_system[be==="primary"?"primary_class":"secondary_class"].skills,[$e]=Se.splice(N.index,1);w===be?Se.splice(D,0,$e):et.splice(D,0,$e),o(ce),_(!0),k(null),P(null)},_e=W=>{const be=JSON.parse(JSON.stringify(r));be.job_system[W].skills.push({id:C(),name:"",cost:"",effect:"",xp:{current:0,max:100},master:!1}),o(be),_(!0)},j=(W,be)=>{if(!window.confirm("Remover este slot?"))return;const D=JSON.parse(JSON.stringify(r));D.job_system[W].skills.splice(be,1),o(D),_(!0)},J=(W,be)=>{const D=JSON.parse(JSON.stringify(r)),ce=D.job_system[W].skills[be];ce.master=!0,ce.xp.current=ce.xp.max,o(D),_(!0)},oe=async W=>{if(!e)return;ye(W);const be=wn(Mt(Ce,"game_items"),xa("status","==","vault")),Se=(await fm(be)).docs.map(et=>({id:et.id,...et.data()})).filter(et=>!et.ownerId||et.ownerId===(i.uid||i.id));me(Se),B(!0)},de=async W=>{const be=JSON.parse(JSON.stringify(r));be.equipment.slots[Ae]={item_id:W.id,item_name:W.nome,item_img:W.imagem,description:W.descricao,effect:""},o(be),_(!0);const D=it(Ce,"game_items",W.id);await Tn(D,{status:"equipped",ownerId:i.uid||i.id,slotIndex:Ae,updatedAt:Ln()}),B(!1)},Ee=async W=>{if(!e)return;const be=r.equipment.slots[W];if(be.item_id&&window.confirm("Isso devolver o item para a Forja (Cofre). Confirmar?")){const ce=it(Ce,"game_items",be.item_id);await Tn(ce,{status:"vault",slotIndex:null,updatedAt:Ln()})}const D=JSON.parse(JSON.stringify(r));D.equipment.slots[W]={item_name:"",item_img:"",effect:""},o(D),_(!0)},Ne=async()=>{e&&(g(!0),setTimeout(async()=>{g(!1);const W=r.basic_info.level||1,be=Math.floor(r.basic_info.experience.max*1.5),D=JSON.parse(JSON.stringify(r));D.basic_info.level=W+1,D.basic_info.experience.current=0,D.basic_info.experience.max=be,o(D);const ce=it(Ce,"characters",i.uid||i.id);await Tn(ce,{character_sheet:D})},4e3))},Me=["FOR","INT","SOR","CAR","VEL","CONS"],Je=100,Ue=85,Jt=125,mn=(W,be,D)=>{const ce=Math.PI*2*be/D-Math.PI/2,Se=Jt+Ue*(W/Je)*Math.cos(ce),et=Jt+Ue*(W/Je)*Math.sin(ce);return{x:Se,y:et}},ra=Me.map((W,be)=>{const D=r.attributes?.[W]?.value||0,{x:ce,y:Se}=mn(D,be,Me.length);return`${ce},${Se}`}).join(" ");return h.jsxs("div",{className:"ficha-overlay-fixed",children:[h.jsx(MM,{isOpen:E,onClose:()=>T(!1),onSave:z,label:L}),e&&y&&h.jsx("button",{className:"save-fab glowing",onClick:ze,title:"Salvar Alteraes",children:""}),h.jsxs("div",{className:"ficha-container fade-in",children:[h.jsx("button",{className:"close-btn-ficha",onClick:n,children:""}),h.jsxs("div",{className:"ficha-header",children:[h.jsxs("div",{className:"guild-insignia-box",children:[h.jsx("span",{className:"header-label-top",children:"SIGNO"}),h.jsx("div",{className:`insignia-display ${e?"clickable":""}`,style:{backgroundImage:`url(${r.basic_info.guild_insignia||"https://via.placeholder.com/60?text=?"})`},onClick:()=>X("Signo",W=>fe("basic_info.guild_insignia",W)),title:e?"Clique para alterar imagem":""})]}),h.jsxs("div",{className:"header-info",children:[h.jsx("h1",{children:r.basic_info.character_name}),h.jsxs("span",{className:"sub-header",children:[r.basic_info.race," // ",i.class]}),h.jsxs("div",{className:"xp-container",children:[h.jsxs("div",{className:"lvl-box",children:[h.jsx("small",{children:"LVL"}),e?h.jsx("input",{className:"lvl-input",type:"number",value:r.basic_info.level,onChange:W=>fe("basic_info.level",Number(W.target.value))}):h.jsx("span",{children:r.basic_info.level})]}),h.jsxs("div",{className:"xp-bar-box",children:[h.jsxs("div",{className:"xp-text",children:["XP ",e?h.jsx("input",{className:"xp-mini-input",value:r.basic_info.experience.current,onChange:W=>fe("basic_info.experience.current",Number(W.target.value))}):r.basic_info.experience.current," / ",e?h.jsx("input",{className:"xp-mini-input",value:r.basic_info.experience.max,onChange:W=>fe("basic_info.experience.max",Number(W.target.value))}):r.basic_info.experience.max]}),h.jsx("div",{className:"xp-track",children:h.jsx("div",{className:"xp-fill",style:{width:`${Math.min(r.basic_info.experience.current/r.basic_info.experience.max*100,100)}%`}})})]}),e&&r.basic_info.experience.current>=r.basic_info.experience.max&&h.jsx("button",{className:"btn-levelup glowing",onClick:Ne,children:" UP"})]})]}),h.jsxs("div",{className:"header-right-group",children:[h.jsxs("div",{className:"guild-item-box",children:[h.jsx("span",{className:"header-label-top",children:"SMBOLO"}),h.jsx("div",{className:`special-display ${e?"clickable":""}`,style:{backgroundImage:`url(${r.basic_info.special_image||"https://via.placeholder.com/60?text=?"})`},onClick:()=>X("Especial",W=>fe("basic_info.special_image",W))})]}),h.jsxs("div",{className:"guild-item-box",children:[h.jsx("span",{className:"header-label-top",children:"RANK"}),h.jsx("div",{className:`rank-display ${e?"clickable":""}`,style:{backgroundImage:`url(${r.basic_info.guild_rank_image||"https://via.placeholder.com/60?text=?"})`},onClick:()=>X("Rank",W=>fe("basic_info.guild_rank_image",W))})]})]})]}),h.jsxs("div",{className:"ficha-tabs",children:[h.jsx("button",{className:`tab-btn ${c==="geral"?"active":""}`,onClick:()=>d("geral"),children:"VISO GERAL"}),h.jsx("button",{className:`tab-btn ${c==="habilidades"?"active":""}`,onClick:()=>d("habilidades"),children:"GRIMRIO DE HABILIDADES"})]}),h.jsx("div",{className:"ficha-body",children:c==="geral"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"col-attributes",children:[h.jsx("h3",{className:"section-title",children:"ATRIBUTOS"}),h.jsx("div",{className:"radar-wrapper",children:h.jsxs("svg",{width:"250",height:"250",viewBox:"0 0 250 250",children:[[20,40,60,80,100].map(W=>h.jsx("polygon",{points:Me.map((be,D)=>{const{x:ce,y:Se}=mn(W,D,6);return`${ce},${Se}`}).join(" "),fill:"none",stroke:"#333",strokeWidth:"1"},W)),h.jsx("polygon",{points:ra,fill:"rgba(0, 242, 255, 0.2)",stroke:"#00f2ff",strokeWidth:"2"}),Me.map((W,be)=>{const{x:D,y:ce}=mn(120,be,6),Se=r.attributes?.[W]?.value||0;return h.jsx("foreignObject",{x:D-20,y:ce-15,width:"40",height:"30",children:h.jsxs("div",{className:"stat-box-chart",children:[h.jsx("span",{className:"sb-label",children:W}),e?h.jsx("input",{className:"sb-input",value:Se,onChange:et=>fe(`attributes.${W}.value`,Number(et.target.value))}):h.jsx("span",{className:"sb-val",children:Se})]})},W)})]})}),h.jsxs("div",{className:"secondary-stats",children:[h.jsxs("div",{className:"stat-row",children:[h.jsx("label",{children:"HP"}),h.jsxs("div",{className:"stat-bars-inputs",children:[e?h.jsx("input",{value:r.status.hp.current,onChange:W=>fe("status.hp.current",Number(W.target.value))}):h.jsx("span",{children:r.status.hp.current}),"/",e?h.jsx("input",{value:r.status.hp.max,onChange:W=>fe("status.hp.max",Number(W.target.value))}):h.jsx("span",{children:r.status.hp.max})]})]}),h.jsxs("div",{className:"stat-row",children:[h.jsx("label",{children:"MP"}),h.jsxs("div",{className:"stat-bars-inputs mp",children:[e?h.jsx("input",{value:r.status.mp.current,onChange:W=>fe("status.mp.current",Number(W.target.value))}):h.jsx("span",{children:r.status.mp.current}),"/",e?h.jsx("input",{value:r.status.mp.max,onChange:W=>fe("status.mp.max",Number(W.target.value))}):h.jsx("span",{children:r.status.mp.max})]})]}),h.jsxs("div",{className:"stat-row-simple",children:[h.jsxs("div",{className:"s-box",children:[h.jsx("label",{children:"ARM"}),e?h.jsx("input",{value:r.status.arm.value,onChange:W=>fe("status.arm.value",Number(W.target.value))}):h.jsx("span",{children:r.status.arm.value})]}),h.jsxs("div",{className:"s-box",children:[h.jsx("label",{children:"RES"}),e?h.jsx("input",{value:r.status.res.value,onChange:W=>fe("status.res.value",Number(W.target.value))}):h.jsx("span",{children:r.status.res.value})]}),h.jsxs("div",{className:"s-box",children:[h.jsx("label",{children:"MOV"}),e?h.jsx("input",{value:r.status.mov?.value||3,onChange:W=>fe("status.mov.value",Number(W.target.value))}):h.jsx("span",{children:r.status.mov?.value||3})]})]})]})]}),h.jsxs("div",{className:"col-center-equip",children:[h.jsxs("div",{className:`char-image-frame ${e?"clickable":""}`,onClick:()=>X("Personagem",W=>fe("imgUrl",W)),title:e?"Clique para alterar foto":"",children:[e&&!r.imgUrl&&h.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"60px",color:"rgba(255, 204, 0, 0.3)",pointerEvents:"none"},children:"+"}),h.jsx("div",{className:"image-display",style:{backgroundImage:`url(${r.imgUrl||"https://via.placeholder.com/300x400?text="})`}})]}),h.jsx("div",{className:"equip-slots-overlay",children:[{id:0,label:"CABEA",style:{top:"-30px",left:"50%",transform:"translateX(-50%)"}},{id:1,label:"CORPO",style:{top:"80px",right:"-15px"}},{id:2,label:"MO DIR.",style:{bottom:"120px",right:"-15px"}},{id:3,label:"MO ESQ.",style:{bottom:"120px",left:"-15px"}},{id:4,label:"ACESS. 1",style:{top:"80px",left:"-15px"}},{id:5,label:"ACESS. 2",style:{bottom:"-20px",left:"60px"}},{id:6,label:"PS",style:{bottom:"-20px",right:"60px"}}].map((W,be)=>h.jsxs("div",{className:"equip-slot",style:W.style,children:[h.jsx("div",{className:"slot-label",children:W.label}),h.jsxs("div",{className:"slot-square",children:[!r.equipment?.slots?.[be]?.item_img&&e&&h.jsx("button",{className:"btn-plus-item",onClick:()=>oe(be),children:"+"}),r.equipment?.slots?.[be]?.item_img?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"item-bg",style:{backgroundImage:`url(${r.equipment.slots[be].item_img})`}}),h.jsx("button",{className:"btn-eye-item",onClick:()=>R(r.equipment.slots[be]),children:""}),e&&h.jsx("button",{className:"btn-return-forge",title:"Devolver para Forja",onClick:()=>Ee(be),children:""})]}):!e&&h.jsx("span",{className:"empty-text",children:"Vazio"})]})]},be))})]}),h.jsxs("div",{className:"col-inventory",children:[h.jsx("h3",{className:"section-title",children:"BOLSA & GIL"}),h.jsxs("div",{className:"gil-display",children:[h.jsx("span",{className:"coin-icon",children:""}),e?h.jsx("input",{type:"number",className:"gil-input-master",value:r.inventory.gil,onChange:W=>fe("inventory.gil",Number(W.target.value))}):h.jsx("span",{className:"gil-amount",children:r.inventory.gil}),h.jsx("span",{className:"currency",children:"GIL"})]}),h.jsxs("div",{className:"items-list",children:[h.jsx("h4",{children:"MOCHILA"}),h.jsxs("div",{className:"items-scroll",children:[(r.inventory.items||[]).map((W,be)=>h.jsx("div",{className:"inv-row",children:e?h.jsxs(h.Fragment,{children:[h.jsx("input",{className:"inv-name",value:W.name,onChange:D=>fe(`inventory.items.${be}.name`,D.target.value)}),h.jsx("input",{className:"inv-qtd",type:"number",value:W.quantity,onChange:D=>fe(`inventory.items.${be}.quantity`,Number(D.target.value))}),h.jsx("button",{className:"btn-x-red",onClick:()=>{const D=r.inventory.items.filter((ce,Se)=>Se!==be);fe("inventory.items",D)},children:""})]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"i-name",children:W.name||"Slot Vazio"}),h.jsxs("span",{className:"i-qtd",children:["x",W.quantity||0]})]})},be)),e&&h.jsx("button",{className:"add-item-btn",onClick:()=>fe("inventory.items",[...r.inventory.items||[],{name:"Novo Item",quantity:1}]),children:"+ Slot"})]})]})]})]}):h.jsxs("div",{className:"skills-tab-content",children:[["primary_class","secondary_class"].map((W,be)=>h.jsxs("div",{className:"skills-col",children:[h.jsxs("h3",{className:`class-header ${W==="secondary_class"?"secondary":""}`,children:[e?h.jsx("input",{className:"class-name-input",value:r.job_system?.[W]?.name,onChange:D=>fe(`job_system.${W}.name`,D.target.value)}):r.job_system?.[W]?.name,e&&h.jsx("button",{className:"btn-add-skill-slot",onClick:()=>_e(W),children:"+"})]}),h.jsx("div",{className:"skills-list",children:(r.job_system?.[W]?.skills||[]).map((D,ce)=>h.jsxs("div",{className:`skill-card ${W==="secondary_class"?"secondary":""} ${D.master?"mastered":""}`,draggable:e,onDragStart:Se=>le(Se,D,W==="primary_class"?"primary":"secondary",ce),onDragOver:Z,onDrop:Se=>ve(Se,W==="primary_class"?"primary":"secondary",ce),children:[h.jsxs("div",{className:"skill-top",children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",flex:1},children:[D.master&&h.jsx("span",{className:"star-icon pulsing",children:""}),e?h.jsx("input",{placeholder:"Nome",value:D.name,onChange:Se=>fe(`job_system.${W}.skills.${ce}.name`,Se.target.value),className:"skill-name-in"}):h.jsx("strong",{className:"skill-name",children:D.name||"Slot Vazio"})]}),e?h.jsx("input",{placeholder:"Custo",value:D.cost,onChange:Se=>fe(`job_system.${W}.skills.${ce}.cost`,Se.target.value),className:"skill-cost-in"}):h.jsx("span",{className:"skill-cost",children:D.cost}),e&&h.jsx("button",{className:"btn-x-red-small",onClick:()=>j(W,ce),children:""})]}),e?h.jsx("textarea",{placeholder:"Efeito...",value:D.effect,onChange:Se=>fe(`job_system.${W}.skills.${ce}.effect`,Se.target.value),className:"skill-desc-in"}):h.jsx("p",{className:"skill-desc",children:D.effect}),h.jsxs("div",{className:"skill-xp-box",children:[h.jsxs("div",{className:"xp-labels",children:[h.jsx("span",{children:"XP"}),e?h.jsxs("div",{style:{display:"flex"},children:[h.jsx("input",{className:"xp-tiny",value:D.xp?.current||0,onChange:Se=>fe(`job_system.${W}.skills.${ce}.xp.current`,Number(Se.target.value))})," /",h.jsx("input",{className:"xp-tiny",value:D.xp?.max||100,onChange:Se=>fe(`job_system.${W}.skills.${ce}.xp.max`,Number(Se.target.value))})]}):h.jsxs("span",{children:[D.xp?.current||0," / ",D.xp?.max||100]})]}),h.jsx("div",{className:`skill-track ${D.master?"grayed":""}`,children:h.jsx("div",{className:"skill-fill",style:{width:`${Math.min((D.xp?.current||0)/(D.xp?.max||100)*100,100)}%`}})}),e&&!D.master&&D.xp?.current>=D.xp?.max&&h.jsx("button",{className:"btn-masterize",onClick:()=>J(W,ce),children:"MASTERIZAR"})]})]},D.id))})]},W)),h.jsx("div",{className:"skills-col extra-col",children:h.jsxs("div",{className:"extra-abilities-box",children:[h.jsxs("div",{className:"ability-row",children:[h.jsx("label",{children:"REAO"}),e?h.jsx("input",{value:r.job_system?.reaction_ability?.name,onChange:W=>fe("job_system.reaction_ability.name",W.target.value),className:"ab-input"}):h.jsx("span",{children:r.job_system?.reaction_ability?.name||"-"})]}),h.jsxs("div",{className:"ability-row",children:[h.jsx("label",{children:"PASSIVA"}),e?h.jsx("input",{value:r.job_system?.passive_ability?.name,onChange:W=>fe("job_system.passive_ability.name",W.target.value),className:"ab-input"}):h.jsx("span",{children:r.job_system?.passive_ability?.name||"-"})]}),h.jsxs("div",{className:"bonus-row",children:[h.jsx("label",{children:"BNUS DE CLASSE"}),e?h.jsx("textarea",{value:r.job_system?.class_bonus?.value,onChange:W=>fe("job_system.class_bonus.value",W.target.value),className:"bonus-area"}):h.jsx("p",{children:r.job_system?.class_bonus?.value||"Nenhum"})]})]})})]})}),ie&&h.jsx("div",{className:"item-selector-overlay",onClick:()=>B(!1),children:h.jsxs("div",{className:"item-selector-box",onClick:W=>W.stopPropagation(),children:[h.jsx("h3",{children:"EQUIPAR DO COFRE"}),h.jsxs("div",{className:"forge-list-scroll",children:[se.length===0&&h.jsx("p",{className:"empty-text",children:"Nenhum item disponvel."}),se.map(W=>h.jsxs("div",{className:"forge-item-row",onClick:()=>de(W),children:[h.jsx("img",{src:W.imagem,alt:W.nome}),h.jsxs("div",{children:[h.jsx("strong",{children:W.nome}),W.ownerId&&h.jsx("small",{style:{color:"#0f0"},children:" (Seu Item)"}),h.jsxs("p",{children:[W.descricao.substring(0,40),"..."]})]})]},W.id))]}),h.jsx("button",{className:"btn-cancel-modal",onClick:()=>B(!1),children:"CANCELAR"})]})}),I&&h.jsx("div",{className:"item-selector-overlay",onClick:()=>R(null),children:h.jsxs("div",{className:"item-details-box",onClick:W=>W.stopPropagation(),children:[h.jsx("img",{src:I.item_img,alt:I.item_name}),h.jsx("h3",{children:I.item_name}),h.jsx("p",{className:"details-desc",children:I.description||"Sem descrio"}),h.jsxs("p",{className:"details-effect",children:["Efeito: ",I.effect||"Nenhum"]}),h.jsx("button",{className:"btn-cancel-modal",onClick:()=>R(null),children:"FECHAR"})]})}),m&&h.jsx("div",{className:"level-up-overlay",children:h.jsx("h1",{className:"levelup-text",children:"LEVEL UP!"})})]}),h.jsx("style",{children:`
        /* GERAL */
        .ficha-overlay-fixed { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.95); z-index: 200000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(8px); }
        .ficha-container { width: 1200px; height: 850px; max-width: 95vw; max-height: 98vh; background: #050a10; border: 2px solid #ffcc00; display: flex; flex-direction: column; position: relative; box-shadow: 0 0 50px rgba(255, 204, 0, 0.2); border-radius: 8px; overflow: hidden; font-family: 'Cinzel', serif; color: #fff; }
        .close-btn-ficha { position: absolute; top: 10px; right: 15px; background: transparent; border: none; color: #f44; font-size: 24px; cursor: pointer; z-index: 200; font-weight: bold; }
        .save-fab { position: absolute; bottom: 30px; right: 30px; width: 60px; height: 60px; border-radius: 50%; background: #222; border: 2px solid #444; color: #fff; font-size: 30px; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 300; transition: 0.3s; box-shadow: 0 0 15px #000; }
        .save-fab:hover { background: #00f2ff; border-color: #fff; color: #000; box-shadow: 0 0 30px #00f2ff; }
        .save-fab.glowing { animation: pulseSave 1.5s infinite; border-color: #00f2ff; color: #00f2ff; }
        @keyframes pulseSave { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        /* HEADER */
        .ficha-header { padding: 25px 30px 10px 30px; background: linear-gradient(90deg, #101020, #000); border-bottom: 2px solid #333; display: flex; justify-content: space-between; align-items: center; height: 140px; position: relative; }
        .guild-insignia-box, .guild-rank-box, .guild-item-box { display: flex; flex-direction: column; align-items: center; width: 80px; position: relative; padding-top: 10px; }
        .header-right-group { display: flex; gap: 20px; align-items: flex-end; }
        .header-label-top { font-size: 10px; color: #ffcc00; font-weight: bold; letter-spacing: 1px; margin-bottom: 2px; }
        .insignia-display, .rank-display, .special-display { width: 70px; height: 70px; background-size: contain; background-repeat: no-repeat; background-position: center; border: 1px solid #333; border-radius: 50%; background-color: #000; position: relative; transition: 0.2s; }
        .special-display { border-radius: 12px; }
        .clickable:hover { cursor: pointer; border-color: #ffcc00; box-shadow: 0 0 10px #ffcc00; }
        .header-info { flex: 1; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .header-info h1 { margin: 0; color: #ffcc00; font-size: 36px; letter-spacing: 4px; text-shadow: 0 0 10px rgba(255,204,0,0.3); }
        .sub-header { color: #00f2ff; font-size: 14px; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 15px; }
        .xp-container { display: flex; align-items: center; gap: 15px; width: 60%; margin-top: -5px; }
        .lvl-box { display: flex; flex-direction: column; align-items: center; background: #222; border: 1px solid #ffcc00; padding: 5px 12px; border-radius: 4px; box-shadow: 0 0 10px rgba(255,204,0,0.2); }
        .lvl-box small { font-size: 8px; color: #ffcc00; }
        .lvl-box span { font-size: 24px; font-weight: bold; line-height: 1; }
        .lvl-input { width: 40px; background: transparent; border: none; color: #fff; font-size: 24px; font-weight: bold; text-align: center; }
        .xp-bar-box { flex: 1; display: flex; flex-direction: column; }
        .xp-text { text-align: right; font-size: 10px; color: #aaa; margin-bottom: 2px; }
        .xp-mini-input { background: #111; border: none; color: #fff; width: 30px; text-align: center; font-size: 10px; }
        .xp-track { width: 100%; height: 8px; background: #111; border: 1px solid #444; border-radius: 4px; overflow: hidden; }
        .xp-fill { height: 100%; background: linear-gradient(90deg, #00f2ff, #0088ff); transition: width 0.5s; }
        .btn-levelup { background: linear-gradient(to bottom, #ffcc00, #ff8800); border: 2px solid #fff; color: #000; font-weight: bold; padding: 5px 15px; cursor: pointer; border-radius: 20px; animation: glow 1s infinite alternate; font-family: 'Cinzel', serif; font-size: 10px; }
        @keyframes glow { from { box-shadow: 0 0 10px #ffcc00; } to { box-shadow: 0 0 30px #ffcc00; transform: scale(1.05); } }
        .ficha-tabs { display: flex; background: #111; border-bottom: 1px solid #333; margin-top: 0; }
        .tab-btn { flex: 1; background: transparent; border: none; padding: 15px; color: #666; font-family: 'Cinzel', serif; font-size: 16px; cursor: pointer; transition: 0.3s; border-bottom: 3px solid transparent; }
        .tab-btn:hover { color: #fff; background: rgba(255,255,255,0.05); }
        .tab-btn.active { color: #ffcc00; border-bottom: 3px solid #ffcc00; background: rgba(255, 204, 0, 0.05); }
        .ficha-body { flex: 1; display: flex; padding: 30px 20px; gap: 20px; overflow: hidden; position: relative; }
        
        /* ESTILOS DE HABILIDADES */
        .skills-tab-content { display: flex; width: 100%; height: 100%; gap: 20px; }
        .skills-col { flex: 1; display: flex; flex-direction: column; background: rgba(0,0,0,0.3); border: 1px solid #333; padding: 10px; border-radius: 4px; overflow: hidden; }
        .skills-col.extra-col { flex: 0.5; }
        .class-header { color: #00f2ff; font-size: 16px; border-bottom: 2px solid #00f2ff; padding-bottom: 5px; margin-bottom: 10px; text-transform: uppercase; display: flex; justify-content: space-between; align-items: center; }
        .class-header.secondary { color: #aaa; border-color: #666; }
        .class-name-input { background: transparent; border: none; color: inherit; font-size: inherit; font-weight: bold; width: 80%; }
        .btn-add-skill-slot { background: transparent; border: 1px solid #555; color: #fff; width: 20px; height: 20px; cursor: pointer; font-size: 14px; line-height: 1; }
        
        .skills-list { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; padding-right: 5px; 
            scrollbar-width: none; 
        }
        .skills-list::-webkit-scrollbar { display: none; }
        
        .skill-card { background: rgba(0, 30, 60, 0.4); border: 1px solid #005577; padding: 8px; border-radius: 4px; cursor: grab; transition: 0.2s; }
        .skill-card.secondary { background: rgba(30, 30, 30, 0.4); border-color: #444; }
        .skill-card:active { cursor: grabbing; border-color: #ffcc00; }
        .skill-card.mastered { border-color: #ffd700; background: rgba(50, 40, 0, 0.4); }
        .skill-top { display: flex; justify-content: space-between; margin-bottom: 5px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; }
        .skill-name { color: #ffcc00; font-size: 13px; }
        .skill-cost { color: #00f2ff; font-size: 11px; font-weight: bold; }
        .skill-desc { font-size: 11px; color: #ccc; line-height: 1.3; margin: 0 0 5px 0; }
        .skill-name-in, .skill-cost-in { background: transparent; border: none; color: #fff; font-size: 12px; }
        .skill-name-in { flex: 1; font-weight: bold; color: #ffcc00; }
        .skill-cost-in { width: 40px; text-align: right; color: #00f2ff; }
        .skill-desc-in { width: 100%; background: transparent; border: none; color: #ccc; font-size: 11px; resize: none; font-family: sans-serif; height: 30px; }
        
        .skill-xp-box { margin-top: 5px; background: rgba(0,0,0,0.3); padding: 4px; border-radius: 3px; }
        .xp-labels { display: flex; justify-content: space-between; font-size: 9px; color: #888; margin-bottom: 2px; }
        .xp-tiny { background: transparent; border: none; color: #aaa; width: 20px; text-align: center; font-size: 9px; }
        .skill-track { width: 100%; height: 5px; background: #222; border-radius: 2px; overflow: hidden; }
        .skill-track.grayed .skill-fill { background: #888; }
        .skill-fill { height: 100%; background: #00f2ff; transition: width 0.3s; }
        .btn-masterize { width: 100%; margin-top: 4px; background: linear-gradient(to right, #d4af37, #b8860b); border: none; color: #000; font-size: 9px; font-weight: bold; cursor: pointer; padding: 2px; border-radius: 2px; }
        .star-icon { color: #ffd700; font-size: 14px; margin-right: 5px; text-shadow: 0 0 5px #ffd700; }
        .pulsing { animation: pulseStar 1.5s infinite; }
        @keyframes pulseStar { 0% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.3); opacity: 1; } 100% { transform: scale(1); opacity: 0.8; } }
        .btn-x-red-small { color: #f44; background: none; border: none; font-weight: bold; cursor: pointer; font-size: 12px; margin-left: 5px; }

        /* OUTRAS COLUNAS */
        .col-attributes { width: 300px; display: flex; flex-direction: column; align-items: center; border-right: 1px solid #333; padding-right: 20px; }
        .col-center-equip { flex: 1; position: relative; display: flex; justify-content: center; align-items: center; }
        .col-inventory { width: 280px; border-left: 1px solid #333; padding-left: 20px; display: flex; flex-direction: column; }
        .section-title { color: #aaa; font-size: 14px; border-bottom: 1px solid #00f2ff; width: 100%; text-align: center; margin-bottom: 15px; padding-bottom: 5px; }
        .radar-wrapper { position: relative; margin-bottom: 20px; }
        .stat-box-chart { background: #000; border: 1px solid #ffcc00; width: 40px; height: 30px; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 4px; box-shadow: 0 0 5px #000; }
        .sb-label { font-size: 8px; color: #aaa; }
        .sb-val { font-size: 12px; font-weight: bold; color: #fff; }
        .sb-input { width: 100%; height: 100%; background: transparent; border: none; color: #ffcc00; text-align: center; font-weight: bold; padding: 0; font-size: 12px; }
        .secondary-stats { width: 100%; }
        .stat-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
        .stat-row label { font-weight: bold; color: #ffcc00; width: 30px; }
        .stat-bars-inputs { flex: 1; background: rgba(255,0,0,0.1); border: 1px solid #522; padding: 5px; display: flex; align-items: center; justify-content: center; gap: 5px; color: #fff; border-radius: 4px; }
        .stat-bars-inputs.mp { background: rgba(0,0,255,0.1); border-color: #225; }
        .stat-bars-inputs input { background: transparent; border: none; color: #fff; width: 40px; text-align: center; font-family: 'serif'; font-weight: bold; }
        .stat-row-simple { display: flex; justify-content: space-between; gap: 10px; margin-top: 15px; }
        .s-box { flex: 1; background: #111; border: 1px solid #444; padding: 10px; text-align: center; border-radius: 4px; }
        .s-box label { display: block; font-size: 10px; color: #888; margin-bottom: 5px; }
        .s-box input { background: transparent; border: none; color: #fff; text-align: center; font-size: 18px; width: 100%; font-weight: bold; }
        .s-box span { font-size: 18px; font-weight: bold; }
        .char-image-frame { width: 300px; height: 450px; border: 2px solid #333; position: relative; background: #000; border-radius: 150px; overflow: hidden; box-shadow: inset 0 0 50px #000; margin-top: -20px; z-index: 1; transition: 0.2s; }
        .char-image-frame.clickable:hover { border-color: #ffcc00; cursor: pointer; }
        .image-display { width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.8; }
        .equip-slots-overlay { position: absolute; width: 300px; height: 450px; left: 50%; top: 50%; transform: translate(-50%, -50%); pointer-events: none; z-index: 2; margin-top: -10px; }
        .equip-slot { position: absolute; width: 80px; display: flex; flex-direction: column; align-items: center; pointer-events: auto; }
        .slot-label { font-size: 9px; color: #00f2ff; text-shadow: 0 0 2px #000; margin-bottom: 2px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        .slot-square { width: 60px; height: 60px; background: rgba(0, 10, 30, 0.9); border: 1px solid #ffcc00; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 15px rgba(0,0,0,0.8); position: relative; overflow: hidden; border-radius: 4px; }
        .item-bg { width: 100%; height: 100%; background-size: cover; background-position: center; position: absolute; top: 0; left: 0; }
        .empty-text { font-size: 9px; color: #666; text-align: center; line-height: 1; padding: 2px; }
        .btn-plus-item { background: transparent; color: #ffcc00; font-size: 24px; border: none; cursor: pointer; font-weight: bold; }
        .btn-eye-item { position: absolute; bottom: 2px; right: 2px; font-size: 10px; background: rgba(0,0,0,0.8); color: #fff; border: none; border-radius: 3px; cursor: pointer; padding: 2px 4px; z-index: 5; }
        .btn-return-forge { position: absolute; top: 2px; left: 2px; font-size: 10px; background: rgba(200, 0, 0, 0.8); color: #fff; border: none; border-radius: 3px; cursor: pointer; padding: 2px 4px; z-index: 5; }
        .gil-display { background: linear-gradient(90deg, rgba(255,204,0,0.1), transparent); border: 1px solid #ffcc00; padding: 15px; border-radius: 4px; display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .coin-icon { font-size: 20px; }
        .gil-amount { font-size: 24px; font-weight: bold; color: #fff; flex: 1; text-align: right; }
        .gil-input-master { background: transparent; border: none; color: #fff; font-size: 24px; font-weight: bold; width: 100%; text-align: right; outline: none; }
        input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        .currency { font-size: 10px; color: #ffcc00; font-weight: bold; }
        .items-list { flex: 1; display: flex; flex-direction: column; }
        .items-list h4 { color: #888; font-size: 12px; border-bottom: 1px solid #444; padding-bottom: 5px; margin-bottom: 10px; }
        .items-scroll { flex: 1; overflow-y: auto; padding-right: 5px; }
        .inv-row { display: flex; justify-content: space-between; border-bottom: 1px solid #222; padding: 8px 0; font-size: 12px; align-items: center; }
        .inv-name { background: transparent; border: none; color: #ddd; flex: 1; font-family: 'serif'; }
        .inv-qtd { background: transparent; border: none; color: #00f2ff; width: 40px; text-align: right; font-weight: bold; }
        .btn-x-red { color: #f44; background: none; border: none; cursor: pointer; font-weight: bold; margin-left: 5px; }
        .i-name { color: #ddd; }
        .i-qtd { color: #00f2ff; font-weight: bold; }
        .add-item-btn { width: 100%; background: #222; border: 1px dashed #555; color: #888; padding: 5px; cursor: pointer; margin-top: 10px; font-size: 10px; }
        .img-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 300000; display: flex; align-items: center; justify-content: center; }
        .img-modal-content { background: #111; border: 1px solid #ffcc00; padding: 25px; width: 400px; border-radius: 8px; text-align: center; box-shadow: 0 0 30px rgba(255,204,0,0.2); }
        .img-modal-content h3 { color: #ffcc00; margin-top: 0; font-family: 'Cinzel', serif; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 20px; }
        .img-modal-content input { width: 100%; padding: 12px; background: #000; border: 1px solid #444; color: #fff; margin-bottom: 20px; outline: none; border-radius: 4px; }
        .img-modal-content input:focus { border-color: #00f2ff; }
        .img-modal-actions { display: flex; gap: 15px; justify-content: center; }
        .btn-confirm { background: #00f2ff; color: #000; padding: 10px 25px; border: none; cursor: pointer; font-weight: bold; border-radius: 4px; transition: 0.2s; }
        .btn-confirm:hover { background: #fff; box-shadow: 0 0 15px #00f2ff; }
        .btn-cancel { background: #333; color: #fff; padding: 10px 25px; border: none; cursor: pointer; border-radius: 4px; }
        .btn-cancel:hover { background: #444; }
        .item-selector-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 300000; display: flex; align-items: center; justify-content: center; }
        .item-selector-box { width: 400px; height: 500px; background: #111; border: 1px solid #ffcc00; padding: 20px; display: flex; flex-direction: column; border-radius: 8px; }
        .item-selector-box h3 { color: #ffcc00; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0; }
        .forge-list-scroll { flex: 1; overflow-y: auto; margin-bottom: 15px; }
        .forge-item-row { display: flex; align-items: center; padding: 10px; border-bottom: 1px solid #333; cursor: pointer; }
        .forge-item-row:hover { background: rgba(255,255,255,0.1); }
        .forge-item-row img { width: 40px; height: 40px; border: 1px solid #555; margin-right: 10px; }
        .forge-item-row strong { color: #00f2ff; display: block; font-size: 12px; }
        .forge-item-row p { font-size: 10px; color: #aaa; margin: 0; }
        .btn-cancel-modal { width: 100%; padding: 10px; background: #333; color: #fff; border: none; cursor: pointer; }
        .item-details-box { width: 300px; background: #000; border: 1px solid #00f2ff; padding: 20px; text-align: center; border-radius: 8px; }
        .item-details-box img { width: 80px; height: 80px; border: 1px solid #fff; margin-bottom: 10px; }
        .item-details-box h3 { color: #00f2ff; margin: 0 0 10px 0; }
        .details-desc { font-size: 12px; color: #ccc; margin-bottom: 10px; font-style: italic; }
        .details-effect { font-size: 12px; color: #ffcc00; font-weight: bold; margin-bottom: 20px; }
        .extra-abilities-box { margin-top: 20px; border-top: 2px solid #444; padding-top: 15px; }
        .ability-row { display: flex; align-items: center; margin-bottom: 10px; background: #222; padding: 8px; border-radius: 4px; border-left: 3px solid #ffcc00; }
        .ability-row label { font-size: 10px; color: #888; width: 60px; font-weight: bold; }
        .ability-row span { font-size: 12px; color: #fff; font-weight: bold; }
        .ab-input { background: transparent; border: none; color: #fff; font-weight: bold; flex: 1; font-size: 12px; }
        .bonus-row { margin-top: 10px; }
        .bonus-row label { font-size: 10px; color: #00f2ff; display: block; margin-bottom: 5px; font-weight: bold; }
        .bonus-row p { font-size: 12px; color: #ddd; font-style: italic; background: rgba(0,0,0,0.5); padding: 8px; border-radius: 4px; }
        .bonus-area { width: 100%; height: 60px; background: rgba(0,0,0,0.5); border: 1px solid #444; color: #ddd; font-size: 12px; padding: 5px; resize: none; }
        .level-up-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 100; display: flex; align-items: center; justify-content: center; animation: fadeOverlay 4s forwards; pointer-events: none; }
        .levelup-text { font-size: 80px; color: #ffcc00; text-shadow: 0 0 50px #ffcc00, 0 0 20px #fff; animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); letter-spacing: 5px; }
        @keyframes popIn { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes fadeOverlay { 0% { opacity: 1; } 80% { opacity: 1; } 100% { opacity: 0; } }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
      `})]})}const DM="/FF-12Liberation/assets/ficha-icon-Ds6_MepT.png",Dx=({expiry:i})=>{const[e,n]=O.useState("");return O.useEffect(()=>{const r=setInterval(()=>{const o=new Date().getTime(),c=new Date(i).getTime()-o;if(c<0)n("EXPIRADA"),clearInterval(r);else{const d=Math.floor(c/864e5),m=Math.floor(c%(1e3*60*60*24)/(1e3*60*60)),g=Math.floor(c%(1e3*60*60)/(1e3*60));n(`${d}d ${m}h ${g}m`)}},1e3);return()=>clearInterval(r)},[i]),h.jsxs("span",{className:"mission-timer",children:[" ",e]})};function kM(){const[i,e]=O.useState([]),[n,r]=O.useState([]),[o,c]=O.useState([]),[d,m]=O.useState([]),[g,y]=O.useState(!1),[_,E]=O.useState(!1),[T,L]=O.useState(!1),[H,z]=O.useState(!1),[Q,ie]=O.useState(null),[B,se]=O.useState(null),[me,Ae]=O.useState(null),[ye,I]=O.useState(null),[R,N]=O.useState(null),[k,w]=O.useState(""),[P,C]=O.useState(""),[fe,ze]=O.useState([]),[X,le]=O.useState([]),[Z,ve]=O.useState({nome:"",local:"",contratante:"",descricaoMissao:"",objetivosMissao:"",requisitos:"",grupo:"",recompensa:"",rank:"E",imagem:"",duracao:"",gilRecompensa:""}),[_e,j]=O.useState({missaoId:"",dataInicio:"",cenarios:[],tokens:[]}),[J,oe]=O.useState(""),[de,Ee]=O.useState("cenario"),[Ne,Me]=O.useState(()=>localStorage.getItem("mestreAssinatura")||at.currentUser?.email?.split("@")[0]||"Narrador");O.useEffect(()=>{localStorage.setItem("mestreAssinatura",Ne)},[Ne]),O.useEffect(()=>{if(Do&&Do.pause(),!at.currentUser)return;const D=wn(Mt(Ce,"missoes"),xa("mestreId","==",at.currentUser.uid),Eo("createdAt","desc")),ce=Nn(D,Bn=>e(Bn.docs.map(mt=>({id:mt.id,...mt.data()})))),Se=wn(Mt(Ce,"resenhas"),xa("mestreId","==",at.currentUser.uid),Eo("createdAt","desc")),et=Nn(Se,Bn=>r(Bn.docs.map(mt=>({id:mt.id,...mt.data()})))),$e=wn(Mt(Ce,"sessoes"),xa("mestreId","==",at.currentUser.uid),Eo("dataInicio","asc")),ct=Nn($e,Bn=>{const mt=Bn.docs.map(Sa=>({id:Sa.id,...Sa.data()}));c(mt)}),Aa=wn(Mt(Ce,"characters")),Qo=Nn(Aa,Bn=>{m(Bn.docs.map(mt=>({id:mt.id,...mt.data()})))});return()=>{ce(),et(),ct(),Qo()}},[]),O.useEffect(()=>{if(Q){const D=d.find(ce=>ce.id===Q.id);D&&ie(D)}},[d]);const Je=async D=>{D.preventDefault();try{const ce=(Z.duracao.match(/(\d+)w/)||[0,0])[1]*6048e5+(Z.duracao.match(/(\d+)d/)||[0,0])[1]*864e5+(Z.duracao.match(/(\d+)h/)||[0,0])[1]*36e5;await uc(Mt(Ce,"missoes"),{...Z,mestreNome:Ne,mestreId:at.currentUser.uid,createdAt:Ln(),expiraEm:new Date(Date.now()+(ce||36e5)).toISOString()}),y(!1),ve({nome:"",local:"",contratante:"",descricaoMissao:"",objetivosMissao:"",requisitos:"",grupo:"",recompensa:"",rank:"E",imagem:"",duracao:"",gilRecompensa:""})}catch{alert("Erro ao forjar cartaz.")}},Ue=async()=>{if(!P||!k)return alert("Preencha ttulo e contedo!");try{const D=new Date;D.setDate(D.getDate()+1),await uc(Mt(Ce,"resenhas"),{titulo:P,conteudo:k,mestre:Ne,mestreId:at.currentUser.uid,destinatarios:fe,createdAt:Ln(),expiraEm:D.toISOString()}),E(!1),w(""),C(""),ze([])}catch{alert("Erro ao publicar.")}},Jt=async(D,ce)=>{if(window.confirm(`Remover ${ce.nome} da misso?`)){const Se=it(Ce,"missoes",D);await Tn(Se,{candidatos:bM(ce)})}},mn=()=>{J&&(j(de==="cenario"?D=>({...D,cenarios:[...D.cenarios,J]}):D=>({...D,tokens:[...D.tokens,J]})),oe(""))},ra=(D,ce)=>{j(D==="cenario"?Se=>({...Se,cenarios:Se.cenarios.filter((et,$e)=>$e!==ce)}):Se=>({...Se,tokens:Se.tokens.filter((et,$e)=>$e!==ce)}))},W=async D=>{if(D.preventDefault(),!_e.missaoId||!_e.dataInicio)return alert("Selecione a misso e o horrio!");try{const ce=i.find($e=>$e.id===_e.missaoId),Se=new Date(_e.dataInicio),et=new Date(Se.getTime()+1440*60*1e3);await uc(Mt(Ce,"sessoes"),{missaoId:_e.missaoId,missaoNome:ce?ce.nome:"Misso Desconhecida",mestreId:at.currentUser.uid,dataInicio:_e.dataInicio,expiraEm:et.toISOString(),participantes:X,cenarios:_e.cenarios,tokens:_e.tokens,createdAt:Ln()}),L(!1),j({missaoId:"",dataInicio:"",cenarios:[],tokens:[]}),le([]),alert("Sesso criada com sucesso!")}catch(ce){alert("Erro ao criar sesso: "+ce.message)}},be=D=>{alert(`Entrando no VTT do Mestre para a sesso: ${D.missaoNome}
Carregando ${D.cenarios?.length||0} cenrios e ${D.tokens?.length||0} tokens...`)};return h.jsxs("div",{className:"mestre-container",children:[h.jsx("div",{className:"mestre-bg-image-full",style:{backgroundImage:`url(${OA})`}}),h.jsxs("div",{className:"mestre-content",children:[h.jsxs("div",{className:"top-bar-flex",children:[h.jsx("h1",{className:"ff-title",children:"HUB DO NARRADOR"}),h.jsxs("div",{className:"mestre-identity-box ff-card fade-in",children:[h.jsx("label",{children:"ASSINATURA DO MESTRE:"}),h.jsx("input",{type:"text",value:Ne,onChange:D=>Me(D.target.value)})]})]}),h.jsxs("div",{className:"mestre-grid",children:[h.jsxs("div",{className:"ff-card board-column",children:[h.jsxs("div",{className:"card-header no-border",children:[h.jsx("h3",{children:"QUADRO DE MISSES"}),h.jsxs("button",{className:"ff-add-btn",onClick:()=>y(!0),children:[h.jsx("span",{children:"+"})," ADICIONAR CARTAZ"]})]}),h.jsx("div",{className:"mission-scroll",children:i.map(D=>{const ce=parseInt(D.grupo)||0,Se=D.candidatos?D.candidatos.length:0,et=ce>0?Se/ce*100:0,$e=Se>=ce&&ce>0;return h.jsxs("div",{className:`mission-poster rank-${D.rank}`,children:[h.jsx("div",{className:"poster-rank-label-fixed",children:D.rank}),h.jsxs("span",{className:"mestre-tag",children:["Narrador: ",D.mestreNome]}),h.jsx("h4",{children:D.nome}),h.jsxs("p",{className:"gil-recompensa",children:[" Recompensa: ",D.gilRecompensa," Gil"]}),h.jsxs("div",{className:"vagas-container",children:[h.jsxs("div",{className:"vagas-labels",children:[h.jsx("span",{children:"JOGADORES:"}),h.jsxs("span",{style:{color:$e?"#f44":"#0f0"},children:[Se," / ",ce]})]}),h.jsx("div",{className:"vagas-track",children:h.jsx("div",{className:"vagas-fill",style:{width:`${et}%`,background:$e?"#f44":"#00f2ff"}})})]}),D.candidatos&&D.candidatos.length>0&&h.jsxs("div",{className:"candidates-mini-box",children:[h.jsx("strong",{children:"Candidatos:"}),D.candidatos.map(ct=>h.jsxs("div",{className:"cand-row-master",children:[h.jsxs("span",{style:{color:ct.isLeader?"#ffcc00":"#ccc"},children:[ct.isLeader&&""," ",ct.nome," (",ct.classe,")"]}),h.jsx("button",{className:"btn-kick-x",title:"Remover Jogador",onClick:()=>Jt(D.id,ct),children:""})]},ct.uid))]}),h.jsx(Dx,{expiry:D.expiraEm}),h.jsxs("div",{className:"poster-actions",children:[h.jsx("button",{className:"btn-cyan",onClick:()=>I(D.imagem),children:"CARTAZ"}),h.jsx("button",{className:"btn-cyan",onClick:()=>se(D),children:"DETALHES"}),h.jsx("button",{className:"btn-red",onClick:()=>hs(it(Ce,"missoes",D.id)),children:"EXCLUIR"})]})]},D.id)})})]}),h.jsxs("div",{className:"ff-card sanchez-card board-column",children:[h.jsxs("div",{className:"sanchez-header-top no-border",children:[h.jsx("h3",{children:"RESENHA DO SANCHEZ"}),h.jsx("button",{className:"ff-add-btn-gold-small",onClick:()=>E(!0),children:"+ CRIAR NOVA RESENHA"})]}),h.jsx("div",{className:"mission-scroll",children:n.map(D=>h.jsxs("div",{className:"resenha-item-card",children:[h.jsx("h4",{children:D.titulo}),h.jsx(Dx,{expiry:D.expiraEm}),h.jsxs("div",{className:"poster-actions",children:[h.jsx("button",{className:"btn-cyan",onClick:()=>Ae(D),children:"VISUALIZAR"}),h.jsx("button",{className:"btn-red",onClick:()=>hs(it(Ce,"resenhas",D.id)),children:"EXCLUIR"})]})]},D.id))})]}),h.jsxs("div",{className:"ff-card board-column",children:[h.jsxs("div",{className:"card-header no-border",children:[h.jsx("h3",{children:"SESSES DE JOGO"}),h.jsx("button",{className:"ff-add-btn small-btn",onClick:()=>L(!0),children:"INICIAR NOVA SESSO"})]}),h.jsx("div",{className:"mission-scroll",children:o.length===0?h.jsx("div",{className:"empty-instancia",children:"NENHUMA INSTNCIA ATIVA"}):o.map(D=>h.jsxs("div",{className:"sessao-card",children:[h.jsx("div",{className:"sessao-status",children:" AO VIVO / AGENDADA"}),h.jsx("h4",{className:"sessao-title",children:D.missaoNome}),h.jsxs("div",{className:"sessao-info",children:[h.jsxs("span",{children:[" ",new Date(D.dataInicio).toLocaleString()]}),h.jsxs("span",{className:"sessao-players",children:[" ",D.participantes?.length||0," Jogadores"]})]}),h.jsxs("div",{className:"sessao-assets-count",children:[" ",D.cenarios?.length||0," Cenrios   ",D.tokens?.length||0," Tokens"]}),h.jsxs("div",{className:"poster-actions",style:{marginTop:"15px"},children:[h.jsx("button",{className:"btn-cyan",onClick:()=>N(D),children:" MEMBROS"}),h.jsx("button",{className:"btn-play-vtt",onClick:()=>be(D),children:" ACESSAR VTT"}),h.jsx("button",{className:"btn-red",onClick:()=>hs(it(Ce,"sessoes",D.id)),children:"CANCELAR"})]})]},D.id))})]})]})]}),H&&h.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>z(!1),children:h.jsxs("div",{className:"ff-modal-scrollable ff-card",onClick:D=>D.stopPropagation(),children:[h.jsx("h3",{className:"modal-title-ff",children:"PERSONAGENS REGISTRADOS"}),h.jsx("div",{className:"destinatarios-grid-fixed",children:d.map(D=>h.jsxs("div",{className:"ficha-list-item",children:[h.jsxs("div",{className:"ficha-row-name",children:[h.jsx("strong",{children:D.name}),h.jsxs("small",{children:[D.race," // ",D.class]})]}),h.jsx("button",{className:"btn-cyan",onClick:()=>{ie(D),z(!1)},children:"ABRIR FICHA "})]},D.id))}),h.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"20px"},onClick:()=>z(!1),children:"FECHAR"})]})}),Q&&h.jsx(xg,{characterData:Q,isMaster:!0,onClose:()=>ie(null)}),g&&h.jsx("div",{className:"ff-modal-overlay-fixed",children:h.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[h.jsx("h3",{className:"modal-title-ff",children:"NOVA MISSO"}),h.jsxs("form",{onSubmit:Je,children:[h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"NOME DA MISSO"}),h.jsx("input",{placeholder:"Ttulo...",value:Z.nome,onChange:D=>ve({...Z,nome:D.target.value}),required:!0})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"LOCAL"}),h.jsx("input",{placeholder:"Onde ocorre...",value:Z.local,onChange:D=>ve({...Z,local:D.target.value})})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"CONTRATANTE"}),h.jsx("input",{placeholder:"Quem paga...",value:Z.contratante,onChange:D=>ve({...Z,contratante:D.target.value})})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"DESCRIO DA MISSO"}),h.jsx("textarea",{className:"tall-area-dark",placeholder:"Detalhes da histria e contexto...",value:Z.descricaoMissao,onChange:D=>ve({...Z,descricaoMissao:D.target.value})})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"OBJETIVOS DA MISSO"}),h.jsx("textarea",{className:"tall-area-dark",placeholder:"O que deve ser feito passo a passo...",value:Z.objetivosMissao,onChange:D=>ve({...Z,objetivosMissao:D.target.value})})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"REQUISITOS DA MISSO"}),h.jsx("textarea",{className:"tall-area-dark",placeholder:"O que  necessrio para aceitar...",value:Z.requisitos,onChange:D=>ve({...Z,requisitos:D.target.value})})]}),h.jsxs("div",{className:"row-double-ff",children:[h.jsxs("div",{className:"field-group",children:[h.jsx("label",{children:"GRUPO MXIMO"}),h.jsx("input",{placeholder:"Ex: 4",value:Z.grupo,onChange:D=>ve({...Z,grupo:D.target.value})})]}),h.jsxs("div",{className:"field-group",children:[h.jsx("label",{children:"RANK"}),h.jsx("select",{value:Z.rank,onChange:D=>ve({...Z,rank:D.target.value}),children:["E","D","C","B","A","S","SS","SC"].map(D=>h.jsxs("option",{value:D,children:["RANK ",D]},D))})]})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"RECOMPENSAS EXTRAS"}),h.jsx("textarea",{className:"tall-area-dark",placeholder:"Itens, especiarias...",value:Z.recompensa,onChange:D=>ve({...Z,recompensa:D.target.value})})]}),h.jsxs("div",{className:"row-double-ff",children:[h.jsxs("div",{className:"field-group",children:[h.jsx("label",{children:"GIL"}),h.jsx("input",{type:"text",className:"gil-input",placeholder:"Ex: 5000",value:Z.gilRecompensa,onChange:D=>ve({...Z,gilRecompensa:D.target.value.replace(/\D/g,"")})})]}),h.jsxs("div",{className:"field-group",children:[h.jsx("label",{children:"DURAO"}),h.jsx("input",{placeholder:"Ex: 1d 10h",value:Z.duracao,onChange:D=>ve({...Z,duracao:D.target.value}),required:!0})]})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"IMAGEM"}),h.jsx("input",{placeholder:"Link Imgur...",value:Z.imagem,onChange:D=>ve({...Z,imagem:D.target.value})})]}),h.jsxs("div",{className:"btn-group-ff",children:[h.jsx("button",{type:"submit",className:"btn-forjar-main",children:"FORJAR MISSO"}),h.jsx("button",{type:"button",className:"btn-cancelar-main",onClick:()=>y(!1),children:"FECHAR"})]})]})]})}),_&&h.jsx("div",{className:"ff-modal-overlay-fixed",children:h.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[h.jsx("h3",{className:"modal-title-ff",children:"ESCREVER CRNICA"}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"TTULO"}),h.jsx("input",{className:"ff-modal-input-dark",value:P,onChange:D=>C(D.target.value)})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"CORPO"}),h.jsx("textarea",{className:"tall-area-ff-dark",value:k,onChange:D=>w(D.target.value)})]}),h.jsxs("div",{className:"player-selector-box-fixed",children:[h.jsx("label",{children:"DESTINATRIOS:"}),h.jsx("div",{className:"destinatarios-grid-fixed",children:d.map(D=>h.jsxs("label",{className:"chip-label-ff",children:[h.jsx("input",{type:"checkbox",checked:fe.includes(D.name),onChange:()=>fe.includes(D.name)?ze(fe.filter(ce=>ce!==D.name)):ze([...fe,D.name])})," ",D.name]},D.id))})]}),h.jsxs("div",{className:"btn-group-ff",children:[h.jsx("button",{className:"btn-forjar-main",onClick:Ue,children:"PUBLICAR"}),h.jsx("button",{className:"btn-cancelar-main",onClick:()=>E(!1),children:"FECHAR"})]})]})}),T&&h.jsx("div",{className:"ff-modal-overlay-fixed",children:h.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[h.jsx("h3",{className:"modal-title-ff",children:"CRIAR NOVA SESSO"}),h.jsxs("form",{onSubmit:W,children:[h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"SELECIONAR MISSO"}),h.jsxs("select",{className:"ff-select-dark",value:_e.missaoId,onChange:D=>j({..._e,missaoId:D.target.value}),required:!0,children:[h.jsx("option",{value:"",children:"-- Escolha --"}),i.map(D=>h.jsxs("option",{value:D.id,children:[D.nome," (Rank ",D.rank,")"]},D.id))]})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"DATA E HORRIO"}),h.jsx("input",{type:"datetime-local",className:"ff-input-dark",value:_e.dataInicio,onChange:D=>j({..._e,dataInicio:D.target.value}),required:!0})]}),h.jsxs("div",{className:"player-selector-box-fixed",children:[h.jsx("label",{children:"JOGADORES:"}),h.jsx("div",{className:"destinatarios-grid-fixed",children:d.map(D=>h.jsxs("label",{className:"chip-label-ff",children:[h.jsx("input",{type:"checkbox",checked:X.includes(D.name),onChange:()=>X.includes(D.name)?le(X.filter(ce=>ce!==D.name)):le([...X,D.name])})," ",D.name," (",D.class,")"]},D.id))})]}),h.jsxs("div",{className:"upload-section-box",children:[h.jsx("h4",{className:"upload-section-title",children:"IMPORTAR IMAGENS"}),h.jsxs("div",{className:"link-import-row",children:[h.jsx("input",{className:"ff-input-dark",value:J,onChange:D=>oe(D.target.value)}),h.jsxs("select",{className:"ff-select-dark small-select",value:de,onChange:D=>Ee(D.target.value),children:[h.jsx("option",{value:"cenario",children:"Cenrio"}),h.jsx("option",{value:"token",children:"Token"})]}),h.jsx("button",{type:"button",className:"btn-cyan",onClick:mn,children:"+"})]}),h.jsxs("div",{className:"assets-lists",children:[_e.cenarios.map((D,ce)=>h.jsxs("div",{className:"asset-item",children:[h.jsx("span",{className:"truncate-link",children:D}),h.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>ra("cenario",ce),children:""})]},ce)),_e.tokens.map((D,ce)=>h.jsxs("div",{className:"asset-item",children:[h.jsx("span",{className:"truncate-link",children:D}),h.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>ra("token",ce),children:""})]},ce))]})]}),h.jsxs("div",{className:"btn-group-ff",children:[h.jsx("button",{type:"submit",className:"btn-forjar-main",children:"AGENDAR"}),h.jsx("button",{type:"button",className:"btn-cancelar-main",onClick:()=>L(!1),children:"CANCELAR"})]})]})]})}),R&&h.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>N(null),children:h.jsxs("div",{className:"ff-modal-scrollable ff-card",onClick:D=>D.stopPropagation(),style:{height:"auto",maxHeight:"500px"},children:[h.jsx("h3",{className:"modal-title-ff",children:"MEMBROS ALOCADOS"}),h.jsx("div",{className:"destinatarios-grid-fixed",children:R.participantes?.map((D,ce)=>h.jsxs("div",{className:"chip-label-ff",style:{cursor:"default",color:"#fff",borderColor:"#00f2ff"},children:[" ",D]},ce))}),h.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"20px",width:"100%"},onClick:()=>N(null),children:"FECHAR"})]})}),B&&h.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>se(null),children:h.jsxs("div",{className:"ff-modal ff-card detail-view-main",onClick:D=>D.stopPropagation(),children:[h.jsxs("div",{className:"detail-header-modern",children:[h.jsx("div",{className:`detail-rank-badge rank-${B.rank}`,children:B.rank}),h.jsxs("div",{className:"detail-title-col",children:[h.jsx("h2",{children:B.nome}),h.jsxs("span",{className:"detail-narrator",children:["Narrador: ",B.mestreNome]})]})]}),h.jsxs("div",{className:"detail-body-grid",children:[h.jsxs("div",{className:"detail-info-row",children:[h.jsxs("div",{className:"info-item",children:[h.jsx("label",{children:" LOCAL"}),h.jsx("span",{children:B.local||"Desconhecido"})]}),h.jsxs("div",{className:"info-item",children:[h.jsx("label",{children:" CONTRATANTE"}),h.jsx("span",{children:B.contratante||"Annimo"})]})]}),h.jsxs("div",{className:"detail-section",children:[h.jsx("label",{className:"section-label",children:"VAGAS"}),h.jsxs("div",{style:{background:"#111",padding:"10px",borderRadius:"4px"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",color:"#aaa",marginBottom:"5px"},children:[h.jsx("span",{children:"STATUS DO GRUPO"}),h.jsxs("span",{children:[B.candidatos?B.candidatos.length:0," / ",B.grupo||"?"]})]}),h.jsx("div",{style:{width:"100%",height:"6px",background:"#333",borderRadius:"3px"},children:h.jsx("div",{style:{width:`${Math.min((B.candidatos?.length||0)/(parseInt(B.grupo)||1)*100,100)}%`,height:"100%",background:B.candidatos?.length>=parseInt(B.grupo)?"#f44":"#00f2ff"}})})]})]}),h.jsxs("div",{className:"detail-section",children:[h.jsx("label",{className:"section-label",children:" DESCRIO"}),h.jsx("p",{className:"section-text",children:B.descricaoMissao})]}),h.jsxs("div",{className:"detail-section",children:[h.jsx("label",{className:"section-label",children:" OBJETIVOS"}),h.jsx("p",{className:"section-text",children:B.objetivosMissao})]}),h.jsxs("div",{className:"detail-section",children:[h.jsx("label",{className:"section-label",children:" REQUISITOS"}),h.jsx("p",{className:"section-text",children:B.requisitos})]}),h.jsxs("div",{className:"detail-section reward-section",children:[h.jsx("label",{className:"section-label",children:" RECOMPENSAS"}),h.jsxs("div",{className:"reward-content-box",children:[h.jsxs("div",{className:"gil-display-row",children:[h.jsx("span",{className:"gil-icon",children:""})," ",h.jsxs("span",{className:"gil-value",children:[B.gilRecompensa||0," GIL"]})]}),B.recompensa&&h.jsx("div",{className:"extra-rewards-list",children:B.recompensa.split(`
`).map((D,ce)=>h.jsxs("div",{className:"reward-item",children:[" ",D]},ce))})]})]})]}),h.jsx("button",{className:"ff-final-close-btn",onClick:()=>se(null),children:"FECHAR RELATRIO"})]})}),ye&&h.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>I(null),children:h.jsxs("div",{className:"lightbox-wrap",children:[h.jsx("button",{className:"close-lightbox",onClick:()=>I(null),children:""}),h.jsx("img",{src:ye,alt:"Cartaz",className:"cartaz-full-view"})]})}),me&&h.jsx("div",{className:"papiro-overlay-full",onClick:()=>Ae(null),children:h.jsxs("div",{className:"papiro-real-container",style:{backgroundImage:`url(${MA})`},onClick:D=>D.stopPropagation(),children:[h.jsx("div",{className:"sanchez-oval-view-no-border",style:{backgroundImage:`url(${hm})`}}),h.jsx("h2",{className:"papiro-title-real",children:me.titulo}),h.jsxs("p",{className:"papiro-mestre-sub",children:["Narrador: ",me.mestre]}),h.jsx("div",{className:"papiro-body-real",dangerouslySetInnerHTML:{__html:me.conteudo.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br/>")}}),h.jsxs("div",{className:"papiro-dest-list",children:[h.jsx("strong",{children:"ENVIADO PARA:"})," ",me.destinatarios?.join(", ")]}),h.jsx("button",{className:"papiro-close-btn",onClick:()=>Ae(null),children:"FECHAR"})]})}),h.jsxs("div",{className:"master-floating-group",children:[h.jsx(DA,{}),h.jsx(bg,{isMestre:!0}),h.jsx("button",{className:"fichas-trigger-btn",onClick:()=>z(!0),title:"Gerenciar Fichas",children:h.jsx("img",{src:DM,alt:"Fichas",onError:D=>{D.target.style.display="none",D.target.parentNode.innerText="FICHAS"}})})]}),h.jsx("style",{children:`
        /* ESTILOS MANTIDOS + NOVOS */
        .mestre-container { background: #000; min-height: 100vh; position: relative; color: #fff; font-family: 'serif'; overflow: hidden; }
        .mestre-bg-image-full { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center top; background-repeat: no-repeat; opacity: 0.35; z-index: 0; filter: contrast(125%) brightness(75%); }
        .mestre-content { position: relative; z-index: 1; padding: 20px; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        .top-bar-flex { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .ff-title { color: #ffcc00; text-shadow: 0 0 10px #ffcc00; letter-spacing: 5px; font-size: 2rem; margin: 0; }
        .mestre-identity-box { display: flex; align-items: center; gap: 10px; border: 1px solid #ffcc00; padding: 8px 15px; background: rgba(0, 10, 30, 0.9); }
        .mestre-identity-box input { background: #fff; border: 1px solid #ffcc00; color: #000; padding: 5px 10px; font-weight: bold; font-family: 'serif'; outline: none; }

        /* GRID RESPONSIVO TELA NICA */
        .mestre-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; flex: 1; overflow: hidden; padding-bottom: 60px; /* Espao para botes flutuantes */ }
        
        /* CARDS TELA NICA */
        .ff-card { background: rgba(0, 10, 30, 0.95); border: 1px solid #ffcc00; padding: 15px; border-radius: 4px; backdrop-filter: blur(10px); display: flex; flex-direction: column; max-height: 100%; }
        .board-column { flex: 1; overflow: hidden; min-height: 0; }
        
        .card-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px; flex-shrink: 0; }
        .card-header.no-border { border-bottom: none; }
        
        .mission-scroll { flex: 1; overflow-y: auto; padding-right: 5px; scrollbar-width: thin; scrollbar-color: #ffcc00 #000; }
        .mission-scroll::-webkit-scrollbar { width: 6px; }
        .mission-scroll::-webkit-scrollbar-thumb { background: #ffcc00; }

        .mission-poster { background: rgba(255,255,255,0.04); border: 1px solid #444; margin-bottom: 15px; padding: 18px; border-left: 4px solid #00f2ff; position: relative; }
        .poster-rank-label-fixed { position: absolute; top: 12px; right: 18px; font-size: 32px; color: #ffcc00; opacity: 0.35; font-weight: bold; }
        .mestre-tag { color: #ffcc00; font-size: 10px; text-transform: uppercase; font-weight: bold; display: block; margin-bottom: 8px; }
        .candidates-mini-box { margin-top: 8px; background: rgba(0,0,0,0.3); padding: 5px; border-radius: 3px; }
        .cand-row-master { display: flex; justify-content: space-between; align-items: center; font-size: 10px; margin-bottom: 2px; }
        .btn-kick-x { background: transparent; border: none; color: #f44; cursor: pointer; font-weight: bold; font-size: 12px; }
        .btn-kick-x:hover { color: #fff; }

        /* VAGAS VISUAL */
        .vagas-container { margin: 10px 0; }
        .vagas-labels { display: flex; justify-content: space-between; font-size: 10px; color: #ccc; margin-bottom: 2px; font-weight: bold; }
        .vagas-track { width: 100%; height: 6px; background: #111; border: 1px solid #444; border-radius: 3px; overflow: hidden; }
        .vagas-fill { height: 100%; transition: width 0.3s; }

        .sanchez-card { position: relative; overflow: hidden; }
        .sanchez-header-top { position: relative; z-index: 1; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px; flex-shrink: 0; }
        .sanchez-header-top.no-border { border-bottom: none; }
        .resenha-item-card { background: rgba(255,255,255,0.05); border: 1px solid #333; padding: 15px; margin-top: 12px; border-radius: 4px; }
        .sessao-card { background: linear-gradient(135deg, rgba(20,20,50,0.9), rgba(0,0,20,0.9)); border: 1px solid #00f2ff; padding: 15px; margin-bottom: 15px; border-radius: 4px; box-shadow: 0 0 10px rgba(0,242,255,0.1); }
        .sessao-status { font-size: 10px; color: #f44; font-weight: bold; margin-bottom: 8px; animation: pulse 2s infinite; }
        .sessao-title { color: #fff; font-size: 18px; margin: 0 0 10px 0; border-bottom: 1px solid #333; padding-bottom: 8px; }
        .sessao-info { display: flex; justify-content: space-between; font-size: 12px; color: #aaa; margin-bottom: 10px; }
        .sessao-assets-count { font-size: 11px; color: #ffcc00; background: rgba(0,0,0,0.3); padding: 5px; border-radius: 3px; display: inline-block; }
        .btn-play-vtt { background: #00f2ff; color: #000; border: none; padding: 8px 15px; font-weight: bold; cursor: pointer; flex: 1; margin-right: 10px; transition: 0.3s; }
        .btn-play-vtt:hover { background: #fff; box-shadow: 0 0 15px #00f2ff; }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
        .upload-section-box { border: 1px dashed #444; padding: 15px; margin: 20px 0; background: rgba(0,0,0,0.3); }
        .upload-section-title { color: #00f2ff; font-size: 12px; margin-bottom: 15px; border-bottom: 1px solid #00f2ff; padding-bottom: 5px; display: inline-block; }
        .ff-select-dark { width: 100%; background: #000; border: 1px solid #444; color: #fff; padding: 12px; outline: none; font-family: 'serif'; }
        .ff-input-dark { width: 100%; background: #000; border: 1px solid #444; color: #fff; padding: 12px; outline: none; font-family: 'serif'; color-scheme: dark; }
        .link-import-row { display: flex; gap: 10px; margin-bottom: 15px; }
        .small-select { width: 120px; }
        .assets-lists { display: flex; flex-direction: column; gap: 10px; }
        .asset-group { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 4px; }
        .asset-group label { display: block; color: #ffcc00; font-size: 10px; font-weight: bold; margin-bottom: 5px; border-bottom: 1px solid #333; }
        .asset-item { display: flex; justify-content: space-between; align-items: center; font-size: 11px; color: #ddd; margin-bottom: 4px; }
        .truncate-link { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 350px; }
        .btn-remove-x { background: transparent; border: none; color: #f44; font-weight: bold; cursor: pointer; font-size: 14px; }
        .ff-modal-overlay-fixed { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.94); z-index: 99999; display: flex; align-items: center; justify-content: center; }
        .ff-modal-scrollable { width: 550px; max-height: 90vh; overflow-y: auto; background: #000c1d; border: 2px solid #ffcc00; padding: 35px; box-shadow: 0 0 60px rgba(0,0,0,0.9); }
        .modal-title-ff { color: #fff; font-size: 22px; border-bottom: 1px solid #ffcc00; padding-bottom: 10px; margin-bottom: 20px; letter-spacing: 2px; }
        .modal-input-group { margin-bottom: 20px; }
        .modal-input-group label { color: #ffcc00; font-size: 11px; display: block; margin-bottom: 8px; font-weight: bold; letter-spacing: 1px; }
        .modal-input-group input { width: 100%; background: #000; border: 1px solid #444; color: #fff; padding: 12px; outline: none; font-family: 'serif'; font-size: 14px; }
        .row-double-ff { display: flex; gap: 20px; margin-bottom: 20px; }
        .field-group { flex: 1; display: flex; flex-direction: column; }
        .field-group label { color: #ffcc00; font-size: 11px; display: block; margin-bottom: 8px; font-weight: bold; }
        .field-group input, .field-group select { width: 100%; background: #000; border: 1px solid #444; color: #fff; padding: 12px; font-family: 'serif'; outline: none; }
        .tall-area-dark { width: 100%; background: #000; border: 1px solid #444; color: #fff; padding: 12px; height: 110px; resize: none; font-family: 'serif'; outline: none; }
        .tall-area-ff-dark { width: 100%; background: #000; border: 1px solid #ffcc00; color: #fff; padding: 15px; height: 250px; resize: none; font-family: 'serif'; outline: none; font-size: 16px; border-radius: 4px; }
        .detail-view-main { width: 600px; background: #000814; border: 1px solid #ffcc00; padding: 0; box-shadow: 0 0 40px rgba(255, 204, 0, 0.1); overflow: hidden; display: flex; flex-direction: column; }
        .detail-header-modern { background: linear-gradient(90deg, #1a1a1a 0%, #000 100%); padding: 25px 30px; display: flex; align-items: center; border-bottom: 1px solid #333; gap: 20px; }
        .detail-rank-badge { font-size: 32px; font-weight: bold; color: #ffcc00; text-shadow: 0 0 10px rgba(255,204,0,0.5); border: 2px solid #ffcc00; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: rgba(0,0,0,0.5); }
        .detail-title-col h2 { margin: 0; font-size: 24px; color: #fff; text-transform: uppercase; letter-spacing: 1px; }
        .detail-narrator { color: #00f2ff; font-size: 12px; font-weight: bold; text-transform: uppercase; margin-top: 4px; display: block; }
        .detail-body-grid { padding: 30px; display: flex; flex-direction: column; gap: 20px; }
        .detail-info-row { display: flex; gap: 25px; margin-bottom: 10px; border-bottom: 1px solid #333; padding-bottom: 15px; }
        .info-item { flex: 1; }
        .info-item label { color: #ffcc00; font-size: 10px; display: block; margin-bottom: 5px; font-weight: bold; opacity: 0.8; }
        .info-item span { color: #fff; font-size: 14px; font-weight: bold; letter-spacing: 0.5px; }
        .detail-section { margin-bottom: 5px; }
        .section-label { color: #ffcc00; font-size: 11px; font-weight: bold; display: block; margin-bottom: 8px; letter-spacing: 1px; text-transform: uppercase; border-bottom: 1px solid #333; padding-bottom: 4px; }
        .section-text { font-size: 15px; line-height: 1.5; color: #ddd; margin: 0; white-space: pre-wrap; }
        .reward-section { margin-top: 10px; background: rgba(255,204,0,0.05); padding: 15px; border-radius: 4px; border: 1px solid rgba(255,204,0,0.2); }
        .gil-display-row { display: flex; align-items: center; gap: 10px; font-size: 18px; color: #ffcc00; font-weight: bold; margin-bottom: 8px; }
        .extra-rewards-list { margin-top: 8px; padding-left: 5px; }
        .reward-item { color: #aaa; font-size: 14px; margin-bottom: 4px; font-style: italic; }
        .ff-final-close-btn { width: 100%; background: #111; color: #fff; border: none; border-top: 1px solid #333; padding: 20px; font-weight: bold; cursor: pointer; font-size: 13px; text-transform: uppercase; transition: 0.2s; }
        .ff-final-close-btn:hover { background: #222; color: #ffcc00; }
        .papiro-overlay-full { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 100000; display: flex; align-items: center; justify-content: center; }
        .papiro-real-container { width: 1000px; height: 800px; max-width: 95vw; max-height: 95vh; background-size: 100% 100%; background-repeat: no-repeat; padding: 110px 160px; color: #3b2b1a; position: relative; display: flex; flex-direction: column; }
        .sanchez-oval-view-no-border { width: 110px; height: 110px; float: right; border-radius: 50%; background-size: cover; margin-left: 20px; mask-image: radial-gradient(circle, black 60%, transparent 100%); -webkit-mask-image: radial-gradient(circle, black 60%, transparent 100%); opacity: 0.9; }
        .papiro-title-real { border-bottom: 2px solid #3b2b1a; padding-bottom: 5px; margin-top: 0; font-size: 32px; font-weight: bold; }
        .papiro-mestre-sub { font-size: 14px; font-style: italic; opacity: 0.8; margin-top: 5px; }
        .papiro-body-real { margin-top: 25px; flex: 1; overflow-y: auto; line-height: 1.6; font-size: 18px; padding-right: 10px; scrollbar-width: none; -ms-overflow-style: none; }
        .papiro-body-real::-webkit-scrollbar { display: none; }
        .papiro-dest-list { margin-top: 15px; font-size: 14px; border-top: 1px solid rgba(59, 43, 26, 0.3); padding-top: 10px; }
        .papiro-close-btn { position: absolute; bottom: 45px; right: 110px; background: #3b2b1a; color: #f4e4bc; border: none; padding: 8px 20px; cursor: pointer; font-weight: bold; font-size: 13px; border-radius: 2px; }
        .ff-add-btn { background: transparent; border: 1px solid #00f2ff; color: #00f2ff; padding: 10px 20px; cursor: pointer; font-weight: bold; font-size: 12px; }
        .ff-add-btn-gold-small { background: transparent; border: 1px solid #ffcc00; color: #ffcc00; padding: 8px 15px; cursor: pointer; font-weight: bold; font-size: 11px; transition: 0.3s; }
        .ff-add-btn-gold-small:hover { background: #ffcc00; color: #000; box-shadow: 0 0 15px #ffcc00; }
        .btn-cyan { border: 1px solid #00f2ff; color: #00f2ff; padding: 6px 15px; background: transparent; cursor: pointer; font-size: 11px; margin-right: 10px; font-weight: bold; }
        .btn-red { border: 1px solid #f44; color: #f44; padding: 6px 15px; background: transparent; cursor: pointer; font-size: 11px; font-weight: bold; }
        .btn-group-ff { display: flex; gap: 20px; margin-top: 25px; }
        .btn-forjar-main { flex: 1; background: #ffcc00; color: #000; border: none; padding: 14px; font-weight: bold; cursor: pointer; font-size: 14px; text-transform: uppercase; }
        .btn-cancel-main { flex: 1; background: #000; color: #fff; border: 1px solid #fff; padding: 14px; cursor: pointer; text-align: center; font-size: 14px; text-transform: uppercase; }
        .player-selector-box-fixed { margin: 25px 0; border-top: 1px solid #333; padding-top: 15px; }
        .destinatarios-grid-fixed { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 12px; }
        .chip-label-ff { background: rgba(0, 10, 30, 0.8); border: 1px solid #ffcc00; color: #ffcc00; padding: 8px 18px; border-radius: 4px; font-size: 12px; cursor: pointer; display: inline-block; }
        .mission-timer { font-size: 12px; color: #00f2ff; display: block; margin-top: 10px; font-weight: bold; letter-spacing: 1px; }
        .fade-in { animation: fadeIn 1s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .lightbox-wrap { position: relative; max-width: 90vw; max-height: 90vh; }
        .cartaz-full-view { max-width: 100%; max-height: 90vh; border: 3px solid #ffcc00; box-shadow: 0 0 50px #000; }
        .close-lightbox { position: absolute; top: -40px; right: -40px; background: transparent; border: none; color: #fff; font-size: 40px; cursor: pointer; }
        
        /* BOTO FLUTUANTE DE FICHAS */
        .fichas-trigger-btn { position: fixed; bottom: 30px; right: 190px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #00f2ff; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; }
        .fichas-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 25px #00f2ff; }
        .fichas-trigger-btn img { width: 70%; height: 70%; object-fit: contain; }

        /* LISTA DE FICHAS */
        .ficha-list-item { display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.5); border: 1px solid #333; padding: 15px; cursor: pointer; transition: 0.2s; border-radius: 4px; width: 100%; }
        .ficha-list-item:hover { border-color: #00f2ff; background: rgba(0, 242, 255, 0.1); }
        .ficha-row-name { display: flex; flex-direction: column; flex: 1; margin-right: 15px; }
        .ficha-row-name strong { color: #fff; font-size: 16px; }
        .ficha-row-name small { color: #aaa; font-size: 12px; }
      `})]})}const jM=[{id:"humes",name:"Humes",image:"races/humes.png",description:"Os Humes so a raa mais comum e predominante em Ivalice. Adaptveis, curiosos e persistentes, habitam desde as grandes capitais at vilarejos fronteirios. Sua origem  antiga e pouco documentada, mas acredita-se que foram os primeiros a construir grandes cidades e fundar os cls atuais.",characteristics:"Sua maior qualidade  a versatilidade. No se destacam naturalmente em nenhum atributo especfico, mas aprendem qualquer funo rapidamente, prosperando em qualquer lugar que chamem de lar.",racial_bonus:{value:5,detail:"5 pontos extras para distribuir livremente entre os atributos durante a criao de personagem."},base_classes:["Soldado","Mago Branco","Qumico"]},{id:"viera",name:"Viera",image:"races/viera.png",description:"Uma raa graciosa e enigmtica, marcada por longas orelhas e aparncia esguia. Vivem em florestas profundas, isoladas do mundo exterior e conectadas aos espritos da natureza. A sociedade  matriarcal.",characteristics:"Conhecidas por sentidos aguados, velocidade impressionante e habilidades mgicas refinadas. Os machos so raros e exilados ao atingirem a maturidade.",racial_bonus:{female:{VEL:3,INT:2},male_exiled:{"pontos-livres":5}},base_classes:{female:["Arqueira","Esgrimista","Curandeira"],male:["Exilado"]}},{id:"moogles",name:"Moogles",image:"races/moogles.png",description:"Pequenos, adorveis e envoltos em mistrio. Possuem corpos peludos, antenas com pompons flutuantes e pequenas asas de morcego. No possuem gnero definido.",characteristics:"Extremamente inteligentes e obcecados por tecnologia e invenes, misturando cincia com feitiaria. Carregam um estranho 'magnetismo da sorte'.",racial_bonus:{SOR:5},base_classes:["Animista","Engenheiro"]},{id:"bangaa",name:"Bangaa",image:"races/bangaa.png",description:"Guerreiros reptilianos robustos, com pele escamosa e traos que lembram drages antigos. So temidos pela fora bruta e respeitados pela honra em combate.",characteristics:"Sua origem remonta a tempos ancestrais e acredita-se que possuam sangue dracnico. Valorizam a lealdade, a disciplina fsica e o dever.",racial_bonus:{FOR:3,CONS:2},base_classes:["Monge","Guerreiro"]},{id:"grias",name:"Grias",image:"races/grias.png",description:"Guerreiras aladas, exclusivamente femininas, nascidas para dominar os cus. Possuem corpos atlticos, chifres, caudas e asas fortes.",characteristics:"Mestres da caa alada e emboscadas areas. Usam a altura como vantagem ttica e seus ataques de mergulho so devastadores.",racial_bonus:{VEL:2},passive_ability:{name:"Imunidade a Dano de Queda",effect:"No sofrem dano ao cair de qualquer altura nem de impactos ascendentes."},base_classes:["Monge","Guerreiro"]},{id:"elvaan",name:"Elvaan",image:"races/elvaan.png",description:"Originrios de Valendia, so guerreiros altos, nobres e disciplinados, com orelhas alongadas. Simbolizam tradio e justia em Ivalice.",characteristics:"Treinados desde a infncia no manejo de lminas e estilos de combate ancestrais. Desprezam truques e valorizam o confronto direto.",racial_bonus:{FOR:2},passive_ability:{name:"Domnio de Reao",effect:"Aprendem habilidades de reao com o dobro de rapidez."},base_classes:["Soldado","Espadachim"]},{id:"mithra",name:"Mithra",image:"races/mithra.png",description:"Raa com traos felinos, gil e astuta. Compartilham uma origem ancestral com as Viera, mas se espalharam por matas tropicais e runas.",characteristics:"Especialistas em furtividade, espionagem e ladronagem. Possuem forte senso de honra ligado  astcia.",racial_bonus:{VEL:2},passive_ability:{name:"Bnus de Camuflagem",effect:"Recebem vantagem em testes de furtividade, infiltrao e disfarce."},base_classes:["Ladra","Rastreadora"]},{id:"nu_mou",name:"Nu Mou",image:"races/nu-mou.png",description:"Pequenos em estatura, com aparncia canina e pelagem espessa, mas imensos em conhecimento. So magos natos que vivem sculos acumulando sabedoria.",characteristics:"Frequentemente ocupam cargos de conselheiros. Possuem empatia natural com a vida selvagem, comunicando-se com monstros e animais.",racial_bonus:{INT:3,CAR:2},base_classes:["Mago Branco","Adestrador"]},{id:"hypello",name:"Hypello",image:"races/hypello.png",description:"Raa anfbia dos pntanos de Kerwon. Possuem grande estatura, corpos robustos e pele azulada ou esverdeada.",characteristics:"Herbalistas por excelncia, mestres em usar plantas para curas ou venenos. Sua maior fora  a vitalidade e a empatia.",racial_bonus:{CONS:5},base_classes:["Escudeiro","Curandeiro"]},{id:"umbros",name:"Umbros",image:"races/umbros.png",description:"Seres de pele negra e marcas brilhantes que reagem  lua. Descendentes dos seres tocados pelas Pedras Zodiacais.",characteristics:"Alta resistncia  corrupo e aptido mgica. Vistos como orculos ou andarilhos que carregam segredos esquecidos.",racial_bonus:{INT:2},passive_ability:{name:"Modo Luar",effect:"Sob luz direta da lua visvel, causam o dobro de dano final com qualquer magia."},base_classes:["Mago Negro","Ocultista"]}],PM={races:jM},VM=JSON.parse(`[{"id":"soldado","name":"Soldado","type":"Bsica","role":"Tanque / Suporte de status","description":"Guerreiros de linha de frente, treinados para resistir aos maiores impactos do campo de batalha e desestabilizar o inimigo com habilidades tticas conhecidas como 'Pausas'.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Primeiro Socorro","description":"Trata os prprios ferimentos, restaurando 25% do HP.","cost":"N/A","type":"HB"},{"name":"Quebra de Poder","description":"Reduz a FOR do alvo pela metade, por trs turnos.","cost":"N/A","type":"HB"},{"name":"Quebra Magia","description":"Reduz a INT do alvo pela metade, por trs turnos.","cost":"N/A","type":"HB"},{"name":"Quebra de Mana","description":"Reduz a MP do alvo pela metade por trs turnos.","cost":"N/A","type":"HB"},{"name":"Provocar","description":"Inflige FURIA a um alvo.","cost":"N/A","type":"HB"},{"name":"Shieldbearer","description":"Permite ao usurio equipar escudos, mesmo fora da classe Soldado.","cost":"N/A","type":"Passiva"}]},{"id":"mago_branco","name":"Mago Branco","type":"Bsica","role":"Suporte / Cura / Anti-morto-vivo","description":"Especialistas em suporte mgico, sua principal funo  manter o grupo de p com curas poderosas, proteo espiritual e magias de ressuscitao.","bonus_class":{"MP":5},"requirements":[],"abilities":[{"name":"Cure","description":"Cura magicamente os ferimentos do alvo. Restaura 10% do PV e causa dano a mortos-vivos.","cost":"8 MP","type":"Magia"},{"name":"Cura","description":"Restaura magicamente 25% de HP. Causa dano a mortos-vivos.","cost":"18 MP","type":"Magia"},{"name":"Curaga","description":"Restaura magicamente 75% de HP. Causa dano a mortos-vivos.","cost":"32 MP","type":"Magia"},{"name":"Esuna","description":"Remove magicamente os efeitos negativos do alvo.","cost":"10 MP","type":"Magia"},{"name":"Arise","description":"Revive magicamente o alvo, removendo o KO. Causa dano a mortos-vivos.","cost":"40 MP","type":"Magia"},{"name":"Turbo MP","description":"Os feitios custam o dobro de seus MP normais, e do o dobro de dano.","cost":"N/A","type":"Passiva"}]},{"id":"quimico","name":"Qumico","type":"Bsica","role":"Suporte / Manipulador de Itens","description":"Mestres do preparo e uso ttico de poes. Utilizam conhecimentos alqumicos para curar aliados e enfraquecer inimigos.","bonus_class":{"SOR":2,"CAR":3},"requirements":[],"abilities":[{"name":"Preparar Poo","description":"Cria uma poo bsica durante o turno.","cost":"N/A","type":"HB"},{"name":"Arremessar Poo","description":"Permite arremessar qualquer poo equipada em um aliado ou inimigo a at 3 quadrados.","cost":"N/A","type":"HB"},{"name":"Frasco Instvel","description":"Arremessa uma mistura explosiva improvisada que causa dano de elemento aleatrio.","cost":"N/A","type":"HB"},{"name":"Reao em Cadeia","description":"Permite usar duas poes diferentes ao mesmo tempo.","cost":"N/A","type":"HB"},{"name":"Reciclagem Alqumica","description":"Recupera uma poo gasta no combate.","cost":"N/A","type":"HB"},{"name":"Inventrio Estendido","description":"Bolsa exclusiva para poes que no ocupa espao no inventrio padro (at 8 poes).","cost":"N/A","type":"Passiva"}]},{"id":"arqueira","name":"Arqueira","type":"Bsica","role":"Atiradora / Controle de Campo","description":"Especialistas em combate  distncia, treinadas para derrubar inimigos com preciso e neutralizar alvos.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Foco","description":"Aumenta drasticamente a preciso e dobra o dano final do ataque.","cost":"N/A","type":"HB"},{"name":"Acerto na Perna","description":"Causa IMOBILIZAO, impedindo movimentos por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Acerto na Mo","description":"Causa DESARME por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Mira Precisa","description":"Adiciona o atributo SORTE ao dano final do ataque.","cost":"N/A","type":"HB"},{"name":"Apago","description":"Causa CEGUEIRA, reduzindo severamente a chance de acerto do alvo por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Concentrao","description":"Aumenta a chance de acerto em todos os disparos de longa distncia.","cost":"N/A","type":"Passiva"}]},{"id":"esgrimista","name":"Esgrimista","type":"Bsica","role":"Duelista / Assassina de preciso","description":"Combatentes graciosas e letais, treinadas no uso refinado da rapieira.","bonus_class":{"VEL":3,"FOR":2},"requirements":[],"abilities":[{"name":"Picada Venenosa","description":"Causa dano e aplica VENENO ao alvo.","cost":"N/A","type":"HB"},{"name":"Voo da Andorinha","description":"Ataca todos os inimigos ao redor, podendo derrub-los.","cost":"N/A","type":"HB"},{"name":"Golpe Perfurante","description":"Estocada que atravessa o primeiro alvo e atinge um segundo atrs dele.","cost":"N/A","type":"HB"},{"name":"Golpe de Mana","description":"Causa dano e reduz o MP do inimigo.","cost":"N/A","type":"HB"},{"name":"Xeque-mate","description":"Inflige CONDENAO (morte aps 3 turnos).","cost":"N/A","type":"HB"},{"name":"Passos Leves","description":"Pode atravessar reas de gua rasa sem perder mobilidade.","cost":"N/A","type":"Passiva"}]},{"id":"curandeira","name":"Curandeira","type":"Bsica","role":"Suporte / Cura Natural","description":"Guardis da vida e das florestas, conectadas  energia da natureza para curar e proteger.","bonus_class":{"HP":3,"MP":2},"requirements":[],"abilities":[{"name":"Folha Serena","description":"Cura um aliado em 10 de HP.","cost":"8 MP","type":"Magia"},{"name":"Broto Purificador","description":"Remove um status negativo de um aliado.","cost":"18 MP","type":"Magia"},{"name":"Conexo Natural","description":"25% do dano recebido pelo aliado  transferido para a Curandeira por 3 turnos.","cost":"20 MP","type":"Magia"},{"name":"Vinhas Enlaantes","description":"Prende at 3 inimigos, impedindo movimento por 2 turnos.","cost":"24 MP","type":"Magia"},{"name":"Nvoa Vigorosa","description":"Cura leve em todos os aliados prximos (rea 3 blocos).","cost":"35 MP","type":"Magia"},{"name":"Refrigrio da Floresta","description":"30% de chance de conceder Resistncia Natural (+5 ARM ou +5 RES) ao curar.","cost":"N/A","type":"Passiva"}]},{"id":"exilado","name":"Exilado","type":"Bsica","role":"Lutador Adaptvel / Sobrevivente","description":"Viera masculinos banidos que aprenderam a sobreviver por conta prpria, adaptando-se a qualquer arma.","bonus_class":{"Livre":5},"requirements":[],"abilities":[{"name":"Tiro Preciso","description":"Disparo com preciso perfeita (usa SOR).","cost":"N/A","type":"HB (Arco)"},{"name":"Golpe Silencioso","description":"Causa DANO CRTICO automtico se o alvo estiver de costas.","cost":"N/A","type":"HB (Adaga)"},{"name":"Finta Desarmante","description":"Reduz o ATAQUE do inimigo por 2 turnos.","cost":"N/A","type":"HB (Espada)"},{"name":"Ruptura Selvagem","description":"Ignora a DEFESA do inimigo e causa dano elevado.","cost":"N/A","type":"HB (Espado)"},{"name":"Primeiros Socorros","description":"Cura 20% do HP a si mesmo ou aliado.","cost":"N/A","type":"HB"},{"name":"Adaptao de Combate","description":"Pode trocar a arma equipada 1 vez por turno sem custo de ao.","cost":"N/A","type":"Passiva"}]},{"id":"guerreiro","name":"Guerreiro","type":"Bsica","role":"Linha de Frente / Espancador","description":"Muralhas de msculo treinados para esmagar o inimigo com pura fora fsica.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Primeiro Socorro","description":"Trata os prprios ferimentos, restaurando 20% do HP.","cost":"N/A","type":"HB"},{"name":"Poder de Rend","description":"Reduz o ATAQUE do alvo.","cost":"N/A","type":"HB"},{"name":"Rend Magick","description":"Reduz a MAGIA do alvo.","cost":"N/A","type":"HB"},{"name":"Batida Corporal","description":"Investida causando dano FOR+CONS, volta 40% do dano a si mesmo.","cost":"N/A","type":"HB"},{"name":"Grito de Guerra","description":"Imobiliza o inimigo por 2 turnos e pode causar medo.","cost":"N/A","type":"HB"},{"name":"Monkey Grip","description":"Permite empunhar armas de duas mos com uma mo s.","cost":"N/A","type":"Passiva"}]},{"id":"monge","name":"Monge","type":"Bsica","role":"Linha de Frente / Espancador","description":"Lutadores que usam o ki e seus prprios corpos como armas letais.","bonus_class":{"FOR":3,"CONS":2},"requirements":[],"abilities":[{"name":"Onda Giratria","description":"Ataque giratrio que atinge todos ao redor em 1 bloco.","cost":"N/A","type":"HB"},{"name":"Pulso de Ar","description":"Soco com ki que causa dano e empurra o alvo 2 blocos.","cost":"N/A","type":"HB"},{"name":"Pulso de Terra","description":"Dano terrestre em linha reta (at 3 blocos).","cost":"N/A","type":"HB"},{"name":"Exploso de Ki","description":"Dano em rea de 2 blocos ao redor do monge.","cost":"N/A","type":"HB"},{"name":"Meditao","description":"Restaura 20% de HP e remove status negativos.","cost":"N/A","type":"HB"},{"name":"Reflexo","description":"50% de chance de desviar de ataques bsicos fsicos.","cost":"N/A","type":"Reao"}]},{"id":"animista","name":"Animista","type":"Bsica","role":"Suporte / Manipulador de Status","description":"Moogles que usam instrumentos e talentos imprevisveis para causar efeitos absurdos no campo.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"L Fofa","description":"Garante status 'Proteo' e 'Shell' por 3 turnos.","cost":"8 MP","type":"Magia"},{"name":"Erva de Gato","description":"Aplica 'BERSERK' no inimigo.","cost":"8 MP","type":"HB"},{"name":"Canto do Sapo","description":"Transforma o alvo em SAPO por 2 turnos.","cost":"22 MP","type":"Magia"},{"name":"Cozinhar","description":"Restaura 50% do HP do Alvo.","cost":"22 MP","type":"HB"},{"name":"Conte Ovelhinhas","description":"Faz todos os inimigos em pequena rea adormecerem.","cost":"15 MP","type":"Magia"},{"name":"Abanar o Rabo","description":"20% de chance de ENCANTAR o atacante quando alvejado.","cost":"N/A","type":"Reao"}]},{"id":"engenheiro","name":"Engenheiro","type":"Bsica","role":"Suporte Aleatrio / Caos Tecnolgico","description":"Gnios insanos que usam aparatos e mecanismos imprevisveis.","bonus_class":{"SOR":3,"INT":2},"requirements":[],"abilities":[{"name":"Box Vermelha","description":"Lana 'Haste' em uma unidade aleatria.","cost":"8 MP","type":"HB"},{"name":"Kit Azul","description":"Lana 'Dissipar' ao colidir com alvo aleatrio.","cost":"8 MP","type":"HB"},{"name":"Chaves Negras","description":"Aplica 'Condenao' em quem for atingido.","cost":"20 MP","type":"HB"},{"name":"Bateria Dourada","description":"Restaura 50% HP em uma unidade aleatria.","cost":"16 MP","type":"HB"},{"name":"Borrifador Verde","description":"Aplica VENENO em uma unidade aleatria na rea.","cost":"8 MP","type":"HB"},{"name":"Ajuste Rpido","description":"Permite reutilizar habilidade que falhou no turno seguinte sem custo de MP.","cost":"N/A","type":"Passiva"}]},{"id":"raptora","name":"Raptora","type":"Bsica","role":"Lutadora de Linha de Frente / Alta Mobilidade","description":"Guerreiras aladas que usam velocidade e instintos aguados para ataques rpidos.","bonus_class":{"FOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Ciclone","description":"Causa dano de vento em rea pequena.","cost":"N/A","type":"HB"},{"name":"Poder de Rend","description":"Reduz o ATAQUE do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Rend Magick","description":"Reduz a MAGIA do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Rend MP","description":"Diminui MP do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Redemoinho","description":"Lminas de vento causam dano e CONFUSO.","cost":"N/A","type":"HB"},{"name":"Salvaguarda","description":"Impede que a arma seja roubada ou destruda.","cost":"N/A","type":"Passiva"}]},{"id":"rastreadora","name":"Rastreadora","type":"Bsica","role":"Caadora / Suporte de Rastreio e Preciso","description":"Mestres da observao que leem o terreno e perseguem presas.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Sonic Boom","description":"Dano sonoro impossvel de desviar.","cost":"N/A","type":"HB"},{"name":"Expulsar","description":"Fora um monstro a fugir do combate.","cost":"N/A","type":"HB"},{"name":"Rastrear","description":"Marca um Monstro como 'presa', causando DANO DOBRADO.","cost":"N/A","type":"HB"},{"name":"Investigar","description":"Revela todas as informaes do alvo.","cost":"N/A","type":"HB"},{"name":"ltimo Tiro","description":"Alto dano com chance de infligir CONDENAO.","cost":"N/A","type":"HB"},{"name":"Sobrevivente","description":"Recebe REGEN quando estiver com 20% de HP ou menos.","cost":"N/A","type":"Passiva"}]},{"id":"espadachim","name":"Espadachim","type":"Bsica","role":"Lutador Verstil / Duelo & Tcnica","description":"Guerreiros disciplinados que combinam preciso fsica e poder mgico na lmina.","bonus_class":{"FOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Corte Cruzado","description":"Dano em rea frontal (arco) em at 3 inimigos.","cost":"N/A","type":"HB"},{"name":"Olhos no Duelo","description":"+25% de dano se enfrentar apenas um inimigo.","cost":"N/A","type":"HB"},{"name":"Corte Etreo","description":"Golpe mgico  distncia (FOR+INT).","cost":"10 MP","type":"HB"},{"name":"Passo Veloz","description":"Move-se para trs do inimigo com +50% de chance de crtico.","cost":"N/A","type":"HB"},{"name":"Trifria","description":"Combo de 3 ataques com chance de Sangramento.","cost":"N/A","type":"HB"},{"name":"Corte Reflexivo","description":"30% de chance de aparar projteis fsicos.","cost":"N/A","type":"Reao"}]},{"id":"ladra","name":"Ladra","type":"Bsica","role":"Furtividade / Roubo","description":"Mestras do furto e agilidade que roubam itens e gil em combate.","bonus_class":{"SOR":3,"CAR":2},"requirements":[],"abilities":[{"name":"Roubar Gil","description":"Tenta roubar dinheiro.","cost":"N/A","type":"HB"},{"name":"Roubar Item","description":"Tenta roubar um item.","cost":"N/A","type":"HB"},{"name":"Roubar Equipamento","description":"Tenta roubar o Equipamento do alvo.","cost":"N/A","type":"HB"},{"name":"Destrancar","description":"Pode destrancar portas ou bas.","cost":"N/A","type":"HB"},{"name":"Golpe Furtivo","description":"Dobro de dano se estiver Escondida.","cost":"N/A","type":"HB"},{"name":"Instinto Possessivo","description":"Evita roubo e tenta roubar a arma do ladro.","cost":"N/A","type":"Reao"}]},{"id":"espreitadora","name":"Espreitadora","type":"Bsica","role":"Furtividade / Infiltrao","description":"Especialistas em camuflagem e eliminao silenciosa.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Ataque Surpresa","description":"Crtico automtico se fora do campo de viso.","cost":"N/A","type":"HB"},{"name":"Rpida e Escondida","description":"Velocidade dobrada quando camuflada.","cost":"N/A","type":"Passiva"},{"name":"Manto Noturno","description":"Aumenta chance de camuflagem  noite.","cost":"N/A","type":"Passiva"},{"name":"Silncio","description":"Aplica Silncio por 3 turnos (apenas camuflada).","cost":"N/A","type":"HB"},{"name":"Derrubada Mortal","description":"Elimina instantaneamente alvo pelas costas (apenas camuflada).","cost":"N/A","type":"HB"},{"name":"Morte Silenciosa","description":"50% de chance de permanecer camuflada aps eliminar alvo.","cost":"N/A","type":"Passiva"}]},{"id":"adestrador","name":"Adestrador","type":"Bsica","role":"Controle de Criaturas / Suporte Ttico","description":"Especialistas em lidar com a vida selvagem, controlando monstros temporariamente.","bonus_class":{"CAR":5},"requirements":[],"abilities":[{"name":"Adestrar","description":"Controla um monstro por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Bater ou Correr","description":"Recebe Haste quando HP chega a 10%.","cost":"N/A","type":"Reao"}]},{"id":"escudeiro","name":"Escudeiro","type":"Bsica","role":"Defensor / Suporte com Itens","description":"Pilares de defesa que protegem aliados e usam itens de suporte.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Postura de Defesa","description":"Reduz pela metade o dano recebido at o prximo turno.","cost":"N/A","type":"HB"},{"name":"Apoio Vital","description":"Usa at 2 poes para curar aliados adjacentes.","cost":"N/A","type":"HB"},{"name":"Eu te Protejo!","description":"Salta no aliado que tomar dano e absorve o golpe.","cost":"N/A","type":"Reao"},{"name":"Lanamento Cuidadoso","description":"Arremessa item a at 3 blocos.","cost":"N/A","type":"HB"},{"name":"Grito Protetor","description":"Provoca inimigos forando ataque ao Escudeiro.","cost":"N/A","type":"HB"},{"name":"Reao Instintiva","description":"Usa poo automaticamente ao sofrer golpe com HP baixo.","cost":"N/A","type":"Reao"}]},{"id":"mago_negro","name":"Mago Negro","type":"Bsica","role":"Ofensivo Mgico / Controle Elemental","description":"Conjuradores que dominam a magia elemental destrutiva.","bonus_class":{"INT":3,"MP":2},"requirements":[],"abilities":[{"name":"Fire","description":"Esfera de fogo em rea (alvo + 1 casa cada lado).","cost":"10 MP","type":"Magia"},{"name":"Blizzard","description":"Fragmento congelante perfurante.","cost":"10 MP","type":"Magia"},{"name":"Thunder","description":"Raio direto sobre inimigo e adjacentes.","cost":"10 MP","type":"Magia"},{"name":"Aero","description":"Turbilho de vento em rea.","cost":"10 MP","type":"Magia"},{"name":"Telecinese","description":"Move objeto/unidade at 5 blocos.","cost":"10 MP","type":"Magia"},{"name":"Absorver Mana","description":"Absorve 20% do dano mgico recebido como Mana.","cost":"N/A","type":"Reao"}]},{"id":"ocultista","name":"Ocultista","type":"Bsica","role":"Mago das Sombras / Maldies","description":"Estudiosos do proibido que manipulam trevas e maldies.","bonus_class":{"MP":3,"INT":2},"requirements":[],"abilities":[{"name":"Escurido","description":"Dano mgico de trevas em rea.","cost":"10 MP","type":"Magia"},{"name":"Ritual da Condenao","description":"Aplica CONDENAO no alvo.","cost":"15 MP","type":"Magia"},{"name":"Barreira do Silncio","description":"Aplica SILNCIO no alvo.","cost":"15 MP","type":"Magia"},{"name":"Vu Cego","description":"Aplica CEGUEIRA no alvo.","cost":"15 MP","type":"Magia"},{"name":"Avada Mortis","description":"Tenta aplicar morte instantnea.","cost":"30 MP","type":"Magia"},{"name":"Olhar do Abismo","description":"Aumenta INT aps concluir maldio.","cost":"N/A","type":"Passiva"}]},{"id":"quimico_avancado","name":"Qumico Avanado","type":"Avanada","role":"Suporte / Manipulador de Itens","description":"Evoluo do Qumico, usa reaes elementares e poes ofensivas em rea.","bonus_class":{"SOR":4,"CAR":2},"requirements":["3 Habilidades Mestre em Qumico","+30 SOR"],"abilities":[{"name":"Criar Poo Avanada","description":"Cria poes de qualidade superior.","cost":"N/A","type":"HB"},{"name":"Arremesso Rpido","description":"Arremessa at 3 poes em um movimento.","cost":"N/A","type":"HB"},{"name":"Frasco Venenoso","description":"Libera veneno em rea.","cost":"N/A","type":"HB"},{"name":"Frasco Milagroso","description":"Remove todos status negativos.","cost":"N/A","type":"HB"},{"name":"Dose Grande","description":"Aumenta rea de efeito da poo.","cost":"N/A","type":"HB"},{"name":"Pr-Preparo","description":"Inicia combate com 2 poes prontas.","cost":"N/A","type":"Passiva"}]},{"id":"clerigo","name":"Clrigo","type":"Avanada","role":"Curandeiro de Linha de Frente","description":"Elo entre fora e f, luta na frente enquanto cura aliados.","bonus_class":{"CONS":4,"MANA":2},"requirements":["1 Habilidade Mestre em Soldado","2 Habilidades Mestre em Mago Branco","+20 FOR"],"abilities":[{"name":"Julgamento Divino","description":"Dano sagrado (FOR+Luz).","cost":"20 MP","type":"Magia"},{"name":"Palavras de F","description":"Concede Barreira e Shell.","cost":"15 MP","type":"Magia"},{"name":"Espurgar","description":"Expulsa monstros espirituais.","cost":"25 MP","type":"Magia"},{"name":"Martelo Giratrio","description":"Dano em rea ao redor (CONS+FOR+Luz).","cost":"30 MP","type":"HB"},{"name":"Ruptura Divina","description":"Exploso triangular de luz.","cost":"50 MP","type":"HB"},{"name":"Estou com Voc","description":"Cura auto 10% de aliado adjacente por turno.","cost":"N/A","type":"Passiva"}]},{"id":"alquimista","name":"Alquimista","type":"Avanada","role":"Suporte / Manipulador de Campo","description":"Molda o mundo convertendo solo e energia em poder.","bonus_class":{"INT":4,"MANA":2},"requirements":["2 Habilidades Mestre em Mago Branco","1 Habilidade Mestre em Qumico","+30 INT"],"abilities":[{"name":"Pilar de Pedra","description":"Pilar de rocha atinge inimigo (INT+Terra).","cost":"20 MP","type":"Magia"},{"name":"Canho de Pedra","description":"Projtil de rocha distante.","cost":"20 MP","type":"Magia"},{"name":"Correntes de Solo","description":"Imobiliza inimigo.","cost":"17 MP","type":"Magia"},{"name":"Transmutao Peridica","description":"Altera elemento natural de rea/objeto.","cost":"30 MP","type":"Magia"},{"name":"Golem de Pedra","description":"Cria golem controlvel.","cost":"50 MP","type":"Magia"},{"name":"Muro","description":"Bloqueia ataque com muro de pedra.","cost":"N/A","type":"Reao"}]},{"id":"duelista","name":"Duelista","type":"Avanada","role":"Lutador de Elite / Combate Singular","description":"pice do domnio da espada, focado em preciso e duelos.","bonus_class":{"FOR":4,"VEL":2},"requirements":["3 Habilidades Mestre em Espadachim","+30 FOR","+20 VEL"],"abilities":[{"name":"BackStep","description":"Salta 2 blocos para esquiva.","cost":"N/A","type":"HB"},{"name":"Eu Contra Voc","description":"+50% dano em alvo nico.","cost":"N/A","type":"HB"},{"name":"Chuva de Lminas","description":"Trs cortes de ar consecutivos.","cost":"N/A","type":"HB"},{"name":"Postura de Batalha","description":"Aumenta ataque fsico em 50%.","cost":"N/A","type":"HB"},{"name":"Grande Slash","description":"Golpe que percorre o campo todo.","cost":"N/A","type":"HB"},{"name":"Defesa Contnua","description":"Desvia golpe se FOR > inimigo.","cost":"N/A","type":"Reao"}]},{"id":"iluminista","name":"Iluminista","type":"Avanada","role":"Mago Supremo / Controlador Elemental Global","description":"Concentra energia para ataques globais ou curas totais.","bonus_class":{"INT":5,"MANA":5},"requirements":["5 Habilidades Mestre em Mago Branco","5 Habilidades Mestre em Mago Negro"],"abilities":[{"name":"Piromancia","description":"Dano global de Fogo aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Aquamancia","description":"Dano global de gua aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Raiomancia","description":"Dano global de Trovo aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Whitemancia","description":"Cura global 50% HP aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Tretamancia","description":"Plasma linear de ponta a ponta.","cost":"50 MP","type":"Magia"},{"name":"Ritual Seguro","description":"Ativa Barreira/Veloz ao ser alvejado conjurando.","cost":"N/A","type":"Reao"}]},{"id":"oppenheir","name":"Oppenheir","type":"Avanada","role":"Mestre Qumico / Manipulador da Destruio","description":"Alquimia levada ao limite de exploses e reaes em cadeia.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Qumico","5 Habilidades Mestre em Qumico Avanado"],"abilities":[{"name":"Reao Altrusta","description":"Exploso de cura e remoo de status.","cost":"N/A","type":"HB"},{"name":"Nuvem Txica","description":"Veneno em rea e reduz preciso.","cost":"N/A","type":"HB"},{"name":"Ignis Vitae","description":"Chamas conscientes perseguidoras.","cost":"N/A","type":"HB"},{"name":"Fragmento Celular","description":"Microexploso de dano massivo.","cost":"N/A","type":"HB"},{"name":"Bomba Atmica","description":"Exploso que elimina todos no campo (exceto cobertura).","cost":"N/A","type":"HB"},{"name":"Entropia Perfeita","description":"Chance de remover penalidades ao explodir.","cost":"N/A","type":"Passiva"}]},{"id":"eremita","name":"Eremita","type":"Avanada","role":"Tanque / Protetor Espiritual","description":"Sacerdote de batalha que converte dano em sacrifcio e proteo.","bonus_class":{"CONS":10},"requirements":["5 Habilidades Mestre em Clrigo","+100 CONS"],"abilities":[{"name":"F ao Meu Redor","description":"Aura cura 50% HP aliados prximos.","cost":"N/A","type":"HB"},{"name":"F do Sol","description":"Raio solar expurga mortos-vivos e queima.","cost":"N/A","type":"HB"},{"name":"F da Lua","description":"Cura 100% HP aliados prximos.","cost":"N/A","type":"HB"},{"name":"F do Ferro","description":"Concede Shell+ e Barreira+.","cost":"N/A","type":"HB"},{"name":"F do Brbaro","description":"Provoca inimigos e soma CONS ao dano.","cost":"N/A","type":"HB"},{"name":"Aquele que Me Protege","description":"Converte 20% do dano recebido em cura.","cost":"N/A","type":"Passiva"}]},{"id":"arquidenio","name":"Arquidnio","type":"Avanada","role":"Suporte / Manipulador de Probabilidades","description":"Mago matemtico que manipula valores e estatsticas de combate.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Alquimista","+100 INT"],"abilities":[{"name":"O Dobro","description":"Dobra qualquer valor por 1 turno.","cost":"50 MP","type":"Magia"},{"name":"Pela Metade","description":"Divide qualquer valor por 2.","cost":"50 MP","type":"Magia"},{"name":"100%","description":"Garante acerto absoluto.","cost":"70 MP","type":"Magia"},{"name":"0%","description":"Anula valor ou chance a 0.","cost":"70 MP","type":"Magia"},{"name":"Septania","description":"Multiplica valor por 7x.","cost":"100 MP","type":"Magia"},{"name":"Lgica Perfeita","description":"Resultado natural 20 uma vez por batalha.","cost":"N/A","type":"Passiva"}]},{"id":"samurai","name":"Samurai","type":"Avanada","role":"Ofensivo / Especialista em Duelo","description":"Guerreiro disciplinado que une velocidade e fora em cortes perfeitos.","bonus_class":{"FOR":5,"VEL":5},"requirements":["5 Habilidades Mestre em Espadachim","5 Habilidades Mestre em Duelista"],"abilities":[{"name":"Saque Rpido","description":"Duplica FOR e VEL por 1 turno.","cost":"N/A","type":"HB"},{"name":"Furaco da Folha","description":"Tornado de cortes em linha reta.","cost":"N/A","type":"HB"},{"name":"Olhos de Falco","description":"Soma FOR + SOR contra alvo.","cost":"N/A","type":"HB"},{"name":"Corte do Drago","description":"Golpe instantneo. 20 natural elimina alvo.","cost":"N/A","type":"HB"},{"name":"Cu Limpo","description":"Corte vertical colossal aps preparao.","cost":"N/A","type":"HB"},{"name":"Empunhadura Dupla","description":"Pode empunhar duas armas.","cost":"N/A","type":"Passiva"}]},{"id":"gladiador","name":"Gladiador","type":"Avanada","role":"Linha de Frente / Controle e Fora Bruta","description":"Colosso de arena que luta por glria e brutalidade.","bonus_class":{"FOR":4,"CONS":2},"requirements":["2 Habilidades Mestre em Guerreiro","+30 FOR"],"abilities":[{"name":"Grito Selvagem","description":"Aumenta FOR e provoca inimigos.","cost":"N/A","type":"HB"},{"name":"Investida de Escudo","description":"Dano de impacto com escudo.","cost":"N/A","type":"HB"},{"name":"Espancamento","description":"5 golpes consecutivos, pode imobilizar.","cost":"N/A","type":"HB"},{"name":"Espada Flamejante","description":"Causa Queimadura com ataques fsicos.","cost":"N/A","type":"HB"},{"name":"Postura de Luta","description":"Evita ataques e contra-ataca.","cost":"N/A","type":"HB"},{"name":"Escudeiro","description":"Pode usar escudos em qualquer classe.","cost":"N/A","type":"Passiva"}]},{"id":"artista_marcial","name":"Artista Marcial","type":"Avanada","role":"Linha de Frente / Especialista em Combos","description":"Especialista em golpes precisos e canalizao de fora vital.","bonus_class":{"VEL":4,"CONS":2},"requirements":["2 Habilidades Mestre em Monge","+30 VEL"],"abilities":[{"name":"Combo do Tigre","description":"3 golpes, dano aumenta a cada acerto.","cost":"N/A","type":"HB"},{"name":"Golpe Serpenteante","description":"Aproximao em zigue-zague e crtico.","cost":"N/A","type":"HB"},{"name":"Palma Sagrada","description":"Golpe de dano puro que ignora armadura.","cost":"N/A","type":"HB"},{"name":"Passo do Vento","description":"Teleporte curto e ataque surpresa.","cost":"N/A","type":"HB"},{"name":"Punhos do Drago","description":"5 golpes simultneos com chance de atordoar.","cost":"N/A","type":"HB"},{"name":"Esprito Indomvel","description":"Ganha FOR e VEL quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"lanceiro","name":"Lanceiro","type":"Avanada","role":"Ofensivo / Alcance e Preciso","description":"Predador de longo alcance com lanas.","bonus_class":{"VEL":4,"SOR":2},"requirements":["2 Habilidades Mestre em Guerreiro","+30 VEL"],"abilities":[{"name":"Ponta Longa","description":"Estende alcance para 4 blocos.","cost":"N/A","type":"HB"},{"name":"Dardo de Javali","description":"Arremessa a lana perfurando linha reta.","cost":"N/A","type":"HB"},{"name":"Jump","description":"Salta e cai sobre inimigo com dano alto.","cost":"N/A","type":"HB"},{"name":"Barreira de Cabo","description":"Empurra inimigos adjacentes.","cost":"N/A","type":"HB"},{"name":"Ponta Perfurante","description":"Golpe linear que perfura alvos.","cost":"N/A","type":"HB"},{"name":"Rpido como uma Lana","description":"Converte VEL em dano quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"lutador_de_rua","name":"Lutador de Rua","type":"Avanada","role":"Ofensivo / Anti-Honra","description":"Brigo desonesto que usa fora bruta e truques sujos.","bonus_class":{"Livre":6},"requirements":["2 Habilidades Mestre em Monge","1 Habilidade Mestre em outra classe"],"abilities":[{"name":"Vou te Arrebentar!","description":"+20% dano contra alvo marcado.","cost":"N/A","type":"HB"},{"name":"Lariat de Msculos","description":"Golpe de brao com chance de Atordoar.","cost":"N/A","type":"HB"},{"name":"Soco na Costela","description":"Finta e golpe crtico preciso.","cost":"N/A","type":"HB"},{"name":"Rasteira Malandra","description":"Aplica Imobilizado.","cost":"N/A","type":"HB"},{"name":"Sequncia de Raiva","description":"5 ataques e entra em Fria.","cost":"N/A","type":"HB"},{"name":"Covarde","description":"Dobra VEL para fugir quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"vinking","name":"Vinking","type":"Avanada","role":"Brbaro Mstico","description":"Guerreiro ancestral guiado por troves e fria divina.","bonus_class":{"FOR":4,"CONS":2},"requirements":["3 Habilidades Mestre em Gladiador","+50 FOR","+50 CONS"],"abilities":[{"name":"Marchar de Heimdall","description":"Dobra VEL prpria e de aliados.","cost":"N/A","type":"HB"},{"name":"Trovo de Thor","description":"Raio cai a distncia.","cost":"N/A","type":"HB"},{"name":"Confronto de Tyr","description":"Dobra FOR por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Ma de Iduna","description":"Recupera 80% HP e remove status.","cost":"N/A","type":"HB"},{"name":"Por Odin!","description":"Aumenta todos atributos por 1 turno.","cost":"N/A","type":"HB"},{"name":"At Valhalla","description":"Converte CONS em FOR quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"templario","name":"Templrio","type":"Avanada","role":"Mobilidade Extrema / Linha de Frente","description":"Soldado perfeito que domina o campo com lana e velocidade.","bonus_class":{"VEL":4,"CONS":2},"requirements":["3 Habilidades Mestre em Lanceiro","+50 VEL","+50 FOR"],"abilities":[{"name":"Salto Rpido","description":"Teleporte para qualquer parte do mapa.","cost":"N/A","type":"HB"},{"name":"Avano Perfurante","description":"Avano linear perfurante.","cost":"N/A","type":"HB"},{"name":"Dardos Perfurantes","description":"5 ataques em sequncia.","cost":"N/A","type":"HB"},{"name":"Lana Flamejante","description":"Adiciona Fogo aos ataques.","cost":"N/A","type":"HB"},{"name":"Dardo do Drago","description":"Arremesso perfurante em linha reta.","cost":"N/A","type":"HB"},{"name":"Lana Giratria","description":"Evita ataques  distncia.","cost":"N/A","type":"Reao"}]},{"id":"mestre_artes_marciais","name":"Mestre das Artes Marciais","type":"Avanada","role":"Duelista / Manipulador de Ki","description":"Harmonia total entre corpo e Ki.","bonus_class":{"CONS":4,"Livre":2},"requirements":["5 Habilidades Mestre em Monge","5 Habilidades Mestre em Artista Marcial"],"abilities":[{"name":"Dana do Carvalho Vermelho","description":"Combo de 5 golpes de vento.","cost":"N/A","type":"HB"},{"name":"Palma do Drago","description":"Ondas de ar  distncia.","cost":"N/A","type":"HB"},{"name":"Teken","description":"Dobra ARM e RES por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Dana do Sabugueiro Marrom","description":"Reduz ARM do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Dana do Esprito Branco","description":"Clone dobra aes por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Intuio de Ki","description":"Imune a surpresas.","cost":"N/A","type":"Passiva"}]},{"id":"brutamontes","name":"Brutamontes","type":"Avanada","role":"Tanque Ofensivo","description":"Muralha do submundo que protege e esmaga.","bonus_class":{"CAR":4,"SOR":2},"requirements":["5 Habilidades Mestre em Lutador de Rua","100 FOR"],"abilities":[{"name":"No Vai Passar","description":"Bloqueia avano inimigo e dobra defesa.","cost":"N/A","type":"HB"},{"name":"Lariat Duplo","description":"Arrasta inimigos adjacentes.","cost":"N/A","type":"HB"},{"name":"Emboscada","description":"Recupera HP e contra-ataca quem aproximar.","cost":"N/A","type":"HB"},{"name":"Pose do Brutamontes","description":"Salto esmagador com onda de choque.","cost":"N/A","type":"HB"},{"name":"Manda-Chuva","description":"Buffa aliados e debuffa inimigos em rea.","cost":"N/A","type":"HB"},{"name":"Fraco Demais","description":"Nega dano menor que sua FOR.","cost":"N/A","type":"Passiva"}]},{"id":"cavaleiro_dragao","name":"Cavaleiro Drago","type":"Avanada","role":"Caador de Drages / Ofensivo Elemental","description":"Guerreiros que usam poderes de drago.","bonus_class":{"CONS":5,"BonusDanoDragao":"20%"},"requirements":["Eliminar um Drago"],"abilities":[{"name":"Bafo do Drago Vermelho","description":"Fogo em rea triangular.","cost":"N/A","type":"HB"},{"name":"Garras do Drago Ciano","description":"Golpe de gelo com avano.","cost":"N/A","type":"HB"},{"name":"Salto do Drago Amarelo","description":"Salto eltrico (1 turno no ar).","cost":"N/A","type":"HB"},{"name":"Beno do Drago Azul","description":"Cura 50% HP.","cost":"N/A","type":"HB"},{"name":"Energia do Drago Branco","description":"Raio de luz linear.","cost":"N/A","type":"HB"},{"name":"Aura de Drago","description":"Monstros fracos sentem medo.","cost":"N/A","type":"Passiva"}]},{"id":"dragonslayer","name":"Dragonslayer","type":"Avanada","role":"Anti-Drago / Executador","description":"Arma final contra drages, capaz de subjugar feras colossais.","bonus_class":{"FOR":6,"BonusDanoDragao":"60%"},"requirements":["5 Habilidades Mestre em Cavaleiro Drago"],"abilities":[{"name":"Sopro do Drago Esmeralda","description":"Nuvem txica em rea.","cost":"N/A","type":"HB"},{"name":"Rasante do Drago Prateado","description":"Rasante de vento linear mapa todo.","cost":"N/A","type":"HB"},{"name":"Escamas do Drago Ouro","description":"Dobra ARM e RES.","cost":"N/A","type":"HB"},{"name":"Tremor do Drago de Bronze","description":"Estacas de pedra e tremor.","cost":"N/A","type":"HB"},{"name":"Ameaa do Drago Negro","description":"Miasma negra aplica Condenao.","cost":"N/A","type":"HB"},{"name":"Escamas Elementais","description":"Absorve dano elemental convertendo em CONS.","cost":"N/A","type":"Passiva"}]},{"id":"xama","name":"Xam","type":"Avanada","role":"Debuff / Manipulador de Caos","description":"Lida com foras ocultas e ancestrais dos pntanos.","bonus_class":{"MANA":3,"CONS":2},"requirements":["2 Habilidades Mestre em Curandeiro","+30 MANA"],"abilities":[{"name":"Xabala Cegaris","description":"Cega alvo por 5 turnos.","cost":"15 MP","type":"Magia"},{"name":"Ziriki Sileci","description":"Silencia alvo por 5 turnos.","cost":"15 MP","type":"Magia"},{"name":"Urucubaca","description":"Aplica Envenenamento.","cost":"20 MP","type":"Magia"},{"name":"Ianhamaj","description":"Imobiliza alvo por 5 turnos.","cost":"20 MP","type":"Magia"},{"name":"Zakarinhad","description":"Aplica Condenao.","cost":"30 MP","type":"Magia"},{"name":"Oshala","description":"Imune a status negativos.","cost":"N/A","type":"Passiva"}]},{"id":"monge_do_pantano","name":"Monge do Pntano","type":"Avanada","role":"Lutador de Terreno / Porradeiro","description":"Canaliza a densidade do pntano em golpes pesados.","bonus_class":{"CONS":3,"FOR":2},"requirements":["1 Habilidade Mestre em Curandeiro","1 Habilidade Mestre em Escudeiro","+20 FOR"],"abilities":[{"name":"Soco do Pntano","description":"Golpe aqutico carregado.","cost":"N/A","type":"HB"},{"name":"Barrigada","description":"Esmaga e empurra.","cost":"N/A","type":"HB"},{"name":"Vu do Pntano","description":"Dobra RES por 3 turnos.","cost":"N/A","type":"HB"},{"name":"Abrao do Pntano","description":"Agarro esmagador.","cost":"N/A","type":"HB"},{"name":"Boxe do Pntano","description":"3 golpes consecutivos pantanosos.","cost":"N/A","type":"HB"},{"name":"gua Est Comigo","description":"Dobra dano em terreno de gua.","cost":"N/A","type":"Passiva"}]},{"id":"glutao","name":"Gluto","type":"Avanada","role":"Tank / Absorvedor de Dano","description":"Foras da natureza famintas e indestrutveis.","bonus_class":{"CONS":5},"requirements":["1 Habilidade Mestre em Curandeiro","1 Habilidade Mestre em Escudeiro","+20 CONS"],"abilities":[{"name":"Investida do Sapo","description":"Atropela em linha reta.","cost":"N/A","type":"HB"},{"name":"Descanso do Sapo","description":"Cura e dobra defesa (imvel).","cost":"N/A","type":"HB"},{"name":"Arroto do Sapo","description":"Dano de impacto sonoro.","cost":"N/A","type":"HB"},{"name":"Pulo do Sapo","description":"Esmaga alvo com peso.","cost":"N/A","type":"HB"},{"name":"Vou Te Comer","description":"Devora inimigo com 25% HP ou menos.","cost":"N/A","type":"HB"},{"name":"Boca Sempre Mexendo","description":"Recupera 10% HP se no agir.","cost":"N/A","type":"Passiva"}]},{"id":"protetor","name":"Protetor","type":"Avanada","role":"Tank / Guardio de Campo","description":"Muralhas vivas dedicadas a proteger aliados.","bonus_class":{"CONS":5},"requirements":["2 Habilidades Mestre em Escudeiro","+30 CONS"],"abilities":[{"name":"Eu Tanko, Voc Mata","description":"Absorve 80% do dano de aliado e buffa FOR dele.","cost":"N/A","type":"HB"},{"name":"Investida do Escudo","description":"Corre com escudo e atordoa.","cost":"N/A","type":"HB"},{"name":"Reflexo do Escudo","description":"Escudo ricocheteia em inimigos.","cost":"N/A","type":"HB"},{"name":"Sapo Protetor","description":"Compartilha defesa com aliados ao redor.","cost":"N/A","type":"HB"},{"name":"Escudo de Proteo Areo","description":"Anula prximo dano em aliado.","cost":"N/A","type":"HB"},{"name":"Socorros Rpidos","description":"Salta para tomar golpe por aliado.","cost":"N/A","type":"Reao"}]},{"id":"pai_do_pantano","name":"Pai do Pntano","type":"Avanada","role":"Mago de Terreno / Controle","description":"Tornou-se um com o pntano, controlando razes e mars.","bonus_class":{"MANA":6},"requirements":["5 Habilidades Mestre em Xam","5 Habilidades Mestre em Curandeiro"],"abilities":[{"name":"Razes do Sabugueiro de Ihoa","description":"Imobiliza inimigos em rea.","cost":"50 MP","type":"Magia"},{"name":"Pico dos Pinheiros","description":"Pinheiros empalam inimigos.","cost":"50 MP","type":"Magia"},{"name":"Gota de Orvalho","description":"Cura 100% HP e remove status (rea).","cost":"50 MP","type":"Magia"},{"name":"Primavera Serena","description":"Dobra INT e RES de aliados.","cost":"40 MP","type":"Magia"},{"name":"Mar do Mangue","description":"Empurra inimigos, remove buffs e cura aliados (global).","cost":"100 MP","type":"Magia"},{"name":"Floresta Viva","description":"Razes prendem inimigos engajados.","cost":"N/A","type":"Passiva"}]},{"id":"sabio_do_pantano","name":"Sbio do Pntano","type":"Avanada","role":"Controle de gua / Contra-Golpe","description":"Domina a energia viva do pntano com constituio colossal.","bonus_class":{"CONS":6},"requirements":["5 Habilidades Mestre em Monge do Pntano","+100 CONS"],"abilities":[{"name":"Punho do Pntano","description":"Ataques ganham elemento gua.","cost":"N/A","type":"Passiva"},{"name":"Serpente do Pntano","description":"Ataque linear de gua.","cost":"N/A","type":"HB"},{"name":"AquaReflete","description":"Esfera de gua empurra alvo.","cost":"N/A","type":"HB"},{"name":"Pantanogan","description":"Esfera de gua empurra alvo.","cost":"N/A","type":"HB"},{"name":"Bola de Canho","description":"Projtil vivo de dano massivo.","cost":"N/A","type":"HB"},{"name":"Contra-Corpo","description":"Contra-ataca fsico e empurra.","cost":"N/A","type":"Reao"}]},{"id":"burgues_do_pantano","name":"Burgus do Pntano","type":"Avanada","role":"Tanque / Controle","description":"Suprema ganncia, usa corpo colossal e autoridade.","bonus_class":{"CONS":6},"requirements":["5 Habilidades Mestre em Gluto","+100 CONS"],"abilities":[{"name":"Imposto do Pntano","description":"Rouba 20% HP do alvo e remove buff.","cost":"N/A","type":"HB"},{"name":"Barriga Monrquica","description":"Dobra defesa e bloqueia passagem.","cost":"N/A","type":"HB"},{"name":"Banquete Exclusivo","description":"Cura 100% HP e ganha Fria.","cost":"N/A","type":"HB"},{"name":"Tesouro do Pntano","description":"Exploso de cofre.","cost":"N/A","type":"HB"},{"name":"Decreto de Propriedade","description":"Debuffa inimigos e buffa aliados em rea.","cost":"N/A","type":"HB"},{"name":"Soberania do Pntano","description":"Cura ao aproximar inimigo e aplica Lentido.","cost":"N/A","type":"Passiva"}]},{"id":"guardiao_do_pantano","name":"Guardio do Pntano","type":"Avanada","role":"Tanque / Suporte Supremo","description":"Monlito vivo que ergue muralhas de escudos.","bonus_class":{"CONS":10},"requirements":["5 Habilidades Mestre em Escudeiro","5 Habilidades Mestre em Protetor"],"abilities":[{"name":"Priso de Escudo","description":"Prende alvo em 4 escudos.","cost":"N/A","type":"HB"},{"name":"Dobro de Escudo","description":"Dobra qualquer escudo em jogo.","cost":"N/A","type":"HB"},{"name":"Grande Escudo","description":"Protege rea enorme atrs dele.","cost":"N/A","type":"HB"},{"name":"Escudo Revitalizador","description":"Cura 100% HP rea.","cost":"N/A","type":"HB"},{"name":"Proteo em Grande Escala","description":"Anula prximo dano em TODOS aliados.","cost":"N/A","type":"HB"},{"name":"Proteo Mgica","description":"Usa habilidade de proteo em aliado alvejado.","cost":"N/A","type":"Reao"}]},{"id":"cantor_das_mares","name":"Cantor das Mars","type":"Avanada","role":"Suporte / Buffer Musical","description":"Bardos que usam melodias espirituais.","bonus_class":{"CAR":5},"requirements":["+50 CAR"],"abilities":[{"name":"Cantar","description":"Executa msica do repertrio (efeitos variados).","cost":"N/A","type":"HB"},{"name":"Palco Improvisado","description":"Dobro de efeito se estiver em terreno elevado.","cost":"N/A","type":"Passiva"}]},{"id":"astro_do_pantano","name":"Astro do Pntano","type":"Avanada","role":"Suporte Musical / Manipulador de Moral","description":"cone musical que move multides.","bonus_class":{"CAR":10},"requirements":["Ttulo musical com Cantor das Mars"],"abilities":[{"name":"Mashup","description":"Combina duas msicas simultneas.","cost":"N/A","type":"HB"},{"name":"Charme Musical","description":"Enfeitia atacante.","cost":"N/A","type":"Reao"}]},{"id":"sutileira","name":"Sutileira","type":"Avanada","role":"Roubo de Elite / Suporte Social","description":"Ladras de alta classe, elegantes e imperceptveis.","bonus_class":{"CAR":3,"SOR":2},"requirements":["2 Habilidades Mestre em Ladra","+20 SOR"],"abilities":[{"name":"Roubar Arma Principal","description":"Furta a arma equipada do alvo.","cost":"N/A","type":"HB"},{"name":"Roubar Acessrios","description":"Furta anis/colares.","cost":"N/A","type":"HB"},{"name":"Roubar Item de Luxo","description":"Furta item mais raro.","cost":"N/A","type":"HB"},{"name":"Detectar Armadilhas","description":"Percebe armadilhas em raio de 5 blocos.","cost":"N/A","type":"HB"},{"name":"Famme Fatale","description":"Encanta alvo e pode aplicar Condenao.","cost":"N/A","type":"HB"},{"name":"Mestre dos Assaltos","description":"No ativa armadilhas.","cost":"N/A","type":"Passiva"}]},{"id":"rastreadora_avancada","name":"Rastreadora (Avanada)","type":"Avanada","role":"Dano / Furtividade / Controle","description":"Felinas letais que unem furtividade com caa predatria.","bonus_class":{"SOR":3,"VEL":2},"requirements":["2 Habilidades Mestre em Espreitadora","+20 VEL"],"abilities":[{"name":"Cheiro do Medo","description":"Dobra MOV na direo do alvo.","cost":"N/A","type":"HB"},{"name":"Detectar Fraqueza","description":"Prximo ataque soma SOR ao dano.","cost":"N/A","type":"HB"},{"name":"Colocar Armadilhas","description":"Instala armadilha no campo.","cost":"N/A","type":"HB"},{"name":"Salto da Morte","description":"Ataque de cima com bnus de SOR.","cost":"N/A","type":"HB"},{"name":"Morte em Sequncia","description":"Golpe linear em todos no trajeto.","cost":"N/A","type":"HB"},{"name":"Contra Ataque","description":"Contra-ataca fsico adjacente.","cost":"N/A","type":"Reao"}]},{"id":"kunoichi","name":"Kunoichi","type":"Avanada","role":"Ninjutsu / Controle Elemental","description":"Assassinas discretas que usam iluses e ninjutsu.","bonus_class":{"INT":3,"SOR":2},"requirements":["2 Habilidades Mestre em Ladra","2 Habilidades Mestre em Espreitadora"],"abilities":[{"name":"Arremesso de Kunai","description":"Kunai amplificada com INT.","cost":"N/A","type":"HB"},{"name":"Bomba de Fumaa","description":"Fica camuflada instantaneamente.","cost":"N/A","type":"HB"},{"name":"Genjutsu","description":"Iluso causa Confuso.","cost":"25 MP","type":"Magia"},{"name":"Suiton","description":"Vrtice de gua (INT+gua).","cost":"30 MP","type":"Magia"},{"name":"Doton","description":"Pilar de terra (INT+Terra).","cost":"30 MP","type":"Magia"},{"name":"Clone das Sombras","description":"Clone repete ninjutsu.","cost":"N/A","type":"Passiva"}]},{"id":"chefona","name":"Chefona","type":"Avanada","role":"DPS / Suporte Criminoso","description":"Mandachuva do crime que usa pistolas e capangas.","bonus_class":{"SOR":6},"requirements":["5 Habilidades Mestre em Ladra","5 Habilidades Mestre em Sutileira","+100 SOR"],"abilities":[{"name":"Paredo","description":"Saraivada de balas em alvo.","cost":"N/A","type":"HB"},{"name":"Tiroteio","description":"Tiros em rea ao redor.","cost":"N/A","type":"HB"},{"name":"Estragar o Velrio","description":"Tiro na cabea (morte instantnea) se camuflada.","cost":"N/A","type":"HB"},{"name":"Bora Rapaziada","description":"Buffa MOV e VEL de aliados.","cost":"N/A","type":"HB"},{"name":"Meus Capangas","description":"Invoca 2 capangas.","cost":"N/A","type":"HB"},{"name":"Dois Ferros","description":"Pode usar duas armas de fogo.","cost":"N/A","type":"Passiva"}]},{"id":"assassina","name":"Assassina","type":"Avanada","role":"Eliminadora de Alvos","description":"Lenda das sombras, elimina alvos silenciosamente.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Espreitadora","5 Habilidades Mestre em Rastreadora","+100 SOR"],"abilities":[{"name":"Lmina de Veneno","description":"Ataques causam Envenenamento.","cost":"N/A","type":"HB"},{"name":"Sombras Caminhantes","description":"Teleporte via sombras.","cost":"N/A","type":"HB"},{"name":"Tendes Frgeis","description":"Aplica Imobilizado.","cost":"N/A","type":"HB"},{"name":"Instinto Assassino","description":"Causa Medo em alvos com <20% HP.","cost":"N/A","type":"Passiva"},{"name":"Frenesi das Sombras","description":"Fria de sombra, dobra VEL.","cost":"N/A","type":"HB"},{"name":"Minha Garrucha","description":"Finaliza alvo com <15% HP.","cost":"N/A","type":"Reao"}]},{"id":"jounin","name":"Jounin","type":"Avanada","role":"Mestre Elemental / Ttico","description":"Elite ninja que domina ninjutsu avanado.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Kunoichi","+100 INT"],"abilities":[{"name":"Futon","description":"5 lminas de ar em alvos diversos.","cost":"50 MP","type":"Magia"},{"name":"Raiton","description":"5 troves em alvos diversos.","cost":"50 MP","type":"Magia"},{"name":"Katon","description":"Esfera de fogo linear larga.","cost":"50 MP","type":"Magia"},{"name":"Embuir Arma","description":"Infunde arma com elemento.","cost":"30 MP","type":"Magia"},{"name":"Invocao","description":"Invoca animal ninja (D20).","cost":"N/A","type":"HB"},{"name":"Substituio","description":"Troca com tronco ao ser alvejada.","cost":"N/A","type":"Reao"}]},{"id":"dancarina","name":"Danarina","type":"Avanada","role":"Performer Mstica","description":"Transforma o campo em palco com performances mgicas.","bonus_class":{"CAR":5},"requirements":["+50 CAR"],"abilities":[{"name":"Danar","description":"Executa performance ligada ao equipamento.","cost":"N/A","type":"HB"},{"name":"Pirueta Defensiva","description":"Chance de esquivar de ataque fsico.","cost":"N/A","type":"Reao"}]},{"id":"odalisca_de_batalha","name":"Odalisca de Batalha","type":"Avanada","role":"Suporte Supremo / DPS Elegante","description":"Danarina de elite com armas exticas e danas agressivas.","bonus_class":{"CAR":10},"requirements":["4 Performances de Danarina"],"abilities":[{"name":"Swicth","description":"Troca equipamento de dana sem gastar ao.","cost":"N/A","type":"HB"},{"name":"Mestre da Dana","description":"Equipa dois instrumentos simultneos.","cost":"N/A","type":"Passiva"}]},{"id":"cavaleira_alada","name":"Cavaleira Alada","type":"Avanada","role":"Duelista Area","description":"Elite militar do cu, mergulha com velocidade devastadora.","bonus_class":{"FOR":3,"VEL":2},"requirements":["3 Habilidades Mestre em Raptora","+30 FOR"],"abilities":[{"name":"Por Glria","description":"Buffa FOR de aliados.","cost":"N/A","type":"HB"},{"name":"Redemoinho de Lmina","description":"Corte circular de vento.","cost":"N/A","type":"HB"},{"name":"Brisa da Guerra","description":"Ataques ganham lmina de vento extra.","cost":"N/A","type":"HB"},{"name":"Slash de Vento","description":"Lmina de ar  distncia.","cost":"N/A","type":"HB"},{"name":"Suplex Aero","description":"Agarra e arremessa inimigo do cu.","cost":"N/A","type":"HB"},{"name":"Escudo Meu","description":"Pode usar escudos.","cost":"N/A","type":"Passiva"}]},{"id":"cacadora_alada","name":"Caadora Alada","type":"Avanada","role":"DPS / Rastreio","description":"Predadora do cu com viso aguada e arco.","bonus_class":{"VEL":3,"SOR":2},"requirements":["3 Habilidades Mestre em Ranged","+30 VEL"],"abilities":[{"name":"Animal Guia","description":"Invoca esprito animal companheiro.","cost":"N/A","type":"HB"},{"name":"Camuflagem","description":"Entra em camuflagem.","cost":"N/A","type":"HB"},{"name":"Saraivada Area","description":"Chuva de flechas em rea.","cost":"N/A","type":"HB"},{"name":"Colocar Armadilhas","description":"Posiciona armadilha.","cost":"N/A","type":"HB"},{"name":"Tiro Avanado","description":"Flecha colossal linear (Arco Grande).","cost":"N/A","type":"HB"},{"name":"Tiro Duplo","description":"Dispara duas flechas por ataque.","cost":"N/A","type":"Passiva"}]},{"id":"terrana","name":"Terrana","type":"Avanada","role":"Lutadora Arcana / Terra","description":"Devotada  fora bruta da terra, usa martelos e magia.","bonus_class":{"INT":3,"MANA":2},"requirements":["1 Habilidade Mestre em Raptora","1 Habilidade Mestre em Ranged","+30 INT"],"abilities":[{"name":"Me Terra","description":"Cura em rea ao bater martelo.","cost":"20 MP","type":"Magia"},{"name":"Fissura Terrana","description":"Cria fissura no solo.","cost":"30 MP","type":"Magia"},{"name":"A Terra Sobre Mim","description":"Armadura de rocha (dobra AMR/RES).","cost":"20 MP","type":"Magia"},{"name":"Pilar do Martelo","description":"Ataque  distncia com pilar.","cost":"40 MP","type":"Magia"},{"name":"Terremoto Aero","description":"Impacto ssmico ao saltar.","cost":"50 MP","type":"Magia"},{"name":"Vibrao do Solo","description":"Detecta inimigos no solo.","cost":"N/A","type":"Passiva"}]},{"id":"devastadora","name":"Devastadora","type":"Avanada","role":"Dano Areo / Linha de Frente","description":"Especialista em combate areo com espades colossais.","bonus_class":{"FOR":4,"VEL":2},"requirements":["5 Habilidades Mestre em Raptora","5 Habilidades Mestre em Cavaleira Alada","+100 FOR"],"abilities":[{"name":"Ventania do Espado","description":"Empurra alvos com vento.","cost":"N/A","type":"HB"},{"name":"Arrasante Cortante","description":"Corte em alta velocidade.","cost":"N/A","type":"HB"},{"name":"Furaco de Lminas","description":"Tornado de lminas em rea.","cost":"N/A","type":"HB"},{"name":"Rpida e Veloz","description":"Dobra VEL.","cost":"N/A","type":"HB"},{"name":"Corte da Montanha","description":"Corte colossal de vento.","cost":"N/A","type":"HB"},{"name":"Contra-ataque do Vento","description":"Rebate fsico e empurra.","cost":"N/A","type":"Reao"}]},{"id":"atiradora_dos_ceus","name":"Atiradora dos Cus","type":"Avanada","role":"DPS Area","description":"Caadora suprema que domina territrios do ar.","bonus_class":{"VEL":4,"SOR":2},"requirements":["5 Habilidades Mestre em Ranged","5 Habilidades Mestre em Caadora Alada","+100 VEL"],"abilities":[{"name":"Ataque Areo","description":"Disparo vertical preciso.","cost":"N/A","type":"HB"},{"name":"Reposicionamento Areo","description":"Voo rpido e ataque.","cost":"N/A","type":"HB"},{"name":"Bombardeio Areo","description":"Atinge inimigos no trajeto de voo.","cost":"N/A","type":"HB"},{"name":"Alvo Marcado","description":"Marca alvo adicionando SOR ao dano.","cost":"N/A","type":"HB"},{"name":"Alvos Certeiros","description":"Tiros perfeitos em 5 alvos.","cost":"N/A","type":"HB"},{"name":"Minha Flecha  Melhor","description":"Desvia de projtil e contra-ataca.","cost":"N/A","type":"Reao"}]},{"id":"geomancer","name":"Geomancer","type":"Avanada","role":"Maga Elemental / Joias","description":"Maga que desperta poder oculto de joias antigas.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Terrana","+100 INT"],"abilities":[{"name":"Ressonncia","description":"Disparo elemental da joia.","cost":"30 MP","type":"Magia"},{"name":"Jia Equipada","description":"Engata joia na arma (dano elemental).","cost":"N/A","type":"HB"},{"name":"Joia Astral","description":"Buff poderoso da joia.","cost":"30 MP","type":"Magia"},{"name":"Sacrifcio da Jia","description":"Destri joia para duplicar efeito.","cost":"40 MP","type":"Magia"},{"name":"Triplo Gen","description":"Feixe combinado de 3 joias.","cost":"70 MP","type":"Magia"},{"name":"Joalheira","description":"Troca de joias sem gastar ao.","cost":"N/A","type":"Passiva"}]},{"id":"demon","name":"Demon","type":"Avanada","role":"Ameaa / Controle","description":"Guerreiras marcadas pela morte, brutais e imprevisveis.","bonus_class":{"Livre":5},"requirements":["Voltar da morte 10 vezes"],"abilities":[{"name":"Rugido do Demnio","description":"Aplica Medo em rea.","cost":"N/A","type":"HB"},{"name":"Vampirismo","description":"Rouba HP do alvo.","cost":"N/A","type":"HB"},{"name":"Consumir Arma","description":"Destri arma para ganhar status.","cost":"N/A","type":"HB"},{"name":"Embuir Demon","description":"Infunde arma com escurido.","cost":"N/A","type":"HB"},{"name":"Demon Ark","description":"Aplica Medo/Condenao/Morte.","cost":"N/A","type":"HB"},{"name":"Mestre de Armas","description":"Equipa arma instantaneamente.","cost":"N/A","type":"Passiva"}]},{"id":"lord_demon","name":"Lord Demon","type":"Avanada","role":"Senhora da Morte","description":"pice da linhagem demonaca, comanda almas.","bonus_class":{"Livre":10},"requirements":["5 Habilidades Mestre em Demon","Colher 100 almas"],"abilities":[{"name":"Dark Esfera","description":"Absorve alma de inimigos com Medo.","cost":"N/A","type":"HB"},{"name":"Colheita","description":"Suga alma de alvo com Medo (Morte).","cost":"N/A","type":"HB"},{"name":"Aura da Lord","description":"Dobra RES e fora Medo.","cost":"N/A","type":"HB"},{"name":"Dark Arma","description":"Lana armas sacrificadas.","cost":"N/A","type":"HB"},{"name":"ltimo Rugido","description":"Medo global e morte em quem j tem.","cost":"N/A","type":"HB"},{"name":"Tenha Medo de Mim","description":"Chance de aplicar Medo ao receber dano.","cost":"N/A","type":"Reao"}]},{"id":"magos_elementais","name":"Magos Elementais","type":"Avanada","role":"DPS Mgico de rea","description":"Umbros que transformam magia em cataclismos.","bonus_class":{"INT":3,"MANA":2},"requirements":["3 Habilidades Mestre em Mago Negro","+30 INT"],"abilities":[{"name":"Fire+","description":"Exploso de fogo grande rea.","cost":"20 MP","type":"Magia"},{"name":"Blizzard+","description":"Estilhaos de gelo grande rea.","cost":"20 MP","type":"Magia"},{"name":"Thunder+","description":"Trovo colossal em rea.","cost":"20 MP","type":"Magia"},{"name":"Maremoto","description":"Onda empurra inimigos.","cost":"40 MP","type":"Magia"},{"name":"Trifsico","description":"Combina 3 elementos em exploso.","cost":"50 MP","type":"Magia"},{"name":"Manto Refletor","description":"Reflete magia com 50% dano.","cost":"N/A","type":"Reao"}]},{"id":"arcanistas","name":"Arcanistas","type":"Avanada","role":"Maldies / Invocador","description":"Preservam artes proibidas e invocam demnios.","bonus_class":{"MANA":3,"INT":2},"requirements":["3 Habilidades Mestre em Ocultista","+50 MANA"],"abilities":[{"name":"Escurido+","description":"Exploso de trevas.","cost":"25 MP","type":"Magia"},{"name":"Cruz Mana","description":"Drena Mana.","cost":"30 MP","type":"Magia"},{"name":"Sentidus Mortis","description":"Remove sentidos (Silncio/Cegueira).","cost":"40 MP","type":"Magia"},{"name":"Petrificatis","description":"Petrifica alvo.","cost":"40 MP","type":"Magia"},{"name":"Invocar Demnio Menor","description":"Invoca demnio (D20).","cost":"50 MP","type":"Magia"},{"name":"Pacto","description":"Dobra VEL e RES com demnio ativo.","cost":"N/A","type":"Passiva"}]},{"id":"malandro","name":"Malandro","type":"Avanada","role":"Suporte Social / Manipulao","description":"Usa lbia e cartas para manipular o campo.","bonus_class":{"CAR":3,"SOR":2},"requirements":["+20 CAR"],"abilities":[{"name":"Fala Positiva","description":"Dobra atributo de alvo.","cost":"N/A","type":"HB"},{"name":"Fala Negativa","description":"Reduz atributo pela metade.","cost":"N/A","type":"HB"},{"name":"Carta Voadora","description":"Carta ricocheteia em alvos.","cost":"N/A","type":"HB"},{"name":"Carta Marcada","description":"Dobra dano recebido pelo alvo.","cost":"N/A","type":"HB"},{"name":"Malabarismo de Cartas","description":"Impede movimentos em rea.","cost":"N/A","type":"HB"},{"name":"Fala Mansa","description":"Chance de convencer atacante a desistir.","cost":"N/A","type":"Reao"}]},{"id":"arquimagos","name":"Arquimagos","type":"Avanada","role":"DPS Mgico Supremo","description":"Moldam elementos, invocando meteoros e tempestades.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Mago Negro","5 Habilidades Mestre em Mago Elemental","+100 INT"],"abilities":[{"name":"Meteoro","description":"Destruio massiva em rea.","cost":"100 MP","type":"Magia"},{"name":"Vrtex de Fogo","description":"Vrtex que queima rea por turnos.","cost":"50 MP","type":"Magia"},{"name":"Chuva de Raios","description":"Atinge inimigos aleatrios por turnos.","cost":"50 MP","type":"Magia"},{"name":"Nevasca Afiada","description":"Estalactites aleatrias por turnos.","cost":"50 MP","type":"Magia"},{"name":"Super Lua","description":"Lua cura aliados e permanece.","cost":"80 MP","type":"Magia"},{"name":"OVER LUNA","description":"Ignora RES sob efeito da Lua.","cost":"N/A","type":"Passiva"}]},{"id":"necromago","name":"Necromago","type":"Avanada","role":"Controle Absoluto / Necromancia","description":"Traz mortos e usa rituais profanos.","bonus_class":{"MANA":10},"requirements":["5 Habilidades Mestre em Ocultista","5 Habilidades Mestre em Arcanista","+100 INT"],"abilities":[{"name":"Necromancia","description":"Controla alma cada.","cost":"70 MP","type":"Magia"},{"name":"Mortis Dorner","description":"Tenta Morte Instantnea.","cost":"40 MP","type":"Magia"},{"name":"Redoma Sentis","description":"Cega e Silencia rea ao redor.","cost":"50 MP","type":"Magia"},{"name":"Invocar Demnio Superior","description":"Invoca demnio brutal (D20).","cost":"90 MP","type":"Magia"},{"name":"Buraco Negro","description":"Remove todos do campo.","cost":"200 MP","type":"Magia"},{"name":"Toque da Morte","description":"Chance de Condenao ao ser atacado.","cost":"N/A","type":"Reao"}]},{"id":"king_street","name":"King Street","type":"Avanada","role":"Controle Mental / Dominao Social","description":"Rei das ruas que controla vontades com a voz.","bonus_class":{"CAR":10},"requirements":["5 Habilidades Mestre em Malandro","+100 CAR"],"abilities":[{"name":"Corra!","description":"Impulsiona mobilidade de alvo.","cost":"N/A","type":"HB"},{"name":"Beleza Sedutora","description":"Encanta alvos em rea.","cost":"N/A","type":"HB"},{"name":"Ajoelhe-se","description":"Obriga inimigos a se ajoelharem.","cost":"N/A","type":"HB"},{"name":" Sua Vez de Novo","description":"Concede ao extra a aliado.","cost":"N/A","type":"HB"},{"name":"Charme do Malandro","description":"Transforma inimigo em aliado.","cost":"N/A","type":"HB"},{"name":"Estrondo Vocal","description":"Atinge todos atributos do alvo.","cost":"N/A","type":"Passiva"}]},{"id":"apostador","name":"Apostador","type":"Avanada","role":"Manipulador de Probabilidades","description":"Usa baralho especial para efeitos aleatrios poderosos.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Malandro","+100 SOR"],"abilities":[{"name":"Escolha uma Carta","description":"Puxa carta (D80) com efeito contnuo.","cost":"N/A","type":"HB"},{"name":"Valete Rpido","description":"Dobra status fsicos (Carta Valete).","cost":"N/A","type":"HB"},{"name":"Dama Salvadora","description":"Cura e remove status (Carta Dama).","cost":"N/A","type":"HB"},{"name":"Rei do Poder","description":"Exploso em rea (Carta Rei).","cost":"N/A","type":"HB"},{"name":"s da Sorte","description":"Puxa todas cartas (Carta s).","cost":"N/A","type":"HB"},{"name":"Carta na Manga","description":"Troca carta guardada instantaneamente.","cost":"N/A","type":"Passiva"}]},{"id":"shadow_hunters","name":"Shadow Hunters","type":"Avanada","role":"Invocador Sombrio","description":"Extrai sombras de mortos para lutar.","bonus_class":{"Livre":10},"requirements":["Chegar a 1 HP em batalha 100 vezes"],"abilities":[{"name":"Erga-se","description":"Extrai sombra de cadver como soldado.","cost":"N/A","type":"HB"},{"name":"Sombra Salvadora","description":"Sombra absorve dano fatal.","cost":"N/A","type":"Reao"}]},{"id":"monarca_das_sombras","name":"Monarca das Sombras","type":"Avanada","role":"Exrcito Vivo","description":"Comanda exrcito sombrio sozinho.","bonus_class":{"Livre":10},"requirements":["Possuir 4 sombras no nvel 10"],"abilities":[{"name":"Troca de Sombra","description":"Troca de lugar com sombra.","cost":"N/A","type":"HB"},{"name":"Retorno das Sombras","description":"Cura ao perder sombra.","cost":"N/A","type":"Passiva"}]}]`),LM={classes:VM},zM=()=>{const i=Po(),e=O.useRef(null),[n,r]=O.useState("carousel"),[o,c]=O.useState(0),[d,m]=O.useState(null),[g,y]=O.useState("female"),[_,E]=O.useState(null),[T,L]=O.useState(!1),[H,z]=O.useState(""),Q=PM.races;O.useEffect(()=>{(async()=>{if(at.currentUser)try{const k=it(Ce,"characters",at.currentUser.uid);(await wd(k)).exists()&&(console.log("Personagem j existe. Redirecionando..."),i("/jogador-vtt"))}catch(k){console.error("Erro ao verificar personagem:",k)}})()},[i]),O.useEffect(()=>{const N=()=>{document.querySelectorAll("audio, video").forEach(P=>{if(!(P.tagName==="VIDEO"&&P.classList.contains("background-video")))try{P.pause(),P.currentTime=0}catch{}})};N();const k=setTimeout(N,500);return()=>clearTimeout(k)},[]),O.useEffect(()=>{if(n==="carousel"&&e.current){const k=window.innerWidth/2-130,w=o*300-k+130;e.current.scrollTo({left:w,behavior:"smooth"})}},[o,n]);const ie=N=>{e.current&&(e.current.scrollLeft+=N.deltaY*4)},B=N=>{if(!N)return"Nenhum";const k={value:"Valor",detail:"Detalhes",details:"Detalhes",free_points:"Pontos Livres",female:"Feminino",male:"Masculino",male_exiled:"Masculino (Exilado)"};return typeof N=="object"?Object.entries(N).map(([w,P],C)=>{if(w==="type")return null;const fe=k[w]||w.toUpperCase().replace(/_/g," ");let ze=P;return typeof P=="object"&&(ze=JSON.stringify(P).replace(/["{}]/g,"").replace(/:/g,": ").replace(/,/g,", ")),h.jsxs("div",{className:"mb-1",children:[h.jsxs("span",{className:"text-gray-400 font-bold",children:[fe,":"]})," ",h.jsx("span",{className:"text-gray-200",children:ze})]},C)}):N},se=()=>d?typeof d.base_classes=="object"&&!Array.isArray(d.base_classes)?d.id==="viera"?g==="female"?d.base_classes.female:d.base_classes.male||d.base_classes.male_exiled:[]:d.base_classes||[]:[],me=N=>LM.classes.find(k=>k.name===N),Ae=()=>{m(Q[o]),E(null),r("details")},ye=()=>{r("carousel"),E(null)},I=async()=>{if(!(!H.trim()||!at.currentUser))try{await vg(it(Ce,"characters",at.currentUser.uid),{uid:at.currentUser.uid,email:at.currentUser.email,name:H,race:d.name,class:_,gender:g,createdAt:Ln()}),console.log(`Personagem Criado: ${H}`),i("/jogador-vtt")}catch(N){console.error("Erro ao salvar personagem:",N),alert("Falha ao invocar personagem no banco de dados.")}},R=Q[o];return h.jsxs("div",{className:"relative w-full h-screen overflow-hidden",children:[h.jsx("style",{children:`
        @keyframes scaleIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        .rpg-modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0, 0, 0, 0.85); backdrop-filter: blur(8px); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .rpg-modal-box { position: relative; width: 500px; max-width: 90%; background: #1a120b; border: 2px solid #b45309; box-shadow: 0 0 50px rgba(234, 179, 8, 0.4); padding: 6px; border-radius: 8px; animation: scaleIn 0.3s ease-out forwards; }
        .rpg-modal-inner { background: linear-gradient(to bottom, #f3e6d5, #e7cba8); border: 1px solid #78350f; padding: 40px 20px; border-radius: 4px; text-align: center; display: flex; flex-direction: column; align-items: center; gap: 20px; }
        .rpg-modal-title { font-family: 'Cinzel', serif; font-size: 32px; color: #78350f; font-weight: bold; text-transform: uppercase; text-shadow: 0px 1px 0px rgba(255,255,255,0.6); margin-bottom: 5px; }
        .rpg-modal-subtitle { font-family: 'Cinzel', serif; font-size: 14px; color: #92400e; font-style: italic; border-top: 1px solid rgba(146, 64, 14, 0.3); padding-top: 10px; width: 100%; }
        .rpg-input { width: 100%; padding: 12px; background: #fff8ed; border: 2px solid #854d0e; font-family: 'Cinzel', serif; font-size: 18px; color: #451a03; outline: none; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); border-radius: 4px; }
        .rpg-input:focus { border-color: #d97706; background: #ffffff; }
        .rpg-btn-go { background: linear-gradient(to bottom, #fcd34d, #d97706); border: 1px solid #92400e; padding: 10px 30px; font-family: 'Cinzel', serif; font-weight: bold; font-size: 18px; color: #451a03; text-transform: uppercase; cursor: pointer; border-radius: 4px; box-shadow: 0 4px 0 #92400e; transition: transform 0.1s; }
        .rpg-btn-go:active { transform: translateY(4px); box-shadow: 0 0 0 #92400e; }
        .rpg-btn-go:disabled { filter: grayscale(1); opacity: 0.6; cursor: not-allowed; }
        .rpg-close-btn { position: absolute; top: 10px; right: 15px; background: none; border: none; font-size: 20px; color: #92400e; cursor: pointer; font-weight: bold; }
        .rpg-close-btn:hover { color: #ff0000; }
        .corner { position: absolute; width: 20px; height: 20px; border-color: #fcd34d; border-style: solid; }
        .tl { top: -2px; left: -2px; border-width: 3px 0 0 3px; }
        .tr { top: -2px; right: -2px; border-width: 3px 3px 0 0; }
        .bl { bottom: -2px; left: -2px; border-width: 0 0 3px 3px; }
        .br { bottom: -2px; right: -2px; border-width: 0 3px 3px 0; }
      `}),h.jsxs("div",{className:"ether-container",children:[h.jsx("div",{className:"ether-vortex"}),h.jsx("div",{className:"ether-particles"})]}),h.jsxs("header",{className:"absolute top-0 w-full p-6 z-50 flex justify-between items-center bg-gradient-to-b from-black/90 to-transparent",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"rpg-title text-3xl",children:"Gnese da Alma"}),h.jsx("p",{className:"rpg-subtitle-styled mt-2",children:n==="carousel"?"Determine sua Linhagem Ancestral":`${d?.name} // Customizao`})]}),n==="details"&&h.jsxs("button",{onClick:ye,className:"nav-back-btn",children:[h.jsx("span",{children:""})," Seleo"]})]}),n==="carousel"&&h.jsxs("div",{className:"w-full h-full flex flex-col justify-center animate-[fadeIn_1s]",children:[h.jsx("div",{className:"text-center mb-4 z-10",children:h.jsx("h2",{className:"rpg-title text-5xl text-yellow-500 drop-shadow-lg",children:R.name})}),h.jsx("div",{ref:e,onWheel:ie,className:"carousel-viewport",children:Q.map((N,k)=>h.jsxs("div",{onClick:()=>c(k),className:`race-card-frame ${k===o?"active":""}`,children:[h.jsx("img",{src:N.image,alt:N.name}),h.jsx("div",{className:"card-label",children:N.name})]},N.id))}),h.jsx("div",{className:"text-center mt-10 z-10",children:h.jsxs("button",{onClick:Ae,className:"confirm-btn w-64 mx-auto",children:["Escolher ",R.name]})})]}),n==="details"&&d&&h.jsxs("div",{className:"details-grid",children:[h.jsx("div",{className:"char-portrait-container",children:h.jsx("img",{src:d.image,alt:d.name,className:"char-portrait"})}),h.jsxs("div",{className:"info-scroll-area custom-scrollbar",children:[h.jsxs("div",{className:"glass-panel mt-8 border-l-4 border-yellow-600",children:[h.jsx("h3",{className:"section-header !border-none !mb-2 text-yellow-500",children:"Descrio"}),h.jsxs("p",{className:"description-text",children:['"',d.description,'"']}),h.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-[10px] uppercase text-blue-400 font-bold",children:"Caractersticas"}),h.jsx("p",{className:"text-xs text-gray-400 mt-1",children:d.characteristics})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[10px] uppercase text-green-400 font-bold",children:"Bnus Racial"}),h.jsx("div",{className:"text-xs text-gray-300 font-mono mt-1",children:B(d.racial_bonus)})]})]})]}),h.jsxs("div",{className:"glass-panel flex flex-col gap-2",children:[h.jsx("span",{className:"text-xs text-gray-400 uppercase font-bold tracking-widest",children:"Gnero"}),h.jsxs("div",{className:"flex w-full",children:[h.jsx("div",{onClick:()=>{y("female"),E(null)},className:`gender-option ${g==="female"?"active":""}`,children:"Feminino"}),h.jsx("div",{onClick:()=>{y("male"),E(null)},className:`gender-option ${g==="male"?"active":""}`,children:"Masculino"})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"rpg-title text-xl mb-4 text-white",children:"Vocao"}),h.jsx("div",{className:"class-selector-grid",children:se().map(N=>{const k=me(N);return h.jsxs("div",{onClick:()=>E(N),className:`class-btn ${_===N?"selected":""}`,children:[h.jsx("span",{className:"class-btn-title",children:N}),h.jsx("span",{className:"class-btn-role",children:k?.role||"Bsico"})]},N)})}),_&&(()=>{const N=me(_);return N?h.jsxs("div",{className:"class-detail-container",children:[h.jsxs("div",{className:"cd-header",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"cd-title rpg-title",children:N.name}),h.jsxs("div",{className:"cd-meta text-blue-400",children:[N.type," // ",N.role]})]}),h.jsxs("div",{className:"cd-req",children:[h.jsx("span",{className:"cd-req-label",children:"Requisitos"}),h.jsx("div",{className:"cd-req-val",children:N.requirements?.length?N.requirements.join(", "):"Nenhum"})]})]}),h.jsxs("div",{className:"cd-desc",children:['"',N.description,'"']}),h.jsxs("div",{className:"cd-bonus-box",children:[h.jsx("span",{className:"text-xs uppercase font-bold text-blue-300",children:"Bnus de Classe"}),h.jsx("span",{className:"font-mono text-sm text-white",children:B(N.bonus_class)})]}),h.jsxs("div",{children:[h.jsx("h5",{className:"text-xs uppercase text-yellow-500 font-bold mb-3 tracking-wider border-b border-white/10 pb-1 inline-block",children:"Habilidades Iniciais"}),h.jsx("div",{className:"cd-abilities-grid",children:N.abilities?.map((k,w)=>h.jsxs("div",{className:"cd-ability-card",children:[h.jsxs("div",{className:"cd-ab-header",children:[h.jsx("span",{className:"cd-ab-name",children:k.name}),h.jsx("span",{className:"cd-ab-cost",children:k.cost})]}),h.jsx("p",{className:"cd-ab-desc",children:k.description})]},w))})]})]}):h.jsx("div",{className:"p-4 text-center",children:"Carregando..."})})()]}),h.jsx("div",{className:"mt-8 mb-10",children:h.jsx("button",{disabled:!_,onClick:()=>L(!0),className:"confirm-btn",children:_?"Finalizar Criao":"Selecione uma Vocao"})})]})]}),T&&h.jsx("div",{className:"rpg-modal-overlay",children:h.jsxs("div",{className:"rpg-modal-box",children:[h.jsx("div",{className:"corner tl"}),h.jsx("div",{className:"corner tr"}),h.jsx("div",{className:"corner bl"}),h.jsx("div",{className:"corner br"}),h.jsxs("div",{className:"rpg-modal-inner",children:[h.jsxs("div",{className:"w-full",children:[h.jsx("h3",{className:"rpg-modal-title",children:"Identidade"}),h.jsx("p",{className:"rpg-modal-subtitle",children:"Como a histria o conhecer?"})]}),h.jsxs("div",{className:"w-full flex gap-2",children:[h.jsx("input",{type:"text",value:H,onChange:N=>z(N.target.value),placeholder:"Nome do Aventureiro",className:"rpg-input",autoFocus:!0}),h.jsx("button",{onClick:I,disabled:!H.trim(),className:"rpg-btn-go",children:"GO"})]}),h.jsx("button",{className:"rpg-close-btn",onClick:()=>L(!1),children:""})]})]})})]})},UM="/FF-12Liberation/assets/fundo-jogador-nsWQkznx.jpg",BM="/FF-12Liberation/assets/level-up-BOEM_DXL.mp3",HM=({targetDate:i,onComplete:e})=>{const[n,r]=O.useState("");return O.useEffect(()=>{const o=setInterval(()=>{const c=new Date().getTime(),d=new Date(i).getTime()-c;if(d<0)clearInterval(o),e&&e(),r("AGORA");else{const m=Math.floor(d/864e5),g=Math.floor(d%(1e3*60*60*24)/(1e3*60*60)),y=Math.floor(d%(1e3*60*60)/(1e3*60)),_=Math.floor(d%(1e3*60)/1e3);r(`${m}d ${g}h ${y}m ${_}s`)}},1e3);return()=>clearInterval(o)},[i,e]),h.jsx("span",{className:"countdown-text",children:n})};function qM(){const[i,e]=O.useState(null),[n,r]=O.useState([]),[o,c]=O.useState([]),[d,m]=O.useState([]),[g,y]=O.useState(!1),[_,E]=O.useState(!1),[T,L]=O.useState(null),[H,z]=O.useState([]),[Q,ie]=O.useState(!1),[B,se]=O.useState(null),[me,Ae]=O.useState(null),[ye,I]=O.useState(null),[R,N]=O.useState(!1),[k,w]=O.useState(!1),P=O.useRef(null),C=O.useRef(new Audio(BM));O.useEffect(()=>{C.current.volume=.2},[]),O.useEffect(()=>{(async()=>{if(!at.currentUser)return;const ve=it(Ce,"characters",at.currentUser.uid),_e=Nn(ve,j=>{if(j.exists()){const J=j.data(),oe=J.character_sheet?.basic_info?.level||1;P.current!==null&&oe>P.current&&(w(!0),C.current.currentTime=0,C.current.play().catch(de=>console.log("Autoplay bloqueado:",de))),P.current=oe,e(J)}});return()=>_e()})()},[]);const fe=()=>{w(!1),C.current.pause(),C.current.currentTime=0};O.useEffect(()=>{if(!at.currentUser||!i)return;const Z=wn(Mt(Ce,"missoes")),ve=Nn(Z,de=>{r(de.docs.map(Ee=>({id:Ee.id,...Ee.data()})))}),_e=wn(Mt(Ce,"sessoes"),xa("participantes","array-contains",i.name)),j=Nn(_e,de=>{const Ee=new Date,Ne=de.docs.map(Ue=>({id:Ue.id,...Ue.data()})),Me=[],Je=[];Ne.forEach(Ue=>{const Jt=new Date(Ue.dataInicio),mn=new Date(Ue.expiraEm);Ee>=Jt&&Ee<=mn?Me.push(Ue):Ee<Jt&&Je.push(Ue)}),c(Me),m(Je),ye&&Me.find(Jt=>Jt.id===ye.id)&&Ae("connected")}),J=wn(Mt(Ce,"resenhas"),xa("destinatarios","array-contains",i.name)),oe=Nn(J,de=>{const Ee=de.docs.map(Je=>({id:Je.id,...Je.data()})),Ne=new Date,Me=Ee.filter(Je=>new Date(Je.expiraEm)>Ne);z(Me)});return()=>{ve(),j(),oe()}},[i,ye]);const ze=async Z=>{if(!i)return;if(Z.candidatos?.some(J=>J.uid===at.currentUser.uid))return alert("Voc j se candidatou para esta misso!");const _e=!Z.candidatos||Z.candidatos.length===0,j={uid:at.currentUser.uid,nome:i.name,classe:i.class,isLeader:_e,dataCandidatura:new Date().toISOString()};try{const J=it(Ce,"missoes",Z.id);await Tn(J,{candidatos:vM(j)}),alert(_e?"Voc se candidatou e foi marcado como LDER DO GRUPO!":"Candidatura realizada com sucesso!")}catch(J){console.error("Erro ao candidatar:",J),alert("Falha ao enviar candidatura.")}},X=Z=>{I(Z),y(!0);const ve=new Date,_e=new Date(Z.dataInicio);ve>=_e?Ae("connected"):Ae("waiting")};if(!i)return h.jsx("div",{className:"loading-screen",children:"Carregando Grimrio..."});const le=i.character_sheet?.basic_info?.level||1;return h.jsxs("div",{className:"jogador-container",children:[h.jsx("div",{className:"background-layer",style:{backgroundImage:`url(${UM})`}}),h.jsxs("div",{className:"content-layer",children:[h.jsxs("div",{className:"char-hud clickable-hud",onClick:()=>N(!0),title:"Abrir Ficha do Personagem",children:[h.jsx("div",{className:"char-avatar",children:h.jsx("div",{className:"avatar-circle",children:h.jsx("span",{className:"hud-level",children:le})})}),h.jsxs("div",{className:"char-info",children:[h.jsx("h2",{className:"char-name",children:i.name}),h.jsxs("span",{className:"char-meta",children:[i.race," // ",i.class]})]})]}),k&&h.jsx("div",{className:"levelup-global-overlay",children:h.jsxs("div",{className:"levelup-content",children:[h.jsx("h1",{className:"levelup-title",children:"LEVEL UP!"}),h.jsx("p",{className:"levelup-subtitle",children:"Seu poder cresce..."}),h.jsx("button",{className:"levelup-confirm-btn",onClick:fe,children:"CONFIRMAR"})]})}),d.length>0&&o.length===0&&!g&&h.jsxs("div",{className:"upcoming-sessions-banner",children:[h.jsx("h3",{children:"A SESSO VAI COMEAR EM BREVE"}),d.map(Z=>h.jsxs("div",{className:"countdown-row",children:[h.jsx("span",{children:Z.missaoNome}),h.jsx(HM,{targetDate:Z.dataInicio})]},Z.id))]}),o.length>0&&!g&&h.jsxs("div",{className:"active-sessions-banner fade-in",children:[h.jsx("h3",{children:"SESSO EM ANDAMENTO!"}),o.map(Z=>h.jsxs("div",{className:"session-entry-row",children:[h.jsx("span",{children:Z.missaoNome}),h.jsx("button",{className:"btn-enter-session",onClick:()=>X(Z),children:"ENTRAR AGORA"})]},Z.id))]}),me&&ye&&h.jsxs("div",{className:`vtt-status-widget ${me}`,children:[h.jsx("div",{className:"status-indicator"}),h.jsxs("div",{className:"status-text",children:[me==="waiting"&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{children:"AGUARDANDO MESTRE"}),h.jsx("small",{children:"Sesso Conectada! Aguardando..."})]}),me==="connected"&&h.jsxs(h.Fragment,{children:[h.jsx("h4",{children:"BEM-VINDO, AVENTUREIRO"}),h.jsx("small",{children:"Sesso Conectada!"})]})]})]}),h.jsx("button",{className:"floating-mission-btn",onClick:()=>E(!0),title:"Quadro de Misses",children:""}),H.length>0&&h.jsxs("button",{className:"floating-sanchez-btn",onClick:()=>ie(!0),title:"Resenhas do Sanchez",children:[h.jsx("div",{className:"sanchez-icon-face",style:{backgroundImage:`url(${hm})`}}),h.jsx("span",{className:"notification-badge",children:H.length})]}),h.jsx(bg,{isMestre:!1,playerData:i}),_&&h.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>E(!1),children:h.jsxs("div",{className:"ff-modal-content ff-card",onClick:Z=>Z.stopPropagation(),children:[h.jsxs("div",{className:"modal-header-row",children:[h.jsx("h3",{className:"modal-title-ff",children:"QUADRO DE CONTRATOS"}),h.jsx("button",{className:"btn-close-x",onClick:()=>E(!1),children:""})]}),h.jsxs("div",{className:"missions-list-player",children:[n.map(Z=>{const ve=parseInt(Z.grupo)||0,_e=Z.candidatos?Z.candidatos.length:0,j=_e>=ve&&ve>0,J=Z.candidatos?.some(oe=>oe.uid===at.currentUser.uid);return h.jsxs("div",{className:`mission-poster-player rank-${Z.rank}`,children:[h.jsxs("div",{className:"mp-header",children:[h.jsx("span",{className:"mp-rank",children:Z.rank}),h.jsx("h4",{children:Z.nome})]}),h.jsxs("div",{className:"mp-details",children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Local:"})," ",Z.local]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Recompensa:"})," ",Z.gilRecompensa," Gil"]}),h.jsx("p",{className:"mp-desc",children:Z.descricaoMissao})]}),h.jsxs("div",{className:"vagas-container-player",style:{marginTop:"10px",background:"rgba(0,0,0,0.3)",padding:"5px",borderRadius:"4px"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10px",color:"#ccc"},children:[h.jsx("span",{children:"VAGAS PREENCHIDAS"}),h.jsxs("span",{children:[_e," / ",ve>0?ve:""]})]}),h.jsx("div",{style:{width:"100%",height:"4px",background:"#222",marginTop:"2px"},children:h.jsx("div",{style:{width:`${Math.min(_e/(ve||1)*100,100)}%`,height:"100%",background:j?"#f44":"#00f2ff"}})})]}),Z.candidatos&&Z.candidatos.length>0&&h.jsxs("div",{className:"candidates-box",children:[h.jsx("small",{children:"Grupo em formao:"}),h.jsx("div",{className:"cand-tags",children:Z.candidatos.map((oe,de)=>h.jsxs("span",{className:`cand-tag ${oe.isLeader?"leader":""}`,children:[oe.isLeader&&""," ",oe.nome]},de))})]}),h.jsxs("div",{className:"mp-actions-row",children:[h.jsx("button",{className:"btn-details-outline",onClick:()=>L(Z),children:"DETALHES"}),h.jsx("button",{className:"btn-candidatar",disabled:J||j&&!J,onClick:()=>ze(Z),style:{background:j&&!J?"#333":"#00f2ff",color:j&&!J?"#666":"#000",cursor:j&&!J?"not-allowed":"pointer"},children:J?"ENVIADO":j?"LOTADO":"ACEITAR"})]})]},Z.id)}),n.length===0&&h.jsx("p",{style:{textAlign:"center",padding:"20px"},children:"Nenhum contrato disponvel no momento."})]})]})}),T&&h.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>L(null),style:{zIndex:1e5},children:h.jsxs("div",{className:"ff-modal ff-card detail-view-main",onClick:Z=>Z.stopPropagation(),children:[h.jsxs("div",{className:"detail-header-modern",children:[h.jsx("div",{className:`detail-rank-badge rank-${T.rank}`,children:T.rank}),h.jsxs("div",{className:"detail-title-col",children:[h.jsx("h2",{children:T.nome}),h.jsxs("span",{className:"detail-narrator",children:["Narrador: ",T.mestreNome]})]})]}),h.jsxs("div",{className:"detail-body-grid",children:[h.jsxs("div",{className:"detail-info-row",children:[h.jsxs("div",{className:"info-item",children:[h.jsx("label",{children:" LOCAL"}),h.jsx("span",{children:T.local||"Desconhecido"})]}),h.jsxs("div",{className:"info-item",children:[h.jsx("label",{children:" CONTRATANTE"}),h.jsx("span",{children:T.contratante||"Annimo"})]})]}),h.jsxs("div",{className:"detail-section",children:[h.jsx("label",{className:"section-label",children:"STATUS DO GRUPO"}),h.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"10px",borderRadius:"4px"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#fff",fontSize:"12px",marginBottom:"5px"},children:[h.jsx("span",{children:"JOGADORES INSCRITOS"}),h.jsxs("span",{children:[T.candidatos?T.candidatos.length:0," / ",T.grupo||"?"]})]}),h.jsx("div",{style:{width:"100%",height:"6px",background:"#000",borderRadius:"3px"},children:h.jsx("div",{style:{width:`${Math.min((T.candidatos?.length||0)/(parseInt(T.grupo)||1)*100,100)}%`,height:"100%",background:"#00f2ff"}})})]})]}),h.jsxs("div",{className:"detail-section",children:[h.jsx("label",{className:"section-label",children:" DESCRIO DA MISSO"}),h.jsx("p",{className:"section-text",children:T.descricaoMissao||"Sem descrio."})]}),h.jsxs("div",{className:"detail-section",children:[h.jsx("label",{className:"section-label",children:" OBJETIVOS DA MISSO"}),h.jsx("p",{className:"section-text",children:T.objetivosMissao||"Sem objetivos definidos."})]}),h.jsxs("div",{className:"detail-section",children:[h.jsx("label",{className:"section-label",children:" REQUISITOS"}),h.jsx("p",{className:"section-text",children:T.requisitos||"Sem requisitos especiais."})]}),h.jsxs("div",{className:"detail-section reward-section",children:[h.jsx("label",{className:"section-label",children:" RECOMPENSAS"}),h.jsxs("div",{className:"reward-content-box",children:[h.jsxs("div",{className:"gil-display-row",children:[h.jsx("span",{className:"gil-icon",children:""})," ",h.jsxs("span",{className:"gil-value",children:[T.gilRecompensa||0," GIL"]})]}),T.recompensa&&h.jsx("div",{className:"extra-rewards-list",children:T.recompensa.split(`
`).map((Z,ve)=>h.jsxs("div",{className:"reward-item",children:[" ",Z]},ve))})]})]})]}),h.jsx("button",{className:"ff-final-close-btn",onClick:()=>L(null),children:"FECHAR RELATRIO"})]})}),Q&&h.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>ie(!1),children:h.jsxs("div",{className:"ff-modal-content ff-card",style:{height:"auto",maxHeight:"600px"},onClick:Z=>Z.stopPropagation(),children:[h.jsxs("div",{className:"modal-header-row",children:[h.jsx("h3",{className:"modal-title-ff",children:"RESENHAS RECEBIDAS"}),h.jsx("button",{className:"btn-close-x",onClick:()=>ie(!1),children:""})]}),h.jsx("div",{className:"resenhas-list-container",children:H.map(Z=>h.jsxs("div",{className:"resenha-row-player",onClick:()=>{se(Z),ie(!1)},children:[h.jsx("span",{className:"r-icon",children:""}),h.jsxs("div",{className:"r-info",children:[h.jsx("h4",{children:Z.titulo}),h.jsxs("small",{children:["De: ",Z.mestre]})]}),h.jsx("button",{className:"btn-read-arrow",children:"LER "})]},Z.id))})]})}),B&&h.jsx("div",{className:"papiro-overlay-full",onClick:()=>se(null),children:h.jsxs("div",{className:"papiro-real-container",style:{backgroundImage:`url(${MA})`},onClick:Z=>Z.stopPropagation(),children:[h.jsx("div",{className:"sanchez-oval-view-no-border",style:{backgroundImage:`url(${hm})`}}),h.jsx("h2",{className:"papiro-title-real",children:B.titulo}),h.jsxs("p",{className:"papiro-mestre-sub",children:["Narrador: ",B.mestre]}),h.jsx("div",{className:"papiro-body-real",dangerouslySetInnerHTML:{__html:B.conteudo.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br/>")}}),h.jsx("button",{className:"papiro-close-btn",onClick:()=>se(null),children:"FECHAR"})]})}),R&&i&&h.jsx(xg,{characterData:i,isMaster:!1,onClose:()=>N(!1)})]}),h.jsx("style",{children:`
        /* ESTILOS PRESERVADOS */
        .jogador-container { position: relative; width: 100vw; height: 100vh; overflow: hidden; background: #000; font-family: 'Cinzel', serif; color: white; }
        .background-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; background-repeat: no-repeat; z-index: 0; }
        .content-layer { position: relative; z-index: 10; width: 100%; height: 100%; }
        .loading-screen { width: 100vw; height: 100vh; background: #000; color: #ffcc00; display: flex; align-items: center; justify-content: center; font-size: 24px; font-family: 'Cinzel', serif; }
        
        /* HUD */
        .char-hud { position: absolute; top: 20px; left: 20px; display: flex; align-items: center; gap: 15px; background: rgba(0,0,0,0.8); padding: 15px 25px; border-radius: 50px; border: 1px solid #ffcc00; box-shadow: 0 0 15px rgba(255,204,0,0.3); backdrop-filter: blur(5px); z-index: 50; transition: transform 0.2s; }
        .char-hud.clickable-hud:hover { transform: scale(1.05); cursor: pointer; border-color: #fff; box-shadow: 0 0 25px #ffcc00; }
        .avatar-circle { width: 60px; height: 60px; background: #222; border-radius: 50%; border: 2px solid #fff; display: flex; align-items: center; justify-content: center; }
        .hud-level { font-size: 28px; font-weight: bold; color: #ffcc00; text-shadow: 0 0 5px #000; }
        .char-info h2 { margin: 0; font-size: 20px; color: #fff; text-transform: uppercase; letter-spacing: 1px; }
        .char-meta { font-size: 12px; color: #00f2ff; font-weight: bold; }

        /* LEVEL UP GLOBAL OVERLAY */
        .levelup-global-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 999999; display: flex; align-items: center; justify-content: center; animation: fadeOverlay 0.5s forwards; }
        .levelup-content { text-align: center; }
        .levelup-title { font-size: 80px; color: #ffcc00; text-shadow: 0 0 50px #ffcc00, 0 0 20px #fff; animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); letter-spacing: 5px; margin-bottom: 10px; }
        .levelup-subtitle { font-size: 24px; color: #fff; margin-bottom: 40px; font-family: 'Lato', sans-serif; opacity: 0.8; }
        .levelup-confirm-btn { background: transparent; border: 2px solid #ffcc00; color: #ffcc00; padding: 15px 40px; font-size: 18px; font-family: 'Cinzel', serif; font-weight: bold; cursor: pointer; transition: 0.3s; text-transform: uppercase; letter-spacing: 2px; }
        .levelup-confirm-btn:hover { background: #ffcc00; color: #000; box-shadow: 0 0 30px #ffcc00; transform: scale(1.1); }

        /* SESSES, BOTES, ETC (Mantidos) */
        .upcoming-sessions-banner { position: absolute; top: 120px; left: 50%; transform: translateX(-50%); background: rgba(0, 0, 0, 0.8); border: 2px solid #ffcc00; padding: 20px; border-radius: 8px; text-align: center; box-shadow: 0 0 30px rgba(255,204,0,0.3); z-index: 5; width: 400px; }
        .upcoming-sessions-banner h3 { color: #ffcc00; margin-bottom: 10px; font-size: 18px; }
        .countdown-row { display: flex; flex-direction: column; gap: 5px; border-top: 1px solid #333; padding-top: 10px; margin-top: 10px; }
        .countdown-text { font-size: 24px; color: #fff; font-weight: bold; font-family: 'Lato', sans-serif; }
        .active-sessions-banner { position: absolute; top: 120px; left: 50%; transform: translateX(-50%); background: rgba(20, 0, 0, 0.9); border: 2px solid #f00; padding: 20px; border-radius: 8px; text-align: center; box-shadow: 0 0 30px #f00; animation: pulseRed 2s infinite; z-index: 5; }
        .session-entry-row { display: flex; gap: 20px; align-items: center; margin-top: 10px; justify-content: center; }
        .btn-enter-session { background: #f00; color: #fff; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; font-family: 'Cinzel', serif; font-size: 16px; }
        .btn-enter-session:hover { background: #fff; color: #f00; }
        @keyframes pulseRed { 0% { box-shadow: 0 0 10px #f00; } 50% { box-shadow: 0 0 30px #f00; } 100% { box-shadow: 0 0 10px #f00; } }
        .vtt-status-widget { position: fixed; top: 20px; right: 20px; background: rgba(0,0,0,0.9); border: 2px solid; padding: 15px; border-radius: 8px; display: flex; align-items: center; gap: 15px; z-index: 9999; width: 280px; transition: 0.5s; box-shadow: 0 5px 20px rgba(0,0,0,0.5); }
        .vtt-status-widget.waiting { border-color: #ffcc00; }
        .vtt-status-widget.connected { border-color: #0f0; box-shadow: 0 0 20px rgba(0,255,0,0.3); }
        .status-indicator { width: 15px; height: 15px; border-radius: 50%; }
        .waiting .status-indicator { background: #ffcc00; animation: blink 1s infinite; }
        .connected .status-indicator { background: #0f0; box-shadow: 0 0 10px #0f0; }
        .status-text h4 { margin: 0; font-size: 14px; color: #fff; text-transform: uppercase; }
        .status-text small { font-size: 11px; color: #ccc; }
        .waiting .status-text h4 { color: #ffcc00; }
        .connected .status-text h4 { color: #0f0; }
        @keyframes blink { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
        .floating-mission-btn { position: fixed; bottom: 30px; left: 30px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #ffcc00; background: #000; color: #fff; font-size: 30px; cursor: pointer; z-index: 999; box-shadow: 0 0 15px rgba(0,0,0,0.8); transition: transform 0.2s, box-shadow 0.2s; display: flex; align-items: center; justify-content: center; }
        .floating-mission-btn:hover { transform: scale(1.1); box-shadow: 0 0 25px #ffcc00; }
        .floating-sanchez-btn { position: fixed; bottom: 110px; left: 30px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #00f2ff; background: #000; cursor: pointer; z-index: 999; box-shadow: 0 0 15px rgba(0,242,255,0.5); transition: transform 0.2s; display: flex; align-items: center; justify-content: center; overflow: visible; }
        .floating-sanchez-btn:hover { transform: scale(1.1); box-shadow: 0 0 25px #00f2ff; }
        .sanchez-icon-face { width: 100%; height: 100%; border-radius: 50%; background-size: cover; background-position: center; }
        .notification-badge { position: absolute; top: -5px; right: -5px; background: #f00; color: #fff; border-radius: 50%; width: 24px; height: 24px; font-size: 12px; font-weight: bold; display: flex; align-items: center; justify-content: center; border: 2px solid #fff; }
        .ff-modal-overlay-flex { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 99999; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(10px); }
        .ff-modal-content { width: 600px; max-width: 95vw; max-height: 85vh; background: #0d0d15; border: 2px solid #ffcc00; padding: 25px; border-radius: 8px; box-shadow: 0 0 50px rgba(0,0,0,0.9); overflow-y: auto; display: flex; flex-direction: column; }
        .modal-header-row { display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 15px; }
        .modal-title-ff { color: #ffcc00; margin: 0; font-size: 22px; letter-spacing: 2px; }
        .btn-close-x { background: none; border: none; color: #fff; font-size: 24px; cursor: pointer; }
        .btn-close-x:hover { color: #f00; }
        .missions-list-player { display: grid; grid-template-columns: 1fr; gap: 15px; }
        .mission-poster-player { background: rgba(255,255,255,0.05); border: 1px solid #444; padding: 15px; border-radius: 4px; position: relative; }
        .mp-header { display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #333; padding-bottom: 8px; margin-bottom: 8px; }
        .mp-rank { font-size: 24px; font-weight: bold; color: #ffcc00; }
        .mp-details p { margin: 4px 0; font-size: 14px; color: #ccc; }
        .mp-desc { font-style: italic; color: #aaa; margin-top: 8px; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
        .mp-actions-row { display: flex; gap: 10px; margin-top: 15px; }
        .btn-details-outline { flex: 1; border: 1px solid #00f2ff; color: #00f2ff; background: transparent; padding: 10px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-details-outline:hover { background: #00f2ff; color: #000; }
        .btn-candidatar { flex: 2; background: #00f2ff; color: #000; font-weight: bold; border: none; padding: 10px; cursor: pointer; transition: 0.3s; }
        .btn-candidatar:hover:not(:disabled) { background: #fff; box-shadow: 0 0 10px #00f2ff; }
        .btn-candidatar:disabled { background: #333; color: #666; cursor: not-allowed; }
        .candidates-box { margin-top: 10px; background: rgba(0,0,0,0.3); padding: 8px; border-radius: 4px; }
        .cand-tags { display: flex; flex-wrap: wrap; gap: 5px; margin-top: 5px; }
        .cand-tag { font-size: 11px; padding: 2px 6px; background: #222; border: 1px solid #444; border-radius: 3px; color: #ddd; }
        .cand-tag.leader { border-color: #ffcc00; color: #ffcc00; }
        .resenhas-list-container { display: flex; flex-direction: column; gap: 10px; }
        .resenha-row-player { display: flex; align-items: center; background: rgba(255,255,255,0.05); border: 1px solid #333; padding: 15px; border-radius: 4px; cursor: pointer; transition: 0.2s; }
        .resenha-row-player:hover { background: rgba(255,255,255,0.1); border-color: #ffcc00; }
        .r-icon { font-size: 24px; margin-right: 15px; }
        .r-info { flex: 1; }
        .r-info h4 { margin: 0; color: #ffcc00; font-size: 16px; }
        .r-info small { color: #aaa; }
        .btn-read-arrow { background: none; border: none; color: #00f2ff; font-weight: bold; cursor: pointer; }
        .detail-view-main { width: 600px; background: #000814; border: 1px solid #ffcc00; padding: 0; box-shadow: 0 0 40px rgba(255, 204, 0, 0.1); overflow: hidden; display: flex; flex-direction: column; }
        .detail-header-modern { background: linear-gradient(90deg, #1a1a1a 0%, #000 100%); padding: 25px 30px; display: flex; align-items: center; border-bottom: 1px solid #333; gap: 20px; }
        .detail-rank-badge { font-size: 32px; font-weight: bold; color: #ffcc00; text-shadow: 0 0 10px rgba(255,204,0,0.5); border: 2px solid #ffcc00; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: rgba(0,0,0,0.5); }
        .detail-title-col h2 { margin: 0; font-size: 24px; color: #fff; text-transform: uppercase; letter-spacing: 1px; }
        .detail-narrator { color: #00f2ff; font-size: 12px; font-weight: bold; text-transform: uppercase; margin-top: 4px; display: block; }
        .detail-body-grid { padding: 30px; display: flex; flex-direction: column; gap: 20px; }
        .detail-info-row { display: flex; gap: 25px; margin-bottom: 10px; border-bottom: 1px solid #333; padding-bottom: 15px; }
        .info-item { flex: 1; }
        .info-item label { color: #ffcc00; font-size: 10px; display: block; margin-bottom: 5px; font-weight: bold; opacity: 0.8; }
        .info-item span { color: #fff; font-size: 14px; font-weight: bold; letter-spacing: 0.5px; }
        .detail-section { margin-bottom: 5px; }
        .section-label { color: #ffcc00; font-size: 11px; font-weight: bold; display: block; margin-bottom: 8px; letter-spacing: 1px; text-transform: uppercase; border-bottom: 1px solid #333; padding-bottom: 4px; }
        .section-text { font-size: 15px; line-height: 1.5; color: #ddd; margin: 0; white-space: pre-wrap; }
        .reward-section { margin-top: 10px; background: rgba(255,204,0,0.05); padding: 15px; border-radius: 4px; border: 1px solid rgba(255,204,0,0.2); }
        .gil-display-row { display: flex; align-items: center; gap: 10px; font-size: 18px; color: #ffcc00; font-weight: bold; margin-bottom: 8px; }
        .extra-rewards-list { margin-top: 8px; padding-left: 5px; }
        .reward-item { color: #aaa; font-size: 14px; margin-bottom: 4px; font-style: italic; }
        .ff-final-close-btn { width: 100%; background: #111; color: #fff; border: none; border-top: 1px solid #333; padding: 20px; font-weight: bold; cursor: pointer; font-size: 13px; text-transform: uppercase; transition: 0.2s; }
        .ff-final-close-btn:hover { background: #222; color: #ffcc00; }
        .papiro-overlay-full { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 100000; display: flex; align-items: center; justify-content: center; }
        .papiro-real-container { width: 1000px; height: 800px; max-width: 95vw; max-height: 95vh; background-size: 100% 100%; background-repeat: no-repeat; padding: 110px 160px; color: #3b2b1a; position: relative; display: flex; flex-direction: column; }
        .sanchez-oval-view-no-border { width: 110px; height: 110px; float: right; border-radius: 50%; background-size: cover; margin-left: 20px; mask-image: radial-gradient(circle, black 60%, transparent 100%); -webkit-mask-image: radial-gradient(circle, black 60%, transparent 100%); opacity: 0.9; }
        .papiro-title-real { border-bottom: 2px solid #3b2b1a; padding-bottom: 5px; margin-top: 0; font-size: 32px; font-weight: bold; }
        .papiro-mestre-sub { font-size: 14px; font-style: italic; opacity: 0.8; margin-top: 5px; }
        .papiro-body-real { margin-top: 25px; flex: 1; overflow-y: auto; line-height: 1.6; font-size: 18px; padding-right: 10px; scrollbar-width: none; -ms-overflow-style: none; }
        .papiro-body-real::-webkit-scrollbar { display: none; }
        .papiro-close-btn { position: absolute; bottom: 45px; right: 110px; background: #3b2b1a; color: #f4e4bc; border: none; padding: 8px 20px; cursor: pointer; font-weight: bold; font-size: 13px; border-radius: 2px; }
        .fade-in { animation: fadeIn 1s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
      `})]})}const FM=()=>h.jsx("span",{children:""}),GM=()=>h.jsx("span",{children:""}),QM=()=>h.jsx("span",{children:""}),KM=()=>h.jsx("span",{children:""});function YM(){const[i,e]=O.useState(null),[n,r]=O.useState([]),[o,c]=O.useState([]),[d,m]=O.useState(null),[g,y]=O.useState(new Date);return O.useEffect(()=>{if(!at.currentUser)return;const _=wn(Mt(Ce,"sessoes"),xa("mestreId","==",at.currentUser.uid)),E=Nn(_,T=>{const H=T.docs.map(z=>({id:z.id,...z.data()})).find(z=>{const Q=new Date,ie=new Date(z.expiraEm);return Q<=ie});H&&(e(H),c(H.connected_players||[]),H.dm_online||Tn(it(Ce,"sessoes",H.id),{dm_online:!0}))});return()=>{E(),i&&Tn(it(Ce,"sessoes",i.id),{dm_online:!1})}},[]),O.useEffect(()=>{if(!i||!i.participantes)return;const _=wn(Mt(Ce,"characters")),E=Nn(_,T=>{const H=T.docs.map(z=>({id:z.id,...z.data()})).filter(z=>i.participantes.includes(z.name));r(H)});return()=>E()},[i]),O.useEffect(()=>{const _=setInterval(()=>y(new Date),1e3);return()=>clearInterval(_)},[]),i?h.jsxs("div",{className:"mestre-vtt-container",children:[h.jsx("div",{className:"mestre-bg-layer",style:{backgroundImage:`url(${OA})`}}),h.jsxs("div",{className:"dm-players-sidebar",children:[h.jsx("h3",{className:"sidebar-title",children:"AVENTUREIROS"}),h.jsxs("div",{className:"players-list-scroll",children:[n.map(_=>{const E=o.includes(_.uid);return h.jsxs("div",{className:`mini-player-card ${E?"online":"offline"}`,onClick:()=>m(_),title:"Clique para editar ficha",children:[h.jsxs("div",{className:"mini-avatar",children:[_.character_sheet?.imgUrl?h.jsx("div",{className:"avatar-img",style:{backgroundImage:`url(${_.character_sheet.imgUrl})`}}):h.jsx("div",{className:"avatar-placeholder",children:_.name.charAt(0)}),h.jsx("div",{className:`status-dot ${E?"green":"gray"}`})]}),h.jsxs("div",{className:"mini-info",children:[h.jsx("span",{className:"p-name",children:_.name}),h.jsxs("span",{className:"p-meta",children:[_.race," // ",_.class]}),h.jsxs("span",{className:"p-lvl",children:["LVL ",_.character_sheet?.basic_info?.level||1]})]})]},_.id)}),n.length===0&&h.jsx("div",{className:"empty-slot",children:"Aguardando aventureiros..."})]})]}),h.jsxs("div",{className:"session-status-top",children:[h.jsx("div",{className:"status-indicator active"}),h.jsxs("div",{className:"status-info",children:[h.jsxs("h2",{children:["SESSO ATIVA: ",i.missaoNome]}),h.jsxs("p",{children:["Mestre Online  ",o.length," Jogadores Conectados  ",g.toLocaleTimeString()]})]})]}),h.jsx("div",{className:"vtt-workspace",children:h.jsx("div",{className:"empty-tabletop-msg",children:"SELECIONE UMA FERRAMENTA PARA INICIAR"})}),h.jsxs("div",{className:"dm-tools-dock",children:[h.jsxs("div",{className:"tool-group",children:[h.jsx(bg,{isMestre:!0}),h.jsx("div",{className:"tool-label",children:"BAZAR"})]}),h.jsxs("div",{className:"tool-group",children:[h.jsx(DA,{}),h.jsx("div",{className:"tool-label",children:"FORJA"})]}),h.jsxs("div",{className:"tool-group",children:[h.jsx("button",{className:"tool-btn-placeholder",onClick:()=>alert("Em breve: Grid de Batalha"),children:h.jsx(FM,{})}),h.jsx("div",{className:"tool-label",children:"MAPA"})]}),h.jsxs("div",{className:"tool-group",children:[h.jsx("button",{className:"tool-btn-placeholder",onClick:()=>alert("Em breve: Rolagem de Dados"),children:h.jsx(GM,{})}),h.jsx("div",{className:"tool-label",children:"DADOS"})]}),h.jsxs("div",{className:"tool-group",children:[h.jsx("button",{className:"tool-btn-placeholder",onClick:()=>alert("Em breve: Gerenciador de NPCs"),children:h.jsx(QM,{})}),h.jsx("div",{className:"tool-label",children:"NPCS"})]}),h.jsxs("div",{className:"tool-group",children:[h.jsx("button",{className:"tool-btn-placeholder",onClick:()=>alert("Em breve: Gerenciador de Combate"),children:h.jsx(KM,{})}),h.jsx("div",{className:"tool-label",children:"COMBATE"})]})]}),d&&h.jsx(xg,{characterData:d,isMaster:!0,onClose:()=>m(null)}),h.jsx("style",{children:`
        .mestre-vtt-container { width: 100vw; height: 100vh; overflow: hidden; position: relative; background: #000; font-family: 'Cinzel', serif; color: #fff; }
        .mestre-bg-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.4; z-index: 0; }
        .loading-screen-master { display: flex; align-items: center; justify-content: center; height: 100vh; color: #ffcc00; font-size: 24px; letter-spacing: 2px; background: #050505; }

        /* SIDEBAR JOGADORES */
        .dm-players-sidebar { position: absolute; top: 20px; left: 20px; width: 280px; background: rgba(0, 10, 20, 0.95); border: 2px solid #ffcc00; border-radius: 8px; padding: 15px; z-index: 50; max-height: 80vh; display: flex; flex-direction: column; box-shadow: 0 0 30px rgba(0,0,0,0.8); }
        .sidebar-title { color: #ffcc00; font-size: 16px; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 15px; text-align: center; letter-spacing: 2px; }
        .players-list-scroll { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; scrollbar-width: none; }
        
        .mini-player-card { display: flex; align-items: center; padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid #333; border-radius: 4px; cursor: pointer; transition: 0.2s; }
        .mini-player-card:hover { border-color: #ffcc00; background: rgba(255, 204, 0, 0.1); }
        .mini-player-card.online { border-left: 3px solid #00f2ff; }
        .mini-player-card.offline { border-left: 3px solid #666; opacity: 0.7; filter: grayscale(0.8); }
        
        .mini-avatar { position: relative; margin-right: 12px; }
        .avatar-img { width: 40px; height: 40px; border-radius: 50%; background-size: cover; border: 1px solid #fff; }
        .avatar-placeholder { width: 40px; height: 40px; border-radius: 50%; background: #222; border: 1px solid #555; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .status-dot { width: 10px; height: 10px; border-radius: 50%; position: absolute; bottom: 0; right: 0; border: 1px solid #000; }
        .status-dot.green { background: #00f2ff; box-shadow: 0 0 5px #00f2ff; }
        .status-dot.gray { background: #666; }

        .mini-info { display: flex; flex-direction: column; }
        .p-name { font-size: 14px; font-weight: bold; color: #fff; line-height: 1.2; }
        .p-meta { font-size: 10px; color: #aaa; }
        .p-lvl { font-size: 10px; color: #ffcc00; font-weight: bold; }
        .empty-slot { font-size: 12px; color: #666; text-align: center; padding: 20px 0; font-style: italic; }

        /* STATUS TOP */
        .session-status-top { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); border: 1px solid #00f2ff; padding: 10px 30px; border-radius: 30px; display: flex; align-items: center; gap: 15px; z-index: 40; box-shadow: 0 0 20px rgba(0, 242, 255, 0.2); }
        .status-indicator { width: 12px; height: 12px; background: #00f2ff; border-radius: 50%; box-shadow: 0 0 10px #00f2ff; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
        .status-info h2 { margin: 0; font-size: 16px; color: #fff; letter-spacing: 1px; }
        .status-info p { margin: 0; font-size: 10px; color: #00f2ff; text-transform: uppercase; letter-spacing: 1px; }

        /* WORKSPACE */
        .vtt-workspace { position: relative; z-index: 10; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; pointer-events: none; }
        .empty-tabletop-msg { font-size: 30px; color: rgba(255,255,255,0.1); font-weight: bold; letter-spacing: 5px; }

        /* DOCK DE FERRAMENTAS */
        .dm-tools-dock { position: absolute; right: 20px; bottom: 20px; display: flex; flex-direction: column; gap: 15px; z-index: 60; align-items: flex-end; }
        .tool-group { display: flex; align-items: center; gap: 10px; flex-direction: row-reverse; }
        .tool-label { background: rgba(0,0,0,0.8); padding: 4px 8px; border-radius: 4px; font-size: 10px; color: #ffcc00; opacity: 0; transition: 0.2s; pointer-events: none; transform: translateX(10px); }
        .tool-group:hover .tool-label { opacity: 1; transform: translateX(0); }
        
        /* Ajuste para os botes j existentes (Bazar/Forja) ficarem no estilo dock */
        /* Note: Forja e Bazar tem position fixed no componente original. 
           Idealmente, passariamos uma prop 'className' pra tirar o fixed, 
           mas aqui vamos usar CSS pra forar posio relativa dentro do dock */
        .dm-tools-dock .bazar-trigger-btn, 
        .dm-tools-dock .forja-trigger-btn { position: relative; bottom: auto; right: auto; margin: 0; box-shadow: 0 0 10px #000; width: 60px; height: 60px; }
        
        .tool-btn-placeholder { width: 60px; height: 60px; border-radius: 50%; background: #111; border: 2px solid #555; color: #fff; font-size: 24px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s; box-shadow: 0 0 10px #000; }
        .tool-btn-placeholder:hover { border-color: #ffcc00; color: #ffcc00; box-shadow: 0 0 20px #ffcc00; transform: scale(1.1); }
      `})]}):h.jsx("div",{className:"loading-screen-master",children:"BUSCANDO SINTONIA COM O TER..."})}const $M=()=>h.jsx("div",{style:{color:"white",padding:"50px"},children:"PGINA DO JOGADOR EM CONSTRUO"}),XM=({user:i,children:e})=>i&&i.email==="fffvtt10@gmail.com"?e:h.jsx(yT,{to:"/admin-login"});function JM(){const[i,e]=O.useState(!0),[n,r]=O.useState(null);return O.useEffect(()=>FR(at,c=>{r(c),i&&e(!1)}),[i]),i?h.jsxs("div",{style:{height:"100vh",width:"100vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#000",overflow:"hidden"},children:[h.jsx("img",{src:AM,alt:"Loading...",style:{width:"100px",marginBottom:"20px",filter:"drop-shadow(0 0 10px #ffcc00)"}}),h.jsx("div",{style:{width:"200px",height:"4px",background:"#333",borderRadius:"2px",overflow:"hidden"},children:h.jsx("div",{className:"progress-bar"})}),h.jsx("p",{style:{marginTop:"10px"},children:"CARREGANDO..."}),h.jsx("style",{children:`
          .progress-bar {
            height: 100%; background: #ffcc00; width: 0%;
            box-shadow: 0 0 10px #ffcc00;
            animation: fillProgress 1s ease-in-out forwards;
          }
          
          p { color: #ffcc00; font-family: 'serif'; font-size: 10px; letter-spacing: 3px; animation: fadeText 1s infinite alternate; }
          
          @keyframes fillProgress { from { width: 0%; } to { width: 100%; } }
          @keyframes pulseBlur { from { opacity: 0.5; } to { opacity: 0.8; } }
          @keyframes fadeText { from { opacity: 0.4; } to { opacity: 1; } }
        `})]}):h.jsxs(bT,{children:[h.jsx(Qa,{path:"/",element:h.jsx(TM,{})}),h.jsx(Qa,{path:"/login",element:h.jsx(NM,{})}),h.jsx(Qa,{path:"/mestre",element:h.jsx(kM,{})}),h.jsx(Qa,{path:"/mestre-vtt",element:h.jsx(YM,{})})," ",h.jsx(Qa,{path:"/jogador",element:h.jsx($M,{})}),h.jsx(Qa,{path:"/create-character",element:h.jsx(zM,{})}),h.jsx(Qa,{path:"/jogador-vtt",element:h.jsx(qM,{})}),h.jsx(Qa,{path:"/admin-login",element:h.jsx(RM,{})}),h.jsx(Qa,{path:"/admin-dashboard",element:h.jsx(XM,{user:n,children:h.jsx(CM,{})})})]})}_S.createRoot(document.getElementById("root")).render(h.jsx(hS.StrictMode,{children:h.jsx(qT,{children:h.jsx(JM,{})})}));
