(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function r_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Np={exports:{}},ic={};var ov;function zw(){if(ov)return ic;ov=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var f=null;if(c!==void 0&&(f=""+c),o.key!==void 0&&(f=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:i,type:s,key:f,ref:o!==void 0?o:null,props:c}}return ic.Fragment=e,ic.jsx=n,ic.jsxs=n,ic}var lv;function Lw(){return lv||(lv=1,Np.exports=zw()),Np.exports}var u=Lw(),Rp={exports:{}},Le={};var cv;function Uw(){if(cv)return Le;cv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),N=Symbol.iterator;function z(P){return P===null||typeof P!="object"?null:(P=N&&P[N]||P["@@iterator"],typeof P=="function"?P:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,D={};function X(P,Z,ue){this.props=P,this.context=Z,this.refs=D,this.updater=ue||H}X.prototype.isReactComponent={},X.prototype.setState=function(P,Z){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,Z,"setState")},X.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function Y(){}Y.prototype=X.prototype;function ee(P,Z,ue){this.props=P,this.context=Z,this.refs=D,this.updater=ue||H}var ae=ee.prototype=new Y;ae.constructor=ee,U(ae,X.prototype),ae.isPureReactComponent=!0;var ge=Array.isArray;function fe(){}var O={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function I(P,Z,ue){var be=ue.ref;return{$$typeof:i,type:P,key:Z,ref:be!==void 0?be:null,props:ue}}function V(P,Z){return I(P.type,Z,P.props)}function k(P){return typeof P=="object"&&P!==null&&P.$$typeof===i}function j(P){var Z={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ue){return Z[ue]})}var T=/\/+/g;function Te(P,Z){return typeof P=="object"&&P!==null&&P.key!=null?j(""+P.key):Z.toString(36)}function Se(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(fe,fe):(P.status="pending",P.then(function(Z){P.status==="pending"&&(P.status="fulfilled",P.value=Z)},function(Z){P.status==="pending"&&(P.status="rejected",P.reason=Z)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function G(P,Z,ue,be,oe){var xe=typeof P;(xe==="undefined"||xe==="boolean")&&(P=null);var ye=!1;if(P===null)ye=!0;else switch(xe){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(P.$$typeof){case i:case e:ye=!0;break;case _:return ye=P._init,G(ye(P._payload),Z,ue,be,oe)}}if(ye)return oe=oe(P),ye=be===""?"."+Te(P,0):be,ge(oe)?(ue="",ye!=null&&(ue=ye.replace(T,"$&/")+"/"),G(oe,Z,ue,"",function(Bt){return Bt})):oe!=null&&(k(oe)&&(oe=V(oe,ue+(oe.key==null||P&&P.key===oe.key?"":(""+oe.key).replace(T,"$&/")+"/")+ye)),Z.push(oe)),1;ye=0;var Ye=be===""?".":be+":";if(ge(P))for(var Qe=0;Qe<P.length;Qe++)be=P[Qe],xe=Ye+Te(be,Qe),ye+=G(be,Z,ue,xe,oe);else if(Qe=z(P),typeof Qe=="function")for(P=Qe.call(P),Qe=0;!(be=P.next()).done;)be=be.value,xe=Ye+Te(be,Qe++),ye+=G(be,Z,ue,xe,oe);else if(xe==="object"){if(typeof P.then=="function")return G(Se(P),Z,ue,be,oe);throw Z=String(P),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ye}function ce(P,Z,ue){if(P==null)return P;var be=[],oe=0;return G(P,be,"","",function(xe){return Z.call(ue,xe,oe++)}),be}function _e(P){if(P._status===-1){var Z=P._result;Z=Z(),Z.then(function(ue){(P._status===0||P._status===-1)&&(P._status=1,P._result=ue)},function(ue){(P._status===0||P._status===-1)&&(P._status=2,P._result=ue)}),P._status===-1&&(P._status=0,P._result=Z)}if(P._status===1)return P._result.default;throw P._result}var Pe=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},He={map:ce,forEach:function(P,Z,ue){ce(P,function(){Z.apply(this,arguments)},ue)},count:function(P){var Z=0;return ce(P,function(){Z++}),Z},toArray:function(P){return ce(P,function(Z){return Z})||[]},only:function(P){if(!k(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Le.Activity=E,Le.Children=He,Le.Component=X,Le.Fragment=n,Le.Profiler=o,Le.PureComponent=ee,Le.StrictMode=s,Le.Suspense=g,Le.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Le.__COMPILER_RUNTIME={__proto__:null,c:function(P){return O.H.useMemoCache(P)}},Le.cache=function(P){return function(){return P.apply(null,arguments)}},Le.cacheSignal=function(){return null},Le.cloneElement=function(P,Z,ue){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var be=U({},P.props),oe=P.key;if(Z!=null)for(xe in Z.key!==void 0&&(oe=""+Z.key),Z)!C.call(Z,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&Z.ref===void 0||(be[xe]=Z[xe]);var xe=arguments.length-2;if(xe===1)be.children=ue;else if(1<xe){for(var ye=Array(xe),Ye=0;Ye<xe;Ye++)ye[Ye]=arguments[Ye+2];be.children=ye}return I(P.type,oe,be)},Le.createContext=function(P){return P={$$typeof:f,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:c,_context:P},P},Le.createElement=function(P,Z,ue){var be,oe={},xe=null;if(Z!=null)for(be in Z.key!==void 0&&(xe=""+Z.key),Z)C.call(Z,be)&&be!=="key"&&be!=="__self"&&be!=="__source"&&(oe[be]=Z[be]);var ye=arguments.length-2;if(ye===1)oe.children=ue;else if(1<ye){for(var Ye=Array(ye),Qe=0;Qe<ye;Qe++)Ye[Qe]=arguments[Qe+2];oe.children=Ye}if(P&&P.defaultProps)for(be in ye=P.defaultProps,ye)oe[be]===void 0&&(oe[be]=ye[be]);return I(P,xe,oe)},Le.createRef=function(){return{current:null}},Le.forwardRef=function(P){return{$$typeof:m,render:P}},Le.isValidElement=k,Le.lazy=function(P){return{$$typeof:_,_payload:{_status:-1,_result:P},_init:_e}},Le.memo=function(P,Z){return{$$typeof:b,type:P,compare:Z===void 0?null:Z}},Le.startTransition=function(P){var Z=O.T,ue={};O.T=ue;try{var be=P(),oe=O.S;oe!==null&&oe(ue,be),typeof be=="object"&&be!==null&&typeof be.then=="function"&&be.then(fe,Pe)}catch(xe){Pe(xe)}finally{Z!==null&&ue.types!==null&&(Z.types=ue.types),O.T=Z}},Le.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Le.use=function(P){return O.H.use(P)},Le.useActionState=function(P,Z,ue){return O.H.useActionState(P,Z,ue)},Le.useCallback=function(P,Z){return O.H.useCallback(P,Z)},Le.useContext=function(P){return O.H.useContext(P)},Le.useDebugValue=function(){},Le.useDeferredValue=function(P,Z){return O.H.useDeferredValue(P,Z)},Le.useEffect=function(P,Z){return O.H.useEffect(P,Z)},Le.useEffectEvent=function(P){return O.H.useEffectEvent(P)},Le.useId=function(){return O.H.useId()},Le.useImperativeHandle=function(P,Z,ue){return O.H.useImperativeHandle(P,Z,ue)},Le.useInsertionEffect=function(P,Z){return O.H.useInsertionEffect(P,Z)},Le.useLayoutEffect=function(P,Z){return O.H.useLayoutEffect(P,Z)},Le.useMemo=function(P,Z){return O.H.useMemo(P,Z)},Le.useOptimistic=function(P,Z){return O.H.useOptimistic(P,Z)},Le.useReducer=function(P,Z,ue){return O.H.useReducer(P,Z,ue)},Le.useRef=function(P){return O.H.useRef(P)},Le.useState=function(P){return O.H.useState(P)},Le.useSyncExternalStore=function(P,Z,ue){return O.H.useSyncExternalStore(P,Z,ue)},Le.useTransition=function(){return O.H.useTransition()},Le.version="19.2.4",Le}var uv;function Tm(){return uv||(uv=1,Rp.exports=Uw()),Rp.exports}var w=Tm();const Bw=r_(w);var Cp={exports:{}},sc={},Ip={exports:{}},jp={};var dv;function Hw(){return dv||(dv=1,(function(i){function e(G,ce){var _e=G.length;G.push(ce);e:for(;0<_e;){var Pe=_e-1>>>1,He=G[Pe];if(0<o(He,ce))G[Pe]=ce,G[_e]=He,_e=Pe;else break e}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var ce=G[0],_e=G.pop();if(_e!==ce){G[0]=_e;e:for(var Pe=0,He=G.length,P=He>>>1;Pe<P;){var Z=2*(Pe+1)-1,ue=G[Z],be=Z+1,oe=G[be];if(0>o(ue,_e))be<He&&0>o(oe,ue)?(G[Pe]=oe,G[be]=_e,Pe=be):(G[Pe]=ue,G[Z]=_e,Pe=Z);else if(be<He&&0>o(oe,_e))G[Pe]=oe,G[be]=_e,Pe=be;else break e}}return ce}function o(G,ce){var _e=G.sortIndex-ce.sortIndex;return _e!==0?_e:G.id-ce.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var g=[],b=[],_=1,E=null,N=3,z=!1,H=!1,U=!1,D=!1,X=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function ae(G){for(var ce=n(b);ce!==null;){if(ce.callback===null)s(b);else if(ce.startTime<=G)s(b),ce.sortIndex=ce.expirationTime,e(g,ce);else break;ce=n(b)}}function ge(G){if(U=!1,ae(G),!H)if(n(g)!==null)H=!0,fe||(fe=!0,j());else{var ce=n(b);ce!==null&&Se(ge,ce.startTime-G)}}var fe=!1,O=-1,C=5,I=-1;function V(){return D?!0:!(i.unstable_now()-I<C)}function k(){if(D=!1,fe){var G=i.unstable_now();I=G;var ce=!0;try{e:{H=!1,U&&(U=!1,Y(O),O=-1),z=!0;var _e=N;try{t:{for(ae(G),E=n(g);E!==null&&!(E.expirationTime>G&&V());){var Pe=E.callback;if(typeof Pe=="function"){E.callback=null,N=E.priorityLevel;var He=Pe(E.expirationTime<=G);if(G=i.unstable_now(),typeof He=="function"){E.callback=He,ae(G),ce=!0;break t}E===n(g)&&s(g),ae(G)}else s(g);E=n(g)}if(E!==null)ce=!0;else{var P=n(b);P!==null&&Se(ge,P.startTime-G),ce=!1}}break e}finally{E=null,N=_e,z=!1}ce=void 0}}finally{ce?j():fe=!1}}}var j;if(typeof ee=="function")j=function(){ee(k)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,Te=T.port2;T.port1.onmessage=k,j=function(){Te.postMessage(null)}}else j=function(){X(k,0)};function Se(G,ce){O=X(function(){G(i.unstable_now())},ce)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(G){G.callback=null},i.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<G?Math.floor(1e3/G):5},i.unstable_getCurrentPriorityLevel=function(){return N},i.unstable_next=function(G){switch(N){case 1:case 2:case 3:var ce=3;break;default:ce=N}var _e=N;N=ce;try{return G()}finally{N=_e}},i.unstable_requestPaint=function(){D=!0},i.unstable_runWithPriority=function(G,ce){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var _e=N;N=G;try{return ce()}finally{N=_e}},i.unstable_scheduleCallback=function(G,ce,_e){var Pe=i.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Pe+_e:Pe):_e=Pe,G){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=_e+He,G={id:_++,callback:ce,priorityLevel:G,startTime:_e,expirationTime:He,sortIndex:-1},_e>Pe?(G.sortIndex=_e,e(b,G),n(g)===null&&G===n(b)&&(U?(Y(O),O=-1):U=!0,Se(ge,_e-Pe))):(G.sortIndex=He,e(g,G),H||z||(H=!0,fe||(fe=!0,j()))),G},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(G){var ce=N;return function(){var _e=N;N=ce;try{return G.apply(this,arguments)}finally{N=_e}}}})(jp)),jp}var fv;function qw(){return fv||(fv=1,Ip.exports=Hw()),Ip.exports}var kp={exports:{}},wn={};var hv;function Fw(){if(hv)return wn;hv=1;var i=Tm();function e(g){var b="https://react.dev/errors/"+g;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)b+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,b,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:b,implementation:_}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,b){if(g==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,wn.createPortal=function(g,b){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return c(g,b,null,_)},wn.flushSync=function(g){var b=f.T,_=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=b,s.p=_,s.d.f()}},wn.preconnect=function(g,b){typeof g=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,s.d.C(g,b))},wn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},wn.preinit=function(g,b){if(typeof g=="string"&&b&&typeof b.as=="string"){var _=b.as,E=m(_,b.crossOrigin),N=typeof b.integrity=="string"?b.integrity:void 0,z=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;_==="style"?s.d.S(g,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:E,integrity:N,fetchPriority:z}):_==="script"&&s.d.X(g,{crossOrigin:E,integrity:N,fetchPriority:z,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},wn.preinitModule=function(g,b){if(typeof g=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var _=m(b.as,b.crossOrigin);s.d.M(g,{crossOrigin:_,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&s.d.M(g)},wn.preload=function(g,b){if(typeof g=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var _=b.as,E=m(_,b.crossOrigin);s.d.L(g,_,{crossOrigin:E,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},wn.preloadModule=function(g,b){if(typeof g=="string")if(b){var _=m(b.as,b.crossOrigin);s.d.m(g,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:_,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else s.d.m(g)},wn.requestFormReset=function(g){s.d.r(g)},wn.unstable_batchedUpdates=function(g,b){return g(b)},wn.useFormState=function(g,b,_){return f.H.useFormState(g,b,_)},wn.useFormStatus=function(){return f.H.useHostTransitionStatus()},wn.version="19.2.4",wn}var pv;function Gw(){if(pv)return kp.exports;pv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),kp.exports=Fw(),kp.exports}var mv;function $w(){if(mv)return sc;mv=1;var i=qw(),e=Tm(),n=Gw();function s(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var a=t,r=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(r=a.return),t=a.return;while(t)}return a.tag===3?r:null}function f(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function m(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(s(188))}function b(t){var a=t.alternate;if(!a){if(a=c(t),a===null)throw Error(s(188));return a!==t?null:t}for(var r=t,l=a;;){var h=r.return;if(h===null)break;var p=h.alternate;if(p===null){if(l=h.return,l!==null){r=l;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===r)return g(h),t;if(p===l)return g(h),a;p=p.sibling}throw Error(s(188))}if(r.return!==l.return)r=h,l=p;else{for(var v=!1,A=h.child;A;){if(A===r){v=!0,r=h,l=p;break}if(A===l){v=!0,l=h,r=p;break}A=A.sibling}if(!v){for(A=p.child;A;){if(A===r){v=!0,r=p,l=h;break}if(A===l){v=!0,l=p,r=h;break}A=A.sibling}if(!v)throw Error(s(189))}}if(r.alternate!==l)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?t:a}function _(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=_(t),a!==null)return a;t=t.sibling}return null}var E=Object.assign,N=Symbol.for("react.element"),z=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function j(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var T=Symbol.for("react.client.reference");function Te(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===T?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case U:return"Fragment";case X:return"Profiler";case D:return"StrictMode";case ge:return"Suspense";case fe:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case H:return"Portal";case ee:return t.displayName||"Context";case Y:return(t._context.displayName||"Context")+".Consumer";case ae:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O:return a=t.displayName||null,a!==null?a:Te(t.type)||"Memo";case C:a=t._payload,t=t._init;try{return Te(t(a))}catch{}}return null}var Se=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Pe=[],He=-1;function P(t){return{current:t}}function Z(t){0>He||(t.current=Pe[He],Pe[He]=null,He--)}function ue(t,a){He++,Pe[He]=t.current,t.current=a}var be=P(null),oe=P(null),xe=P(null),ye=P(null);function Ye(t,a){switch(ue(xe,a),ue(oe,t),ue(be,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Iy(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Iy(a),t=jy(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Z(be),ue(be,t)}function Qe(){Z(be),Z(oe),Z(xe)}function Bt(t){t.memoizedState!==null&&ue(ye,t);var a=be.current,r=jy(a,t.type);a!==r&&(ue(oe,t),ue(be,r))}function Ht(t){oe.current===t&&(Z(be),Z(oe)),ye.current===t&&(Z(ye),ec._currentValue=_e)}var pe,B;function ve(t){if(pe===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);pe=a&&a[1]||"",B=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pe+t+B}var le=!1;function Ne(t,a){if(!t||le)return"";le=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(W){var Q=W}Reflect.construct(t,[],se)}else{try{se.call()}catch(W){Q=W}t.call(se.prototype)}}else{try{throw Error()}catch(W){Q=W}(se=t())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(W){if(W&&Q&&typeof W.stack=="string")return[W.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),v=p[0],A=p[1];if(v&&A){var M=v.split(`
`),K=A.split(`
`);for(h=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;h<K.length&&!K[h].includes("DetermineComponentFrameRoot");)h++;if(l===M.length||h===K.length)for(l=M.length-1,h=K.length-1;1<=l&&0<=h&&M[l]!==K[h];)h--;for(;1<=l&&0<=h;l--,h--)if(M[l]!==K[h]){if(l!==1||h!==1)do if(l--,h--,0>h||M[l]!==K[h]){var te=`
`+M[l].replace(" at new "," at ");return t.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",t.displayName)),te}while(1<=l&&0<=h);break}}}finally{le=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?ve(r):""}function Ce(t,a){switch(t.tag){case 26:case 27:case 5:return ve(t.type);case 16:return ve("Lazy");case 13:return t.child!==a&&a!==null?ve("Suspense Fallback"):ve("Suspense");case 19:return ve("SuspenseList");case 0:case 15:return Ne(t.type,!1);case 11:return Ne(t.type.render,!1);case 1:return Ne(t.type,!0);case 31:return ve("Activity");default:return""}}function it(t){try{var a="",r=null;do a+=Ce(t,r),r=t,t=t.return;while(t);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Xe=Object.prototype.hasOwnProperty,Rt=i.unstable_scheduleCallback,On=i.unstable_cancelCallback,R=i.unstable_shouldYield,de=i.unstable_requestPaint,qe=i.unstable_now,zt=i.unstable_getCurrentPriorityLevel,Ct=i.unstable_ImmediatePriority,It=i.unstable_UserBlockingPriority,Dn=i.unstable_NormalPriority,he=i.unstable_LowPriority,pt=i.unstable_IdlePriority,Lt=i.log,st=i.unstable_setDisableYieldValue,Ve=null,dt=null;function rt(t){if(typeof Lt=="function"&&st(t),dt&&typeof dt.setStrictMode=="function")try{dt.setStrictMode(Ve,t)}catch{}}var Fe=Math.clz32?Math.clz32:Hc,va=Math.log,Pa=Math.LN2;function Hc(t){return t>>>=0,t===0?32:31-(va(t)/Pa|0)|0}var Va=256,Ws=262144,Jt=4194304;function za(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function La(t,a,r){var l=t.pendingLanes;if(l===0)return 0;var h=0,p=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~p,l!==0?h=za(l):(v&=A,v!==0?h=za(v):r||(r=A&~t,r!==0&&(h=za(r))))):(A=l&~p,A!==0?h=za(A):v!==0?h=za(v):r||(r=l&~t,r!==0&&(h=za(r)))),h===0?0:a!==0&&a!==h&&(a&p)===0&&(p=h&-h,r=a&-a,p>=r||p===32&&(r&4194048)!==0)?a:h}function xa(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function jf(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qc(){var t=Jt;return Jt<<=1,(Jt&62914560)===0&&(Jt=4194304),t}function Ua(t){for(var a=[],r=0;31>r;r++)a.push(t);return a}function Zs(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function kf(t,a,r,l,h,p){var v=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var A=t.entanglements,M=t.expirationTimes,K=t.hiddenUpdates;for(r=v&~r;0<r;){var te=31-Fe(r),se=1<<te;A[te]=0,M[te]=-1;var Q=K[te];if(Q!==null)for(K[te]=null,te=0;te<Q.length;te++){var W=Q[te];W!==null&&(W.lane&=-536870913)}r&=~se}l!==0&&er(t,l,0),p!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=p&~(v&~a))}function er(t,a,r){t.pendingLanes|=a,t.suspendedLanes&=~a;var l=31-Fe(a);t.entangledLanes|=a,t.entanglements[l]=t.entanglements[l]|1073741824|r&261930}function sl(t,a){var r=t.entangledLanes|=a;for(t=t.entanglements;r;){var l=31-Fe(r),h=1<<l;h&a|t[l]&a&&(t[l]|=a),r&=~h}}function rl(t,a){var r=a&-a;return r=(r&42)!==0?1:tr(r),(r&(t.suspendedLanes|a))!==0?0:r}function tr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function yi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Fc(){var t=ce.p;return t!==0?t:(t=window.event,t===void 0?32:ev(t.type))}function _a(t,a){var r=ce.p;try{return ce.p=t,a()}finally{ce.p=r}}var Ea=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Ea,dn="__reactProps$"+Ea,Ba="__reactContainer$"+Ea,qr="__reactEvents$"+Ea,Of="__reactListeners$"+Ea,Gc="__reactHandles$"+Ea,$c="__reactResources$"+Ea,Ha="__reactMarker$"+Ea;function Fr(t){delete t[Wt],delete t[dn],delete t[qr],delete t[Of],delete t[Gc]}function qa(t){var a=t[Wt];if(a)return a;for(var r=t.parentNode;r;){if(a=r[Ba]||r[Wt]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(t=zy(t);t!==null;){if(r=t[Wt])return r;t=zy(t)}return a}t=r,r=t.parentNode}return null}function ia(t){if(t=t[Wt]||t[Ba]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function Gn(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(s(33))}function Fa(t){var a=t[$c];return a||(a=t[$c]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Zt(t){t[Ha]=!0}var ol=new Set,ll={};function Ga(t,a){$a(t,a),$a(t+"Capture",a)}function $a(t,a){for(ll[t]=a,t=0;t<a.length;t++)ol.add(a[t])}var cl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ul={},dl={};function Kc(t){return Xe.call(dl,t)?!0:Xe.call(ul,t)?!1:cl.test(t)?dl[t]=!0:(ul[t]=!0,!1)}function Gr(t,a,r){if(Kc(a))if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+r)}}function $n(t,a,r){if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+r)}}function en(t,a,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(a,r,""+l)}}function fn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Wi(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function fl(t,a,r){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,p=l.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return h.call(this)},set:function(v){r=""+v,p.call(this,v)}}),Object.defineProperty(t,a,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function gt(t){if(!t._valueTracker){var a=Wi(t)?"checked":"value";t._valueTracker=fl(t,a,""+t[a])}}function nr(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var r=a.getValue(),l="";return t&&(l=Wi(t)?t.checked?"true":"false":t.value),t=l,t!==r?(a.setValue(t),!0):!1}function Ka(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ar=/[\n"\\]/g;function Mn(t){return t.replace(ar,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function $r(t,a,r,l,h,p,v,A){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),a!=null?v==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+fn(a)):t.value!==""+fn(a)&&(t.value=""+fn(a)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),a!=null?hl(t,v,fn(a)):r!=null?hl(t,v,fn(r)):l!=null&&t.removeAttribute("value"),h==null&&p!=null&&(t.defaultChecked=!!p),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+fn(A):t.removeAttribute("name")}function Qc(t,a,r,l,h,p,v,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),a!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){gt(t);return}r=r!=null?""+fn(r):"",a=a!=null?""+fn(a):r,A||a===t.value||(t.value=a),t.defaultValue=a}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),gt(t)}function hl(t,a,r){a==="number"&&Ka(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Zi(t,a,r,l){if(t=t.options,a){a={};for(var h=0;h<r.length;h++)a["$"+r[h]]=!0;for(r=0;r<t.length;r++)h=a.hasOwnProperty("$"+t[r].value),t[r].selected!==h&&(t[r].selected=h),h&&l&&(t[r].defaultSelected=!0)}else{for(r=""+fn(r),a=null,h=0;h<t.length;h++){if(t[h].value===r){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}a!==null||t[h].disabled||(a=t[h])}a!==null&&(a.selected=!0)}}function Yc(t,a,r){if(a!=null&&(a=""+fn(a),a!==t.value&&(t.value=a),r==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=r!=null?""+fn(r):""}function es(t,a,r,l){if(a==null){if(l!=null){if(r!=null)throw Error(s(92));if(Se(l)){if(1<l.length)throw Error(s(93));l=l[0]}r=l}r==null&&(r=""),a=r}r=fn(a),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l),gt(t)}function Pn(t,a){if(a){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=a;return}}t.textContent=a}var Xc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pl(t,a,r){var l=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":l?t.setProperty(a,r):typeof r!="number"||r===0||Xc.has(a)?a==="float"?t.cssFloat=r:t[a]=(""+r).trim():t[a]=r+"px"}function ml(t,a,r){if(a!=null&&typeof a!="object")throw Error(s(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in a)l=a[h],a.hasOwnProperty(h)&&r[h]!==l&&pl(t,h,l)}else for(var p in a)a.hasOwnProperty(p)&&pl(t,p,a[p])}function Kr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ts=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qr(t){return ts.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Aa(){}var gl=null;function sa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ns=null,Qa=null;function ir(t){var a=ia(t);if(a&&(t=a.stateNode)){var r=t[dn]||null;e:switch(t=a.stateNode,a.type){case"input":if($r(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Mn(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var l=r[a];if(l!==t&&l.form===t.form){var h=l[dn]||null;if(!h)throw Error(s(90));$r(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(a=0;a<r.length;a++)l=r[a],l.form===t.form&&nr(l)}break e;case"textarea":Yc(t,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&Zi(t,!!r.multiple,a,!1)}}}var Yr=!1;function as(t,a,r){if(Yr)return t(a,r);Yr=!0;try{var l=t(a);return l}finally{if(Yr=!1,(ns!==null||Qa!==null)&&(Fu(),ns&&(a=ns,t=Qa,Qa=ns=null,ir(a),t)))for(a=0;a<t.length;a++)ir(t[a])}}function wa(t,a){var r=t.stateNode;if(r===null)return null;var l=r[dn]||null;if(l===null)return null;r=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(s(231,a,typeof r));return r}var ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sr=!1;if(ra)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){sr=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{sr=!1}var Ya=null,bl=null,rr=null;function yl(){if(rr)return rr;var t,a=bl,r=a.length,l,h="value"in Ya?Ya.value:Ya.textContent,p=h.length;for(t=0;t<r&&a[t]===h[t];t++);var v=r-t;for(l=1;l<=v&&a[r-l]===h[p-l];l++);return rr=h.slice(t,1<l?1-l:void 0)}function or(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function vi(){return!0}function Sa(){return!1}function mn(t){function a(r,l,h,p,v){this._reactName=r,this._targetInst=h,this.type=l,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(r=t[A],this[A]=r?r(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?vi:Sa,this.isPropagationStopped=Sa,this}return E(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=vi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=vi)},persist:function(){},isPersistent:vi}),a}var xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xa=mn(xi),is=E({},xi,{view:0,detail:0}),vl=mn(is),ss,Xr,Ja,Jr=E({},is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ja&&(Ja&&t.type==="mousemove"?(ss=t.screenX-Ja.screenX,Xr=t.screenY-Ja.screenY):Xr=ss=0,Ja=t),ss)},movementY:function(t){return"movementY"in t?t.movementY:Xr}}),xl=mn(Jr),lr=E({},Jr,{dataTransfer:0}),Wc=mn(lr),Zc=E({},is,{relatedTarget:0}),cr=mn(Zc),_l=E({},xi,{animationName:0,elapsedTime:0,pseudoElement:0}),eu=mn(_l),Wr=E({},xi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tu=mn(Wr),nu=E({},xi,{data:0}),Wa=mn(nu),au={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ru(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=su[t])?!!a[t]:!1}function rs(){return ru}var jn=E({},is,{key:function(t){if(t.key){var a=au[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=or(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rs,charCode:function(t){return t.type==="keypress"?or(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?or(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ou=mn(jn),lu=E({},Jr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_i=mn(lu),d=E({},is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rs}),y=mn(d),x=E({},xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=mn(x),F=E({},Jr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J=mn(F),me=E({},xi,{newState:0,oldState:0}),Ge=mn(me),$t=[9,13,27,32],ft=ra&&"CompositionEvent"in window,Mt=null;ra&&"documentMode"in document&&(Mt=document.documentMode);var oa=ra&&"TextEvent"in window&&!Mt,Za=ra&&(!ft||Mt&&8<Mt&&11>=Mt),Ta=" ",Na=!1;function ur(t,a){switch(t){case"keyup":return $t.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var eo=!1;function lA(t,a){switch(t){case"compositionend":return Zr(a);case"keypress":return a.which!==32?null:(Na=!0,Ta);case"textInput":return t=a.data,t===Ta&&Na?null:t;default:return null}}function cA(t,a){if(eo)return t==="compositionend"||!ft&&ur(t,a)?(t=yl(),rr=bl=Ya=null,eo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Za&&a.locale!=="ko"?null:a.data;default:return null}}var uA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bg(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!uA[t.type]:a==="textarea"}function Hg(t,a,r,l){ns?Qa?Qa.push(l):Qa=[l]:ns=l,a=Ju(a,"onChange"),0<a.length&&(r=new Xa("onChange","change",null,r,l),t.push({event:r,listeners:a}))}var El=null,Al=null;function dA(t){wy(t,0)}function cu(t){var a=Gn(t);if(nr(a))return t}function qg(t,a){if(t==="change")return a}var Fg=!1;if(ra){var Df;if(ra){var Mf="oninput"in document;if(!Mf){var Gg=document.createElement("div");Gg.setAttribute("oninput","return;"),Mf=typeof Gg.oninput=="function"}Df=Mf}else Df=!1;Fg=Df&&(!document.documentMode||9<document.documentMode)}function $g(){El&&(El.detachEvent("onpropertychange",Kg),Al=El=null)}function Kg(t){if(t.propertyName==="value"&&cu(Al)){var a=[];Hg(a,Al,t,sa(t)),as(dA,a)}}function fA(t,a,r){t==="focusin"?($g(),El=a,Al=r,El.attachEvent("onpropertychange",Kg)):t==="focusout"&&$g()}function hA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cu(Al)}function pA(t,a){if(t==="click")return cu(a)}function mA(t,a){if(t==="input"||t==="change")return cu(a)}function gA(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Kn=typeof Object.is=="function"?Object.is:gA;function wl(t,a){if(Kn(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var r=Object.keys(t),l=Object.keys(a);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var h=r[l];if(!Xe.call(a,h)||!Kn(t[h],a[h]))return!1}return!0}function Qg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yg(t,a){var r=Qg(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=a&&l>=a)return{node:r,offset:a-t};t=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Qg(r)}}function Xg(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Xg(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Jg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=Ka(t.document);a instanceof t.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)t=a.contentWindow;else break;a=Ka(t.document)}return a}function Pf(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var bA=ra&&"documentMode"in document&&11>=document.documentMode,to=null,Vf=null,Sl=null,zf=!1;function Wg(t,a,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;zf||to==null||to!==Ka(l)||(l=to,"selectionStart"in l&&Pf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Sl&&wl(Sl,l)||(Sl=l,l=Ju(Vf,"onSelect"),0<l.length&&(a=new Xa("onSelect","select",null,a,r),t.push({event:a,listeners:l}),a.target=to)))}function dr(t,a){var r={};return r[t.toLowerCase()]=a.toLowerCase(),r["Webkit"+t]="webkit"+a,r["Moz"+t]="moz"+a,r}var no={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},Lf={},Zg={};ra&&(Zg=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function fr(t){if(Lf[t])return Lf[t];if(!no[t])return t;var a=no[t],r;for(r in a)if(a.hasOwnProperty(r)&&r in Zg)return Lf[t]=a[r];return t}var e0=fr("animationend"),t0=fr("animationiteration"),n0=fr("animationstart"),yA=fr("transitionrun"),vA=fr("transitionstart"),xA=fr("transitioncancel"),a0=fr("transitionend"),i0=new Map,Uf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uf.push("scrollEnd");function Ra(t,a){i0.set(t,a),Ga(a,[t])}var uu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},la=[],ao=0,Bf=0;function du(){for(var t=ao,a=Bf=ao=0;a<t;){var r=la[a];la[a++]=null;var l=la[a];la[a++]=null;var h=la[a];la[a++]=null;var p=la[a];if(la[a++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}p!==0&&s0(r,h,p)}}function fu(t,a,r,l){la[ao++]=t,la[ao++]=a,la[ao++]=r,la[ao++]=l,Bf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Hf(t,a,r,l){return fu(t,a,r,l),hu(t)}function hr(t,a){return fu(t,null,null,a),hu(t)}function s0(t,a,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var h=!1,p=t.return;p!==null;)p.childLanes|=r,l=p.alternate,l!==null&&(l.childLanes|=r),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(h=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,h&&a!==null&&(h=31-Fe(r),t=p.hiddenUpdates,l=t[h],l===null?t[h]=[a]:l.push(a),a.lane=r|536870912),p):null}function hu(t){if(50<Kl)throw Kl=0,Jh=null,Error(s(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var io={};function _A(t,a,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(t,a,r,l){return new _A(t,a,r,l)}function qf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ei(t,a){var r=t.alternate;return r===null?(r=Qn(t.tag,a,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=a,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,a=t.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function r0(t,a){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,a=r.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function pu(t,a,r,l,h,p){var v=0;if(l=t,typeof t=="function")qf(t)&&(v=1);else if(typeof t=="string")v=Tw(t,r,be.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=Qn(31,r,a,h),t.elementType=I,t.lanes=p,t;case U:return pr(r.children,h,p,a);case D:v=8,h|=24;break;case X:return t=Qn(12,r,a,h|2),t.elementType=X,t.lanes=p,t;case ge:return t=Qn(13,r,a,h),t.elementType=ge,t.lanes=p,t;case fe:return t=Qn(19,r,a,h),t.elementType=fe,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ee:v=10;break e;case Y:v=9;break e;case ae:v=11;break e;case O:v=14;break e;case C:v=16,l=null;break e}v=29,r=Error(s(130,t===null?"null":typeof t,"")),l=null}return a=Qn(v,r,a,h),a.elementType=t,a.type=l,a.lanes=p,a}function pr(t,a,r,l){return t=Qn(7,t,l,a),t.lanes=r,t}function Ff(t,a,r){return t=Qn(6,t,null,a),t.lanes=r,t}function o0(t){var a=Qn(18,null,null,0);return a.stateNode=t,a}function Gf(t,a,r){return a=Qn(4,t.children!==null?t.children:[],t.key,a),a.lanes=r,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var l0=new WeakMap;function ca(t,a){if(typeof t=="object"&&t!==null){var r=l0.get(t);return r!==void 0?r:(a={value:t,source:a,stack:it(a)},l0.set(t,a),a)}return{value:t,source:a,stack:it(a)}}var so=[],ro=0,mu=null,Tl=0,ua=[],da=0,os=null,ei=1,ti="";function Ai(t,a){so[ro++]=Tl,so[ro++]=mu,mu=t,Tl=a}function c0(t,a,r){ua[da++]=ei,ua[da++]=ti,ua[da++]=os,os=t;var l=ei;t=ti;var h=32-Fe(l)-1;l&=~(1<<h),r+=1;var p=32-Fe(a)+h;if(30<p){var v=h-h%5;p=(l&(1<<v)-1).toString(32),l>>=v,h-=v,ei=1<<32-Fe(a)+h|r<<h|l,ti=p+t}else ei=1<<p|r<<h|l,ti=t}function $f(t){t.return!==null&&(Ai(t,1),c0(t,1,0))}function Kf(t){for(;t===mu;)mu=so[--ro],so[ro]=null,Tl=so[--ro],so[ro]=null;for(;t===os;)os=ua[--da],ua[da]=null,ti=ua[--da],ua[da]=null,ei=ua[--da],ua[da]=null}function u0(t,a){ua[da++]=ei,ua[da++]=ti,ua[da++]=os,ei=a.id,ti=a.overflow,os=t}var gn=null,jt=null,ot=!1,ls=null,fa=!1,Qf=Error(s(519));function cs(t){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nl(ca(a,t)),Qf}function d0(t){var a=t.stateNode,r=t.type,l=t.memoizedProps;switch(a[Wt]=t,a[dn]=l,r){case"dialog":We("cancel",a),We("close",a);break;case"iframe":case"object":case"embed":We("load",a);break;case"video":case"audio":for(r=0;r<Yl.length;r++)We(Yl[r],a);break;case"source":We("error",a);break;case"img":case"image":case"link":We("error",a),We("load",a);break;case"details":We("toggle",a);break;case"input":We("invalid",a),Qc(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":We("invalid",a);break;case"textarea":We("invalid",a),es(a,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||l.suppressHydrationWarning===!0||Ry(a.textContent,r)?(l.popover!=null&&(We("beforetoggle",a),We("toggle",a)),l.onScroll!=null&&We("scroll",a),l.onScrollEnd!=null&&We("scrollend",a),l.onClick!=null&&(a.onclick=Aa),a=!0):a=!1,a||cs(t,!0)}function f0(t){for(gn=t.return;gn;)switch(gn.tag){case 5:case 31:case 13:fa=!1;return;case 27:case 3:fa=!0;return;default:gn=gn.return}}function oo(t){if(t!==gn)return!1;if(!ot)return f0(t),ot=!0,!1;var a=t.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||fp(t.type,t.memoizedProps)),r=!r),r&&jt&&cs(t),f0(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));jt=Vy(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));jt=Vy(t)}else a===27?(a=jt,As(t.type)?(t=bp,bp=null,jt=t):jt=a):jt=gn?pa(t.stateNode.nextSibling):null;return!0}function mr(){jt=gn=null,ot=!1}function Yf(){var t=ls;return t!==null&&(Un===null?Un=t:Un.push.apply(Un,t),ls=null),t}function Nl(t){ls===null?ls=[t]:ls.push(t)}var Xf=P(null),gr=null,wi=null;function us(t,a,r){ue(Xf,a._currentValue),a._currentValue=r}function Si(t){t._currentValue=Xf.current,Z(Xf)}function Jf(t,a,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===r)break;t=t.return}}function Wf(t,a,r,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var p=h.dependencies;if(p!==null){var v=h.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=h;for(var M=0;M<a.length;M++)if(A.context===a[M]){p.lanes|=r,A=p.alternate,A!==null&&(A.lanes|=r),Jf(p.return,r,t),l||(v=null);break e}p=A.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=r,p=v.alternate,p!==null&&(p.lanes|=r),Jf(v,r,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function lo(t,a,r,l){t=null;for(var h=a,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var A=h.type;Kn(h.pendingProps.value,v.value)||(t!==null?t.push(A):t=[A])}}else if(h===ye.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(ec):t=[ec])}h=h.return}t!==null&&Wf(a,t,r,l),a.flags|=262144}function gu(t){for(t=t.firstContext;t!==null;){if(!Kn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function br(t){gr=t,wi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function bn(t){return h0(gr,t)}function bu(t,a){return gr===null&&br(t),h0(t,a)}function h0(t,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},wi===null){if(t===null)throw Error(s(308));wi=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else wi=wi.next=a;return r}var EA=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){a.aborted=!0,t.forEach(function(r){return r()})}},AA=i.unstable_scheduleCallback,wA=i.unstable_NormalPriority,tn={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zf(){return{controller:new EA,data:new Map,refCount:0}}function Rl(t){t.refCount--,t.refCount===0&&AA(wA,function(){t.controller.abort()})}var Cl=null,eh=0,co=0,uo=null;function SA(t,a){if(Cl===null){var r=Cl=[];eh=0,co=ap(),uo={status:"pending",value:void 0,then:function(l){r.push(l)}}}return eh++,a.then(p0,p0),a}function p0(){if(--eh===0&&Cl!==null){uo!==null&&(uo.status="fulfilled");var t=Cl;Cl=null,co=0,uo=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function TA(t,a){var r=[],l={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return t.then(function(){l.status="fulfilled",l.value=a;for(var h=0;h<r.length;h++)(0,r[h])(a)},function(h){for(l.status="rejected",l.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),l}var m0=G.S;G.S=function(t,a){Wb=qe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&SA(t,a),m0!==null&&m0(t,a)};var yr=P(null);function th(){var t=yr.current;return t!==null?t:At.pooledCache}function yu(t,a){a===null?ue(yr,yr.current):ue(yr,a.pool)}function g0(){var t=th();return t===null?null:{parent:tn._currentValue,pool:t}}var fo=Error(s(460)),nh=Error(s(474)),vu=Error(s(542)),xu={then:function(){}};function b0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function y0(t,a,r){switch(r=t[r],r===void 0?t.push(a):r!==a&&(a.then(Aa,Aa),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,x0(t),t;default:if(typeof a.status=="string")a.then(Aa,Aa);else{if(t=At,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=a,t.status="pending",t.then(function(l){if(a.status==="pending"){var h=a;h.status="fulfilled",h.value=l}},function(l){if(a.status==="pending"){var h=a;h.status="rejected",h.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,x0(t),t}throw xr=a,fo}}function vr(t){try{var a=t._init;return a(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(xr=r,fo):r}}var xr=null;function v0(){if(xr===null)throw Error(s(459));var t=xr;return xr=null,t}function x0(t){if(t===fo||t===vu)throw Error(s(483))}var ho=null,Il=0;function _u(t){var a=Il;return Il+=1,ho===null&&(ho=[]),y0(ho,t,a)}function jl(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Eu(t,a){throw a.$$typeof===N?Error(s(525)):(t=Object.prototype.toString.call(a),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function _0(t){function a(q,L){if(t){var $=q.deletions;$===null?(q.deletions=[L],q.flags|=16):$.push(L)}}function r(q,L){if(!t)return null;for(;L!==null;)a(q,L),L=L.sibling;return null}function l(q){for(var L=new Map;q!==null;)q.key!==null?L.set(q.key,q):L.set(q.index,q),q=q.sibling;return L}function h(q,L){return q=Ei(q,L),q.index=0,q.sibling=null,q}function p(q,L,$){return q.index=$,t?($=q.alternate,$!==null?($=$.index,$<L?(q.flags|=67108866,L):$):(q.flags|=67108866,L)):(q.flags|=1048576,L)}function v(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function A(q,L,$,ne){return L===null||L.tag!==6?(L=Ff($,q.mode,ne),L.return=q,L):(L=h(L,$),L.return=q,L)}function M(q,L,$,ne){var je=$.type;return je===U?te(q,L,$.props.children,ne,$.key):L!==null&&(L.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===C&&vr(je)===L.type)?(L=h(L,$.props),jl(L,$),L.return=q,L):(L=pu($.type,$.key,$.props,null,q.mode,ne),jl(L,$),L.return=q,L)}function K(q,L,$,ne){return L===null||L.tag!==4||L.stateNode.containerInfo!==$.containerInfo||L.stateNode.implementation!==$.implementation?(L=Gf($,q.mode,ne),L.return=q,L):(L=h(L,$.children||[]),L.return=q,L)}function te(q,L,$,ne,je){return L===null||L.tag!==7?(L=pr($,q.mode,ne,je),L.return=q,L):(L=h(L,$),L.return=q,L)}function se(q,L,$){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Ff(""+L,q.mode,$),L.return=q,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case z:return $=pu(L.type,L.key,L.props,null,q.mode,$),jl($,L),$.return=q,$;case H:return L=Gf(L,q.mode,$),L.return=q,L;case C:return L=vr(L),se(q,L,$)}if(Se(L)||j(L))return L=pr(L,q.mode,$,null),L.return=q,L;if(typeof L.then=="function")return se(q,_u(L),$);if(L.$$typeof===ee)return se(q,bu(q,L),$);Eu(q,L)}return null}function Q(q,L,$,ne){var je=L!==null?L.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return je!==null?null:A(q,L,""+$,ne);if(typeof $=="object"&&$!==null){switch($.$$typeof){case z:return $.key===je?M(q,L,$,ne):null;case H:return $.key===je?K(q,L,$,ne):null;case C:return $=vr($),Q(q,L,$,ne)}if(Se($)||j($))return je!==null?null:te(q,L,$,ne,null);if(typeof $.then=="function")return Q(q,L,_u($),ne);if($.$$typeof===ee)return Q(q,L,bu(q,$),ne);Eu(q,$)}return null}function W(q,L,$,ne,je){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return q=q.get($)||null,A(L,q,""+ne,je);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case z:return q=q.get(ne.key===null?$:ne.key)||null,M(L,q,ne,je);case H:return q=q.get(ne.key===null?$:ne.key)||null,K(L,q,ne,je);case C:return ne=vr(ne),W(q,L,$,ne,je)}if(Se(ne)||j(ne))return q=q.get($)||null,te(L,q,ne,je,null);if(typeof ne.then=="function")return W(q,L,$,_u(ne),je);if(ne.$$typeof===ee)return W(q,L,$,bu(L,ne),je);Eu(L,ne)}return null}function Re(q,L,$,ne){for(var je=null,ct=null,Ie=L,Ke=L=0,et=null;Ie!==null&&Ke<$.length;Ke++){Ie.index>Ke?(et=Ie,Ie=null):et=Ie.sibling;var ut=Q(q,Ie,$[Ke],ne);if(ut===null){Ie===null&&(Ie=et);break}t&&Ie&&ut.alternate===null&&a(q,Ie),L=p(ut,L,Ke),ct===null?je=ut:ct.sibling=ut,ct=ut,Ie=et}if(Ke===$.length)return r(q,Ie),ot&&Ai(q,Ke),je;if(Ie===null){for(;Ke<$.length;Ke++)Ie=se(q,$[Ke],ne),Ie!==null&&(L=p(Ie,L,Ke),ct===null?je=Ie:ct.sibling=Ie,ct=Ie);return ot&&Ai(q,Ke),je}for(Ie=l(Ie);Ke<$.length;Ke++)et=W(Ie,q,Ke,$[Ke],ne),et!==null&&(t&&et.alternate!==null&&Ie.delete(et.key===null?Ke:et.key),L=p(et,L,Ke),ct===null?je=et:ct.sibling=et,ct=et);return t&&Ie.forEach(function(Rs){return a(q,Rs)}),ot&&Ai(q,Ke),je}function Oe(q,L,$,ne){if($==null)throw Error(s(151));for(var je=null,ct=null,Ie=L,Ke=L=0,et=null,ut=$.next();Ie!==null&&!ut.done;Ke++,ut=$.next()){Ie.index>Ke?(et=Ie,Ie=null):et=Ie.sibling;var Rs=Q(q,Ie,ut.value,ne);if(Rs===null){Ie===null&&(Ie=et);break}t&&Ie&&Rs.alternate===null&&a(q,Ie),L=p(Rs,L,Ke),ct===null?je=Rs:ct.sibling=Rs,ct=Rs,Ie=et}if(ut.done)return r(q,Ie),ot&&Ai(q,Ke),je;if(Ie===null){for(;!ut.done;Ke++,ut=$.next())ut=se(q,ut.value,ne),ut!==null&&(L=p(ut,L,Ke),ct===null?je=ut:ct.sibling=ut,ct=ut);return ot&&Ai(q,Ke),je}for(Ie=l(Ie);!ut.done;Ke++,ut=$.next())ut=W(Ie,q,Ke,ut.value,ne),ut!==null&&(t&&ut.alternate!==null&&Ie.delete(ut.key===null?Ke:ut.key),L=p(ut,L,Ke),ct===null?je=ut:ct.sibling=ut,ct=ut);return t&&Ie.forEach(function(Vw){return a(q,Vw)}),ot&&Ai(q,Ke),je}function Et(q,L,$,ne){if(typeof $=="object"&&$!==null&&$.type===U&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case z:e:{for(var je=$.key;L!==null;){if(L.key===je){if(je=$.type,je===U){if(L.tag===7){r(q,L.sibling),ne=h(L,$.props.children),ne.return=q,q=ne;break e}}else if(L.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===C&&vr(je)===L.type){r(q,L.sibling),ne=h(L,$.props),jl(ne,$),ne.return=q,q=ne;break e}r(q,L);break}else a(q,L);L=L.sibling}$.type===U?(ne=pr($.props.children,q.mode,ne,$.key),ne.return=q,q=ne):(ne=pu($.type,$.key,$.props,null,q.mode,ne),jl(ne,$),ne.return=q,q=ne)}return v(q);case H:e:{for(je=$.key;L!==null;){if(L.key===je)if(L.tag===4&&L.stateNode.containerInfo===$.containerInfo&&L.stateNode.implementation===$.implementation){r(q,L.sibling),ne=h(L,$.children||[]),ne.return=q,q=ne;break e}else{r(q,L);break}else a(q,L);L=L.sibling}ne=Gf($,q.mode,ne),ne.return=q,q=ne}return v(q);case C:return $=vr($),Et(q,L,$,ne)}if(Se($))return Re(q,L,$,ne);if(j($)){if(je=j($),typeof je!="function")throw Error(s(150));return $=je.call($),Oe(q,L,$,ne)}if(typeof $.then=="function")return Et(q,L,_u($),ne);if($.$$typeof===ee)return Et(q,L,bu(q,$),ne);Eu(q,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,L!==null&&L.tag===6?(r(q,L.sibling),ne=h(L,$),ne.return=q,q=ne):(r(q,L),ne=Ff($,q.mode,ne),ne.return=q,q=ne),v(q)):r(q,L)}return function(q,L,$,ne){try{Il=0;var je=Et(q,L,$,ne);return ho=null,je}catch(Ie){if(Ie===fo||Ie===vu)throw Ie;var ct=Qn(29,Ie,null,q.mode);return ct.lanes=ne,ct.return=q,ct}}}var _r=_0(!0),E0=_0(!1),ds=!1;function ah(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ih(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function fs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function hs(t,a,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(ht&2)!==0){var h=l.pending;return h===null?a.next=a:(a.next=h.next,h.next=a),l.pending=a,a=hu(t),s0(t,null,r),a}return fu(t,l,a,r),hu(t)}function kl(t,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var l=a.lanes;l&=t.pendingLanes,r|=l,a.lanes=r,sl(t,r)}}function sh(t,a){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var h=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?h=p=v:p=p.next=v,r=r.next}while(r!==null);p===null?h=p=a:p=p.next=a}else h=p=a;r={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=a:t.next=a,r.lastBaseUpdate=a}var rh=!1;function Ol(){if(rh){var t=uo;if(t!==null)throw t}}function Dl(t,a,r,l){rh=!1;var h=t.updateQueue;ds=!1;var p=h.firstBaseUpdate,v=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var M=A,K=M.next;M.next=null,v===null?p=K:v.next=K,v=M;var te=t.alternate;te!==null&&(te=te.updateQueue,A=te.lastBaseUpdate,A!==v&&(A===null?te.firstBaseUpdate=K:A.next=K,te.lastBaseUpdate=M))}if(p!==null){var se=h.baseState;v=0,te=K=M=null,A=p;do{var Q=A.lane&-536870913,W=Q!==A.lane;if(W?(Ze&Q)===Q:(l&Q)===Q){Q!==0&&Q===co&&(rh=!0),te!==null&&(te=te.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Re=t,Oe=A;Q=a;var Et=r;switch(Oe.tag){case 1:if(Re=Oe.payload,typeof Re=="function"){se=Re.call(Et,se,Q);break e}se=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Oe.payload,Q=typeof Re=="function"?Re.call(Et,se,Q):Re,Q==null)break e;se=E({},se,Q);break e;case 2:ds=!0}}Q=A.callback,Q!==null&&(t.flags|=64,W&&(t.flags|=8192),W=h.callbacks,W===null?h.callbacks=[Q]:W.push(Q))}else W={lane:Q,tag:A.tag,payload:A.payload,callback:A.callback,next:null},te===null?(K=te=W,M=se):te=te.next=W,v|=Q;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;W=A,A=W.next,W.next=null,h.lastBaseUpdate=W,h.shared.pending=null}}while(!0);te===null&&(M=se),h.baseState=M,h.firstBaseUpdate=K,h.lastBaseUpdate=te,p===null&&(h.shared.lanes=0),ys|=v,t.lanes=v,t.memoizedState=se}}function A0(t,a){if(typeof t!="function")throw Error(s(191,t));t.call(a)}function w0(t,a){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)A0(r[t],a)}var po=P(null),Au=P(0);function S0(t,a){t=Di,ue(Au,t),ue(po,a),Di=t|a.baseLanes}function oh(){ue(Au,Di),ue(po,po.current)}function lh(){Di=Au.current,Z(po),Z(Au)}var Yn=P(null),ha=null;function ps(t){var a=t.alternate;ue(Kt,Kt.current&1),ue(Yn,t),ha===null&&(a===null||po.current!==null||a.memoizedState!==null)&&(ha=t)}function ch(t){ue(Kt,Kt.current),ue(Yn,t),ha===null&&(ha=t)}function T0(t){t.tag===22?(ue(Kt,Kt.current),ue(Yn,t),ha===null&&(ha=t)):ms()}function ms(){ue(Kt,Kt.current),ue(Yn,Yn.current)}function Xn(t){Z(Yn),ha===t&&(ha=null),Z(Kt)}var Kt=P(0);function wu(t){for(var a=t;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||mp(r)||gp(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ti=0,$e=null,xt=null,nn=null,Su=!1,mo=!1,Er=!1,Tu=0,Ml=0,go=null,NA=0;function qt(){throw Error(s(321))}function uh(t,a){if(a===null)return!1;for(var r=0;r<a.length&&r<t.length;r++)if(!Kn(t[r],a[r]))return!1;return!0}function dh(t,a,r,l,h,p){return Ti=p,$e=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,G.H=t===null||t.memoizedState===null?cb:Th,Er=!1,p=r(l,h),Er=!1,mo&&(p=R0(a,r,l,h)),N0(t),p}function N0(t){G.H=zl;var a=xt!==null&&xt.next!==null;if(Ti=0,nn=xt=$e=null,Su=!1,Ml=0,go=null,a)throw Error(s(300));t===null||an||(t=t.dependencies,t!==null&&gu(t)&&(an=!0))}function R0(t,a,r,l){$e=t;var h=0;do{if(mo&&(go=null),Ml=0,mo=!1,25<=h)throw Error(s(301));if(h+=1,nn=xt=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}G.H=ub,p=a(r,l)}while(mo);return p}function RA(){var t=G.H,a=t.useState()[0];return a=typeof a.then=="function"?Pl(a):a,t=t.useState()[0],(xt!==null?xt.memoizedState:null)!==t&&($e.flags|=1024),a}function fh(){var t=Tu!==0;return Tu=0,t}function hh(t,a,r){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~r}function ph(t){if(Su){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Su=!1}Ti=0,nn=xt=$e=null,mo=!1,Ml=Tu=0,go=null}function kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?$e.memoizedState=nn=t:nn=nn.next=t,nn}function Qt(){if(xt===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var a=nn===null?$e.memoizedState:nn.next;if(a!==null)nn=a,xt=t;else{if(t===null)throw $e.alternate===null?Error(s(467)):Error(s(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},nn===null?$e.memoizedState=nn=t:nn=nn.next=t}return nn}function Nu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pl(t){var a=Ml;return Ml+=1,go===null&&(go=[]),t=y0(go,t,a),a=$e,(nn===null?a.memoizedState:nn.next)===null&&(a=a.alternate,G.H=a===null||a.memoizedState===null?cb:Th),t}function Ru(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Pl(t);if(t.$$typeof===ee)return bn(t)}throw Error(s(438,String(t)))}function mh(t){var a=null,r=$e.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var l=$e.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(h){return h.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=Nu(),$e.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(t),l=0;l<t;l++)r[l]=V;return a.index++,r}function Ni(t,a){return typeof a=="function"?a(t):a}function Cu(t){var a=Qt();return gh(a,xt,t)}function gh(t,a,r){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var h=t.baseQueue,p=l.pending;if(p!==null){if(h!==null){var v=h.next;h.next=p.next,p.next=v}a.baseQueue=h=p,l.pending=null}if(p=t.baseState,h===null)t.memoizedState=p;else{a=h.next;var A=v=null,M=null,K=a,te=!1;do{var se=K.lane&-536870913;if(se!==K.lane?(Ze&se)===se:(Ti&se)===se){var Q=K.revertLane;if(Q===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),se===co&&(te=!0);else if((Ti&Q)===Q){K=K.next,Q===co&&(te=!0);continue}else se={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},M===null?(A=M=se,v=p):M=M.next=se,$e.lanes|=Q,ys|=Q;se=K.action,Er&&r(p,se),p=K.hasEagerState?K.eagerState:r(p,se)}else Q={lane:se,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},M===null?(A=M=Q,v=p):M=M.next=Q,$e.lanes|=se,ys|=se;K=K.next}while(K!==null&&K!==a);if(M===null?v=p:M.next=A,!Kn(p,t.memoizedState)&&(an=!0,te&&(r=uo,r!==null)))throw r;t.memoizedState=p,t.baseState=v,t.baseQueue=M,l.lastRenderedState=p}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function bh(t){var a=Qt(),r=a.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=t;var l=r.dispatch,h=r.pending,p=a.memoizedState;if(h!==null){r.pending=null;var v=h=h.next;do p=t(p,v.action),v=v.next;while(v!==h);Kn(p,a.memoizedState)||(an=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),r.lastRenderedState=p}return[p,l]}function C0(t,a,r){var l=$e,h=Qt(),p=ot;if(p){if(r===void 0)throw Error(s(407));r=r()}else r=a();var v=!Kn((xt||h).memoizedState,r);if(v&&(h.memoizedState=r,an=!0),h=h.queue,xh(k0.bind(null,l,h,t),[t]),h.getSnapshot!==a||v||nn!==null&&nn.memoizedState.tag&1){if(l.flags|=2048,bo(9,{destroy:void 0},j0.bind(null,l,h,r,a),null),At===null)throw Error(s(349));p||(Ti&127)!==0||I0(l,a,r)}return r}function I0(t,a,r){t.flags|=16384,t={getSnapshot:a,value:r},a=$e.updateQueue,a===null?(a=Nu(),$e.updateQueue=a,a.stores=[t]):(r=a.stores,r===null?a.stores=[t]:r.push(t))}function j0(t,a,r,l){a.value=r,a.getSnapshot=l,O0(a)&&D0(t)}function k0(t,a,r){return r(function(){O0(a)&&D0(t)})}function O0(t){var a=t.getSnapshot;t=t.value;try{var r=a();return!Kn(t,r)}catch{return!0}}function D0(t){var a=hr(t,2);a!==null&&Bn(a,t,2)}function yh(t){var a=kn();if(typeof t=="function"){var r=t;if(t=r(),Er){rt(!0);try{r()}finally{rt(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:t},a}function M0(t,a,r,l){return t.baseState=r,gh(t,xt,typeof l=="function"?l:Ni)}function CA(t,a,r,l,h){if(ku(t))throw Error(s(485));if(t=a.action,t!==null){var p={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};G.T!==null?r(!0):p.isTransition=!1,l(p),r=a.pending,r===null?(p.next=a.pending=p,P0(a,p)):(p.next=r.next,a.pending=r.next=p)}}function P0(t,a){var r=a.action,l=a.payload,h=t.state;if(a.isTransition){var p=G.T,v={};G.T=v;try{var A=r(h,l),M=G.S;M!==null&&M(v,A),V0(t,a,A)}catch(K){vh(t,a,K)}finally{p!==null&&v.types!==null&&(p.types=v.types),G.T=p}}else try{p=r(h,l),V0(t,a,p)}catch(K){vh(t,a,K)}}function V0(t,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){z0(t,a,l)},function(l){return vh(t,a,l)}):z0(t,a,r)}function z0(t,a,r){a.status="fulfilled",a.value=r,L0(a),t.state=r,a=t.pending,a!==null&&(r=a.next,r===a?t.pending=null:(r=r.next,a.next=r,P0(t,r)))}function vh(t,a,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=r,L0(a),a=a.next;while(a!==l)}t.action=null}function L0(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function U0(t,a){return a}function B0(t,a){if(ot){var r=At.formState;if(r!==null){e:{var l=$e;if(ot){if(jt){t:{for(var h=jt,p=fa;h.nodeType!==8;){if(!p){h=null;break t}if(h=pa(h.nextSibling),h===null){h=null;break t}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){jt=pa(h.nextSibling),l=h.data==="F!";break e}}cs(l)}l=!1}l&&(a=r[0])}}return r=kn(),r.memoizedState=r.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:U0,lastRenderedState:a},r.queue=l,r=rb.bind(null,$e,l),l.dispatch=r,l=yh(!1),p=Sh.bind(null,$e,!1,l.queue),l=kn(),h={state:a,dispatch:null,action:t,pending:null},l.queue=h,r=CA.bind(null,$e,h,p,r),h.dispatch=r,l.memoizedState=t,[a,r,!1]}function H0(t){var a=Qt();return q0(a,xt,t)}function q0(t,a,r){if(a=gh(t,a,U0)[0],t=Cu(Ni)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=Pl(a)}catch(v){throw v===fo?vu:v}else l=a;a=Qt();var h=a.queue,p=h.dispatch;return r!==a.memoizedState&&($e.flags|=2048,bo(9,{destroy:void 0},IA.bind(null,h,r),null)),[l,p,t]}function IA(t,a){t.action=a}function F0(t){var a=Qt(),r=xt;if(r!==null)return q0(a,r,t);Qt(),a=a.memoizedState,r=Qt();var l=r.queue.dispatch;return r.memoizedState=t,[a,l,!1]}function bo(t,a,r,l){return t={tag:t,create:r,deps:l,inst:a,next:null},a=$e.updateQueue,a===null&&(a=Nu(),$e.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,a.lastEffect=t),t}function G0(){return Qt().memoizedState}function Iu(t,a,r,l){var h=kn();$e.flags|=t,h.memoizedState=bo(1|a,{destroy:void 0},r,l===void 0?null:l)}function ju(t,a,r,l){var h=Qt();l=l===void 0?null:l;var p=h.memoizedState.inst;xt!==null&&l!==null&&uh(l,xt.memoizedState.deps)?h.memoizedState=bo(a,p,r,l):($e.flags|=t,h.memoizedState=bo(1|a,p,r,l))}function $0(t,a){Iu(8390656,8,t,a)}function xh(t,a){ju(2048,8,t,a)}function jA(t){$e.flags|=4;var a=$e.updateQueue;if(a===null)a=Nu(),$e.updateQueue=a,a.events=[t];else{var r=a.events;r===null?a.events=[t]:r.push(t)}}function K0(t){var a=Qt().memoizedState;return jA({ref:a,nextImpl:t}),function(){if((ht&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Q0(t,a){return ju(4,2,t,a)}function Y0(t,a){return ju(4,4,t,a)}function X0(t,a){if(typeof a=="function"){t=t();var r=a(t);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function J0(t,a,r){r=r!=null?r.concat([t]):null,ju(4,4,X0.bind(null,a,t),r)}function _h(){}function W0(t,a){var r=Qt();a=a===void 0?null:a;var l=r.memoizedState;return a!==null&&uh(a,l[1])?l[0]:(r.memoizedState=[t,a],t)}function Z0(t,a){var r=Qt();a=a===void 0?null:a;var l=r.memoizedState;if(a!==null&&uh(a,l[1]))return l[0];if(l=t(),Er){rt(!0);try{t()}finally{rt(!1)}}return r.memoizedState=[l,a],l}function Eh(t,a,r){return r===void 0||(Ti&1073741824)!==0&&(Ze&261930)===0?t.memoizedState=a:(t.memoizedState=r,t=ey(),$e.lanes|=t,ys|=t,r)}function eb(t,a,r,l){return Kn(r,a)?r:po.current!==null?(t=Eh(t,r,l),Kn(t,a)||(an=!0),t):(Ti&42)===0||(Ti&1073741824)!==0&&(Ze&261930)===0?(an=!0,t.memoizedState=r):(t=ey(),$e.lanes|=t,ys|=t,a)}function tb(t,a,r,l,h){var p=ce.p;ce.p=p!==0&&8>p?p:8;var v=G.T,A={};G.T=A,Sh(t,!1,a,r);try{var M=h(),K=G.S;if(K!==null&&K(A,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var te=TA(M,l);Vl(t,a,te,Zn(t))}else Vl(t,a,l,Zn(t))}catch(se){Vl(t,a,{then:function(){},status:"rejected",reason:se},Zn())}finally{ce.p=p,v!==null&&A.types!==null&&(v.types=A.types),G.T=v}}function kA(){}function Ah(t,a,r,l){if(t.tag!==5)throw Error(s(476));var h=nb(t).queue;tb(t,h,a,_e,r===null?kA:function(){return ab(t),r(l)})}function nb(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:_e},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:r},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function ab(t){var a=nb(t);a.next===null&&(a=t.alternate.memoizedState),Vl(t,a.next.queue,{},Zn())}function wh(){return bn(ec)}function ib(){return Qt().memoizedState}function sb(){return Qt().memoizedState}function OA(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var r=Zn();t=fs(r);var l=hs(a,t,r);l!==null&&(Bn(l,a,r),kl(l,a,r)),a={cache:Zf()},t.payload=a;return}a=a.return}}function DA(t,a,r){var l=Zn();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ku(t)?ob(a,r):(r=Hf(t,a,r,l),r!==null&&(Bn(r,t,l),lb(r,a,l)))}function rb(t,a,r){var l=Zn();Vl(t,a,r,l)}function Vl(t,a,r,l){var h={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(ku(t))ob(a,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var v=a.lastRenderedState,A=p(v,r);if(h.hasEagerState=!0,h.eagerState=A,Kn(A,v))return fu(t,a,h,0),At===null&&du(),!1}catch{}if(r=Hf(t,a,h,l),r!==null)return Bn(r,t,l),lb(r,a,l),!0}return!1}function Sh(t,a,r,l){if(l={lane:2,revertLane:ap(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ku(t)){if(a)throw Error(s(479))}else a=Hf(t,r,l,2),a!==null&&Bn(a,t,2)}function ku(t){var a=t.alternate;return t===$e||a!==null&&a===$e}function ob(t,a){mo=Su=!0;var r=t.pending;r===null?a.next=a:(a.next=r.next,r.next=a),t.pending=a}function lb(t,a,r){if((r&4194048)!==0){var l=a.lanes;l&=t.pendingLanes,r|=l,a.lanes=r,sl(t,r)}}var zl={readContext:bn,use:Ru,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt};zl.useEffectEvent=qt;var cb={readContext:bn,use:Ru,useCallback:function(t,a){return kn().memoizedState=[t,a===void 0?null:a],t},useContext:bn,useEffect:$0,useImperativeHandle:function(t,a,r){r=r!=null?r.concat([t]):null,Iu(4194308,4,X0.bind(null,a,t),r)},useLayoutEffect:function(t,a){return Iu(4194308,4,t,a)},useInsertionEffect:function(t,a){Iu(4,2,t,a)},useMemo:function(t,a){var r=kn();a=a===void 0?null:a;var l=t();if(Er){rt(!0);try{t()}finally{rt(!1)}}return r.memoizedState=[l,a],l},useReducer:function(t,a,r){var l=kn();if(r!==void 0){var h=r(a);if(Er){rt(!0);try{r(a)}finally{rt(!1)}}}else h=a;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=DA.bind(null,$e,t),[l.memoizedState,t]},useRef:function(t){var a=kn();return t={current:t},a.memoizedState=t},useState:function(t){t=yh(t);var a=t.queue,r=rb.bind(null,$e,a);return a.dispatch=r,[t.memoizedState,r]},useDebugValue:_h,useDeferredValue:function(t,a){var r=kn();return Eh(r,t,a)},useTransition:function(){var t=yh(!1);return t=tb.bind(null,$e,t.queue,!0,!1),kn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,r){var l=$e,h=kn();if(ot){if(r===void 0)throw Error(s(407));r=r()}else{if(r=a(),At===null)throw Error(s(349));(Ze&127)!==0||I0(l,a,r)}h.memoizedState=r;var p={value:r,getSnapshot:a};return h.queue=p,$0(k0.bind(null,l,p,t),[t]),l.flags|=2048,bo(9,{destroy:void 0},j0.bind(null,l,p,r,a),null),r},useId:function(){var t=kn(),a=At.identifierPrefix;if(ot){var r=ti,l=ei;r=(l&~(1<<32-Fe(l)-1)).toString(32)+r,a="_"+a+"R_"+r,r=Tu++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=NA++,a="_"+a+"r_"+r.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:wh,useFormState:B0,useActionState:B0,useOptimistic:function(t){var a=kn();a.memoizedState=a.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=Sh.bind(null,$e,!0,r),r.dispatch=a,[t,a]},useMemoCache:mh,useCacheRefresh:function(){return kn().memoizedState=OA.bind(null,$e)},useEffectEvent:function(t){var a=kn(),r={impl:t};return a.memoizedState=r,function(){if((ht&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},Th={readContext:bn,use:Ru,useCallback:W0,useContext:bn,useEffect:xh,useImperativeHandle:J0,useInsertionEffect:Q0,useLayoutEffect:Y0,useMemo:Z0,useReducer:Cu,useRef:G0,useState:function(){return Cu(Ni)},useDebugValue:_h,useDeferredValue:function(t,a){var r=Qt();return eb(r,xt.memoizedState,t,a)},useTransition:function(){var t=Cu(Ni)[0],a=Qt().memoizedState;return[typeof t=="boolean"?t:Pl(t),a]},useSyncExternalStore:C0,useId:ib,useHostTransitionStatus:wh,useFormState:H0,useActionState:H0,useOptimistic:function(t,a){var r=Qt();return M0(r,xt,t,a)},useMemoCache:mh,useCacheRefresh:sb};Th.useEffectEvent=K0;var ub={readContext:bn,use:Ru,useCallback:W0,useContext:bn,useEffect:xh,useImperativeHandle:J0,useInsertionEffect:Q0,useLayoutEffect:Y0,useMemo:Z0,useReducer:bh,useRef:G0,useState:function(){return bh(Ni)},useDebugValue:_h,useDeferredValue:function(t,a){var r=Qt();return xt===null?Eh(r,t,a):eb(r,xt.memoizedState,t,a)},useTransition:function(){var t=bh(Ni)[0],a=Qt().memoizedState;return[typeof t=="boolean"?t:Pl(t),a]},useSyncExternalStore:C0,useId:ib,useHostTransitionStatus:wh,useFormState:F0,useActionState:F0,useOptimistic:function(t,a){var r=Qt();return xt!==null?M0(r,xt,t,a):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:mh,useCacheRefresh:sb};ub.useEffectEvent=K0;function Nh(t,a,r,l){a=t.memoizedState,r=r(l,a),r=r==null?a:E({},a,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Rh={enqueueSetState:function(t,a,r){t=t._reactInternals;var l=Zn(),h=fs(l);h.payload=a,r!=null&&(h.callback=r),a=hs(t,h,l),a!==null&&(Bn(a,t,l),kl(a,t,l))},enqueueReplaceState:function(t,a,r){t=t._reactInternals;var l=Zn(),h=fs(l);h.tag=1,h.payload=a,r!=null&&(h.callback=r),a=hs(t,h,l),a!==null&&(Bn(a,t,l),kl(a,t,l))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var r=Zn(),l=fs(r);l.tag=2,a!=null&&(l.callback=a),a=hs(t,l,r),a!==null&&(Bn(a,t,r),kl(a,t,r))}};function db(t,a,r,l,h,p,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,v):a.prototype&&a.prototype.isPureReactComponent?!wl(r,l)||!wl(h,p):!0}function fb(t,a,r,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,l),a.state!==t&&Rh.enqueueReplaceState(a,a.state,null)}function Ar(t,a){var r=a;if("ref"in a){r={};for(var l in a)l!=="ref"&&(r[l]=a[l])}if(t=t.defaultProps){r===a&&(r=E({},r));for(var h in t)r[h]===void 0&&(r[h]=t[h])}return r}function hb(t){uu(t)}function pb(t){console.error(t)}function mb(t){uu(t)}function Ou(t,a){try{var r=t.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function gb(t,a,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Ch(t,a,r){return r=fs(r),r.tag=3,r.payload={element:null},r.callback=function(){Ou(t,a)},r}function bb(t){return t=fs(t),t.tag=3,t}function yb(t,a,r,l){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var p=l.value;t.payload=function(){return h(p)},t.callback=function(){gb(a,r,l)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){gb(a,r,l),typeof h!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function MA(t,a,r,l,h){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=r.alternate,a!==null&&lo(a,r,h,!0),r=Yn.current,r!==null){switch(r.tag){case 31:case 13:return ha===null?Gu():r.alternate===null&&Ft===0&&(Ft=3),r.flags&=-257,r.flags|=65536,r.lanes=h,l===xu?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([l]):a.add(l),ep(t,l,h)),!1;case 22:return r.flags|=65536,l===xu?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([l]):r.add(l)),ep(t,l,h)),!1}throw Error(s(435,r.tag))}return ep(t,l,h),Gu(),!1}if(ot)return a=Yn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=h,l!==Qf&&(t=Error(s(422),{cause:l}),Nl(ca(t,r)))):(l!==Qf&&(a=Error(s(423),{cause:l}),Nl(ca(a,r))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=ca(l,r),h=Ch(t.stateNode,l,h),sh(t,h),Ft!==4&&(Ft=2)),!1;var p=Error(s(520),{cause:l});if(p=ca(p,r),$l===null?$l=[p]:$l.push(p),Ft!==4&&(Ft=2),a===null)return!0;l=ca(l,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,t=h&-h,r.lanes|=t,t=Ch(r.stateNode,l,t),sh(r,t),!1;case 1:if(a=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(vs===null||!vs.has(p))))return r.flags|=65536,h&=-h,r.lanes|=h,h=bb(h),yb(h,t,r,l),sh(r,h),!1}r=r.return}while(r!==null);return!1}var Ih=Error(s(461)),an=!1;function yn(t,a,r,l){a.child=t===null?E0(a,null,r,l):_r(a,t.child,r,l)}function vb(t,a,r,l,h){r=r.render;var p=a.ref;if("ref"in l){var v={};for(var A in l)A!=="ref"&&(v[A]=l[A])}else v=l;return br(a),l=dh(t,a,r,v,p,h),A=fh(),t!==null&&!an?(hh(t,a,h),Ri(t,a,h)):(ot&&A&&$f(a),a.flags|=1,yn(t,a,l,h),a.child)}function xb(t,a,r,l,h){if(t===null){var p=r.type;return typeof p=="function"&&!qf(p)&&p.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=p,_b(t,a,p,l,h)):(t=pu(r.type,null,l,a,a.mode,h),t.ref=a.ref,t.return=a,a.child=t)}if(p=t.child,!zh(t,h)){var v=p.memoizedProps;if(r=r.compare,r=r!==null?r:wl,r(v,l)&&t.ref===a.ref)return Ri(t,a,h)}return a.flags|=1,t=Ei(p,l),t.ref=a.ref,t.return=a,a.child=t}function _b(t,a,r,l,h){if(t!==null){var p=t.memoizedProps;if(wl(p,l)&&t.ref===a.ref)if(an=!1,a.pendingProps=l=p,zh(t,h))(t.flags&131072)!==0&&(an=!0);else return a.lanes=t.lanes,Ri(t,a,h)}return jh(t,a,r,l,h)}function Eb(t,a,r,l){var h=l.children,p=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,t!==null){for(l=a.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~p}else l=0,a.child=null;return Ab(t,a,p,r,l)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&yu(a,p!==null?p.cachePool:null),p!==null?S0(a,p):oh(),T0(a);else return l=a.lanes=536870912,Ab(t,a,p!==null?p.baseLanes|r:r,r,l)}else p!==null?(yu(a,p.cachePool),S0(a,p),ms(),a.memoizedState=null):(t!==null&&yu(a,null),oh(),ms());return yn(t,a,h,r),a.child}function Ll(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Ab(t,a,r,l,h){var p=th();return p=p===null?null:{parent:tn._currentValue,pool:p},a.memoizedState={baseLanes:r,cachePool:p},t!==null&&yu(a,null),oh(),T0(a),t!==null&&lo(t,a,l,!0),a.childLanes=h,null}function Du(t,a){return a=Pu({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function wb(t,a,r){return _r(a,t.child,null,r),t=Du(a,a.pendingProps),t.flags|=2,Xn(a),a.memoizedState=null,t}function PA(t,a,r){var l=a.pendingProps,h=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(ot){if(l.mode==="hidden")return t=Du(a,l),a.lanes=536870912,Ll(null,t);if(ch(a),(t=jt)?(t=Py(t,fa),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:os!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},r=o0(t),r.return=a,a.child=r,gn=a,jt=null)):t=null,t===null)throw cs(a);return a.lanes=536870912,null}return Du(a,l)}var p=t.memoizedState;if(p!==null){var v=p.dehydrated;if(ch(a),h)if(a.flags&256)a.flags&=-257,a=wb(t,a,r);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(s(558));else if(an||lo(t,a,r,!1),h=(r&t.childLanes)!==0,an||h){if(l=At,l!==null&&(v=rl(l,r),v!==0&&v!==p.retryLane))throw p.retryLane=v,hr(t,v),Bn(l,t,v),Ih;Gu(),a=wb(t,a,r)}else t=p.treeContext,jt=pa(v.nextSibling),gn=a,ot=!0,ls=null,fa=!1,t!==null&&u0(a,t),a=Du(a,l),a.flags|=4096;return a}return t=Ei(t.child,{mode:l.mode,children:l.children}),t.ref=a.ref,a.child=t,t.return=a,t}function Mu(t,a){var r=a.ref;if(r===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(t===null||t.ref!==r)&&(a.flags|=4194816)}}function jh(t,a,r,l,h){return br(a),r=dh(t,a,r,l,void 0,h),l=fh(),t!==null&&!an?(hh(t,a,h),Ri(t,a,h)):(ot&&l&&$f(a),a.flags|=1,yn(t,a,r,h),a.child)}function Sb(t,a,r,l,h,p){return br(a),a.updateQueue=null,r=R0(a,l,r,h),N0(t),l=fh(),t!==null&&!an?(hh(t,a,p),Ri(t,a,p)):(ot&&l&&$f(a),a.flags|=1,yn(t,a,r,p),a.child)}function Tb(t,a,r,l,h){if(br(a),a.stateNode===null){var p=io,v=r.contextType;typeof v=="object"&&v!==null&&(p=bn(v)),p=new r(l,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Rh,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=l,p.state=a.memoizedState,p.refs={},ah(a),v=r.contextType,p.context=typeof v=="object"&&v!==null?bn(v):io,p.state=a.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(Nh(a,r,v,l),p.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&Rh.enqueueReplaceState(p,p.state,null),Dl(a,l,p,h),Ol(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(t===null){p=a.stateNode;var A=a.memoizedProps,M=Ar(r,A);p.props=M;var K=p.context,te=r.contextType;v=io,typeof te=="object"&&te!==null&&(v=bn(te));var se=r.getDerivedStateFromProps;te=typeof se=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,te||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||K!==v)&&fb(a,p,l,v),ds=!1;var Q=a.memoizedState;p.state=Q,Dl(a,l,p,h),Ol(),K=a.memoizedState,A||Q!==K||ds?(typeof se=="function"&&(Nh(a,r,se,l),K=a.memoizedState),(M=ds||db(a,r,M,l,Q,K,v))?(te||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=K),p.props=l,p.state=K,p.context=v,l=M):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{p=a.stateNode,ih(t,a),v=a.memoizedProps,te=Ar(r,v),p.props=te,se=a.pendingProps,Q=p.context,K=r.contextType,M=io,typeof K=="object"&&K!==null&&(M=bn(K)),A=r.getDerivedStateFromProps,(K=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==se||Q!==M)&&fb(a,p,l,M),ds=!1,Q=a.memoizedState,p.state=Q,Dl(a,l,p,h),Ol();var W=a.memoizedState;v!==se||Q!==W||ds||t!==null&&t.dependencies!==null&&gu(t.dependencies)?(typeof A=="function"&&(Nh(a,r,A,l),W=a.memoizedState),(te=ds||db(a,r,te,l,Q,W,M)||t!==null&&t.dependencies!==null&&gu(t.dependencies))?(K||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,W,M),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,W,M)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=W),p.props=l,p.state=W,p.context=M,l=te):(typeof p.componentDidUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&Q===t.memoizedState||(a.flags|=1024),l=!1)}return p=l,Mu(t,a),l=(a.flags&128)!==0,p||l?(p=a.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,t!==null&&l?(a.child=_r(a,t.child,null,h),a.child=_r(a,null,r,h)):yn(t,a,r,h),a.memoizedState=p.state,t=a.child):t=Ri(t,a,h),t}function Nb(t,a,r,l){return mr(),a.flags|=256,yn(t,a,r,l),a.child}var kh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Oh(t){return{baseLanes:t,cachePool:g0()}}function Dh(t,a,r){return t=t!==null?t.childLanes&~r:0,a&&(t|=Wn),t}function Rb(t,a,r){var l=a.pendingProps,h=!1,p=(a.flags&128)!==0,v;if((v=p)||(v=t!==null&&t.memoizedState===null?!1:(Kt.current&2)!==0),v&&(h=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,t===null){if(ot){if(h?ps(a):ms(),(t=jt)?(t=Py(t,fa),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:os!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},r=o0(t),r.return=a,a.child=r,gn=a,jt=null)):t=null,t===null)throw cs(a);return gp(t)?a.lanes=32:a.lanes=536870912,null}var A=l.children;return l=l.fallback,h?(ms(),h=a.mode,A=Pu({mode:"hidden",children:A},h),l=pr(l,h,r,null),A.return=a,l.return=a,A.sibling=l,a.child=A,l=a.child,l.memoizedState=Oh(r),l.childLanes=Dh(t,v,r),a.memoizedState=kh,Ll(null,l)):(ps(a),Mh(a,A))}var M=t.memoizedState;if(M!==null&&(A=M.dehydrated,A!==null)){if(p)a.flags&256?(ps(a),a.flags&=-257,a=Ph(t,a,r)):a.memoizedState!==null?(ms(),a.child=t.child,a.flags|=128,a=null):(ms(),A=l.fallback,h=a.mode,l=Pu({mode:"visible",children:l.children},h),A=pr(A,h,r,null),A.flags|=2,l.return=a,A.return=a,l.sibling=A,a.child=l,_r(a,t.child,null,r),l=a.child,l.memoizedState=Oh(r),l.childLanes=Dh(t,v,r),a.memoizedState=kh,a=Ll(null,l));else if(ps(a),gp(A)){if(v=A.nextSibling&&A.nextSibling.dataset,v)var K=v.dgst;v=K,l=Error(s(419)),l.stack="",l.digest=v,Nl({value:l,source:null,stack:null}),a=Ph(t,a,r)}else if(an||lo(t,a,r,!1),v=(r&t.childLanes)!==0,an||v){if(v=At,v!==null&&(l=rl(v,r),l!==0&&l!==M.retryLane))throw M.retryLane=l,hr(t,l),Bn(v,t,l),Ih;mp(A)||Gu(),a=Ph(t,a,r)}else mp(A)?(a.flags|=192,a.child=t.child,a=null):(t=M.treeContext,jt=pa(A.nextSibling),gn=a,ot=!0,ls=null,fa=!1,t!==null&&u0(a,t),a=Mh(a,l.children),a.flags|=4096);return a}return h?(ms(),A=l.fallback,h=a.mode,M=t.child,K=M.sibling,l=Ei(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,K!==null?A=Ei(K,A):(A=pr(A,h,r,null),A.flags|=2),A.return=a,l.return=a,l.sibling=A,a.child=l,Ll(null,l),l=a.child,A=t.child.memoizedState,A===null?A=Oh(r):(h=A.cachePool,h!==null?(M=tn._currentValue,h=h.parent!==M?{parent:M,pool:M}:h):h=g0(),A={baseLanes:A.baseLanes|r,cachePool:h}),l.memoizedState=A,l.childLanes=Dh(t,v,r),a.memoizedState=kh,Ll(t.child,l)):(ps(a),r=t.child,t=r.sibling,r=Ei(r,{mode:"visible",children:l.children}),r.return=a,r.sibling=null,t!==null&&(v=a.deletions,v===null?(a.deletions=[t],a.flags|=16):v.push(t)),a.child=r,a.memoizedState=null,r)}function Mh(t,a){return a=Pu({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Pu(t,a){return t=Qn(22,t,null,a),t.lanes=0,t}function Ph(t,a,r){return _r(a,t.child,null,r),t=Mh(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Cb(t,a,r){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),Jf(t.return,a,r)}function Vh(t,a,r,l,h,p){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:h,treeForkCount:p}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=r,v.tailMode=h,v.treeForkCount=p)}function Ib(t,a,r){var l=a.pendingProps,h=l.revealOrder,p=l.tail;l=l.children;var v=Kt.current,A=(v&2)!==0;if(A?(v=v&1|2,a.flags|=128):v&=1,ue(Kt,v),yn(t,a,l,r),l=ot?Tl:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cb(t,r,a);else if(t.tag===19)Cb(t,r,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(r=a.child,h=null;r!==null;)t=r.alternate,t!==null&&wu(t)===null&&(h=r),r=r.sibling;r=h,r===null?(h=a.child,a.child=null):(h=r.sibling,r.sibling=null),Vh(a,!1,h,r,p,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,h=a.child,a.child=null;h!==null;){if(t=h.alternate,t!==null&&wu(t)===null){a.child=h;break}t=h.sibling,h.sibling=r,r=h,h=t}Vh(a,!0,r,null,p,l);break;case"together":Vh(a,!1,null,null,void 0,l);break;default:a.memoizedState=null}return a.child}function Ri(t,a,r){if(t!==null&&(a.dependencies=t.dependencies),ys|=a.lanes,(r&a.childLanes)===0)if(t!==null){if(lo(t,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(s(153));if(a.child!==null){for(t=a.child,r=Ei(t,t.pendingProps),a.child=r,r.return=a;t.sibling!==null;)t=t.sibling,r=r.sibling=Ei(t,t.pendingProps),r.return=a;r.sibling=null}return a.child}function zh(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&gu(t)))}function VA(t,a,r){switch(a.tag){case 3:Ye(a,a.stateNode.containerInfo),us(a,tn,t.memoizedState.cache),mr();break;case 27:case 5:Bt(a);break;case 4:Ye(a,a.stateNode.containerInfo);break;case 10:us(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,ch(a),null;break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(ps(a),a.flags|=128,null):(r&a.child.childLanes)!==0?Rb(t,a,r):(ps(a),t=Ri(t,a,r),t!==null?t.sibling:null);ps(a);break;case 19:var h=(t.flags&128)!==0;if(l=(r&a.childLanes)!==0,l||(lo(t,a,r,!1),l=(r&a.childLanes)!==0),h){if(l)return Ib(t,a,r);a.flags|=128}if(h=a.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ue(Kt,Kt.current),l)break;return null;case 22:return a.lanes=0,Eb(t,a,r,a.pendingProps);case 24:us(a,tn,t.memoizedState.cache)}return Ri(t,a,r)}function jb(t,a,r){if(t!==null)if(t.memoizedProps!==a.pendingProps)an=!0;else{if(!zh(t,r)&&(a.flags&128)===0)return an=!1,VA(t,a,r);an=(t.flags&131072)!==0}else an=!1,ot&&(a.flags&1048576)!==0&&c0(a,Tl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var l=a.pendingProps;if(t=vr(a.elementType),a.type=t,typeof t=="function")qf(t)?(l=Ar(t,l),a.tag=1,a=Tb(null,a,t,l,r)):(a.tag=0,a=jh(null,a,t,l,r));else{if(t!=null){var h=t.$$typeof;if(h===ae){a.tag=11,a=vb(null,a,t,l,r);break e}else if(h===O){a.tag=14,a=xb(null,a,t,l,r);break e}}throw a=Te(t)||t,Error(s(306,a,""))}}return a;case 0:return jh(t,a,a.type,a.pendingProps,r);case 1:return l=a.type,h=Ar(l,a.pendingProps),Tb(t,a,l,h,r);case 3:e:{if(Ye(a,a.stateNode.containerInfo),t===null)throw Error(s(387));l=a.pendingProps;var p=a.memoizedState;h=p.element,ih(t,a),Dl(a,l,null,r);var v=a.memoizedState;if(l=v.cache,us(a,tn,l),l!==p.cache&&Wf(a,[tn],r,!0),Ol(),l=v.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=Nb(t,a,l,r);break e}else if(l!==h){h=ca(Error(s(424)),a),Nl(h),a=Nb(t,a,l,r);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,jt=pa(t.firstChild),gn=a,ot=!0,ls=null,fa=!0,r=E0(a,null,l,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(mr(),l===h){a=Ri(t,a,r);break e}yn(t,a,l,r)}a=a.child}return a;case 26:return Mu(t,a),t===null?(r=Hy(a.type,null,a.pendingProps,null))?a.memoizedState=r:ot||(r=a.type,t=a.pendingProps,l=Wu(xe.current).createElement(r),l[Wt]=a,l[dn]=t,vn(l,r,t),Zt(l),a.stateNode=l):a.memoizedState=Hy(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Bt(a),t===null&&ot&&(l=a.stateNode=Ly(a.type,a.pendingProps,xe.current),gn=a,fa=!0,h=jt,As(a.type)?(bp=h,jt=pa(l.firstChild)):jt=h),yn(t,a,a.pendingProps.children,r),Mu(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&ot&&((h=l=jt)&&(l=hw(l,a.type,a.pendingProps,fa),l!==null?(a.stateNode=l,gn=a,jt=pa(l.firstChild),fa=!1,h=!0):h=!1),h||cs(a)),Bt(a),h=a.type,p=a.pendingProps,v=t!==null?t.memoizedProps:null,l=p.children,fp(h,p)?l=null:v!==null&&fp(h,v)&&(a.flags|=32),a.memoizedState!==null&&(h=dh(t,a,RA,null,null,r),ec._currentValue=h),Mu(t,a),yn(t,a,l,r),a.child;case 6:return t===null&&ot&&((t=r=jt)&&(r=pw(r,a.pendingProps,fa),r!==null?(a.stateNode=r,gn=a,jt=null,t=!0):t=!1),t||cs(a)),null;case 13:return Rb(t,a,r);case 4:return Ye(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=_r(a,null,l,r):yn(t,a,l,r),a.child;case 11:return vb(t,a,a.type,a.pendingProps,r);case 7:return yn(t,a,a.pendingProps,r),a.child;case 8:return yn(t,a,a.pendingProps.children,r),a.child;case 12:return yn(t,a,a.pendingProps.children,r),a.child;case 10:return l=a.pendingProps,us(a,a.type,l.value),yn(t,a,l.children,r),a.child;case 9:return h=a.type._context,l=a.pendingProps.children,br(a),h=bn(h),l=l(h),a.flags|=1,yn(t,a,l,r),a.child;case 14:return xb(t,a,a.type,a.pendingProps,r);case 15:return _b(t,a,a.type,a.pendingProps,r);case 19:return Ib(t,a,r);case 31:return PA(t,a,r);case 22:return Eb(t,a,r,a.pendingProps);case 24:return br(a),l=bn(tn),t===null?(h=th(),h===null&&(h=At,p=Zf(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=r),h=p),a.memoizedState={parent:l,cache:h},ah(a),us(a,tn,h)):((t.lanes&r)!==0&&(ih(t,a),Dl(a,null,null,r),Ol()),h=t.memoizedState,p=a.memoizedState,h.parent!==l?(h={parent:l,cache:l},a.memoizedState=h,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=h),us(a,tn,l)):(l=p.cache,us(a,tn,l),l!==h.cache&&Wf(a,[tn],r,!0))),yn(t,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Ci(t){t.flags|=4}function Lh(t,a,r,l,h){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(iy())t.flags|=8192;else throw xr=xu,nh}else t.flags&=-16777217}function kb(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ky(a))if(iy())t.flags|=8192;else throw xr=xu,nh}function Vu(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?qc():536870912,t.lanes|=a,_o|=a)}function Ul(t,a){if(!ot)switch(t.tailMode){case"hidden":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function kt(t){var a=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(a)for(var h=t.child;h!==null;)r|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)r|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=r,a}function zA(t,a,r){var l=a.pendingProps;switch(Kf(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(a),null;case 1:return kt(a),null;case 3:return r=a.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Si(tn),Qe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(oo(a)?Ci(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Yf())),kt(a),null;case 26:var h=a.type,p=a.memoizedState;return t===null?(Ci(a),p!==null?(kt(a),kb(a,p)):(kt(a),Lh(a,h,null,l,r))):p?p!==t.memoizedState?(Ci(a),kt(a),kb(a,p)):(kt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==l&&Ci(a),kt(a),Lh(a,h,t,l,r)),null;case 27:if(Ht(a),r=xe.current,h=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&Ci(a);else{if(!l){if(a.stateNode===null)throw Error(s(166));return kt(a),null}t=be.current,oo(a)?d0(a):(t=Ly(h,l,r),a.stateNode=t,Ci(a))}return kt(a),null;case 5:if(Ht(a),h=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&Ci(a);else{if(!l){if(a.stateNode===null)throw Error(s(166));return kt(a),null}if(p=be.current,oo(a))d0(a);else{var v=Wu(xe.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?v.createElement(h,{is:l.is}):v.createElement(h)}}p[Wt]=a,p[dn]=l;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=p;e:switch(vn(p,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ci(a)}}return kt(a),Lh(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,r),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==l&&Ci(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(s(166));if(t=xe.current,oo(a)){if(t=a.stateNode,r=a.memoizedProps,l=null,h=gn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Wt]=a,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||Ry(t.nodeValue,r)),t||cs(a,!0)}else t=Wu(t).createTextNode(l),t[Wt]=a,a.stateNode=t}return kt(a),null;case 31:if(r=a.memoizedState,t===null||t.memoizedState!==null){if(l=oo(a),r!==null){if(t===null){if(!l)throw Error(s(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Wt]=a}else mr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;kt(a),t=!1}else r=Yf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return a.flags&256?(Xn(a),a):(Xn(a),null);if((a.flags&128)!==0)throw Error(s(558))}return kt(a),null;case 13:if(l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=oo(a),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=a.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Wt]=a}else mr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;kt(a),h=!1}else h=Yf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return a.flags&256?(Xn(a),a):(Xn(a),null)}return Xn(a),(a.flags&128)!==0?(a.lanes=r,a):(r=l!==null,t=t!==null&&t.memoizedState!==null,r&&(l=a.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==h&&(l.flags|=2048)),r!==t&&r&&(a.child.flags|=8192),Vu(a,a.updateQueue),kt(a),null);case 4:return Qe(),t===null&&op(a.stateNode.containerInfo),kt(a),null;case 10:return Si(a.type),kt(a),null;case 19:if(Z(Kt),l=a.memoizedState,l===null)return kt(a),null;if(h=(a.flags&128)!==0,p=l.rendering,p===null)if(h)Ul(l,!1);else{if(Ft!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(p=wu(t),p!==null){for(a.flags|=128,Ul(l,!1),t=p.updateQueue,a.updateQueue=t,Vu(a,t),a.subtreeFlags=0,t=r,r=a.child;r!==null;)r0(r,t),r=r.sibling;return ue(Kt,Kt.current&1|2),ot&&Ai(a,l.treeForkCount),a.child}t=t.sibling}l.tail!==null&&qe()>Hu&&(a.flags|=128,h=!0,Ul(l,!1),a.lanes=4194304)}else{if(!h)if(t=wu(p),t!==null){if(a.flags|=128,h=!0,t=t.updateQueue,a.updateQueue=t,Vu(a,t),Ul(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!ot)return kt(a),null}else 2*qe()-l.renderingStartTime>Hu&&r!==536870912&&(a.flags|=128,h=!0,Ul(l,!1),a.lanes=4194304);l.isBackwards?(p.sibling=a.child,a.child=p):(t=l.last,t!==null?t.sibling=p:a.child=p,l.last=p)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=qe(),t.sibling=null,r=Kt.current,ue(Kt,h?r&1|2:r&1),ot&&Ai(a,l.treeForkCount),t):(kt(a),null);case 22:case 23:return Xn(a),lh(),l=a.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(r&536870912)!==0&&(a.flags&128)===0&&(kt(a),a.subtreeFlags&6&&(a.flags|=8192)):kt(a),r=a.updateQueue,r!==null&&Vu(a,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==r&&(a.flags|=2048),t!==null&&Z(yr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Si(tn),kt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function LA(t,a){switch(Kf(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Si(tn),Qe(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Ht(a),null;case 31:if(a.memoizedState!==null){if(Xn(a),a.alternate===null)throw Error(s(340));mr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(Xn(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(s(340));mr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return Z(Kt),null;case 4:return Qe(),null;case 10:return Si(a.type),null;case 22:case 23:return Xn(a),lh(),t!==null&&Z(yr),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Si(tn),null;case 25:return null;default:return null}}function Ob(t,a){switch(Kf(a),a.tag){case 3:Si(tn),Qe();break;case 26:case 27:case 5:Ht(a);break;case 4:Qe();break;case 31:a.memoizedState!==null&&Xn(a);break;case 13:Xn(a);break;case 19:Z(Kt);break;case 10:Si(a.type);break;case 22:case 23:Xn(a),lh(),t!==null&&Z(yr);break;case 24:Si(tn)}}function Bl(t,a){try{var r=a.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var h=l.next;r=h;do{if((r.tag&t)===t){l=void 0;var p=r.create,v=r.inst;l=p(),v.destroy=l}r=r.next}while(r!==h)}}catch(A){yt(a,a.return,A)}}function gs(t,a,r){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&t)===t){var v=l.inst,A=v.destroy;if(A!==void 0){v.destroy=void 0,h=a;var M=r,K=A;try{K()}catch(te){yt(h,M,te)}}}l=l.next}while(l!==p)}}catch(te){yt(a,a.return,te)}}function Db(t){var a=t.updateQueue;if(a!==null){var r=t.stateNode;try{w0(a,r)}catch(l){yt(t,t.return,l)}}}function Mb(t,a,r){r.props=Ar(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){yt(t,a,l)}}function Hl(t,a){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(h){yt(t,a,h)}}function ni(t,a){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(h){yt(t,a,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){yt(t,a,h)}else r.current=null}function Pb(t){var a=t.type,r=t.memoizedProps,l=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(h){yt(t,t.return,h)}}function Uh(t,a,r){try{var l=t.stateNode;ow(l,t.type,r,a),l[dn]=a}catch(h){yt(t,t.return,h)}}function Vb(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&As(t.type)||t.tag===4}function Bh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&As(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hh(t,a,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(t),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=Aa));else if(l!==4&&(l===27&&As(t.type)&&(r=t.stateNode,a=null),t=t.child,t!==null))for(Hh(t,a,r),t=t.sibling;t!==null;)Hh(t,a,r),t=t.sibling}function zu(t,a,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?r.insertBefore(t,a):r.appendChild(t);else if(l!==4&&(l===27&&As(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(zu(t,a,r),t=t.sibling;t!==null;)zu(t,a,r),t=t.sibling}function zb(t){var a=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,h=a.attributes;h.length;)a.removeAttributeNode(h[0]);vn(a,l,r),a[Wt]=t,a[dn]=r}catch(p){yt(t,t.return,p)}}var Ii=!1,sn=!1,qh=!1,Lb=typeof WeakSet=="function"?WeakSet:Set,hn=null;function UA(t,a){if(t=t.containerInfo,up=sd,t=Jg(t),Pf(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var h=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var v=0,A=-1,M=-1,K=0,te=0,se=t,Q=null;t:for(;;){for(var W;se!==r||h!==0&&se.nodeType!==3||(A=v+h),se!==p||l!==0&&se.nodeType!==3||(M=v+l),se.nodeType===3&&(v+=se.nodeValue.length),(W=se.firstChild)!==null;)Q=se,se=W;for(;;){if(se===t)break t;if(Q===r&&++K===h&&(A=v),Q===p&&++te===l&&(M=v),(W=se.nextSibling)!==null)break;se=Q,Q=se.parentNode}se=W}r=A===-1||M===-1?null:{start:A,end:M}}else r=null}r=r||{start:0,end:0}}else r=null;for(dp={focusedElem:t,selectionRange:r},sd=!1,hn=a;hn!==null;)if(a=hn,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,hn=t;else for(;hn!==null;){switch(a=hn,p=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)h=t[r],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,r=a,h=p.memoizedProps,p=p.memoizedState,l=r.stateNode;try{var Re=Ar(r.type,h);t=l.getSnapshotBeforeUpdate(Re,p),l.__reactInternalSnapshotBeforeUpdate=t}catch(Oe){yt(r,r.return,Oe)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,r=t.nodeType,r===9)pp(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":pp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=a.sibling,t!==null){t.return=a.return,hn=t;break}hn=a.return}}function Ub(t,a,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:ki(t,r),l&4&&Bl(5,r);break;case 1:if(ki(t,r),l&4)if(t=r.stateNode,a===null)try{t.componentDidMount()}catch(v){yt(r,r.return,v)}else{var h=Ar(r.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(h,a,t.__reactInternalSnapshotBeforeUpdate)}catch(v){yt(r,r.return,v)}}l&64&&Db(r),l&512&&Hl(r,r.return);break;case 3:if(ki(t,r),l&64&&(t=r.updateQueue,t!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{w0(t,a)}catch(v){yt(r,r.return,v)}}break;case 27:a===null&&l&4&&zb(r);case 26:case 5:ki(t,r),a===null&&l&4&&Pb(r),l&512&&Hl(r,r.return);break;case 12:ki(t,r);break;case 31:ki(t,r),l&4&&qb(t,r);break;case 13:ki(t,r),l&4&&Fb(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=YA.bind(null,r),mw(t,r))));break;case 22:if(l=r.memoizedState!==null||Ii,!l){a=a!==null&&a.memoizedState!==null||sn,h=Ii;var p=sn;Ii=l,(sn=a)&&!p?Oi(t,r,(r.subtreeFlags&8772)!==0):ki(t,r),Ii=h,sn=p}break;case 30:break;default:ki(t,r)}}function Bb(t){var a=t.alternate;a!==null&&(t.alternate=null,Bb(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Fr(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Pt=null,Vn=!1;function ji(t,a,r){for(r=r.child;r!==null;)Hb(t,a,r),r=r.sibling}function Hb(t,a,r){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(Ve,r)}catch{}switch(r.tag){case 26:sn||ni(r,a),ji(t,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:sn||ni(r,a);var l=Pt,h=Vn;As(r.type)&&(Pt=r.stateNode,Vn=!1),ji(t,a,r),Jl(r.stateNode),Pt=l,Vn=h;break;case 5:sn||ni(r,a);case 6:if(l=Pt,h=Vn,Pt=null,ji(t,a,r),Pt=l,Vn=h,Pt!==null)if(Vn)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(r.stateNode)}catch(p){yt(r,a,p)}else try{Pt.removeChild(r.stateNode)}catch(p){yt(r,a,p)}break;case 18:Pt!==null&&(Vn?(t=Pt,Dy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Co(t)):Dy(Pt,r.stateNode));break;case 4:l=Pt,h=Vn,Pt=r.stateNode.containerInfo,Vn=!0,ji(t,a,r),Pt=l,Vn=h;break;case 0:case 11:case 14:case 15:gs(2,r,a),sn||gs(4,r,a),ji(t,a,r);break;case 1:sn||(ni(r,a),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Mb(r,a,l)),ji(t,a,r);break;case 21:ji(t,a,r);break;case 22:sn=(l=sn)||r.memoizedState!==null,ji(t,a,r),sn=l;break;default:ji(t,a,r)}}function qb(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Co(t)}catch(r){yt(a,a.return,r)}}}function Fb(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Co(t)}catch(r){yt(a,a.return,r)}}function BA(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Lb),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Lb),a;default:throw Error(s(435,t.tag))}}function Lu(t,a){var r=BA(t);a.forEach(function(l){if(!r.has(l)){r.add(l);var h=XA.bind(null,t,l);l.then(h,h)}})}function zn(t,a){var r=a.deletions;if(r!==null)for(var l=0;l<r.length;l++){var h=r[l],p=t,v=a,A=v;e:for(;A!==null;){switch(A.tag){case 27:if(As(A.type)){Pt=A.stateNode,Vn=!1;break e}break;case 5:Pt=A.stateNode,Vn=!1;break e;case 3:case 4:Pt=A.stateNode.containerInfo,Vn=!0;break e}A=A.return}if(Pt===null)throw Error(s(160));Hb(p,v,h),Pt=null,Vn=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Gb(a,t),a=a.sibling}var Ca=null;function Gb(t,a){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:zn(a,t),Ln(t),l&4&&(gs(3,t,t.return),Bl(3,t),gs(5,t,t.return));break;case 1:zn(a,t),Ln(t),l&512&&(sn||r===null||ni(r,r.return)),l&64&&Ii&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var h=Ca;if(zn(a,t),Ln(t),l&512&&(sn||r===null||ni(r,r.return)),l&4){var p=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){e:{l=t.type,r=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":p=h.getElementsByTagName("title")[0],(!p||p[Ha]||p[Wt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(l),h.head.insertBefore(p,h.querySelector("head > title"))),vn(p,l,r),p[Wt]=t,Zt(p),l=p;break e;case"link":var v=Gy("link","href",h).get(l+(r.href||""));if(v){for(var A=0;A<v.length;A++)if(p=v[A],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(A,1);break t}}p=h.createElement(l),vn(p,l,r),h.head.appendChild(p);break;case"meta":if(v=Gy("meta","content",h).get(l+(r.content||""))){for(A=0;A<v.length;A++)if(p=v[A],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(A,1);break t}}p=h.createElement(l),vn(p,l,r),h.head.appendChild(p);break;default:throw Error(s(468,l))}p[Wt]=t,Zt(p),l=p}t.stateNode=l}else $y(h,t.type,t.stateNode);else t.stateNode=Fy(h,l,t.memoizedProps);else p!==l?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,l===null?$y(h,t.type,t.stateNode):Fy(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Uh(t,t.memoizedProps,r.memoizedProps)}break;case 27:zn(a,t),Ln(t),l&512&&(sn||r===null||ni(r,r.return)),r!==null&&l&4&&Uh(t,t.memoizedProps,r.memoizedProps);break;case 5:if(zn(a,t),Ln(t),l&512&&(sn||r===null||ni(r,r.return)),t.flags&32){h=t.stateNode;try{Pn(h,"")}catch(Re){yt(t,t.return,Re)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Uh(t,h,r!==null?r.memoizedProps:h)),l&1024&&(qh=!0);break;case 6:if(zn(a,t),Ln(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(Re){yt(t,t.return,Re)}}break;case 3:if(td=null,h=Ca,Ca=Zu(a.containerInfo),zn(a,t),Ca=h,Ln(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{Co(a.containerInfo)}catch(Re){yt(t,t.return,Re)}qh&&(qh=!1,$b(t));break;case 4:l=Ca,Ca=Zu(t.stateNode.containerInfo),zn(a,t),Ln(t),Ca=l;break;case 12:zn(a,t),Ln(t);break;case 31:zn(a,t),Ln(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lu(t,l)));break;case 13:zn(a,t),Ln(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Bu=qe()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lu(t,l)));break;case 22:h=t.memoizedState!==null;var M=r!==null&&r.memoizedState!==null,K=Ii,te=sn;if(Ii=K||h,sn=te||M,zn(a,t),sn=te,Ii=K,Ln(t),l&8192)e:for(a=t.stateNode,a._visibility=h?a._visibility&-2:a._visibility|1,h&&(r===null||M||Ii||sn||wr(t)),r=null,a=t;;){if(a.tag===5||a.tag===26){if(r===null){M=r=a;try{if(p=M.stateNode,h)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{A=M.stateNode;var se=M.memoizedProps.style,Q=se!=null&&se.hasOwnProperty("display")?se.display:null;A.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Re){yt(M,M.return,Re)}}}else if(a.tag===6){if(r===null){M=a;try{M.stateNode.nodeValue=h?"":M.memoizedProps}catch(Re){yt(M,M.return,Re)}}}else if(a.tag===18){if(r===null){M=a;try{var W=M.stateNode;h?My(W,!0):My(M.stateNode,!1)}catch(Re){yt(M,M.return,Re)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Lu(t,r))));break;case 19:zn(a,t),Ln(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lu(t,l)));break;case 30:break;case 21:break;default:zn(a,t),Ln(t)}}function Ln(t){var a=t.flags;if(a&2){try{for(var r,l=t.return;l!==null;){if(Vb(l)){r=l;break}l=l.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var h=r.stateNode,p=Bh(t);zu(t,p,h);break;case 5:var v=r.stateNode;r.flags&32&&(Pn(v,""),r.flags&=-33);var A=Bh(t);zu(t,A,v);break;case 3:case 4:var M=r.stateNode.containerInfo,K=Bh(t);Hh(t,K,M);break;default:throw Error(s(161))}}catch(te){yt(t,t.return,te)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function $b(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;$b(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function ki(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Ub(t,a.alternate,a),a=a.sibling}function wr(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:gs(4,a,a.return),wr(a);break;case 1:ni(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&Mb(a,a.return,r),wr(a);break;case 27:Jl(a.stateNode);case 26:case 5:ni(a,a.return),wr(a);break;case 22:a.memoizedState===null&&wr(a);break;case 30:wr(a);break;default:wr(a)}t=t.sibling}}function Oi(t,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,h=t,p=a,v=p.flags;switch(p.tag){case 0:case 11:case 15:Oi(h,p,r),Bl(4,p);break;case 1:if(Oi(h,p,r),l=p,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(K){yt(l,l.return,K)}if(l=p,h=l.updateQueue,h!==null){var A=l.stateNode;try{var M=h.shared.hiddenCallbacks;if(M!==null)for(h.shared.hiddenCallbacks=null,h=0;h<M.length;h++)A0(M[h],A)}catch(K){yt(l,l.return,K)}}r&&v&64&&Db(p),Hl(p,p.return);break;case 27:zb(p);case 26:case 5:Oi(h,p,r),r&&l===null&&v&4&&Pb(p),Hl(p,p.return);break;case 12:Oi(h,p,r);break;case 31:Oi(h,p,r),r&&v&4&&qb(h,p);break;case 13:Oi(h,p,r),r&&v&4&&Fb(h,p);break;case 22:p.memoizedState===null&&Oi(h,p,r),Hl(p,p.return);break;case 30:break;default:Oi(h,p,r)}a=a.sibling}}function Fh(t,a){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Rl(r))}function Gh(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Rl(t))}function Ia(t,a,r,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Kb(t,a,r,l),a=a.sibling}function Kb(t,a,r,l){var h=a.flags;switch(a.tag){case 0:case 11:case 15:Ia(t,a,r,l),h&2048&&Bl(9,a);break;case 1:Ia(t,a,r,l);break;case 3:Ia(t,a,r,l),h&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Rl(t)));break;case 12:if(h&2048){Ia(t,a,r,l),t=a.stateNode;try{var p=a.memoizedProps,v=p.id,A=p.onPostCommit;typeof A=="function"&&A(v,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){yt(a,a.return,M)}}else Ia(t,a,r,l);break;case 31:Ia(t,a,r,l);break;case 13:Ia(t,a,r,l);break;case 23:break;case 22:p=a.stateNode,v=a.alternate,a.memoizedState!==null?p._visibility&2?Ia(t,a,r,l):ql(t,a):p._visibility&2?Ia(t,a,r,l):(p._visibility|=2,yo(t,a,r,l,(a.subtreeFlags&10256)!==0||!1)),h&2048&&Fh(v,a);break;case 24:Ia(t,a,r,l),h&2048&&Gh(a.alternate,a);break;default:Ia(t,a,r,l)}}function yo(t,a,r,l,h){for(h=h&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=t,v=a,A=r,M=l,K=v.flags;switch(v.tag){case 0:case 11:case 15:yo(p,v,A,M,h),Bl(8,v);break;case 23:break;case 22:var te=v.stateNode;v.memoizedState!==null?te._visibility&2?yo(p,v,A,M,h):ql(p,v):(te._visibility|=2,yo(p,v,A,M,h)),h&&K&2048&&Fh(v.alternate,v);break;case 24:yo(p,v,A,M,h),h&&K&2048&&Gh(v.alternate,v);break;default:yo(p,v,A,M,h)}a=a.sibling}}function ql(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=t,l=a,h=l.flags;switch(l.tag){case 22:ql(r,l),h&2048&&Fh(l.alternate,l);break;case 24:ql(r,l),h&2048&&Gh(l.alternate,l);break;default:ql(r,l)}a=a.sibling}}var Fl=8192;function vo(t,a,r){if(t.subtreeFlags&Fl)for(t=t.child;t!==null;)Qb(t,a,r),t=t.sibling}function Qb(t,a,r){switch(t.tag){case 26:vo(t,a,r),t.flags&Fl&&t.memoizedState!==null&&Nw(r,Ca,t.memoizedState,t.memoizedProps);break;case 5:vo(t,a,r);break;case 3:case 4:var l=Ca;Ca=Zu(t.stateNode.containerInfo),vo(t,a,r),Ca=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Fl,Fl=16777216,vo(t,a,r),Fl=l):vo(t,a,r));break;default:vo(t,a,r)}}function Yb(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Gl(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var l=a[r];hn=l,Jb(l,t)}Yb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Xb(t),t=t.sibling}function Xb(t){switch(t.tag){case 0:case 11:case 15:Gl(t),t.flags&2048&&gs(9,t,t.return);break;case 3:Gl(t);break;case 12:Gl(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Uu(t)):Gl(t);break;default:Gl(t)}}function Uu(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var l=a[r];hn=l,Jb(l,t)}Yb(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:gs(8,a,a.return),Uu(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,Uu(a));break;default:Uu(a)}t=t.sibling}}function Jb(t,a){for(;hn!==null;){var r=hn;switch(r.tag){case 0:case 11:case 15:gs(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Rl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,hn=l;else e:for(r=t;hn!==null;){l=hn;var h=l.sibling,p=l.return;if(Bb(l),l===r){hn=null;break e}if(h!==null){h.return=p,hn=h;break e}hn=p}}}var HA={getCacheForType:function(t){var a=bn(tn),r=a.data.get(t);return r===void 0&&(r=t(),a.data.set(t,r)),r},cacheSignal:function(){return bn(tn).controller.signal}},qA=typeof WeakMap=="function"?WeakMap:Map,ht=0,At=null,Je=null,Ze=0,bt=0,Jn=null,bs=!1,xo=!1,$h=!1,Di=0,Ft=0,ys=0,Sr=0,Kh=0,Wn=0,_o=0,$l=null,Un=null,Qh=!1,Bu=0,Wb=0,Hu=1/0,qu=null,vs=null,cn=0,xs=null,Eo=null,Mi=0,Yh=0,Xh=null,Zb=null,Kl=0,Jh=null;function Zn(){return(ht&2)!==0&&Ze!==0?Ze&-Ze:G.T!==null?ap():Fc()}function ey(){if(Wn===0)if((Ze&536870912)===0||ot){var t=Ws;Ws<<=1,(Ws&3932160)===0&&(Ws=262144),Wn=t}else Wn=536870912;return t=Yn.current,t!==null&&(t.flags|=32),Wn}function Bn(t,a,r){(t===At&&(bt===2||bt===9)||t.cancelPendingCommit!==null)&&(Ao(t,0),_s(t,Ze,Wn,!1)),Zs(t,r),((ht&2)===0||t!==At)&&(t===At&&((ht&2)===0&&(Sr|=r),Ft===4&&_s(t,Ze,Wn,!1)),ai(t))}function ty(t,a,r){if((ht&6)!==0)throw Error(s(327));var l=!r&&(a&127)===0&&(a&t.expiredLanes)===0||xa(t,a),h=l?$A(t,a):Zh(t,a,!0),p=l;do{if(h===0){xo&&!l&&_s(t,a,0,!1);break}else{if(r=t.current.alternate,p&&!FA(r)){h=Zh(t,a,!1),p=!1;continue}if(h===2){if(p=a,t.errorRecoveryDisabledLanes&p)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;e:{var A=t;h=$l;var M=A.current.memoizedState.isDehydrated;if(M&&(Ao(A,v).flags|=256),v=Zh(A,v,!1),v!==2){if($h&&!M){A.errorRecoveryDisabledLanes|=p,Sr|=p,h=4;break e}p=Un,Un=h,p!==null&&(Un===null?Un=p:Un.push.apply(Un,p))}h=v}if(p=!1,h!==2)continue}}if(h===1){Ao(t,0),_s(t,a,0,!0);break}e:{switch(l=t,p=h,p){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:_s(l,a,Wn,!bs);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(h=Bu+300-qe(),10<h)){if(_s(l,a,Wn,!bs),La(l,0,!0)!==0)break e;Mi=a,l.timeoutHandle=ky(ny.bind(null,l,r,Un,qu,Qh,a,Wn,Sr,_o,bs,p,"Throttled",-0,0),h);break e}ny(l,r,Un,qu,Qh,a,Wn,Sr,_o,bs,p,null,-0,0)}}break}while(!0);ai(t)}function ny(t,a,r,l,h,p,v,A,M,K,te,se,Q,W){if(t.timeoutHandle=-1,se=a.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Aa},Qb(a,p,se);var Re=(p&62914560)===p?Bu-qe():(p&4194048)===p?Wb-qe():0;if(Re=Rw(se,Re),Re!==null){Mi=p,t.cancelPendingCommit=Re(uy.bind(null,t,a,p,r,l,h,v,A,M,te,se,null,Q,W)),_s(t,p,v,!K);return}}uy(t,a,p,r,l,h,v,A,M)}function FA(t){for(var a=t;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var h=r[l],p=h.getSnapshot;h=h.value;try{if(!Kn(p(),h))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function _s(t,a,r,l){a&=~Kh,a&=~Sr,t.suspendedLanes|=a,t.pingedLanes&=~a,l&&(t.warmLanes|=a),l=t.expirationTimes;for(var h=a;0<h;){var p=31-Fe(h),v=1<<p;l[p]=-1,h&=~v}r!==0&&er(t,r,a)}function Fu(){return(ht&6)===0?(Ql(0),!1):!0}function Wh(){if(Je!==null){if(bt===0)var t=Je.return;else t=Je,wi=gr=null,ph(t),ho=null,Il=0,t=Je;for(;t!==null;)Ob(t.alternate,t),t=t.return;Je=null}}function Ao(t,a){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,uw(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Mi=0,Wh(),At=t,Je=r=Ei(t.current,null),Ze=a,bt=0,Jn=null,bs=!1,xo=xa(t,a),$h=!1,_o=Wn=Kh=Sr=ys=Ft=0,Un=$l=null,Qh=!1,(a&8)!==0&&(a|=a&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=a;0<l;){var h=31-Fe(l),p=1<<h;a|=t[h],l&=~p}return Di=a,du(),r}function ay(t,a){$e=null,G.H=zl,a===fo||a===vu?(a=v0(),bt=3):a===nh?(a=v0(),bt=4):bt=a===Ih?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Jn=a,Je===null&&(Ft=1,Ou(t,ca(a,t.current)))}function iy(){var t=Yn.current;return t===null?!0:(Ze&4194048)===Ze?ha===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?t===ha:!1}function sy(){var t=G.H;return G.H=zl,t===null?zl:t}function ry(){var t=G.A;return G.A=HA,t}function Gu(){Ft=4,bs||(Ze&4194048)!==Ze&&Yn.current!==null||(xo=!0),(ys&134217727)===0&&(Sr&134217727)===0||At===null||_s(At,Ze,Wn,!1)}function Zh(t,a,r){var l=ht;ht|=2;var h=sy(),p=ry();(At!==t||Ze!==a)&&(qu=null,Ao(t,a)),a=!1;var v=Ft;e:do try{if(bt!==0&&Je!==null){var A=Je,M=Jn;switch(bt){case 8:Wh(),v=6;break e;case 3:case 2:case 9:case 6:Yn.current===null&&(a=!0);var K=bt;if(bt=0,Jn=null,wo(t,A,M,K),r&&xo){v=0;break e}break;default:K=bt,bt=0,Jn=null,wo(t,A,M,K)}}GA(),v=Ft;break}catch(te){ay(t,te)}while(!0);return a&&t.shellSuspendCounter++,wi=gr=null,ht=l,G.H=h,G.A=p,Je===null&&(At=null,Ze=0,du()),v}function GA(){for(;Je!==null;)oy(Je)}function $A(t,a){var r=ht;ht|=2;var l=sy(),h=ry();At!==t||Ze!==a?(qu=null,Hu=qe()+500,Ao(t,a)):xo=xa(t,a);e:do try{if(bt!==0&&Je!==null){a=Je;var p=Jn;t:switch(bt){case 1:bt=0,Jn=null,wo(t,a,p,1);break;case 2:case 9:if(b0(p)){bt=0,Jn=null,ly(a);break}a=function(){bt!==2&&bt!==9||At!==t||(bt=7),ai(t)},p.then(a,a);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:b0(p)?(bt=0,Jn=null,ly(a)):(bt=0,Jn=null,wo(t,a,p,7));break;case 5:var v=null;switch(Je.tag){case 26:v=Je.memoizedState;case 5:case 27:var A=Je;if(v?Ky(v):A.stateNode.complete){bt=0,Jn=null;var M=A.sibling;if(M!==null)Je=M;else{var K=A.return;K!==null?(Je=K,$u(K)):Je=null}break t}}bt=0,Jn=null,wo(t,a,p,5);break;case 6:bt=0,Jn=null,wo(t,a,p,6);break;case 8:Wh(),Ft=6;break e;default:throw Error(s(462))}}KA();break}catch(te){ay(t,te)}while(!0);return wi=gr=null,G.H=l,G.A=h,ht=r,Je!==null?0:(At=null,Ze=0,du(),Ft)}function KA(){for(;Je!==null&&!R();)oy(Je)}function oy(t){var a=jb(t.alternate,t,Di);t.memoizedProps=t.pendingProps,a===null?$u(t):Je=a}function ly(t){var a=t,r=a.alternate;switch(a.tag){case 15:case 0:a=Sb(r,a,a.pendingProps,a.type,void 0,Ze);break;case 11:a=Sb(r,a,a.pendingProps,a.type.render,a.ref,Ze);break;case 5:ph(a);default:Ob(r,a),a=Je=r0(a,Di),a=jb(r,a,Di)}t.memoizedProps=t.pendingProps,a===null?$u(t):Je=a}function wo(t,a,r,l){wi=gr=null,ph(a),ho=null,Il=0;var h=a.return;try{if(MA(t,h,a,r,Ze)){Ft=1,Ou(t,ca(r,t.current)),Je=null;return}}catch(p){if(h!==null)throw Je=h,p;Ft=1,Ou(t,ca(r,t.current)),Je=null;return}a.flags&32768?(ot||l===1?t=!0:xo||(Ze&536870912)!==0?t=!1:(bs=t=!0,(l===2||l===9||l===3||l===6)&&(l=Yn.current,l!==null&&l.tag===13&&(l.flags|=16384))),cy(a,t)):$u(a)}function $u(t){var a=t;do{if((a.flags&32768)!==0){cy(a,bs);return}t=a.return;var r=zA(a.alternate,a,Di);if(r!==null){Je=r;return}if(a=a.sibling,a!==null){Je=a;return}Je=a=t}while(a!==null);Ft===0&&(Ft=5)}function cy(t,a){do{var r=LA(t.alternate,t);if(r!==null){r.flags&=32767,Je=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(t=t.sibling,t!==null)){Je=t;return}Je=t=r}while(t!==null);Ft=6,Je=null}function uy(t,a,r,l,h,p,v,A,M){t.cancelPendingCommit=null;do Ku();while(cn!==0);if((ht&6)!==0)throw Error(s(327));if(a!==null){if(a===t.current)throw Error(s(177));if(p=a.lanes|a.childLanes,p|=Bf,kf(t,r,p,v,A,M),t===At&&(Je=At=null,Ze=0),Eo=a,xs=t,Mi=r,Yh=p,Xh=h,Zb=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,JA(Dn,function(){return my(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=G.T,G.T=null,h=ce.p,ce.p=2,v=ht,ht|=4;try{UA(t,a,r)}finally{ht=v,ce.p=h,G.T=l}}cn=1,dy(),fy(),hy()}}function dy(){if(cn===1){cn=0;var t=xs,a=Eo,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=G.T,G.T=null;var l=ce.p;ce.p=2;var h=ht;ht|=4;try{Gb(a,t);var p=dp,v=Jg(t.containerInfo),A=p.focusedElem,M=p.selectionRange;if(v!==A&&A&&A.ownerDocument&&Xg(A.ownerDocument.documentElement,A)){if(M!==null&&Pf(A)){var K=M.start,te=M.end;if(te===void 0&&(te=K),"selectionStart"in A)A.selectionStart=K,A.selectionEnd=Math.min(te,A.value.length);else{var se=A.ownerDocument||document,Q=se&&se.defaultView||window;if(Q.getSelection){var W=Q.getSelection(),Re=A.textContent.length,Oe=Math.min(M.start,Re),Et=M.end===void 0?Oe:Math.min(M.end,Re);!W.extend&&Oe>Et&&(v=Et,Et=Oe,Oe=v);var q=Yg(A,Oe),L=Yg(A,Et);if(q&&L&&(W.rangeCount!==1||W.anchorNode!==q.node||W.anchorOffset!==q.offset||W.focusNode!==L.node||W.focusOffset!==L.offset)){var $=se.createRange();$.setStart(q.node,q.offset),W.removeAllRanges(),Oe>Et?(W.addRange($),W.extend(L.node,L.offset)):($.setEnd(L.node,L.offset),W.addRange($))}}}}for(se=[],W=A;W=W.parentNode;)W.nodeType===1&&se.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<se.length;A++){var ne=se[A];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}sd=!!up,dp=up=null}finally{ht=h,ce.p=l,G.T=r}}t.current=a,cn=2}}function fy(){if(cn===2){cn=0;var t=xs,a=Eo,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=G.T,G.T=null;var l=ce.p;ce.p=2;var h=ht;ht|=4;try{Ub(t,a.alternate,a)}finally{ht=h,ce.p=l,G.T=r}}cn=3}}function hy(){if(cn===4||cn===3){cn=0,de();var t=xs,a=Eo,r=Mi,l=Zb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?cn=5:(cn=0,Eo=xs=null,py(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(vs=null),yi(r),a=a.stateNode,dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(Ve,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=G.T,h=ce.p,ce.p=2,G.T=null;try{for(var p=t.onRecoverableError,v=0;v<l.length;v++){var A=l[v];p(A.value,{componentStack:A.stack})}}finally{G.T=a,ce.p=h}}(Mi&3)!==0&&Ku(),ai(t),h=t.pendingLanes,(r&261930)!==0&&(h&42)!==0?t===Jh?Kl++:(Kl=0,Jh=t):Kl=0,Ql(0)}}function py(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Rl(a)))}function Ku(){return dy(),fy(),hy(),my()}function my(){if(cn!==5)return!1;var t=xs,a=Yh;Yh=0;var r=yi(Mi),l=G.T,h=ce.p;try{ce.p=32>r?32:r,G.T=null,r=Xh,Xh=null;var p=xs,v=Mi;if(cn=0,Eo=xs=null,Mi=0,(ht&6)!==0)throw Error(s(331));var A=ht;if(ht|=4,Xb(p.current),Kb(p,p.current,v,r),ht=A,Ql(0,!1),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(Ve,p)}catch{}return!0}finally{ce.p=h,G.T=l,py(t,a)}}function gy(t,a,r){a=ca(r,a),a=Ch(t.stateNode,a,2),t=hs(t,a,2),t!==null&&(Zs(t,2),ai(t))}function yt(t,a,r){if(t.tag===3)gy(t,t,r);else for(;a!==null;){if(a.tag===3){gy(a,t,r);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(vs===null||!vs.has(l))){t=ca(r,t),r=bb(2),l=hs(a,r,2),l!==null&&(yb(r,l,a,t),Zs(l,2),ai(l));break}}a=a.return}}function ep(t,a,r){var l=t.pingCache;if(l===null){l=t.pingCache=new qA;var h=new Set;l.set(a,h)}else h=l.get(a),h===void 0&&(h=new Set,l.set(a,h));h.has(r)||($h=!0,h.add(r),t=QA.bind(null,t,a,r),a.then(t,t))}function QA(t,a,r){var l=t.pingCache;l!==null&&l.delete(a),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,At===t&&(Ze&r)===r&&(Ft===4||Ft===3&&(Ze&62914560)===Ze&&300>qe()-Bu?(ht&2)===0&&Ao(t,0):Kh|=r,_o===Ze&&(_o=0)),ai(t)}function by(t,a){a===0&&(a=qc()),t=hr(t,a),t!==null&&(Zs(t,a),ai(t))}function YA(t){var a=t.memoizedState,r=0;a!==null&&(r=a.retryLane),by(t,r)}function XA(t,a){var r=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(r=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(a),by(t,r)}function JA(t,a){return Rt(t,a)}var Qu=null,So=null,tp=!1,Yu=!1,np=!1,Es=0;function ai(t){t!==So&&t.next===null&&(So===null?Qu=So=t:So=So.next=t),Yu=!0,tp||(tp=!0,ZA())}function Ql(t,a){if(!np&&Yu){np=!0;do for(var r=!1,l=Qu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var p=0;else{var v=l.suspendedLanes,A=l.pingedLanes;p=(1<<31-Fe(42|t)+1)-1,p&=h&~(v&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,_y(l,p))}else p=Ze,p=La(l,l===At?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||xa(l,p)||(r=!0,_y(l,p));l=l.next}while(r);np=!1}}function WA(){yy()}function yy(){Yu=tp=!1;var t=0;Es!==0&&cw()&&(t=Es);for(var a=qe(),r=null,l=Qu;l!==null;){var h=l.next,p=vy(l,a);p===0?(l.next=null,r===null?Qu=h:r.next=h,h===null&&(So=r)):(r=l,(t!==0||(p&3)!==0)&&(Yu=!0)),l=h}cn!==0&&cn!==5||Ql(t),Es!==0&&(Es=0)}function vy(t,a){for(var r=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var v=31-Fe(p),A=1<<v,M=h[v];M===-1?((A&r)===0||(A&l)!==0)&&(h[v]=jf(A,a)):M<=a&&(t.expiredLanes|=A),p&=~A}if(a=At,r=Ze,r=La(t,t===a?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===a&&(bt===2||bt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&On(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||xa(t,r)){if(a=r&-r,a===t.callbackPriority)return a;switch(l!==null&&On(l),yi(r)){case 2:case 8:r=It;break;case 32:r=Dn;break;case 268435456:r=pt;break;default:r=Dn}return l=xy.bind(null,t),r=Rt(r,l),t.callbackPriority=a,t.callbackNode=r,a}return l!==null&&l!==null&&On(l),t.callbackPriority=2,t.callbackNode=null,2}function xy(t,a){if(cn!==0&&cn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Ku()&&t.callbackNode!==r)return null;var l=Ze;return l=La(t,t===At?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ty(t,l,a),vy(t,qe()),t.callbackNode!=null&&t.callbackNode===r?xy.bind(null,t):null)}function _y(t,a){if(Ku())return null;ty(t,a,!0)}function ZA(){dw(function(){(ht&6)!==0?Rt(Ct,WA):yy()})}function ap(){if(Es===0){var t=co;t===0&&(t=Va,Va<<=1,(Va&261888)===0&&(Va=256)),Es=t}return Es}function Ey(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Qr(""+t)}function Ay(t,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,t.id&&r.setAttribute("form",t.id),a.parentNode.insertBefore(r,a),t=new FormData(t),r.parentNode.removeChild(r),t}function ew(t,a,r,l,h){if(a==="submit"&&r&&r.stateNode===h){var p=Ey((h[dn]||null).action),v=l.submitter;v&&(a=(a=v[dn]||null)?Ey(a.formAction):v.getAttribute("formAction"),a!==null&&(p=a,v=null));var A=new Xa("action","action",null,l,h);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Es!==0){var M=v?Ay(h,v):new FormData(h);Ah(r,{pending:!0,data:M,method:h.method,action:p},null,M)}}else typeof p=="function"&&(A.preventDefault(),M=v?Ay(h,v):new FormData(h),Ah(r,{pending:!0,data:M,method:h.method,action:p},p,M))},currentTarget:h}]})}}for(var ip=0;ip<Uf.length;ip++){var sp=Uf[ip],tw=sp.toLowerCase(),nw=sp[0].toUpperCase()+sp.slice(1);Ra(tw,"on"+nw)}Ra(e0,"onAnimationEnd"),Ra(t0,"onAnimationIteration"),Ra(n0,"onAnimationStart"),Ra("dblclick","onDoubleClick"),Ra("focusin","onFocus"),Ra("focusout","onBlur"),Ra(yA,"onTransitionRun"),Ra(vA,"onTransitionStart"),Ra(xA,"onTransitionCancel"),Ra(a0,"onTransitionEnd"),$a("onMouseEnter",["mouseout","mouseover"]),$a("onMouseLeave",["mouseout","mouseover"]),$a("onPointerEnter",["pointerout","pointerover"]),$a("onPointerLeave",["pointerout","pointerover"]),Ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ga("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yl));function wy(t,a){a=(a&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],h=l.event;l=l.listeners;e:{var p=void 0;if(a)for(var v=l.length-1;0<=v;v--){var A=l[v],M=A.instance,K=A.currentTarget;if(A=A.listener,M!==p&&h.isPropagationStopped())break e;p=A,h.currentTarget=K;try{p(h)}catch(te){uu(te)}h.currentTarget=null,p=M}else for(v=0;v<l.length;v++){if(A=l[v],M=A.instance,K=A.currentTarget,A=A.listener,M!==p&&h.isPropagationStopped())break e;p=A,h.currentTarget=K;try{p(h)}catch(te){uu(te)}h.currentTarget=null,p=M}}}}function We(t,a){var r=a[qr];r===void 0&&(r=a[qr]=new Set);var l=t+"__bubble";r.has(l)||(Sy(a,t,2,!1),r.add(l))}function rp(t,a,r){var l=0;a&&(l|=4),Sy(r,t,l,a)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function op(t){if(!t[Xu]){t[Xu]=!0,ol.forEach(function(r){r!=="selectionchange"&&(aw.has(r)||rp(r,!1,t),rp(r,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Xu]||(a[Xu]=!0,rp("selectionchange",!1,a))}}function Sy(t,a,r,l){switch(ev(a)){case 2:var h=jw;break;case 8:h=kw;break;default:h=Ep}r=h.bind(null,a,r,t),h=void 0,!sr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(a,r,{capture:!0,passive:h}):t.addEventListener(a,r,!0):h!==void 0?t.addEventListener(a,r,{passive:h}):t.addEventListener(a,r,!1)}function lp(t,a,r,l,h){var p=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var A=l.stateNode.containerInfo;if(A===h)break;if(v===4)for(v=l.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;A!==null;){if(v=qa(A),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){l=p=v;continue e}A=A.parentNode}}l=l.return}as(function(){var K=p,te=sa(r),se=[];e:{var Q=i0.get(t);if(Q!==void 0){var W=Xa,Re=t;switch(t){case"keypress":if(or(r)===0)break e;case"keydown":case"keyup":W=ou;break;case"focusin":Re="focus",W=cr;break;case"focusout":Re="blur",W=cr;break;case"beforeblur":case"afterblur":W=cr;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=xl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Wc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=y;break;case e0:case t0:case n0:W=eu;break;case a0:W=S;break;case"scroll":case"scrollend":W=vl;break;case"wheel":W=J;break;case"copy":case"cut":case"paste":W=tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=_i;break;case"toggle":case"beforetoggle":W=Ge}var Oe=(a&4)!==0,Et=!Oe&&(t==="scroll"||t==="scrollend"),q=Oe?Q!==null?Q+"Capture":null:Q;Oe=[];for(var L=K,$;L!==null;){var ne=L;if($=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||$===null||q===null||(ne=wa(L,q),ne!=null&&Oe.push(Xl(L,ne,$))),Et)break;L=L.return}0<Oe.length&&(Q=new W(Q,Re,null,r,te),se.push({event:Q,listeners:Oe}))}}if((a&7)===0){e:{if(Q=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",Q&&r!==gl&&(Re=r.relatedTarget||r.fromElement)&&(qa(Re)||Re[Ba]))break e;if((W||Q)&&(Q=te.window===te?te:(Q=te.ownerDocument)?Q.defaultView||Q.parentWindow:window,W?(Re=r.relatedTarget||r.toElement,W=K,Re=Re?qa(Re):null,Re!==null&&(Et=c(Re),Oe=Re.tag,Re!==Et||Oe!==5&&Oe!==27&&Oe!==6)&&(Re=null)):(W=null,Re=K),W!==Re)){if(Oe=xl,ne="onMouseLeave",q="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(Oe=_i,ne="onPointerLeave",q="onPointerEnter",L="pointer"),Et=W==null?Q:Gn(W),$=Re==null?Q:Gn(Re),Q=new Oe(ne,L+"leave",W,r,te),Q.target=Et,Q.relatedTarget=$,ne=null,qa(te)===K&&(Oe=new Oe(q,L+"enter",Re,r,te),Oe.target=$,Oe.relatedTarget=Et,ne=Oe),Et=ne,W&&Re)t:{for(Oe=iw,q=W,L=Re,$=0,ne=q;ne;ne=Oe(ne))$++;ne=0;for(var je=L;je;je=Oe(je))ne++;for(;0<$-ne;)q=Oe(q),$--;for(;0<ne-$;)L=Oe(L),ne--;for(;$--;){if(q===L||L!==null&&q===L.alternate){Oe=q;break t}q=Oe(q),L=Oe(L)}Oe=null}else Oe=null;W!==null&&Ty(se,Q,W,Oe,!1),Re!==null&&Et!==null&&Ty(se,Et,Re,Oe,!0)}}e:{if(Q=K?Gn(K):window,W=Q.nodeName&&Q.nodeName.toLowerCase(),W==="select"||W==="input"&&Q.type==="file")var ct=qg;else if(Bg(Q))if(Fg)ct=mA;else{ct=hA;var Ie=fA}else W=Q.nodeName,!W||W.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&Kr(K.elementType)&&(ct=qg):ct=pA;if(ct&&(ct=ct(t,K))){Hg(se,ct,r,te);break e}Ie&&Ie(t,Q,K),t==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&hl(Q,"number",Q.value)}switch(Ie=K?Gn(K):window,t){case"focusin":(Bg(Ie)||Ie.contentEditable==="true")&&(to=Ie,Vf=K,Sl=null);break;case"focusout":Sl=Vf=to=null;break;case"mousedown":zf=!0;break;case"contextmenu":case"mouseup":case"dragend":zf=!1,Wg(se,r,te);break;case"selectionchange":if(bA)break;case"keydown":case"keyup":Wg(se,r,te)}var Ke;if(ft)e:{switch(t){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else eo?ur(t,r)&&(et="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(et="onCompositionStart");et&&(Za&&r.locale!=="ko"&&(eo||et!=="onCompositionStart"?et==="onCompositionEnd"&&eo&&(Ke=yl()):(Ya=te,bl="value"in Ya?Ya.value:Ya.textContent,eo=!0)),Ie=Ju(K,et),0<Ie.length&&(et=new Wa(et,t,null,r,te),se.push({event:et,listeners:Ie}),Ke?et.data=Ke:(Ke=Zr(r),Ke!==null&&(et.data=Ke)))),(Ke=oa?lA(t,r):cA(t,r))&&(et=Ju(K,"onBeforeInput"),0<et.length&&(Ie=new Wa("onBeforeInput","beforeinput",null,r,te),se.push({event:Ie,listeners:et}),Ie.data=Ke)),ew(se,t,K,r,te)}wy(se,a)})}function Xl(t,a,r){return{instance:t,listener:a,currentTarget:r}}function Ju(t,a){for(var r=a+"Capture",l=[];t!==null;){var h=t,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=wa(t,r),h!=null&&l.unshift(Xl(t,h,p)),h=wa(t,a),h!=null&&l.push(Xl(t,h,p))),t.tag===3)return l;t=t.return}return[]}function iw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ty(t,a,r,l,h){for(var p=a._reactName,v=[];r!==null&&r!==l;){var A=r,M=A.alternate,K=A.stateNode;if(A=A.tag,M!==null&&M===l)break;A!==5&&A!==26&&A!==27||K===null||(M=K,h?(K=wa(r,p),K!=null&&v.unshift(Xl(r,K,M))):h||(K=wa(r,p),K!=null&&v.push(Xl(r,K,M)))),r=r.return}v.length!==0&&t.push({event:a,listeners:v})}var sw=/\r\n?/g,rw=/\u0000|\uFFFD/g;function Ny(t){return(typeof t=="string"?t:""+t).replace(sw,`
`).replace(rw,"")}function Ry(t,a){return a=Ny(a),Ny(t)===a}function _t(t,a,r,l,h,p){switch(r){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||Pn(t,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&Pn(t,""+l);break;case"className":$n(t,"class",l);break;case"tabIndex":$n(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":$n(t,r,l);break;case"style":ml(t,l,p);break;case"data":if(a!=="object"){$n(t,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=Qr(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(a!=="input"&&_t(t,a,"name",h.name,h,null),_t(t,a,"formEncType",h.formEncType,h,null),_t(t,a,"formMethod",h.formMethod,h,null),_t(t,a,"formTarget",h.formTarget,h,null)):(_t(t,a,"encType",h.encType,h,null),_t(t,a,"method",h.method,h,null),_t(t,a,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=Qr(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=Aa);break;case"onScroll":l!=null&&We("scroll",t);break;case"onScrollEnd":l!=null&&We("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=Qr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":We("beforetoggle",t),We("toggle",t),Gr(t,"popover",l);break;case"xlinkActuate":en(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":en(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":en(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":en(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":en(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":en(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":en(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":en(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":en(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Gr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Jc.get(r)||r,Gr(t,r,l))}}function cp(t,a,r,l,h,p){switch(r){case"style":ml(t,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=r}}break;case"children":typeof l=="string"?Pn(t,l):(typeof l=="number"||typeof l=="bigint")&&Pn(t,""+l);break;case"onScroll":l!=null&&We("scroll",t);break;case"onScrollEnd":l!=null&&We("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Aa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ll.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),a=r.slice(2,h?r.length-7:void 0),p=t[dn]||null,p=p!=null?p[r]:null,typeof p=="function"&&t.removeEventListener(a,p,h),typeof l=="function")){typeof p!="function"&&p!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(a,l,h);break e}r in t?t[r]=l:l===!0?t.setAttribute(r,""):Gr(t,r,l)}}}function vn(t,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",t),We("load",t);var l=!1,h=!1,p;for(p in r)if(r.hasOwnProperty(p)){var v=r[p];if(v!=null)switch(p){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:_t(t,a,p,v,r,null)}}h&&_t(t,a,"srcSet",r.srcSet,r,null),l&&_t(t,a,"src",r.src,r,null);return;case"input":We("invalid",t);var A=p=v=h=null,M=null,K=null;for(l in r)if(r.hasOwnProperty(l)){var te=r[l];if(te!=null)switch(l){case"name":h=te;break;case"type":v=te;break;case"checked":M=te;break;case"defaultChecked":K=te;break;case"value":p=te;break;case"defaultValue":A=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,a));break;default:_t(t,a,l,te,r,null)}}Qc(t,p,A,M,K,v,h,!1);return;case"select":We("invalid",t),l=v=p=null;for(h in r)if(r.hasOwnProperty(h)&&(A=r[h],A!=null))switch(h){case"value":p=A;break;case"defaultValue":v=A;break;case"multiple":l=A;default:_t(t,a,h,A,r,null)}a=p,r=v,t.multiple=!!l,a!=null?Zi(t,!!l,a,!1):r!=null&&Zi(t,!!l,r,!0);return;case"textarea":We("invalid",t),p=h=l=null;for(v in r)if(r.hasOwnProperty(v)&&(A=r[v],A!=null))switch(v){case"value":l=A;break;case"defaultValue":h=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:_t(t,a,v,A,r,null)}es(t,l,h,p);return;case"option":for(M in r)r.hasOwnProperty(M)&&(l=r[M],l!=null)&&(M==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":_t(t,a,M,l,r,null));return;case"dialog":We("beforetoggle",t),We("toggle",t),We("cancel",t),We("close",t);break;case"iframe":case"object":We("load",t);break;case"video":case"audio":for(l=0;l<Yl.length;l++)We(Yl[l],t);break;case"image":We("error",t),We("load",t);break;case"details":We("toggle",t);break;case"embed":case"source":case"link":We("error",t),We("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in r)if(r.hasOwnProperty(K)&&(l=r[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:_t(t,a,K,l,r,null)}return;default:if(Kr(a)){for(te in r)r.hasOwnProperty(te)&&(l=r[te],l!==void 0&&cp(t,a,te,l,r,void 0));return}}for(A in r)r.hasOwnProperty(A)&&(l=r[A],l!=null&&_t(t,a,A,l,r,null))}function ow(t,a,r,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,v=null,A=null,M=null,K=null,te=null;for(W in r){var se=r[W];if(r.hasOwnProperty(W)&&se!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":M=se;default:l.hasOwnProperty(W)||_t(t,a,W,null,l,se)}}for(var Q in l){var W=l[Q];if(se=r[Q],l.hasOwnProperty(Q)&&(W!=null||se!=null))switch(Q){case"type":p=W;break;case"name":h=W;break;case"checked":K=W;break;case"defaultChecked":te=W;break;case"value":v=W;break;case"defaultValue":A=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,a));break;default:W!==se&&_t(t,a,Q,W,l,se)}}$r(t,v,A,M,K,te,p,h);return;case"select":W=v=A=Q=null;for(p in r)if(M=r[p],r.hasOwnProperty(p)&&M!=null)switch(p){case"value":break;case"multiple":W=M;default:l.hasOwnProperty(p)||_t(t,a,p,null,l,M)}for(h in l)if(p=l[h],M=r[h],l.hasOwnProperty(h)&&(p!=null||M!=null))switch(h){case"value":Q=p;break;case"defaultValue":A=p;break;case"multiple":v=p;default:p!==M&&_t(t,a,h,p,l,M)}a=A,r=v,l=W,Q!=null?Zi(t,!!r,Q,!1):!!l!=!!r&&(a!=null?Zi(t,!!r,a,!0):Zi(t,!!r,r?[]:"",!1));return;case"textarea":W=Q=null;for(A in r)if(h=r[A],r.hasOwnProperty(A)&&h!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:_t(t,a,A,null,l,h)}for(v in l)if(h=l[v],p=r[v],l.hasOwnProperty(v)&&(h!=null||p!=null))switch(v){case"value":Q=h;break;case"defaultValue":W=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==p&&_t(t,a,v,h,l,p)}Yc(t,Q,W);return;case"option":for(var Re in r)Q=r[Re],r.hasOwnProperty(Re)&&Q!=null&&!l.hasOwnProperty(Re)&&(Re==="selected"?t.selected=!1:_t(t,a,Re,null,l,Q));for(M in l)Q=l[M],W=r[M],l.hasOwnProperty(M)&&Q!==W&&(Q!=null||W!=null)&&(M==="selected"?t.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":_t(t,a,M,Q,l,W));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in r)Q=r[Oe],r.hasOwnProperty(Oe)&&Q!=null&&!l.hasOwnProperty(Oe)&&_t(t,a,Oe,null,l,Q);for(K in l)if(Q=l[K],W=r[K],l.hasOwnProperty(K)&&Q!==W&&(Q!=null||W!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,a));break;default:_t(t,a,K,Q,l,W)}return;default:if(Kr(a)){for(var Et in r)Q=r[Et],r.hasOwnProperty(Et)&&Q!==void 0&&!l.hasOwnProperty(Et)&&cp(t,a,Et,void 0,l,Q);for(te in l)Q=l[te],W=r[te],!l.hasOwnProperty(te)||Q===W||Q===void 0&&W===void 0||cp(t,a,te,Q,l,W);return}}for(var q in r)Q=r[q],r.hasOwnProperty(q)&&Q!=null&&!l.hasOwnProperty(q)&&_t(t,a,q,null,l,Q);for(se in l)Q=l[se],W=r[se],!l.hasOwnProperty(se)||Q===W||Q==null&&W==null||_t(t,a,se,Q,l,W)}function Cy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var h=r[l],p=h.transferSize,v=h.initiatorType,A=h.duration;if(p&&A&&Cy(v)){for(v=0,A=h.responseEnd,l+=1;l<r.length;l++){var M=r[l],K=M.startTime;if(K>A)break;var te=M.transferSize,se=M.initiatorType;te&&Cy(se)&&(M=M.responseEnd,v+=te*(M<A?1:(A-K)/(M-K)))}if(--l,a+=8*(p+v)/(h.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var up=null,dp=null;function Wu(t){return t.nodeType===9?t:t.ownerDocument}function Iy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jy(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function fp(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var hp=null;function cw(){var t=window.event;return t&&t.type==="popstate"?t===hp?!1:(hp=t,!0):(hp=null,!1)}var ky=typeof setTimeout=="function"?setTimeout:void 0,uw=typeof clearTimeout=="function"?clearTimeout:void 0,Oy=typeof Promise=="function"?Promise:void 0,dw=typeof queueMicrotask=="function"?queueMicrotask:typeof Oy<"u"?function(t){return Oy.resolve(null).then(t).catch(fw)}:ky;function fw(t){setTimeout(function(){throw t})}function As(t){return t==="head"}function Dy(t,a){var r=a,l=0;do{var h=r.nextSibling;if(t.removeChild(r),h&&h.nodeType===8)if(r=h.data,r==="/$"||r==="/&"){if(l===0){t.removeChild(h),Co(a);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")Jl(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Jl(r);for(var p=r.firstChild;p;){var v=p.nextSibling,A=p.nodeName;p[Ha]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&p.rel.toLowerCase()==="stylesheet"||r.removeChild(p),p=v}}else r==="body"&&Jl(t.ownerDocument.body);r=h}while(r);Co(a)}function My(t,a){var r=t;t=0;do{var l=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=l}while(r)}function pp(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":pp(r),Fr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function hw(t,a,r,l){for(;t.nodeType===1;){var h=r;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ha])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=pa(t.nextSibling),t===null)break}return null}function pw(t,a,r){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=pa(t.nextSibling),t===null))return null;return t}function Py(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=pa(t.nextSibling),t===null))return null;return t}function mp(t){return t.data==="$?"||t.data==="$~"}function gp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function mw(t,a){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||r.readyState!=="loading")a();else{var l=function(){a(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function pa(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var bp=null;function Vy(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(a===0)return pa(t.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}t=t.nextSibling}return null}function zy(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return t;a--}else r!=="/$"&&r!=="/&"||a++}t=t.previousSibling}return null}function Ly(t,a,r){switch(a=Wu(r),t){case"html":if(t=a.documentElement,!t)throw Error(s(452));return t;case"head":if(t=a.head,!t)throw Error(s(453));return t;case"body":if(t=a.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Jl(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Fr(t)}var ma=new Map,Uy=new Set;function Zu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Pi=ce.d;ce.d={f:gw,r:bw,D:yw,C:vw,L:xw,m:_w,X:Aw,S:Ew,M:ww};function gw(){var t=Pi.f(),a=Fu();return t||a}function bw(t){var a=ia(t);a!==null&&a.tag===5&&a.type==="form"?ab(a):Pi.r(t)}var To=typeof document>"u"?null:document;function By(t,a,r){var l=To;if(l&&typeof a=="string"&&a){var h=Mn(a);h='link[rel="'+t+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),Uy.has(h)||(Uy.add(h),t={rel:t,crossOrigin:r,href:a},l.querySelector(h)===null&&(a=l.createElement("link"),vn(a,"link",t),Zt(a),l.head.appendChild(a)))}}function yw(t){Pi.D(t),By("dns-prefetch",t,null)}function vw(t,a){Pi.C(t,a),By("preconnect",t,a)}function xw(t,a,r){Pi.L(t,a,r);var l=To;if(l&&t&&a){var h='link[rel="preload"][as="'+Mn(a)+'"]';a==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+Mn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+Mn(r.imageSizes)+'"]')):h+='[href="'+Mn(t)+'"]';var p=h;switch(a){case"style":p=No(t);break;case"script":p=Ro(t)}ma.has(p)||(t=E({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:t,as:a},r),ma.set(p,t),l.querySelector(h)!==null||a==="style"&&l.querySelector(Wl(p))||a==="script"&&l.querySelector(Zl(p))||(a=l.createElement("link"),vn(a,"link",t),Zt(a),l.head.appendChild(a)))}}function _w(t,a){Pi.m(t,a);var r=To;if(r&&t){var l=a&&typeof a.as=="string"?a.as:"script",h='link[rel="modulepreload"][as="'+Mn(l)+'"][href="'+Mn(t)+'"]',p=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Ro(t)}if(!ma.has(p)&&(t=E({rel:"modulepreload",href:t},a),ma.set(p,t),r.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Zl(p)))return}l=r.createElement("link"),vn(l,"link",t),Zt(l),r.head.appendChild(l)}}}function Ew(t,a,r){Pi.S(t,a,r);var l=To;if(l&&t){var h=Fa(l).hoistableStyles,p=No(t);a=a||"default";var v=h.get(p);if(!v){var A={loading:0,preload:null};if(v=l.querySelector(Wl(p)))A.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":a},r),(r=ma.get(p))&&yp(t,r);var M=v=l.createElement("link");Zt(M),vn(M,"link",t),M._p=new Promise(function(K,te){M.onload=K,M.onerror=te}),M.addEventListener("load",function(){A.loading|=1}),M.addEventListener("error",function(){A.loading|=2}),A.loading|=4,ed(v,a,l)}v={type:"stylesheet",instance:v,count:1,state:A},h.set(p,v)}}}function Aw(t,a){Pi.X(t,a);var r=To;if(r&&t){var l=Fa(r).hoistableScripts,h=Ro(t),p=l.get(h);p||(p=r.querySelector(Zl(h)),p||(t=E({src:t,async:!0},a),(a=ma.get(h))&&vp(t,a),p=r.createElement("script"),Zt(p),vn(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function ww(t,a){Pi.M(t,a);var r=To;if(r&&t){var l=Fa(r).hoistableScripts,h=Ro(t),p=l.get(h);p||(p=r.querySelector(Zl(h)),p||(t=E({src:t,async:!0,type:"module"},a),(a=ma.get(h))&&vp(t,a),p=r.createElement("script"),Zt(p),vn(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function Hy(t,a,r,l){var h=(h=xe.current)?Zu(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=No(r.href),r=Fa(h).hoistableStyles,l=r.get(a),l||(l={type:"style",instance:null,count:0,state:null},r.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=No(r.href);var p=Fa(h).hoistableStyles,v=p.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,v),(p=h.querySelector(Wl(t)))&&!p._p&&(v.instance=p,v.state.loading=5),ma.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ma.set(t,r),p||Sw(h,t,r,v.state))),a&&l===null)throw Error(s(528,""));return v}if(a&&l!==null)throw Error(s(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ro(r),r=Fa(h).hoistableScripts,l=r.get(a),l||(l={type:"script",instance:null,count:0,state:null},r.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function No(t){return'href="'+Mn(t)+'"'}function Wl(t){return'link[rel="stylesheet"]['+t+"]"}function qy(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function Sw(t,a,r,l){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=t.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),vn(a,"link",r),Zt(a),t.head.appendChild(a))}function Ro(t){return'[src="'+Mn(t)+'"]'}function Zl(t){return"script[async]"+t}function Fy(t,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var l=t.querySelector('style[data-href~="'+Mn(r.href)+'"]');if(l)return a.instance=l,Zt(l),l;var h=E({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Zt(l),vn(l,"style",h),ed(l,r.precedence,t),a.instance=l;case"stylesheet":h=No(r.href);var p=t.querySelector(Wl(h));if(p)return a.state.loading|=4,a.instance=p,Zt(p),p;l=qy(r),(h=ma.get(h))&&yp(l,h),p=(t.ownerDocument||t).createElement("link"),Zt(p);var v=p;return v._p=new Promise(function(A,M){v.onload=A,v.onerror=M}),vn(p,"link",l),a.state.loading|=4,ed(p,r.precedence,t),a.instance=p;case"script":return p=Ro(r.src),(h=t.querySelector(Zl(p)))?(a.instance=h,Zt(h),h):(l=r,(h=ma.get(p))&&(l=E({},r),vp(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Zt(h),vn(h,"link",l),t.head.appendChild(h),a.instance=h);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,ed(l,r.precedence,t));return a.instance}function ed(t,a,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,p=h,v=0;v<l.length;v++){var A=l[v];if(A.dataset.precedence===a)p=A;else if(p!==h)break}p?p.parentNode.insertBefore(t,p.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(t,a.firstChild))}function yp(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function vp(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var td=null;function Gy(t,a,r){if(td===null){var l=new Map,h=td=new Map;h.set(r,l)}else h=td,l=h.get(r),l||(l=new Map,h.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),h=0;h<r.length;h++){var p=r[h];if(!(p[Ha]||p[Wt]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(a)||"";v=t+v;var A=l.get(v);A?A.push(p):l.set(v,[p])}}return l}function $y(t,a,r){t=t.ownerDocument||t,t.head.insertBefore(r,a==="title"?t.querySelector("head > title"):null)}function Tw(t,a,r){if(r===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Ky(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Nw(t,a,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=No(l.href),p=a.querySelector(Wl(h));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=nd.bind(t),a.then(t,t)),r.state.loading|=4,r.instance=p,Zt(p);return}p=a.ownerDocument||a,l=qy(l),(h=ma.get(h))&&yp(l,h),p=p.createElement("link"),Zt(p);var v=p;v._p=new Promise(function(A,M){v.onload=A,v.onerror=M}),vn(p,"link",l),r.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=nd.bind(t),a.addEventListener("load",r),a.addEventListener("error",r))}}var xp=0;function Rw(t,a){return t.stylesheets&&t.count===0&&id(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var l=setTimeout(function(){if(t.stylesheets&&id(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+a);0<t.imgBytes&&xp===0&&(xp=62500*lw());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&id(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>xp?50:800)+a);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function nd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)id(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ad=null;function id(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ad=new Map,a.forEach(Cw,t),ad=null,nd.call(t))}function Cw(t,a){if(!(a.state.loading&4)){var r=ad.get(t);if(r)var l=r.get(null);else{r=new Map,ad.set(t,r);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var v=h[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),l=v)}l&&r.set(null,l)}h=a.instance,v=h.getAttribute("data-precedence"),p=r.get(v)||l,p===l&&r.set(null,h),r.set(v,h),this.count++,l=nd.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),p?p.parentNode.insertBefore(h,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),a.state.loading|=4}}var ec={$$typeof:ee,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function Iw(t,a,r,l,h,p,v,A,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ua(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ua(0),this.hiddenUpdates=Ua(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Qy(t,a,r,l,h,p,v,A,M,K,te,se){return t=new Iw(t,a,r,v,M,K,te,se,A),a=1,p===!0&&(a|=24),p=Qn(3,null,null,a),t.current=p,p.stateNode=t,a=Zf(),a.refCount++,t.pooledCache=a,a.refCount++,p.memoizedState={element:l,isDehydrated:r,cache:a},ah(p),t}function Yy(t){return t?(t=io,t):io}function Xy(t,a,r,l,h,p){h=Yy(h),l.context===null?l.context=h:l.pendingContext=h,l=fs(a),l.payload={element:r},p=p===void 0?null:p,p!==null&&(l.callback=p),r=hs(t,l,a),r!==null&&(Bn(r,t,a),kl(r,t,a))}function Jy(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<a?r:a}}function _p(t,a){Jy(t,a),(t=t.alternate)&&Jy(t,a)}function Wy(t){if(t.tag===13||t.tag===31){var a=hr(t,67108864);a!==null&&Bn(a,t,67108864),_p(t,67108864)}}function Zy(t){if(t.tag===13||t.tag===31){var a=Zn();a=tr(a);var r=hr(t,a);r!==null&&Bn(r,t,a),_p(t,a)}}var sd=!0;function jw(t,a,r,l){var h=G.T;G.T=null;var p=ce.p;try{ce.p=2,Ep(t,a,r,l)}finally{ce.p=p,G.T=h}}function kw(t,a,r,l){var h=G.T;G.T=null;var p=ce.p;try{ce.p=8,Ep(t,a,r,l)}finally{ce.p=p,G.T=h}}function Ep(t,a,r,l){if(sd){var h=Ap(l);if(h===null)lp(t,a,l,rd,r),tv(t,l);else if(Dw(h,t,a,r,l))l.stopPropagation();else if(tv(t,l),a&4&&-1<Ow.indexOf(t)){for(;h!==null;){var p=ia(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=za(p.pendingLanes);if(v!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;v;){var M=1<<31-Fe(v);A.entanglements[1]|=M,v&=~M}ai(p),(ht&6)===0&&(Hu=qe()+500,Ql(0))}}break;case 31:case 13:A=hr(p,2),A!==null&&Bn(A,p,2),Fu(),_p(p,2)}if(p=Ap(l),p===null&&lp(t,a,l,rd,r),p===h)break;h=p}h!==null&&l.stopPropagation()}else lp(t,a,l,null,r)}}function Ap(t){return t=sa(t),wp(t)}var rd=null;function wp(t){if(rd=null,t=qa(t),t!==null){var a=c(t);if(a===null)t=null;else{var r=a.tag;if(r===13){if(t=f(a),t!==null)return t;t=null}else if(r===31){if(t=m(a),t!==null)return t;t=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return rd=t,null}function ev(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zt()){case Ct:return 2;case It:return 8;case Dn:case he:return 32;case pt:return 268435456;default:return 32}default:return 32}}var Sp=!1,ws=null,Ss=null,Ts=null,tc=new Map,nc=new Map,Ns=[],Ow="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tv(t,a){switch(t){case"focusin":case"focusout":ws=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":tc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":nc.delete(a.pointerId)}}function ac(t,a,r,l,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:a,domEventName:r,eventSystemFlags:l,nativeEvent:p,targetContainers:[h]},a!==null&&(a=ia(a),a!==null&&Wy(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,h!==null&&a.indexOf(h)===-1&&a.push(h),t)}function Dw(t,a,r,l,h){switch(a){case"focusin":return ws=ac(ws,t,a,r,l,h),!0;case"dragenter":return Ss=ac(Ss,t,a,r,l,h),!0;case"mouseover":return Ts=ac(Ts,t,a,r,l,h),!0;case"pointerover":var p=h.pointerId;return tc.set(p,ac(tc.get(p)||null,t,a,r,l,h)),!0;case"gotpointercapture":return p=h.pointerId,nc.set(p,ac(nc.get(p)||null,t,a,r,l,h)),!0}return!1}function nv(t){var a=qa(t.target);if(a!==null){var r=c(a);if(r!==null){if(a=r.tag,a===13){if(a=f(r),a!==null){t.blockedOn=a,_a(t.priority,function(){Zy(r)});return}}else if(a===31){if(a=m(r),a!==null){t.blockedOn=a,_a(t.priority,function(){Zy(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function od(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var r=Ap(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);gl=l,r.target.dispatchEvent(l),gl=null}else return a=ia(r),a!==null&&Wy(a),t.blockedOn=r,!1;a.shift()}return!0}function av(t,a,r){od(t)&&r.delete(a)}function Mw(){Sp=!1,ws!==null&&od(ws)&&(ws=null),Ss!==null&&od(Ss)&&(Ss=null),Ts!==null&&od(Ts)&&(Ts=null),tc.forEach(av),nc.forEach(av)}function ld(t,a){t.blockedOn===a&&(t.blockedOn=null,Sp||(Sp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Mw)))}var cd=null;function iv(t){cd!==t&&(cd=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){cd===t&&(cd=null);for(var a=0;a<t.length;a+=3){var r=t[a],l=t[a+1],h=t[a+2];if(typeof l!="function"){if(wp(l||r)===null)continue;break}var p=ia(r);p!==null&&(t.splice(a,3),a-=3,Ah(p,{pending:!0,data:h,method:r.method,action:l},l,h))}}))}function Co(t){function a(M){return ld(M,t)}ws!==null&&ld(ws,t),Ss!==null&&ld(Ss,t),Ts!==null&&ld(Ts,t),tc.forEach(a),nc.forEach(a);for(var r=0;r<Ns.length;r++){var l=Ns[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ns.length&&(r=Ns[0],r.blockedOn===null);)nv(r),r.blockedOn===null&&Ns.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var h=r[l],p=r[l+1],v=h[dn]||null;if(typeof p=="function")v||iv(r);else if(v){var A=null;if(p&&p.hasAttribute("formAction")){if(h=p,v=p[dn]||null)A=v.formAction;else if(wp(h)!==null)continue}else A=v.action;typeof A=="function"?r[l+1]=A:(r.splice(l,3),l-=3),iv(r)}}}function sv(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return h=v})},focusReset:"manual",scroll:"manual"})}function a(){h!==null&&(h(),h=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),h!==null&&(h(),h=null)}}}function Tp(t){this._internalRoot=t}ud.prototype.render=Tp.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(s(409));var r=a.current,l=Zn();Xy(r,l,t,a,null,null)},ud.prototype.unmount=Tp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Xy(t.current,2,null,t,null,null),Fu(),a[Ba]=null}};function ud(t){this._internalRoot=t}ud.prototype.unstable_scheduleHydration=function(t){if(t){var a=Fc();t={blockedOn:null,target:t,priority:a};for(var r=0;r<Ns.length&&a!==0&&a<Ns[r].priority;r++);Ns.splice(r,0,t),r===0&&nv(t)}};var rv=e.version;if(rv!=="19.2.4")throw Error(s(527,rv,"19.2.4"));ce.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=b(a),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var Pw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dd.isDisabled&&dd.supportsFiber)try{Ve=dd.inject(Pw),dt=dd}catch{}}return sc.createRoot=function(t,a){if(!o(t))throw Error(s(299));var r=!1,l="",h=hb,p=pb,v=mb;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=Qy(t,1,!1,null,null,r,l,null,h,p,v,sv),t[Ba]=a.current,op(t),new Tp(a)},sc.hydrateRoot=function(t,a,r){if(!o(t))throw Error(s(299));var l=!1,h="",p=hb,v=pb,A=mb,M=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.formState!==void 0&&(M=r.formState)),a=Qy(t,1,!0,a,r??null,l,h,M,p,v,A,sv),a.context=Yy(null),r=a.current,l=Zn(),l=tr(l),h=fs(l),h.callback=null,hs(r,h,l),r=l,a.current.lanes=r,Zs(a,r),ai(a),t[Ba]=a.current,op(t),new ud(a)},sc.version="19.2.4",sc}var gv;function Kw(){if(gv)return Cp.exports;gv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Cp.exports=$w(),Cp.exports}var Qw=Kw();const Yw=r_(Qw);var bv="popstate";function Xw(i={}){function e(o,c){let{pathname:f="/",search:m="",hash:g=""}=Pr(o.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),Yp("",{pathname:f,search:m,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let f=o.document.querySelector("base"),m="";if(f&&f.getAttribute("href")){let g=o.location.href,b=g.indexOf("#");m=b===-1?g:g.slice(0,b)}return m+"#"+(typeof c=="string"?c:xc(c))}function s(o,c){ya(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return Ww(e,n,s,i)}function Vt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ya(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Jw(){return Math.random().toString(36).substring(2,10)}function yv(i,e){return{usr:i.state,key:i.key,idx:e}}function Yp(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Pr(e):e,state:n,key:e&&e.key||s||Jw()}}function xc({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Pr(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function Ww(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:c=!1}=s,f=o.history,m="POP",g=null,b=_();b==null&&(b=0,f.replaceState({...f.state,idx:b},""));function _(){return(f.state||{idx:null}).idx}function E(){m="POP";let D=_(),X=D==null?null:D-b;b=D,g&&g({action:m,location:U.location,delta:X})}function N(D,X){m="PUSH";let Y=Yp(U.location,D,X);n&&n(Y,D),b=_()+1;let ee=yv(Y,b),ae=U.createHref(Y);try{f.pushState(ee,"",ae)}catch(ge){if(ge instanceof DOMException&&ge.name==="DataCloneError")throw ge;o.location.assign(ae)}c&&g&&g({action:m,location:U.location,delta:1})}function z(D,X){m="REPLACE";let Y=Yp(U.location,D,X);n&&n(Y,D),b=_();let ee=yv(Y,b),ae=U.createHref(Y);f.replaceState(ee,"",ae),c&&g&&g({action:m,location:U.location,delta:0})}function H(D){return Zw(D)}let U={get action(){return m},get location(){return i(o,f)},listen(D){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(bv,E),g=D,()=>{o.removeEventListener(bv,E),g=null}},createHref(D){return e(o,D)},createURL:H,encodeLocation(D){let X=H(D);return{pathname:X.pathname,search:X.search,hash:X.hash}},push:N,replace:z,go(D){return f.go(D)}};return U}function Zw(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Vt(n,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:xc(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function o_(i,e,n="/"){return eS(i,e,n,!1)}function eS(i,e,n,s){let o=typeof e=="string"?Pr(e):e,c=qi(o.pathname||"/",n);if(c==null)return null;let f=l_(i);tS(f);let m=null;for(let g=0;m==null&&g<f.length;++g){let b=fS(c);m=uS(f[g],b,s)}return m}function l_(i,e=[],n=[],s="",o=!1){let c=(f,m,g=o,b)=>{let _={relativePath:b===void 0?f.path||"":b,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(s)&&g)return;Vt(_.relativePath.startsWith(s),`Absolute route path "${_.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(s.length)}let E=Li([s,_.relativePath]),N=n.concat(_);f.children&&f.children.length>0&&(Vt(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),l_(f.children,e,N,E,g)),!(f.path==null&&!f.index)&&e.push({path:E,score:lS(E,f.index),routesMeta:N})};return i.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))c(f,m);else for(let g of c_(f.path))c(f,m,!0,g)}),e}function c_(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let f=c_(s.join("/")),m=[];return m.push(...f.map(g=>g===""?c:[c,g].join("/"))),o&&m.push(...f),m.map(g=>i.startsWith("/")&&g===""?"/":g)}function tS(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:cS(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var nS=/^:[\w-]+$/,aS=3,iS=2,sS=1,rS=10,oS=-2,vv=i=>i==="*";function lS(i,e){let n=i.split("/"),s=n.length;return n.some(vv)&&(s+=oS),e&&(s+=iS),n.filter(o=>!vv(o)).reduce((o,c)=>o+(nS.test(c)?aS:c===""?sS:rS),s)}function cS(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function uS(i,e,n=!1){let{routesMeta:s}=i,o={},c="/",f=[];for(let m=0;m<s.length;++m){let g=s[m],b=m===s.length-1,_=c==="/"?e:e.slice(c.length)||"/",E=Od({path:g.relativePath,caseSensitive:g.caseSensitive,end:b},_),N=g.route;if(!E&&b&&n&&!s[s.length-1].route.index&&(E=Od({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},_)),!E)return null;Object.assign(o,E.params),f.push({params:o,pathname:Li([c,E.pathname]),pathnameBase:gS(Li([c,E.pathnameBase])),route:N}),E.pathnameBase!=="/"&&(c=Li([c,E.pathnameBase]))}return f}function Od(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=dS(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let c=o[0],f=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((b,{paramName:_,isOptional:E},N)=>{if(_==="*"){let H=m[N]||"";f=c.slice(0,c.length-H.length).replace(/(.)\/+$/,"$1")}const z=m[N];return E&&!z?b[_]=void 0:b[_]=(z||"").replace(/%2F/g,"/"),b},{}),pathname:c,pathnameBase:f,pattern:i}}function dS(i,e=!1,n=!0){ya(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,g)=>(s.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function fS(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ya(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function qi(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}var hS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function pS(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?Pr(i):i,c;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?c=xv(n.substring(1),"/"):c=xv(n,e)):c=e,{pathname:c,search:bS(s),hash:yS(o)}}function xv(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Op(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mS(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Nm(i){let e=mS(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Rm(i,e,n,s=!1){let o;typeof i=="string"?o=Pr(i):(o={...i},Vt(!o.pathname||!o.pathname.includes("?"),Op("?","pathname","search",o)),Vt(!o.pathname||!o.pathname.includes("#"),Op("#","pathname","hash",o)),Vt(!o.search||!o.search.includes("#"),Op("#","search","hash",o)));let c=i===""||o.pathname==="",f=c?"/":o.pathname,m;if(f==null)m=n;else{let E=e.length-1;if(!s&&f.startsWith("..")){let N=f.split("/");for(;N[0]==="..";)N.shift(),E-=1;o.pathname=N.join("/")}m=E>=0?e[E]:"/"}let g=pS(o,m),b=f&&f!=="/"&&f.endsWith("/"),_=(c||f===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(b||_)&&(g.pathname+="/"),g}var Li=i=>i.join("/").replace(/\/\/+/g,"/"),gS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),bS=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,yS=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,vS=class{constructor(i,e,n,s=!1){this.status=i,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function xS(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function _S(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var u_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function d_(i,e){let n=i;if(typeof n!="string"||!hS.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,o=!1;if(u_)try{let c=new URL(window.location.href),f=n.startsWith("//")?new URL(c.protocol+n):new URL(n),m=qi(f.pathname,e);f.origin===c.origin&&m!=null?n=m+f.search+f.hash:o=!0}catch{ya(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var f_=["POST","PUT","PATCH","DELETE"];new Set(f_);var ES=["GET",...f_];new Set(ES);var Xo=w.createContext(null);Xo.displayName="DataRouter";var ef=w.createContext(null);ef.displayName="DataRouterState";var AS=w.createContext(!1),h_=w.createContext({isTransitioning:!1});h_.displayName="ViewTransition";var wS=w.createContext(new Map);wS.displayName="Fetchers";var SS=w.createContext(null);SS.displayName="Await";var aa=w.createContext(null);aa.displayName="Navigation";var Cc=w.createContext(null);Cc.displayName="Location";var mi=w.createContext({outlet:null,matches:[],isDataRoute:!1});mi.displayName="Route";var Cm=w.createContext(null);Cm.displayName="RouteError";var p_="REACT_ROUTER_ERROR",TS="REDIRECT",NS="ROUTE_ERROR_RESPONSE";function RS(i){if(i.startsWith(`${p_}:${TS}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function CS(i){if(i.startsWith(`${p_}:${NS}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new vS(e.status,e.statusText,e.data)}catch{}}function IS(i,{relative:e}={}){Vt(Jo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=w.useContext(aa),{hash:o,pathname:c,search:f}=Ic(i,{relative:e}),m=c;return n!=="/"&&(m=c==="/"?n:Li([n,c])),s.createHref({pathname:m,search:f,hash:o})}function Jo(){return w.useContext(Cc)!=null}function Ks(){return Vt(Jo(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Cc).location}var m_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function g_(i){w.useContext(aa).static||w.useLayoutEffect(i)}function Xi(){let{isDataRoute:i}=w.useContext(mi);return i?qS():jS()}function jS(){Vt(Jo(),"useNavigate() may be used only in the context of a <Router> component.");let i=w.useContext(Xo),{basename:e,navigator:n}=w.useContext(aa),{matches:s}=w.useContext(mi),{pathname:o}=Ks(),c=JSON.stringify(Nm(s)),f=w.useRef(!1);return g_(()=>{f.current=!0}),w.useCallback((g,b={})=>{if(ya(f.current,m_),!f.current)return;if(typeof g=="number"){n.go(g);return}let _=Rm(g,JSON.parse(c),o,b.relative==="path");i==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Li([e,_.pathname])),(b.replace?n.replace:n.push)(_,b.state,b)},[e,n,c,o,i])}w.createContext(null);function Ic(i,{relative:e}={}){let{matches:n}=w.useContext(mi),{pathname:s}=Ks(),o=JSON.stringify(Nm(n));return w.useMemo(()=>Rm(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function kS(i,e){return b_(i,e)}function b_(i,e,n,s,o){Vt(Jo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=w.useContext(aa),{matches:f}=w.useContext(mi),m=f[f.length-1],g=m?m.params:{},b=m?m.pathname:"/",_=m?m.pathnameBase:"/",E=m&&m.route;{let Y=E&&E.path||"";v_(b,!E||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let N=Ks(),z;if(e){let Y=typeof e=="string"?Pr(e):e;Vt(_==="/"||Y.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),z=Y}else z=N;let H=z.pathname||"/",U=H;if(_!=="/"){let Y=_.replace(/^\//,"").split("/");U="/"+H.replace(/^\//,"").split("/").slice(Y.length).join("/")}let D=o_(i,{pathname:U});ya(E||D!=null,`No routes matched location "${z.pathname}${z.search}${z.hash}" `),ya(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${z.pathname}${z.search}${z.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let X=VS(D&&D.map(Y=>Object.assign({},Y,{params:Object.assign({},g,Y.params),pathname:Li([_,c.encodeLocation?c.encodeLocation(Y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?_:Li([_,c.encodeLocation?c.encodeLocation(Y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathnameBase])})),f,n,s,o);return e&&X?w.createElement(Cc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...z},navigationType:"POP"}},X):X}function OS(){let i=HS(),e=xS(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:c},"ErrorBoundary")," or"," ",w.createElement("code",{style:c},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:o},n):null,f)}var DS=w.createElement(OS,null),y_=class extends w.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const n=CS(i.digest);n&&(i=n)}let e=i!==void 0?w.createElement(mi.Provider,{value:this.props.routeContext},w.createElement(Cm.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?w.createElement(MS,{error:i},e):e}};y_.contextType=AS;var Dp=new WeakMap;function MS({children:i,error:e}){let{basename:n}=w.useContext(aa);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=RS(e.digest);if(s){let o=Dp.get(e);if(o)throw o;let c=d_(s.location,n);if(u_&&!Dp.get(e))if(c.isExternal||s.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:s.replace}));throw Dp.set(e,f),f}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return i}function PS({routeContext:i,match:e,children:n}){let s=w.useContext(Xo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(mi.Provider,{value:i},n)}function VS(i,e=[],n=null,s=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let c=i,f=n?.errors;if(f!=null){let _=c.findIndex(E=>E.route.id&&f?.[E.route.id]!==void 0);Vt(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),c=c.slice(0,Math.min(c.length,_+1))}let m=!1,g=-1;if(n)for(let _=0;_<c.length;_++){let E=c[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=_),E.route.id){let{loaderData:N,errors:z}=n,H=E.route.loader&&!N.hasOwnProperty(E.route.id)&&(!z||z[E.route.id]===void 0);if(E.route.lazy||H){m=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}let b=n&&s?(_,E)=>{s(_,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:_S(n.matches),errorInfo:E})}:void 0;return c.reduceRight((_,E,N)=>{let z,H=!1,U=null,D=null;n&&(z=f&&E.route.id?f[E.route.id]:void 0,U=E.route.errorElement||DS,m&&(g<0&&N===0?(v_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),H=!0,D=null):g===N&&(H=!0,D=E.route.hydrateFallbackElement||null)));let X=e.concat(c.slice(0,N+1)),Y=()=>{let ee;return z?ee=U:H?ee=D:E.route.Component?ee=w.createElement(E.route.Component,null):E.route.element?ee=E.route.element:ee=_,w.createElement(PS,{match:E,routeContext:{outlet:_,matches:X,isDataRoute:n!=null},children:ee})};return n&&(E.route.ErrorBoundary||E.route.errorElement||N===0)?w.createElement(y_,{location:n.location,revalidation:n.revalidation,component:U,error:z,children:Y(),routeContext:{outlet:null,matches:X,isDataRoute:!0},onError:b}):Y()},null)}function Im(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zS(i){let e=w.useContext(Xo);return Vt(e,Im(i)),e}function LS(i){let e=w.useContext(ef);return Vt(e,Im(i)),e}function US(i){let e=w.useContext(mi);return Vt(e,Im(i)),e}function jm(i){let e=US(i),n=e.matches[e.matches.length-1];return Vt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function BS(){return jm("useRouteId")}function HS(){let i=w.useContext(Cm),e=LS("useRouteError"),n=jm("useRouteError");return i!==void 0?i:e.errors?.[n]}function qS(){let{router:i}=zS("useNavigate"),e=jm("useNavigate"),n=w.useRef(!1);return g_(()=>{n.current=!0}),w.useCallback(async(o,c={})=>{ya(n.current,m_),n.current&&(typeof o=="number"?await i.navigate(o):await i.navigate(o,{fromRouteId:e,...c}))},[i,e])}var _v={};function v_(i,e,n){!e&&!_v[i]&&(_v[i]=!0,ya(!1,n))}w.memo(FS);function FS({routes:i,future:e,state:n,onError:s}){return b_(i,void 0,n,s,e)}function x_({to:i,replace:e,state:n,relative:s}){Vt(Jo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=w.useContext(aa);ya(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=w.useContext(mi),{pathname:f}=Ks(),m=Xi(),g=Rm(i,Nm(c),f,s==="path"),b=JSON.stringify(g);return w.useEffect(()=>{m(JSON.parse(b),{replace:e,state:n,relative:s})},[m,b,s,e,n]),null}function ii(i){Vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function GS({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:c=!1,unstable_useTransitions:f}){Vt(!Jo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=i.replace(/^\/*/,"/"),g=w.useMemo(()=>({basename:m,navigator:o,static:c,unstable_useTransitions:f,future:{}}),[m,o,c,f]);typeof n=="string"&&(n=Pr(n));let{pathname:b="/",search:_="",hash:E="",state:N=null,key:z="default"}=n,H=w.useMemo(()=>{let U=qi(b,m);return U==null?null:{location:{pathname:U,search:_,hash:E,state:N,key:z},navigationType:s}},[m,b,_,E,N,z,s]);return ya(H!=null,`<Router basename="${m}"> is not able to match the URL "${b}${_}${E}" because it does not start with the basename, so the <Router> won't render anything.`),H==null?null:w.createElement(aa.Provider,{value:g},w.createElement(Cc.Provider,{children:e,value:H}))}function $S({children:i,location:e}){return kS(Xp(i),e)}function Xp(i,e=[]){let n=[];return w.Children.forEach(i,(s,o)=>{if(!w.isValidElement(s))return;let c=[...e,o];if(s.type===w.Fragment){n.push.apply(n,Xp(s.props.children,c));return}Vt(s.type===ii,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Vt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Xp(s.props.children,c)),n.push(f)}),n}var xd="get",_d="application/x-www-form-urlencoded";function tf(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function KS(i){return tf(i)&&i.tagName.toLowerCase()==="button"}function QS(i){return tf(i)&&i.tagName.toLowerCase()==="form"}function YS(i){return tf(i)&&i.tagName.toLowerCase()==="input"}function XS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function JS(i,e){return i.button===0&&(!e||e==="_self")&&!XS(i)}var fd=null;function WS(){if(fd===null)try{new FormData(document.createElement("form"),0),fd=!1}catch{fd=!0}return fd}var ZS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mp(i){return i!=null&&!ZS.has(i)?(ya(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_d}"`),null):i}function eT(i,e){let n,s,o,c,f;if(QS(i)){let m=i.getAttribute("action");s=m?qi(m,e):null,n=i.getAttribute("method")||xd,o=Mp(i.getAttribute("enctype"))||_d,c=new FormData(i)}else if(KS(i)||YS(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||m.getAttribute("action");if(s=g?qi(g,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||xd,o=Mp(i.getAttribute("formenctype"))||Mp(m.getAttribute("enctype"))||_d,c=new FormData(m,i),!WS()){let{name:b,type:_,value:E}=i;if(_==="image"){let N=b?`${b}.`:"";c.append(`${N}x`,"0"),c.append(`${N}y`,"0")}else b&&c.append(b,E)}}else{if(tf(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=xd,s=null,o=_d,f=i}return c&&o==="text/plain"&&(f=c,c=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:c,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function km(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function tT(i,e,n,s){let o=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${s}`:o.pathname=`${o.pathname}.${s}`:o.pathname==="/"?o.pathname=`_root.${s}`:e&&qi(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${s}`,o}async function nT(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aT(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function iT(i,e,n){let s=await Promise.all(i.map(async o=>{let c=e.routes[o.route.id];if(c){let f=await nT(c,n);return f.links?f.links():[]}return[]}));return lT(s.flat(1).filter(aT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Ev(i,e,n,s,o,c){let f=(g,b)=>n[b]?g.route.id!==n[b].route.id:!0,m=(g,b)=>n[b].pathname!==g.pathname||n[b].route.path?.endsWith("*")&&n[b].params["*"]!==g.params["*"];return c==="assets"?e.filter((g,b)=>f(g,b)||m(g,b)):c==="data"?e.filter((g,b)=>{let _=s.routes[g.route.id];if(!_||!_.hasLoader)return!1;if(f(g,b)||m(g,b))return!0;if(g.route.shouldRevalidate){let E=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function sT(i,e,{includeHydrateFallback:n}={}){return rT(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function rT(i){return[...new Set(i)]}function oT(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function lT(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let c=JSON.stringify(oT(o));return n.has(c)||(n.add(c),s.push({key:c,link:o})),s},[])}function __(){let i=w.useContext(Xo);return km(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function cT(){let i=w.useContext(ef);return km(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Om=w.createContext(void 0);Om.displayName="FrameworkContext";function E_(){let i=w.useContext(Om);return km(i,"You must render this element inside a <HydratedRouter> element"),i}function uT(i,e){let n=w.useContext(Om),[s,o]=w.useState(!1),[c,f]=w.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:b,onMouseLeave:_,onTouchStart:E}=e,N=w.useRef(null);w.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let U=X=>{X.forEach(Y=>{f(Y.isIntersecting)})},D=new IntersectionObserver(U,{threshold:.5});return N.current&&D.observe(N.current),()=>{D.disconnect()}}},[i]),w.useEffect(()=>{if(s){let U=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(U)}}},[s]);let z=()=>{o(!0)},H=()=>{o(!1),f(!1)};return n?i!=="intent"?[c,N,{}]:[c,N,{onFocus:rc(m,z),onBlur:rc(g,H),onMouseEnter:rc(b,z),onMouseLeave:rc(_,H),onTouchStart:rc(E,z)}]:[!1,N,{}]}function rc(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function dT({page:i,...e}){let{router:n}=__(),s=w.useMemo(()=>o_(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?w.createElement(hT,{page:i,matches:s,...e}):null}function fT(i){let{manifest:e,routeModules:n}=E_(),[s,o]=w.useState([]);return w.useEffect(()=>{let c=!1;return iT(i,e,n).then(f=>{c||o(f)}),()=>{c=!0}},[i,e,n]),s}function hT({page:i,matches:e,...n}){let s=Ks(),{future:o,manifest:c,routeModules:f}=E_(),{basename:m}=__(),{loaderData:g,matches:b}=cT(),_=w.useMemo(()=>Ev(i,e,b,c,s,"data"),[i,e,b,c,s]),E=w.useMemo(()=>Ev(i,e,b,c,s,"assets"),[i,e,b,c,s]),N=w.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let U=new Set,D=!1;if(e.forEach(Y=>{let ee=c.routes[Y.route.id];!ee||!ee.hasLoader||(!_.some(ae=>ae.route.id===Y.route.id)&&Y.route.id in g&&f[Y.route.id]?.shouldRevalidate||ee.hasClientLoader?D=!0:U.add(Y.route.id))}),U.size===0)return[];let X=tT(i,m,o.unstable_trailingSlashAwareDataRequests,"data");return D&&U.size>0&&X.searchParams.set("_routes",e.filter(Y=>U.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[X.pathname+X.search]},[m,o.unstable_trailingSlashAwareDataRequests,g,s,c,_,e,i,f]),z=w.useMemo(()=>sT(E,c),[E,c]),H=fT(E);return w.createElement(w.Fragment,null,N.map(U=>w.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...n})),z.map(U=>w.createElement("link",{key:U,rel:"modulepreload",href:U,...n})),H.map(({key:U,link:D})=>w.createElement("link",{key:U,nonce:n.nonce,...D,crossOrigin:D.crossOrigin??n.crossOrigin})))}function pT(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var mT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mT&&(window.__reactRouterVersion="7.13.0")}catch{}function gT({basename:i,children:e,unstable_useTransitions:n,window:s}){let o=w.useRef();o.current==null&&(o.current=Xw({window:s,v5Compat:!0}));let c=o.current,[f,m]=w.useState({action:c.action,location:c.location}),g=w.useCallback(b=>{n===!1?m(b):w.startTransition(()=>m(b))},[n]);return w.useLayoutEffect(()=>c.listen(g),[c,g]),w.createElement(GS,{basename:i,children:e,location:f.location,navigationType:f.action,navigator:c,unstable_useTransitions:n})}var A_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,w_=w.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:c,replace:f,state:m,target:g,to:b,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:N,...z},H){let{basename:U,unstable_useTransitions:D}=w.useContext(aa),X=typeof b=="string"&&A_.test(b),Y=d_(b,U);b=Y.to;let ee=IS(b,{relative:o}),[ae,ge,fe]=uT(s,z),O=xT(b,{replace:f,state:m,target:g,preventScrollReset:_,relative:o,viewTransition:E,unstable_defaultShouldRevalidate:N,unstable_useTransitions:D});function C(V){e&&e(V),V.defaultPrevented||O(V)}let I=w.createElement("a",{...z,...fe,href:Y.absoluteURL||ee,onClick:Y.isExternal||c?e:C,ref:pT(H,ge),target:g,"data-discover":!X&&n==="render"?"true":void 0});return ae&&!X?w.createElement(w.Fragment,null,I,w.createElement(dT,{page:ee})):I});w_.displayName="Link";var bT=w.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:c,to:f,viewTransition:m,children:g,...b},_){let E=Ic(f,{relative:b.relative}),N=Ks(),z=w.useContext(ef),{navigator:H,basename:U}=w.useContext(aa),D=z!=null&&ST(E)&&m===!0,X=H.encodeLocation?H.encodeLocation(E).pathname:E.pathname,Y=N.pathname,ee=z&&z.navigation&&z.navigation.location?z.navigation.location.pathname:null;n||(Y=Y.toLowerCase(),ee=ee?ee.toLowerCase():null,X=X.toLowerCase()),ee&&U&&(ee=qi(ee,U)||ee);const ae=X!=="/"&&X.endsWith("/")?X.length-1:X.length;let ge=Y===X||!o&&Y.startsWith(X)&&Y.charAt(ae)==="/",fe=ee!=null&&(ee===X||!o&&ee.startsWith(X)&&ee.charAt(X.length)==="/"),O={isActive:ge,isPending:fe,isTransitioning:D},C=ge?e:void 0,I;typeof s=="function"?I=s(O):I=[s,ge?"active":null,fe?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let V=typeof c=="function"?c(O):c;return w.createElement(w_,{...b,"aria-current":C,className:I,ref:_,style:V,to:f,viewTransition:m},typeof g=="function"?g(O):g)});bT.displayName="NavLink";var yT=w.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:c,method:f=xd,action:m,onSubmit:g,relative:b,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:N,...z},H)=>{let{unstable_useTransitions:U}=w.useContext(aa),D=AT(),X=wT(m,{relative:b}),Y=f.toLowerCase()==="get"?"get":"post",ee=typeof m=="string"&&A_.test(m),ae=ge=>{if(g&&g(ge),ge.defaultPrevented)return;ge.preventDefault();let fe=ge.nativeEvent.submitter,O=fe?.getAttribute("formmethod")||f,C=()=>D(fe||ge.currentTarget,{fetcherKey:e,method:O,navigate:n,replace:o,state:c,relative:b,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:N});U&&n!==!1?w.startTransition(()=>C()):C()};return w.createElement("form",{ref:H,method:Y,action:X,onSubmit:s?g:ae,...z,"data-discover":!ee&&i==="render"?"true":void 0})});yT.displayName="Form";function vT(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function S_(i){let e=w.useContext(Xo);return Vt(e,vT(i)),e}function xT(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:c,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:g}={}){let b=Xi(),_=Ks(),E=Ic(i,{relative:c});return w.useCallback(N=>{if(JS(N,e)){N.preventDefault();let z=n!==void 0?n:xc(_)===xc(E),H=()=>b(i,{replace:z,state:s,preventScrollReset:o,relative:c,viewTransition:f,unstable_defaultShouldRevalidate:m});g?w.startTransition(()=>H()):H()}},[_,b,E,n,s,e,i,o,c,f,m,g])}var _T=0,ET=()=>`__${String(++_T)}__`;function AT(){let{router:i}=S_("useSubmit"),{basename:e}=w.useContext(aa),n=BS(),s=i.fetch,o=i.navigate;return w.useCallback(async(c,f={})=>{let{action:m,method:g,encType:b,formData:_,body:E}=eT(c,e);if(f.navigate===!1){let N=f.fetcherKey||ET();await s(N,n,f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:_,body:E,formMethod:f.method||g,formEncType:f.encType||b,flushSync:f.flushSync})}else await o(f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:_,body:E,formMethod:f.method||g,formEncType:f.encType||b,replace:f.replace,state:f.state,fromRouteId:n,flushSync:f.flushSync,viewTransition:f.viewTransition})},[s,o,e,n])}function wT(i,{relative:e}={}){let{basename:n}=w.useContext(aa),s=w.useContext(mi);Vt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),c={...Ic(i||".",{relative:e})},f=Ks();if(i==null){c.search=f.search;let m=new URLSearchParams(c.search),g=m.getAll("index");if(g.some(_=>_==="")){m.delete("index"),g.filter(E=>E).forEach(E=>m.append("index",E));let _=m.toString();c.search=_?`?${_}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Li([n,c.pathname])),xc(c)}function ST(i,{relative:e}={}){let n=w.useContext(h_);Vt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=S_("useViewTransitionState"),o=Ic(i,{relative:e});if(!n.isTransitioning)return!1;let c=qi(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=qi(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Od(o.pathname,f)!=null||Od(o.pathname,c)!=null}const TT=()=>{};var Av={};const T_=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},NT=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],f=i[n++],m=i[n++],g=((o&7)<<18|(c&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=i[n++],f=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|f&63)}}return e.join("")},N_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const c=i[o],f=o+1<i.length,m=f?i[o+1]:0,g=o+2<i.length,b=g?i[o+2]:0,_=c>>2,E=(c&3)<<4|m>>4;let N=(m&15)<<2|b>>6,z=b&63;g||(z=64,f||(N=64)),s.push(n[_],n[E],n[N],n[z])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(T_(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):NT(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const b=o<i.length?n[i.charAt(o)]:64;++o;const E=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||m==null||b==null||E==null)throw new RT;const N=c<<2|m>>4;if(s.push(N),b!==64){const z=m<<4&240|b>>2;if(s.push(z),E!==64){const H=b<<6&192|E;s.push(H)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class RT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CT=function(i){const e=T_(i);return N_.encodeByteArray(e,!0)},Dd=function(i){return CT(i).replace(/\./g,"")},R_=function(i){try{return N_.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function IT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const jT=()=>IT().__FIREBASE_DEFAULTS__,kT=()=>{if(typeof process>"u"||typeof Av>"u")return;const i=Av.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},OT=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&R_(i[1]);return e&&JSON.parse(e)},nf=()=>{try{return TT()||jT()||kT()||OT()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},C_=i=>nf()?.emulatorHosts?.[i],I_=i=>{const e=C_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},j_=()=>nf()?.config,k_=i=>nf()?.[`_${i}`];class DT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Vr(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dm(i){return(await fetch(i,{credentials:"include"})).ok}function O_(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Dd(JSON.stringify(n)),Dd(JSON.stringify(f)),""].join(".")}const pc={};function MT(){const i={prod:[],emulator:[]};for(const e of Object.keys(pc))pc[e]?i.emulator.push(e):i.prod.push(e);return i}function PT(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let wv=!1;function Mm(i,e){if(typeof window>"u"||typeof document>"u"||!Vr(window.location.host)||pc[i]===e||pc[i]||wv)return;pc[i]=e;function n(N){return`__firebase__banner__${N}`}const s="__firebase__banner",c=MT().prod.length>0;function f(){const N=document.getElementById(s);N&&N.remove()}function m(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function g(N,z){N.setAttribute("width","24"),N.setAttribute("id",z),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function b(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{wv=!0,f()},N}function _(N,z){N.setAttribute("id",z),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function E(){const N=PT(s),z=n("text"),H=document.getElementById(z)||document.createElement("span"),U=n("learnmore"),D=document.getElementById(U)||document.createElement("a"),X=n("preprendIcon"),Y=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const ee=N.element;m(ee),_(D,U);const ae=b();g(Y,X),ee.append(Y,H,D,ae),document.body.appendChild(ee)}c?(H.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function In(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(In())}function zT(){const i=nf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function BT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HT(){const i=In();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function qT(){return!zT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FT(){try{return typeof indexedDB=="object"}catch{return!1}}function GT(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const $T="FirebaseError";class gi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=$T,Object.setPrototypeOf(this,gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jc.prototype.create)}}class jc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],f=c?KT(c,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new gi(o,m,s)}}function KT(i,e){return i.replace(QT,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const QT=/\{\$([^}]+)}/g;function YT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Fi(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=i[o],f=e[o];if(Sv(c)&&Sv(f)){if(!Fi(c,f))return!1}else if(c!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Sv(i){return i!==null&&typeof i=="object"}function kc(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function lc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,c]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function cc(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function XT(i,e){const n=new JT(i,e);return n.subscribe.bind(n)}class JT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");WT(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Pp),o.error===void 0&&(o.error=Pp),o.complete===void 0&&(o.complete=Pp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function WT(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Pp(){}function Xt(i){return i&&i._delegate?i._delegate:i}class Us{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Tr="[DEFAULT]";class ZT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new DT;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tN(e))try{this.getOrInitializeService({instanceIdentifier:Tr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=Tr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tr){return this.instances.has(e)}getOptions(e=Tr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:eN(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Tr){return this.component?this.component.multipleInstances?e:Tr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eN(i){return i===Tr?void 0:i}function tN(i){return i.instantiationMode==="EAGER"}class nN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var tt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(tt||(tt={}));const aN={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},iN=tt.INFO,sN={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},rN=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=sN[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pm{constructor(e){this.name=e,this._logLevel=iN,this._logHandler=rN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const oN=(i,e)=>e.some(n=>i instanceof n);let Tv,Nv;function lN(){return Tv||(Tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cN(){return Nv||(Nv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D_=new WeakMap,Jp=new WeakMap,M_=new WeakMap,Vp=new WeakMap,Vm=new WeakMap;function uN(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(Ms(i.result)),o()},f=()=>{s(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&D_.set(n,i)}).catch(()=>{}),Vm.set(e,i),e}function dN(i){if(Jp.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),o()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});Jp.set(i,e)}let Wp={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Jp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||M_.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ms(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function fN(i){Wp=i(Wp)}function hN(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(zp(this),e,...n);return M_.set(s,e.sort?e.sort():[e]),Ms(s)}:cN().includes(i)?function(...e){return i.apply(zp(this),e),Ms(D_.get(this))}:function(...e){return Ms(i.apply(zp(this),e))}}function pN(i){return typeof i=="function"?hN(i):(i instanceof IDBTransaction&&dN(i),oN(i,lN())?new Proxy(i,Wp):i)}function Ms(i){if(i instanceof IDBRequest)return uN(i);if(Vp.has(i))return Vp.get(i);const e=pN(i);return e!==i&&(Vp.set(i,e),Vm.set(e,i)),e}const zp=i=>Vm.get(i);function mN(i,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const f=indexedDB.open(i,e),m=Ms(f);return s&&f.addEventListener("upgradeneeded",g=>{s(Ms(f.result),g.oldVersion,g.newVersion,Ms(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),m}const gN=["get","getKey","getAll","getAllKeys","count"],bN=["put","add","delete","clear"],Lp=new Map;function Rv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Lp.get(e))return Lp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=bN.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||gN.includes(n)))return;const c=async function(f,...m){const g=this.transaction(f,o?"readwrite":"readonly");let b=g.store;return s&&(b=b.index(m.shift())),(await Promise.all([b[n](...m),o&&g.done]))[0]};return Lp.set(e,c),c}fN(i=>({...i,get:(e,n,s)=>Rv(e,n)||i.get(e,n,s),has:(e,n)=>!!Rv(e,n)||i.has(e,n)}));class yN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vN(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function vN(i){return i.getComponent()?.type==="VERSION"}const Zp="@firebase/app",Cv="0.14.7";const Gi=new Pm("@firebase/app"),xN="@firebase/app-compat",_N="@firebase/analytics-compat",EN="@firebase/analytics",AN="@firebase/app-check-compat",wN="@firebase/app-check",SN="@firebase/auth",TN="@firebase/auth-compat",NN="@firebase/database",RN="@firebase/data-connect",CN="@firebase/database-compat",IN="@firebase/functions",jN="@firebase/functions-compat",kN="@firebase/installations",ON="@firebase/installations-compat",DN="@firebase/messaging",MN="@firebase/messaging-compat",PN="@firebase/performance",VN="@firebase/performance-compat",zN="@firebase/remote-config",LN="@firebase/remote-config-compat",UN="@firebase/storage",BN="@firebase/storage-compat",HN="@firebase/firestore",qN="@firebase/ai",FN="@firebase/firestore-compat",GN="firebase",$N="12.8.0";const em="[DEFAULT]",KN={[Zp]:"fire-core",[xN]:"fire-core-compat",[EN]:"fire-analytics",[_N]:"fire-analytics-compat",[wN]:"fire-app-check",[AN]:"fire-app-check-compat",[SN]:"fire-auth",[TN]:"fire-auth-compat",[NN]:"fire-rtdb",[RN]:"fire-data-connect",[CN]:"fire-rtdb-compat",[IN]:"fire-fn",[jN]:"fire-fn-compat",[kN]:"fire-iid",[ON]:"fire-iid-compat",[DN]:"fire-fcm",[MN]:"fire-fcm-compat",[PN]:"fire-perf",[VN]:"fire-perf-compat",[zN]:"fire-rc",[LN]:"fire-rc-compat",[UN]:"fire-gcs",[BN]:"fire-gcs-compat",[HN]:"fire-fst",[FN]:"fire-fst-compat",[qN]:"fire-vertex","fire-js":"fire-js",[GN]:"fire-js-all"};const Uo=new Map,tm=new Map,nm=new Map;function Iv(i,e){try{i.container.addComponent(e)}catch(n){Gi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ir(i){const e=i.name;if(nm.has(e))return Gi.debug(`There were multiple attempts to register component ${e}.`),!1;nm.set(e,i);for(const n of Uo.values())Iv(n,i);for(const n of tm.values())Iv(n,i);return!0}function af(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function ea(i){return i==null?!1:i.settings!==void 0}const QN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new jc("app","Firebase",QN);class YN{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}}const zr=$N;function zm(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:em,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ps.create("bad-app-name",{appName:String(o)});if(n||(n=j_()),!n)throw Ps.create("no-options");const c=Uo.get(o);if(c){if(Fi(n,c.options)&&Fi(s,c.config))return c;throw Ps.create("duplicate-app",{appName:o})}const f=new nN(o);for(const g of nm.values())f.addComponent(g);const m=new YN(n,s,f);return Uo.set(o,m),m}function Lm(i=em){const e=Uo.get(i);if(!e&&i===em&&j_())return zm();if(!e)throw Ps.create("no-app",{appName:i});return e}async function XN(i){let e=!1;const n=i.name;Uo.has(n)?(e=!0,Uo.delete(n)):tm.has(n)&&i.decRefCount()<=0&&(tm.delete(n),e=!0),e&&(await Promise.all(i.container.getProviders().map(s=>s.delete())),i.isDeleted=!0)}function ri(i,e,n){let s=KN[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gi.warn(f.join(" "));return}Ir(new Us(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const JN="firebase-heartbeat-database",WN=1,_c="firebase-heartbeat-store";let Up=null;function P_(){return Up||(Up=mN(JN,WN,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(_c)}catch(n){console.warn(n)}}}}).catch(i=>{throw Ps.create("idb-open",{originalErrorMessage:i.message})})),Up}async function ZN(i){try{const n=(await P_()).transaction(_c),s=await n.objectStore(_c).get(V_(i));return await n.done,s}catch(e){if(e instanceof gi)Gi.warn(e.message);else{const n=Ps.create("idb-get",{originalErrorMessage:e?.message});Gi.warn(n.message)}}}async function jv(i,e){try{const s=(await P_()).transaction(_c,"readwrite");await s.objectStore(_c).put(e,V_(i)),await s.done}catch(n){if(n instanceof gi)Gi.warn(n.message);else{const s=Ps.create("idb-set",{originalErrorMessage:n?.message});Gi.warn(s.message)}}}function V_(i){return`${i.name}!${i.options.appId}`}const eR=1024,tR=30;class nR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=kv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>tR){const o=sR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Gi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=kv(),{heartbeatsToSend:n,unsentEntries:s}=aR(this._heartbeatsCache.heartbeats),o=Dd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Gi.warn(e),""}}}function kv(){return new Date().toISOString().substring(0,10)}function aR(i,e=eR){const n=[];let s=i.slice();for(const o of i){const c=n.find(f=>f.agent===o.agent);if(c){if(c.dates.push(o.date),Ov(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Ov(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class iR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FT()?GT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ZN(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return jv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return jv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ov(i){return Dd(JSON.stringify({version:2,heartbeats:i})).length}function sR(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function rR(i){Ir(new Us("platform-logger",e=>new yN(e),"PRIVATE")),Ir(new Us("heartbeat",e=>new nR(e),"PRIVATE")),ri(Zp,Cv,i),ri(Zp,Cv,"esm2020"),ri("fire-js","")}rR("");var oR="firebase",lR="12.8.0";ri(oR,lR,"app");function z_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cR=z_,L_=new jc("auth","Firebase",z_());const Md=new Pm("@firebase/auth");function uR(i,...e){Md.logLevel<=tt.WARN&&Md.warn(`Auth (${zr}): ${i}`,...e)}function Ed(i,...e){Md.logLevel<=tt.ERROR&&Md.error(`Auth (${zr}): ${i}`,...e)}function Da(i,...e){throw Um(i,...e)}function oi(i,...e){return Um(i,...e)}function U_(i,e,n){const s={...cR(),[e]:n};return new jc("auth","Firebase",s).create(e,{appName:i.name})}function Ui(i){return U_(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Um(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return L_.create(i,...e)}function De(i,e,...n){if(!i)throw Um(e,...n)}function Vi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Ed(e),new Error(e)}function $i(i,e){i||Vi(e)}function am(){return typeof self<"u"&&self.location?.href||""}function dR(){return Dv()==="http:"||Dv()==="https:"}function Dv(){return typeof self<"u"&&self.location?.protocol||null}function fR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dR()||UT()||"connection"in navigator)?navigator.onLine:!0}function hR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Oc{constructor(e,n){this.shortDelay=e,this.longDelay=n,$i(n>e,"Short delay should be less than long delay!"),this.isMobile=VT()||BT()}get(){return fR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Bm(i,e){$i(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class B_{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const mR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gR=new Oc(3e4,6e4);function Qs(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Ji(i,e,n,s,o={}){return H_(i,o,async()=>{let c={},f={};s&&(e==="GET"?f=s:c={body:JSON.stringify(s)});const m=kc({key:i.config.apiKey,...f}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const b={method:e,headers:g,...c};return LT()||(b.referrerPolicy="no-referrer"),i.emulatorConfig&&Vr(i.emulatorConfig.host)&&(b.credentials="include"),B_.fetch()(await q_(i,i.config.apiHost,n,m),b)})}async function H_(i,e,n){i._canInitEmulator=!1;const s={...pR,...e};try{const o=new yR(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw hd(i,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const m=c.ok?f.errorMessage:f.error.message,[g,b]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw hd(i,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw hd(i,"email-already-in-use",f);if(g==="USER_DISABLED")throw hd(i,"user-disabled",f);const _=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw U_(i,_,b);Da(i,_)}}catch(o){if(o instanceof gi)throw o;Da(i,"network-request-failed",{message:String(o)})}}async function Dc(i,e,n,s,o={}){const c=await Ji(i,e,n,s,o);return"mfaPendingCredential"in c&&Da(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function q_(i,e,n,s){const o=`${e}${n}?${s}`,c=i,f=c.config.emulator?Bm(i.config,o):`${i.config.apiScheme}://${o}`;return mR.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function bR(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(oi(this.auth,"network-request-failed")),gR.get())})}}function hd(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=oi(i,e,s);return o.customData._tokenResponse=n,o}function Mv(i){return i!==void 0&&i.enterprise!==void 0}class vR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return bR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xR(i,e){return Ji(i,"GET","/v2/recaptchaConfig",Qs(i,e))}async function _R(i,e){return Ji(i,"POST","/v1/accounts:delete",e)}async function Pd(i,e){return Ji(i,"POST","/v1/accounts:lookup",e)}function mc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ER(i,e=!1){const n=Xt(i),s=await n.getIdToken(e),o=Hm(s);De(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,f=c?.sign_in_provider;return{claims:o,token:s,authTime:mc(Bp(o.auth_time)),issuedAtTime:mc(Bp(o.iat)),expirationTime:mc(Bp(o.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Bp(i){return Number(i)*1e3}function Hm(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Ed("JWT malformed, contained fewer than 3 sections"),null;try{const o=R_(n);return o?JSON.parse(o):(Ed("Failed to decode base64 JWT payload"),null)}catch(o){return Ed("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Pv(i){const e=Hm(i);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Bo(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof gi&&AR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function AR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class wR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class im{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Vd(i){const e=i.auth,n=await i.getIdToken(),s=await Bo(i,Pd(e,{idToken:n}));De(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?F_(o.providerUserInfo):[],f=TR(i.providerData,c),m=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!f?.length,b=m?g:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new im(o.createdAt,o.lastLoginAt),isAnonymous:b};Object.assign(i,_)}async function SR(i){const e=Xt(i);await Vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function F_(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function NR(i,e){const n=await H_(i,{},async()=>{const s=kc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,f=await q_(i,o,"/v1/token",`key=${c}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return i.emulatorConfig&&Vr(i.emulatorConfig.host)&&(g.credentials="include"),B_.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function RR(i,e){return Ji(i,"POST","/v2/accounts:revokeToken",Qs(i,e))}class Mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Pv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){De(e.length!==0,"internal-error");const n=Pv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await NR(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,f=new Mo;return s&&(De(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(De(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),c&&(De(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mo,this.toJSON())}_performRefresh(){return Vi("not implemented")}}function Cs(i,e){De(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ja{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new wR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new im(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Bo(this,this.stsTokenManager.getToken(this.auth,e));return De(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ER(this,e)}reload(){return SR(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ja({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Vd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ea(this.auth.app))return Promise.reject(Ui(this.auth));const e=await this.getIdToken();return await Bo(this,_R(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,b=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:E,emailVerified:N,isAnonymous:z,providerData:H,stsTokenManager:U}=n;De(E&&U,e,"internal-error");const D=Mo.fromJSON(this.name,U);De(typeof E=="string",e,"internal-error"),Cs(s,e.name),Cs(o,e.name),De(typeof N=="boolean",e,"internal-error"),De(typeof z=="boolean",e,"internal-error"),Cs(c,e.name),Cs(f,e.name),Cs(m,e.name),Cs(g,e.name),Cs(b,e.name),Cs(_,e.name);const X=new ja({uid:E,auth:e,email:o,emailVerified:N,displayName:s,isAnonymous:z,photoURL:f,phoneNumber:c,tenantId:m,stsTokenManager:D,createdAt:b,lastLoginAt:_});return H&&Array.isArray(H)&&(X.providerData=H.map(Y=>({...Y}))),g&&(X._redirectEventId=g),X}static async _fromIdTokenResponse(e,n,s=!1){const o=new Mo;o.updateFromServerResponse(n);const c=new ja({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Vd(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];De(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?F_(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!c?.length,m=new Mo;m.updateFromIdToken(s);const g=new ja({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new im(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,b),g}}const Vv=new Map;function zi(i){$i(i instanceof Function,"Expected a class definition");let e=Vv.get(i);return e?($i(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Vv.set(i,e),e)}class G_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}G_.type="NONE";const zv=G_;function Ad(i,e,n){return`firebase:${i}:${e}:${n}`}class Po{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=Ad(this.userKey,o.apiKey,c),this.fullPersistenceKey=Ad("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Pd(this.auth,{idToken:e}).catch(()=>{});return n?ja._fromGetAccountInfoResponse(this.auth,n,e):null}return ja._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Po(zi(zv),e,s);const o=(await Promise.all(n.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let c=o[0]||zi(zv);const f=Ad(s,e.config.apiKey,e.name);let m=null;for(const b of n)try{const _=await b._get(f);if(_){let E;if(typeof _=="string"){const N=await Pd(e,{idToken:_}).catch(()=>{});if(!N)break;E=await ja._fromGetAccountInfoResponse(e,N,_)}else E=ja._fromJSON(e,_);b!==c&&(m=E),c=b;break}}catch{}const g=o.filter(b=>b._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Po(c,e,s):(c=g[0],m&&await c._set(f,m.toJSON()),await Promise.all(n.map(async b=>{if(b!==c)try{await b._remove(f)}catch{}})),new Po(c,e,s))}}function Lv(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Y_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(J_(e))return"Blackberry";if(W_(e))return"Webos";if(K_(e))return"Safari";if((e.includes("chrome/")||Q_(e))&&!e.includes("edge/"))return"Chrome";if(X_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function $_(i=In()){return/firefox\//i.test(i)}function K_(i=In()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Q_(i=In()){return/crios\//i.test(i)}function Y_(i=In()){return/iemobile/i.test(i)}function X_(i=In()){return/android/i.test(i)}function J_(i=In()){return/blackberry/i.test(i)}function W_(i=In()){return/webos/i.test(i)}function qm(i=In()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function CR(i=In()){return qm(i)&&!!window.navigator?.standalone}function IR(){return HT()&&document.documentMode===10}function Z_(i=In()){return qm(i)||X_(i)||W_(i)||J_(i)||/windows phone/i.test(i)||Y_(i)}function e1(i,e=[]){let n;switch(i){case"Browser":n=Lv(In());break;case"Worker":n=`${Lv(In())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zr}/${s}`}class jR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((f,m)=>{try{const g=e(c);f(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function kR(i,e={}){return Ji(i,"GET","/v2/passwordPolicy",Qs(i,e))}const OR=6;class DR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??OR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class MR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Uv(this),this.idTokenSubscription=new Uv(this),this.beforeStateQueue=new jR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=L_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Po.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Pd(this,{idToken:e}),s=await ja._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ea(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ea(this.app))return Promise.reject(Ui(this));const n=e?Xt(e):null;return n&&De(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ea(this.app)?Promise.reject(Ui(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ea(this.app)?Promise.reject(Ui(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kR(this),n=new DR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new jc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await RR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zi(e)||this._popupRedirectResolver;De(n,this,"argument-error"),this.redirectPersistenceManager=await Po.create(this,[zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(m,this,"internal-error"),m.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=e1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(ea(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&uR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Lr(i){return Xt(i)}class Uv{constructor(e){this.auth=e,this.observer=null,this.addObserver=XT(n=>this.observer=n)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let sf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PR(i){sf=i}function t1(i){return sf.loadJS(i)}function VR(){return sf.recaptchaEnterpriseScript}function zR(){return sf.gapiScript}function LR(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class UR{constructor(){this.enterprise=new BR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class BR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const HR="recaptcha-enterprise",n1="NO_RECAPTCHA";class qR{constructor(e){this.type=HR,this.auth=Lr(e)}async verify(e="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,m)=>{xR(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const b=new vR(g);return c.tenantId==null?c._agentRecaptchaConfig=b:c._tenantRecaptchaConfigs[c.tenantId]=b,f(b.siteKey)}}).catch(g=>{m(g)})})}function o(c,f,m){const g=window.grecaptcha;Mv(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(b=>{f(b)}).catch(()=>{f(n1)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new UR().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{s(this.auth).then(m=>{if(!n&&Mv(window.grecaptcha))o(m,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=VR();g.length!==0&&(g+=m),t1(g).then(()=>{o(m,c,f)}).catch(b=>{f(b)})}}).catch(m=>{f(m)})})}}async function Bv(i,e,n,s=!1,o=!1){const c=new qR(i);let f;if(o)f=n1;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,b=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:b,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function sm(i,e,n,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Bv(i,e,n,n==="getOobCode");return s(i,c)}else return s(i,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Bv(i,e,n,n==="getOobCode");return s(i,f)}else return Promise.reject(c)})}function FR(i,e){const n=af(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Fi(c,e??{}))return o;Da(o,"already-initialized")}return n.initialize({options:e})}function GR(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(zi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function Fm(i,e,n){const s=Lr(i);De(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!!n?.disableWarnings,c=a1(e),{host:f,port:m}=$R(e),g=m===null?"":`:${m}`,b={url:`${c}//${f}${g}/`},_=Object.freeze({host:f,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){De(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),De(Fi(b,s.config.emulator)&&Fi(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=b,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,Vr(f)?(Dm(`${c}//${f}${g}`),Mm("Auth",!0)):o||KR()}function a1(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function $R(i){const e=a1(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:Hv(s.substr(c.length+1))}}else{const[c,f]=s.split(":");return{host:c,port:Hv(f)}}}function Hv(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function KR(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class Gm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vi("not implemented")}_getIdTokenResponse(e){return Vi("not implemented")}_linkToIdToken(e,n){return Vi("not implemented")}_getReauthenticationResolver(e){return Vi("not implemented")}}async function QR(i,e){return Ji(i,"POST","/v1/accounts:update",e)}async function YR(i,e){return Ji(i,"POST","/v1/accounts:signUp",e)}async function XR(i,e){return Dc(i,"POST","/v1/accounts:signInWithPassword",Qs(i,e))}async function JR(i,e){return Dc(i,"POST","/v1/accounts:signInWithEmailLink",Qs(i,e))}async function WR(i,e){return Dc(i,"POST","/v1/accounts:signInWithEmailLink",Qs(i,e))}class Ec extends Gm{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Ec(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Ec(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sm(e,n,"signInWithPassword",XR);case"emailLink":return JR(e,{email:this._email,oobCode:this._password});default:Da(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sm(e,s,"signUpPassword",YR);case"emailLink":return WR(e,{idToken:n,email:this._email,oobCode:this._password});default:Da(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Vo(i,e){return Dc(i,"POST","/v1/accounts:signInWithIdp",Qs(i,e))}const ZR="http://localhost";class jr extends Gm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Da("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=n;if(!s||!o)return null;const f=new jr(s,o);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Vo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Vo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vo(e,n)}buildRequest(){const e={requestUri:ZR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=kc(n)}return e}}function eC(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tC(i){const e=lc(cc(i)).link,n=e?lc(cc(e)).deep_link_id:null,s=lc(cc(i)).deep_link_id;return(s?lc(cc(s)).link:null)||s||n||e||i}class $m{constructor(e){const n=lc(cc(e)),s=n.apiKey??null,o=n.oobCode??null,c=eC(n.mode??null);De(s&&o&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=tC(e);try{return new $m(n)}catch{return null}}}class Wo{constructor(){this.providerId=Wo.PROVIDER_ID}static credential(e,n){return Ec._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=$m.parseLink(n);return De(s,"argument-error"),Ec._fromEmailAndCode(e,s.code,s.tenantId)}}Wo.PROVIDER_ID="password";Wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class i1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Mc extends i1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Is extends Mc{constructor(){super("facebook.com")}static credential(e){return jr._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.FACEBOOK_SIGN_IN_METHOD="facebook.com";Is.PROVIDER_ID="facebook.com";class js extends Mc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return jr._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return js.credential(n,s)}catch{return null}}}js.GOOGLE_SIGN_IN_METHOD="google.com";js.PROVIDER_ID="google.com";class ks extends Mc{constructor(){super("github.com")}static credential(e){return jr._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ks.credential(e.oauthAccessToken)}catch{return null}}}ks.GITHUB_SIGN_IN_METHOD="github.com";ks.PROVIDER_ID="github.com";class Os extends Mc{constructor(){super("twitter.com")}static credential(e,n){return jr._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Os.credential(n,s)}catch{return null}}}Os.TWITTER_SIGN_IN_METHOD="twitter.com";Os.PROVIDER_ID="twitter.com";async function nC(i,e){return Dc(i,"POST","/v1/accounts:signUp",Qs(i,e))}class kr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await ja._fromIdTokenResponse(e,s,o),f=qv(s);return new kr({user:c,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=qv(s);return new kr({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function qv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class zd extends gi{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,zd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new zd(e,n,s,o)}}function s1(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?zd._fromErrorAndOperation(i,c,e,s):c})}async function aC(i,e,n=!1){const s=await Bo(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return kr._forOperation(i,"link",s)}async function iC(i,e,n=!1){const{auth:s}=i;if(ea(s.app))return Promise.reject(Ui(s));const o="reauthenticate";try{const c=await Bo(i,s1(s,o,e,i),n);De(c.idToken,s,"internal-error");const f=Hm(c.idToken);De(f,s,"internal-error");const{sub:m}=f;return De(i.uid===m,s,"user-mismatch"),kr._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Da(s,"user-mismatch"),c}}async function r1(i,e,n=!1){if(ea(i.app))return Promise.reject(Ui(i));const s="signIn",o=await s1(i,s,e),c=await kr._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(c.user),c}async function sC(i,e){return r1(Lr(i),e)}async function o1(i){const e=Lr(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rC(i,e,n){if(ea(i.app))return Promise.reject(Ui(i));const s=Lr(i),f=await sm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&o1(i),g}),m=await kr._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(m.user),m}function l1(i,e,n){return ea(i.app)?Promise.reject(Ui(i)):sC(Xt(i),Wo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&o1(i),s})}function oC(i,e){return lC(Xt(i),null,e)}async function lC(i,e,n){const{auth:s}=i,c={idToken:await i.getIdToken(),returnSecureToken:!0};n&&(c.password=n);const f=await Bo(i,QR(s,c));await i._updateTokensIfNecessary(f,!0)}function cC(i,e,n,s){return Xt(i).onIdTokenChanged(e,n,s)}function uC(i,e,n){return Xt(i).beforeAuthStateChanged(e,n)}function rf(i,e,n,s){return Xt(i).onAuthStateChanged(e,n,s)}function dC(i){return Xt(i).signOut()}const Ld="__sak";class c1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ld,"1"),this.storage.removeItem(Ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const fC=1e3,hC=10;class u1 extends c1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Z_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},c=this.storage.getItem(s);IR()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,hC):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},fC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}u1.type="LOCAL";const pC=u1;class d1 extends c1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}d1.type="SESSION";const f1=d1;function mC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class of{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new of(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async b=>b(n.origin,c)),g=await mC(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}of.receivers=[];function Km(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class gC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,f;return new Promise((m,g)=>{const b=Km("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(E){const N=E;if(N.data.eventId===b)switch(N.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(N.data.response);break;default:clearTimeout(_),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:b,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function li(){return window}function bC(i){li().location.href=i}function h1(){return typeof li().WorkerGlobalScope<"u"&&typeof li().importScripts=="function"}async function yC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vC(){return navigator?.serviceWorker?.controller||null}function xC(){return h1()?self:null}const p1="firebaseLocalStorageDb",_C=1,Ud="firebaseLocalStorage",m1="fbase_key";class Pc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lf(i,e){return i.transaction([Ud],e?"readwrite":"readonly").objectStore(Ud)}function EC(){const i=indexedDB.deleteDatabase(p1);return new Pc(i).toPromise()}function rm(){const i=indexedDB.open(p1,_C);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Ud,{keyPath:m1})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Ud)?e(s):(s.close(),await EC(),e(await rm()))})})}async function Fv(i,e,n){const s=lf(i,!0).put({[m1]:e,value:n});return new Pc(s).toPromise()}async function AC(i,e){const n=lf(i,!1).get(e),s=await new Pc(n).toPromise();return s===void 0?null:s.value}function Gv(i,e){const n=lf(i,!0).delete(e);return new Pc(n).toPromise()}const wC=800,SC=3;class g1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>SC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return h1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=of._getInstance(xC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yC(),!this.activeServiceWorker)return;this.sender=new gC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rm();return await Fv(e,Ld,"1"),await Gv(e,Ld),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Fv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>AC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Gv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=lf(o,!1).getAll();return new Pc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}g1.type="LOCAL";const TC=g1;new Oc(3e4,6e4);function NC(i,e){return e?zi(e):(De(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Qm extends Gm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function RC(i){return r1(i.auth,new Qm(i),i.bypassAuthState)}function CC(i){const{auth:e,user:n}=i;return De(n,e,"internal-error"),iC(n,new Qm(i),i.bypassAuthState)}async function IC(i){const{auth:e,user:n}=i;return De(n,e,"internal-error"),aC(n,new Qm(i),i.bypassAuthState)}class b1{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:f,type:m}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RC;case"linkViaPopup":case"linkViaRedirect":return IC;case"reauthViaPopup":case"reauthViaRedirect":return CC;default:Da(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const jC=new Oc(2e3,1e4);class Do extends b1{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,Do.currentPopupAction&&Do.currentPopupAction.cancel(),Do.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=Km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Do.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jC.get())};e()}}Do.currentPopupAction=null;const kC="pendingRedirect",wd=new Map;class OC extends b1{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=wd.get(this.auth._key());if(!e){try{const s=await DC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}wd.set(this.auth._key(),e)}return this.bypassAuthState||wd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DC(i,e){const n=VC(e),s=PC(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function MC(i,e){wd.set(i._key(),e)}function PC(i){return zi(i._redirectPersistence)}function VC(i){return Ad(kC,i.config.apiKey,i.name)}async function zC(i,e,n=!1){if(ea(i.app))return Promise.reject(Ui(i));const s=Lr(i),o=NC(s,e),f=await new OC(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}const LC=600*1e3;class UC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!y1(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(oi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LC&&this.cachedEventUids.clear(),this.cachedEventUids.has($v(e))}saveEventToCache(e){this.cachedEventUids.add($v(e)),this.lastProcessedEventTime=Date.now()}}function $v(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function y1({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function BC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return y1(i);default:return!1}}async function HC(i,e={}){return Ji(i,"GET","/v1/projects",e)}const qC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FC=/^https?/;async function GC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await HC(i);for(const n of e)try{if($C(n))return}catch{}Da(i,"unauthorized-domain")}function $C(i){const e=am(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!FC.test(n))return!1;if(qC.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const KC=new Oc(3e4,6e4);function Kv(){const i=li().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function QC(i){return new Promise((e,n)=>{function s(){Kv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kv(),n(oi(i,"network-request-failed"))},timeout:KC.get()})}if(li().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(li().gapi?.load)s();else{const o=LR("iframefcb");return li()[o]=()=>{gapi.load?s():n(oi(i,"network-request-failed"))},t1(`${zR()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Sd=null,e})}let Sd=null;function YC(i){return Sd=Sd||QC(i),Sd}const XC=new Oc(5e3,15e3),JC="__/auth/iframe",WC="emulator/auth/iframe",ZC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t2(i){const e=i.config;De(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Bm(e,WC):`https://${i.config.authDomain}/${JC}`,s={apiKey:e.apiKey,appName:i.name,v:zr},o=e2.get(i.config.apiHost);o&&(s.eid=o);const c=i._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${kc(s).slice(1)}`}async function n2(i){const e=await YC(i),n=li().gapi;return De(n,i,"internal-error"),e.open({where:document.body,url:t2(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZC,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const f=oi(i,"network-request-failed"),m=li().setTimeout(()=>{c(f)},XC.get());function g(){li().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{c(f)})}))}const a2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},i2=500,s2=600,r2="_blank",o2="http://localhost";class Qv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l2(i,e,n,s=i2,o=s2){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...a2,width:s.toString(),height:o.toString(),top:c,left:f},b=In().toLowerCase();n&&(m=Q_(b)?r2:n),$_(b)&&(e=e||o2,g.scrollbars="yes");const _=Object.entries(g).reduce((N,[z,H])=>`${N}${z}=${H},`,"");if(CR(b)&&m!=="_self")return c2(e||"",m),new Qv(null);const E=window.open(e||"",m,_);De(E,i,"popup-blocked");try{E.focus()}catch{}return new Qv(E)}function c2(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const u2="__/auth/handler",d2="emulator/auth/handler",f2=encodeURIComponent("fac");async function Yv(i,e,n,s,o,c){De(i.config.authDomain,i,"auth-domain-config-required"),De(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:zr,eventId:o};if(e instanceof i1){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",YT(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))f[_]=E}if(e instanceof Mc){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(f.scopes=_.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const g=await i._getAppCheckToken(),b=g?`#${f2}=${encodeURIComponent(g)}`:"";return`${h2(i)}?${kc(m).slice(1)}${b}`}function h2({config:i}){return i.emulator?Bm(i,d2):`https://${i.authDomain}/${u2}`}const Hp="webStorageSupport";class p2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=f1,this._completeRedirectFn=zC,this._overrideRedirectResult=MC}async _openPopup(e,n,s,o){$i(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Yv(e,n,s,am(),o);return l2(e,c,Km())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await Yv(e,n,s,am(),o);return bC(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):($i(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await n2(e),s=new UC(e);return n.register("authEvent",o=>(De(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hp,{type:Hp},o=>{const c=o?.[0]?.[Hp];c!==void 0&&n(!!c),Da(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=GC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Z_()||K_()||qm()}}const m2=p2;var Xv="@firebase/auth",Jv="1.12.0";class g2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function b2(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function y2(i){Ir(new Us("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;De(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:e1(i)},b=new MR(s,o,c,g);return GR(b,n),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ir(new Us("auth-internal",e=>{const n=Lr(e.getProvider("auth").getImmediate());return(s=>new g2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ri(Xv,Jv,b2(i)),ri(Xv,Jv,"esm2020")}const v2=300,x2=k_("authIdTokenMaxAge")||v2;let Wv=null;const _2=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>x2)return;const o=n?.token;Wv!==o&&(Wv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function v1(i=Lm()){const e=af(i,"auth");if(e.isInitialized())return e.getImmediate();const n=FR(i,{popupRedirectResolver:m2,persistence:[TC,pC,f1]}),s=k_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const f=_2(c.toString());uC(n,f,()=>f(n.currentUser)),cC(n,m=>f(m))}}const o=C_("auth");return o&&Fm(n,`http://${o}`),n}function E2(){return document.getElementsByTagName("head")?.[0]??document}PR({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const c=oi("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",E2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});y2("Browser");var Zv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Vs,x1;(function(){var i;function e(O,C){function I(){}I.prototype=C.prototype,O.F=C.prototype,O.prototype=new I,O.prototype.constructor=O,O.D=function(V,k,j){for(var T=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)T[Te-2]=arguments[Te];return C.prototype[k].apply(V,T)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,C,I){I||(I=0);const V=Array(16);if(typeof C=="string")for(var k=0;k<16;++k)V[k]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(k=0;k<16;++k)V[k]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=O.g[0],I=O.g[1],k=O.g[2];let j=O.g[3],T;T=C+(j^I&(k^j))+V[0]+3614090360&4294967295,C=I+(T<<7&4294967295|T>>>25),T=j+(k^C&(I^k))+V[1]+3905402710&4294967295,j=C+(T<<12&4294967295|T>>>20),T=k+(I^j&(C^I))+V[2]+606105819&4294967295,k=j+(T<<17&4294967295|T>>>15),T=I+(C^k&(j^C))+V[3]+3250441966&4294967295,I=k+(T<<22&4294967295|T>>>10),T=C+(j^I&(k^j))+V[4]+4118548399&4294967295,C=I+(T<<7&4294967295|T>>>25),T=j+(k^C&(I^k))+V[5]+1200080426&4294967295,j=C+(T<<12&4294967295|T>>>20),T=k+(I^j&(C^I))+V[6]+2821735955&4294967295,k=j+(T<<17&4294967295|T>>>15),T=I+(C^k&(j^C))+V[7]+4249261313&4294967295,I=k+(T<<22&4294967295|T>>>10),T=C+(j^I&(k^j))+V[8]+1770035416&4294967295,C=I+(T<<7&4294967295|T>>>25),T=j+(k^C&(I^k))+V[9]+2336552879&4294967295,j=C+(T<<12&4294967295|T>>>20),T=k+(I^j&(C^I))+V[10]+4294925233&4294967295,k=j+(T<<17&4294967295|T>>>15),T=I+(C^k&(j^C))+V[11]+2304563134&4294967295,I=k+(T<<22&4294967295|T>>>10),T=C+(j^I&(k^j))+V[12]+1804603682&4294967295,C=I+(T<<7&4294967295|T>>>25),T=j+(k^C&(I^k))+V[13]+4254626195&4294967295,j=C+(T<<12&4294967295|T>>>20),T=k+(I^j&(C^I))+V[14]+2792965006&4294967295,k=j+(T<<17&4294967295|T>>>15),T=I+(C^k&(j^C))+V[15]+1236535329&4294967295,I=k+(T<<22&4294967295|T>>>10),T=C+(k^j&(I^k))+V[1]+4129170786&4294967295,C=I+(T<<5&4294967295|T>>>27),T=j+(I^k&(C^I))+V[6]+3225465664&4294967295,j=C+(T<<9&4294967295|T>>>23),T=k+(C^I&(j^C))+V[11]+643717713&4294967295,k=j+(T<<14&4294967295|T>>>18),T=I+(j^C&(k^j))+V[0]+3921069994&4294967295,I=k+(T<<20&4294967295|T>>>12),T=C+(k^j&(I^k))+V[5]+3593408605&4294967295,C=I+(T<<5&4294967295|T>>>27),T=j+(I^k&(C^I))+V[10]+38016083&4294967295,j=C+(T<<9&4294967295|T>>>23),T=k+(C^I&(j^C))+V[15]+3634488961&4294967295,k=j+(T<<14&4294967295|T>>>18),T=I+(j^C&(k^j))+V[4]+3889429448&4294967295,I=k+(T<<20&4294967295|T>>>12),T=C+(k^j&(I^k))+V[9]+568446438&4294967295,C=I+(T<<5&4294967295|T>>>27),T=j+(I^k&(C^I))+V[14]+3275163606&4294967295,j=C+(T<<9&4294967295|T>>>23),T=k+(C^I&(j^C))+V[3]+4107603335&4294967295,k=j+(T<<14&4294967295|T>>>18),T=I+(j^C&(k^j))+V[8]+1163531501&4294967295,I=k+(T<<20&4294967295|T>>>12),T=C+(k^j&(I^k))+V[13]+2850285829&4294967295,C=I+(T<<5&4294967295|T>>>27),T=j+(I^k&(C^I))+V[2]+4243563512&4294967295,j=C+(T<<9&4294967295|T>>>23),T=k+(C^I&(j^C))+V[7]+1735328473&4294967295,k=j+(T<<14&4294967295|T>>>18),T=I+(j^C&(k^j))+V[12]+2368359562&4294967295,I=k+(T<<20&4294967295|T>>>12),T=C+(I^k^j)+V[5]+4294588738&4294967295,C=I+(T<<4&4294967295|T>>>28),T=j+(C^I^k)+V[8]+2272392833&4294967295,j=C+(T<<11&4294967295|T>>>21),T=k+(j^C^I)+V[11]+1839030562&4294967295,k=j+(T<<16&4294967295|T>>>16),T=I+(k^j^C)+V[14]+4259657740&4294967295,I=k+(T<<23&4294967295|T>>>9),T=C+(I^k^j)+V[1]+2763975236&4294967295,C=I+(T<<4&4294967295|T>>>28),T=j+(C^I^k)+V[4]+1272893353&4294967295,j=C+(T<<11&4294967295|T>>>21),T=k+(j^C^I)+V[7]+4139469664&4294967295,k=j+(T<<16&4294967295|T>>>16),T=I+(k^j^C)+V[10]+3200236656&4294967295,I=k+(T<<23&4294967295|T>>>9),T=C+(I^k^j)+V[13]+681279174&4294967295,C=I+(T<<4&4294967295|T>>>28),T=j+(C^I^k)+V[0]+3936430074&4294967295,j=C+(T<<11&4294967295|T>>>21),T=k+(j^C^I)+V[3]+3572445317&4294967295,k=j+(T<<16&4294967295|T>>>16),T=I+(k^j^C)+V[6]+76029189&4294967295,I=k+(T<<23&4294967295|T>>>9),T=C+(I^k^j)+V[9]+3654602809&4294967295,C=I+(T<<4&4294967295|T>>>28),T=j+(C^I^k)+V[12]+3873151461&4294967295,j=C+(T<<11&4294967295|T>>>21),T=k+(j^C^I)+V[15]+530742520&4294967295,k=j+(T<<16&4294967295|T>>>16),T=I+(k^j^C)+V[2]+3299628645&4294967295,I=k+(T<<23&4294967295|T>>>9),T=C+(k^(I|~j))+V[0]+4096336452&4294967295,C=I+(T<<6&4294967295|T>>>26),T=j+(I^(C|~k))+V[7]+1126891415&4294967295,j=C+(T<<10&4294967295|T>>>22),T=k+(C^(j|~I))+V[14]+2878612391&4294967295,k=j+(T<<15&4294967295|T>>>17),T=I+(j^(k|~C))+V[5]+4237533241&4294967295,I=k+(T<<21&4294967295|T>>>11),T=C+(k^(I|~j))+V[12]+1700485571&4294967295,C=I+(T<<6&4294967295|T>>>26),T=j+(I^(C|~k))+V[3]+2399980690&4294967295,j=C+(T<<10&4294967295|T>>>22),T=k+(C^(j|~I))+V[10]+4293915773&4294967295,k=j+(T<<15&4294967295|T>>>17),T=I+(j^(k|~C))+V[1]+2240044497&4294967295,I=k+(T<<21&4294967295|T>>>11),T=C+(k^(I|~j))+V[8]+1873313359&4294967295,C=I+(T<<6&4294967295|T>>>26),T=j+(I^(C|~k))+V[15]+4264355552&4294967295,j=C+(T<<10&4294967295|T>>>22),T=k+(C^(j|~I))+V[6]+2734768916&4294967295,k=j+(T<<15&4294967295|T>>>17),T=I+(j^(k|~C))+V[13]+1309151649&4294967295,I=k+(T<<21&4294967295|T>>>11),T=C+(k^(I|~j))+V[4]+4149444226&4294967295,C=I+(T<<6&4294967295|T>>>26),T=j+(I^(C|~k))+V[11]+3174756917&4294967295,j=C+(T<<10&4294967295|T>>>22),T=k+(C^(j|~I))+V[2]+718787259&4294967295,k=j+(T<<15&4294967295|T>>>17),T=I+(j^(k|~C))+V[9]+3951481745&4294967295,O.g[0]=O.g[0]+C&4294967295,O.g[1]=O.g[1]+(k+(T<<21&4294967295|T>>>11))&4294967295,O.g[2]=O.g[2]+k&4294967295,O.g[3]=O.g[3]+j&4294967295}s.prototype.v=function(O,C){C===void 0&&(C=O.length);const I=C-this.blockSize,V=this.C;let k=this.h,j=0;for(;j<C;){if(k==0)for(;j<=I;)o(this,O,j),j+=this.blockSize;if(typeof O=="string"){for(;j<C;)if(V[k++]=O.charCodeAt(j++),k==this.blockSize){o(this,V),k=0;break}}else for(;j<C;)if(V[k++]=O[j++],k==this.blockSize){o(this,V),k=0;break}}this.h=k,this.o+=C},s.prototype.A=function(){var O=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);O[0]=128;for(var C=1;C<O.length-8;++C)O[C]=0;C=this.o*8;for(var I=O.length-8;I<O.length;++I)O[I]=C&255,C/=256;for(this.v(O),O=Array(16),C=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)O[C++]=this.g[I]>>>V&255;return O};function c(O,C){var I=m;return Object.prototype.hasOwnProperty.call(I,O)?I[O]:I[O]=C(O)}function f(O,C){this.h=C;const I=[];let V=!0;for(let k=O.length-1;k>=0;k--){const j=O[k]|0;V&&j==C||(I[k]=j,V=!1)}this.g=I}var m={};function g(O){return-128<=O&&O<128?c(O,function(C){return new f([C|0],C<0?-1:0)}):new f([O|0],O<0?-1:0)}function b(O){if(isNaN(O)||!isFinite(O))return E;if(O<0)return D(b(-O));const C=[];let I=1;for(let V=0;O>=I;V++)C[V]=O/I|0,I*=4294967296;return new f(C,0)}function _(O,C){if(O.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(O.charAt(0)=="-")return D(_(O.substring(1),C));if(O.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=b(Math.pow(C,8));let V=E;for(let j=0;j<O.length;j+=8){var k=Math.min(8,O.length-j);const T=parseInt(O.substring(j,j+k),C);k<8?(k=b(Math.pow(C,k)),V=V.j(k).add(b(T))):(V=V.j(I),V=V.add(b(T)))}return V}var E=g(0),N=g(1),z=g(16777216);i=f.prototype,i.m=function(){if(U(this))return-D(this).m();let O=0,C=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);O+=(V>=0?V:4294967296+V)*C,C*=4294967296}return O},i.toString=function(O){if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(H(this))return"0";if(U(this))return"-"+D(this).toString(O);const C=b(Math.pow(O,6));var I=this;let V="";for(;;){const k=ae(I,C).g;I=X(I,k.j(C));let j=((I.g.length>0?I.g[0]:I.h)>>>0).toString(O);if(I=k,H(I))return j+V;for(;j.length<6;)j="0"+j;V=j+V}},i.i=function(O){return O<0?0:O<this.g.length?this.g[O]:this.h};function H(O){if(O.h!=0)return!1;for(let C=0;C<O.g.length;C++)if(O.g[C]!=0)return!1;return!0}function U(O){return O.h==-1}i.l=function(O){return O=X(this,O),U(O)?-1:H(O)?0:1};function D(O){const C=O.g.length,I=[];for(let V=0;V<C;V++)I[V]=~O.g[V];return new f(I,~O.h).add(N)}i.abs=function(){return U(this)?D(this):this},i.add=function(O){const C=Math.max(this.g.length,O.g.length),I=[];let V=0;for(let k=0;k<=C;k++){let j=V+(this.i(k)&65535)+(O.i(k)&65535),T=(j>>>16)+(this.i(k)>>>16)+(O.i(k)>>>16);V=T>>>16,j&=65535,T&=65535,I[k]=T<<16|j}return new f(I,I[I.length-1]&-2147483648?-1:0)};function X(O,C){return O.add(D(C))}i.j=function(O){if(H(this)||H(O))return E;if(U(this))return U(O)?D(this).j(D(O)):D(D(this).j(O));if(U(O))return D(this.j(D(O)));if(this.l(z)<0&&O.l(z)<0)return b(this.m()*O.m());const C=this.g.length+O.g.length,I=[];for(var V=0;V<2*C;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let k=0;k<O.g.length;k++){const j=this.i(V)>>>16,T=this.i(V)&65535,Te=O.i(k)>>>16,Se=O.i(k)&65535;I[2*V+2*k]+=T*Se,Y(I,2*V+2*k),I[2*V+2*k+1]+=j*Se,Y(I,2*V+2*k+1),I[2*V+2*k+1]+=T*Te,Y(I,2*V+2*k+1),I[2*V+2*k+2]+=j*Te,Y(I,2*V+2*k+2)}for(O=0;O<C;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=C;O<2*C;O++)I[O]=0;return new f(I,0)};function Y(O,C){for(;(O[C]&65535)!=O[C];)O[C+1]+=O[C]>>>16,O[C]&=65535,C++}function ee(O,C){this.g=O,this.h=C}function ae(O,C){if(H(C))throw Error("division by zero");if(H(O))return new ee(E,E);if(U(O))return C=ae(D(O),C),new ee(D(C.g),D(C.h));if(U(C))return C=ae(O,D(C)),new ee(D(C.g),C.h);if(O.g.length>30){if(U(O)||U(C))throw Error("slowDivide_ only works with positive integers.");for(var I=N,V=C;V.l(O)<=0;)I=ge(I),V=ge(V);var k=fe(I,1),j=fe(V,1);for(V=fe(V,2),I=fe(I,2);!H(V);){var T=j.add(V);T.l(O)<=0&&(k=k.add(I),j=T),V=fe(V,1),I=fe(I,1)}return C=X(O,k.j(C)),new ee(k,C)}for(k=E;O.l(C)>=0;){for(I=Math.max(1,Math.floor(O.m()/C.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),j=b(I),T=j.j(C);U(T)||T.l(O)>0;)I-=V,j=b(I),T=j.j(C);H(j)&&(j=N),k=k.add(j),O=X(O,T)}return new ee(k,O)}i.B=function(O){return ae(this,O).h},i.and=function(O){const C=Math.max(this.g.length,O.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)&O.i(V);return new f(I,this.h&O.h)},i.or=function(O){const C=Math.max(this.g.length,O.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)|O.i(V);return new f(I,this.h|O.h)},i.xor=function(O){const C=Math.max(this.g.length,O.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)^O.i(V);return new f(I,this.h^O.h)};function ge(O){const C=O.g.length+1,I=[];for(let V=0;V<C;V++)I[V]=O.i(V)<<1|O.i(V-1)>>>31;return new f(I,O.h)}function fe(O,C){const I=C>>5;C%=32;const V=O.g.length-I,k=[];for(let j=0;j<V;j++)k[j]=C>0?O.i(j+I)>>>C|O.i(j+I+1)<<32-C:O.i(j+I);return new f(k,O.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,x1=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=b,f.fromString=_,Vs=f}).apply(typeof Zv<"u"?Zv:typeof self<"u"?self:typeof window<"u"?window:{});var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var _1,uc,E1,Td,om,A1,w1,S1;(function(){var i,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof pd=="object"&&pd];for(var y=0;y<d.length;++y){var x=d[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=n(this);function o(d,y){if(y)e:{var x=s;d=d.split(".");for(var S=0;S<d.length-1;S++){var F=d[S];if(!(F in x))break e;x=x[F]}d=d[d.length-1],S=x[d],y=y(S),y!=S&&y!=null&&e(x,d,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(y){var x=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&x.push([S,y[S]]);return x}});var c=c||{},f=this||self;function m(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function g(d,y,x){return d.call.apply(d.bind,arguments)}function b(d,y,x){return b=g,b.apply(null,arguments)}function _(d,y){var x=Array.prototype.slice.call(arguments,1);return function(){var S=x.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function E(d,y){function x(){}x.prototype=y.prototype,d.Z=y.prototype,d.prototype=new x,d.prototype.constructor=d,d.Ob=function(S,F,J){for(var me=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)me[Ge-2]=arguments[Ge];return y.prototype[F].apply(S,me)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function z(d){const y=d.length;if(y>0){const x=Array(y);for(let S=0;S<y;S++)x[S]=d[S];return x}return[]}function H(d,y){for(let S=1;S<arguments.length;S++){const F=arguments[S];var x=typeof F;if(x=x!="object"?x:F?Array.isArray(F)?"array":x:"null",x=="array"||x=="object"&&typeof F.length=="number"){x=d.length||0;const J=F.length||0;d.length=x+J;for(let me=0;me<J;me++)d[x+me]=F[me]}else d.push(F)}}class U{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function D(d){f.setTimeout(()=>{throw d},0)}function X(){var d=O;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class Y{constructor(){this.h=this.g=null}add(y,x){const S=ee.get();S.set(y,x),this.h?this.h.next=S:this.g=S,this.h=S}}var ee=new U(()=>new ae,d=>d.reset());class ae{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,fe=!1,O=new Y,C=()=>{const d=Promise.resolve(void 0);ge=()=>{d.then(I)}};function I(){for(var d;d=X();){try{d.h.call(d.g)}catch(x){D(x)}var y=ee;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}fe=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};f.addEventListener("test",x,y),f.removeEventListener("test",x,y)}catch{}return d})();function T(d){return/^[\s\xa0]*$/.test(d)}function Te(d,y){k.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}E(Te,k),Te.prototype.init=function(d,y){const x=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(x=="mouseover"?y=d.fromElement:x=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Se="closure_listenable_"+(Math.random()*1e6|0),G=0;function ce(d,y,x,S,F){this.listener=d,this.proxy=null,this.src=y,this.type=x,this.capture=!!S,this.ha=F,this.key=++G,this.da=this.fa=!1}function _e(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Pe(d,y,x){for(const S in d)y.call(x,d[S],S,d)}function He(d,y){for(const x in d)y.call(void 0,d[x],x,d)}function P(d){const y={};for(const x in d)y[x]=d[x];return y}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(d,y){let x,S;for(let F=1;F<arguments.length;F++){S=arguments[F];for(x in S)d[x]=S[x];for(let J=0;J<Z.length;J++)x=Z[J],Object.prototype.hasOwnProperty.call(S,x)&&(d[x]=S[x])}}function be(d){this.src=d,this.g={},this.h=0}be.prototype.add=function(d,y,x,S,F){const J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);const me=xe(d,y,S,F);return me>-1?(y=d[me],x||(y.fa=!1)):(y=new ce(y,this.src,J,!!S,F),y.fa=x,d.push(y)),y};function oe(d,y){const x=y.type;if(x in d.g){var S=d.g[x],F=Array.prototype.indexOf.call(S,y,void 0),J;(J=F>=0)&&Array.prototype.splice.call(S,F,1),J&&(_e(y),d.g[x].length==0&&(delete d.g[x],d.h--))}}function xe(d,y,x,S){for(let F=0;F<d.length;++F){const J=d[F];if(!J.da&&J.listener==y&&J.capture==!!x&&J.ha==S)return F}return-1}var ye="closure_lm_"+(Math.random()*1e6|0),Ye={};function Qe(d,y,x,S,F){if(Array.isArray(y)){for(let J=0;J<y.length;J++)Qe(d,y[J],x,S,F);return null}return x=it(x),d&&d[Se]?d.J(y,x,m(S)?!!S.capture:!1,F):Bt(d,y,x,!1,S,F)}function Bt(d,y,x,S,F,J){if(!y)throw Error("Invalid event type");const me=m(F)?!!F.capture:!!F;let Ge=Ne(d);if(Ge||(d[ye]=Ge=new be(d)),x=Ge.add(y,x,S,me,J),x.proxy)return x;if(S=Ht(),x.proxy=S,S.src=d,S.listener=x,d.addEventListener)j||(F=me),F===void 0&&(F=!1),d.addEventListener(y.toString(),S,F);else if(d.attachEvent)d.attachEvent(ve(y.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ht(){function d(x){return y.call(d.src,d.listener,x)}const y=le;return d}function pe(d,y,x,S,F){if(Array.isArray(y))for(var J=0;J<y.length;J++)pe(d,y[J],x,S,F);else S=m(S)?!!S.capture:!!S,x=it(x),d&&d[Se]?(d=d.i,J=String(y).toString(),J in d.g&&(y=d.g[J],x=xe(y,x,S,F),x>-1&&(_e(y[x]),Array.prototype.splice.call(y,x,1),y.length==0&&(delete d.g[J],d.h--)))):d&&(d=Ne(d))&&(y=d.g[y.toString()],d=-1,y&&(d=xe(y,x,S,F)),(x=d>-1?y[d]:null)&&B(x))}function B(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Se])oe(y.i,d);else{var x=d.type,S=d.proxy;y.removeEventListener?y.removeEventListener(x,S,d.capture):y.detachEvent?y.detachEvent(ve(x),S):y.addListener&&y.removeListener&&y.removeListener(S),(x=Ne(y))?(oe(x,d),x.h==0&&(x.src=null,y[ye]=null)):_e(d)}}}function ve(d){return d in Ye?Ye[d]:Ye[d]="on"+d}function le(d,y){if(d.da)d=!0;else{y=new Te(y,this);const x=d.listener,S=d.ha||d.src;d.fa&&B(d),d=x.call(S,y)}return d}function Ne(d){return d=d[ye],d instanceof be?d:null}var Ce="__closure_events_fn_"+(Math.random()*1e9>>>0);function it(d){return typeof d=="function"?d:(d[Ce]||(d[Ce]=function(y){return d.handleEvent(y)}),d[Ce])}function Xe(){V.call(this),this.i=new be(this),this.M=this,this.G=null}E(Xe,V),Xe.prototype[Se]=!0,Xe.prototype.removeEventListener=function(d,y,x,S){pe(this,d,y,x,S)};function Rt(d,y){var x,S=d.G;if(S)for(x=[];S;S=S.G)x.push(S);if(d=d.M,S=y.type||y,typeof y=="string")y=new k(y,d);else if(y instanceof k)y.target=y.target||d;else{var F=y;y=new k(S,d),ue(y,F)}F=!0;let J,me;if(x)for(me=x.length-1;me>=0;me--)J=y.g=x[me],F=On(J,S,!0,y)&&F;if(J=y.g=d,F=On(J,S,!0,y)&&F,F=On(J,S,!1,y)&&F,x)for(me=0;me<x.length;me++)J=y.g=x[me],F=On(J,S,!1,y)&&F}Xe.prototype.N=function(){if(Xe.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const x=d.g[y];for(let S=0;S<x.length;S++)_e(x[S]);delete d.g[y],d.h--}}this.G=null},Xe.prototype.J=function(d,y,x,S){return this.i.add(String(d),y,!1,x,S)},Xe.prototype.K=function(d,y,x,S){return this.i.add(String(d),y,!0,x,S)};function On(d,y,x,S){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let F=!0;for(let J=0;J<y.length;++J){const me=y[J];if(me&&!me.da&&me.capture==x){const Ge=me.listener,$t=me.ha||me.src;me.fa&&oe(d.i,me),F=Ge.call($t,S)!==!1&&F}}return F&&!S.defaultPrevented}function R(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=b(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:f.setTimeout(d,y||0)}function de(d){d.g=R(()=>{d.g=null,d.i&&(d.i=!1,de(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class qe extends V{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:de(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zt(d){V.call(this),this.h=d,this.g={}}E(zt,V);var Ct=[];function It(d){Pe(d.g,function(y,x){this.g.hasOwnProperty(x)&&B(y)},d),d.g={}}zt.prototype.N=function(){zt.Z.N.call(this),It(this)},zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dn=f.JSON.stringify,he=f.JSON.parse,pt=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function Lt(){}function st(){}var Ve={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function dt(){k.call(this,"d")}E(dt,k);function rt(){k.call(this,"c")}E(rt,k);var Fe={},va=null;function Pa(){return va=va||new Xe}Fe.Ia="serverreachability";function Hc(d){k.call(this,Fe.Ia,d)}E(Hc,k);function Va(d){const y=Pa();Rt(y,new Hc(y))}Fe.STAT_EVENT="statevent";function Ws(d,y){k.call(this,Fe.STAT_EVENT,d),this.stat=y}E(Ws,k);function Jt(d){const y=Pa();Rt(y,new Ws(y,d))}Fe.Ja="timingevent";function za(d,y){k.call(this,Fe.Ja,d),this.size=y}E(za,k);function La(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},y)}function xa(){this.g=!0}xa.prototype.ua=function(){this.g=!1};function jf(d,y,x,S,F,J){d.info(function(){if(d.g)if(J){var me="",Ge=J.split("&");for(let ft=0;ft<Ge.length;ft++){var $t=Ge[ft].split("=");if($t.length>1){const Mt=$t[0];$t=$t[1];const oa=Mt.split("_");me=oa.length>=2&&oa[1]=="type"?me+(Mt+"="+$t+"&"):me+(Mt+"=redacted&")}}}else me=null;else me=J;return"XMLHTTP REQ ("+S+") [attempt "+F+"]: "+y+`
`+x+`
`+me})}function qc(d,y,x,S,F,J,me){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+F+"]: "+y+`
`+x+`
`+J+" "+me})}function Ua(d,y,x,S){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+kf(d,x)+(S?" "+S:"")})}function Zs(d,y){d.info(function(){return"TIMEOUT: "+y})}xa.prototype.info=function(){};function kf(d,y){if(!d.g)return y;if(!y)return null;try{const J=JSON.parse(y);if(J){for(d=0;d<J.length;d++)if(Array.isArray(J[d])){var x=J[d];if(!(x.length<2)){var S=x[1];if(Array.isArray(S)&&!(S.length<1)){var F=S[0];if(F!="noop"&&F!="stop"&&F!="close")for(let me=1;me<S.length;me++)S[me]=""}}}}return Dn(J)}catch{return y}}var er={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rl;function tr(){}E(tr,Lt),tr.prototype.g=function(){return new XMLHttpRequest},rl=new tr;function yi(d){return encodeURIComponent(String(d))}function Fc(d){var y=1;d=d.split(":");const x=[];for(;y>0&&d.length;)x.push(d.shift()),y--;return d.length&&x.push(d.join(":")),x}function _a(d,y,x,S){this.j=d,this.i=y,this.l=x,this.S=S||1,this.V=new zt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ea}function Ea(){this.i=null,this.g="",this.h=!1}var Wt={},dn={};function Ba(d,y,x){d.M=1,d.A=nr(en(y)),d.u=x,d.R=!0,qr(d,null)}function qr(d,y){d.F=Date.now(),Ha(d),d.B=en(d.A);var x=d.B,S=d.S;Array.isArray(S)||(S=[String(S)]),Kr(x.i,"t",S),d.C=0,x=d.j.L,d.h=new Ea,d.g=su(d.j,x?y:null,!d.u),d.P>0&&(d.O=new qe(b(d.Y,d,d.g),d.P)),y=d.V,x=d.g,S=d.ba;var F="readystatechange";Array.isArray(F)||(F&&(Ct[0]=F.toString()),F=Ct);for(let J=0;J<F.length;J++){const me=Qe(x,F[J],S||y.handleEvent,!1,y.h||y);if(!me)break;y.g[me.key]=me}y=d.J?P(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),Va(),jf(d.i,d.v,d.B,d.l,d.S,d.u)}_a.prototype.ba=function(d){d=d.target;const y=this.O;y&&Sa(d)==3?y.j():this.Y(d)},_a.prototype.Y=function(d){try{if(d==this.g)e:{const Ge=Sa(this.g),$t=this.g.ya(),ft=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||mn(this.g)))){this.K||Ge!=4||$t==7||($t==8||ft<=0?Va(3):Va(2)),qa(this);var y=this.g.ca();this.X=y;var x=Of(this);if(this.o=y==200,qc(this.i,this.v,this.B,this.l,this.S,Ge,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,F=this.g;if((S=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(S)){var J=S;break t}}J=null}if(d=J)Ua(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fa(this,d);else{this.o=!1,this.m=3,Jt(12),Gn(this),ia(this);break e}}if(this.R){d=!0;let Mt;for(;!this.K&&this.C<x.length;)if(Mt=$c(this,x),Mt==dn){Ge==4&&(this.m=4,Jt(14),d=!1),Ua(this.i,this.l,null,"[Incomplete Response]");break}else if(Mt==Wt){this.m=4,Jt(15),Ua(this.i,this.l,x,"[Invalid Chunk]"),d=!1;break}else Ua(this.i,this.l,Mt,null),Fa(this,Mt);if(Gc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||x.length!=0||this.h.h||(this.m=1,Jt(16),d=!1),this.o=this.o&&d,!d)Ua(this.i,this.l,x,"[Invalid Chunked Response]"),Gn(this),ia(this);else if(x.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),_l(me),me.P=!0,Jt(11))}}else Ua(this.i,this.l,x,null),Fa(this,x);Ge==4&&Gn(this),this.o&&!this.K&&(Ge==4?tu(this.j,this):(this.o=!1,Ha(this)))}else xi(this.g),y==400&&x.indexOf("Unknown SID")>0?(this.m=3,Jt(12)):(this.m=0,Jt(13)),Gn(this),ia(this)}}}catch{}};function Of(d){if(!Gc(d))return d.g.la();const y=mn(d.g);if(y==="")return"";let x="";const S=y.length,F=Sa(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Gn(d),ia(d),"";d.h.i=new f.TextDecoder}for(let J=0;J<S;J++)d.h.h=!0,x+=d.h.i.decode(y[J],{stream:!(F&&J==S-1)});return y.length=0,d.h.g+=x,d.C=0,d.h.g}function Gc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function $c(d,y){var x=d.C,S=y.indexOf(`
`,x);return S==-1?dn:(x=Number(y.substring(x,S)),isNaN(x)?Wt:(S+=1,S+x>y.length?dn:(y=y.slice(S,S+x),d.C=S+x,y)))}_a.prototype.cancel=function(){this.K=!0,Gn(this)};function Ha(d){d.T=Date.now()+d.H,Fr(d,d.H)}function Fr(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=La(b(d.aa,d),y)}function qa(d){d.D&&(f.clearTimeout(d.D),d.D=null)}_a.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Zs(this.i,this.B),this.M!=2&&(Va(),Jt(17)),Gn(this),this.m=2,ia(this)):Fr(this,this.T-d)};function ia(d){d.j.I==0||d.K||tu(d.j,d)}function Gn(d){qa(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,It(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function Fa(d,y){try{var x=d.j;if(x.I!=0&&(x.g==d||$a(x.h,d))){if(!d.L&&$a(x.h,d)&&x.I==3){try{var S=x.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var F=S;if(F[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<d.F)Wr(x),ss(x);else break e;cr(x),Jt(18)}}else x.xa=F[1],0<x.xa-x.K&&F[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=La(b(x.Va,x),6e3));Ga(x.h)<=1&&x.ta&&(x.ta=void 0)}else Wa(x,11)}else if((d.L||x.g==d)&&Wr(x),!T(y))for(F=x.Ba.g.parse(y),y=0;y<F.length;y++){let ft=F[y];const Mt=ft[0];if(!(Mt<=x.K))if(x.K=Mt,ft=ft[1],x.I==2)if(ft[0]=="c"){x.M=ft[1],x.ba=ft[2];const oa=ft[3];oa!=null&&(x.ka=oa,x.j.info("VER="+x.ka));const Za=ft[4];Za!=null&&(x.za=Za,x.j.info("SVER="+x.za));const Ta=ft[5];Ta!=null&&typeof Ta=="number"&&Ta>0&&(S=1.5*Ta,x.O=S,x.j.info("backChannelRequestTimeoutMs_="+S)),S=x;const Na=d.g;if(Na){const ur=Na.g?Na.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ur){var J=S.h;J.g||ur.indexOf("spdy")==-1&&ur.indexOf("quic")==-1&&ur.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(cl(J,J.h),J.h=null))}if(S.G){const Zr=Na.g?Na.g.getResponseHeader("X-HTTP-Session-Id"):null;Zr&&(S.wa=Zr,gt(S.J,S.G,Zr))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-d.F,x.j.info("Handshake RTT: "+x.T+"ms")),S=x;var me=d;if(S.na=iu(S,S.L?S.ba:null,S.W),me.L){ul(S.h,me);var Ge=me,$t=S.O;$t&&(Ge.H=$t),Ge.D&&(qa(Ge),Ha(Ge)),S.g=me}else Zc(S);x.i.length>0&&Ja(x)}else ft[0]!="stop"&&ft[0]!="close"||Wa(x,7);else x.I==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?Wa(x,7):vl(x):ft[0]!="noop"&&x.l&&x.l.qa(ft),x.A=0)}}Va(4)}catch{}}var Zt=class{constructor(d,y){this.g=d,this.map=y}};function ol(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ll(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ga(d){return d.h?1:d.g?d.g.size:0}function $a(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function cl(d,y){d.g?d.g.add(y):d.h=y}function ul(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}ol.prototype.cancel=function(){if(this.i=dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function dl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const x of d.g.values())y=y.concat(x.G);return y}return z(d.i)}var Kc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gr(d,y){if(d){d=d.split("&");for(let x=0;x<d.length;x++){const S=d[x].indexOf("=");let F,J=null;S>=0?(F=d[x].substring(0,S),J=d[x].substring(S+1)):F=d[x],y(F,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function $n(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof $n?(this.l=d.l,fn(this,d.j),this.o=d.o,this.g=d.g,Wi(this,d.u),this.h=d.h,fl(this,Jc(d.i)),this.m=d.m):d&&(y=String(d).match(Kc))?(this.l=!1,fn(this,y[1]||"",!0),this.o=Ka(y[2]||""),this.g=Ka(y[3]||"",!0),Wi(this,y[4]),this.h=Ka(y[5]||"",!0),fl(this,y[6]||"",!0),this.m=Ka(y[7]||"")):(this.l=!1,this.i=new es(null,this.l))}$n.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(ar(y,$r,!0),":");var x=this.g;return(x||y=="file")&&(d.push("//"),(y=this.o)&&d.push(ar(y,$r,!0),"@"),d.push(yi(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&d.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(ar(x,x.charAt(0)=="/"?hl:Qc,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",ar(x,Yc)),d.join("")},$n.prototype.resolve=function(d){const y=en(this);let x=!!d.j;x?fn(y,d.j):x=!!d.o,x?y.o=d.o:x=!!d.g,x?y.g=d.g:x=d.u!=null;var S=d.h;if(x)Wi(y,d.u);else if(x=!!d.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var F=y.h.lastIndexOf("/");F!=-1&&(S=y.h.slice(0,F+1)+S)}if(F=S,F==".."||F==".")S="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){S=F.lastIndexOf("/",0)==0,F=F.split("/");const J=[];for(let me=0;me<F.length;){const Ge=F[me++];Ge=="."?S&&me==F.length&&J.push(""):Ge==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),S&&me==F.length&&J.push("")):(J.push(Ge),S=!0)}S=J.join("/")}else S=F}return x?y.h=S:x=d.i.toString()!=="",x?fl(y,Jc(d.i)):x=!!d.m,x&&(y.m=d.m),y};function en(d){return new $n(d)}function fn(d,y,x){d.j=x?Ka(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Wi(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function fl(d,y,x){y instanceof es?(d.i=y,Qr(d.i,d.l)):(x||(y=ar(y,Zi)),d.i=new es(y,d.l))}function gt(d,y,x){d.i.set(y,x)}function nr(d){return gt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Ka(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ar(d,y,x){return typeof d=="string"?(d=encodeURI(d).replace(y,Mn),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Mn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var $r=/[#\/\?@]/g,Qc=/[#\?:]/g,hl=/[#\?]/g,Zi=/[#\?@]/g,Yc=/#/g;function es(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Pn(d){d.g||(d.g=new Map,d.h=0,d.i&&Gr(d.i,function(y,x){d.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}i=es.prototype,i.add=function(d,y){Pn(this),this.i=null,d=ts(this,d);let x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(y),this.h+=1,this};function Xc(d,y){Pn(d),y=ts(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function pl(d,y){return Pn(d),y=ts(d,y),d.g.has(y)}i.forEach=function(d,y){Pn(this),this.g.forEach(function(x,S){x.forEach(function(F){d.call(y,F,S,this)},this)},this)};function ml(d,y){Pn(d);let x=[];if(typeof y=="string")pl(d,y)&&(x=x.concat(d.g.get(ts(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)x=x.concat(d[y]);return x}i.set=function(d,y){return Pn(this),this.i=null,d=ts(this,d),pl(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},i.get=function(d,y){return d?(d=ml(this,d),d.length>0?String(d[0]):y):y};function Kr(d,y,x){Xc(d,y),x.length>0&&(d.i=null,d.g.set(ts(d,y),z(x)),d.h+=x.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var x=y[S];const F=yi(x);x=ml(this,x);for(let J=0;J<x.length;J++){let me=F;x[J]!==""&&(me+="="+yi(x[J])),d.push(me)}}return this.i=d.join("&")};function Jc(d){const y=new es;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function ts(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function Qr(d,y){y&&!d.j&&(Pn(d),d.i=null,d.g.forEach(function(x,S){const F=S.toLowerCase();S!=F&&(Xc(this,S),Kr(this,F,x))},d)),d.j=y}function Aa(d,y){const x=new xa;if(f.Image){const S=new Image;S.onload=_(sa,x,"TestLoadImage: loaded",!0,y,S),S.onerror=_(sa,x,"TestLoadImage: error",!1,y,S),S.onabort=_(sa,x,"TestLoadImage: abort",!1,y,S),S.ontimeout=_(sa,x,"TestLoadImage: timeout",!1,y,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else y(!1)}function gl(d,y){const x=new xa,S=new AbortController,F=setTimeout(()=>{S.abort(),sa(x,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:S.signal}).then(J=>{clearTimeout(F),J.ok?sa(x,"TestPingServer: ok",!0,y):sa(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),sa(x,"TestPingServer: error",!1,y)})}function sa(d,y,x,S,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),S(x)}catch{}}function ns(){this.g=new pt}function Qa(d){this.i=d.Sb||null,this.h=d.ab||!1}E(Qa,Lt),Qa.prototype.g=function(){return new ir(this.i,this.h)};function ir(d,y){Xe.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(ir,Xe),i=ir.prototype,i.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,wa(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||f).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,as(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,wa(this)),this.g&&(this.readyState=3,wa(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Yr(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Yr(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?as(this):wa(this),this.readyState==3&&Yr(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,as(this))},i.Na=function(d){this.g&&(this.response=d,as(this))},i.ga=function(){this.g&&as(this)};function as(d){d.readyState=4,d.l=null,d.j=null,d.B=null,wa(d)}i.setRequestHeader=function(d,y){this.A.append(d,y)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=y.next();return d.join(`\r
`)};function wa(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ir.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ra(d){let y="";return Pe(d,function(x,S){y+=S,y+=":",y+=x,y+=`\r
`}),y}function sr(d,y,x){e:{for(S in x){var S=!1;break e}S=!0}S||(x=ra(x),typeof d=="string"?x!=null&&yi(x):gt(d,y,x))}function vt(d){Xe.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(vt,Xe);var Ya=/^https?$/i,bl=["POST","PUT"];i=vt.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,y,x,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rl.g(),this.g.onreadystatechange=N(b(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(J){rr(this,J);return}if(d=x||"",x=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var F in S)x.set(F,S[F]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const J of S.keys())x.set(J,S.get(J));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(x.keys()).find(J=>J.toLowerCase()=="content-type"),F=f.FormData&&d instanceof f.FormData,!(Array.prototype.indexOf.call(bl,y,void 0)>=0)||S||F||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,me]of x)this.g.setRequestHeader(J,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(J){rr(this,J)}};function rr(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,yl(d),vi(d)}function yl(d){d.A||(d.A=!0,Rt(d,"complete"),Rt(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Rt(this,"complete"),Rt(this,"abort"),vi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vi(this,!0)),vt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?or(this):this.Xa())},i.Xa=function(){or(this)};function or(d){if(d.h&&typeof c<"u"){if(d.v&&Sa(d)==4)setTimeout(d.Ca.bind(d),0);else if(Rt(d,"readystatechange"),Sa(d)==4){d.h=!1;try{const J=d.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var S;if(S=J===0){let me=String(d.D).match(Kc)[1]||null;!me&&f.self&&f.self.location&&(me=f.self.location.protocol.slice(0,-1)),S=!Ya.test(me?me.toLowerCase():"")}x=S}if(x)Rt(d,"complete"),Rt(d,"success");else{d.o=6;try{var F=Sa(d)>2?d.g.statusText:""}catch{F=""}d.l=F+" ["+d.ca()+"]",yl(d)}}finally{vi(d)}}}}function vi(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const x=d.g;d.g=null,y||Rt(d,"ready");try{x.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Sa(d){return d.g?d.g.readyState:0}i.ca=function(){try{return Sa(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),he(y)}};function mn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function xi(d){const y={};d=(d.g&&Sa(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(T(d[S]))continue;var x=Fc(d[S]);const F=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const J=y[F]||[];y[F]=J,J.push(x)}He(y,function(S){return S.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xa(d,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||y}function is(d){this.za=0,this.i=[],this.j=new xa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xa("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xa("baseRetryDelayMs",5e3,d),this.Za=Xa("retryDelaySeedMs",1e4,d),this.Ta=Xa("forwardChannelMaxRetries",2,d),this.va=Xa("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new ol(d&&d.concurrentRequestLimit),this.Ba=new ns,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=is.prototype,i.ka=8,i.I=1,i.connect=function(d,y,x,S){Jt(0),this.W=d,this.H=y||{},x&&S!==void 0&&(this.H.OSID=x,this.H.OAID=S),this.F=this.X,this.J=iu(this,null,this.W),Ja(this)};function vl(d){if(Xr(d),d.I==3){var y=d.V++,x=en(d.J);if(gt(x,"SID",d.M),gt(x,"RID",y),gt(x,"TYPE","terminate"),lr(d,x),y=new _a(d,d.j,y),y.M=2,y.A=nr(en(x)),x=!1,f.navigator&&f.navigator.sendBeacon)try{x=f.navigator.sendBeacon(y.A.toString(),"")}catch{}!x&&f.Image&&(new Image().src=y.A,x=!0),x||(y.g=su(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ha(y)}au(d)}function ss(d){d.g&&(_l(d),d.g.cancel(),d.g=null)}function Xr(d){ss(d),d.v&&(f.clearTimeout(d.v),d.v=null),Wr(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&f.clearTimeout(d.m),d.m=null)}function Ja(d){if(!ll(d.h)&&!d.m){d.m=!0;var y=d.Ea;ge||C(),fe||(ge(),fe=!0),O.add(y,d),d.D=0}}function Jr(d,y){return Ga(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=La(b(d.Ea,d,y),nu(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const F=new _a(this,this.j,d);let J=this.o;if(this.U&&(J?(J=P(J),ue(J,this.U)):J=this.U),this.u!==null||this.R||(F.J=J,J=null),this.S)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var S=this.i[x];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=Wc(this,F,y),x=en(this.J),gt(x,"RID",d),gt(x,"CVER",22),this.G&&gt(x,"X-HTTP-Session-Id",this.G),lr(this,x),J&&(this.R?y="headers="+yi(ra(J))+"&"+y:this.u&&sr(x,this.u,J)),cl(this.h,F),this.Ra&&gt(x,"TYPE","init"),this.S?(gt(x,"$req",y),gt(x,"SID","null"),F.U=!0,Ba(F,x,null)):Ba(F,x,y),this.I=2}}else this.I==3&&(d?xl(this,d):this.i.length==0||ll(this.h)||xl(this))};function xl(d,y){var x;y?x=y.l:x=d.V++;const S=en(d.J);gt(S,"SID",d.M),gt(S,"RID",x),gt(S,"AID",d.K),lr(d,S),d.u&&d.o&&sr(S,d.u,d.o),x=new _a(d,d.j,x,d.D+1),d.u===null&&(x.J=d.o),y&&(d.i=y.G.concat(d.i)),y=Wc(d,x,1e3),x.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),cl(d.h,x),Ba(x,S,y)}function lr(d,y){d.H&&Pe(d.H,function(x,S){gt(y,S,x)}),d.l&&Pe({},function(x,S){gt(y,S,x)})}function Wc(d,y,x){x=Math.min(d.i.length,x);const S=d.l?b(d.l.Ka,d.l,d):null;e:{var F=d.i;let Ge=-1;for(;;){const $t=["count="+x];Ge==-1?x>0?(Ge=F[0].g,$t.push("ofs="+Ge)):Ge=0:$t.push("ofs="+Ge);let ft=!0;for(let Mt=0;Mt<x;Mt++){var J=F[Mt].g;const oa=F[Mt].map;if(J-=Ge,J<0)Ge=Math.max(0,F[Mt].g-100),ft=!1;else try{J="req"+J+"_"||"";try{var me=oa instanceof Map?oa:Object.entries(oa);for(const[Za,Ta]of me){let Na=Ta;m(Ta)&&(Na=Dn(Ta)),$t.push(J+Za+"="+encodeURIComponent(Na))}}catch(Za){throw $t.push(J+"type="+encodeURIComponent("_badmap")),Za}}catch{S&&S(oa)}}if(ft){me=$t.join("&");break e}}me=void 0}return d=d.i.splice(0,x),y.G=d,me}function Zc(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;ge||C(),fe||(ge(),fe=!0),O.add(y,d),d.A=0}}function cr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=La(b(d.Da,d),nu(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,eu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=La(b(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Jt(10),ss(this),eu(this))};function _l(d){d.B!=null&&(f.clearTimeout(d.B),d.B=null)}function eu(d){d.g=new _a(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=en(d.na);gt(y,"RID","rpc"),gt(y,"SID",d.M),gt(y,"AID",d.K),gt(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&gt(y,"TO",d.ia),gt(y,"TYPE","xmlhttp"),lr(d,y),d.u&&d.o&&sr(y,d.u,d.o),d.O&&(d.g.H=d.O);var x=d.g;d=d.ba,x.M=1,x.A=nr(en(y)),x.u=null,x.R=!0,qr(x,d)}i.Va=function(){this.C!=null&&(this.C=null,ss(this),cr(this),Jt(19))};function Wr(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function tu(d,y){var x=null;if(d.g==y){Wr(d),_l(d),d.g=null;var S=2}else if($a(d.h,y))x=y.G,ul(d.h,y),S=1;else return;if(d.I!=0){if(y.o)if(S==1){x=y.u?y.u.length:0,y=Date.now()-y.F;var F=d.D;S=Pa(),Rt(S,new za(S,x)),Ja(d)}else Zc(d);else if(F=y.m,F==3||F==0&&y.X>0||!(S==1&&Jr(d,y)||S==2&&cr(d)))switch(x&&x.length>0&&(y=d.h,y.i=y.i.concat(x)),F){case 1:Wa(d,5);break;case 4:Wa(d,10);break;case 3:Wa(d,6);break;default:Wa(d,2)}}}function nu(d,y){let x=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(x*=2),x*y}function Wa(d,y){if(d.j.info("Error code "+y),y==2){var x=b(d.bb,d),S=d.Ua;const F=!S;S=new $n(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||fn(S,"https"),nr(S),F?Aa(S.toString(),x):gl(S.toString(),x)}else Jt(2);d.I=0,d.l&&d.l.pa(y),au(d),Xr(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function au(d){if(d.I=0,d.ja=[],d.l){const y=dl(d.h);(y.length!=0||d.i.length!=0)&&(H(d.ja,y),H(d.ja,d.i),d.h.i.length=0,z(d.i),d.i.length=0),d.l.oa()}}function iu(d,y,x){var S=x instanceof $n?en(x):new $n(x);if(S.g!="")y&&(S.g=y+"."+S.g),Wi(S,S.u);else{var F=f.location;S=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;const J=new $n(null);S&&fn(J,S),y&&(J.g=y),F&&Wi(J,F),x&&(J.h=x),S=J}return x=d.G,y=d.wa,x&&y&&gt(S,x,y),gt(S,"VER",d.ka),lr(d,S),S}function su(d,y,x){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new vt(new Qa({ab:x})):new vt(d.ma),y.Fa(d.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ru(){}i=ru.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function rs(){}rs.prototype.g=function(d,y){return new jn(d,y)};function jn(d,y){Xe.call(this),this.g=new is(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!T(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!T(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new _i(this)}E(jn,Xe),jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){vl(this.g)},jn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.v&&(x={},x.__data__=Dn(d),d=x);y.i.push(new Zt(y.Ya++,d)),y.I==3&&Ja(y)},jn.prototype.N=function(){this.g.l=null,delete this.j,vl(this.g),delete this.g,jn.Z.N.call(this)};function ou(d){dt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const x in y){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}E(ou,dt);function lu(){rt.call(this),this.status=1}E(lu,rt);function _i(d){this.g=d}E(_i,ru),_i.prototype.ra=function(){Rt(this.g,"a")},_i.prototype.qa=function(d){Rt(this.g,new ou(d))},_i.prototype.pa=function(d){Rt(this.g,new lu)},_i.prototype.oa=function(){Rt(this.g,"b")},rs.prototype.createWebChannel=rs.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,S1=function(){return new rs},w1=function(){return Pa()},A1=Fe,om={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},er.NO_ERROR=0,er.TIMEOUT=8,er.HTTP_ERROR=6,Td=er,sl.COMPLETE="complete",E1=sl,st.EventType=Ve,Ve.OPEN="a",Ve.CLOSE="b",Ve.ERROR="c",Ve.MESSAGE="d",Xe.prototype.listen=Xe.prototype.J,uc=st,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,_1=vt}).apply(typeof pd<"u"?pd:typeof self<"u"?self:typeof window<"u"?window:{});class Tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tn.UNAUTHENTICATED=new Tn(null),Tn.GOOGLE_CREDENTIALS=new Tn("google-credentials-uid"),Tn.FIRST_PARTY=new Tn("first-party-uid"),Tn.MOCK_USER=new Tn("mock-user");let Zo="12.8.0";function A2(i){Zo=i}const Or=new Pm("@firebase/firestore");function Io(){return Or.logLevel}function we(i,...e){if(Or.logLevel<=tt.DEBUG){const n=e.map(Ym);Or.debug(`Firestore (${Zo}): ${i}`,...n)}}function Ki(i,...e){if(Or.logLevel<=tt.ERROR){const n=e.map(Ym);Or.error(`Firestore (${Zo}): ${i}`,...n)}}function Ho(i,...e){if(Or.logLevel<=tt.WARN){const n=e.map(Ym);Or.warn(`Firestore (${Zo}): ${i}`,...n)}}function Ym(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function Me(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,T1(i,s,n)}function T1(i,e,n){let s=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ki(s),new Error(s)}function mt(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||T1(e,o,s)}function Be(i,e){return i}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends gi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Bi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class N1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class w2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Tn.UNAUTHENTICATED)))}shutdown(){}}class S2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class T2{constructor(e){this.t=e,this.currentUser=Tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){mt(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Bi,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Bi)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(mt(typeof s.accessToken=="string",31837,{l:s}),new N1(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new Tn(e)}}class N2{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Tn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class R2{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new N2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ex{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ea(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){mt(this.o===void 0,3512);const s=c=>{c.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,we("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new ex(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(mt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ex(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function I2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Xm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=I2(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<n&&(s+=e.charAt(o[c]%62))}return s}}function nt(i,e){return i<e?-1:i>e?1:0}function lm(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),c=e.charAt(s);if(o!==c)return qp(o)===qp(c)?nt(o,c):qp(o)?1:-1}return nt(i.length,e.length)}const j2=55296,k2=57343;function qp(i){const e=i.charCodeAt(0);return e>=j2&&e<=k2}function qo(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const tx="__name__";class si{constructor(e,n,s){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Me(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return si.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof si?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const c=si.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return nt(e.length,n.length)}static compareSegments(e,n){const s=si.isNumericId(e),o=si.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?si.extractNumericId(e).compare(si.extractNumericId(n)):lm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vs.fromString(e.substring(4,e.length-2))}}class Tt extends si{construct(e,n,s){return new Tt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ee(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new Tt(n)}static emptyPath(){return new Tt([])}}const O2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _n extends si{construct(e,n,s){return new _n(e,n,s)}static isValidIdentifier(e){return O2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_n.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tx}static keyField(){return new _n([tx])}static fromServerFormat(e){const n=[];let s="",o=0;const c=()=>{if(s.length===0)throw new Ee(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new Ee(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ee(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(c(),o++)}if(c(),f)throw new Ee(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _n(n)}static emptyPath(){return new _n([])}}class ke{constructor(e){this.path=e}static fromPath(e){return new ke(Tt.fromString(e))}static fromName(e){return new ke(Tt.fromString(e).popFirst(5))}static empty(){return new ke(Tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new Tt(e.slice()))}}function R1(i,e,n){if(!n)throw new Ee(ie.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function D2(i,e,n,s){if(e===!0&&s===!0)throw new Ee(ie.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function nx(i){if(!ke.isDocumentKey(i))throw new Ee(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ax(i){if(ke.isDocumentKey(i))throw new Ee(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function C1(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function cf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Me(12329,{type:typeof i})}function Fn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ee(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cf(i);throw new Ee(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function ln(i,e){const n={typeString:i};return e&&(n.value=e),n}function Vc(i,e){if(!C1(i))throw new Ee(ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const f=i[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new Ee(ie.INVALID_ARGUMENT,n);return!0}const ix=-62135596800,sx=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*sx);return new Dt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ix)throw new Ee(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sx}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vc(e,Dt._jsonSchema))return new Dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ix;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dt._jsonSchemaVersion="firestore/timestamp/1.0",Dt._jsonSchema={type:ln("string",Dt._jsonSchemaVersion),seconds:ln("number"),nanoseconds:ln("number")};class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new Dt(0,0))}static max(){return new ze(new Dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ac=-1;function M2(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=ze.fromTimestamp(s===1e9?new Dt(n+1,0):new Dt(n,s));return new Bs(o,ke.empty(),e)}function P2(i){return new Bs(i.readTime,i.key,Ac)}class Bs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Bs(ze.min(),ke.empty(),Ac)}static max(){return new Bs(ze.max(),ke.empty(),Ac)}}function V2(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ke.comparator(i.documentKey,e.documentKey),n!==0?n:nt(i.largestBatchId,e.largestBatchId))}const z2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class L2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function el(i){if(i.code!==ie.FAILED_PRECONDITION||i.message!==z2)throw i;we("LocalStore","Unexpectedly lost primary lease")}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):re.reject(n)}static resolve(e){return new re(((n,s)=>{n(e)}))}static reject(e){return new re(((n,s)=>{s(e)}))}static waitFor(e){return new re(((n,s)=>{let o=0,c=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++c,f&&c===o&&n()}),(g=>s(g)))})),f=!0,c===o&&n()}))}static or(e){let n=re.resolve(!1);for(const s of e)n=n.next((o=>o?re.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,c)=>{s.push(n.call(this,o,c))})),this.waitFor(s)}static mapArray(e,n){return new re(((s,o)=>{const c=e.length,f=new Array(c);let m=0;for(let g=0;g<c;g++){const b=g;n(e[b]).next((_=>{f[b]=_,++m,m===c&&s(f)}),(_=>o(_)))}}))}static doWhile(e,n){return new re(((s,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):s()};c()}))}}function U2(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tl(i){return i.name==="IndexedDbTransactionError"}class uf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}uf.ce=-1;const Jm=-1;function df(i){return i==null}function Bd(i){return i===0&&1/i==-1/0}function B2(i){return typeof i=="number"&&Number.isInteger(i)&&!Bd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const I1="";function H2(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=rx(e)),e=q2(i.get(n),e);return rx(e)}function q2(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case I1:n+="";break;default:n+=c}}return n}function rx(i){return i+I1+""}function ox(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ys(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function j1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Ut{constructor(e,n){this.comparator=e,this.root=n||xn.EMPTY}insert(e,n){return new Ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xn.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xn{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??xn.RED,this.left=o??xn.EMPTY,this.right=c??xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,c){return new xn(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return xn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return xn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}xn.EMPTY=null,xn.RED=!0,xn.BLACK=!1;xn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,s,o,c){return this}insert(e,n,s){return new xn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class un{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lx(this.data.getIterator())}getIteratorFrom(e){return new lx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new un(this.comparator);return n.data=e,n}}class lx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ta{constructor(e){this.fields=e,e.sort(_n.comparator)}static empty(){return new ta([])}unionWith(e){let n=new un(_n.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new ta(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class k1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class An{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new k1("Invalid base64 string: "+c):c}})(e);return new An(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let f=0;f<o.length;++f)c+=String.fromCharCode(o[f]);return c})(e);return new An(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}An.EMPTY_BYTE_STRING=new An("");const F2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hs(i){if(mt(!!i,39018),typeof i=="string"){let e=0;const n=F2.exec(i);if(mt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Yt(i.seconds),nanos:Yt(i.nanos)}}function Yt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function qs(i){return typeof i=="string"?An.fromBase64String(i):An.fromUint8Array(i)}const O1="server_timestamp",D1="__type__",M1="__previous_value__",P1="__local_write_time__";function Wm(i){return(i?.mapValue?.fields||{})[D1]?.stringValue===O1}function ff(i){const e=i.mapValue.fields[M1];return Wm(e)?ff(e):e}function wc(i){const e=Hs(i.mapValue.fields[P1].timestampValue);return new Dt(e.seconds,e.nanos)}class G2{constructor(e,n,s,o,c,f,m,g,b,_,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=b,this.isUsingEmulator=_,this.apiKey=E}}const Hd="(default)";class Sc{constructor(e,n){this.projectId=e,this.database=n||Hd}static empty(){return new Sc("","")}get isDefaultDatabase(){return this.database===Hd}isEqual(e){return e instanceof Sc&&e.projectId===this.projectId&&e.database===this.database}}function $2(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ee(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sc(i.options.projectId,e)}const V1="__type__",K2="__max__",gd={mapValue:{}},z1="__vector__",qd="value";function Fs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Wm(i)?4:Y2(i)?9007199254740991:Q2(i)?10:11:Me(28295,{value:i})}function hi(i,e){if(i===e)return!0;const n=Fs(i);if(n!==Fs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return wc(i).isEqual(wc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const f=Hs(o.timestampValue),m=Hs(c.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return qs(o.bytesValue).isEqual(qs(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return Yt(o.geoPointValue.latitude)===Yt(c.geoPointValue.latitude)&&Yt(o.geoPointValue.longitude)===Yt(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Yt(o.integerValue)===Yt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const f=Yt(o.doubleValue),m=Yt(c.doubleValue);return f===m?Bd(f)===Bd(m):isNaN(f)&&isNaN(m)}return!1})(i,e);case 9:return qo(i.arrayValue.values||[],e.arrayValue.values||[],hi);case 10:case 11:return(function(o,c){const f=o.mapValue.fields||{},m=c.mapValue.fields||{};if(ox(f)!==ox(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!hi(f[g],m[g])))return!1;return!0})(i,e);default:return Me(52216,{left:i})}}function Tc(i,e){return(i.values||[]).find((n=>hi(n,e)))!==void 0}function Fo(i,e){if(i===e)return 0;const n=Fs(i),s=Fs(e);if(n!==s)return nt(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return nt(i.booleanValue,e.booleanValue);case 2:return(function(c,f){const m=Yt(c.integerValue||c.doubleValue),g=Yt(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return cx(i.timestampValue,e.timestampValue);case 4:return cx(wc(i),wc(e));case 5:return lm(i.stringValue,e.stringValue);case 6:return(function(c,f){const m=qs(c),g=qs(f);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(c,f){const m=c.split("/"),g=f.split("/");for(let b=0;b<m.length&&b<g.length;b++){const _=nt(m[b],g[b]);if(_!==0)return _}return nt(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,f){const m=nt(Yt(c.latitude),Yt(f.latitude));return m!==0?m:nt(Yt(c.longitude),Yt(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return ux(i.arrayValue,e.arrayValue);case 10:return(function(c,f){const m=c.fields||{},g=f.fields||{},b=m[qd]?.arrayValue,_=g[qd]?.arrayValue,E=nt(b?.values?.length||0,_?.values?.length||0);return E!==0?E:ux(b,_)})(i.mapValue,e.mapValue);case 11:return(function(c,f){if(c===gd.mapValue&&f===gd.mapValue)return 0;if(c===gd.mapValue)return 1;if(f===gd.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),b=f.fields||{},_=Object.keys(b);g.sort(),_.sort();for(let E=0;E<g.length&&E<_.length;++E){const N=lm(g[E],_[E]);if(N!==0)return N;const z=Fo(m[g[E]],b[_[E]]);if(z!==0)return z}return nt(g.length,_.length)})(i.mapValue,e.mapValue);default:throw Me(23264,{he:n})}}function cx(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return nt(i,e);const n=Hs(i),s=Hs(e),o=nt(n.seconds,s.seconds);return o!==0?o:nt(n.nanos,s.nanos)}function ux(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const c=Fo(n[o],s[o]);if(c)return c}return nt(n.length,s.length)}function Go(i){return cm(i)}function cm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=Hs(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return qs(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return ke.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const c of n.values||[])o?o=!1:s+=",",s+=cm(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const f of s)c?c=!1:o+=",",o+=`${f}:${cm(n.fields[f])}`;return o+"}"})(i.mapValue):Me(61005,{value:i})}function Nd(i){switch(Fs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ff(i);return e?16+Nd(e):16;case 5:return 2*i.stringValue.length;case 6:return qs(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+Nd(c)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Ys(s.fields,((c,f)=>{o+=c.length+Nd(f)})),o})(i.mapValue);default:throw Me(13486,{value:i})}}function dx(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function um(i){return!!i&&"integerValue"in i}function Zm(i){return!!i&&"arrayValue"in i}function fx(i){return!!i&&"nullValue"in i}function hx(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Rd(i){return!!i&&"mapValue"in i}function Q2(i){return(i?.mapValue?.fields||{})[V1]?.stringValue===z1}function gc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Ys(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=gc(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gc(i.arrayValue.values[n]);return e}return{...i}}function Y2(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===K2}class qn{constructor(e){this.value=e}static empty(){return new qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Rd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gc(n)}setAll(e){let n=_n.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=gc(f):o.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,o)}delete(e){const n=this.field(e.popLast());Rd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Rd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Ys(n,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new qn(gc(this.value))}}function L1(i){const e=[];return Ys(i.fields,((n,s)=>{const o=new _n([n]);if(Rd(s)){const c=L1(s.mapValue).fields;if(c.length===0)e.push(o);else for(const f of c)e.push(o.child(f))}else e.push(o)})),new ta(e)}class Nn{constructor(e,n,s,o,c,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=c,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Nn(e,0,ze.min(),ze.min(),ze.min(),qn.empty(),0)}static newFoundDocument(e,n,s,o){return new Nn(e,1,n,ze.min(),s,o,0)}static newNoDocument(e,n){return new Nn(e,2,n,ze.min(),ze.min(),qn.empty(),0)}static newUnknownDocument(e,n){return new Nn(e,3,n,ze.min(),ze.min(),qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fd{constructor(e,n){this.position=e,this.inclusive=n}}function px(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const c=e[o],f=i.position[o];if(c.field.isKeyField()?s=ke.comparator(ke.fromName(f.referenceValue),n.key):s=Fo(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function mx(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!hi(i.position[n],e.position[n]))return!1;return!0}class Nc{constructor(e,n="asc"){this.field=e,this.dir=n}}function X2(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class U1{}class on extends U1{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new W2(e,n,s):n==="array-contains"?new tI(e,s):n==="in"?new nI(e,s):n==="not-in"?new aI(e,s):n==="array-contains-any"?new iI(e,s):new on(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new Z2(e,s):new eI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fo(n,this.value)):n!==null&&Fs(this.value)===Fs(n)&&this.matchesComparison(Fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ma extends U1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ma(e,n)}matches(e){return B1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function B1(i){return i.op==="and"}function H1(i){return J2(i)&&B1(i)}function J2(i){for(const e of i.filters)if(e instanceof Ma)return!1;return!0}function dm(i){if(i instanceof on)return i.field.canonicalString()+i.op.toString()+Go(i.value);if(H1(i))return i.filters.map((e=>dm(e))).join(",");{const e=i.filters.map((n=>dm(n))).join(",");return`${i.op}(${e})`}}function q1(i,e){return i instanceof on?(function(s,o){return o instanceof on&&s.op===o.op&&s.field.isEqual(o.field)&&hi(s.value,o.value)})(i,e):i instanceof Ma?(function(s,o){return o instanceof Ma&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,f,m)=>c&&q1(f,o.filters[m])),!0):!1})(i,e):void Me(19439)}function F1(i){return i instanceof on?(function(n){return`${n.field.canonicalString()} ${n.op} ${Go(n.value)}`})(i):i instanceof Ma?(function(n){return n.op.toString()+" {"+n.getFilters().map(F1).join(" ,")+"}"})(i):"Filter"}class W2 extends on{constructor(e,n,s){super(e,n,s),this.key=ke.fromName(s.referenceValue)}matches(e){const n=ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class Z2 extends on{constructor(e,n){super(e,"in",n),this.keys=G1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class eI extends on{constructor(e,n){super(e,"not-in",n),this.keys=G1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function G1(i,e){return(e.arrayValue?.values||[]).map((n=>ke.fromName(n.referenceValue)))}class tI extends on{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zm(n)&&Tc(n.arrayValue,this.value)}}class nI extends on{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Tc(this.value.arrayValue,n)}}class aI extends on{constructor(e,n){super(e,"not-in",n)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Tc(this.value.arrayValue,n)}}class iI extends on{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Tc(this.value.arrayValue,s)))}}class sI{constructor(e,n=null,s=[],o=[],c=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=f,this.endAt=m,this.Te=null}}function gx(i,e=null,n=[],s=[],o=null,c=null,f=null){return new sI(i,e,n,s,o,c,f)}function eg(i){const e=Be(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>dm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),df(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Go(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Go(s))).join(",")),e.Te=n}return e.Te}function tg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!X2(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!q1(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!mx(i.startAt,e.startAt)&&mx(i.endAt,e.endAt)}function fm(i){return ke.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class nl{constructor(e,n=null,s=[],o=[],c=null,f="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=f,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function rI(i,e,n,s,o,c,f,m){return new nl(i,e,n,s,o,c,f,m)}function hf(i){return new nl(i)}function bx(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function oI(i){return ke.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function $1(i){return i.collectionGroup!==null}function bc(i){const e=Be(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new un(_n.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((b=>{b.isInequality()&&(m=m.add(b.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Nc(c,s))})),n.has(_n.keyField().canonicalString())||e.Ie.push(new Nc(_n.keyField(),s))}return e.Ie}function ci(i){const e=Be(i);return e.Ee||(e.Ee=lI(e,bc(i))),e.Ee}function lI(i,e){if(i.limitType==="F")return gx(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Nc(o.field,c)}));const n=i.endAt?new Fd(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Fd(i.startAt.position,i.startAt.inclusive):null;return gx(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function hm(i,e){const n=i.filters.concat([e]);return new nl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function cI(i,e){const n=i.explicitOrderBy.concat([e]);return new nl(i.path,i.collectionGroup,n,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function pm(i,e,n){return new nl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function pf(i,e){return tg(ci(i),ci(e))&&i.limitType===e.limitType}function K1(i){return`${eg(ci(i))}|lt:${i.limitType}`}function jo(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>F1(o))).join(", ")}]`),df(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Go(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Go(o))).join(",")),`Target(${s})`})(ci(i))}; limitType=${i.limitType})`}function mf(i,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ke.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,o){for(const c of bc(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,g){const b=px(f,m,g);return f.inclusive?b<=0:b<0})(s.startAt,bc(s),o)||s.endAt&&!(function(f,m,g){const b=px(f,m,g);return f.inclusive?b>=0:b>0})(s.endAt,bc(s),o))})(i,e)}function uI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Q1(i){return(e,n)=>{let s=!1;for(const o of bc(i)){const c=dI(o,e,n);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function dI(i,e,n){const s=i.field.isKeyField()?ke.comparator(e.key,n.key):(function(c,f,m){const g=f.data.field(c),b=m.data.field(c);return g!==null&&b!==null?Fo(g,b):Me(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Me(19790,{direction:i.dir})}}class Ur{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ys(this.inner,((n,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return j1(this.inner)}size(){return this.innerSize}}const fI=new Ut(ke.comparator);function Qi(){return fI}const Y1=new Ut(ke.comparator);function dc(...i){let e=Y1;for(const n of i)e=e.insert(n.key,n);return e}function X1(i){let e=Y1;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Nr(){return yc()}function J1(){return yc()}function yc(){return new Ur((i=>i.toString()),((i,e)=>i.isEqual(e)))}const hI=new Ut(ke.comparator),pI=new un(ke.comparator);function at(...i){let e=pI;for(const n of i)e=e.add(n);return e}const mI=new un(nt);function gI(){return mI}function ng(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function W1(i){return{integerValue:""+i}}function bI(i,e){return B2(e)?W1(e):ng(i,e)}class gf{constructor(){this._=void 0}}function yI(i,e,n){return i instanceof Rc?(function(o,c){const f={fields:{[D1]:{stringValue:O1},[P1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Wm(c)&&(c=ff(c)),c&&(f.fields[M1]=c),{mapValue:f}})(n,e):i instanceof $o?eE(i,e):i instanceof Ko?tE(i,e):(function(o,c){const f=Z1(o,c),m=yx(f)+yx(o.Ae);return um(f)&&um(o.Ae)?W1(m):ng(o.serializer,m)})(i,e)}function vI(i,e,n){return i instanceof $o?eE(i,e):i instanceof Ko?tE(i,e):n}function Z1(i,e){return i instanceof Gd?(function(s){return um(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Rc extends gf{}class $o extends gf{constructor(e){super(),this.elements=e}}function eE(i,e){const n=nE(e);for(const s of i.elements)n.some((o=>hi(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Ko extends gf{constructor(e){super(),this.elements=e}}function tE(i,e){let n=nE(e);for(const s of i.elements)n=n.filter((o=>!hi(o,s)));return{arrayValue:{values:n}}}class Gd extends gf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function yx(i){return Yt(i.integerValue||i.doubleValue)}function nE(i){return Zm(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class ag{constructor(e,n){this.field=e,this.transform=n}}function xI(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof $o&&o instanceof $o||s instanceof Ko&&o instanceof Ko?qo(s.elements,o.elements,hi):s instanceof Gd&&o instanceof Gd?hi(s.Ae,o.Ae):s instanceof Rc&&o instanceof Rc})(i.transform,e.transform)}class _I{constructor(e,n){this.version=e,this.transformResults=n}}class ba{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ba}static exists(e){return new ba(void 0,e)}static updateTime(e){return new ba(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class bf{}function aE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new ig(i.key,ba.none()):new zc(i.key,i.data,ba.none());{const n=i.data,s=qn.empty();let o=new un(_n.comparator);for(let c of e.fields)if(!o.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),o=o.add(c)}return new Xs(i.key,s,new ta(o.toArray()),ba.none())}}function EI(i,e,n){i instanceof zc?(function(o,c,f){const m=o.value.clone(),g=xx(o.fieldTransforms,c,f.transformResults);m.setAll(g),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(i,e,n):i instanceof Xs?(function(o,c,f){if(!Cd(o.precondition,c))return void c.convertToUnknownDocument(f.version);const m=xx(o.fieldTransforms,c,f.transformResults),g=c.data;g.setAll(iE(o)),g.setAll(m),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(i,e,n):(function(o,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function vc(i,e,n,s){return i instanceof zc?(function(c,f,m,g){if(!Cd(c.precondition,f))return m;const b=c.value.clone(),_=_x(c.fieldTransforms,g,f);return b.setAll(_),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),null})(i,e,n,s):i instanceof Xs?(function(c,f,m,g){if(!Cd(c.precondition,f))return m;const b=_x(c.fieldTransforms,g,f),_=f.data;return _.setAll(iE(c)),_.setAll(b),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(i,e,n,s):(function(c,f,m){return Cd(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(i,e,n)}function AI(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),c=Z1(s.transform,o||null);c!=null&&(n===null&&(n=qn.empty()),n.set(s.field,c))}return n||null}function vx(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&qo(s,o,((c,f)=>xI(c,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class zc extends bf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Xs extends bf{constructor(e,n,s,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function iE(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function xx(i,e,n){const s=new Map;mt(i.length===n.length,32656,{Ve:n.length,de:i.length});for(let o=0;o<n.length;o++){const c=i[o],f=c.transform,m=e.data.field(c.field);s.set(c.field,vI(f,m,n[o]))}return s}function _x(i,e,n){const s=new Map;for(const o of i){const c=o.transform,f=n.data.field(o.field);s.set(o.field,yI(c,f,e))}return s}class ig extends bf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wI extends bf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class SI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&EI(c,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=vc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=vc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=J1();return this.mutations.forEach((o=>{const c=e.get(o.key),f=c.overlayedDocument;let m=this.applyToLocalView(f,c.mutatedFields);m=n.has(o.key)?null:m;const g=aE(f,m);g!==null&&s.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(ze.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),at())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,((n,s)=>vx(n,s)))&&qo(this.baseMutations,e.baseMutations,((n,s)=>vx(n,s)))}}class sg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){mt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return hI})();const c=e.mutations;for(let f=0;f<c.length;f++)o=o.insert(c[f].key,s[f].version);return new sg(e,n,s,o)}}class TI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class NI{constructor(e,n){this.count=e,this.unchangedNames=n}}var rn,lt;function RI(i){switch(i){case ie.OK:return Me(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Me(15467,{code:i})}}function sE(i){if(i===void 0)return Ki("GRPC error has no .code"),ie.UNKNOWN;switch(i){case rn.OK:return ie.OK;case rn.CANCELLED:return ie.CANCELLED;case rn.UNKNOWN:return ie.UNKNOWN;case rn.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case rn.INTERNAL:return ie.INTERNAL;case rn.UNAVAILABLE:return ie.UNAVAILABLE;case rn.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case rn.NOT_FOUND:return ie.NOT_FOUND;case rn.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case rn.ABORTED:return ie.ABORTED;case rn.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case rn.DATA_LOSS:return ie.DATA_LOSS;default:return Me(39323,{code:i})}}(lt=rn||(rn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";function CI(){return new TextEncoder}const II=new Vs([4294967295,4294967295],0);function Ex(i){const e=CI().encode(i),n=new x1;return n.update(e),new Uint8Array(n.digest())}function Ax(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Vs([n,s],0),new Vs([o,c],0)]}class rg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new fc(`Invalid padding: ${n}`);if(s<0)throw new fc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new fc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new fc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Vs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Vs.fromNumber(s)));return o.compare(II)===1&&(o=new Vs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Ex(e),[s,o]=Ax(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,o,c);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new rg(c,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=Ex(e),[s,o]=Ax(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,o,c);this.be(f)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class yf{constructor(e,n,s,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Lc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new yf(ze.min(),o,new Ut(nt),Qi(),at())}}class Lc{constructor(e,n,s,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Lc(s,n,at(),at(),at())}}class Id{constructor(e,n,s,o){this.Se=e,this.removedTargetIds=n,this.key=s,this.De=o}}class rE{constructor(e,n){this.targetId=e,this.Ce=n}}class oE{constructor(e,n,s=An.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class wx{constructor(){this.ve=0,this.Fe=Sx(),this.Me=An.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=at(),n=at(),s=at();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Me(38017,{changeType:c})}})),new Lc(this.Me,this.xe,e,n,s)}Ke(){this.Oe=!1,this.Fe=Sx()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class jI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qi(),this.He=bd(),this.Je=bd(),this.Ze=new Ut(nt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Me(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(fm(c))if(s===0){const f=new ke(c.path);this.et(n,f,Nn.newNoDocument(f,ze.min()))}else mt(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),g=m?this.ct(m,e,f):1;if(g!==0){this.it(n);const b=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,b)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=n;let f,m;try{f=qs(s).toUint8Array()}catch(g){if(g instanceof k1)return Ho("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new rg(f,o,c)}catch(g){return Ho(g instanceof fc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((c=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,f)=>{const m=this.ot(f);if(m){if(c.current&&fm(m.target)){const g=new ke(m.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,Nn.newNoDocument(g,e))}c.Be&&(n.set(f,c.ke()),c.Ke())}}));let s=at();this.Je.forEach(((c,f)=>{let m=!0;f.forEachWhile((g=>{const b=this.ot(g);return!b||b.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const o=new yf(e,n,this.Ze,this.je,s);return this.je=Qi(),this.He=bd(),this.Je=bd(),this.Ze=new Ut(nt),o}Ye(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,s),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new wx,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new un(nt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new un(nt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wx),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function bd(){return new Ut(ke.comparator)}function Sx(){return new Ut(ke.comparator)}const kI={asc:"ASCENDING",desc:"DESCENDING"},OI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DI={and:"AND",or:"OR"};class MI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mm(i,e){return i.useProto3Json||df(e)?e:{value:e}}function $d(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function PI(i,e){return $d(i,e.toTimestamp())}function ui(i){return mt(!!i,49232),ze.fromTimestamp((function(n){const s=Hs(n);return new Dt(s.seconds,s.nanos)})(i))}function og(i,e){return gm(i,e).canonicalString()}function gm(i,e){const n=(function(o){return new Tt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function cE(i){const e=Tt.fromString(i);return mt(pE(e),10190,{key:e.toString()}),e}function bm(i,e){return og(i.databaseId,e.path)}function Fp(i,e){const n=cE(e);if(n.get(1)!==i.databaseId.projectId)throw new Ee(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ee(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ke(dE(n))}function uE(i,e){return og(i.databaseId,e)}function VI(i){const e=cE(i);return e.length===4?Tt.emptyPath():dE(e)}function ym(i){return new Tt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function dE(i){return mt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Tx(i,e,n){return{name:bm(i,e),fields:n.value.mapValue.fields}}function zI(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Me(39313,{state:b})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(b,_){return b.useProto3Json?(mt(_===void 0||typeof _=="string",58123),An.fromBase64String(_||"")):(mt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),An.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(b){const _=b.code===void 0?ie.UNKNOWN:sE(b.code);return new Ee(_,b.message||"")})(f);n=new oE(s,o,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Fp(i,s.document.name),c=ui(s.document.updateTime),f=s.document.createTime?ui(s.document.createTime):ze.min(),m=new qn({mapValue:{fields:s.document.fields}}),g=Nn.newFoundDocument(o,c,f,m),b=s.targetIds||[],_=s.removedTargetIds||[];n=new Id(b,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Fp(i,s.document),c=s.readTime?ui(s.readTime):ze.min(),f=Nn.newNoDocument(o,c),m=s.removedTargetIds||[];n=new Id([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Fp(i,s.document),c=s.removedTargetIds||[];n=new Id([],c,o,null)}else{if(!("filter"in e))return Me(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,f=new NI(o,c),m=s.targetId;n=new rE(m,f)}}return n}function LI(i,e){let n;if(e instanceof zc)n={update:Tx(i,e.key,e.value)};else if(e instanceof ig)n={delete:bm(i,e.key)};else if(e instanceof Xs)n={update:Tx(i,e.key,e.data),updateMask:QI(e.fieldMask)};else{if(!(e instanceof wI))return Me(16599,{dt:e.type});n={verify:bm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,f){const m=f.transform;if(m instanceof Rc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof $o)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ko)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Gd)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Me(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:PI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Me(27497)})(i,e.precondition)),n}function UI(i,e){return i&&i.length>0?(mt(e!==void 0,14353),i.map((n=>(function(o,c){let f=o.updateTime?ui(o.updateTime):ui(c);return f.isEqual(ze.min())&&(f=ui(c)),new _I(f,o.transformResults||[])})(n,e)))):[]}function BI(i,e){return{documents:[uE(i,e.path)]}}function HI(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=uE(i,o);const c=(function(b){if(b.length!==0)return hE(Ma.create(b,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(b){if(b.length!==0)return b.map((_=>(function(N){return{field:ko(N.field),direction:GI(N.dir)}})(_)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=mm(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(e.endAt)),{ft:n,parent:o}}function qI(i){let e=VI(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){mt(s===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let c=[];n.where&&(c=(function(E){const N=fE(E);return N instanceof Ma&&H1(N)?N.getFilters():[N]})(n.where));let f=[];n.orderBy&&(f=(function(E){return E.map((N=>(function(H){return new Nc(Oo(H.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(N)))})(n.orderBy));let m=null;n.limit&&(m=(function(E){let N;return N=typeof E=="object"?E.value:E,df(N)?null:N})(n.limit));let g=null;n.startAt&&(g=(function(E){const N=!!E.before,z=E.values||[];return new Fd(z,N)})(n.startAt));let b=null;return n.endAt&&(b=(function(E){const N=!E.before,z=E.values||[];return new Fd(z,N)})(n.endAt)),rI(e,o,f,c,m,"F",g,b)}function FI(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fE(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Oo(n.unaryFilter.field);return on.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Oo(n.unaryFilter.field);return on.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Oo(n.unaryFilter.field);return on.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Oo(n.unaryFilter.field);return on.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}})(i):i.fieldFilter!==void 0?(function(n){return on.create(Oo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Ma.create(n.compositeFilter.filters.map((s=>fE(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Me(1026)}})(n.compositeFilter.op))})(i):Me(30097,{filter:i})}function GI(i){return kI[i]}function $I(i){return OI[i]}function KI(i){return DI[i]}function ko(i){return{fieldPath:i.canonicalString()}}function Oo(i){return _n.fromServerFormat(i.fieldPath)}function hE(i){return i instanceof on?(function(n){if(n.op==="=="){if(hx(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NAN"}};if(fx(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hx(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NOT_NAN"}};if(fx(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(n.field),op:$I(n.op),value:n.value}}})(i):i instanceof Ma?(function(n){const s=n.getFilters().map((o=>hE(o)));return s.length===1?s[0]:{compositeFilter:{op:KI(n.op),filters:s}}})(i):Me(54877,{filter:i})}function QI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function pE(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function mE(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class Ds{constructor(e,n,s,o,c=ze.min(),f=ze.min(),m=An.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class YI{constructor(e){this.yt=e}}function XI(i){const e=qI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?pm(e,e.limit,"L"):e}class JI{constructor(){this.Sn=new WI}addToCollectionParentIndex(e,n){return this.Sn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(Bs.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(Bs.min())}updateCollectionGroup(e,n,s){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class WI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new un(Tt.comparator),c=!o.has(s);return this.index[n]=o.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new un(Tt.comparator)).toArray()}}const Nx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gE=41943040;class Hn{static withCacheSize(e){return new Hn(e,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Hn.DEFAULT_COLLECTION_PERCENTILE=10,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hn.DEFAULT=new Hn(gE,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hn.DISABLED=new Hn(-1,0,0);class Qo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Qo(0)}static ar(){return new Qo(-1)}}const Rx="LruGarbageCollector",ZI=1048576;function Cx([i,e],[n,s]){const o=nt(i,n);return o===0?nt(e,s):o}class ej{constructor(e){this.Pr=e,this.buffer=new un(Cx),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Cx(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class tj{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){we(Rx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){tl(n)?we(Rx,"Ignoring IndexedDB error during garbage collection: ",n):await el(n)}await this.Ar(3e5)}))}}class nj{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return re.resolve(uf.ce);const s=new ej(n);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Nx)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Nx):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let s,o,c,f,m,g,b;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,f=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,m=Date.now(),this.removeTargets(e,s,n)))).next((E=>(c=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(b=Date.now(),Io()<=tt.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(b-g)+`ms
Total Duration: ${b-_}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:E}))))}}function aj(i,e){return new nj(i,e)}class ij{constructor(){this.changes=new Ur((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?re.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class sj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class rj{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&vc(s.mutation,o,ta.empty(),Dt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,at()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=at()){const o=Nr();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((c=>{let f=dc();return c.forEach(((m,g)=>{f=f.insert(m,g.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=Nr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,at())))}populateOverlays(e,n,s){const o=[];return s.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let c=Qi();const f=yc(),m=(function(){return yc()})();return n.forEach(((g,b)=>{const _=s.get(b.key);o.has(b.key)&&(_===void 0||_.mutation instanceof Xs)?c=c.insert(b.key,b):_!==void 0?(f.set(b.key,_.mutation.getFieldMask()),vc(_.mutation,b,_.mutation.getFieldMask(),Dt.now())):f.set(b.key,ta.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((b,_)=>f.set(b,_))),n.forEach(((b,_)=>m.set(b,new sj(_,f.get(b)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=yc();let o=new Ut(((f,m)=>f-m)),c=at();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((g=>{const b=n.get(g);if(b===null)return;let _=s.get(g)||ta.empty();_=m.applyToLocalView(b,_),s.set(g,_);const E=(o.get(m.batchId)||at()).add(g);o=o.insert(m.batchId,E)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),b=g.key,_=g.value,E=J1();_.forEach((N=>{if(!c.has(N)){const z=aE(n.get(N),s.get(N));z!==null&&E.set(N,z),c=c.add(N)}})),f.push(this.documentOverlayCache.saveOverlays(e,b,E))}return re.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return oI(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((c=>{const f=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-c.size):re.resolve(Nr());let m=Ac,g=c;return f.next((b=>re.forEach(b,((_,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),c.get(_)?re.resolve():this.remoteDocumentCache.getEntry(e,_).next((N=>{g=g.insert(_,N)}))))).next((()=>this.populateOverlays(e,b,c))).next((()=>this.computeViews(e,g,b,at()))).next((_=>({batchId:m,changes:X1(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ke(n)).next((s=>{let o=dc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const c=n.collectionGroup;let f=dc();return this.indexManager.getCollectionParents(e,c).next((m=>re.forEach(m,(g=>{const b=(function(E,N){return new nl(N,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,b,s,o).next((_=>{_.forEach(((E,N)=>{f=f.insert(E,N)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,o)))).next((f=>{c.forEach(((g,b)=>{const _=b.getKey();f.get(_)===null&&(f=f.insert(_,Nn.newInvalidDocument(_)))}));let m=dc();return f.forEach(((g,b)=>{const _=c.get(g);_!==void 0&&vc(_.mutation,b,ta.empty(),Dt.now()),mf(n,b)&&(m=m.insert(g,b))})),m}))}}class oj{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return re.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ui(o.createTime)}})(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:XI(o.bundledQuery),readTime:ui(o.readTime)}})(n)),re.resolve()}}class lj{constructor(){this.overlays=new Ut(ke.comparator),this.Lr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Nr();return re.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,c)=>{this.bt(e,n,c)})),re.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(s)),re.resolve()}getOverlaysForCollection(e,n,s){const o=Nr(),c=n.length+1,f=new ke(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,b=g.getKey();if(!n.isPrefixOf(b.path))break;b.path.length===c&&g.largestBatchId>s&&o.set(g.getKey(),g)}return re.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let c=new Ut(((b,_)=>b-_));const f=this.overlays.getIterator();for(;f.hasNext();){const b=f.getNext().value;if(b.getKey().getCollectionGroup()===n&&b.largestBatchId>s){let _=c.get(b.largestBatchId);_===null&&(_=Nr(),c=c.insert(b.largestBatchId,_)),_.set(b.getKey(),b)}}const m=Nr(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((b,_)=>m.set(b,_))),!(m.size()>=o)););return re.resolve(m)}bt(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new TI(n,s));let c=this.Lr.get(n);c===void 0&&(c=at(),this.Lr.set(n,c)),this.Lr.set(n,c.add(s.key))}}class cj{constructor(){this.sessionToken=An.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}class lg{constructor(){this.kr=new un(pn.Kr),this.qr=new un(pn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const s=new pn(e,n);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Wr(new pn(e,n))}Qr(e,n){e.forEach((s=>this.removeReference(s,n)))}Gr(e){const n=new ke(new Tt([])),s=new pn(n,e),o=new pn(n,e+1),c=[];return this.qr.forEachInRange([s,o],(f=>{this.Wr(f),c.push(f.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ke(new Tt([])),s=new pn(n,e),o=new pn(n,e+1);let c=at();return this.qr.forEachInRange([s,o],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new pn(e,0),s=this.kr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class pn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ke.comparator(e.key,n.key)||nt(e.Hr,n.Hr)}static Ur(e,n){return nt(e.Hr,n.Hr)||ke.comparator(e.key,n.key)}}class uj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new un(pn.Kr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new SI(c,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Jr=this.Jr.add(new pn(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(f)}lookupMutationBatch(e,n){return re.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Xr(s),c=o<0?0:o;return re.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Jm:this.Yn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new pn(n,0),o=new pn(n,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([s,o],(f=>{const m=this.Zr(f.Hr);c.push(m)})),re.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new un(nt);return n.forEach((o=>{const c=new pn(o,0),f=new pn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,f],(m=>{s=s.add(m.Hr)}))})),re.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let c=s;ke.isDocumentKey(c)||(c=c.child(""));const f=new pn(new ke(c),0);let m=new un(nt);return this.Jr.forEachWhile((g=>{const b=g.key.path;return!!s.isPrefixOf(b)&&(b.length===o&&(m=m.add(g.Hr)),!0)}),f),re.resolve(this.Yr(m))}Yr(e){const n=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){mt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return re.forEach(n.mutations,(o=>{const c=new pn(o.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,n){const s=new pn(n,0),o=this.Jr.firstAfterOrEqual(s);return re.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class dj{constructor(e){this.ti=e,this.docs=(function(){return new Ut(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),c=o?o.size:0,f=this.ti(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return re.resolve(s?s.document.mutableCopy():Nn.newInvalidDocument(n))}getEntries(e,n){let s=Qi();return n.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():Nn.newInvalidDocument(o))})),re.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let c=Qi();const f=n.path,m=new ke(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:b,value:{document:_}}=g.getNext();if(!f.isPrefixOf(b.path))break;b.path.length>f.length+1||V2(P2(_),s)<=0||(o.has(_.key)||mf(n,_))&&(c=c.insert(_.key,_.mutableCopy()))}return re.resolve(c)}getAllFromCollectionGroup(e,n,s,o){Me(9500)}ni(e,n){return re.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new fj(this)}getSize(e){return re.resolve(this.size)}}class fj extends ij{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),re.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class hj{constructor(e){this.persistence=e,this.ri=new Ur((n=>eg(n)),tg),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.ii=0,this.si=new lg,this.targetCount=0,this.oi=Qo._r()}forEachTarget(e,n){return this.ri.forEach(((s,o)=>n(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ii&&(this.ii=n),re.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Qo(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.lr(n),re.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,s){let o=0;const c=[];return this.ri.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.ri.delete(f),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),re.waitFor(c).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const s=this.ri.get(n)||null;return re.resolve(s)}addMatchingKeys(e,n,s){return this.si.$r(n,s),re.resolve()}removeMatchingKeys(e,n,s){this.si.Qr(n,s);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((f=>{c.push(o.markPotentiallyOrphaned(e,f))})),re.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const s=this.si.jr(n);return re.resolve(s)}containsKey(e,n){return re.resolve(this.si.containsKey(n))}}class bE{constructor(e,n){this._i={},this.overlays={},this.ai=new uf(0),this.ui=!1,this.ui=!0,this.ci=new cj,this.referenceDelegate=e(this),this.li=new hj(this),this.indexManager=new JI,this.remoteDocumentCache=(function(o){return new dj(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new YI(n),this.Pi=new oj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this._i[e.toKey()];return s||(s=new uj(n,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,s){we("MemoryPersistence","Starting transaction:",e);const o=new pj(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((c=>this.referenceDelegate.Ii(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ei(e,n){return re.or(Object.values(this._i).map((s=>()=>s.containsKey(e,n))))}}class pj extends L2{constructor(e){super(),this.currentSequenceNumber=e}}class cg{constructor(e){this.persistence=e,this.Ri=new lg,this.Ai=null}static Vi(e){return new cg(e)}get di(){if(this.Ai)return this.Ai;throw Me(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.di.delete(s.toString()),re.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.di.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.di.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,(s=>{const o=ke.fromPath(s);return this.mi(e,o).next((c=>{c||n.removeEntry(o,ze.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Kd{constructor(e,n){this.persistence=e,this.fi=new Ur((s=>H2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=aj(this,n)}static Vi(e,n){return new Kd(e,n)}Ti(){}Ii(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}pr(e){let n=0;return this.mr(e,(s=>{n++})).next((()=>n))}mr(e,n){return re.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((c=>c?re.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ni(e,(f=>this.wr(e,f,n).next((m=>{m||(s++,c.removeEntry(f,ze.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),re.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Nd(e.data.value)),n}wr(e,n,s){return re.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return re.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ug{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Ts=s,this.Is=o}static Es(e,n){let s=at(),o=at();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new ug(e,n.fromCache,s,o)}}class mj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class gj{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return qT()?8:U2(In())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const c={result:null};return this.gs(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ps(e,n,o,s).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new mj;return this.ys(e,n,f).next((m=>{if(c.result=m,this.As)return this.ws(e,n,f,m.size)}))})).next((()=>c.result))}ws(e,n,s,o){return s.documentReadCount<this.Vs?(Io()<=tt.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",jo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(Io()<=tt.DEBUG&&we("QueryEngine","Query:",jo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(Io()<=tt.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",jo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ci(n))):re.resolve())}gs(e,n){if(bx(n))return re.resolve(null);let s=ci(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=pm(n,null,"F"),s=ci(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const f=at(...c);return this.fs.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const b=this.bs(n,m);return this.Ss(n,b,f,g.readTime)?this.gs(e,pm(n,null,"F")):this.Ds(e,b,n,g)}))))})))))}ps(e,n,s,o){return bx(n)||o.isEqual(ze.min())?re.resolve(null):this.fs.getDocuments(e,s).next((c=>{const f=this.bs(n,c);return this.Ss(n,f,s,o)?re.resolve(null):(Io()<=tt.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),jo(n)),this.Ds(e,f,n,M2(o,Ac)).next((m=>m)))}))}bs(e,n){let s=new un(Q1(e));return n.forEach(((o,c)=>{mf(e,c)&&(s=s.add(c))})),s}Ss(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}ys(e,n,s){return Io()<=tt.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",jo(n)),this.fs.getDocumentsMatchingQuery(e,n,Bs.min(),s)}Ds(e,n,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}const dg="LocalStore",bj=3e8;class yj{constructor(e,n,s,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new Ut(nt),this.Fs=new Ur((c=>eg(c)),tg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rj(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function vj(i,e,n,s){return new yj(i,e,n,s)}async function yE(i,e){const n=Be(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,n.Os(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const f=[],m=[];let g=at();for(const b of o){f.push(b.batchId);for(const _ of b.mutations)g=g.add(_.key)}for(const b of c){m.push(b.batchId);for(const _ of b.mutations)g=g.add(_.key)}return n.localDocuments.getDocuments(s,g).next((b=>({Ns:b,removedBatchIds:f,addedBatchIds:m})))}))}))}function xj(i,e){const n=Be(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=n.xs.newChangeBuffer({trackRemovals:!0});return(function(m,g,b,_){const E=b.batch,N=E.keys();let z=re.resolve();return N.forEach((H=>{z=z.next((()=>_.getEntry(g,H))).next((U=>{const D=b.docVersions.get(H);mt(D!==null,48541),U.version.compareTo(D)<0&&(E.applyToRemoteDocument(U,b),U.isValidDocument()&&(U.setReadTime(b.commitVersion),_.addEntry(U)))}))})),z.next((()=>m.mutationQueue.removeMutationBatch(g,E)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=at();for(let b=0;b<m.mutationResults.length;++b)m.mutationResults[b].transformResults.length>0&&(g=g.add(m.batch.mutations[b].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function vE(i){const e=Be(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function _j(i,e){const n=Be(i),s=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const m=[];e.targetChanges.forEach(((_,E)=>{const N=o.get(E);if(!N)return;m.push(n.li.removeMatchingKeys(c,_.removedDocuments,E).next((()=>n.li.addMatchingKeys(c,_.addedDocuments,E))));let z=N.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?z=z.withResumeToken(An.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):_.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(_.resumeToken,s)),o=o.insert(E,z),(function(U,D,X){return U.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=bj?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(N,z,_)&&m.push(n.li.updateTargetData(c,z))}));let g=Qi(),b=at();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,_))})),m.push(Ej(c,f,e.documentUpdates).next((_=>{g=_.Bs,b=_.Ls}))),!s.isEqual(ze.min())){const _=n.li.getLastRemoteSnapshotVersion(c).next((E=>n.li.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(_)}return re.waitFor(m).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,b))).next((()=>g))})).then((c=>(n.vs=o,c)))}function Ej(i,e,n){let s=at(),o=at();return n.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let f=Qi();return n.forEach(((m,g)=>{const b=c.get(m);g.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(ze.min())?(e.removeEntry(m,g.readTime),f=f.insert(m,g)):!b.isValidDocument()||g.version.compareTo(b.version)>0||g.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(g),f=f.insert(m,g)):we(dg,"Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",g.version)})),{Bs:f,Ls:o}}))}function Aj(i,e){const n=Be(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Jm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function wj(i,e){const n=Be(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.li.getTargetData(s,e).next((c=>c?(o=c,re.resolve(o)):n.li.allocateTargetId(s).next((f=>(o=new Ds(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(s.targetId,s),n.Fs.set(e,s.targetId)),s}))}async function vm(i,e,n){const s=Be(i),o=s.vs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!tl(f))throw f;we(dg,`Failed to update sequence numbers for target ${e}: ${f}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function Ix(i,e,n){const s=Be(i);let o=ze.min(),c=at();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,b,_){const E=Be(g),N=E.Fs.get(_);return N!==void 0?re.resolve(E.vs.get(N)):E.li.getTargetData(b,_)})(s,f,ci(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(f,m.targetId).next((g=>{c=g}))})).next((()=>s.Cs.getDocumentsMatchingQuery(f,e,n?o:ze.min(),n?c:at()))).next((m=>(Sj(s,uI(e),m),{documents:m,ks:c})))))}function Sj(i,e,n){let s=i.Ms.get(e)||ze.min();n.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.Ms.set(e,s)}class jx{constructor(){this.activeTargetIds=gI()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tj{constructor(){this.vo=new jx,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,s){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new jx,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Nj{Mo(e){}shutdown(){}}const kx="ConnectivityMonitor";class Ox{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){we(kx,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){we(kx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let yd=null;function xm(){return yd===null?yd=(function(){return 268435456+Math.round(2147483648*Math.random())})():yd++,"0x"+yd.toString(16)}const Gp="RestConnection",Rj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Cj{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===Hd?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,n,s,o,c){const f=xm(),m=this.Qo(e,n.toUriEncodedString());we(Gp,`Sending RPC '${e}' ${f}:`,m,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,c);const{host:b}=new URL(m),_=Vr(b);return this.zo(e,m,g,s,_).then((E=>(we(Gp,`Received RPC '${e}' ${f}: `,E),E)),(E=>{throw Ho(Gp,`RPC '${e}' ${f} failed with error: `,E,"url: ",m,"request:",s),E}))}jo(e,n,s,o,c,f){return this.Wo(e,n,s,o,c)}Go(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}Qo(e,n){const s=Rj[e];let o=`${this.qo}/v1/${n}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class Ij{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Sn="WebChannelConnection",oc=(i,e,n)=>{i.listen(e,(s=>{try{n(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class zo extends Cj{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!zo.c_){const e=w1();oc(e,A1.STAT_EVENT,(n=>{n.stat===om.PROXY?we(Sn,"STAT_EVENT: detected buffering proxy"):n.stat===om.NOPROXY&&we(Sn,"STAT_EVENT: detected no buffering proxy")})),zo.c_=!0}}zo(e,n,s,o,c){const f=xm();return new Promise(((m,g)=>{const b=new _1;b.setWithCredentials(!0),b.listenOnce(E1.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case Td.NO_ERROR:const E=b.getResponseJson();we(Sn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(E)),m(E);break;case Td.TIMEOUT:we(Sn,`RPC '${e}' ${f} timed out`),g(new Ee(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Td.HTTP_ERROR:const N=b.getStatus();if(we(Sn,`RPC '${e}' ${f} failed with status:`,N,"response text:",b.getResponseText()),N>0){let z=b.getResponseJson();Array.isArray(z)&&(z=z[0]);const H=z?.error;if(H&&H.status&&H.message){const U=(function(X){const Y=X.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(Y)>=0?Y:ie.UNKNOWN})(H.status);g(new Ee(U,H.message))}else g(new Ee(ie.UNKNOWN,"Server responded with status "+b.getStatus()))}else g(new Ee(ie.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:e,streamId:f,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{we(Sn,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(o);we(Sn,`RPC '${e}' ${f} sending request:`,o),b.send(n,"POST",_,s,15)}))}T_(e,n,s){const o=xm(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,n,s),m.encodeInitMessageHeaders=!0;const b=c.join("");we(Sn,`Creating RPC '${e}' stream ${o}: ${b}`,m);const _=f.createWebChannel(b,m);this.I_(_);let E=!1,N=!1;const z=new Ij({Ho:H=>{N?we(Sn,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(E||(we(Sn,`Opening RPC '${e}' stream ${o} transport.`),_.open(),E=!0),we(Sn,`RPC '${e}' stream ${o} sending:`,H),_.send(H))},Jo:()=>_.close()});return oc(_,uc.EventType.OPEN,(()=>{N||(we(Sn,`RPC '${e}' stream ${o} transport opened.`),z.i_())})),oc(_,uc.EventType.CLOSE,(()=>{N||(N=!0,we(Sn,`RPC '${e}' stream ${o} transport closed`),z.o_(),this.E_(_))})),oc(_,uc.EventType.ERROR,(H=>{N||(N=!0,Ho(Sn,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),z.o_(new Ee(ie.UNAVAILABLE,"The operation could not be completed")))})),oc(_,uc.EventType.MESSAGE,(H=>{if(!N){const U=H.data[0];mt(!!U,16349);const D=U,X=D?.error||D[0]?.error;if(X){we(Sn,`RPC '${e}' stream ${o} received error:`,X);const Y=X.status;let ee=(function(fe){const O=rn[fe];if(O!==void 0)return sE(O)})(Y),ae=X.message;ee===void 0&&(ee=ie.INTERNAL,ae="Unknown error status: "+Y+" with message "+X.message),N=!0,z.o_(new Ee(ee,ae)),_.close()}else we(Sn,`RPC '${e}' stream ${o} received:`,U),z.__(U)}})),zo.u_(),setTimeout((()=>{z.s_()}),0),z}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,s){super.Go(e,n,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return S1()}}function jj(i){return new zo(i)}function $p(){return typeof document<"u"?document:null}function vf(i){return new MI(i,!0)}zo.c_=!1;class xE{constructor(e,n,s=1e3,o=1.5,c=6e4){this.Ci=e,this.timerId=n,this.R_=s,this.A_=o,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&we("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Dx="PersistentStream";class _E{constructor(e,n,s,o,c,f,m,g){this.Ci=e,this.b_=s,this.S_=o,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new xE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(Ki(n.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new Ee(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(Dx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(we(Dx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kj extends _E{constructor(e,n,s,o,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=zI(this.serializer,e),s=(function(c){if(!("targetChange"in c))return ze.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?ze.min():f.readTime?ui(f.readTime):ze.min()})(e);return this.listener.J_(n,s)}Z_(e){const n={};n.database=ym(this.serializer),n.addTarget=(function(c,f){let m;const g=f.target;if(m=fm(g)?{documents:BI(c,g)}:{query:HI(c,g).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=lE(c,f.resumeToken);const b=mm(c,f.expectedCount);b!==null&&(m.expectedCount=b)}else if(f.snapshotVersion.compareTo(ze.min())>0){m.readTime=$d(c,f.snapshotVersion.toTimestamp());const b=mm(c,f.expectedCount);b!==null&&(m.expectedCount=b)}return m})(this.serializer,e);const s=FI(this.serializer,e);s&&(n.labels=s),this.K_(n)}X_(e){const n={};n.database=ym(this.serializer),n.removeTarget=e,this.K_(n)}}class Oj extends _E{constructor(e,n,s,o,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=UI(e.writeResults,e.commitTime),s=ui(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=ym(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>LI(this.serializer,s)))};this.K_(n)}}class Dj{}class Mj extends Dj{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ee(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Wo(e,gm(n,s),o,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ee(ie.UNKNOWN,c.toString())}))}jo(e,n,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.jo(e,gm(n,s),o,f,m,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ee(ie.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Pj(i,e,n,s){return new Mj(i,e,n,s)}class Vj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ki(n),this.aa=!1):we("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Dr="RemoteStore";class zj{constructor(e,n,s,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((f=>{s.enqueueAndForget((async()=>{Br(this)&&(we(Dr,"Restarting streams for network reachability change."),await(async function(g){const b=Be(g);b.Ea.add(4),await Uc(b),b.Va.set("Unknown"),b.Ea.delete(4),await xf(b)})(this))}))})),this.Va=new Vj(s,o)}}async function xf(i){if(Br(i))for(const e of i.Ra)await e(!0)}async function Uc(i){for(const e of i.Ra)await e(!1)}function EE(i,e){const n=Be(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),mg(n)?pg(n):al(n).O_()&&hg(n,e))}function fg(i,e){const n=Be(i),s=al(n);n.Ia.delete(e),s.O_()&&AE(n,e),n.Ia.size===0&&(s.O_()?s.L_():Br(n)&&n.Va.set("Unknown"))}function hg(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}al(i).Z_(e)}function AE(i,e){i.da.$e(e),al(i).X_(e)}function pg(i){i.da=new jI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),al(i).start(),i.Va.ua()}function mg(i){return Br(i)&&!al(i).x_()&&i.Ia.size>0}function Br(i){return Be(i).Ea.size===0}function wE(i){i.da=void 0}async function Lj(i){i.Va.set("Online")}async function Uj(i){i.Ia.forEach(((e,n)=>{hg(i,e)}))}async function Bj(i,e){wE(i),mg(i)?(i.Va.ha(e),pg(i)):i.Va.set("Unknown")}async function Hj(i,e,n){if(i.Va.set("Online"),e instanceof oE&&e.state===2&&e.cause)try{await(async function(o,c){const f=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.da.removeTarget(m))})(i,e)}catch(s){we(Dr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Qd(i,s)}else if(e instanceof Id?i.da.Xe(e):e instanceof rE?i.da.st(e):i.da.tt(e),!n.isEqual(ze.min()))try{const s=await vE(i.localStore);n.compareTo(s)>=0&&await(function(c,f){const m=c.da.Tt(f);return m.targetChanges.forEach(((g,b)=>{if(g.resumeToken.approximateByteSize()>0){const _=c.Ia.get(b);_&&c.Ia.set(b,_.withResumeToken(g.resumeToken,f))}})),m.targetMismatches.forEach(((g,b)=>{const _=c.Ia.get(g);if(!_)return;c.Ia.set(g,_.withResumeToken(An.EMPTY_BYTE_STRING,_.snapshotVersion)),AE(c,g);const E=new Ds(_.target,g,b,_.sequenceNumber);hg(c,E)})),c.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){we(Dr,"Failed to raise snapshot:",s),await Qd(i,s)}}async function Qd(i,e,n){if(!tl(e))throw e;i.Ea.add(1),await Uc(i),i.Va.set("Offline"),n||(n=()=>vE(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{we(Dr,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await xf(i)}))}function SE(i,e){return e().catch((n=>Qd(i,n,e)))}async function _f(i){const e=Be(i),n=Gs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Jm;for(;qj(e);)try{const o=await Aj(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,Fj(e,o)}catch(o){await Qd(e,o)}TE(e)&&NE(e)}function qj(i){return Br(i)&&i.Ta.length<10}function Fj(i,e){i.Ta.push(e);const n=Gs(i);n.O_()&&n.Y_&&n.ea(e.mutations)}function TE(i){return Br(i)&&!Gs(i).x_()&&i.Ta.length>0}function NE(i){Gs(i).start()}async function Gj(i){Gs(i).ra()}async function $j(i){const e=Gs(i);for(const n of i.Ta)e.ea(n.mutations)}async function Kj(i,e,n){const s=i.Ta.shift(),o=sg.from(s,e,n);await SE(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await _f(i)}async function Qj(i,e){e&&Gs(i).Y_&&await(async function(s,o){if((function(f){return RI(f)&&f!==ie.ABORTED})(o.code)){const c=s.Ta.shift();Gs(s).B_(),await SE(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await _f(s)}})(i,e),TE(i)&&NE(i)}async function Mx(i,e){const n=Be(i);n.asyncQueue.verifyOperationInProgress(),we(Dr,"RemoteStore received new credentials");const s=Br(n);n.Ea.add(3),await Uc(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await xf(n)}async function Yj(i,e){const n=Be(i);e?(n.Ea.delete(2),await xf(n)):e||(n.Ea.add(2),await Uc(n),n.Va.set("Unknown"))}function al(i){return i.ma||(i.ma=(function(n,s,o){const c=Be(n);return c.sa(),new kj(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Zo:Lj.bind(null,i),Yo:Uj.bind(null,i),t_:Bj.bind(null,i),J_:Hj.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),mg(i)?pg(i):i.Va.set("Unknown")):(await i.ma.stop(),wE(i))}))),i.ma}function Gs(i){return i.fa||(i.fa=(function(n,s,o){const c=Be(n);return c.sa(),new Oj(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Gj.bind(null,i),t_:Qj.bind(null,i),ta:$j.bind(null,i),na:Kj.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await _f(i)):(await i.fa.stop(),i.Ta.length>0&&(we(Dr,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class gg{constructor(e,n,s,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,c){const f=Date.now()+s,m=new gg(e,n,f,o,c);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bg(i,e){if(Ki("AsyncQueue",`${e}: ${i}`),tl(i))return new Ee(ie.UNAVAILABLE,`${e}: ${i}`);throw i}class Lo{static emptySet(e){return new Lo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ke.comparator(n.key,s.key):(n,s)=>ke.comparator(n.key,s.key),this.keyedMap=dc(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Lo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Lo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class Px{constructor(){this.ga=new Ut(ke.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Me(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Yo{constructor(e,n,s,o,c,f,m,g,b){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=b}static fromInitialDocuments(e,n,s,o,c){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new Yo(e,n,Lo.emptySet(n),f,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class Xj{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Jj{constructor(){this.queries=Vx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Be(n),c=o.queries;o.queries=Vx(),c.forEach(((f,m)=>{for(const g of m.ba)g.onError(s)}))})(this,new Ee(ie.ABORTED,"Firestore shutting down"))}}function Vx(){return new Ur((i=>K1(i)),pf)}async function yg(i,e){const n=Be(i);let s=3;const o=e.query;let c=n.queries.get(o);c?!c.Sa()&&e.Da()&&(s=2):(c=new Xj,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=bg(f,`Initialization of query '${jo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,c),c.ba.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&xg(n)}async function vg(i,e){const n=Be(i),s=e.query;let o=3;const c=n.queries.get(s);if(c){const f=c.ba.indexOf(e);f>=0&&(c.ba.splice(f,1),c.ba.length===0?o=e.Da()?0:1:!c.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Wj(i,e){const n=Be(i);let s=!1;for(const o of e){const c=o.query,f=n.queries.get(c);if(f){for(const m of f.ba)m.Fa(o)&&(s=!0);f.wa=o}}s&&xg(n)}function Zj(i,e,n){const s=Be(i),o=s.queries.get(e);if(o)for(const c of o.ba)c.onError(n);s.queries.delete(e)}function xg(i){i.Ca.forEach((e=>{e.next()}))}var _m,zx;(zx=_m||(_m={})).Ma="default",zx.Cache="cache";class _g{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Yo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_m.Cache}}class RE{constructor(e){this.key=e}}class CE{constructor(e){this.key=e}}class ek{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=at(),this.mutatedKeys=at(),this.eu=Q1(e),this.tu=new Lo(this.eu)}get nu(){return this.Za}ru(e,n){const s=n?n.iu:new Px,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const N=o.get(_),z=mf(this.query,E)?E:null,H=!!N&&this.mutatedKeys.has(N.key),U=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let D=!1;N&&z?N.data.isEqual(z.data)?H!==U&&(s.track({type:3,doc:z}),D=!0):this.su(N,z)||(s.track({type:2,doc:z}),D=!0,(g&&this.eu(z,g)>0||b&&this.eu(z,b)<0)&&(m=!0)):!N&&z?(s.track({type:0,doc:z}),D=!0):N&&!z&&(s.track({type:1,doc:N}),D=!0,(g||b)&&(m=!0)),D&&(z?(f=f.add(z),c=U?c.add(_):c.delete(_)):(f=f.delete(_),c=c.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),c=c.delete(_.key),s.track({type:1,doc:_})}return{tu:f,iu:s,Ss:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,E)=>(function(z,H){const U=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Vt:D})}};return U(z)-U(H)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,b=g!==this.Xa;return this.Xa=g,f.length!==0||b?{snapshot:new Yo(this.query,e.tu,c,f,e.mutatedKeys,g===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Px,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=at(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const n=[];return e.forEach((s=>{this.Ya.has(s)||n.push(new CE(s))})),this.Ya.forEach((s=>{e.has(s)||n.push(new RE(s))})),n}cu(e){this.Za=e.ks,this.Ya=at();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Yo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Eg="SyncEngine";class tk{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class nk{constructor(e){this.key=e,this.hu=!1}}class ak{constructor(e,n,s,o,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ur((m=>K1(m)),pf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ut(ke.comparator),this.Au=new Map,this.Vu=new lg,this.du={},this.mu=new Map,this.fu=Qo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ik(i,e,n=!0){const s=ME(i);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await IE(s,e,n,!0),o}async function sk(i,e){const n=ME(i);await IE(n,e,!0,!1)}async function IE(i,e,n,s){const o=await wj(i.localStore,ci(e)),c=o.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await rk(i,e,c,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&EE(i.remoteStore,o),m}async function rk(i,e,n,s,o){i.pu=(E,N,z)=>(async function(U,D,X,Y){let ee=D.view.ru(X);ee.Ss&&(ee=await Ix(U.localStore,D.query,!1).then((({documents:O})=>D.view.ru(O,ee))));const ae=Y&&Y.targetChanges.get(D.targetId),ge=Y&&Y.targetMismatches.get(D.targetId)!=null,fe=D.view.applyChanges(ee,U.isPrimaryClient,ae,ge);return Ux(U,D.targetId,fe.au),fe.snapshot})(i,E,N,z);const c=await Ix(i.localStore,e,!0),f=new ek(e,c.ks),m=f.ru(c.documents),g=Lc.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),b=f.applyChanges(m,i.isPrimaryClient,g);Ux(i,n,b.au);const _=new tk(e,n,f);return i.Tu.set(e,_),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),b.snapshot}async function ok(i,e,n){const s=Be(i),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((f=>!pf(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await vm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&fg(s.remoteStore,o.targetId),Em(s,o.targetId)})).catch(el)):(Em(s,o.targetId),await vm(s.localStore,o.targetId,!0))}async function lk(i,e){const n=Be(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),fg(n.remoteStore,s.targetId))}async function ck(i,e,n){const s=gk(i);try{const o=await(function(f,m){const g=Be(f),b=Dt.now(),_=m.reduce(((z,H)=>z.add(H.key)),at());let E,N;return g.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let H=Qi(),U=at();return g.xs.getEntries(z,_).next((D=>{H=D,H.forEach(((X,Y)=>{Y.isValidDocument()||(U=U.add(X))}))})).next((()=>g.localDocuments.getOverlayedDocuments(z,H))).next((D=>{E=D;const X=[];for(const Y of m){const ee=AI(Y,E.get(Y.key).overlayedDocument);ee!=null&&X.push(new Xs(Y.key,ee,L1(ee.value.mapValue),ba.exists(!0)))}return g.mutationQueue.addMutationBatch(z,b,X,m)})).next((D=>{N=D;const X=D.applyToLocalDocumentSet(E,U);return g.documentOverlayCache.saveOverlays(z,D.batchId,X)}))})).then((()=>({batchId:N.batchId,changes:X1(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,g){let b=f.du[f.currentUser.toKey()];b||(b=new Ut(nt)),b=b.insert(m,g),f.du[f.currentUser.toKey()]=b})(s,o.batchId,n),await Bc(s,o.changes),await _f(s.remoteStore)}catch(o){const c=bg(o,"Failed to persist write");n.reject(c)}}async function jE(i,e){const n=Be(i);try{const s=await _j(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const f=n.Au.get(c);f&&(mt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?mt(f.hu,14607):o.removedDocuments.size>0&&(mt(f.hu,42227),f.hu=!1))})),await Bc(n,s,e)}catch(s){await el(s)}}function Lx(i,e,n){const s=Be(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((c,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const g=Be(f);g.onlineState=m;let b=!1;g.queries.forEach(((_,E)=>{for(const N of E.ba)N.va(m)&&(b=!0)})),b&&xg(g)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function uk(i,e,n){const s=Be(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),c=o&&o.key;if(c){let f=new Ut(ke.comparator);f=f.insert(c,Nn.newNoDocument(c,ze.min()));const m=at().add(c),g=new yf(ze.min(),new Map,new Ut(nt),f,m);await jE(s,g),s.Ru=s.Ru.remove(c),s.Au.delete(e),Ag(s)}else await vm(s.localStore,e,!1).then((()=>Em(s,e,n))).catch(el)}async function dk(i,e){const n=Be(i),s=e.batch.batchId;try{const o=await xj(n.localStore,e);OE(n,s,null),kE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Bc(n,o)}catch(o){await el(o)}}async function fk(i,e,n){const s=Be(i);try{const o=await(function(f,m){const g=Be(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let _;return g.mutationQueue.lookupMutationBatch(b,m).next((E=>(mt(E!==null,37113),_=E.keys(),g.mutationQueue.removeMutationBatch(b,E)))).next((()=>g.mutationQueue.performConsistencyCheck(b))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(b,_,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,_))).next((()=>g.localDocuments.getDocuments(b,_)))}))})(s.localStore,e);OE(s,e,n),kE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Bc(s,o)}catch(o){await el(o)}}function kE(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function OE(i,e,n){const s=Be(i);let o=s.du[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function Em(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((s=>{i.Vu.containsKey(s)||DE(i,s)}))}function DE(i,e){i.Eu.delete(e.path.canonicalString());const n=i.Ru.get(e);n!==null&&(fg(i.remoteStore,n),i.Ru=i.Ru.remove(e),i.Au.delete(n),Ag(i))}function Ux(i,e,n){for(const s of n)s instanceof RE?(i.Vu.addReference(s.key,e),hk(i,s)):s instanceof CE?(we(Eg,"Document no longer in limbo: "+s.key),i.Vu.removeReference(s.key,e),i.Vu.containsKey(s.key)||DE(i,s.key)):Me(19791,{wu:s})}function hk(i,e){const n=e.key,s=n.path.canonicalString();i.Ru.get(n)||i.Eu.has(s)||(we(Eg,"New document in limbo: "+n),i.Eu.add(s),Ag(i))}function Ag(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new ke(Tt.fromString(e)),s=i.fu.next();i.Au.set(s,new nk(n)),i.Ru=i.Ru.insert(n,s),EE(i.remoteStore,new Ds(ci(hf(n.path)),s,"TargetPurposeLimboResolution",uf.ce))}}async function Bc(i,e,n){const s=Be(i),o=[],c=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{f.push(s.pu(g,e,n).then((b=>{if((b||n)&&s.isPrimaryClient){const _=b?!b.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(b){o.push(b);const _=ug.Es(g.targetId,b);c.push(_)}})))})),await Promise.all(f),s.Pu.J_(o),await(async function(g,b){const _=Be(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>re.forEach(b,(N=>re.forEach(N.Ts,(z=>_.persistence.referenceDelegate.addReference(E,N.targetId,z))).next((()=>re.forEach(N.Is,(z=>_.persistence.referenceDelegate.removeReference(E,N.targetId,z)))))))))}catch(E){if(!tl(E))throw E;we(dg,"Failed to update sequence numbers: "+E)}for(const E of b){const N=E.targetId;if(!E.fromCache){const z=_.vs.get(N),H=z.snapshotVersion,U=z.withLastLimboFreeSnapshotVersion(H);_.vs=_.vs.insert(N,U)}}})(s.localStore,c))}async function pk(i,e){const n=Be(i);if(!n.currentUser.isEqual(e)){we(Eg,"User change. New user:",e.toKey());const s=await yE(n.localStore,e);n.currentUser=e,(function(c,f){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new Ee(ie.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Bc(n,s.Ns)}}function mk(i,e){const n=Be(i),s=n.Au.get(e);if(s&&s.hu)return at().add(s.key);{let o=at();const c=n.Iu.get(e);if(!c)return o;for(const f of c){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function ME(i){const e=Be(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=jE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uk.bind(null,e),e.Pu.J_=Wj.bind(null,e.eventManager),e.Pu.yu=Zj.bind(null,e.eventManager),e}function gk(i){const e=Be(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fk.bind(null,e),e}class Yd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return vj(this.persistence,new gj,e.initialUser,this.serializer)}Cu(e){return new bE(cg.Vi,this.serializer)}Du(e){return new Tj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yd.provider={build:()=>new Yd};class bk extends Yd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){mt(this.persistence.referenceDelegate instanceof Kd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new tj(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Hn.withCacheSize(this.cacheSizeBytes):Hn.DEFAULT;return new bE((s=>Kd.Vi(s,n)),this.serializer)}}class Am{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Lx(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=pk.bind(null,this.syncEngine),await Yj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Jj})()}createDatastore(e){const n=vf(e.databaseInfo.databaseId),s=jj(e.databaseInfo);return Pj(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,c,f,m){return new zj(s,o,c,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>Lx(this.syncEngine,n,0)),(function(){return Ox.v()?new Ox:new Nj})())}createSyncEngine(e,n){return(function(o,c,f,m,g,b,_){const E=new ak(o,c,f,m,g,b);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Be(n);we(Dr,"RemoteStore shutting down."),s.Ea.add(5),await Uc(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Am.provider={build:()=>new Am};class wg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const $s="FirestoreClient";class yk{constructor(e,n,s,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this._databaseInfo=o,this.user=Tn.UNAUTHENTICATED,this.clientId=Xm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async f=>{we($s,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(we($s,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=bg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Kp(i,e){i.asyncQueue.verifyOperationInProgress(),we($s,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await yE(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Bx(i,e){i.asyncQueue.verifyOperationInProgress();const n=await vk(i);we($s,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>Mx(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>Mx(e.remoteStore,o))),i._onlineComponents=e}async function vk(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){we($s,"Using user provided OfflineComponentProvider");try{await Kp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Ho("Error using user provided cache. Falling back to memory cache: "+n),await Kp(i,new Yd)}}else we($s,"Using default OfflineComponentProvider"),await Kp(i,new bk(void 0));return i._offlineComponents}async function PE(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(we($s,"Using user provided OnlineComponentProvider"),await Bx(i,i._uninitializedComponentsProvider._online)):(we($s,"Using default OnlineComponentProvider"),await Bx(i,new Am))),i._onlineComponents}function xk(i){return PE(i).then((e=>e.syncEngine))}async function Xd(i){const e=await PE(i),n=e.eventManager;return n.onListen=ik.bind(null,e.syncEngine),n.onUnlisten=ok.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=lk.bind(null,e.syncEngine),n}function _k(i,e,n,s){const o=new wg(s),c=new _g(e,o,n);return i.asyncQueue.enqueueAndForget((async()=>yg(await Xd(i),c))),()=>{o.Nu(),i.asyncQueue.enqueueAndForget((async()=>vg(await Xd(i),c)))}}function Ek(i,e,n={}){const s=new Bi;return i.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,g,b){const _=new wg({next:N=>{_.Nu(),f.enqueueAndForget((()=>vg(c,E)));const z=N.docs.has(m);!z&&N.fromCache?b.reject(new Ee(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&N.fromCache&&g&&g.source==="server"?b.reject(new Ee(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(N)},error:N=>b.reject(N)}),E=new _g(hf(m.path),_,{includeMetadataChanges:!0,Ka:!0});return yg(c,E)})(await Xd(i),i.asyncQueue,e,n,s))),s.promise}function Ak(i,e,n={}){const s=new Bi;return i.asyncQueue.enqueueAndForget((async()=>(function(c,f,m,g,b){const _=new wg({next:N=>{_.Nu(),f.enqueueAndForget((()=>vg(c,E))),N.fromCache&&g.source==="server"?b.reject(new Ee(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(N)},error:N=>b.reject(N)}),E=new _g(m,_,{includeMetadataChanges:!0,Ka:!0});return yg(c,E)})(await Xd(i),i.asyncQueue,e,n,s))),s.promise}function wk(i,e){const n=new Bi;return i.asyncQueue.enqueueAndForget((async()=>ck(await xk(i),e,n))),n.promise}function VE(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const Sk="ComponentProvider",Hx=new Map;function Tk(i,e,n,s,o){return new G2(i,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,VE(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}const zE="firestore.googleapis.com",qx=!0;class Fx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zE,this.ssl=qx}else this.host=e.host,this.ssl=e.ssl??qx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZI)throw new Ee(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}D2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VE(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ee(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ee(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ee(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ef{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new w2;switch(s.type){case"firstParty":return new R2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ee(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Hx.get(n);s&&(we(Sk,"Removing Datastore"),Hx.delete(n),s.terminate())})(this),Promise.resolve()}}function LE(i,e,n,s={}){i=Fn(i,Ef);const o=Vr(e),c=i._getSettings(),f={...c,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(Dm(`https://${m}`),Mm("Firestore",!0)),c.host!==zE&&c.host!==m&&Ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:s};if(!Fi(g,f)&&(i._setSettings(g),s.mockUserToken)){let b,_;if(typeof s.mockUserToken=="string")b=s.mockUserToken,_=Tn.MOCK_USER;else{b=O_(s.mockUserToken,i._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new Ee(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Tn(E)}i._authCredentials=new S2(new N1(b,_))}}class Js{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Js(this.firestore,e,this._query)}}class Gt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Vc(n,Gt._jsonSchema))return new Gt(e,s||null,new ke(Tt.fromString(n.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:ln("string",Gt._jsonSchemaVersion),referencePath:ln("string")};class zs extends Js{constructor(e,n,s){super(e,n,hf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new ke(e))}withConverter(e){return new zs(this.firestore,e,this._path)}}function St(i,e,...n){if(i=Xt(i),R1("collection","path",e),i instanceof Ef){const s=Tt.fromString(e,...n);return ax(s),new zs(i,null,s)}{if(!(i instanceof Gt||i instanceof zs))throw new Ee(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Tt.fromString(e,...n));return ax(s),new zs(i.firestore,null,s)}}function Ue(i,e,...n){if(i=Xt(i),arguments.length===1&&(e=Xm.newId()),R1("doc","path",e),i instanceof Ef){const s=Tt.fromString(e,...n);return nx(s),new Gt(i,null,new ke(s))}{if(!(i instanceof Gt||i instanceof zs))throw new Ee(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Tt.fromString(e,...n));return nx(s),new Gt(i.firestore,i instanceof zs?i.converter:null,new ke(s))}}const Gx="AsyncQueue";class $x{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new xE(this,"async_queue_retry"),this._c=()=>{const s=$p();s&&we(Gx,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=$p();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=$p();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Bi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!tl(e))throw e;we(Gx,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ki("INTERNAL UNHANDLED ERROR: ",Kx(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=gg.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Me(47125,{Pc:Kx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Kx(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Yi extends Ef{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new $x,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $x(e),this._firestoreClient=void 0,await e}}}function Nk(i,e){const n=typeof i=="object"?i:Lm(),s=typeof i=="string"?i:Hd,o=af(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=I_("firestore");c&&LE(o,...c)}return o}function Af(i){if(i._terminated)throw new Ee(ie.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||Rk(i),i._firestoreClient}function Rk(i){const e=i._freezeSettings(),n=Tk(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new yk(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}class ga{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ga(An.fromBase64String(e))}catch(n){throw new Ee(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ga(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ga._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vc(e,ga._jsonSchema))return ga.fromBase64String(e.bytes)}}ga._jsonSchemaVersion="firestore/bytes/1.0",ga._jsonSchema={type:ln("string",ga._jsonSchemaVersion),bytes:ln("string")};class Sg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class il{constructor(e){this._methodName=e}}class di{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(e){if(Vc(e,di._jsonSchema))return new di(e.latitude,e.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:ln("string",di._jsonSchemaVersion),latitude:ln("number"),longitude:ln("number")};class Oa{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Oa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vc(e,Oa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Oa(e.vectorValues);throw new Ee(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Oa._jsonSchemaVersion="firestore/vectorValue/1.0",Oa._jsonSchema={type:ln("string",Oa._jsonSchemaVersion),vectorValues:ln("object")};const Ck=/^__.*__$/;class Ik{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new zc(e,this.data,n,this.fieldTransforms)}}class UE{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Xs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BE(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{dataSource:i})}}class wf{constructor(e,n,s,o,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new wf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Jd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(BE(this.dataSource)&&Ck.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class jk{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||vf(e)}createContext(e,n,s,o=!1){return new wf({dataSource:e,methodName:n,targetDoc:s,path:_n.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sf(i){const e=i._freezeSettings(),n=vf(i._databaseId);return new jk(i._databaseId,!!e.ignoreUndefinedProperties,n)}function HE(i,e,n,s,o,c={}){const f=i.createContext(c.merge||c.mergeFields?2:0,e,n,o);Cg("Data must be an object, but it was:",f,s);const m=FE(s,f);let g,b;if(c.merge)g=new ta(f.fieldMask),b=f.fieldTransforms;else if(c.mergeFields){const _=[];for(const E of c.mergeFields){const N=Mr(e,E,n);if(!f.contains(N))throw new Ee(ie.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);KE(_,N)||_.push(N)}g=new ta(_),b=f.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,b=f.fieldTransforms;return new Ik(new qn(m),g,b)}class Tf extends il{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tf}}function qE(i,e,n){return new wf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:i._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Tg extends il{_toFieldTransform(e){return new ag(e.path,new Rc)}isEqual(e){return e instanceof Tg}}class Ng extends il{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=qE(this,e,!0),s=this.Ac.map((c=>Hr(c,n))),o=new $o(s);return new ag(e.path,o)}isEqual(e){return e instanceof Ng&&Fi(this.Ac,e.Ac)}}class Rg extends il{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=qE(this,e,!0),s=this.Ac.map((c=>Hr(c,n))),o=new Ko(s);return new ag(e.path,o)}isEqual(e){return e instanceof Rg&&Fi(this.Ac,e.Ac)}}function kk(i,e,n,s){const o=i.createContext(1,e,n);Cg("Data must be an object, but it was:",o,s);const c=[],f=qn.empty();Ys(s,((g,b)=>{const _=$E(e,g,n);b=Xt(b);const E=o.childContextForFieldPath(_);if(b instanceof Tf)c.push(_);else{const N=Hr(b,E);N!=null&&(c.push(_),f.set(_,N))}}));const m=new ta(c);return new UE(f,m,o.fieldTransforms)}function Ok(i,e,n,s,o,c){const f=i.createContext(1,e,n),m=[Mr(e,s,n)],g=[o];if(c.length%2!=0)throw new Ee(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<c.length;N+=2)m.push(Mr(e,c[N])),g.push(c[N+1]);const b=[],_=qn.empty();for(let N=m.length-1;N>=0;--N)if(!KE(b,m[N])){const z=m[N];let H=g[N];H=Xt(H);const U=f.childContextForFieldPath(z);if(H instanceof Tf)b.push(z);else{const D=Hr(H,U);D!=null&&(b.push(z),_.set(z,D))}}const E=new ta(b);return new UE(_,E,f.fieldTransforms)}function Dk(i,e,n,s=!1){return Hr(n,i.createContext(s?4:3,e))}function Hr(i,e){if(GE(i=Xt(i)))return Cg("Unsupported field value:",e,i),FE(i,e);if(i instanceof il)return(function(s,o){if(!BE(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const c=[];let f=0;for(const m of s){let g=Hr(m,o.childContextForArray(f));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),f++}return{arrayValue:{values:c}}})(i,e)}return(function(s,o){if((s=Xt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return bI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=Dt.fromDate(s);return{timestampValue:$d(o.serializer,c)}}if(s instanceof Dt){const c=new Dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:$d(o.serializer,c)}}if(s instanceof di)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ga)return{bytesValue:lE(o.serializer,s._byteString)};if(s instanceof Gt){const c=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw o.createError(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:og(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Oa)return(function(f,m){const g=f instanceof Oa?f.toArray():f;return{mapValue:{fields:{[V1]:{stringValue:z1},[qd]:{arrayValue:{values:g.map((_=>{if(typeof _!="number")throw m.createError("VectorValues must only contain numeric values.");return ng(m.serializer,_)}))}}}}}})(s,o);if(mE(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${cf(s)}`)})(i,e)}function FE(i,e){const n={};return j1(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ys(i,((s,o)=>{const c=Hr(o,e.childContextForField(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function GE(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Dt||i instanceof di||i instanceof ga||i instanceof Gt||i instanceof il||i instanceof Oa||mE(i))}function Cg(i,e,n){if(!GE(n)||!C1(n)){const s=cf(n);throw s==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+s)}}function Mr(i,e,n){if((e=Xt(e))instanceof Sg)return e._internalPath;if(typeof e=="string")return $E(i,e);throw Jd("Field path arguments must be of type string or ",i,!1,void 0,n)}const Mk=new RegExp("[~\\*/\\[\\]]");function $E(i,e,n){if(e.search(Mk)>=0)throw Jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Sg(...e.split("."))._internalPath}catch{throw Jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Jd(i,e,n,s,o){const c=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||f)&&(g+=" (found",c&&(g+=` in field ${s}`),f&&(g+=` in document ${o}`),g+=")"),new Ee(ie.INVALID_ARGUMENT,m+i+g)}function KE(i,e){return i.some((n=>n.isEqual(e)))}class Pk{convertValue(e,n="none"){switch(Fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ys(e,((o,c)=>{s[o]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[qd].arrayValue?.values?.map((s=>Yt(s.doubleValue)));return new Oa(n)}convertGeoPoint(e){return new di(Yt(e.latitude),Yt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ff(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(wc(e));default:return null}}convertTimestamp(e){const n=Hs(e);return new Dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Tt.fromString(e);mt(pE(s),9688,{name:e});const o=new Sc(s.get(1),s.get(3)),c=new ke(s.popFirst(5));return o.isEqual(n)||Ki(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}class Ig extends Pk{constructor(e){super(),this.firestore=e}convertBytes(e){return new ga(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,n)}}function En(){return new Tg("serverTimestamp")}function wm(...i){return new Ng("arrayUnion",i)}function Nf(...i){return new Rg("arrayRemove",i)}const Qx="@firebase/firestore",Yx="4.10.0";function Xx(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const c of s)if(c in o&&typeof o[c]=="function")return!0;return!1})(i,["next","error","complete"])}class QE{constructor(e,n,s,o,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Vk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Mr("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Vk extends QE{data(){return super.data()}}function YE(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Ee(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jg{}class XE extends jg{}function Rn(i,e,...n){let s=[];e instanceof jg&&s.push(e),s=s.concat(n),(function(c){const f=c.filter((g=>g instanceof kg)).length,m=c.filter((g=>g instanceof Rf)).length;if(f>1||f>0&&m>0)throw new Ee(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Rf extends XE{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Rf(e,n,s)}_apply(e){const n=this._parse(e);return JE(e._query,n),new Js(e.firestore,e.converter,hm(e._query,n))}_parse(e){const n=Sf(e.firestore);return(function(c,f,m,g,b,_,E){let N;if(b.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Ee(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Wx(E,_);const H=[];for(const U of E)H.push(Jx(g,c,U));N={arrayValue:{values:H}}}else N=Jx(g,c,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Wx(E,_),N=Dk(m,f,E,_==="in"||_==="not-in");return on.create(b,_,N)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function na(i,e,n){const s=e,o=Mr("where",i);return Rf._create(o,s,n)}class kg extends jg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new kg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Ma.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let f=o;const m=c.getFlattenedFilters();for(const g of m)JE(f,g),f=hm(f,g)})(e._query,n),new Js(e.firestore,e.converter,hm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Og extends XE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Og(e,n)}_apply(e){const n=(function(o,c,f){if(o.startAt!==null)throw new Ee(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Ee(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nc(c,f)})(e._query,this._field,this._direction);return new Js(e.firestore,e.converter,cI(e._query,n))}}function Hi(i,e="asc"){const n=e,s=Mr("orderBy",i);return Og._create(s,n)}function Jx(i,e,n){if(typeof(n=Xt(n))=="string"){if(n==="")throw new Ee(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$1(e)&&n.indexOf("/")!==-1)throw new Ee(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Tt.fromString(n));if(!ke.isDocumentKey(s))throw new Ee(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return dx(i,new ke(s))}if(n instanceof Gt)return dx(i,n._key);throw new Ee(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cf(n)}.`)}function Wx(i,e){if(!Array.isArray(i)||i.length===0)throw new Ee(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JE(i,e){const n=(function(o,c){for(const f of o)for(const m of f.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ee(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function WE(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class hc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rr extends QE{constructor(e,n,s,o,c,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Mr("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Rr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Rr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Rr._jsonSchema={type:ln("string",Rr._jsonSchemaVersion),bundleSource:ln("string","DocumentSnapshot"),bundleName:ln("string"),bundle:ln("string")};class jd extends Rr{data(e={}){return super.data(e)}}class Cr{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new hc(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new jd(this._firestore,this._userDataWriter,s.key,s,new hc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const g=new jd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new hc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new jd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new hc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,_=-1;return m.type!==0&&(b=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),_=f.indexOf(m.doc.key)),{type:zk(m.type),doc:g,oldIndex:b,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Cr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zk(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:i})}}Cr._jsonSchemaVersion="firestore/querySnapshot/1.0",Cr._jsonSchema={type:ln("string",Cr._jsonSchemaVersion),bundleSource:ln("string","QuerySnapshot"),bundleName:ln("string"),bundle:ln("string")};function kd(i){i=Fn(i,Gt);const e=Fn(i.firestore,Yi),n=Af(e);return Ek(n,i._key).then((s=>ZE(e,i,s)))}function Sm(i){i=Fn(i,Js);const e=Fn(i.firestore,Yi),n=Af(e),s=new Ig(e);return YE(i._query),Ak(n,i._query).then((o=>new Cr(e,s,i,o)))}function Dg(i,e,n){i=Fn(i,Gt);const s=Fn(i.firestore,Yi),o=WE(i.converter,e,n),c=Sf(s);return Cf(s,[HE(c,"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,ba.none())])}function wt(i,e,n,...s){i=Fn(i,Gt);const o=Fn(i.firestore,Yi),c=Sf(o);let f;return f=typeof(e=Xt(e))=="string"||e instanceof Sg?Ok(c,"updateDoc",i._key,e,n,s):kk(c,"updateDoc",i._key,e),Cf(o,[f.toMutation(i._key,ba.exists(!0))])}function fi(i){return Cf(Fn(i.firestore,Yi),[new ig(i._key,ba.none())])}function Ls(i,e){const n=Fn(i.firestore,Yi),s=Ue(i),o=WE(i.converter,e),c=Sf(i.firestore);return Cf(n,[HE(c,"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,ba.exists(!1))]).then((()=>s))}function Cn(i,...e){i=Xt(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Xx(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Xx(e[s])){const b=e[s];e[s]=b.next?.bind(b),e[s+1]=b.error?.bind(b),e[s+2]=b.complete?.bind(b)}let c,f,m;if(i instanceof Gt)f=Fn(i.firestore,Yi),m=hf(i._key.path),c={next:b=>{e[s]&&e[s](ZE(f,i,b))},error:e[s+1],complete:e[s+2]};else{const b=Fn(i,Js);f=Fn(b.firestore,Yi),m=b._query;const _=new Ig(f);c={next:E=>{e[s]&&e[s](new Cr(f,_,b,E))},error:e[s+1],complete:e[s+2]},YE(i._query)}const g=Af(f);return _k(g,m,o,c)}function Cf(i,e){const n=Af(i);return wk(n,e)}function ZE(i,e,n){const s=n.docs.get(e._key),o=new Ig(i);return new Rr(i,o,e._key,s,new hc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){A2(zr),Ir(new Us("firestore",((s,{instanceIdentifier:o,options:c})=>{const f=s.getProvider("app").getImmediate(),m=new Yi(new T2(s.getProvider("auth-internal")),new C2(f,s.getProvider("app-check-internal")),$2(f,o),f);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),ri(Qx,Yx,e),ri(Qx,Yx,"esm2020")})();const eA="firebasestorage.googleapis.com",Lk="storageBucket",Uk=120*1e3,Bk=600*1e3;class bi extends gi{constructor(e,n,s=0){super(Qp(e),`Firebase Storage: ${n} (${Qp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pi;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pi||(pi={}));function Qp(i){return"storage/"+i}function Hk(){const i="An unknown error occurred, please check the error payload for server response.";return new bi(pi.UNKNOWN,i)}function qk(){return new bi(pi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Fk(){return new bi(pi.CANCELED,"User canceled the upload/download.")}function Gk(i){return new bi(pi.INVALID_URL,"Invalid URL '"+i+"'.")}function $k(i){return new bi(pi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function Zx(i){return new bi(pi.INVALID_ARGUMENT,i)}function tA(){return new bi(pi.APP_DELETED,"The Firebase app was deleted.")}function Kk(i){return new bi(pi.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class ka{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=ka.makeFromUrl(e,n)}catch{return new ka(e,"")}if(s.path==="")return s;throw $k(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function c(ae){ae.path.charAt(ae.path.length-1)==="/"&&(ae.path_=ae.path_.slice(0,-1))}const f="(/(.*))?$",m=new RegExp("^gs://"+o+f,"i"),g={bucket:1,path:3};function b(ae){ae.path_=decodeURIComponent(ae.path)}const _="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",z=new RegExp(`^https?://${E}/${_}/b/${o}/o${N}`,"i"),H={bucket:1,path:3},U=n===eA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",X=new RegExp(`^https?://${U}/${o}/${D}`,"i"),ee=[{regex:m,indices:g,postModify:c},{regex:z,indices:H,postModify:b},{regex:X,indices:{bucket:1,path:2},postModify:b}];for(let ae=0;ae<ee.length;ae++){const ge=ee[ae],fe=ge.regex.exec(e);if(fe){const O=fe[ge.indices.bucket];let C=fe[ge.indices.path];C||(C=""),s=new ka(O,C),ge.postModify(s);break}}if(s==null)throw Gk(e);return s}}class Qk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Yk(i,e,n){let s=1,o=null,c=null,f=!1,m=0;function g(){return m===2}let b=!1;function _(...D){b||(b=!0,e.apply(null,D))}function E(D){o=setTimeout(()=>{o=null,i(z,g())},D)}function N(){c&&clearTimeout(c)}function z(D,...X){if(b){N();return}if(D){N(),_.call(null,D,...X);return}if(g()||f){N(),_.call(null,D,...X);return}s<64&&(s*=2);let ee;m===1?(m=2,ee=0):ee=(s+Math.random())*1e3,E(ee)}let H=!1;function U(D){H||(H=!0,N(),!b&&(o!==null?(D||(m=2),clearTimeout(o),E(0)):D||(m=1)))}return E(0),c=setTimeout(()=>{f=!0,U(!0)},n),U}function Xk(i){i(!1)}function Jk(i){return i!==void 0}function e_(i,e,n,s){if(s<e)throw Zx(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>n)throw Zx(`Invalid value for '${i}'. Expected ${n} or less.`)}function Wk(i){const e=encodeURIComponent;let n="?";for(const s in i)if(i.hasOwnProperty(s)){const o=e(s)+"="+e(i[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var Wd;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Wd||(Wd={}));function Zk(i,e){const n=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,c=e.indexOf(i)!==-1;return n||o||c}class eO{constructor(e,n,s,o,c,f,m,g,b,_,E,N=!0,z=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=f,this.callback_=m,this.errorCallback_=g,this.timeout_=b,this.progressCallback_=_,this.connectionFactory_=E,this.retry=N,this.isUsingEmulator=z,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((H,U)=>{this.resolve_=H,this.reject_=U,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new vd(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const f=m=>{const g=m.loaded,b=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,b)};this.progressCallback_!==null&&c.addUploadProgressListener(f),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(f),this.pendingConnection_=null;const m=c.getErrorCode()===Wd.NO_ERROR,g=c.getStatus();if(!m||Zk(g,this.additionalRetryCodes_)&&this.retry){const _=c.getErrorCode()===Wd.ABORT;s(!1,new vd(!1,null,_));return}const b=this.successCodes_.indexOf(g)!==-1;s(!0,new vd(b,c))})},n=(s,o)=>{const c=this.resolve_,f=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());Jk(g)?c(g):c()}catch(g){f(g)}else if(m!==null){const g=Hk();g.serverResponse=m.getErrorText(),this.errorCallback_?f(this.errorCallback_(m,g)):f(g)}else if(o.canceled){const g=this.appDelete_?tA():Fk();f(g)}else{const g=qk();f(g)}};this.canceled_?n(!1,new vd(!1,null,!0)):this.backoffId_=Yk(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Xk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vd{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function tO(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function nO(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function aO(i,e){e&&(i["X-Firebase-GMPID"]=e)}function iO(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function sO(i,e,n,s,o,c,f=!0,m=!1){const g=Wk(i.urlParams),b=i.url+g,_=Object.assign({},i.headers);return aO(_,e),tO(_,n),nO(_,c),iO(_,s),new eO(b,i.method,_,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,f,m)}function rO(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function oO(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}class Zd{constructor(e,n){this._service=e,n instanceof ka?this._location=n:this._location=ka.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zd(e,n)}get root(){const e=new ka(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return oO(this._location.path)}get storage(){return this._service}get parent(){const e=rO(this._location.path);if(e===null)return null;const n=new ka(this._location.bucket,e);return new Zd(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Kk(e)}}function t_(i,e){const n=e?.[Lk];return n==null?null:ka.makeFromBucketSpec(n,i)}function lO(i,e,n,s={}){i.host=`${e}:${n}`;const o=Vr(e);o&&(Dm(`https://${i.host}/b`),Mm("Storage",!0)),i._isUsingEmulator=!0,i._protocol=o?"https":"http";const{mockUserToken:c}=s;c&&(i._overrideAuthToken=typeof c=="string"?c:O_(c,i.app.options.projectId))}class cO{constructor(e,n,s,o,c,f=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=f,this._bucket=null,this._host=eA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Uk,this._maxUploadRetryTime=Bk,this._requests=new Set,o!=null?this._bucket=ka.makeFromBucketSpec(o,this._host):this._bucket=t_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ka.makeFromBucketSpec(this._url,e):this._bucket=t_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){e_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){e_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ea(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zd(this,e)}_makeRequest(e,n,s,o,c=!0){if(this._deleted)return new Qk(tA());{const f=sO(e,this._appId,s,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const n_="@firebase/storage",a_="0.14.0";const nA="storage";function uO(i=Lm(),e){i=Xt(i);const s=af(i,nA).getImmediate({identifier:e}),o=I_("storage");return o&&aA(s,...o),s}function aA(i,e,n,s={}){lO(i,e,n,s)}function dO(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new cO(n,s,o,e,zr)}function fO(){Ir(new Us(nA,dO,"PUBLIC").setMultipleInstances(!0)),ri(n_,a_,""),ri(n_,a_,"esm2020")}fO();const iA={apiKey:"AIzaSyB3p9kAAb0TJXvJMKzUS6pummdlkbzlt6I",authDomain:"fft12l.firebaseapp.com",projectId:"fft12l",storageBucket:"fft12l.firebasestorage.app",messagingSenderId:"459190857682",appId:"1:459190857682:web:d857f4bf1fa2e5ec11220b"},Mg=zm(iA),Ot=v1(Mg),Ae=Nk(Mg),hO=uO(Mg);(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&(console.log(" MODO DEV: Conectando aos Emuladores do Firebase..."),Fm(Ot,"http://127.0.0.1:9099",{disableWarnings:!0}),LE(Ae,"127.0.0.1",8080),aA(hO,"127.0.0.1",9199));const pO=(i,e)=>l1(Ot,i,e),If="/assets/chocobo-loading-CZsGc2ZM.gif",mO="/assets/musica-tema-78rqvj_H.mp3",gO="/assets/fundo-rpg-BXz1tR4K.jpg",Nt=new Audio(mO);Nt.loop=!0;Nt.volume=.2;function bO(){const i=Xi(),e=()=>{Nt.volume=.2,Nt.play().then(()=>{console.log("ter musical sintonizado.")}).catch(n=>{console.log("Aguardando interao: ",n)}),i("/login")};return u.jsxs("div",{className:"landing-container",onClick:e,children:[u.jsxs("div",{className:"content",children:[u.jsx("h1",{className:"game-title",children:"FINAL FANTASY"}),u.jsx("h2",{className:"sub-title",children:"12 Libertao"}),u.jsx("div",{className:"press-start",children:"PRESS START"})]}),u.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .landing-container {
          height: 100vh; width: 100vw; display: flex; align-items: center; justify-content: center;
          background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url(${gO}) no-repeat center center;
          background-size: cover; cursor: pointer; position: fixed; top: 0; left: 0; z-index: 1000;
        }
        .content { text-align: center; animation: fadeInSuave 4s ease-in-out; }
        .game-title { font-size: clamp(30px, 8vw, 60px); letter-spacing: 8px; color: #fff; text-shadow: 3px 3px 5px #000, 0 0 20px rgba(0, 242, 255, 0.5); font-family: 'serif'; }
        .sub-title { font-size: clamp(14px, 4vw, 24px); color: #ffcc00; margin-top: 10px; text-shadow: 1px 1px 3px #000; font-family: 'serif'; }
        .press-start { margin-top: 80px; font-size: 20px; color: #fff; letter-spacing: 5px; text-shadow: 0 0 10px #00f2ff; animation: blink 1.5s infinite; font-family: 'sans-serif'; }
        @keyframes blink { 0%, 100% { opacity: 0; } 50% { opacity: 1; } }
        @keyframes fadeInSuave { from { opacity: 0; filter: blur(15px); transform: scale(0.9); } to { opacity: 1; filter: blur(0); transform: scale(1); } }
      `}})]})}const Pg="/assets/video-fundo-B5LPnOg0.mp4",yO="/assets/botao-admin-T-iaDg61.png";function vO(){const i=Xi(),[e,n]=w.useState(null),[s,o]=w.useState(""),[c,f]=w.useState(""),[m,g]=w.useState("");w.useEffect(()=>{Nt.volume=.2,Nt.paused&&Nt.play().catch(N=>console.log("Autoplay bloqueado:",N))},[]);const b=()=>{Nt.pause(),Nt.currentTime=0},_=async N=>{N.preventDefault(),g("");try{const H=(await pO(s,c)).user,U=Ue(Ae,"users",H.uid),D=await kd(U);if(D.exists()){const X=D.data();if(e==="master"&&X.role!=="mestre"){g("ACESSO NEGADO: VOC NO  UM MESTRE.");return}if(b(),X.role==="mestre")i("/mestre");else{const Y=Ue(Ae,"characters",H.uid);(await kd(Y)).exists()?i("/jogador-vtt"):i("/create-character")}}else{const X=Ue(Ae,"characters",H.uid),Y=await kd(X);b(),Y.exists()?i("/jogador-vtt"):i("/create-character")}}catch(z){console.error(z),g("FALHA NA CONEXO COM O TER.")}},E=()=>{i("/admin-login")};return u.jsxs("div",{className:"login-container",children:[u.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",className:"background-video",children:u.jsx("source",{src:Pg,type:"video/mp4"})}),u.jsx("div",{className:"content-overlay",children:e?u.jsxs("form",{className:"login-panel fade-in",onSubmit:_,children:[u.jsx("button",{type:"button",className:"ff-back",onClick:()=>n(null),children:" RETORNAR"}),u.jsx("h3",{className:"ff-subtitle",children:e==="master"?"NARRADOR":"JOGADOR"}),u.jsxs("div",{className:"ff-input-group",children:[u.jsx("input",{type:"email",placeholder:"E-MAIL",value:s,onChange:N=>o(N.target.value),required:!0}),u.jsx("input",{type:"password",placeholder:"SENHA",value:c,onChange:N=>f(N.target.value),required:!0})]}),m&&u.jsx("p",{className:"ff-error",children:m}),u.jsx("button",{type:"submit",className:"ff-submit",children:"ENTRAR"})]}):u.jsxs("div",{className:"selection-screen fade-in",children:[u.jsx("h2",{className:"ff-title",children:"ESCOLHA SUA JORNADA"}),u.jsxs("div",{className:"ff-button-group",children:[u.jsx("button",{className:"ff-btn",onClick:()=>n("player"),children:"JOGADOR"}),u.jsx("button",{className:"ff-btn",onClick:()=>n("master"),children:"NARRADOR"})]})]})}),u.jsx("button",{className:"admin-portal-btn",onClick:E,title:"Acesso ao Admin",children:u.jsx("img",{src:yO,alt:"Portal Admin"})}),u.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .login-container { height: 100vh; width: 100vw; background: #000; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; }
        .background-video { position: absolute; top: 50%; left: 50%; min-width: 100%; min-height: 100%; width: auto; height: auto; z-index: 1; transform: translate(-50%, -50%); object-fit: cover; animation: quickLoopFade 0.5s ease-in-out; }
        @keyframes quickLoopFade { 0% { opacity: 0; } 100% { opacity: 1; } }
        .content-overlay { position: relative; z-index: 10; display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.4); }
        .ff-title { color: #fff; font-size: 32px; letter-spacing: 8px; margin-bottom: 40px; text-shadow: 0 0 15px rgba(255, 255, 255, 0.5); text-align: center; font-family: 'serif'; }
        .ff-subtitle { color: #ffcc00; letter-spacing: 4px; margin-bottom: 30px; text-align: center; }
        .ff-button-group { display: flex; flex-direction: column; gap: 20px; align-items: center; }
        .ff-btn { background: rgba(0, 0, 30, 0.6); border: 1px solid rgba(255, 255, 255, 0.6); color: #fff; padding: 15px 50px; letter-spacing: 3px; cursor: pointer; transition: 0.4s; width: 280px; backdrop-filter: blur(5px); font-weight: bold; }
        .ff-submit { background: rgba(0, 0, 30, 0.6); border: 1px solid rgba(255, 255, 255, 0.6); color: #fff; padding: 15px 0; letter-spacing: 3px; cursor: pointer; transition: 0.4s; width: 326px; backdrop-filter: blur(5px); font-weight: bold; margin: 0 auto; display: block; }
        .ff-btn:hover, .ff-submit:hover { background: #fff; color: #000; box-shadow: 0 0 20px #fff; }
        .ff-input-group input { display: block; width: 300px; padding: 12px; margin: 0 auto 20px auto; background: rgba(0, 0, 0, 0.7); border: 1px solid #444; color: #fff; text-align: center; letter-spacing: 2px; outline: none; }
        .ff-input-group input:focus { border-color: #ffcc00; }
        .ff-back { background: none; border: none; color: #ffcc00; cursor: pointer; margin-bottom: 15px; display: block; font-weight: bold; }
        .ff-error { color: #ff4444; font-size: 12px; margin-bottom: 15px; text-shadow: 0 0 5px #000; text-align: center; }
        .admin-portal-btn { position: absolute; bottom: 30px; right: 30px; z-index: 100; background: none; border: none; cursor: pointer; width: 70px; transition: 0.5s; filter: drop-shadow(0 0 8px rgba(0, 242, 255, 0.6)); }
        .admin-portal-btn img { width: 100%; height: auto; }
        .admin-portal-btn:hover { transform: scale(1.2) rotate(-5deg); filter: drop-shadow(0 0 15px #00f2ff); }
        .fade-in { animation: fadeInFF 2s ease-out forwards; }
        @keyframes fadeInFF { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
      `}})]})}function xO(){const[i,e]=w.useState(""),[n,s]=w.useState(""),[o,c]=w.useState(""),f=Xi();w.useEffect(()=>{Nt.volume=.2,Nt.paused&&Nt.play().catch(()=>{})},[]);const m=async g=>{if(g.preventDefault(),c(""),i!==void 0){c("VOC NO TEM PERMISSO DE NARRADOR.");return}try{await l1(Ot,i,n),Nt.pause(),Nt.currentTime=0,f("/admin")}catch(_){console.error(_),c("SENHA INCORRETA OU FALHA NA CONEXO.")}};return u.jsxs("div",{className:"login-container",children:[u.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"background-video",children:u.jsx("source",{src:Pg,type:"video/mp4"})}),u.jsx("div",{className:"content-overlay",children:u.jsxs("form",{className:"login-panel fade-in",onSubmit:m,children:[u.jsx("button",{type:"button",className:"ff-back",onClick:()=>f("/"),children:" RETORNAR"}),u.jsx("h3",{className:"ff-subtitle",children:"PORTAL DO ADMINISTRADOR"}),u.jsxs("div",{className:"ff-input-group",children:[u.jsx("input",{type:"email",placeholder:"E-MAIL",value:i,onChange:g=>e(g.target.value),required:!0}),u.jsx("input",{type:"password",placeholder:"CHAVE DE ACESSO",value:n,onChange:g=>s(g.target.value),required:!0})]}),o&&u.jsx("p",{className:"ff-error",style:{color:"#ff4444",fontSize:"12px",marginBottom:"10px"},children:o}),u.jsx("button",{type:"submit",className:"ff-submit",children:"DESBLOQUEAR"})]})}),u.jsx("style",{children:`
        .login-container { height: 100vh; width: 100vw; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; background: #000; }
        .background-video { position: absolute; top: 50%; left: 50%; min-width: 100%; min-height: 100%; transform: translate(-50%, -50%); object-fit: cover; z-index: 1; }
        .content-overlay { position: absolute; top: 0; left: 0; z-index: 10; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.6); }
        .login-panel { background: rgba(0, 0, 30, 0.85); padding: 40px; border: 1px solid #00f2ff; backdrop-filter: blur(15px); text-align: center; box-shadow: 0 0 30px rgba(0, 242, 255, 0.3); width: 350px; }
        .ff-subtitle { color: #ffcc00; letter-spacing: 4px; margin-bottom: 25px; font-weight: bold; }
        .ff-input-group input { display: block; width: 100%; padding: 12px; margin: 10px 0; background: rgba(0,0,0,0.8); border: 1px solid #444; color: #fff; text-align: center; outline: none; box-sizing: border-box; }
        .ff-input-group input:focus { border-color: #00f2ff; box-shadow: 0 0 10px rgba(0, 242, 255, 0.2); }
        .ff-submit { background: transparent; border: 1px solid #fff; color: #fff; padding: 12px 40px; cursor: pointer; transition: 0.3s; width: 100%; letter-spacing: 2px; margin-top: 10px; }
        .ff-submit:hover { background: #fff; color: #000; box-shadow: 0 0 15px #fff; }
        .ff-back { background: none; border: none; color: #ffcc00; cursor: pointer; margin-bottom: 20px; font-size: 12px; }
        .fade-in { animation: fadeInFF 1.5s ease-out; }
        @keyframes fadeInFF { from { opacity: 0; } to { opacity: 1; } }
      `})]})}function _O(){const[i,e]=w.useState([]),[n,s]=w.useState([]),[o,c]=w.useState(""),[f,m]=w.useState(""),[g,b]=w.useState("jogador"),[_,E]=w.useState(""),[N,z]=w.useState(!1);w.useEffect(()=>{Nt&&Nt.pause()},[]),w.useEffect(()=>{H()},[]);const H=async()=>{try{const ge=(await Sm(St(Ae,"users"))).docs.map(C=>({id:C.id,...C.data()})).filter(C=>C.email!=="fffvtt10@gmail.com"),O=(await Sm(St(Ae,"characters"))).docs.map(C=>({id:C.id,...C.data()}));e(ge),s(O)}catch(ae){console.error("Erro ao carregar dados do ter: ",ae)}},U=async ae=>{if(ae.preventDefault(),!o||!f)return alert("Preencha todos os campos!");z(!0);let ge=null;try{ge=zm(iA,"SecondaryApp");const fe=v1(ge);window.location.hostname==="localhost"&&Fm(fe,"http://127.0.0.1:9099");const C=(await rC(fe,o,f)).user;await Dg(Ue(Ae,"users",C.uid),{email:o,role:g,uid:C.uid,active:!0,createdAt:En()}),await dC(fe),alert(`Usurio ${o} invocado com sucesso!`),c(""),m(""),H()}catch(fe){console.error(fe),alert("Erro ao invocar usurio: "+fe.message)}finally{ge&&await XN(ge),z(!1)}},D=async(ae,ge)=>{if(window.confirm(`Deseja banir permanentemente ${ge} do ter?`))try{await fi(Ue(Ae,"users",ae)),await fi(Ue(Ae,"characters",ae)),alert("Conta e personagem banidos com sucesso."),H()}catch(fe){alert("Erro ao banir usurio: "+fe.message)}},X=async ae=>{if(window.confirm("Tem certeza que deseja apagar APENAS o personagem deste usurio? Ele ter que criar outro."))try{await fi(Ue(Ae,"characters",ae)),alert("Personagem deletado. O usurio continua ativo."),H()}catch(ge){alert("Erro ao deletar personagem: "+ge.message)}},Y=ae=>{const ge=n.find(fe=>fe.uid===ae);return ge||null},ee=async()=>{if(_.length<6)return alert("A senha deve ter no mnimo 6 caracteres.");try{await oC(Ot.currentUser,_),alert("Sua chave de mestre foi alterada!"),E("")}catch{alert("Erro ao trocar senha. Tente fazer login novamente.")}};return u.jsxs("div",{className:"admin-container",children:[u.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"background-video-admin",children:u.jsx("source",{src:Pg,type:"video/mp4"})}),u.jsxs("div",{className:"admin-overlay",children:[u.jsx("h1",{className:"admin-title",children:"PAINEL DO ADMINISTRADOR"}),u.jsxs("div",{className:"admin-grid",children:[u.jsxs("div",{className:"admin-card",children:[u.jsx("h3",{children:"INVOCAR NOVO JOGADOR"}),u.jsxs("form",{onSubmit:U,children:[u.jsx("input",{placeholder:"E-mail Arcano",type:"email",value:o,onChange:ae=>c(ae.target.value),required:!0}),u.jsx("input",{placeholder:"Palavra-Passe",type:"text",value:f,onChange:ae=>m(ae.target.value),required:!0}),u.jsxs("select",{value:g,onChange:ae=>b(ae.target.value),children:[u.jsx("option",{value:"jogador",children:"Jogador"}),u.jsx("option",{value:"mestre",children:"Mestre"})]}),u.jsx("button",{type:"submit",disabled:N,className:"btn-summon",children:N?"INVOCANDO...":"CRIAR ACESSO"})]})]}),u.jsxs("div",{className:"admin-card scroll-card",children:[u.jsxs("h3",{children:["ALMAS REGISTRADAS (",i.length,")"]}),u.jsx("div",{className:"list-container",children:i.map(ae=>{const ge=Y(ae.id);return u.jsxs("div",{className:"list-item",children:[u.jsxs("div",{className:"item-info",children:[u.jsx("span",{className:"item-main",children:ae.email}),u.jsx("span",{className:`badge ${ae.role}`,children:ae.role.toUpperCase()}),ge&&u.jsxs("span",{style:{fontSize:"10px",color:"#ffcc00",marginTop:"2px"},children:[" ",ge.name]})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[u.jsx("button",{className:"btn-ban",onClick:()=>D(ae.id,ae.email),children:"BANIR"}),ge&&u.jsx("button",{className:"btn-ban",style:{borderColor:"#f80",color:"#f80"},onClick:()=>X(ae.id),children:"DEL CHAR"})]})]},ae.id)})})]}),u.jsxs("div",{className:"admin-card",children:[u.jsx("h3",{children:"MINHA CHAVE MESTRA"}),u.jsx("input",{type:"password",placeholder:"Nova Senha",value:_,onChange:ae=>E(ae.target.value)}),u.jsx("button",{className:"btn-summon",style:{background:"#333",border:"1px solid #fff"},onClick:ee,children:"ATUALIZAR"})]})]})]}),u.jsx("style",{children:`
        .admin-container { width: 100vw; height: 100vh; overflow: hidden; position: relative; font-family: 'Cinzel', serif; color: #fff; background: #000; }
        .background-video-admin { position: absolute; top: 50%; left: 50%; width: 100%; height: 100%; object-fit: cover; transform: translate(-50%, -50%); opacity: 0.4; pointer-events: none; }
        .admin-overlay { position: relative; z-index: 10; padding: 40px; display: flex; flex-direction: column; height: 100%; }
        .admin-title { color: #ffcc00; text-align: center; font-size: 32px; letter-spacing: 5px; margin-bottom: 30px; text-shadow: 0 0 10px #ffcc00; }
        .admin-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 30px; height: 100%; }
        .admin-card { background: rgba(0, 10, 20, 0.9); border: 1px solid #ffcc00; border-radius: 8px; padding: 20px; display: flex; flex-direction: column; backdrop-filter: blur(10px); }
        .admin-card h3 { color: #00f2ff; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0; font-size: 16px; letter-spacing: 2px; }
        .scroll-card .list-container { overflow-y: auto; flex: 1; padding-right: 5px; }
        .scroll-card .list-container::-webkit-scrollbar { width: 5px; }
        .scroll-card .list-container::-webkit-scrollbar-thumb { background: #333; }
        
        input, select { background: #000; border: 1px solid #444; color: #fff; padding: 12px; width: 100%; margin-bottom: 15px; font-family: 'serif'; outline: none; }
        input:focus, select:focus { border-color: #ffcc00; }
        
        .btn-summon { width: 100%; background: #ffcc00; color: #000; border: none; padding: 12px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-summon:hover:not(:disabled) { background: #fff; box-shadow: 0 0 15px #fff; }
        .btn-summon:disabled { background: #333; color: #666; cursor: not-allowed; }

        .list-item { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); padding: 10px; margin-bottom: 8px; border-radius: 4px; border: 1px solid transparent; }
        .list-item:hover { border-color: #00f2ff; }
        .item-info { display: flex; flex-direction: column; }
        .item-main { font-weight: bold; color: #eee; font-size: 14px; }
        .item-sub { font-size: 10px; color: #aaa; }
        
        .badge { font-size: 10px; padding: 2px 6px; border-radius: 4px; font-weight: bold; color: #000; text-transform: uppercase; margin-right: 5px; }
        .badge.jogador { background: #00f2ff; }
        .badge.mestre { background: #ffcc00; }
        
        .btn-ban { background: transparent; border: 1px solid #f44; color: #f44; font-size: 10px; padding: 4px 8px; cursor: pointer; }
        .btn-ban:hover { background: #f44; color: #fff; }
      `})]})}const sA="/assets/fundo-mestre-OTxRyTTC.jpg",Vg="/assets/sanchez-1nilABmc.jpeg",zg="/assets/papiro-CRka9pgw.png",EO="/assets/bazar-DZ7p321B.png";function Lg({isMestre:i,playerData:e,vttDock:n}){const[s,o]=w.useState(!1),[c,f]=w.useState([]),[m,g]=w.useState([]),[b,_]=w.useState(""),[E,N]=w.useState(null),[z,H]=w.useState(""),[U,D]=w.useState({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""});w.useEffect(()=>{if(!s)return;const j=Rn(St(Ae,"game_items"),na("status","==","bazar"),Hi("updatedAt","desc")),T=Cn(j,Te=>{f(Te.docs.map(Se=>({id:Se.id,...Se.data()})))});return()=>T()},[s]),w.useEffect(()=>{if(!s||!i)return;const j=Rn(St(Ae,"game_items"),na("status","==","vault"),Hi("nome","asc")),T=Cn(j,Te=>{const Se=Te.docs.map(G=>({id:G.id,...G.data()})).filter(G=>!G.ownerId);g(Se)});return()=>T()},[s,i]);const X=j=>{const T=j.target.value;if(H(T),!T)return;const Te=m.find(Se=>Se.id===T);Te&&D({...U,nome:Te.nome,descricao:Te.descricao,imagem:Te.imagem,valorGil:"",valorReal:""})},Y=async j=>{if(j.preventDefault(),!U.nome||!U.valorGil)return alert("Preencha nome e valor em Gil!");try{const T={...U,updatedAt:En()};E?(await wt(Ue(Ae,"game_items",E),T),N(null)):z?(await wt(Ue(Ae,"game_items",z),{...T,status:"bazar"}),H("")):await Ls(St(Ae,"game_items"),{...T,status:"bazar",ownerId:null,createdAt:En()}),D({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""})}catch{alert("Erro ao salvar item no Bazar.")}},ee=async j=>{window.confirm("Remover do mercado? O item voltar para a Forja.")&&await wt(Ue(Ae,"game_items",j),{status:"vault",updatedAt:En()})},ae=async j=>{if(!Ot.currentUser)return alert("Voc precisa estar logado.");const T=e?.character_sheet?.inventory?.gil||0,Te=Number(j.valorGil);if(T<Te)return alert(`Saldo insuficiente! Voc tem ${T} Gil, mas o item custa ${Te} Gil.`);if(window.confirm(`Comprar "${j.nome}" por ${j.valorGil} Gil?`))try{const G=T-Te,ce=Ue(Ae,"characters",Ot.currentUser.uid),_e=JSON.parse(JSON.stringify(e.character_sheet));_e.inventory.gil=G,await Dg(ce,{character_sheet:_e},{merge:!0}),await wt(Ue(Ae,"game_items",j.id),{status:"requested",ownerId:Ot.currentUser.uid,buyerName:e.name,updatedAt:En()}),alert(`Solicitao enviada! O Mestre aprovar a entrega em breve. Saldo restante: ${G} Gil.`)}catch(G){console.error("Erro na compra:",G),alert("Erro na transao. Verifique o console.")}},[ge,fe]=w.useState([]);w.useEffect(()=>{if(!i||!s)return;const j=Rn(St(Ae,"game_items"),na("status","==","requested")),T=Cn(j,Te=>{fe(Te.docs.map(Se=>({id:Se.id,...Se.data()})))});return()=>T()},[i,s]);const O=async j=>{try{await wt(Ue(Ae,"game_items",j.id),{status:"vault",ownerId:j.ownerId,buyerName:j.buyerName,updatedAt:En()}),alert(`Venda aprovada! O item "${j.nome}" foi enviado para o Cofre Pessoal de ${j.buyerName}.`)}catch{alert("Erro ao aprovar.")}},C=j=>{N(j.id),H(""),D(j)},I=()=>{N(null),H(""),D({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""})},V=c.filter(j=>j.nome.toLowerCase().includes(b.toLowerCase())),k=j=>j&&j.startsWith("http")?`url(${j})`:"url('https://via.placeholder.com/150?text=Item')";return u.jsxs(u.Fragment,{children:[u.jsx("button",{className:`bazar-trigger-btn ${n?"vtt-dock-style":""}`,onClick:()=>o(!0),title:"Abrir Bazar",children:u.jsx("img",{src:EO,alt:"Bazar",onError:j=>{j.target.style.display="none",j.target.parentNode.innerText="BAZAR"}})}),s&&u.jsx("div",{className:"bazar-overlay-flex",onClick:()=>o(!1),children:u.jsxs("div",{className:"bazar-modal-centered",onClick:j=>j.stopPropagation(),children:[u.jsxs("div",{className:"bazar-header",children:[u.jsx("h2",{children:"MERCADO NEGRO"}),u.jsx("button",{className:"close-btn",onClick:()=>o(!1),children:""})]}),i&&u.jsxs("div",{className:"mestre-panel",children:[ge.length>0&&u.jsxs("div",{className:"requests-box",children:[u.jsxs("h4",{children:["PEDIDOS DE COMPRA (",ge.length,")"]}),ge.map(j=>u.jsxs("div",{className:"request-row",children:[u.jsxs("span",{children:[u.jsx("strong",{children:j.buyerName})," quer comprar ",u.jsx("strong",{children:j.nome})," (",j.valorGil," G)"]}),u.jsx("button",{className:"btn-approve",onClick:()=>O(j),children:"APROVAR ENTREGA"})]},j.id))]}),u.jsxs("form",{onSubmit:Y,className:"bazar-form",children:[!E&&u.jsx("div",{className:"row",style:{marginBottom:"10px"},children:u.jsxs("select",{className:"bazar-input",onChange:X,value:z,children:[u.jsx("option",{value:"",children:" Selecionar Item do Cofre (Forja)..."}),m.map(j=>u.jsx("option",{value:j.id,children:j.nome},j.id))]})}),u.jsxs("div",{className:"row",children:[u.jsx("input",{placeholder:"Nome do Item",value:U.nome,onChange:j=>D({...U,nome:j.target.value}),className:"bazar-input",readOnly:!!z&&!E}),u.jsx("input",{placeholder:"Link Imagem",value:U.imagem,onChange:j=>D({...U,imagem:j.target.value}),className:"bazar-input"})]}),u.jsxs("div",{className:"row",children:[u.jsx("input",{placeholder:"Valor Gil",type:"number",value:U.valorGil,onChange:j=>D({...U,valorGil:j.target.value}),className:"bazar-input",required:!0}),u.jsx("input",{placeholder:"Valor Real (R$)",type:"number",value:U.valorReal,onChange:j=>D({...U,valorReal:j.target.value}),className:"bazar-input"})]}),u.jsx("textarea",{placeholder:"Descrio do item...",value:U.descricao,onChange:j=>D({...U,descricao:j.target.value}),className:"bazar-input area"}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"submit",className:"btn-save",children:E?"SALVAR ALTERAES":z?"COLOCAR  VENDA":"CRIAR E VENDER"}),(E||z)&&u.jsx("button",{type:"button",onClick:I,className:"btn-cancel",children:"CANCELAR"})]})]})]}),u.jsx("div",{className:"search-bar-container",children:u.jsx("input",{type:"text",placeholder:" Procurar mercadoria...",value:b,onChange:j=>_(j.target.value),className:"search-input"})}),u.jsxs("div",{className:"bazar-grid",children:[V.map(j=>u.jsxs("div",{className:"bazar-item-card",children:[u.jsx("div",{className:"item-img",style:{backgroundImage:k(j.imagem)}}),u.jsxs("div",{className:"item-info",children:[u.jsx("h4",{children:j.nome}),u.jsx("p",{className:"desc",children:j.descricao}),u.jsxs("div",{className:"prices",children:[u.jsxs("span",{className:"price-tag gil",children:[" ",j.valorGil," G"]}),j.valorReal&&u.jsxs("span",{className:"price-tag real",children:[" R$ ",j.valorReal]})]})]}),u.jsx("div",{className:"item-actions",children:i?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-icon edit",onClick:()=>C(j),title:"Editar Preo",children:""}),u.jsx("button",{className:"btn-icon delete",onClick:()=>ee(j.id),title:"Devolver para a Forja",children:""})]}):u.jsx("button",{className:"btn-buy",onClick:()=>ae(j),children:"COMPRAR"})})]},j.id)),V.length===0&&u.jsx("p",{className:"empty-msg",children:"Nenhum item  venda no momento."})]})]})}),u.jsx("style",{children:`
        /* ESTILO PADRO (FIXO) */
        .bazar-trigger-btn { position: fixed; bottom: 30px; right: 30px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #ffcc00; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; }
        .bazar-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 25px #ffcc00; }
        .bazar-trigger-btn img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }

        /* ESTILO QUANDO NO DOCK DO VTT (SOBRESCREVE O FIXO) */
        .bazar-trigger-btn.vtt-dock-style {
            position: relative; 
            bottom: auto; 
            right: auto; 
            width: 50px; 
            height: 50px; 
            margin: 0; 
            z-index: auto;
            border: 2px solid #555;
            background: #111;
            box-shadow: 0 0 10px #000;
        }
        .bazar-trigger-btn.vtt-dock-style:hover {
            border-color: #ffcc00;
            color: #ffcc00;
            transform: scale(1.1);
        }

        .bazar-overlay-flex { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 100000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .bazar-modal-centered { width: 800px; max-width: 95vw; height: 750px; max-height: 90vh; background: #0d0d15; border: 1px solid #ffcc00; display: flex; flex-direction: column; box-shadow: 0 0 50px rgba(0,0,0,0.8); border-radius: 8px; overflow: hidden; }
        .bazar-header { background: linear-gradient(90deg, #1a1a1a, #000); padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #ffcc00; }
        .bazar-header h2 { margin: 0; color: #ffcc00; font-family: serif; letter-spacing: 2px; text-shadow: 0 0 10px #ffcc00; font-size: 24px; }
        .close-btn { background: transparent; border: none; color: #fff; font-size: 30px; cursor: pointer; }
        .mestre-panel { background: rgba(255, 204, 0, 0.05); padding: 15px; border-bottom: 1px solid #333; }
        .requests-box { background: rgba(0, 242, 255, 0.1); border: 1px solid #00f2ff; padding: 10px; margin-bottom: 15px; border-radius: 4px; }
        .requests-box h4 { color: #00f2ff; margin: 0 0 10px 0; font-size: 12px; }
        .request-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; font-size: 12px; color: #fff; }
        .btn-approve { background: #00f2ff; color: #000; border: none; padding: 5px 10px; font-weight: bold; cursor: pointer; border-radius: 3px; }
        .bazar-form { display: flex; flex-direction: column; gap: 10px; }
        .bazar-form .row { display: flex; gap: 10px; }
        .bazar-input { background: #000; border: 1px solid #444; color: #fff; padding: 10px; flex: 1; outline: none; font-family: serif; }
        .bazar-input.area { height: 60px; resize: none; }
        .form-actions { display: flex; gap: 10px; }
        .btn-save { flex: 1; background: #ffcc00; border: none; padding: 10px; font-weight: bold; cursor: pointer; color: #000; }
        .btn-cancel { background: #333; color: #fff; border: 1px solid #555; padding: 10px; cursor: pointer; }
        .search-bar-container { padding: 15px; background: #000; border-bottom: 1px solid #333; }
        .search-input { width: 100%; background: #111; border: 1px solid #444; color: #fff; padding: 12px; border-radius: 20px; text-align: center; outline: none; font-size: 16px; }
        .bazar-grid { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; scrollbar-width: none; -ms-overflow-style: none; }
        .bazar-grid::-webkit-scrollbar { display: none; }
        .bazar-item-card { background: linear-gradient(90deg, rgba(20,20,30,0.9), rgba(0,0,0,0.8)); border: 1px solid #444; display: flex; align-items: center; padding: 10px; border-radius: 4px; transition: 0.2s; }
        .bazar-item-card:hover { border-color: #00f2ff; box-shadow: 0 0 15px rgba(0, 242, 255, 0.1); }
        .item-img { width: 80px; height: 80px; background-size: cover; background-position: center; border: 1px solid #666; margin-right: 15px; border-radius: 4px; background-color: #000; }
        .item-info { flex: 1; }
        .item-info h4 { margin: 0 0 5px 0; color: #fff; font-size: 18px; letter-spacing: 1px; }
        .item-info .desc { margin: 0 0 10px 0; color: #aaa; font-size: 12px; font-style: italic; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .prices { display: flex; gap: 10px; }
        .price-tag { padding: 4px 8px; border-radius: 3px; font-weight: bold; font-size: 12px; }
        .price-tag.gil { background: rgba(255,255,0,0.1); color: #ffcc00; border: 1px solid #ffcc00; }
        .price-tag.real { background: rgba(0, 242, 255, 0.1); color: #00f2ff; border: 1px solid #00f2ff; }
        .item-actions { display: flex; gap: 8px; align-items: center; margin-left: 15px; }
        .btn-buy { background: #00f2ff; color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; clip-path: polygon(10% 0, 100% 0, 100% 70%, 90% 100%, 0 100%, 0 30%); transition: 0.2s; }
        .btn-buy:hover { background: #fff; box-shadow: 0 0 15px #00f2ff; }
        .btn-icon { background: transparent; border: 1px solid #444; color: #fff; padding: 8px; cursor: pointer; border-radius: 4px; font-size: 16px; }
        .btn-icon:hover { background: #fff; color: #000; }
        .btn-icon.delete:hover { background: #f44; border-color: #f44; color: #fff; }
        .empty-msg { text-align: center; color: #666; margin-top: 50px; font-style: italic; }
      `})]})}const AO="/assets/forja-Dr7AylP_.png";function rA({vttDock:i}){const[e,n]=w.useState(!1),[s,o]=w.useState([]),[c,f]=w.useState(""),[m,g]=w.useState(null),[b,_]=w.useState({nome:"",descricao:"",imagem:""});w.useEffect(()=>{if(!e)return;const D=Rn(St(Ae,"game_items"),na("status","==","vault"),Hi("createdAt","desc")),X=Cn(D,Y=>{o(Y.docs.map(ee=>({id:ee.id,...ee.data()})))});return()=>X()},[e]);const E=async D=>{if(D.preventDefault(),!b.nome)return alert("O item precisa de um nome!");try{const X={...b,updatedAt:En()};m?(await wt(Ue(Ae,"game_items",m),X),g(null)):await Ls(St(Ae,"game_items"),{...X,status:"vault",ownerId:null,valorGil:0,createdAt:En()}),_({nome:"",descricao:"",imagem:""})}catch(X){alert("Erro ao forjar item."),console.error(X)}},N=async D=>{window.confirm("ATENO: Isso destruir o item permanentemente. Deseja continuar?")&&await fi(Ue(Ae,"game_items",D))},z=D=>{g(D.id),_(D)},H=()=>{g(null),_({nome:"",descricao:"",imagem:""})},U=s.filter(D=>D.nome.toLowerCase().includes(c.toLowerCase()));return u.jsxs(u.Fragment,{children:[u.jsx("button",{className:`forja-trigger-btn ${i?"vtt-dock-style":""}`,onClick:()=>n(!0),title:"Abrir Forja",children:u.jsx("img",{src:AO,alt:"Forja",onError:D=>{D.target.style.display="none",D.target.parentNode.innerText="FORJA"}})}),e&&u.jsx("div",{className:"forja-overlay",onClick:()=>n(!1),children:u.jsxs("div",{className:"forja-modal",onClick:D=>D.stopPropagation(),children:[u.jsxs("div",{className:"forja-header",children:[u.jsx("h2",{children:"A FORJA ANTIGA"}),u.jsx("button",{className:"close-btn",onClick:()=>n(!1),children:""})]}),u.jsxs("div",{className:"mestre-panel-forja",children:[u.jsx("h4",{style:{color:"#f44",margin:"0 0 10px 0"},children:"FORJAR NOVO ARTEFATO"}),u.jsxs("form",{onSubmit:E,className:"forja-form",children:[u.jsxs("div",{className:"row",children:[u.jsx("input",{placeholder:"Nome do Artefato",value:b.nome,onChange:D=>_({...b,nome:D.target.value}),className:"forja-input"}),u.jsx("input",{placeholder:"URL da Imagem (Imgur)",value:b.imagem,onChange:D=>_({...b,imagem:D.target.value}),className:"forja-input"})]}),u.jsx("textarea",{placeholder:"Descrio detalhada e lore do item...",value:b.descricao,onChange:D=>_({...b,descricao:D.target.value}),className:"forja-input area"}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"submit",className:"btn-forjar",children:m?"REFUNDIR (SALVAR)":"FORJAR ITEM"}),m&&u.jsx("button",{type:"button",onClick:H,className:"btn-cancel",children:"CANCELAR"})]})]})]}),u.jsx("div",{className:"search-bar-container-forja",children:u.jsx("input",{type:"text",placeholder:" Buscar nos arquivos da forja...",value:c,onChange:D=>f(D.target.value),className:"search-input-forja"})}),u.jsxs("div",{className:"forja-grid",children:[U.map(D=>u.jsxs("div",{className:"forja-item-card",children:[u.jsx("div",{className:"item-img",style:{backgroundImage:`url(${D.imagem||"https://via.placeholder.com/150?text=?"})`}}),u.jsxs("div",{className:"item-info",children:[u.jsx("h4",{children:D.nome}),D.ownerId&&u.jsxs("div",{className:"owner-tag",children:["COMPRADO POR: ",D.buyerName||"Jogador"]}),u.jsx("p",{className:"desc",children:D.descricao}),u.jsxs("small",{style:{color:"#666"},children:["Status: ",D.ownerId?"Cofre Pessoal":"Cofre Global"]})]}),u.jsxs("div",{className:"item-actions",children:[u.jsx("button",{className:"btn-icon edit",onClick:()=>z(D),title:"Editar",children:""}),u.jsx("button",{className:"btn-icon delete",onClick:()=>N(D.id),title:"Destruir",children:""})]})]},D.id)),U.length===0&&u.jsx("p",{className:"empty-msg",children:"A forja est fria. Nenhum item no cofre."})]})]})}),u.jsx("style",{children:`
        /* ESTILO PADRO (FIXO) */
        .forja-trigger-btn { position: fixed; bottom: 30px; right: 110px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #f44; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; color: #f44; font-weight: bold; font-size: 10px; }
        .forja-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 20px #f44; }
        .forja-trigger-btn img { width: 80%; height: 80%; object-fit: contain; }

        /* ESTILO QUANDO NO DOCK DO VTT (SOBRESCREVE O FIXO) */
        .forja-trigger-btn.vtt-dock-style {
            position: relative; 
            bottom: auto; 
            right: auto; 
            width: 50px; 
            height: 50px; 
            margin: 0; 
            z-index: auto;
            border: 2px solid #555;
            background: #111;
            box-shadow: 0 0 10px #000;
        }
        .forja-trigger-btn.vtt-dock-style:hover {
            border-color: #ffcc00;
            color: #ffcc00;
            transform: scale(1.1);
        }

        .forja-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 100000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .forja-modal { width: 800px; max-height: 90vh; background: #150a0a; border: 1px solid #f44; display: flex; flex-direction: column; box-shadow: 0 0 50px rgba(255, 68, 68, 0.2); border-radius: 8px; overflow: hidden; }
        .forja-header { background: linear-gradient(90deg, #2a0e0e, #000); padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #f44; }
        .forja-header h2 { margin: 0; color: #f44; font-family: serif; letter-spacing: 2px; text-shadow: 0 0 10px #f44; font-size: 24px; }
        .close-btn { background: transparent; border: none; color: #fff; font-size: 30px; cursor: pointer; }
        .mestre-panel-forja { background: rgba(255, 68, 68, 0.05); padding: 20px; border-bottom: 1px solid #333; }
        .forja-form { display: flex; flex-direction: column; gap: 10px; }
        .forja-form .row { display: flex; gap: 10px; }
        .forja-input { background: #000; border: 1px solid #522; color: #fff; padding: 10px; flex: 1; outline: none; font-family: serif; }
        .forja-input:focus { border-color: #f44; }
        .forja-input.area { height: 80px; resize: none; }
        .btn-forjar { flex: 1; background: #f44; border: none; padding: 12px; font-weight: bold; cursor: pointer; color: #fff; text-transform: uppercase; letter-spacing: 1px; }
        .btn-forjar:hover { background: #d00; box-shadow: 0 0 10px #d00; }
        .btn-cancel { background: #333; color: #fff; border: 1px solid #555; padding: 10px; cursor: pointer; }
        .search-bar-container-forja { padding: 15px; background: #000; border-bottom: 1px solid #333; }
        .search-input-forja { width: 100%; background: #111; border: 1px solid #522; color: #fff; padding: 12px; border-radius: 20px; text-align: center; outline: none; font-size: 16px; }
        .forja-grid { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; scrollbar-width: none; -ms-overflow-style: none; }
        .forja-grid::-webkit-scrollbar { display: none; }
        .forja-item-card { background: linear-gradient(90deg, rgba(40,10,10,0.9), rgba(0,0,0,0.8)); border: 1px solid #522; display: flex; align-items: center; padding: 10px; border-radius: 4px; transition: 0.2s; }
        .forja-item-card:hover { border-color: #f44; }
        .item-img { width: 70px; height: 70px; background-size: cover; background-position: center; border: 1px solid #633; margin-right: 15px; border-radius: 4px; background-color: #000; }
        .item-info { flex: 1; }
        .item-info h4 { margin: 0 0 5px 0; color: #fff; font-size: 18px; }
        .item-info .desc { margin: 0; color: #aaa; font-size: 12px; font-style: italic; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .owner-tag { background: #00f2ff; color: #000; font-size: 10px; font-weight: bold; padding: 2px 6px; border-radius: 4px; display: inline-block; margin-bottom: 4px; }
        .item-actions { display: flex; gap: 8px; margin-left: 15px; }
        .btn-icon { background: transparent; border: 1px solid #444; color: #fff; padding: 8px; cursor: pointer; border-radius: 4px; }
        .btn-icon:hover { background: #fff; color: #000; }
        .btn-icon.delete:hover { background: #f44; border-color: #f44; color: #fff; }
        .empty-msg { text-align: center; color: #666; margin-top: 50px; font-style: italic; }
      `})]})}const wO=({isOpen:i,onClose:e,onSave:n,label:s})=>{const[o,c]=w.useState("");return i?u.jsx("div",{className:"img-modal-overlay",onClick:e,children:u.jsxs("div",{className:"img-modal-content",onClick:f=>f.stopPropagation(),children:[u.jsxs("h3",{children:["ALTERAR IMAGEM: ",s.toUpperCase()]}),u.jsx("input",{placeholder:"Cole o link da imagem (Imgur, Discord, etc)...",value:o,onChange:f=>c(f.target.value),autoFocus:!0}),u.jsxs("div",{className:"img-modal-actions",children:[u.jsx("button",{onClick:()=>{n(o),e()},className:"btn-confirm",children:"CONFIRMAR"}),u.jsx("button",{onClick:e,className:"btn-cancel",children:"CANCELAR"})]})]})}):null};function Ug({characterData:i,isMaster:e,onClose:n}){const[s,o]=w.useState(i.character_sheet||{}),[c,f]=w.useState("geral"),[m,g]=w.useState(!1),[b,_]=w.useState(!1),[E,N]=w.useState(!1),[z,H]=w.useState(""),[U,D]=w.useState(null),[X,Y]=w.useState(!1),[ee,ae]=w.useState([]),[ge,fe]=w.useState(null),[O,C]=w.useState(null),[I,V]=w.useState(null),[k,j]=w.useState(null);w.useRef(s.basic_info?.level),w.useEffect(()=>{i&&i.character_sheet&&o(i.character_sheet)},[i]);const T=(B,ve)=>{if(!e)return;const le=JSON.parse(JSON.stringify(s)),Ne=B.split(".");let Ce=le;for(let it=0;it<Ne.length-1;it++)Ce[Ne[it]]||(Ce[Ne[it]]={}),Ce=Ce[Ne[it]];Ce[Ne[Ne.length-1]]=ve,o(le),_(!0)},Te=async()=>{try{const B=Ue(Ae,"characters",i.uid||i.id);await wt(B,{character_sheet:s}),_(!1)}catch(B){console.error("Erro ao salvar:",B),alert("Erro ao salvar ficha.")}},Se=(B,ve)=>{e&&(H(B),D(()=>ve),N(!0))},G=(B,ve,le,Ne)=>{e&&(V({skill:ve,index:Ne}),j(le),B.dataTransfer.effectAllowed="move")},ce=B=>{B.preventDefault()},_e=(B,ve,le)=>{if(B.preventDefault(),!I||!e)return;const Ne=JSON.parse(JSON.stringify(s)),Ce=Ne.job_system[k==="primary"?"primary_class":"secondary_class"].skills,it=Ne.job_system[ve==="primary"?"primary_class":"secondary_class"].skills,[Xe]=Ce.splice(I.index,1);k===ve?Ce.splice(le,0,Xe):it.splice(le,0,Xe),o(Ne),_(!0),V(null),j(null)},Pe=B=>{const ve=()=>"_"+Math.random().toString(36).substr(2,9),le=JSON.parse(JSON.stringify(s));le.job_system[B].skills.push({id:ve(),name:"",cost:"",effect:"",xp:{current:0,max:100},master:!1}),o(le),_(!0)},He=(B,ve)=>{if(!window.confirm("Remover este slot de habilidade?"))return;const le=JSON.parse(JSON.stringify(s));le.job_system[B].skills.splice(ve,1),o(le),_(!0)},P=(B,ve)=>{const le=JSON.parse(JSON.stringify(s)),Ne=le.job_system[B].skills[ve];Ne.master=!0,Ne.xp.current=Ne.xp.max,o(le),_(!0)},Z=async B=>{if(!e)return;fe(B);const ve=Rn(St(Ae,"game_items"),na("status","==","vault")),Ce=(await Sm(ve)).docs.map(it=>({id:it.id,...it.data()})).filter(it=>!it.ownerId||it.ownerId===(i.uid||i.id));ae(Ce),Y(!0)},ue=async B=>{const ve=JSON.parse(JSON.stringify(s));ve.equipment.slots[ge]={item_id:B.id,item_name:B.nome,item_img:B.imagem,description:B.descricao,effect:""},o(ve),_(!0);const le=Ue(Ae,"game_items",B.id);await wt(le,{status:"equipped",ownerId:i.uid||i.id,slotIndex:ge,updatedAt:En()}),Y(!1)},be=async B=>{if(!e)return;const ve=s.equipment.slots[B];if(ve.item_id&&window.confirm("Isso devolver o item para a Forja (Cofre). Confirmar?")){const Ne=Ue(Ae,"game_items",ve.item_id);await wt(Ne,{status:"vault",slotIndex:null,updatedAt:En()})}const le=JSON.parse(JSON.stringify(s));le.equipment.slots[B]={item_name:"",item_img:"",effect:""},o(le),_(!0)},oe=async()=>{e&&(g(!0),setTimeout(async()=>{g(!1);const B=s.basic_info.level||1,ve=Math.floor(s.basic_info.experience.max*1.5),le=JSON.parse(JSON.stringify(s));le.basic_info.level=B+1,le.basic_info.experience.current=0,le.basic_info.experience.max=ve,o(le);const Ne=Ue(Ae,"characters",i.uid||i.id);await wt(Ne,{character_sheet:le})},4e3))},xe=["FOR","INT","SOR","CAR","VEL","CONS"],ye=100,Ye=85,Qe=125,Bt=(B,ve,le)=>{const Ne=Math.PI*2*ve/le-Math.PI/2,Ce=Qe+Ye*(B/ye)*Math.cos(Ne),it=Qe+Ye*(B/ye)*Math.sin(Ne);return{x:Ce,y:it}},Ht=xe.map((B,ve)=>{const le=s.attributes?.[B]?.value||0,{x:Ne,y:Ce}=Bt(le,ve,xe.length);return`${Ne},${Ce}`}).join(" "),pe=B=>B&&B.length>5?{backgroundImage:`url(${B})`}:{backgroundColor:"#111",border:"1px solid #333"};return u.jsxs("div",{className:"ficha-overlay-fixed",children:[u.jsx(wO,{isOpen:E,onClose:()=>N(!1),onSave:U,label:z}),e&&b&&u.jsx("button",{className:"save-fab glowing",onClick:Te,title:"Salvar Alteraes",children:""}),u.jsxs("div",{className:"ficha-container fade-in",children:[u.jsx("button",{className:"close-btn-ficha",onClick:n,children:""}),u.jsxs("div",{className:"ficha-header",children:[u.jsxs("div",{className:"header-left-group",style:{display:"flex",gap:"20px",alignItems:"flex-end"},children:[u.jsxs("div",{className:"guild-insignia-box",children:[u.jsx("span",{className:"header-label-top",children:"SIGNO"}),u.jsx("div",{className:`insignia-display ${e?"clickable":""}`,style:pe(s.basic_info.guild_insignia),onClick:()=>Se("Signo",B=>T("basic_info.guild_insignia",B)),title:e?"Clique para alterar imagem":""})]}),u.jsxs("div",{className:"guild-item-box",children:[u.jsx("span",{className:"header-label-top",children:"RAA"}),u.jsx("div",{className:`special-display ${e?"clickable":""}`,style:pe(s.basic_info.special_image),onClick:()=>Se("Raa",B=>T("basic_info.special_image",B)),title:e?"Clique para alterar imagem":""})]})]}),u.jsxs("div",{className:"header-info",children:[u.jsx("h1",{children:s.basic_info.character_name}),u.jsxs("span",{className:"sub-header",children:[s.basic_info.race," // ",i.class]}),u.jsxs("div",{className:"xp-container",children:[u.jsxs("div",{className:"lvl-box",children:[u.jsx("small",{children:"LVL"}),e?u.jsx("input",{className:"lvl-input",type:"number",value:s.basic_info.level,onChange:B=>T("basic_info.level",Number(B.target.value))}):u.jsx("span",{children:s.basic_info.level})]}),u.jsxs("div",{className:"xp-bar-box",children:[u.jsxs("div",{className:"xp-text",children:["XP ",e?u.jsx("input",{className:"xp-mini-input",value:s.basic_info.experience.current,onChange:B=>T("basic_info.experience.current",Number(B.target.value))}):s.basic_info.experience.current," / ",e?u.jsx("input",{className:"xp-mini-input",value:s.basic_info.experience.max,onChange:B=>T("basic_info.experience.max",Number(B.target.value))}):s.basic_info.experience.max]}),u.jsx("div",{className:"xp-track",children:u.jsx("div",{className:"xp-fill",style:{width:`${Math.min(s.basic_info.experience.current/s.basic_info.experience.max*100,100)}%`}})})]}),e&&s.basic_info.experience.current>=s.basic_info.experience.max&&u.jsx("button",{className:"btn-levelup glowing",onClick:oe,children:" UP"})]})]}),u.jsxs("div",{className:"header-right-group",children:[u.jsxs("div",{className:"guild-item-box",children:[u.jsx("span",{className:"header-label-top",children:"CLASSE 1"}),u.jsx("div",{className:`special-display ${e?"clickable":""}`,style:pe(s.basic_info.class1_image),onClick:()=>Se("Classe 1",B=>T("basic_info.class1_image",B)),title:e?"Clique para alterar imagem":""})]}),u.jsxs("div",{className:"guild-item-box",children:[u.jsx("span",{className:"header-label-top",children:"CLASSE 2"}),u.jsx("div",{className:`special-display ${e?"clickable":""}`,style:pe(s.basic_info.class2_image),onClick:()=>Se("Classe 2",B=>T("basic_info.class2_image",B)),title:e?"Clique para alterar imagem":""})]}),u.jsxs("div",{className:"guild-item-box",children:[u.jsx("span",{className:"header-label-top",children:"RANK"}),u.jsx("div",{className:`rank-display ${e?"clickable":""}`,style:pe(s.basic_info.guild_rank_image),onClick:()=>Se("Rank",B=>T("basic_info.guild_rank_image",B)),title:e?"Clique para alterar imagem":""})]})]})]}),u.jsxs("div",{className:"ficha-tabs",children:[u.jsx("button",{className:`tab-btn ${c==="geral"?"active":""}`,onClick:()=>f("geral"),children:"VISO GERAL"}),u.jsx("button",{className:`tab-btn ${c==="habilidades"?"active":""}`,onClick:()=>f("habilidades"),children:"GRIMRIO DE HABILIDADES"})]}),u.jsx("div",{className:"ficha-body",children:c==="geral"?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"col-attributes",children:[u.jsx("h3",{className:"section-title",children:"ATRIBUTOS"}),u.jsx("div",{className:"radar-wrapper",children:u.jsxs("svg",{width:"250",height:"250",viewBox:"0 0 250 250",children:[[20,40,60,80,100].map(B=>u.jsx("polygon",{points:xe.map((ve,le)=>{const{x:Ne,y:Ce}=Bt(B,le,6);return`${Ne},${Ce}`}).join(" "),fill:"none",stroke:"#333",strokeWidth:"1"},B)),u.jsx("polygon",{points:Ht,fill:"rgba(0, 242, 255, 0.2)",stroke:"#00f2ff",strokeWidth:"2"}),xe.map((B,ve)=>{const{x:le,y:Ne}=Bt(120,ve,6),Ce=s.attributes?.[B]?.value||0;return u.jsx("foreignObject",{x:le-20,y:Ne-15,width:"40",height:"30",children:u.jsxs("div",{className:"stat-box-chart",children:[u.jsx("span",{className:"sb-label",children:B}),e?u.jsx("input",{className:"sb-input",value:Ce,onChange:it=>T(`attributes.${B}.value`,Number(it.target.value))}):u.jsx("span",{className:"sb-val",children:Ce})]})},B)})]})}),u.jsxs("div",{className:"secondary-stats",children:[u.jsxs("div",{className:"stat-row",children:[u.jsx("label",{children:"HP"}),u.jsxs("div",{className:"stat-bars-inputs",children:[e?u.jsx("input",{value:s.status.hp.current,onChange:B=>T("status.hp.current",Number(B.target.value))}):u.jsx("span",{children:s.status.hp.current}),"/",e?u.jsx("input",{value:s.status.hp.max,onChange:B=>T("status.hp.max",Number(B.target.value))}):u.jsx("span",{children:s.status.hp.max})]})]}),u.jsxs("div",{className:"stat-row",children:[u.jsx("label",{children:"MP"}),u.jsxs("div",{className:"stat-bars-inputs mp",children:[e?u.jsx("input",{value:s.status.mp.current,onChange:B=>T("status.mp.current",Number(B.target.value))}):u.jsx("span",{children:s.status.mp.current}),"/",e?u.jsx("input",{value:s.status.mp.max,onChange:B=>T("status.mp.max",Number(B.target.value))}):u.jsx("span",{children:s.status.mp.max})]})]}),u.jsxs("div",{className:"stat-row-simple",children:[u.jsxs("div",{className:"s-box",children:[u.jsx("label",{children:"ARM"}),e?u.jsx("input",{value:s.status.arm.value,onChange:B=>T("status.arm.value",Number(B.target.value))}):u.jsx("span",{children:s.status.arm.value})]}),u.jsxs("div",{className:"s-box",children:[u.jsx("label",{children:"RES"}),e?u.jsx("input",{value:s.status.res.value,onChange:B=>T("status.res.value",Number(B.target.value))}):u.jsx("span",{children:s.status.res.value})]}),u.jsxs("div",{className:"s-box",children:[u.jsx("label",{children:"MOV"}),e?u.jsx("input",{value:s.status.mov?.value||3,onChange:B=>T("status.mov.value",Number(B.target.value))}):u.jsx("span",{children:s.status.mov?.value||3})]})]})]})]}),u.jsxs("div",{className:"col-center-equip",children:[u.jsx("div",{className:`char-image-frame ${e?"clickable":""}`,onClick:()=>Se("Personagem",B=>T("imgUrl",B)),title:e?"Clique para alterar foto":"",children:u.jsx("div",{className:"image-display",style:pe(s.imgUrl)})}),u.jsx("div",{className:"equip-slots-overlay",children:[{id:0,label:"CABEA",style:{top:"-30px",left:"50%",transform:"translateX(-50%)"}},{id:1,label:"ACESS. 2",style:{top:"80px",right:"-15px"}},{id:2,label:"MO DIR.",style:{bottom:"120px",right:"-15px"}},{id:3,label:"MO ESQ.",style:{bottom:"120px",left:"-15px"}},{id:4,label:"ACESS. 1",style:{top:"80px",left:"-15px"}},{id:5,label:"CORPO",style:{bottom:"-20px",left:"60px"}},{id:6,label:"PS",style:{bottom:"-20px",right:"60px"}}].map((B,ve)=>u.jsxs("div",{className:"equip-slot",style:B.style,children:[u.jsx("div",{className:"slot-label",children:B.label}),u.jsxs("div",{className:"slot-square",children:[!s.equipment?.slots?.[ve]?.item_img&&e&&u.jsx("button",{className:"btn-plus-item",onClick:()=>Z(ve),children:"+"}),s.equipment?.slots?.[ve]?.item_img?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"item-bg",style:pe(s.equipment.slots[ve].item_img)}),u.jsx("button",{className:"btn-eye-item",onClick:()=>C(s.equipment.slots[ve]),children:""}),e&&u.jsx("button",{className:"btn-return-forge",title:"Devolver para Forja",onClick:()=>be(ve),children:""})]}):!e&&u.jsx("span",{className:"empty-text",children:"Vazio"})]})]},ve))})]}),u.jsxs("div",{className:"col-inventory",children:[u.jsx("h3",{className:"section-title",children:"BOLSA & GIL"}),u.jsxs("div",{className:"gil-display",children:[u.jsx("span",{className:"coin-icon",children:""}),e?u.jsx("input",{type:"number",className:"gil-input-master",value:s.inventory.gil,onChange:B=>T("inventory.gil",Number(B.target.value))}):u.jsx("span",{className:"gil-amount",children:s.inventory.gil}),u.jsx("span",{className:"currency",children:"GIL"})]}),u.jsxs("div",{className:"items-list",children:[u.jsx("h4",{children:"MOCHILA"}),u.jsxs("div",{className:"items-scroll",children:[(s.inventory.items||[]).map((B,ve)=>u.jsx("div",{className:"inv-row",children:e?u.jsxs(u.Fragment,{children:[u.jsx("input",{className:"inv-name",value:B.name,onChange:le=>T(`inventory.items.${ve}.name`,le.target.value)}),u.jsx("input",{className:"inv-qtd",type:"number",value:B.quantity,onChange:le=>T(`inventory.items.${ve}.quantity`,Number(le.target.value))}),u.jsx("button",{className:"btn-x-red",onClick:()=>{const le=s.inventory.items.filter((Ne,Ce)=>Ce!==ve);T("inventory.items",le)},children:""})]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"i-name",children:B.name||"Slot Vazio"}),u.jsxs("span",{className:"i-qtd",children:["x",B.quantity||0]})]})},ve)),e&&u.jsx("button",{className:"add-item-btn",onClick:()=>T("inventory.items",[...s.inventory.items||[],{name:"Novo Item",quantity:1}]),children:"+ Slot"})]})]})]})]}):u.jsxs("div",{className:"skills-tab-content",children:[["primary_class","secondary_class"].map((B,ve)=>u.jsxs("div",{className:"skills-col",children:[u.jsxs("h3",{className:`class-header ${B==="secondary_class"?"secondary":""}`,children:[e?u.jsx("input",{className:"class-name-input",value:s.job_system?.[B]?.name,onChange:le=>T(`job_system.${B}.name`,le.target.value)}):s.job_system?.[B]?.name,e&&u.jsx("button",{className:"btn-add-skill-slot",onClick:()=>Pe(B),children:"+"})]}),u.jsx("div",{className:"skills-list",children:(s.job_system?.[B]?.skills||[]).map((le,Ne)=>u.jsxs("div",{className:`skill-card ${B==="secondary_class"?"secondary":""} ${le.master?"mastered":""}`,draggable:e,onDragStart:Ce=>G(Ce,le,B==="primary_class"?"primary":"secondary",Ne),onDragOver:ce,onDrop:Ce=>_e(Ce,B==="primary_class"?"primary":"secondary",Ne),children:[u.jsxs("div",{className:"skill-top",children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",flex:1},children:[le.master&&u.jsx("span",{className:"star-icon pulsing",children:""}),e?u.jsx("input",{placeholder:"Nome",value:le.name,onChange:Ce=>T(`job_system.${B}.skills.${Ne}.name`,Ce.target.value),className:"skill-name-in"}):u.jsx("strong",{className:"skill-name",children:le.name||"Slot Vazio"})]}),e?u.jsx("input",{placeholder:"Custo",value:le.cost,onChange:Ce=>T(`job_system.${B}.skills.${Ne}.cost`,Ce.target.value),className:"skill-cost-in"}):u.jsx("span",{className:"skill-cost",children:le.cost}),e&&u.jsx("button",{className:"btn-x-red-small",onClick:()=>He(B,Ne),children:""})]}),e?u.jsx("textarea",{placeholder:"Efeito...",value:le.effect,onChange:Ce=>T(`job_system.${B}.skills.${Ne}.effect`,Ce.target.value),className:"skill-desc-in"}):u.jsx("p",{className:"skill-desc",children:le.effect}),u.jsxs("div",{className:"skill-xp-box",children:[u.jsxs("div",{className:"xp-labels",children:[u.jsx("span",{children:"XP"}),e?u.jsxs("div",{style:{display:"flex"},children:[u.jsx("input",{className:"xp-tiny",value:le.xp?.current||0,onChange:Ce=>T(`job_system.${B}.skills.${Ne}.xp.current`,Number(Ce.target.value))})," /",u.jsx("input",{className:"xp-tiny",value:le.xp?.max||100,onChange:Ce=>T(`job_system.${B}.skills.${Ne}.xp.max`,Number(Ce.target.value))})]}):u.jsxs("span",{children:[le.xp?.current||0," / ",le.xp?.max||100]})]}),u.jsx("div",{className:`skill-track ${le.master?"grayed":""}`,children:u.jsx("div",{className:"skill-fill",style:{width:`${Math.min((le.xp?.current||0)/(le.xp?.max||100)*100,100)}%`}})}),e&&!le.master&&le.xp?.current>=le.xp?.max&&u.jsx("button",{className:"btn-masterize",onClick:()=>P(B,Ne),children:"MASTERIZAR"})]})]},le.id))})]},B)),u.jsx("div",{className:"skills-col extra-col",children:u.jsxs("div",{className:"extra-abilities-box",children:[u.jsxs("div",{className:"ability-row",children:[u.jsx("label",{children:"REAO"}),e?u.jsx("input",{value:s.job_system?.reaction_ability?.name,onChange:B=>T("job_system.reaction_ability.name",B.target.value),className:"ab-input"}):u.jsx("span",{children:s.job_system?.reaction_ability?.name||"-"})]}),u.jsxs("div",{className:"ability-row",children:[u.jsx("label",{children:"PASSIVA"}),e?u.jsx("input",{value:s.job_system?.passive_ability?.name,onChange:B=>T("job_system.passive_ability.name",B.target.value),className:"ab-input"}):u.jsx("span",{children:s.job_system?.passive_ability?.name||"-"})]}),u.jsxs("div",{className:"bonus-row",children:[u.jsx("label",{children:"BNUS DE CLASSE"}),e?u.jsx("textarea",{value:s.job_system?.class_bonus?.value,onChange:B=>T("job_system.class_bonus.value",B.target.value),className:"bonus-area"}):u.jsx("p",{children:s.job_system?.class_bonus?.value||"Nenhum"})]}),u.jsxs("div",{className:"bonus-row",style:{marginTop:"15px"},children:[u.jsx("label",{children:"TTULO"}),e?u.jsx("input",{className:"ab-input",style:{background:"rgba(0,0,0,0.5)",padding:"5px",width:"100%",border:"1px solid #444",borderRadius:"4px"},value:s.basic_info?.custom_title||"",onChange:B=>T("basic_info.custom_title",B.target.value)}):u.jsx("p",{style:{background:"rgba(0,0,0,0.5)",padding:"8px",borderRadius:"4px",fontSize:"12px",color:"#ffcc00",fontWeight:"bold",margin:0},children:s.basic_info?.custom_title||"Sem Ttulo"})]})]})})]})}),X&&u.jsx("div",{className:"item-selector-overlay",onClick:()=>Y(!1),children:u.jsxs("div",{className:"item-selector-box",onClick:B=>B.stopPropagation(),children:[u.jsx("h3",{children:"EQUIPAR DO COFRE"}),u.jsxs("div",{className:"forge-list-scroll",children:[ee.length===0&&u.jsx("p",{className:"empty-text",children:"Nenhum item disponvel na Forja."}),ee.map(B=>u.jsxs("div",{className:"forge-item-row",onClick:()=>ue(B),children:[u.jsx("div",{className:"forge-thumb",style:pe(B.imagem)}),u.jsxs("div",{children:[u.jsx("strong",{children:B.nome}),B.ownerId&&u.jsx("small",{style:{color:"#0f0"},children:" (Seu Item)"}),u.jsxs("p",{children:[B.descricao.substring(0,40),"..."]})]})]},B.id))]}),u.jsx("button",{className:"btn-cancel-modal",onClick:()=>Y(!1),children:"CANCELAR"})]})}),O&&u.jsx("div",{className:"item-selector-overlay",onClick:()=>C(null),children:u.jsxs("div",{className:"item-details-box",onClick:B=>B.stopPropagation(),children:[u.jsx("div",{className:"detail-img-large",style:pe(O.item_img)}),u.jsx("h3",{children:O.item_name}),u.jsx("p",{className:"details-desc",children:O.description||"Sem descrio"}),u.jsxs("p",{className:"details-effect",children:["Efeito: ",O.effect||"Nenhum"]}),u.jsx("button",{className:"btn-cancel-modal",onClick:()=>C(null),children:"FECHAR"})]})}),m&&u.jsx("div",{className:"level-up-overlay",children:u.jsx("h1",{className:"levelup-text",children:"LEVEL UP!"})})]}),u.jsx("style",{children:`
        /* GERAL */
        .ficha-overlay-fixed { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.95); z-index: 200000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(8px); }
        .ficha-container { width: 1200px; height: 850px; max-width: 95vw; max-height: 98vh; background: #050a10; border: 2px solid #ffcc00; display: flex; flex-direction: column; position: relative; box-shadow: 0 0 50px rgba(255, 204, 0, 0.2); border-radius: 8px; overflow: hidden; font-family: 'Cinzel', serif; color: #fff; }
        .close-btn-ficha { position: absolute; top: 10px; right: 15px; background: transparent; border: none; color: #f44; font-size: 24px; cursor: pointer; z-index: 200; font-weight: bold; }
        .save-fab { position: absolute; bottom: 30px; right: 30px; width: 60px; height: 60px; border-radius: 50%; background: #222; border: 2px solid #444; color: #fff; font-size: 30px; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 300; transition: 0.3s; box-shadow: 0 0 15px #000; }
        .save-fab:hover { background: #00f2ff; border-color: #fff; color: #000; box-shadow: 0 0 30px #00f2ff; }
        .save-fab.glowing { animation: pulseSave 1.5s infinite; border-color: #00f2ff; color: #00f2ff; }
        @keyframes pulseSave { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        /* HEADER */
        .ficha-header { padding: 25px 30px 10px 30px; background: linear-gradient(90deg, #101020, #000); border-bottom: 2px solid #333; display: flex; justify-content: space-between; align-items: center; height: 140px; position: relative; }
        .guild-insignia-box, .guild-rank-box, .guild-item-box { display: flex; flex-direction: column; align-items: center; width: 80px; position: relative; padding-top: 10px; }
        .header-right-group { display: flex; gap: 20px; align-items: flex-end; }
        .header-label-top { font-size: 10px; color: #ffcc00; font-weight: bold; letter-spacing: 1px; margin-bottom: 2px; }
        .insignia-display, .rank-display, .special-display { width: 70px; height: 70px; background-size: contain; background-repeat: no-repeat; background-position: center; border: 1px solid #333; border-radius: 50%; background-color: #000; position: relative; transition: 0.2s; }
        .special-display { border-radius: 12px; }
        .clickable:hover { cursor: pointer; border-color: #ffcc00; box-shadow: 0 0 10px #ffcc00; }
        .header-info { flex: 1; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .header-info h1 { margin: 0; color: #ffcc00; font-size: 36px; letter-spacing: 4px; text-shadow: 0 0 10px rgba(255,204,0,0.3); }
        .sub-header { color: #00f2ff; font-size: 14px; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 15px; }
        .xp-container { display: flex; align-items: center; gap: 15px; width: 60%; margin-top: -5px; }
        .lvl-box { display: flex; flex-direction: column; align-items: center; background: #222; border: 1px solid #ffcc00; padding: 5px 12px; border-radius: 4px; box-shadow: 0 0 10px rgba(255,204,0,0.2); }
        .lvl-box small { font-size: 8px; color: #ffcc00; }
        .lvl-box span { font-size: 24px; font-weight: bold; line-height: 1; }
        .lvl-input { width: 40px; background: transparent; border: none; color: #fff; font-size: 24px; font-weight: bold; text-align: center; }
        .xp-bar-box { flex: 1; display: flex; flex-direction: column; }
        .xp-text { text-align: right; font-size: 10px; color: #aaa; margin-bottom: 2px; }
        .xp-mini-input { background: #111; border: none; color: #fff; width: 30px; text-align: center; font-size: 10px; }
        .xp-track { width: 100%; height: 8px; background: #111; border: 1px solid #444; border-radius: 4px; overflow: hidden; }
        .xp-fill { height: 100%; background: linear-gradient(90deg, #00f2ff, #0088ff); transition: width 0.5s; }
        .btn-levelup { background: linear-gradient(to bottom, #ffcc00, #ff8800); border: 2px solid #fff; color: #000; font-weight: bold; padding: 5px 15px; cursor: pointer; border-radius: 20px; animation: glow 1s infinite alternate; font-family: 'Cinzel', serif; font-size: 10px; }
        @keyframes glow { from { box-shadow: 0 0 10px #ffcc00; } to { box-shadow: 0 0 30px #ffcc00; transform: scale(1.05); } }
        .ficha-tabs { display: flex; background: #111; border-bottom: 1px solid #333; margin-top: 0; }
        .tab-btn { flex: 1; background: transparent; border: none; padding: 15px; color: #666; font-family: 'Cinzel', serif; font-size: 16px; cursor: pointer; transition: 0.3s; border-bottom: 3px solid transparent; }
        .tab-btn:hover { color: #fff; background: rgba(255,255,255,0.05); }
        .tab-btn.active { color: #ffcc00; border-bottom: 3px solid #ffcc00; background: rgba(255, 204, 0, 0.05); }
        .ficha-body { flex: 1; display: flex; padding: 30px 20px; gap: 20px; overflow: hidden; position: relative; }
        
        /* ESTILOS DE HABILIDADES */
        .skills-tab-content { display: flex; width: 100%; height: 100%; gap: 20px; }
        .skills-col { flex: 1; display: flex; flex-direction: column; background: rgba(0,0,0,0.3); border: 1px solid #333; padding: 10px; border-radius: 4px; overflow: hidden; }
        .skills-col.extra-col { flex: 0.5; }
        .class-header { color: #00f2ff; font-size: 16px; border-bottom: 2px solid #00f2ff; padding-bottom: 5px; margin-bottom: 10px; text-transform: uppercase; display: flex; justify-content: space-between; align-items: center; }
        .class-header.secondary { color: #aaa; border-color: #666; }
        .class-name-input { background: transparent; border: none; color: inherit; font-size: inherit; font-weight: bold; width: 80%; }
        .btn-add-skill-slot { background: transparent; border: 1px solid #555; color: #fff; width: 20px; height: 20px; cursor: pointer; font-size: 14px; line-height: 1; }
        
        .skills-list { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; padding-right: 5px; 
            scrollbar-width: none; 
        }
        .skills-list::-webkit-scrollbar { display: none; }
        
        .skill-card { background: rgba(0, 30, 60, 0.4); border: 1px solid #005577; padding: 8px; border-radius: 4px; cursor: grab; transition: 0.2s; }
        .skill-card.secondary { background: rgba(30, 30, 30, 0.4); border-color: #444; }
        .skill-card:active { cursor: grabbing; border-color: #ffcc00; }
        .skill-card.mastered { border-color: #ffd700; background: rgba(50, 40, 0, 0.4); }
        .skill-top { display: flex; justify-content: space-between; margin-bottom: 5px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; }
        .skill-name { color: #ffcc00; font-size: 13px; }
        .skill-cost { color: #00f2ff; font-size: 11px; font-weight: bold; }
        .skill-desc { font-size: 11px; color: #ccc; line-height: 1.3; margin: 0 0 5px 0; }
        .skill-name-in, .skill-cost-in { background: transparent; border: none; color: #fff; font-size: 12px; }
        .skill-name-in { flex: 1; font-weight: bold; color: #ffcc00; }
        .skill-cost-in { width: 40px; text-align: right; color: #00f2ff; }
        .skill-desc-in { width: 100%; background: transparent; border: none; color: #ccc; font-size: 11px; resize: none; font-family: sans-serif; height: 30px; }
        
        .skill-xp-box { margin-top: 5px; background: rgba(0,0,0,0.3); padding: 4px; border-radius: 3px; }
        .xp-labels { display: flex; justify-content: space-between; font-size: 9px; color: #888; margin-bottom: 2px; }
        .xp-tiny { background: transparent; border: none; color: #aaa; width: 20px; text-align: center; font-size: 9px; }
        .skill-track { width: 100%; height: 5px; background: #222; border-radius: 2px; overflow: hidden; }
        .skill-track.grayed .skill-fill { background: #888; }
        .skill-fill { height: 100%; background: #00f2ff; transition: width 0.3s; }
        .btn-masterize { width: 100%; margin-top: 4px; background: linear-gradient(to right, #d4af37, #b8860b); border: none; color: #000; font-size: 9px; font-weight: bold; cursor: pointer; padding: 2px; border-radius: 2px; }
        .star-icon { color: #ffd700; font-size: 14px; margin-right: 5px; text-shadow: 0 0 5px #ffd700; }
        .pulsing { animation: pulseStar 1.5s infinite; }
        @keyframes pulseStar { 0% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.3); opacity: 1; } 100% { transform: scale(1); opacity: 0.8; } }
        .btn-x-red-small { color: #f44; background: none; border: none; font-weight: bold; cursor: pointer; font-size: 12px; margin-left: 5px; }

        /* OUTRAS COLUNAS */
        .col-attributes { width: 300px; display: flex; flex-direction: column; align-items: center; border-right: 1px solid #333; padding-right: 20px; }
        .col-center-equip { flex: 1; position: relative; display: flex; justify-content: center; align-items: center; }
        .col-inventory { width: 280px; border-left: 1px solid #333; padding-left: 20px; display: flex; flex-direction: column; }
        .section-title { color: #aaa; font-size: 14px; border-bottom: 1px solid #00f2ff; width: 100%; text-align: center; margin-bottom: 15px; padding-bottom: 5px; }
        .radar-wrapper { position: relative; margin-bottom: 20px; }
        .stat-box-chart { background: #000; border: 1px solid #ffcc00; width: 40px; height: 30px; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 4px; box-shadow: 0 0 5px #000; }
        .sb-label { font-size: 8px; color: #aaa; }
        .sb-val { font-size: 12px; font-weight: bold; color: #fff; }
        .sb-input { width: 100%; height: 100%; background: transparent; border: none; color: #ffcc00; text-align: center; font-weight: bold; padding: 0; font-size: 12px; }
        .secondary-stats { width: 100%; }
        .stat-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
        .stat-row label { font-weight: bold; color: #ffcc00; width: 30px; }
        .stat-bars-inputs { flex: 1; background: rgba(255,0,0,0.1); border: 1px solid #522; padding: 5px; display: flex; align-items: center; justify-content: center; gap: 5px; color: #fff; border-radius: 4px; }
        .stat-bars-inputs.mp { background: rgba(0,0,255,0.1); border-color: #225; }
        .stat-bars-inputs input { background: transparent; border: none; color: #fff; width: 40px; text-align: center; font-family: 'serif'; font-weight: bold; }
        .stat-row-simple { display: flex; justify-content: space-between; gap: 10px; margin-top: 15px; }
        .s-box { flex: 1; background: #111; border: 1px solid #444; padding: 10px; text-align: center; border-radius: 4px; }
        .s-box label { display: block; font-size: 10px; color: #888; margin-bottom: 5px; }
        .s-box input { background: transparent; border: none; color: #fff; text-align: center; font-size: 18px; width: 100%; font-weight: bold; }
        .s-box span { font-size: 18px; font-weight: bold; }
        .char-image-frame { width: 300px; height: 450px; border: 2px solid #333; position: relative; background: #000; border-radius: 150px; overflow: hidden; box-shadow: inset 0 0 50px #000; margin-top: -20px; z-index: 1; transition: 0.2s; }
        .char-image-frame.clickable:hover { border-color: #ffcc00; cursor: pointer; }
        .image-display { width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.8; }
        .equip-slots-overlay { position: absolute; width: 300px; height: 450px; left: 50%; top: 50%; transform: translate(-50%, -50%); pointer-events: none; z-index: 2; margin-top: -10px; }
        .equip-slot { position: absolute; width: 80px; display: flex; flex-direction: column; align-items: center; pointer-events: auto; }
        .slot-label { font-size: 9px; color: #00f2ff; text-shadow: 0 0 2px #000; margin-bottom: 2px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        .slot-square { width: 60px; height: 60px; background: rgba(0, 10, 30, 0.9); border: 1px solid #ffcc00; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 15px rgba(0,0,0,0.8); position: relative; overflow: hidden; border-radius: 4px; }
        .item-bg { width: 100%; height: 100%; background-size: cover; background-position: center; position: absolute; top: 0; left: 0; }
        .empty-text { font-size: 9px; color: #666; text-align: center; line-height: 1; padding: 2px; }
        .btn-plus-item { background: transparent; color: #ffcc00; font-size: 24px; border: none; cursor: pointer; font-weight: bold; }
        .btn-eye-item { position: absolute; bottom: 2px; right: 2px; font-size: 10px; background: rgba(0,0,0,0.8); color: #fff; border: none; border-radius: 3px; cursor: pointer; padding: 2px 4px; z-index: 5; }
        .btn-return-forge { position: absolute; top: 2px; left: 2px; font-size: 10px; background: rgba(200, 0, 0, 0.8); color: #fff; border: none; border-radius: 3px; cursor: pointer; padding: 2px 4px; z-index: 5; }
        .gil-display { background: linear-gradient(90deg, rgba(255,204,0,0.1), transparent); border: 1px solid #ffcc00; padding: 15px; border-radius: 4px; display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .coin-icon { font-size: 20px; }
        .gil-amount { font-size: 24px; font-weight: bold; color: #fff; flex: 1; text-align: right; }
        .gil-input-master { background: transparent; border: none; color: #fff; font-size: 24px; font-weight: bold; width: 100%; text-align: right; outline: none; }
        input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        .currency { font-size: 10px; color: #ffcc00; font-weight: bold; }
        .items-list { flex: 1; display: flex; flex-direction: column; }
        .items-list h4 { color: #888; font-size: 12px; border-bottom: 1px solid #444; padding-bottom: 5px; margin-bottom: 10px; }
        .items-scroll { flex: 1; overflow-y: auto; padding-right: 5px; }
        .inv-row { display: flex; justify-content: space-between; border-bottom: 1px solid #222; padding: 8px 0; font-size: 12px; align-items: center; }
        .inv-name { background: transparent; border: none; color: #ddd; flex: 1; font-family: 'serif'; }
        .inv-qtd { background: transparent; border: none; color: #00f2ff; width: 40px; text-align: right; font-weight: bold; }
        .btn-x-red { color: #f44; background: none; border: none; cursor: pointer; font-weight: bold; margin-left: 5px; }
        .i-name { color: #ddd; }
        .i-qtd { color: #00f2ff; font-weight: bold; }
        .add-item-btn { width: 100%; background: #222; border: 1px dashed #555; color: #888; padding: 5px; cursor: pointer; margin-top: 10px; font-size: 10px; }
        .img-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 300000; display: flex; align-items: center; justify-content: center; }
        .img-modal-content { background: #111; border: 1px solid #ffcc00; padding: 25px; width: 400px; border-radius: 8px; text-align: center; box-shadow: 0 0 30px rgba(255,204,0,0.2); }
        .img-modal-content h3 { color: #ffcc00; margin-top: 0; font-family: 'Cinzel', serif; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 20px; }
        .img-modal-content input { width: 100%; padding: 12px; background: #000; border: 1px solid #444; color: #fff; margin-bottom: 20px; outline: none; border-radius: 4px; }
        .img-modal-content input:focus { border-color: #00f2ff; }
        .img-modal-actions { display: flex; gap: 15px; justify-content: center; }
        .btn-confirm { background: #00f2ff; color: #000; padding: 10px 25px; border: none; cursor: pointer; font-weight: bold; border-radius: 4px; transition: 0.2s; }
        .btn-confirm:hover { background: #fff; box-shadow: 0 0 15px #00f2ff; }
        .btn-cancel { background: #333; color: #fff; padding: 10px 25px; border: none; cursor: pointer; border-radius: 4px; }
        .btn-cancel:hover { background: #444; }
        .item-selector-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 300000; display: flex; align-items: center; justify-content: center; }
        .item-selector-box { width: 400px; height: 500px; background: #111; border: 1px solid #ffcc00; padding: 20px; display: flex; flex-direction: column; border-radius: 8px; }
        .item-selector-box h3 { color: #ffcc00; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0; }
        .forge-list-scroll { flex: 1; overflow-y: auto; margin-bottom: 15px; }
        .forge-item-row { display: flex; align-items: center; padding: 10px; border-bottom: 1px solid #333; cursor: pointer; }
        .forge-item-row:hover { background: rgba(255,255,255,0.1); }
        .forge-item-row img { width: 40px; height: 40px; border: 1px solid #555; margin-right: 10px; }
        .forge-thumb { width: 40px; height: 40px; border: 1px solid #555; margin-right: 10px; background-size: cover; background-position: center; }
        .forge-item-row strong { color: #00f2ff; display: block; font-size: 12px; }
        .forge-item-row p { font-size: 10px; color: #aaa; margin: 0; }
        .btn-cancel-modal { width: 100%; padding: 10px; background: #333; color: #fff; border: none; cursor: pointer; }
        .item-details-box { width: 300px; background: #000; border: 1px solid #00f2ff; padding: 20px; text-align: center; border-radius: 8px; }
        .item-details-box img { width: 80px; height: 80px; border: 1px solid #fff; margin-bottom: 10px; }
        .detail-img-large { width: 80px; height: 80px; border: 1px solid #fff; margin: 0 auto 10px auto; background-size: cover; background-position: center; }
        .item-details-box h3 { color: #00f2ff; margin: 0 0 10px 0; }
        .details-desc { font-size: 12px; color: #ccc; margin-bottom: 10px; font-style: italic; }
        .details-effect { font-size: 12px; color: #ffcc00; font-weight: bold; margin-bottom: 20px; }
        .extra-abilities-box { margin-top: 20px; border-top: 2px solid #444; padding-top: 15px; }
        .ability-row { display: flex; align-items: center; margin-bottom: 10px; background: #222; padding: 8px; border-radius: 4px; border-left: 3px solid #ffcc00; }
        .ability-row label { font-size: 10px; color: #888; width: 60px; font-weight: bold; }
        .ability-row span { font-size: 12px; color: #fff; font-weight: bold; }
        .ab-input { background: transparent; border: none; color: #fff; font-weight: bold; flex: 1; font-size: 12px; }
        .bonus-row { margin-top: 10px; }
        .bonus-row label { font-size: 10px; color: #00f2ff; display: block; margin-bottom: 5px; font-weight: bold; }
        .bonus-row p { font-size: 12px; color: #ddd; font-style: italic; background: rgba(0,0,0,0.5); padding: 8px; border-radius: 4px; }
        .bonus-area { width: 100%; height: 60px; background: rgba(0,0,0,0.5); border: 1px solid #444; color: #ddd; font-size: 12px; padding: 5px; resize: none; }
        .level-up-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 100; display: flex; align-items: center; justify-content: center; animation: fadeOverlay 4s forwards; pointer-events: none; }
        .levelup-text { font-size: 80px; color: #ffcc00; text-shadow: 0 0 50px #ffcc00, 0 0 20px #fff; animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); letter-spacing: 5px; }
        @keyframes popIn { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes fadeOverlay { 0% { opacity: 1; } 80% { opacity: 1; } 100% { opacity: 0; } }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
      `})]})}const oA="/assets/ficha-icon-Ds6_MepT.png",i_=({expiry:i})=>{const[e,n]=w.useState("");return w.useEffect(()=>{const s=setInterval(()=>{const o=new Date().getTime(),c=new Date(i).getTime()-o;if(c<0)n("EXPIRADA"),clearInterval(s);else{const f=Math.floor(c/864e5),m=Math.floor(c%(1e3*60*60*24)/(1e3*60*60)),g=Math.floor(c%(1e3*60*60)/(1e3*60));n(`${f}d ${m}h ${g}m`)}},1e3);return()=>clearInterval(s)},[i]),u.jsxs("span",{className:"mission-timer",children:[" ",e]})};function SO(){const i=Xi(),[e,n]=w.useState(null),[s,o]=w.useState([]),[c,f]=w.useState([]),[m,g]=w.useState([]),[b,_]=w.useState([]),[E,N]=w.useState(!0),[z,H]=w.useState(!1),[U,D]=w.useState(!1),[X,Y]=w.useState(!1),[ee,ae]=w.useState(!1),[ge,fe]=w.useState(!1),[O,C]=w.useState(null),[I,V]=w.useState(null),[k,j]=w.useState(null),[T,Te]=w.useState(null),[Se,G]=w.useState(null),[ce,_e]=w.useState(""),[Pe,He]=w.useState(""),[P,Z]=w.useState([]),[ue,be]=w.useState([]),[oe,xe]=w.useState({nome:"",local:"",contratante:"",descricaoMissao:"",objetivosMissao:"",requisitos:"",grupo:"",recompensa:"",rank:"E",imagem:"",duracao:"",gilRecompensa:""}),[ye,Ye]=w.useState({missaoId:"",dataInicio:"",mapas:[],cenarios:[],monstros:[],npcs:[],jogadores:[]}),[Qe,Bt]=w.useState(""),[Ht,pe]=w.useState("mapas"),[B,ve]=w.useState(()=>localStorage.getItem("mestreAssinatura")||"Narrador");w.useEffect(()=>{localStorage.setItem("mestreAssinatura",B)},[B]),w.useEffect(()=>{const R=setTimeout(()=>{H(!0)},2e3);return()=>clearTimeout(R)},[]),w.useEffect(()=>{Nt&&Nt.pause();const R=rf(Ot,de=>{if(de){n(de);const qe=Rn(St(Ae,"missoes"),na("mestreId","==",de.uid),Hi("createdAt","desc")),zt=Rn(St(Ae,"resenhas"),na("mestreId","==",de.uid),Hi("createdAt","desc")),Ct=Rn(St(Ae,"sessoes"),na("mestreId","==",de.uid),Hi("dataInicio","asc")),It=Rn(St(Ae,"characters")),Dn=Cn(qe,st=>o(st.docs.map(Ve=>({id:Ve.id,...Ve.data()})))),he=Cn(zt,st=>f(st.docs.map(Ve=>({id:Ve.id,...Ve.data()})))),pt=Cn(Ct,st=>g(st.docs.map(Ve=>({id:Ve.id,...Ve.data()})))),Lt=Cn(It,st=>{_(st.docs.map(Ve=>({id:Ve.id,...Ve.data()}))),N(!1)});return()=>{Dn(),he(),pt(),Lt()}}else N(!1),i("/login")});return()=>R()},[i]),w.useEffect(()=>{if(O){const R=b.find(de=>de.id===O.id);R&&C(R)}},[b]);const le=async R=>{if(R.preventDefault(),!!e)try{const de=(oe.duracao.match(/(\d+)w/)||[0,0])[1]*6048e5+(oe.duracao.match(/(\d+)d/)||[0,0])[1]*864e5+(oe.duracao.match(/(\d+)h/)||[0,0])[1]*36e5;await Ls(St(Ae,"missoes"),{...oe,mestreNome:B,mestreId:e.uid,createdAt:En(),expiraEm:new Date(Date.now()+(de||36e5)).toISOString()}),D(!1),xe({nome:"",local:"",contratante:"",descricaoMissao:"",objetivosMissao:"",requisitos:"",grupo:"",recompensa:"",rank:"E",imagem:"",duracao:"",gilRecompensa:""})}catch(de){alert("Erro ao forjar cartaz: "+de.message)}},Ne=async()=>{if(!Pe||!ce||!e)return alert("Preencha ttulo e contedo!");try{const R=new Date;R.setDate(R.getDate()+7),await Ls(St(Ae,"resenhas"),{titulo:Pe,conteudo:ce,mestre:B,mestreId:e.uid,destinatarios:P,createdAt:En(),expiraEm:R.toISOString()}),Y(!1),_e(""),He(""),Z([])}catch{alert("Erro ao publicar.")}},Ce=async(R,de)=>{if(window.confirm(`Remover ${de.nome} da misso?`)){const qe=Ue(Ae,"missoes",R);await wt(qe,{candidatos:Nf(de)})}},it=()=>{Qe&&(Ye(R=>({...R,[Ht]:[...R[Ht],Qe]})),Bt(""))},Xe=(R,de)=>{Ye(qe=>({...qe,[R]:qe[R].filter((zt,Ct)=>Ct!==de)}))},Rt=async R=>{if(R.preventDefault(),!ye.missaoId||!ye.dataInicio||!e)return alert("Selecione a misso e o horrio!");try{const de=s.find(Ct=>Ct.id===ye.missaoId),qe=new Date(ye.dataInicio),zt=new Date(qe.getTime()+1440*60*1e3);await Ls(St(Ae,"sessoes"),{missaoId:ye.missaoId,missaoNome:de?de.nome:"Misso Desconhecida",mestreId:e.uid,dataInicio:ye.dataInicio,expiraEm:zt.toISOString(),participantes:ue,mapas:ye.mapas,cenarios:ye.cenarios,monstros:ye.monstros,npcs:ye.npcs,jogadores:ye.jogadores,connected_players:[],dm_online:!1,createdAt:En()}),ae(!1),Ye({missaoId:"",dataInicio:"",mapas:[],cenarios:[],monstros:[],npcs:[],jogadores:[]}),be([]),alert("Sesso criada com sucesso!")}catch(de){alert("Erro ao criar sesso: "+de.message)}},On=R=>{i("/mestre-vtt")};return E||!z?u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",background:"radial-gradient(circle at center, #001a33 0%, #000000 100%)",color:"#ffcc00",fontFamily:"Cinzel, serif",zIndex:9999,position:"fixed",top:0,left:0},children:[u.jsx("img",{src:If,alt:"Carregando...",style:{width:"120px",marginBottom:"20px"}}),u.jsx("p",{style:{fontSize:"18px",letterSpacing:"4px",textTransform:"uppercase",animation:"pulseText 2s infinite ease-in-out"},children:"Sintonizando ter..."}),u.jsx("style",{children:`
          @keyframes pulseText { 
            0% { opacity: 0.4; transform: scale(0.98); } 
            50% { opacity: 1; transform: scale(1.02); } 
            100% { opacity: 0.4; transform: scale(0.98); } 
          }
        `})]}):u.jsxs("div",{className:"mestre-container",children:[u.jsx("div",{className:"mestre-bg-image-full",style:{backgroundImage:`url(${sA})`}}),u.jsxs("div",{className:"mestre-content",children:[u.jsxs("div",{className:"top-bar-flex",children:[u.jsx("h1",{className:"ff-title",children:"HUB DO NARRADOR"}),u.jsxs("div",{className:"mestre-identity-box ff-card fade-in",children:[u.jsx("label",{children:"ASSINATURA DO MESTRE:"}),u.jsx("input",{type:"text",value:B,onChange:R=>ve(R.target.value)})]})]}),u.jsxs("div",{className:"mestre-grid",children:[u.jsxs("div",{className:"ff-card board-column",children:[u.jsxs("div",{className:"card-header no-border",children:[u.jsx("h3",{children:"QUADRO DE MISSES"}),u.jsxs("button",{className:"ff-add-btn",onClick:()=>D(!0),children:[u.jsx("span",{children:"+"})," ADICIONAR CARTAZ"]})]}),u.jsx("div",{className:"mission-scroll",children:s.map(R=>{const de=parseInt(R.grupo)||0,qe=R.candidatos?R.candidatos.length:0,zt=de>0?qe/de*100:0,Ct=qe>=de&&de>0;return u.jsxs("div",{className:`mission-poster rank-${R.rank}`,children:[u.jsx("div",{className:"poster-rank-label-fixed",children:R.rank}),u.jsxs("span",{className:"mestre-tag",children:["Narrador: ",R.mestreNome]}),u.jsx("h4",{children:R.nome}),u.jsxs("p",{className:"gil-recompensa",children:[" Recompensa: ",R.gilRecompensa," Gil"]}),u.jsxs("div",{className:"vagas-container",children:[u.jsxs("div",{className:"vagas-labels",children:[u.jsx("span",{children:"JOGADORES:"}),u.jsxs("span",{style:{color:Ct?"#f44":"#0f0"},children:[qe," / ",de]})]}),u.jsx("div",{className:"vagas-track",children:u.jsx("div",{className:"vagas-fill",style:{width:`${zt}%`,background:Ct?"#f44":"#00f2ff"}})})]}),R.candidatos&&R.candidatos.length>0&&u.jsxs("div",{className:"candidates-mini-box",children:[u.jsx("strong",{children:"Candidatos:"}),R.candidatos.map(It=>u.jsxs("div",{className:"cand-row-master",children:[u.jsxs("span",{style:{color:It.isLeader?"#ffcc00":"#ccc"},children:[It.isLeader&&""," ",It.nome," (",It.classe,")"]}),u.jsx("button",{className:"btn-kick-x",title:"Remover Jogador",onClick:()=>Ce(R.id,It),children:""})]},It.uid))]}),u.jsx(i_,{expiry:R.expiraEm}),u.jsxs("div",{className:"poster-actions",children:[u.jsx("button",{className:"btn-cyan",onClick:()=>Te(R.imagem),children:"CARTAZ"}),u.jsx("button",{className:"btn-cyan",onClick:()=>V(R),children:"DETALHES"}),u.jsx("button",{className:"btn-red",onClick:()=>fi(Ue(Ae,"missoes",R.id)),children:"EXCLUIR"})]})]},R.id)})})]}),u.jsxs("div",{className:"ff-card sanchez-card board-column",children:[u.jsxs("div",{className:"sanchez-header-top no-border",children:[u.jsx("h3",{children:"RESENHA DO SANCHES"}),u.jsx("button",{className:"ff-add-btn-gold-small",onClick:()=>Y(!0),children:"+ CRIAR NOVA RESENHA"})]}),u.jsx("div",{className:"mission-scroll",children:c.map(R=>u.jsxs("div",{className:"resenha-item-card",children:[u.jsx("h4",{children:R.titulo}),u.jsx(i_,{expiry:R.expiraEm}),u.jsxs("div",{className:"poster-actions",children:[u.jsx("button",{className:"btn-cyan",onClick:()=>j(R),children:"VISUALIZAR"}),u.jsx("button",{className:"btn-red",onClick:()=>fi(Ue(Ae,"resenhas",R.id)),children:"EXCLUIR"})]})]},R.id))})]}),u.jsxs("div",{className:"ff-card board-column",children:[u.jsxs("div",{className:"card-header no-border",children:[u.jsx("h3",{children:"SESSES DE JOGO"}),u.jsx("button",{className:"ff-add-btn small-btn",onClick:()=>ae(!0),children:"INICIAR NOVA SESSO"})]}),u.jsx("div",{className:"mission-scroll",children:m.length===0?u.jsx("div",{className:"empty-instancia",children:"NENHUMA INSTNCIA ATIVA"}):m.map(R=>u.jsxs("div",{className:"sessao-card",children:[u.jsx("div",{className:"sessao-status",children:" AO VIVO / AGENDADA"}),u.jsx("h4",{className:"sessao-title",children:R.missaoNome}),u.jsxs("div",{className:"sessao-info",children:[u.jsxs("span",{children:[" ",new Date(R.dataInicio).toLocaleString()]}),u.jsxs("span",{className:"sessao-players",children:[" ",R.participantes?.length||0," Jogadores"]})]}),u.jsxs("div",{className:"sessao-assets-count",children:[" ",(R.mapas?.length||0)+(R.cenarios?.length||0)," Imagens"]}),u.jsxs("div",{className:"poster-actions",style:{marginTop:"15px"},children:[u.jsx("button",{className:"btn-cyan",onClick:()=>G(R),children:" MEMBROS"}),u.jsx("button",{className:"btn-play-vtt",onClick:()=>On(),children:" ACESSAR VTT"}),u.jsx("button",{className:"btn-red",onClick:()=>fi(Ue(Ae,"sessoes",R.id)),children:"CANCELAR"})]})]},R.id))})]})]})]}),u.jsx("button",{className:"fichas-trigger-btn",onClick:()=>fe(!0),title:"Acessar Fichas",children:u.jsx("img",{src:oA,alt:"Fichas"})}),u.jsx(Lg,{isMestre:!0}),u.jsx(rA,{}),ge&&u.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>fe(!1),children:u.jsxs("div",{className:"ff-modal-scrollable ff-card",onClick:R=>R.stopPropagation(),children:[u.jsx("h3",{className:"modal-title-ff",children:"PERSONAGENS REGISTRADOS"}),u.jsx("div",{className:"destinatarios-grid-fixed",children:b.map(R=>u.jsxs("div",{className:"ficha-list-item",children:[u.jsxs("div",{className:"ficha-row-name",children:[u.jsx("strong",{children:R.name}),u.jsxs("small",{children:[R.race," // ",R.class]})]}),u.jsx("button",{className:"btn-cyan",onClick:()=>{C(R),fe(!1)},children:"ABRIR FICHA "})]},R.id))}),u.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"20px"},onClick:()=>fe(!1),children:"FECHAR"})]})}),O&&u.jsx(Ug,{characterData:O,isMaster:!0,onClose:()=>C(null)}),U&&u.jsx("div",{className:"ff-modal-overlay-fixed",children:u.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[u.jsx("h3",{className:"modal-title-ff",children:"NOVA MISSO"}),u.jsxs("form",{onSubmit:le,children:[u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"NOME DA MISSO"}),u.jsx("input",{placeholder:"Ttulo...",value:oe.nome,onChange:R=>xe({...oe,nome:R.target.value}),required:!0})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"LOCAL"}),u.jsx("input",{placeholder:"Onde ocorre...",value:oe.local,onChange:R=>xe({...oe,local:R.target.value})})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"CONTRATANTE"}),u.jsx("input",{placeholder:"Quem paga...",value:oe.contratante,onChange:R=>xe({...oe,contratante:R.target.value})})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"DESCRIO DA MISSO"}),u.jsx("textarea",{className:"tall-area-dark",placeholder:"Detalhes da histria e contexto...",value:oe.descricaoMissao,onChange:R=>xe({...oe,descricaoMissao:R.target.value})})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"OBJETIVOS DA MISSO"}),u.jsx("textarea",{className:"tall-area-dark",placeholder:"O que deve ser feito passo a passo...",value:oe.objetivosMissao,onChange:R=>xe({...oe,objetivosMissao:R.target.value})})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"REQUISITOS DA MISSO"}),u.jsx("textarea",{className:"tall-area-dark",placeholder:"O que  necessrio para aceitar...",value:oe.requisitos,onChange:R=>xe({...oe,requisitos:R.target.value})})]}),u.jsxs("div",{className:"row-double-ff",children:[u.jsxs("div",{className:"field-group",children:[u.jsx("label",{children:"GRUPO MXIMO"}),u.jsx("input",{placeholder:"Ex: 4",value:oe.grupo,onChange:R=>xe({...oe,grupo:R.target.value})})]}),u.jsxs("div",{className:"field-group",children:[u.jsx("label",{children:"RANK"}),u.jsx("select",{value:oe.rank,onChange:R=>xe({...oe,rank:R.target.value}),children:["E","D","C","B","A","S","SS","SC"].map(R=>u.jsxs("option",{value:R,children:["RANK ",R]},R))})]})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"RECOMPENSAS EXTRAS"}),u.jsx("textarea",{className:"tall-area-dark",placeholder:"Itens, especiarias...",value:oe.recompensa,onChange:R=>xe({...oe,recompensa:R.target.value})})]}),u.jsxs("div",{className:"row-double-ff",children:[u.jsxs("div",{className:"field-group",children:[u.jsx("label",{children:"GIL"}),u.jsx("input",{type:"text",className:"gil-input",placeholder:"Ex: 5000",value:oe.gilRecompensa,onChange:R=>xe({...oe,gilRecompensa:R.target.value.replace(/\D/g,"")})})]}),u.jsxs("div",{className:"field-group",children:[u.jsx("label",{children:"DURAO"}),u.jsx("input",{placeholder:"Ex: 1d 10h",value:oe.duracao,onChange:R=>xe({...oe,duracao:R.target.value}),required:!0})]})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"IMAGEM"}),u.jsx("input",{placeholder:"Link Imgur...",value:oe.imagem,onChange:R=>xe({...oe,imagem:R.target.value})})]}),u.jsxs("div",{className:"btn-group-ff",children:[u.jsx("button",{type:"submit",className:"btn-forjar-main",children:"FORJAR MISSO"}),u.jsx("button",{type:"button",className:"btn-cancelar-main",onClick:()=>D(!1),children:"FECHAR"})]})]})]})}),X&&u.jsx("div",{className:"ff-modal-overlay-fixed",children:u.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[u.jsx("h3",{className:"modal-title-ff",children:"ESCREVER CRNICA"}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"TTULO"}),u.jsx("input",{className:"ff-modal-input-dark",value:Pe,onChange:R=>He(R.target.value)})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"CORPO"}),u.jsx("textarea",{className:"tall-area-ff-dark",value:ce,onChange:R=>_e(R.target.value)})]}),u.jsxs("div",{className:"player-selector-box-fixed",children:[u.jsx("label",{children:"DESTINATRIOS:"}),u.jsx("div",{className:"destinatarios-grid-fixed",children:b.map(R=>u.jsxs("label",{className:"chip-label-ff",children:[u.jsx("input",{type:"checkbox",checked:P.includes(R.name),onChange:()=>P.includes(R.name)?Z(P.filter(de=>de!==R.name)):Z([...P,R.name])})," ",R.name]},R.id))})]}),u.jsxs("div",{className:"btn-group-ff",children:[u.jsx("button",{className:"btn-forjar-main",onClick:Ne,children:"PUBLICAR"}),u.jsx("button",{className:"btn-cancelar-main",onClick:()=>Y(!1),children:"FECHAR"})]})]})}),ee&&u.jsx("div",{className:"ff-modal-overlay-fixed",children:u.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[u.jsx("h3",{className:"modal-title-ff",children:"CRIAR NOVA SESSO"}),u.jsxs("form",{onSubmit:Rt,children:[u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"SELECIONAR MISSO"}),u.jsxs("select",{className:"ff-select-dark",value:ye.missaoId,onChange:R=>Ye({...ye,missaoId:R.target.value}),required:!0,children:[u.jsx("option",{value:"",children:"-- Escolha --"}),s.map(R=>u.jsxs("option",{value:R.id,children:[R.nome," (Rank ",R.rank,")"]},R.id))]})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"DATA E HORRIO"}),u.jsx("input",{type:"datetime-local",className:"ff-input-dark",value:ye.dataInicio,onChange:R=>Ye({...ye,dataInicio:R.target.value}),required:!0})]}),u.jsxs("div",{className:"player-selector-box-fixed",children:[u.jsx("label",{children:"JOGADORES:"}),u.jsx("div",{className:"destinatarios-grid-fixed",children:b.map(R=>u.jsxs("label",{className:"chip-label-ff",children:[u.jsx("input",{type:"checkbox",checked:ue.includes(R.name),onChange:()=>ue.includes(R.name)?be(ue.filter(de=>de!==R.name)):be([...ue,R.name])})," ",R.name," (",R.class,")"]},R.id))})]}),u.jsxs("div",{className:"upload-section-box",children:[u.jsx("h4",{className:"upload-section-title",children:"IMPORTAR IMAGENS"}),u.jsxs("div",{className:"link-import-row",children:[u.jsx("input",{className:"ff-input-dark",placeholder:"Link da imagem...",value:Qe,onChange:R=>Bt(R.target.value)}),u.jsxs("select",{className:"ff-select-dark small-select",value:Ht,onChange:R=>pe(R.target.value),children:[u.jsx("option",{value:"mapas",children:"Tabletop"}),u.jsx("option",{value:"cenarios",children:"Cenrio"}),u.jsx("option",{value:"npcs",children:"NPCs"})]}),u.jsx("button",{type:"button",className:"btn-cyan",onClick:it,children:"+"})]}),u.jsxs("div",{className:"assets-lists",children:[ye.mapas.map((R,de)=>u.jsxs("div",{className:"asset-item",children:[u.jsxs("span",{className:"truncate-link",children:["[TABLETOP] ",R]}),u.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>Xe("mapas",de),children:""})]},`map-${de}`)),ye.cenarios.map((R,de)=>u.jsxs("div",{className:"asset-item",children:[u.jsxs("span",{className:"truncate-link",children:["[CENRIO] ",R]}),u.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>Xe("cenarios",de),children:""})]},`cen-${de}`)),ye.npcs.map((R,de)=>u.jsxs("div",{className:"asset-item",children:[u.jsxs("span",{className:"truncate-link",children:["[NPC] ",R]}),u.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>Xe("npcs",de),children:""})]},`npc-${de}`))]})]}),u.jsxs("div",{className:"btn-group-ff",children:[u.jsx("button",{type:"submit",className:"btn-forjar-main",children:"AGENDAR"}),u.jsx("button",{type:"button",className:"btn-cancelar-main",onClick:()=>ae(!1),children:"CANCELAR"})]})]})]})}),Se&&u.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>G(null),children:u.jsxs("div",{className:"ff-modal-scrollable ff-card",onClick:R=>R.stopPropagation(),style:{height:"auto",maxHeight:"500px"},children:[u.jsx("h3",{className:"modal-title-ff",children:"MEMBROS ALOCADOS"}),u.jsx("div",{className:"destinatarios-grid-fixed",children:Se.participantes?.map((R,de)=>u.jsxs("div",{className:"chip-label-ff",style:{cursor:"default",color:"#fff",borderColor:"#00f2ff"},children:[" ",R]},de))}),u.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"20px",width:"100%"},onClick:()=>G(null),children:"FECHAR"})]})}),I&&u.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>V(null),children:u.jsxs("div",{className:"ff-modal ff-card detail-view-main",onClick:R=>R.stopPropagation(),children:[u.jsxs("div",{className:"detail-header-modern",children:[u.jsx("div",{className:`detail-rank-badge rank-${I.rank}`,children:I.rank}),u.jsxs("div",{className:"detail-title-col",children:[u.jsx("h2",{children:I.nome}),u.jsxs("span",{className:"detail-narrator",children:["Narrador: ",I.mestreNome]})]})]}),u.jsxs("div",{className:"detail-body-grid",children:[u.jsxs("div",{className:"detail-info-row",children:[u.jsxs("div",{className:"info-item",children:[u.jsx("label",{children:" LOCAL"}),u.jsx("span",{children:I.local||"Desconhecido"})]}),u.jsxs("div",{className:"info-item",children:[u.jsx("label",{children:" CONTRATANTE"}),u.jsx("span",{children:I.contratante||"Annimo"})]})]}),u.jsxs("div",{className:"detail-section",children:[u.jsx("label",{className:"section-label",children:"VAGAS"}),u.jsxs("div",{style:{background:"#111",padding:"10px",borderRadius:"4px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",color:"#aaa",marginBottom:"5px"},children:[u.jsx("span",{children:"STATUS DO GRUPO"}),u.jsxs("span",{children:[I.candidatos?I.candidatos.length:0," / ",I.grupo||"?"]})]}),u.jsx("div",{style:{width:"100%",height:"6px",background:"#333",borderRadius:"3px"},children:u.jsx("div",{style:{width:`${Math.min((I.candidatos?.length||0)/(parseInt(I.grupo)||1)*100,100)}%`,height:"100%",background:I.candidatos?.length>=parseInt(I.grupo)?"#f44":"#00f2ff"}})})]})]}),u.jsxs("div",{className:"detail-section",children:[u.jsx("label",{className:"section-label",children:" DESCRIO"}),u.jsx("p",{className:"section-text",children:I.descricaoMissao})]}),u.jsxs("div",{className:"detail-section",children:[u.jsx("label",{className:"section-label",children:" OBJETIVOS"}),u.jsx("p",{className:"section-text",children:I.objetivosMissao})]}),u.jsxs("div",{className:"detail-section",children:[u.jsx("label",{className:"section-label",children:" REQUISITOS"}),u.jsx("p",{className:"section-text",children:I.requisitos})]}),u.jsxs("div",{className:"detail-section reward-section",children:[u.jsx("label",{className:"section-label",children:" RECOMPENSAS"}),u.jsxs("div",{className:"reward-content-box",children:[u.jsxs("div",{className:"gil-display-row",children:[u.jsx("span",{className:"gil-icon",children:""})," ",u.jsxs("span",{className:"gil-value",children:[I.gilRecompensa||0," GIL"]})]}),I.recompensa&&u.jsx("div",{className:"extra-rewards-list",children:I.recompensa.split(`
`).map((R,de)=>u.jsxs("div",{className:"reward-item",children:[" ",R]},de))})]})]})]}),u.jsx("button",{className:"ff-final-close-btn",onClick:()=>V(null),children:"FECHAR RELATRIO"})]})}),T&&u.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>Te(null),children:u.jsxs("div",{className:"lightbox-wrap",children:[u.jsx("button",{className:"close-lightbox",onClick:()=>Te(null),children:""}),u.jsx("img",{src:T,alt:"Cartaz",className:"cartaz-full-view"})]})}),k&&u.jsx("div",{className:"papiro-overlay-full",onClick:()=>j(null),children:u.jsxs("div",{className:"papiro-real-container",style:{backgroundImage:`url(${zg})`},onClick:R=>R.stopPropagation(),children:[u.jsx("div",{className:"sanchez-oval-view-no-border",style:{backgroundImage:`url(${Vg})`}}),u.jsx("h2",{className:"papiro-title-real",children:k.titulo}),u.jsxs("p",{className:"papiro-mestre-sub",children:["Narrador: ",k.mestre]}),u.jsx("div",{className:"papiro-body-real",dangerouslySetInnerHTML:{__html:k.conteudo}}),u.jsx("button",{className:"papiro-close-btn",onClick:()=>j(null),children:"FECHAR"})]})}),u.jsx("style",{children:`
        /* --- ESTILOS PRINCIPAIS MESTRE --- */
        .mestre-container { width: 100vw; height: 100vh; overflow: hidden; position: relative; background: #020617; font-family: 'Cinzel', serif; color: #e2e8f0; }
        .mestre-bg-image-full { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.3; z-index: 0; animation: slowPan 60s infinite alternate; }
        @keyframes slowPan { from { transform: scale(1.0); } to { transform: scale(1.1); } }
        
        .mestre-content { position: relative; z-index: 10; height: 100%; display: flex; flex-direction: column; padding: 20px; box-sizing: border-box; }
        .top-bar-flex { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .ff-title { font-size: 2rem; color: #fbbf24; text-shadow: 0 0 10px rgba(251, 191, 36, 0.5); letter-spacing: 4px; margin: 0; }
        .mestre-identity-box { padding: 10px 20px; display: flex; align-items: center; gap: 10px; background: rgba(0,0,0,0.6); border: 1px solid #fbbf24; border-radius: 4px; }
        .mestre-identity-box label { font-size: 0.8rem; color: #fbbf24; font-weight: bold; }
        .mestre-identity-box input { background: transparent; border: none; border-bottom: 1px solid #555; color: #fff; font-family: 'Cinzel', serif; text-align: center; width: 150px; }
        
        .mestre-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; flex: 1; min-height: 0; }
        .board-column { display: flex; flex-direction: column; height: 100%; background: rgba(15, 23, 42, 0.85); border: 1px solid #334155; border-radius: 8px; overflow: hidden; backdrop-filter: blur(5px); box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        .card-header { padding: 15px; border-bottom: 1px solid #334155; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.3); }
        .card-header h3 { margin: 0; color: #e2e8f0; font-size: 1rem; letter-spacing: 2px; }
        .no-border { border-bottom: none !important; }
        
        .mission-scroll { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 15px; scrollbar-width: thin; scrollbar-color: #fbbf24 #0f172a; }
        .mission-scroll::-webkit-scrollbar { width: 6px; }
        .mission-scroll::-webkit-scrollbar-thumb { background: #fbbf24; border-radius: 3px; }
        
        /* CARD MISSO */
        .mission-poster { background: #1e293b; border: 1px solid #334155; padding: 15px; border-radius: 4px; position: relative; transition: transform 0.2s; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .mission-poster:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.3); border-color: #fbbf24; }
        .mission-poster h4 { margin: 25px 0 5px 0; color: #fbbf24; font-size: 1.1rem; text-transform: uppercase; }
        .poster-rank-label-fixed { position: absolute; top: 10px; right: 10px; font-weight: 900; font-size: 1.5rem; opacity: 0.3; color: #fff; }
        .mestre-tag { font-size: 0.7rem; color: #94a3b8; display: block; margin-bottom: 5px; }
        .gil-recompensa { font-size: 0.9rem; color: #fcd34d; font-weight: bold; margin-bottom: 10px; }
        
        .vagas-container { background: #0f172a; padding: 8px; border-radius: 4px; margin-bottom: 10px; border: 1px solid #334155; }
        .vagas-labels { display: flex; justify-content: space-between; font-size: 0.7rem; color: #cbd5e1; margin-bottom: 4px; }
        .vagas-track { height: 6px; background: #334155; border-radius: 3px; overflow: hidden; }
        .vagas-fill { height: 100%; transition: width 0.3s ease; }
        
        .candidates-mini-box { background: rgba(0,0,0,0.3); padding: 8px; border-radius: 4px; margin-bottom: 10px; font-size: 0.75rem; }
        .cand-row-master { display: flex; justify-content: space-between; align-items: center; margin-top: 4px; padding-bottom: 2px; border-bottom: 1px dashed #334155; }
        .btn-kick-x { background: transparent; border: none; color: #ef4444; cursor: pointer; font-weight: bold; font-size: 14px; }
        .btn-kick-x:hover { color: #f87171; }
        
        .mission-timer { display: block; text-align: center; font-size: 0.8rem; color: #94a3b8; margin: 10px 0; font-weight: bold; }
        
        .poster-actions { display: flex; gap: 5px; justify-content: space-between; }
        .btn-cyan { flex: 1; padding: 6px; font-size: 0.7rem; background: transparent; border: 1px solid #00f2ff; color: #00f2ff; cursor: pointer; transition: 0.2s; font-weight: bold; }
        .btn-cyan:hover { background: rgba(0, 242, 255, 0.1); }
        .btn-red { flex: 1; padding: 6px; font-size: 0.7rem; background: transparent; border: 1px solid #ef4444; color: #ef4444; cursor: pointer; transition: 0.2s; font-weight: bold; }
        .btn-red:hover { background: rgba(239, 68, 68, 0.1); }
        
        /* SANCHES */
        .sanchez-card { border-color: #00f2ff; }
        .sanchez-header-top { padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #00f2ff; background: rgba(0, 242, 255, 0.05); }
        .sanchez-header-top h3 { color: #00f2ff; text-shadow: 0 0 5px rgba(0, 242, 255, 0.5); }
        .resenha-item-card { background: #0f172a; border: 1px solid #334155; padding: 15px; border-radius: 4px; border-left: 3px solid #00f2ff; }
        .resenha-item-card h4 { margin: 0 0 10px 0; color: #e2e8f0; font-size: 1rem; }
        
        /* SESSES */
        .sessao-card { background: #1e293b; border: 1px solid #fbbf24; padding: 15px; border-radius: 4px; position: relative; }
        .sessao-status { position: absolute; top: -10px; left: 10px; background: #fbbf24; color: #000; font-size: 0.6rem; font-weight: bold; padding: 2px 6px; border-radius: 2px; }
        .sessao-title { margin: 10px 0 5px 0; color: #fff; font-size: 1.1rem; }
        .sessao-info { font-size: 0.8rem; color: #94a3b8; display: flex; flex-direction: column; gap: 2px; }
        .sessao-assets-count { font-size: 0.75rem; color: #cbd5e1; margin-top: 5px; font-style: italic; }
        .btn-play-vtt { background: #fbbf24; color: #000; border: none; padding: 8px; font-weight: bold; cursor: pointer; flex: 2; transition: 0.2s; }
        .btn-play-vtt:hover { background: #f59e0b; box-shadow: 0 0 10px rgba(251, 191, 36, 0.4); }
        .empty-instancia { text-align: center; color: #475569; padding: 20px; font-style: italic; border: 2px dashed #334155; border-radius: 8px; }

        /* MODAIS GERAIS */
        .ff-modal-overlay-fixed { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 9999; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .ff-modal-scrollable { background: #0f172a; border: 1px solid #fbbf24; width: 600px; max-width: 95vw; max-height: 90vh; overflow-y: auto; padding: 25px; border-radius: 8px; box-shadow: 0 0 30px rgba(0,0,0,0.8); }
        .modal-title-ff { color: #fbbf24; text-align: center; border-bottom: 1px solid #334155; padding-bottom: 15px; margin-bottom: 20px; letter-spacing: 2px; font-size: 1.5rem; }
        .modal-input-group { margin-bottom: 15px; }
        .modal-input-group label { display: block; color: #94a3b8; font-size: 0.8rem; margin-bottom: 5px; font-weight: bold; }
        .modal-input-group input, .modal-input-group textarea, .modal-input-group select { width: 100%; background: #1e293b; border: 1px solid #334155; color: #fff; padding: 10px; font-family: 'Lato', sans-serif; border-radius: 4px; outline: none; }
        .modal-input-group input:focus, .modal-input-group textarea:focus { border-color: #fbbf24; }
        .tall-area-dark { min-height: 100px; resize: vertical; }
        .row-double-ff { display: flex; gap: 15px; margin-bottom: 15px; }
        .field-group { flex: 1; }
        .field-group input, .field-group select { width: 100%; padding: 10px; background: #1e293b; border: 1px solid #334155; color: #fff; border-radius: 4px; }
        
        .btn-group-ff { display: flex; gap: 10px; margin-top: 20px; }
        .btn-forjar-main { flex: 1; background: #fbbf24; color: #000; border: none; padding: 12px; font-weight: bold; cursor: pointer; transition: 0.2s; font-family: 'Cinzel', serif; letter-spacing: 1px; }
        .btn-forjar-main:hover { background: #f59e0b; }
        .btn-cancelar-main { flex: 1; background: transparent; color: #94a3b8; border: 1px solid #334155; padding: 12px; font-weight: bold; cursor: pointer; transition: 0.2s; font-family: 'Cinzel', serif; }
        .btn-cancelar-main:hover { border-color: #fff; color: #fff; }

        .ff-add-btn { background: transparent; border: 1px dashed #fbbf24; color: #fbbf24; padding: 5px 15px; cursor: pointer; font-size: 0.8rem; font-weight: bold; transition: 0.2s; }
        .ff-add-btn:hover { background: rgba(251, 191, 36, 0.1); }
        .ff-add-btn-gold-small { background: transparent; border: 1px dashed #00f2ff; color: #00f2ff; padding: 5px 10px; cursor: pointer; font-size: 0.7rem; font-weight: bold; }
        .ff-add-btn-gold-small:hover { background: rgba(0, 242, 255, 0.1); }

        /* UPLOAD SECTION (SESSO) */
        .upload-section-box { border: 1px solid #334155; padding: 15px; border-radius: 4px; margin-top: 20px; background: rgba(0,0,0,0.2); }
        .upload-section-title { font-size: 0.9rem; color: #fbbf24; margin-bottom: 10px; text-transform: uppercase; border-bottom: 1px solid #334155; padding-bottom: 5px; }
        .link-import-row { display: flex; gap: 10px; margin-bottom: 10px; }
        .ff-input-dark { flex: 1; background: #1e293b; border: 1px solid #334155; color: #fff; padding: 8px; border-radius: 4px; outline: none; }
        .ff-select-dark { background: #1e293b; border: 1px solid #334155; color: #fff; padding: 8px; border-radius: 4px; outline: none; }
        .small-select { width: 120px; }
        .assets-lists { display: flex; flex-direction: column; gap: 5px; max-height: 150px; overflow-y: auto; }
        .asset-item { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); padding: 5px 10px; border-radius: 4px; font-size: 0.8rem; color: #ccc; }
        .truncate-link { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 90%; }
        .btn-remove-x { background: transparent; border: none; color: #f44; cursor: pointer; font-weight: bold; }

        /* SELEO DE JOGADORES */
        .player-selector-box-fixed { margin: 15px 0; }
        .destinatarios-grid-fixed { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; max-height: 150px; overflow-y: auto; background: #020617; padding: 10px; border: 1px solid #334155; border-radius: 4px; }
        .chip-label-ff { display: flex; align-items: center; gap: 8px; font-size: 0.8rem; color: #94a3b8; cursor: pointer; padding: 5px; border: 1px solid transparent; border-radius: 4px; transition: 0.2s; }
        .chip-label-ff:hover { background: rgba(255,255,255,0.05); }
        .chip-label-ff input { width: auto; margin: 0; }

        /* PAPIRO REAL (FIXED & IMPROVED) */
        .papiro-overlay-full { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 10000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(8px); }
        .papiro-real-container { width: 800px; max-width: 95vw; height: 85vh; background-size: 100% 100%; position: relative; padding: 100px 90px; box-sizing: border-box; display: flex; flex-direction: column; align-items: center; color: #3e2723; font-family: 'Cinzel', serif; text-shadow: 0 1px 0 rgba(255,255,255,0.5); }
        .sanchez-oval-view-no-border { width: 80px; height: 80px; border-radius: 50%; background-size: cover; border: 4px solid #8d6e63; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .papiro-title-real { font-size: 2.5rem; margin: 0; border-bottom: 2px solid #5d4037; padding-bottom: 10px; width: 100%; text-align: center; }
        .papiro-mestre-sub { font-size: 0.9rem; font-style: italic; color: #5d4037; margin-bottom: 30px; }
        .papiro-body-real { font-size: 1.2rem; line-height: 1.8; text-align: justify; overflow-y: auto; width: 100%; flex: 1; padding-right: 15px; font-family: 'Lato', serif; font-weight: 600; }
        .papiro-close-btn { margin-top: 20px; background: transparent; color: #d7ccc8; border: 2px solid #5d4037; color: #5d4037; padding: 10px 40px; font-weight: bold; cursor: pointer; transition: 0.2s; font-family: 'Cinzel', serif; font-size: 1.1rem; }
        .papiro-close-btn:hover { background: #5d4037; color: #fff; }
        .papiro-body-real::-webkit-scrollbar { width: 8px; }
        .papiro-body-real::-webkit-scrollbar-thumb { background: #8d6e63; border-radius: 4px; }

        /* DETALHES MISSO (MODERN DARK) */
        .detail-view-main { width: 800px; height: 600px; display: flex; flex-direction: column; overflow: hidden; background: #0f172a; border: 2px solid #fbbf24; border-radius: 8px; }
        .detail-header-modern { background: linear-gradient(90deg, #1e293b, #0f172a); padding: 20px; border-bottom: 1px solid #334155; display: flex; gap: 20px; align-items: center; }
        .detail-rank-badge { font-size: 3rem; font-weight: 900; color: rgba(255,255,255,0.1); text-shadow: 0 0 20px rgba(251, 191, 36, 0.5); }
        .detail-rank-badge.rank-S, .detail-rank-badge.rank-SS { color: #fbbf24; opacity: 1; }
        .detail-title-col h2 { margin: 0; font-size: 2rem; color: #f1f5f9; letter-spacing: 2px; }
        .detail-narrator { color: #00f2ff; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }
        .detail-body-grid { flex: 1; overflow-y: auto; padding: 30px; display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .detail-info-row { grid-column: 1 / -1; display: flex; gap: 40px; border-bottom: 1px solid #334155; padding-bottom: 20px; }
        .info-item label { color: #fbbf24; font-size: 0.7rem; font-weight: bold; display: block; margin-bottom: 5px; }
        .info-item span { color: #fff; font-size: 1.1rem; }
        .detail-section { margin-bottom: 10px; }
        .section-label { display: block; color: #94a3b8; font-size: 0.75rem; font-weight: bold; margin-bottom: 8px; border-left: 3px solid #fbbf24; padding-left: 8px; }
        .section-text { color: #cbd5e1; line-height: 1.6; font-size: 0.95rem; white-space: pre-wrap; }
        .reward-section { grid-column: 1 / -1; background: rgba(251, 191, 36, 0.05); padding: 15px; border: 1px solid rgba(251, 191, 36, 0.2); border-radius: 6px; }
        .reward-content-box { display: flex; justify-content: space-between; align-items: center; }
        .gil-display-row { font-size: 1.5rem; font-weight: bold; color: #fff; display: flex; align-items: center; gap: 10px; }
        .gil-value { color: #fcd34d; }
        .extra-rewards-list { text-align: right; color: #fbbf24; font-size: 0.9rem; font-style: italic; }
        .ff-final-close-btn { width: 100%; padding: 20px; background: #020617; color: #fff; border: none; border-top: 1px solid #334155; font-family: 'Cinzel', serif; font-weight: bold; cursor: pointer; transition: 0.2s; letter-spacing: 2px; }
        .ff-final-close-btn:hover { background: #fbbf24; color: #000; }

        /* LIGHTBOX */
        .lightbox-wrap { position: relative; max-width: 90vw; max-height: 90vh; }
        .cartaz-full-view { max-width: 100%; max-height: 90vh; border: 3px solid #ffcc00; box-shadow: 0 0 50px #000; }
        .close-lightbox { position: absolute; top: -40px; right: -40px; background: transparent; border: none; color: #fff; font-size: 40px; cursor: pointer; }
        
        /* BOTO FLUTUANTE DE FICHAS */
        .fichas-trigger-btn { position: fixed; bottom: 30px; right: 190px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #00f2ff; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; }
        .fichas-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 25px #00f2ff; }
        .fichas-trigger-btn img { width: 70%; height: 70%; object-fit: contain; }

        /* LISTA DE FICHAS */
        .ficha-list-item { display: flex; justify-content: space-between; align-items: center; background: #1e293b; padding: 15px; border-radius: 4px; margin-bottom: 10px; border: 1px solid #334155; }
        .ficha-row-name strong { display: block; color: #fff; font-size: 1.1rem; }
        .ficha-row-name small { color: #94a3b8; }
        .btn-cyan { padding: 8px 15px; font-size: 0.8rem; }
      `})]})}const TO=[{id:"humes",name:"Humes",image:"races/humes.png",description:"Os Humes so a raa mais comum e predominante em Ivalice. Adaptveis, curiosos e persistentes, habitam desde as grandes capitais at vilarejos fronteirios. Sua origem  antiga e pouco documentada, mas acredita-se que foram os primeiros a construir grandes cidades e fundar os cls atuais.",characteristics:"Sua maior qualidade  a versatilidade. No se destacam naturalmente em nenhum atributo especfico, mas aprendem qualquer funo rapidamente, prosperando em qualquer lugar que chamem de lar.",racial_bonus:{value:5,detail:"5 pontos extras para distribuir livremente entre os atributos durante a criao de personagem."},base_classes:["Soldado","Mago Branco","Qumico"]},{id:"viera",name:"Viera",image:"races/viera.png",description:"Uma raa graciosa e enigmtica, marcada por longas orelhas e aparncia esguia. Vivem em florestas profundas, isoladas do mundo exterior e conectadas aos espritos da natureza. A sociedade  matriarcal.",characteristics:"Conhecidas por sentidos aguados, velocidade impressionante e habilidades mgicas refinadas. Os machos so raros e exilados ao atingirem a maturidade.",racial_bonus:{female:{VEL:3,INT:2},male_exiled:{"pontos-livres":5}},base_classes:{female:["Arqueira","Esgrimista","Curandeira"],male:["Exilado"]}},{id:"moogles",name:"Moogles",image:"races/moogles.png",description:"Pequenos, adorveis e envoltos em mistrio. Possuem corpos peludos, antenas com pompons flutuantes e pequenas asas de morcego. No possuem gnero definido.",characteristics:"Extremamente inteligentes e obcecados por tecnologia e invenes, misturando cincia com feitiaria. Carregam um estranho 'magnetismo da sorte'.",racial_bonus:{SOR:5},base_classes:["Animista","Engenheiro"]},{id:"bangaa",name:"Bangaa",image:"races/bangaa.png",description:"Guerreiros reptilianos robustos, com pele escamosa e traos que lembram drages antigos. So temidos pela fora bruta e respeitados pela honra em combate.",characteristics:"Sua origem remonta a tempos ancestrais e acredita-se que possuam sangue dracnico. Valorizam a lealdade, a disciplina fsica e o dever.",racial_bonus:{FOR:3,CONS:2},base_classes:["Monge","Guerreiro"]},{id:"grias",name:"Grias",image:"races/grias.png",description:"Guerreiras aladas, exclusivamente femininas, nascidas para dominar os cus. Possuem corpos atlticos, chifres, caudas e asas fortes.",characteristics:"Mestres da caa alada e emboscadas areas. Usam a altura como vantagem ttica e seus ataques de mergulho so devastadores.",racial_bonus:{VEL:2},passive_ability:{name:"Imunidade a Dano de Queda",effect:"No sofrem dano ao cair de qualquer altura nem de impactos ascendentes."},base_classes:["Monge","Guerreiro"]},{id:"elvaan",name:"Elvaan",image:"races/elvaan.png",description:"Originrios de Valendia, so guerreiros altos, nobres e disciplinados, com orelhas alongadas. Simbolizam tradio e justia em Ivalice.",characteristics:"Treinados desde a infncia no manejo de lminas e estilos de combate ancestrais. Desprezam truques e valorizam o confronto direto.",racial_bonus:{FOR:2},passive_ability:{name:"Domnio de Reao",effect:"Aprendem habilidades de reao com o dobro de rapidez."},base_classes:["Soldado","Espadachim"]},{id:"mithra",name:"Mithra",image:"races/mithra.png",description:"Raa com traos felinos, gil e astuta. Compartilham uma origem ancestral com as Viera, mas se espalharam por matas tropicais e runas.",characteristics:"Especialistas em furtividade, espionagem e ladronagem. Possuem forte senso de honra ligado  astcia.",racial_bonus:{VEL:2},passive_ability:{name:"Bnus de Camuflagem",effect:"Recebem vantagem em testes de furtividade, infiltrao e disfarce."},base_classes:["Ladra","Rastreadora"]},{id:"nu_mou",name:"Nu Mou",image:"races/nu-mou.png",description:"Pequenos em estatura, com aparncia canina e pelagem espessa, mas imensos em conhecimento. So magos natos que vivem sculos acumulando sabedoria.",characteristics:"Frequentemente ocupam cargos de conselheiros. Possuem empatia natural com a vida selvagem, comunicando-se com monstros e animais.",racial_bonus:{INT:3,CAR:2},base_classes:["Mago Branco","Adestrador"]},{id:"hypello",name:"Hypello",image:"races/hypello.png",description:"Raa anfbia dos pntanos de Kerwon. Possuem grande estatura, corpos robustos e pele azulada ou esverdeada.",characteristics:"Herbalistas por excelncia, mestres em usar plantas para curas ou venenos. Sua maior fora  a vitalidade e a empatia.",racial_bonus:{CONS:5},base_classes:["Escudeiro","Curandeiro"]},{id:"umbros",name:"Umbros",image:"races/umbros.png",description:"Seres de pele negra e marcas brilhantes que reagem  lua. Descendentes dos seres tocados pelas Pedras Zodiacais.",characteristics:"Alta resistncia  corrupo e aptido mgica. Vistos como orculos ou andarilhos que carregam segredos esquecidos.",racial_bonus:{INT:2},passive_ability:{name:"Modo Luar",effect:"Sob luz direta da lua visvel, causam o dobro de dano final com qualquer magia."},base_classes:["Mago Negro","Ocultista"]}],NO={races:TO},RO=JSON.parse(`[{"id":"soldado","name":"Soldado","type":"Bsica","role":"Tanque / Suporte de status","description":"Guerreiros de linha de frente, treinados para resistir aos maiores impactos do campo de batalha e desestabilizar o inimigo com habilidades tticas conhecidas como 'Pausas'.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Primeiro Socorro","description":"Trata os prprios ferimentos, restaurando 25% do HP.","cost":"N/A","type":"HB"},{"name":"Quebra de Poder","description":"Reduz a FOR do alvo pela metade, por trs turnos.","cost":"N/A","type":"HB"},{"name":"Quebra Magia","description":"Reduz a INT do alvo pela metade, por trs turnos.","cost":"N/A","type":"HB"},{"name":"Quebra de Mana","description":"Reduz a MP do alvo pela metade por trs turnos.","cost":"N/A","type":"HB"},{"name":"Provocar","description":"Inflige FURIA a um alvo.","cost":"N/A","type":"HB"},{"name":"Shieldbearer","description":"Permite ao usurio equipar escudos, mesmo fora da classe Soldado.","cost":"N/A","type":"Passiva"}]},{"id":"mago_branco","name":"Mago Branco","type":"Bsica","role":"Suporte / Cura / Anti-morto-vivo","description":"Especialistas em suporte mgico, sua principal funo  manter o grupo de p com curas poderosas, proteo espiritual e magias de ressuscitao.","bonus_class":{"MP":5},"requirements":[],"abilities":[{"name":"Cure","description":"Cura magicamente os ferimentos do alvo. Restaura 10% do PV e causa dano a mortos-vivos.","cost":"8 MP","type":"Magia"},{"name":"Cura","description":"Restaura magicamente 25% de HP. Causa dano a mortos-vivos.","cost":"18 MP","type":"Magia"},{"name":"Curaga","description":"Restaura magicamente 75% de HP. Causa dano a mortos-vivos.","cost":"32 MP","type":"Magia"},{"name":"Esuna","description":"Remove magicamente os efeitos negativos do alvo.","cost":"10 MP","type":"Magia"},{"name":"Arise","description":"Revive magicamente o alvo, removendo o KO. Causa dano a mortos-vivos.","cost":"40 MP","type":"Magia"},{"name":"Turbo MP","description":"Os feitios custam o dobro de seus MP normais, e do o dobro de dano.","cost":"N/A","type":"Passiva"}]},{"id":"quimico","name":"Qumico","type":"Bsica","role":"Suporte / Manipulador de Itens","description":"Mestres do preparo e uso ttico de poes. Utilizam conhecimentos alqumicos para curar aliados e enfraquecer inimigos.","bonus_class":{"SOR":2,"CAR":3},"requirements":[],"abilities":[{"name":"Preparar Poo","description":"Cria uma poo bsica durante o turno.","cost":"N/A","type":"HB"},{"name":"Arremessar Poo","description":"Permite arremessar qualquer poo equipada em um aliado ou inimigo a at 3 quadrados.","cost":"N/A","type":"HB"},{"name":"Frasco Instvel","description":"Arremessa uma mistura explosiva improvisada que causa dano de elemento aleatrio.","cost":"N/A","type":"HB"},{"name":"Reao em Cadeia","description":"Permite usar duas poes diferentes ao mesmo tempo.","cost":"N/A","type":"HB"},{"name":"Reciclagem Alqumica","description":"Recupera uma poo gasta no combate.","cost":"N/A","type":"HB"},{"name":"Inventrio Estendido","description":"Bolsa exclusiva para poes que no ocupa espao no inventrio padro (at 8 poes).","cost":"N/A","type":"Passiva"}]},{"id":"arqueira","name":"Arqueira","type":"Bsica","role":"Atiradora / Controle de Campo","description":"Especialistas em combate  distncia, treinadas para derrubar inimigos com preciso e neutralizar alvos.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Foco","description":"Aumenta drasticamente a preciso e dobra o dano final do ataque.","cost":"N/A","type":"HB"},{"name":"Acerto na Perna","description":"Causa IMOBILIZAO, impedindo movimentos por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Acerto na Mo","description":"Causa DESARME por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Mira Precisa","description":"Adiciona o atributo SORTE ao dano final do ataque.","cost":"N/A","type":"HB"},{"name":"Apago","description":"Causa CEGUEIRA, reduzindo severamente a chance de acerto do alvo por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Concentrao","description":"Aumenta a chance de acerto em todos os disparos de longa distncia.","cost":"N/A","type":"Passiva"}]},{"id":"esgrimista","name":"Esgrimista","type":"Bsica","role":"Duelista / Assassina de preciso","description":"Combatentes graciosas e letais, treinadas no uso refinado da rapieira.","bonus_class":{"VEL":3,"FOR":2},"requirements":[],"abilities":[{"name":"Picada Venenosa","description":"Causa dano e aplica VENENO ao alvo.","cost":"N/A","type":"HB"},{"name":"Voo da Andorinha","description":"Ataca todos os inimigos ao redor, podendo derrub-los.","cost":"N/A","type":"HB"},{"name":"Golpe Perfurante","description":"Estocada que atravessa o primeiro alvo e atinge um segundo atrs dele.","cost":"N/A","type":"HB"},{"name":"Golpe de Mana","description":"Causa dano e reduz o MP do inimigo.","cost":"N/A","type":"HB"},{"name":"Xeque-mate","description":"Inflige CONDENAO (morte aps 3 turnos).","cost":"N/A","type":"HB"},{"name":"Passos Leves","description":"Pode atravessar reas de gua rasa sem perder mobilidade.","cost":"N/A","type":"Passiva"}]},{"id":"curandeira","name":"Curandeira","type":"Bsica","role":"Suporte / Cura Natural","description":"Guardis da vida e das florestas, conectadas  energia da natureza para curar e proteger.","bonus_class":{"HP":3,"MP":2},"requirements":[],"abilities":[{"name":"Folha Serena","description":"Cura um aliado em 10 de HP.","cost":"8 MP","type":"Magia"},{"name":"Broto Purificador","description":"Remove um status negativo de um aliado.","cost":"18 MP","type":"Magia"},{"name":"Conexo Natural","description":"25% do dano recebido pelo aliado  transferido para a Curandeira por 3 turnos.","cost":"20 MP","type":"Magia"},{"name":"Vinhas Enlaantes","description":"Prende at 3 inimigos, impedindo movimento por 2 turnos.","cost":"24 MP","type":"Magia"},{"name":"Nvoa Vigorosa","description":"Cura leve em todos os aliados prximos (rea 3 blocos).","cost":"35 MP","type":"Magia"},{"name":"Refrigrio da Floresta","description":"30% de chance de conceder Resistncia Natural (+5 ARM ou +5 RES) ao curar.","cost":"N/A","type":"Passiva"}]},{"id":"exilado","name":"Exilado","type":"Bsica","role":"Lutador Adaptvel / Sobrevivente","description":"Viera masculinos banidos que aprenderam a sobreviver por conta prpria, adaptando-se a qualquer arma.","bonus_class":{"Livre":5},"requirements":[],"abilities":[{"name":"Tiro Preciso","description":"Disparo com preciso perfeita (usa SOR).","cost":"N/A","type":"HB (Arco)"},{"name":"Golpe Silencioso","description":"Causa DANO CRTICO automtico se o alvo estiver de costas.","cost":"N/A","type":"HB (Adaga)"},{"name":"Finta Desarmante","description":"Reduz o ATAQUE do inimigo por 2 turnos.","cost":"N/A","type":"HB (Espada)"},{"name":"Ruptura Selvagem","description":"Ignora a DEFESA do inimigo e causa dano elevado.","cost":"N/A","type":"HB (Espado)"},{"name":"Primeiros Socorros","description":"Cura 20% do HP a si mesmo ou aliado.","cost":"N/A","type":"HB"},{"name":"Adaptao de Combate","description":"Pode trocar a arma equipada 1 vez por turno sem custo de ao.","cost":"N/A","type":"Passiva"}]},{"id":"guerreiro","name":"Guerreiro","type":"Bsica","role":"Linha de Frente / Espancador","description":"Muralhas de msculo treinados para esmagar o inimigo com pura fora fsica.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Primeiro Socorro","description":"Trata os prprios ferimentos, restaurando 20% do HP.","cost":"N/A","type":"HB"},{"name":"Poder de Rend","description":"Reduz o ATAQUE do alvo.","cost":"N/A","type":"HB"},{"name":"Rend Magick","description":"Reduz a MAGIA do alvo.","cost":"N/A","type":"HB"},{"name":"Batida Corporal","description":"Investida causando dano FOR+CONS, volta 40% do dano a si mesmo.","cost":"N/A","type":"HB"},{"name":"Grito de Guerra","description":"Imobiliza o inimigo por 2 turnos e pode causar medo.","cost":"N/A","type":"HB"},{"name":"Monkey Grip","description":"Permite empunhar armas de duas mos com uma mo s.","cost":"N/A","type":"Passiva"}]},{"id":"monge","name":"Monge","type":"Bsica","role":"Linha de Frente / Espancador","description":"Lutadores que usam o ki e seus prprios corpos como armas letais.","bonus_class":{"FOR":3,"CONS":2},"requirements":[],"abilities":[{"name":"Onda Giratria","description":"Ataque giratrio que atinge todos ao redor em 1 bloco.","cost":"N/A","type":"HB"},{"name":"Pulso de Ar","description":"Soco com ki que causa dano e empurra o alvo 2 blocos.","cost":"N/A","type":"HB"},{"name":"Pulso de Terra","description":"Dano terrestre em linha reta (at 3 blocos).","cost":"N/A","type":"HB"},{"name":"Exploso de Ki","description":"Dano em rea de 2 blocos ao redor do monge.","cost":"N/A","type":"HB"},{"name":"Meditao","description":"Restaura 20% de HP e remove status negativos.","cost":"N/A","type":"HB"},{"name":"Reflexo","description":"50% de chance de desviar de ataques bsicos fsicos.","cost":"N/A","type":"Reao"}]},{"id":"animista","name":"Animista","type":"Bsica","role":"Suporte / Manipulador de Status","description":"Moogles que usam instrumentos e talentos imprevisveis para causar efeitos absurdos no campo.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"L Fofa","description":"Garante status 'Proteo' e 'Shell' por 3 turnos.","cost":"8 MP","type":"Magia"},{"name":"Erva de Gato","description":"Aplica 'BERSERK' no inimigo.","cost":"8 MP","type":"HB"},{"name":"Canto do Sapo","description":"Transforma o alvo em SAPO por 2 turnos.","cost":"22 MP","type":"Magia"},{"name":"Cozinhar","description":"Restaura 50% do HP do Alvo.","cost":"22 MP","type":"HB"},{"name":"Conte Ovelhinhas","description":"Faz todos os inimigos em pequena rea adormecerem.","cost":"15 MP","type":"Magia"},{"name":"Abanar o Rabo","description":"20% de chance de ENCANTAR o atacante quando alvejado.","cost":"N/A","type":"Reao"}]},{"id":"engenheiro","name":"Engenheiro","type":"Bsica","role":"Suporte Aleatrio / Caos Tecnolgico","description":"Gnios insanos que usam aparatos e mecanismos imprevisveis.","bonus_class":{"SOR":3,"INT":2},"requirements":[],"abilities":[{"name":"Box Vermelha","description":"Lana 'Haste' em uma unidade aleatria.","cost":"8 MP","type":"HB"},{"name":"Kit Azul","description":"Lana 'Dissipar' ao colidir com alvo aleatrio.","cost":"8 MP","type":"HB"},{"name":"Chaves Negras","description":"Aplica 'Condenao' em quem for atingido.","cost":"20 MP","type":"HB"},{"name":"Bateria Dourada","description":"Restaura 50% HP em uma unidade aleatria.","cost":"16 MP","type":"HB"},{"name":"Borrifador Verde","description":"Aplica VENENO em uma unidade aleatria na rea.","cost":"8 MP","type":"HB"},{"name":"Ajuste Rpido","description":"Permite reutilizar habilidade que falhou no turno seguinte sem custo de MP.","cost":"N/A","type":"Passiva"}]},{"id":"raptora","name":"Raptora","type":"Bsica","role":"Lutadora de Linha de Frente / Alta Mobilidade","description":"Guerreiras aladas que usam velocidade e instintos aguados para ataques rpidos.","bonus_class":{"FOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Ciclone","description":"Causa dano de vento em rea pequena.","cost":"N/A","type":"HB"},{"name":"Poder de Rend","description":"Reduz o ATAQUE do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Rend Magick","description":"Reduz a MAGIA do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Rend MP","description":"Diminui MP do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Redemoinho","description":"Lminas de vento causam dano e CONFUSO.","cost":"N/A","type":"HB"},{"name":"Salvaguarda","description":"Impede que a arma seja roubada ou destruda.","cost":"N/A","type":"Passiva"}]},{"id":"rastreadora","name":"Rastreadora","type":"Bsica","role":"Caadora / Suporte de Rastreio e Preciso","description":"Mestres da observao que leem o terreno e perseguem presas.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Sonic Boom","description":"Dano sonoro impossvel de desviar.","cost":"N/A","type":"HB"},{"name":"Expulsar","description":"Fora um monstro a fugir do combate.","cost":"N/A","type":"HB"},{"name":"Rastrear","description":"Marca um Monstro como 'presa', causando DANO DOBRADO.","cost":"N/A","type":"HB"},{"name":"Investigar","description":"Revela todas as informaes do alvo.","cost":"N/A","type":"HB"},{"name":"ltimo Tiro","description":"Alto dano com chance de infligir CONDENAO.","cost":"N/A","type":"HB"},{"name":"Sobrevivente","description":"Recebe REGEN quando estiver com 20% de HP ou menos.","cost":"N/A","type":"Passiva"}]},{"id":"espadachim","name":"Espadachim","type":"Bsica","role":"Lutador Verstil / Duelo & Tcnica","description":"Guerreiros disciplinados que combinam preciso fsica e poder mgico na lmina.","bonus_class":{"FOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Corte Cruzado","description":"Dano em rea frontal (arco) em at 3 inimigos.","cost":"N/A","type":"HB"},{"name":"Olhos no Duelo","description":"+25% de dano se enfrentar apenas um inimigo.","cost":"N/A","type":"HB"},{"name":"Corte Etreo","description":"Golpe mgico  distncia (FOR+INT).","cost":"10 MP","type":"HB"},{"name":"Passo Veloz","description":"Move-se para trs do inimigo com +50% de chance de crtico.","cost":"N/A","type":"HB"},{"name":"Trifria","description":"Combo de 3 ataques com chance de Sangramento.","cost":"N/A","type":"HB"},{"name":"Corte Reflexivo","description":"30% de chance de aparar projteis fsicos.","cost":"N/A","type":"Reao"}]},{"id":"ladra","name":"Ladra","type":"Bsica","role":"Furtividade / Roubo","description":"Mestras do furto e agilidade que roubam itens e gil em combate.","bonus_class":{"SOR":3,"CAR":2},"requirements":[],"abilities":[{"name":"Roubar Gil","description":"Tenta roubar dinheiro.","cost":"N/A","type":"HB"},{"name":"Roubar Item","description":"Tenta roubar um item.","cost":"N/A","type":"HB"},{"name":"Roubar Equipamento","description":"Tenta roubar o Equipamento do alvo.","cost":"N/A","type":"HB"},{"name":"Destrancar","description":"Pode destrancar portas ou bas.","cost":"N/A","type":"HB"},{"name":"Golpe Furtivo","description":"Dobro de dano se estiver Escondida.","cost":"N/A","type":"HB"},{"name":"Instinto Possessivo","description":"Evita roubo e tenta roubar a arma do ladro.","cost":"N/A","type":"Reao"}]},{"id":"espreitadora","name":"Espreitadora","type":"Bsica","role":"Furtividade / Infiltrao","description":"Especialistas em camuflagem e eliminao silenciosa.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Ataque Surpresa","description":"Crtico automtico se fora do campo de viso.","cost":"N/A","type":"HB"},{"name":"Rpida e Escondida","description":"Velocidade dobrada quando camuflada.","cost":"N/A","type":"Passiva"},{"name":"Manto Noturno","description":"Aumenta chance de camuflagem  noite.","cost":"N/A","type":"Passiva"},{"name":"Silncio","description":"Aplica Silncio por 3 turnos (apenas camuflada).","cost":"N/A","type":"HB"},{"name":"Derrubada Mortal","description":"Elimina instantaneamente alvo pelas costas (apenas camuflada).","cost":"N/A","type":"HB"},{"name":"Morte Silenciosa","description":"50% de chance de permanecer camuflada aps eliminar alvo.","cost":"N/A","type":"Passiva"}]},{"id":"adestrador","name":"Adestrador","type":"Bsica","role":"Controle de Criaturas / Suporte Ttico","description":"Especialistas em lidar com a vida selvagem, controlando monstros temporariamente.","bonus_class":{"CAR":5},"requirements":[],"abilities":[{"name":"Adestrar","description":"Controla um monstro por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Bater ou Correr","description":"Recebe Haste quando HP chega a 10%.","cost":"N/A","type":"Reao"}]},{"id":"escudeiro","name":"Escudeiro","type":"Bsica","role":"Defensor / Suporte com Itens","description":"Pilares de defesa que protegem aliados e usam itens de suporte.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Postura de Defesa","description":"Reduz pela metade o dano recebido at o prximo turno.","cost":"N/A","type":"HB"},{"name":"Apoio Vital","description":"Usa at 2 poes para curar aliados adjacentes.","cost":"N/A","type":"HB"},{"name":"Eu te Protejo!","description":"Salta no aliado que tomar dano e absorve o golpe.","cost":"N/A","type":"Reao"},{"name":"Lanamento Cuidadoso","description":"Arremessa item a at 3 blocos.","cost":"N/A","type":"HB"},{"name":"Grito Protetor","description":"Provoca inimigos forando ataque ao Escudeiro.","cost":"N/A","type":"HB"},{"name":"Reao Instintiva","description":"Usa poo automaticamente ao sofrer golpe com HP baixo.","cost":"N/A","type":"Reao"}]},{"id":"mago_negro","name":"Mago Negro","type":"Bsica","role":"Ofensivo Mgico / Controle Elemental","description":"Conjuradores que dominam a magia elemental destrutiva.","bonus_class":{"INT":3,"MP":2},"requirements":[],"abilities":[{"name":"Fire","description":"Esfera de fogo em rea (alvo + 1 casa cada lado).","cost":"10 MP","type":"Magia"},{"name":"Blizzard","description":"Fragmento congelante perfurante.","cost":"10 MP","type":"Magia"},{"name":"Thunder","description":"Raio direto sobre inimigo e adjacentes.","cost":"10 MP","type":"Magia"},{"name":"Aero","description":"Turbilho de vento em rea.","cost":"10 MP","type":"Magia"},{"name":"Telecinese","description":"Move objeto/unidade at 5 blocos.","cost":"10 MP","type":"Magia"},{"name":"Absorver Mana","description":"Absorve 20% do dano mgico recebido como Mana.","cost":"N/A","type":"Reao"}]},{"id":"ocultista","name":"Ocultista","type":"Bsica","role":"Mago das Sombras / Maldies","description":"Estudiosos do proibido que manipulam trevas e maldies.","bonus_class":{"MP":3,"INT":2},"requirements":[],"abilities":[{"name":"Escurido","description":"Dano mgico de trevas em rea.","cost":"10 MP","type":"Magia"},{"name":"Ritual da Condenao","description":"Aplica CONDENAO no alvo.","cost":"15 MP","type":"Magia"},{"name":"Barreira do Silncio","description":"Aplica SILNCIO no alvo.","cost":"15 MP","type":"Magia"},{"name":"Vu Cego","description":"Aplica CEGUEIRA no alvo.","cost":"15 MP","type":"Magia"},{"name":"Avada Mortis","description":"Tenta aplicar morte instantnea.","cost":"30 MP","type":"Magia"},{"name":"Olhar do Abismo","description":"Aumenta INT aps concluir maldio.","cost":"N/A","type":"Passiva"}]},{"id":"quimico_avancado","name":"Qumico Avanado","type":"Avanada","role":"Suporte / Manipulador de Itens","description":"Evoluo do Qumico, usa reaes elementares e poes ofensivas em rea.","bonus_class":{"SOR":4,"CAR":2},"requirements":["3 Habilidades Mestre em Qumico","+30 SOR"],"abilities":[{"name":"Criar Poo Avanada","description":"Cria poes de qualidade superior.","cost":"N/A","type":"HB"},{"name":"Arremesso Rpido","description":"Arremessa at 3 poes em um movimento.","cost":"N/A","type":"HB"},{"name":"Frasco Venenoso","description":"Libera veneno em rea.","cost":"N/A","type":"HB"},{"name":"Frasco Milagroso","description":"Remove todos status negativos.","cost":"N/A","type":"HB"},{"name":"Dose Grande","description":"Aumenta rea de efeito da poo.","cost":"N/A","type":"HB"},{"name":"Pr-Preparo","description":"Inicia combate com 2 poes prontas.","cost":"N/A","type":"Passiva"}]},{"id":"clerigo","name":"Clrigo","type":"Avanada","role":"Curandeiro de Linha de Frente","description":"Elo entre fora e f, luta na frente enquanto cura aliados.","bonus_class":{"CONS":4,"MANA":2},"requirements":["1 Habilidade Mestre em Soldado","2 Habilidades Mestre em Mago Branco","+20 FOR"],"abilities":[{"name":"Julgamento Divino","description":"Dano sagrado (FOR+Luz).","cost":"20 MP","type":"Magia"},{"name":"Palavras de F","description":"Concede Barreira e Shell.","cost":"15 MP","type":"Magia"},{"name":"Espurgar","description":"Expulsa monstros espirituais.","cost":"25 MP","type":"Magia"},{"name":"Martelo Giratrio","description":"Dano em rea ao redor (CONS+FOR+Luz).","cost":"30 MP","type":"HB"},{"name":"Ruptura Divina","description":"Exploso triangular de luz.","cost":"50 MP","type":"HB"},{"name":"Estou com Voc","description":"Cura auto 10% de aliado adjacente por turno.","cost":"N/A","type":"Passiva"}]},{"id":"alquimista","name":"Alquimista","type":"Avanada","role":"Suporte / Manipulador de Campo","description":"Molda o mundo convertendo solo e energia em poder.","bonus_class":{"INT":4,"MANA":2},"requirements":["2 Habilidades Mestre em Mago Branco","1 Habilidade Mestre em Qumico","+30 INT"],"abilities":[{"name":"Pilar de Pedra","description":"Pilar de rocha atinge inimigo (INT+Terra).","cost":"20 MP","type":"Magia"},{"name":"Canho de Pedra","description":"Projtil de rocha distante.","cost":"20 MP","type":"Magia"},{"name":"Correntes de Solo","description":"Imobiliza inimigo.","cost":"17 MP","type":"Magia"},{"name":"Transmutao Peridica","description":"Altera elemento natural de rea/objeto.","cost":"30 MP","type":"Magia"},{"name":"Golem de Pedra","description":"Cria golem controlvel.","cost":"50 MP","type":"Magia"},{"name":"Muro","description":"Bloqueia ataque com muro de pedra.","cost":"N/A","type":"Reao"}]},{"id":"duelista","name":"Duelista","type":"Avanada","role":"Lutador de Elite / Combate Singular","description":"pice do domnio da espada, focado em preciso e duelos.","bonus_class":{"FOR":4,"VEL":2},"requirements":["3 Habilidades Mestre em Espadachim","+30 FOR","+20 VEL"],"abilities":[{"name":"BackStep","description":"Salta 2 blocos para esquiva.","cost":"N/A","type":"HB"},{"name":"Eu Contra Voc","description":"+50% dano em alvo nico.","cost":"N/A","type":"HB"},{"name":"Chuva de Lminas","description":"Trs cortes de ar consecutivos.","cost":"N/A","type":"HB"},{"name":"Postura de Batalha","description":"Aumenta ataque fsico em 50%.","cost":"N/A","type":"HB"},{"name":"Grande Slash","description":"Golpe que percorre o campo todo.","cost":"N/A","type":"HB"},{"name":"Defesa Contnua","description":"Desvia golpe se FOR > inimigo.","cost":"N/A","type":"Reao"}]},{"id":"iluminista","name":"Iluminista","type":"Avanada","role":"Mago Supremo / Controlador Elemental Global","description":"Concentra energia para ataques globais ou curas totais.","bonus_class":{"INT":5,"MANA":5},"requirements":["5 Habilidades Mestre em Mago Branco","5 Habilidades Mestre em Mago Negro"],"abilities":[{"name":"Piromancia","description":"Dano global de Fogo aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Aquamancia","description":"Dano global de gua aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Raiomancia","description":"Dano global de Trovo aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Whitemancia","description":"Cura global 50% HP aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Tretamancia","description":"Plasma linear de ponta a ponta.","cost":"50 MP","type":"Magia"},{"name":"Ritual Seguro","description":"Ativa Barreira/Veloz ao ser alvejado conjurando.","cost":"N/A","type":"Reao"}]},{"id":"oppenheir","name":"Oppenheir","type":"Avanada","role":"Mestre Qumico / Manipulador da Destruio","description":"Alquimia levada ao limite de exploses e reaes em cadeia.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Qumico","5 Habilidades Mestre em Qumico Avanado"],"abilities":[{"name":"Reao Altrusta","description":"Exploso de cura e remoo de status.","cost":"N/A","type":"HB"},{"name":"Nuvem Txica","description":"Veneno em rea e reduz preciso.","cost":"N/A","type":"HB"},{"name":"Ignis Vitae","description":"Chamas conscientes perseguidoras.","cost":"N/A","type":"HB"},{"name":"Fragmento Celular","description":"Microexploso de dano massivo.","cost":"N/A","type":"HB"},{"name":"Bomba Atmica","description":"Exploso que elimina todos no campo (exceto cobertura).","cost":"N/A","type":"HB"},{"name":"Entropia Perfeita","description":"Chance de remover penalidades ao explodir.","cost":"N/A","type":"Passiva"}]},{"id":"eremita","name":"Eremita","type":"Avanada","role":"Tanque / Protetor Espiritual","description":"Sacerdote de batalha que converte dano em sacrifcio e proteo.","bonus_class":{"CONS":10},"requirements":["5 Habilidades Mestre em Clrigo","+100 CONS"],"abilities":[{"name":"F ao Meu Redor","description":"Aura cura 50% HP aliados prximos.","cost":"N/A","type":"HB"},{"name":"F do Sol","description":"Raio solar expurga mortos-vivos e queima.","cost":"N/A","type":"HB"},{"name":"F da Lua","description":"Cura 100% HP aliados prximos.","cost":"N/A","type":"HB"},{"name":"F do Ferro","description":"Concede Shell+ e Barreira+.","cost":"N/A","type":"HB"},{"name":"F do Brbaro","description":"Provoca inimigos e soma CONS ao dano.","cost":"N/A","type":"HB"},{"name":"Aquele que Me Protege","description":"Converte 20% do dano recebido em cura.","cost":"N/A","type":"Passiva"}]},{"id":"arquidenio","name":"Arquidnio","type":"Avanada","role":"Suporte / Manipulador de Probabilidades","description":"Mago matemtico que manipula valores e estatsticas de combate.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Alquimista","+100 INT"],"abilities":[{"name":"O Dobro","description":"Dobra qualquer valor por 1 turno.","cost":"50 MP","type":"Magia"},{"name":"Pela Metade","description":"Divide qualquer valor por 2.","cost":"50 MP","type":"Magia"},{"name":"100%","description":"Garante acerto absoluto.","cost":"70 MP","type":"Magia"},{"name":"0%","description":"Anula valor ou chance a 0.","cost":"70 MP","type":"Magia"},{"name":"Septania","description":"Multiplica valor por 7x.","cost":"100 MP","type":"Magia"},{"name":"Lgica Perfeita","description":"Resultado natural 20 uma vez por batalha.","cost":"N/A","type":"Passiva"}]},{"id":"samurai","name":"Samurai","type":"Avanada","role":"Ofensivo / Especialista em Duelo","description":"Guerreiro disciplinado que une velocidade e fora em cortes perfeitos.","bonus_class":{"FOR":5,"VEL":5},"requirements":["5 Habilidades Mestre em Espadachim","5 Habilidades Mestre em Duelista"],"abilities":[{"name":"Saque Rpido","description":"Duplica FOR e VEL por 1 turno.","cost":"N/A","type":"HB"},{"name":"Furaco da Folha","description":"Tornado de cortes em linha reta.","cost":"N/A","type":"HB"},{"name":"Olhos de Falco","description":"Soma FOR + SOR contra alvo.","cost":"N/A","type":"HB"},{"name":"Corte do Drago","description":"Golpe instantneo. 20 natural elimina alvo.","cost":"N/A","type":"HB"},{"name":"Cu Limpo","description":"Corte vertical colossal aps preparao.","cost":"N/A","type":"HB"},{"name":"Empunhadura Dupla","description":"Pode empunhar duas armas.","cost":"N/A","type":"Passiva"}]},{"id":"gladiador","name":"Gladiador","type":"Avanada","role":"Linha de Frente / Controle e Fora Bruta","description":"Colosso de arena que luta por glria e brutalidade.","bonus_class":{"FOR":4,"CONS":2},"requirements":["2 Habilidades Mestre em Guerreiro","+30 FOR"],"abilities":[{"name":"Grito Selvagem","description":"Aumenta FOR e provoca inimigos.","cost":"N/A","type":"HB"},{"name":"Investida de Escudo","description":"Dano de impacto com escudo.","cost":"N/A","type":"HB"},{"name":"Espancamento","description":"5 golpes consecutivos, pode imobilizar.","cost":"N/A","type":"HB"},{"name":"Espada Flamejante","description":"Causa Queimadura com ataques fsicos.","cost":"N/A","type":"HB"},{"name":"Postura de Luta","description":"Evita ataques e contra-ataca.","cost":"N/A","type":"HB"},{"name":"Escudeiro","description":"Pode usar escudos em qualquer classe.","cost":"N/A","type":"Passiva"}]},{"id":"artista_marcial","name":"Artista Marcial","type":"Avanada","role":"Linha de Frente / Especialista em Combos","description":"Especialista em golpes precisos e canalizao de fora vital.","bonus_class":{"VEL":4,"CONS":2},"requirements":["2 Habilidades Mestre em Monge","+30 VEL"],"abilities":[{"name":"Combo do Tigre","description":"3 golpes, dano aumenta a cada acerto.","cost":"N/A","type":"HB"},{"name":"Golpe Serpenteante","description":"Aproximao em zigue-zague e crtico.","cost":"N/A","type":"HB"},{"name":"Palma Sagrada","description":"Golpe de dano puro que ignora armadura.","cost":"N/A","type":"HB"},{"name":"Passo do Vento","description":"Teleporte curto e ataque surpresa.","cost":"N/A","type":"HB"},{"name":"Punhos do Drago","description":"5 golpes simultneos com chance de atordoar.","cost":"N/A","type":"HB"},{"name":"Esprito Indomvel","description":"Ganha FOR e VEL quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"lanceiro","name":"Lanceiro","type":"Avanada","role":"Ofensivo / Alcance e Preciso","description":"Predador de longo alcance com lanas.","bonus_class":{"VEL":4,"SOR":2},"requirements":["2 Habilidades Mestre em Guerreiro","+30 VEL"],"abilities":[{"name":"Ponta Longa","description":"Estende alcance para 4 blocos.","cost":"N/A","type":"HB"},{"name":"Dardo de Javali","description":"Arremessa a lana perfurando linha reta.","cost":"N/A","type":"HB"},{"name":"Jump","description":"Salta e cai sobre inimigo com dano alto.","cost":"N/A","type":"HB"},{"name":"Barreira de Cabo","description":"Empurra inimigos adjacentes.","cost":"N/A","type":"HB"},{"name":"Ponta Perfurante","description":"Golpe linear que perfura alvos.","cost":"N/A","type":"HB"},{"name":"Rpido como uma Lana","description":"Converte VEL em dano quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"lutador_de_rua","name":"Lutador de Rua","type":"Avanada","role":"Ofensivo / Anti-Honra","description":"Brigo desonesto que usa fora bruta e truques sujos.","bonus_class":{"Livre":6},"requirements":["2 Habilidades Mestre em Monge","1 Habilidade Mestre em outra classe"],"abilities":[{"name":"Vou te Arrebentar!","description":"+20% dano contra alvo marcado.","cost":"N/A","type":"HB"},{"name":"Lariat de Msculos","description":"Golpe de brao com chance de Atordoar.","cost":"N/A","type":"HB"},{"name":"Soco na Costela","description":"Finta e golpe crtico preciso.","cost":"N/A","type":"HB"},{"name":"Rasteira Malandra","description":"Aplica Imobilizado.","cost":"N/A","type":"HB"},{"name":"Sequncia de Raiva","description":"5 ataques e entra em Fria.","cost":"N/A","type":"HB"},{"name":"Covarde","description":"Dobra VEL para fugir quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"vinking","name":"Vinking","type":"Avanada","role":"Brbaro Mstico","description":"Guerreiro ancestral guiado por troves e fria divina.","bonus_class":{"FOR":4,"CONS":2},"requirements":["3 Habilidades Mestre em Gladiador","+50 FOR","+50 CONS"],"abilities":[{"name":"Marchar de Heimdall","description":"Dobra VEL prpria e de aliados.","cost":"N/A","type":"HB"},{"name":"Trovo de Thor","description":"Raio cai a distncia.","cost":"N/A","type":"HB"},{"name":"Confronto de Tyr","description":"Dobra FOR por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Ma de Iduna","description":"Recupera 80% HP e remove status.","cost":"N/A","type":"HB"},{"name":"Por Odin!","description":"Aumenta todos atributos por 1 turno.","cost":"N/A","type":"HB"},{"name":"At Valhalla","description":"Converte CONS em FOR quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"templario","name":"Templrio","type":"Avanada","role":"Mobilidade Extrema / Linha de Frente","description":"Soldado perfeito que domina o campo com lana e velocidade.","bonus_class":{"VEL":4,"CONS":2},"requirements":["3 Habilidades Mestre em Lanceiro","+50 VEL","+50 FOR"],"abilities":[{"name":"Salto Rpido","description":"Teleporte para qualquer parte do mapa.","cost":"N/A","type":"HB"},{"name":"Avano Perfurante","description":"Avano linear perfurante.","cost":"N/A","type":"HB"},{"name":"Dardos Perfurantes","description":"5 ataques em sequncia.","cost":"N/A","type":"HB"},{"name":"Lana Flamejante","description":"Adiciona Fogo aos ataques.","cost":"N/A","type":"HB"},{"name":"Dardo do Drago","description":"Arremesso perfurante em linha reta.","cost":"N/A","type":"HB"},{"name":"Lana Giratria","description":"Evita ataques  distncia.","cost":"N/A","type":"Reao"}]},{"id":"mestre_artes_marciais","name":"Mestre das Artes Marciais","type":"Avanada","role":"Duelista / Manipulador de Ki","description":"Harmonia total entre corpo e Ki.","bonus_class":{"CONS":4,"Livre":2},"requirements":["5 Habilidades Mestre em Monge","5 Habilidades Mestre em Artista Marcial"],"abilities":[{"name":"Dana do Carvalho Vermelho","description":"Combo de 5 golpes de vento.","cost":"N/A","type":"HB"},{"name":"Palma do Drago","description":"Ondas de ar  distncia.","cost":"N/A","type":"HB"},{"name":"Teken","description":"Dobra ARM e RES por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Dana do Sabugueiro Marrom","description":"Reduz ARM do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Dana do Esprito Branco","description":"Clone dobra aes por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Intuio de Ki","description":"Imune a surpresas.","cost":"N/A","type":"Passiva"}]},{"id":"brutamontes","name":"Brutamontes","type":"Avanada","role":"Tanque Ofensivo","description":"Muralha do submundo que protege e esmaga.","bonus_class":{"CAR":4,"SOR":2},"requirements":["5 Habilidades Mestre em Lutador de Rua","100 FOR"],"abilities":[{"name":"No Vai Passar","description":"Bloqueia avano inimigo e dobra defesa.","cost":"N/A","type":"HB"},{"name":"Lariat Duplo","description":"Arrasta inimigos adjacentes.","cost":"N/A","type":"HB"},{"name":"Emboscada","description":"Recupera HP e contra-ataca quem aproximar.","cost":"N/A","type":"HB"},{"name":"Pose do Brutamontes","description":"Salto esmagador com onda de choque.","cost":"N/A","type":"HB"},{"name":"Manda-Chuva","description":"Buffa aliados e debuffa inimigos em rea.","cost":"N/A","type":"HB"},{"name":"Fraco Demais","description":"Nega dano menor que sua FOR.","cost":"N/A","type":"Passiva"}]},{"id":"cavaleiro_dragao","name":"Cavaleiro Drago","type":"Avanada","role":"Caador de Drages / Ofensivo Elemental","description":"Guerreiros que usam poderes de drago.","bonus_class":{"CONS":5,"BonusDanoDragao":"20%"},"requirements":["Eliminar um Drago"],"abilities":[{"name":"Bafo do Drago Vermelho","description":"Fogo em rea triangular.","cost":"N/A","type":"HB"},{"name":"Garras do Drago Ciano","description":"Golpe de gelo com avano.","cost":"N/A","type":"HB"},{"name":"Salto do Drago Amarelo","description":"Salto eltrico (1 turno no ar).","cost":"N/A","type":"HB"},{"name":"Beno do Drago Azul","description":"Cura 50% HP.","cost":"N/A","type":"HB"},{"name":"Energia do Drago Branco","description":"Raio de luz linear.","cost":"N/A","type":"HB"},{"name":"Aura de Drago","description":"Monstros fracos sentem medo.","cost":"N/A","type":"Passiva"}]},{"id":"dragonslayer","name":"Dragonslayer","type":"Avanada","role":"Anti-Drago / Executador","description":"Arma final contra drages, capaz de subjugar feras colossais.","bonus_class":{"FOR":6,"BonusDanoDragao":"60%"},"requirements":["5 Habilidades Mestre em Cavaleiro Drago"],"abilities":[{"name":"Sopro do Drago Esmeralda","description":"Nuvem txica em rea.","cost":"N/A","type":"HB"},{"name":"Rasante do Drago Prateado","description":"Rasante de vento linear mapa todo.","cost":"N/A","type":"HB"},{"name":"Escamas do Drago Ouro","description":"Dobra ARM e RES.","cost":"N/A","type":"HB"},{"name":"Tremor do Drago de Bronze","description":"Estacas de pedra e tremor.","cost":"N/A","type":"HB"},{"name":"Ameaa do Drago Negro","description":"Miasma negra aplica Condenao.","cost":"N/A","type":"HB"},{"name":"Escamas Elementais","description":"Absorve dano elemental convertendo em CONS.","cost":"N/A","type":"Passiva"}]},{"id":"xama","name":"Xam","type":"Avanada","role":"Debuff / Manipulador de Caos","description":"Lida com foras ocultas e ancestrais dos pntanos.","bonus_class":{"MANA":3,"CONS":2},"requirements":["2 Habilidades Mestre em Curandeiro","+30 MANA"],"abilities":[{"name":"Xabala Cegaris","description":"Cega alvo por 5 turnos.","cost":"15 MP","type":"Magia"},{"name":"Ziriki Sileci","description":"Silencia alvo por 5 turnos.","cost":"15 MP","type":"Magia"},{"name":"Urucubaca","description":"Aplica Envenenamento.","cost":"20 MP","type":"Magia"},{"name":"Ianhamaj","description":"Imobiliza alvo por 5 turnos.","cost":"20 MP","type":"Magia"},{"name":"Zakarinhad","description":"Aplica Condenao.","cost":"30 MP","type":"Magia"},{"name":"Oshala","description":"Imune a status negativos.","cost":"N/A","type":"Passiva"}]},{"id":"monge_do_pantano","name":"Monge do Pntano","type":"Avanada","role":"Lutador de Terreno / Porradeiro","description":"Canaliza a densidade do pntano em golpes pesados.","bonus_class":{"CONS":3,"FOR":2},"requirements":["1 Habilidade Mestre em Curandeiro","1 Habilidade Mestre em Escudeiro","+20 FOR"],"abilities":[{"name":"Soco do Pntano","description":"Golpe aqutico carregado.","cost":"N/A","type":"HB"},{"name":"Barrigada","description":"Esmaga e empurra.","cost":"N/A","type":"HB"},{"name":"Vu do Pntano","description":"Dobra RES por 3 turnos.","cost":"N/A","type":"HB"},{"name":"Abrao do Pntano","description":"Agarro esmagador.","cost":"N/A","type":"HB"},{"name":"Boxe do Pntano","description":"3 golpes consecutivos pantanosos.","cost":"N/A","type":"HB"},{"name":"gua Est Comigo","description":"Dobra dano em terreno de gua.","cost":"N/A","type":"Passiva"}]},{"id":"glutao","name":"Gluto","type":"Avanada","role":"Tank / Absorvedor de Dano","description":"Foras da natureza famintas e indestrutveis.","bonus_class":{"CONS":5},"requirements":["1 Habilidade Mestre em Curandeiro","1 Habilidade Mestre em Escudeiro","+20 CONS"],"abilities":[{"name":"Investida do Sapo","description":"Atropela em linha reta.","cost":"N/A","type":"HB"},{"name":"Descanso do Sapo","description":"Cura e dobra defesa (imvel).","cost":"N/A","type":"HB"},{"name":"Arroto do Sapo","description":"Dano de impacto sonoro.","cost":"N/A","type":"HB"},{"name":"Pulo do Sapo","description":"Esmaga alvo com peso.","cost":"N/A","type":"HB"},{"name":"Vou Te Comer","description":"Devora inimigo com 25% HP ou menos.","cost":"N/A","type":"HB"},{"name":"Boca Sempre Mexendo","description":"Recupera 10% HP se no agir.","cost":"N/A","type":"Passiva"}]},{"id":"protetor","name":"Protetor","type":"Avanada","role":"Tank / Guardio de Campo","description":"Muralhas vivas dedicadas a proteger aliados.","bonus_class":{"CONS":5},"requirements":["2 Habilidades Mestre em Escudeiro","+30 CONS"],"abilities":[{"name":"Eu Tanko, Voc Mata","description":"Absorve 80% do dano de aliado e buffa FOR dele.","cost":"N/A","type":"HB"},{"name":"Investida do Escudo","description":"Corre com escudo e atordoa.","cost":"N/A","type":"HB"},{"name":"Reflexo do Escudo","description":"Escudo ricocheteia em inimigos.","cost":"N/A","type":"HB"},{"name":"Sapo Protetor","description":"Compartilha defesa com aliados ao redor.","cost":"N/A","type":"HB"},{"name":"Escudo de Proteo Areo","description":"Anula prximo dano em aliado.","cost":"N/A","type":"HB"},{"name":"Socorros Rpidos","description":"Salta para tomar golpe por aliado.","cost":"N/A","type":"Reao"}]},{"id":"pai_do_pantano","name":"Pai do Pntano","type":"Avanada","role":"Mago de Terreno / Controle","description":"Tornou-se um com o pntano, controlando razes e mars.","bonus_class":{"MANA":6},"requirements":["5 Habilidades Mestre em Xam","5 Habilidades Mestre em Curandeiro"],"abilities":[{"name":"Razes do Sabugueiro de Ihoa","description":"Imobiliza inimigos em rea.","cost":"50 MP","type":"Magia"},{"name":"Pico dos Pinheiros","description":"Pinheiros empalam inimigos.","cost":"50 MP","type":"Magia"},{"name":"Gota de Orvalho","description":"Cura 100% HP e remove status (rea).","cost":"50 MP","type":"Magia"},{"name":"Primavera Serena","description":"Dobra INT e RES de aliados.","cost":"40 MP","type":"Magia"},{"name":"Mar do Mangue","description":"Empurra inimigos, remove buffs e cura aliados (global).","cost":"100 MP","type":"Magia"},{"name":"Floresta Viva","description":"Razes prendem inimigos engajados.","cost":"N/A","type":"Passiva"}]},{"id":"sabio_do_pantano","name":"Sbio do Pntano","type":"Avanada","role":"Controle de gua / Contra-Golpe","description":"Domina a energia viva do pntano com constituio colossal.","bonus_class":{"CONS":6},"requirements":["5 Habilidades Mestre em Monge do Pntano","+100 CONS"],"abilities":[{"name":"Punho do Pntano","description":"Ataques ganham elemento gua.","cost":"N/A","type":"Passiva"},{"name":"Serpente do Pntano","description":"Ataque linear de gua.","cost":"N/A","type":"HB"},{"name":"AquaReflete","description":"Esfera de gua empurra alvo.","cost":"N/A","type":"HB"},{"name":"Pantanogan","description":"Esfera de gua empurra alvo.","cost":"N/A","type":"HB"},{"name":"Bola de Canho","description":"Projtil vivo de dano massivo.","cost":"N/A","type":"HB"},{"name":"Contra-Corpo","description":"Contra-ataca fsico e empurra.","cost":"N/A","type":"Reao"}]},{"id":"burgues_do_pantano","name":"Burgus do Pntano","type":"Avanada","role":"Tanque / Controle","description":"Suprema ganncia, usa corpo colossal e autoridade.","bonus_class":{"CONS":6},"requirements":["5 Habilidades Mestre em Gluto","+100 CONS"],"abilities":[{"name":"Imposto do Pntano","description":"Rouba 20% HP do alvo e remove buff.","cost":"N/A","type":"HB"},{"name":"Barriga Monrquica","description":"Dobra defesa e bloqueia passagem.","cost":"N/A","type":"HB"},{"name":"Banquete Exclusivo","description":"Cura 100% HP e ganha Fria.","cost":"N/A","type":"HB"},{"name":"Tesouro do Pntano","description":"Exploso de cofre.","cost":"N/A","type":"HB"},{"name":"Decreto de Propriedade","description":"Debuffa inimigos e buffa aliados em rea.","cost":"N/A","type":"HB"},{"name":"Soberania do Pntano","description":"Cura ao aproximar inimigo e aplica Lentido.","cost":"N/A","type":"Passiva"}]},{"id":"guardiao_do_pantano","name":"Guardio do Pntano","type":"Avanada","role":"Tanque / Suporte Supremo","description":"Monlito vivo que ergue muralhas de escudos.","bonus_class":{"CONS":10},"requirements":["5 Habilidades Mestre em Escudeiro","5 Habilidades Mestre em Protetor"],"abilities":[{"name":"Priso de Escudo","description":"Prende alvo em 4 escudos.","cost":"N/A","type":"HB"},{"name":"Dobro de Escudo","description":"Dobra qualquer escudo em jogo.","cost":"N/A","type":"HB"},{"name":"Grande Escudo","description":"Protege rea enorme atrs dele.","cost":"N/A","type":"HB"},{"name":"Escudo Revitalizador","description":"Cura 100% HP rea.","cost":"N/A","type":"HB"},{"name":"Proteo em Grande Escala","description":"Anula prximo dano em TODOS aliados.","cost":"N/A","type":"HB"},{"name":"Proteo Mgica","description":"Usa habilidade de proteo em aliado alvejado.","cost":"N/A","type":"Reao"}]},{"id":"cantor_das_mares","name":"Cantor das Mars","type":"Avanada","role":"Suporte / Buffer Musical","description":"Bardos que usam melodias espirituais.","bonus_class":{"CAR":5},"requirements":["+50 CAR"],"abilities":[{"name":"Cantar","description":"Executa msica do repertrio (efeitos variados).","cost":"N/A","type":"HB"},{"name":"Palco Improvisado","description":"Dobro de efeito se estiver em terreno elevado.","cost":"N/A","type":"Passiva"}]},{"id":"astro_do_pantano","name":"Astro do Pntano","type":"Avanada","role":"Suporte Musical / Manipulador de Moral","description":"cone musical que move multides.","bonus_class":{"CAR":10},"requirements":["Ttulo musical com Cantor das Mars"],"abilities":[{"name":"Mashup","description":"Combina duas msicas simultneas.","cost":"N/A","type":"HB"},{"name":"Charme Musical","description":"Enfeitia atacante.","cost":"N/A","type":"Reao"}]},{"id":"sutileira","name":"Sutileira","type":"Avanada","role":"Roubo de Elite / Suporte Social","description":"Ladras de alta classe, elegantes e imperceptveis.","bonus_class":{"CAR":3,"SOR":2},"requirements":["2 Habilidades Mestre em Ladra","+20 SOR"],"abilities":[{"name":"Roubar Arma Principal","description":"Furta a arma equipada do alvo.","cost":"N/A","type":"HB"},{"name":"Roubar Acessrios","description":"Furta anis/colares.","cost":"N/A","type":"HB"},{"name":"Roubar Item de Luxo","description":"Furta item mais raro.","cost":"N/A","type":"HB"},{"name":"Detectar Armadilhas","description":"Percebe armadilhas em raio de 5 blocos.","cost":"N/A","type":"HB"},{"name":"Famme Fatale","description":"Encanta alvo e pode aplicar Condenao.","cost":"N/A","type":"HB"},{"name":"Mestre dos Assaltos","description":"No ativa armadilhas.","cost":"N/A","type":"Passiva"}]},{"id":"rastreadora_avancada","name":"Rastreadora (Avanada)","type":"Avanada","role":"Dano / Furtividade / Controle","description":"Felinas letais que unem furtividade com caa predatria.","bonus_class":{"SOR":3,"VEL":2},"requirements":["2 Habilidades Mestre em Espreitadora","+20 VEL"],"abilities":[{"name":"Cheiro do Medo","description":"Dobra MOV na direo do alvo.","cost":"N/A","type":"HB"},{"name":"Detectar Fraqueza","description":"Prximo ataque soma SOR ao dano.","cost":"N/A","type":"HB"},{"name":"Colocar Armadilhas","description":"Instala armadilha no campo.","cost":"N/A","type":"HB"},{"name":"Salto da Morte","description":"Ataque de cima com bnus de SOR.","cost":"N/A","type":"HB"},{"name":"Morte em Sequncia","description":"Golpe linear em todos no trajeto.","cost":"N/A","type":"HB"},{"name":"Contra Ataque","description":"Contra-ataca fsico adjacente.","cost":"N/A","type":"Reao"}]},{"id":"kunoichi","name":"Kunoichi","type":"Avanada","role":"Ninjutsu / Controle Elemental","description":"Assassinas discretas que usam iluses e ninjutsu.","bonus_class":{"INT":3,"SOR":2},"requirements":["2 Habilidades Mestre em Ladra","2 Habilidades Mestre em Espreitadora"],"abilities":[{"name":"Arremesso de Kunai","description":"Kunai amplificada com INT.","cost":"N/A","type":"HB"},{"name":"Bomba de Fumaa","description":"Fica camuflada instantaneamente.","cost":"N/A","type":"HB"},{"name":"Genjutsu","description":"Iluso causa Confuso.","cost":"25 MP","type":"Magia"},{"name":"Suiton","description":"Vrtice de gua (INT+gua).","cost":"30 MP","type":"Magia"},{"name":"Doton","description":"Pilar de terra (INT+Terra).","cost":"30 MP","type":"Magia"},{"name":"Clone das Sombras","description":"Clone repete ninjutsu.","cost":"N/A","type":"Passiva"}]},{"id":"chefona","name":"Chefona","type":"Avanada","role":"DPS / Suporte Criminoso","description":"Mandachuva do crime que usa pistolas e capangas.","bonus_class":{"SOR":6},"requirements":["5 Habilidades Mestre em Ladra","5 Habilidades Mestre em Sutileira","+100 SOR"],"abilities":[{"name":"Paredo","description":"Saraivada de balas em alvo.","cost":"N/A","type":"HB"},{"name":"Tiroteio","description":"Tiros em rea ao redor.","cost":"N/A","type":"HB"},{"name":"Estragar o Velrio","description":"Tiro na cabea (morte instantnea) se camuflada.","cost":"N/A","type":"HB"},{"name":"Bora Rapaziada","description":"Buffa MOV e VEL de aliados.","cost":"N/A","type":"HB"},{"name":"Meus Capangas","description":"Invoca 2 capangas.","cost":"N/A","type":"HB"},{"name":"Dois Ferros","description":"Pode usar duas armas de fogo.","cost":"N/A","type":"Passiva"}]},{"id":"assassina","name":"Assassina","type":"Avanada","role":"Eliminadora de Alvos","description":"Lenda das sombras, elimina alvos silenciosamente.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Espreitadora","5 Habilidades Mestre em Rastreadora","+100 SOR"],"abilities":[{"name":"Lmina de Veneno","description":"Ataques causam Envenenamento.","cost":"N/A","type":"HB"},{"name":"Sombras Caminhantes","description":"Teleporte via sombras.","cost":"N/A","type":"HB"},{"name":"Tendes Frgeis","description":"Aplica Imobilizado.","cost":"N/A","type":"HB"},{"name":"Instinto Assassino","description":"Causa Medo em alvos com <20% HP.","cost":"N/A","type":"Passiva"},{"name":"Frenesi das Sombras","description":"Fria de sombra, dobra VEL.","cost":"N/A","type":"HB"},{"name":"Minha Garrucha","description":"Finaliza alvo com <15% HP.","cost":"N/A","type":"Reao"}]},{"id":"jounin","name":"Jounin","type":"Avanada","role":"Mestre Elemental / Ttico","description":"Elite ninja que domina ninjutsu avanado.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Kunoichi","+100 INT"],"abilities":[{"name":"Futon","description":"5 lminas de ar em alvos diversos.","cost":"50 MP","type":"Magia"},{"name":"Raiton","description":"5 troves em alvos diversos.","cost":"50 MP","type":"Magia"},{"name":"Katon","description":"Esfera de fogo linear larga.","cost":"50 MP","type":"Magia"},{"name":"Embuir Arma","description":"Infunde arma com elemento.","cost":"30 MP","type":"Magia"},{"name":"Invocao","description":"Invoca animal ninja (D20).","cost":"N/A","type":"HB"},{"name":"Substituio","description":"Troca com tronco ao ser alvejada.","cost":"N/A","type":"Reao"}]},{"id":"dancarina","name":"Danarina","type":"Avanada","role":"Performer Mstica","description":"Transforma o campo em palco com performances mgicas.","bonus_class":{"CAR":5},"requirements":["+50 CAR"],"abilities":[{"name":"Danar","description":"Executa performance ligada ao equipamento.","cost":"N/A","type":"HB"},{"name":"Pirueta Defensiva","description":"Chance de esquivar de ataque fsico.","cost":"N/A","type":"Reao"}]},{"id":"odalisca_de_batalha","name":"Odalisca de Batalha","type":"Avanada","role":"Suporte Supremo / DPS Elegante","description":"Danarina de elite com armas exticas e danas agressivas.","bonus_class":{"CAR":10},"requirements":["4 Performances de Danarina"],"abilities":[{"name":"Swicth","description":"Troca equipamento de dana sem gastar ao.","cost":"N/A","type":"HB"},{"name":"Mestre da Dana","description":"Equipa dois instrumentos simultneos.","cost":"N/A","type":"Passiva"}]},{"id":"cavaleira_alada","name":"Cavaleira Alada","type":"Avanada","role":"Duelista Area","description":"Elite militar do cu, mergulha com velocidade devastadora.","bonus_class":{"FOR":3,"VEL":2},"requirements":["3 Habilidades Mestre em Raptora","+30 FOR"],"abilities":[{"name":"Por Glria","description":"Buffa FOR de aliados.","cost":"N/A","type":"HB"},{"name":"Redemoinho de Lmina","description":"Corte circular de vento.","cost":"N/A","type":"HB"},{"name":"Brisa da Guerra","description":"Ataques ganham lmina de vento extra.","cost":"N/A","type":"HB"},{"name":"Slash de Vento","description":"Lmina de ar  distncia.","cost":"N/A","type":"HB"},{"name":"Suplex Aero","description":"Agarra e arremessa inimigo do cu.","cost":"N/A","type":"HB"},{"name":"Escudo Meu","description":"Pode usar escudos.","cost":"N/A","type":"Passiva"}]},{"id":"cacadora_alada","name":"Caadora Alada","type":"Avanada","role":"DPS / Rastreio","description":"Predadora do cu com viso aguada e arco.","bonus_class":{"VEL":3,"SOR":2},"requirements":["3 Habilidades Mestre em Ranged","+30 VEL"],"abilities":[{"name":"Animal Guia","description":"Invoca esprito animal companheiro.","cost":"N/A","type":"HB"},{"name":"Camuflagem","description":"Entra em camuflagem.","cost":"N/A","type":"HB"},{"name":"Saraivada Area","description":"Chuva de flechas em rea.","cost":"N/A","type":"HB"},{"name":"Colocar Armadilhas","description":"Posiciona armadilha.","cost":"N/A","type":"HB"},{"name":"Tiro Avanado","description":"Flecha colossal linear (Arco Grande).","cost":"N/A","type":"HB"},{"name":"Tiro Duplo","description":"Dispara duas flechas por ataque.","cost":"N/A","type":"Passiva"}]},{"id":"terrana","name":"Terrana","type":"Avanada","role":"Lutadora Arcana / Terra","description":"Devotada  fora bruta da terra, usa martelos e magia.","bonus_class":{"INT":3,"MANA":2},"requirements":["1 Habilidade Mestre em Raptora","1 Habilidade Mestre em Ranged","+30 INT"],"abilities":[{"name":"Me Terra","description":"Cura em rea ao bater martelo.","cost":"20 MP","type":"Magia"},{"name":"Fissura Terrana","description":"Cria fissura no solo.","cost":"30 MP","type":"Magia"},{"name":"A Terra Sobre Mim","description":"Armadura de rocha (dobra AMR/RES).","cost":"20 MP","type":"Magia"},{"name":"Pilar do Martelo","description":"Ataque  distncia com pilar.","cost":"40 MP","type":"Magia"},{"name":"Terremoto Aero","description":"Impacto ssmico ao saltar.","cost":"50 MP","type":"Magia"},{"name":"Vibrao do Solo","description":"Detecta inimigos no solo.","cost":"N/A","type":"Passiva"}]},{"id":"devastadora","name":"Devastadora","type":"Avanada","role":"Dano Areo / Linha de Frente","description":"Especialista em combate areo com espades colossais.","bonus_class":{"FOR":4,"VEL":2},"requirements":["5 Habilidades Mestre em Raptora","5 Habilidades Mestre em Cavaleira Alada","+100 FOR"],"abilities":[{"name":"Ventania do Espado","description":"Empurra alvos com vento.","cost":"N/A","type":"HB"},{"name":"Arrasante Cortante","description":"Corte em alta velocidade.","cost":"N/A","type":"HB"},{"name":"Furaco de Lminas","description":"Tornado de lminas em rea.","cost":"N/A","type":"HB"},{"name":"Rpida e Veloz","description":"Dobra VEL.","cost":"N/A","type":"HB"},{"name":"Corte da Montanha","description":"Corte colossal de vento.","cost":"N/A","type":"HB"},{"name":"Contra-ataque do Vento","description":"Rebate fsico e empurra.","cost":"N/A","type":"Reao"}]},{"id":"atiradora_dos_ceus","name":"Atiradora dos Cus","type":"Avanada","role":"DPS Area","description":"Caadora suprema que domina territrios do ar.","bonus_class":{"VEL":4,"SOR":2},"requirements":["5 Habilidades Mestre em Ranged","5 Habilidades Mestre em Caadora Alada","+100 VEL"],"abilities":[{"name":"Ataque Areo","description":"Disparo vertical preciso.","cost":"N/A","type":"HB"},{"name":"Reposicionamento Areo","description":"Voo rpido e ataque.","cost":"N/A","type":"HB"},{"name":"Bombardeio Areo","description":"Atinge inimigos no trajeto de voo.","cost":"N/A","type":"HB"},{"name":"Alvo Marcado","description":"Marca alvo adicionando SOR ao dano.","cost":"N/A","type":"HB"},{"name":"Alvos Certeiros","description":"Tiros perfeitos em 5 alvos.","cost":"N/A","type":"HB"},{"name":"Minha Flecha  Melhor","description":"Desvia de projtil e contra-ataca.","cost":"N/A","type":"Reao"}]},{"id":"geomancer","name":"Geomancer","type":"Avanada","role":"Maga Elemental / Joias","description":"Maga que desperta poder oculto de joias antigas.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Terrana","+100 INT"],"abilities":[{"name":"Ressonncia","description":"Disparo elemental da joia.","cost":"30 MP","type":"Magia"},{"name":"Jia Equipada","description":"Engata joia na arma (dano elemental).","cost":"N/A","type":"HB"},{"name":"Joia Astral","description":"Buff poderoso da joia.","cost":"30 MP","type":"Magia"},{"name":"Sacrifcio da Jia","description":"Destri joia para duplicar efeito.","cost":"40 MP","type":"Magia"},{"name":"Triplo Gen","description":"Feixe combinado de 3 joias.","cost":"70 MP","type":"Magia"},{"name":"Joalheira","description":"Troca de joias sem gastar ao.","cost":"N/A","type":"Passiva"}]},{"id":"demon","name":"Demon","type":"Avanada","role":"Ameaa / Controle","description":"Guerreiras marcadas pela morte, brutais e imprevisveis.","bonus_class":{"Livre":5},"requirements":["Voltar da morte 10 vezes"],"abilities":[{"name":"Rugido do Demnio","description":"Aplica Medo em rea.","cost":"N/A","type":"HB"},{"name":"Vampirismo","description":"Rouba HP do alvo.","cost":"N/A","type":"HB"},{"name":"Consumir Arma","description":"Destri arma para ganhar status.","cost":"N/A","type":"HB"},{"name":"Embuir Demon","description":"Infunde arma com escurido.","cost":"N/A","type":"HB"},{"name":"Demon Ark","description":"Aplica Medo/Condenao/Morte.","cost":"N/A","type":"HB"},{"name":"Mestre de Armas","description":"Equipa arma instantaneamente.","cost":"N/A","type":"Passiva"}]},{"id":"lord_demon","name":"Lord Demon","type":"Avanada","role":"Senhora da Morte","description":"pice da linhagem demonaca, comanda almas.","bonus_class":{"Livre":10},"requirements":["5 Habilidades Mestre em Demon","Colher 100 almas"],"abilities":[{"name":"Dark Esfera","description":"Absorve alma de inimigos com Medo.","cost":"N/A","type":"HB"},{"name":"Colheita","description":"Suga alma de alvo com Medo (Morte).","cost":"N/A","type":"HB"},{"name":"Aura da Lord","description":"Dobra RES e fora Medo.","cost":"N/A","type":"HB"},{"name":"Dark Arma","description":"Lana armas sacrificadas.","cost":"N/A","type":"HB"},{"name":"ltimo Rugido","description":"Medo global e morte em quem j tem.","cost":"N/A","type":"HB"},{"name":"Tenha Medo de Mim","description":"Chance de aplicar Medo ao receber dano.","cost":"N/A","type":"Reao"}]},{"id":"magos_elementais","name":"Magos Elementais","type":"Avanada","role":"DPS Mgico de rea","description":"Umbros que transformam magia em cataclismos.","bonus_class":{"INT":3,"MANA":2},"requirements":["3 Habilidades Mestre em Mago Negro","+30 INT"],"abilities":[{"name":"Fire+","description":"Exploso de fogo grande rea.","cost":"20 MP","type":"Magia"},{"name":"Blizzard+","description":"Estilhaos de gelo grande rea.","cost":"20 MP","type":"Magia"},{"name":"Thunder+","description":"Trovo colossal em rea.","cost":"20 MP","type":"Magia"},{"name":"Maremoto","description":"Onda empurra inimigos.","cost":"40 MP","type":"Magia"},{"name":"Trifsico","description":"Combina 3 elementos em exploso.","cost":"50 MP","type":"Magia"},{"name":"Manto Refletor","description":"Reflete magia com 50% dano.","cost":"N/A","type":"Reao"}]},{"id":"arcanistas","name":"Arcanistas","type":"Avanada","role":"Maldies / Invocador","description":"Preservam artes proibidas e invocam demnios.","bonus_class":{"MANA":3,"INT":2},"requirements":["3 Habilidades Mestre em Ocultista","+50 MANA"],"abilities":[{"name":"Escurido+","description":"Exploso de trevas.","cost":"25 MP","type":"Magia"},{"name":"Cruz Mana","description":"Drena Mana.","cost":"30 MP","type":"Magia"},{"name":"Sentidus Mortis","description":"Remove sentidos (Silncio/Cegueira).","cost":"40 MP","type":"Magia"},{"name":"Petrificatis","description":"Petrifica alvo.","cost":"40 MP","type":"Magia"},{"name":"Invocar Demnio Menor","description":"Invoca demnio (D20).","cost":"50 MP","type":"Magia"},{"name":"Pacto","description":"Dobra VEL e RES com demnio ativo.","cost":"N/A","type":"Passiva"}]},{"id":"malandro","name":"Malandro","type":"Avanada","role":"Suporte Social / Manipulao","description":"Usa lbia e cartas para manipular o campo.","bonus_class":{"CAR":3,"SOR":2},"requirements":["+20 CAR"],"abilities":[{"name":"Fala Positiva","description":"Dobra atributo de alvo.","cost":"N/A","type":"HB"},{"name":"Fala Negativa","description":"Reduz atributo pela metade.","cost":"N/A","type":"HB"},{"name":"Carta Voadora","description":"Carta ricocheteia em alvos.","cost":"N/A","type":"HB"},{"name":"Carta Marcada","description":"Dobra dano recebido pelo alvo.","cost":"N/A","type":"HB"},{"name":"Malabarismo de Cartas","description":"Impede movimentos em rea.","cost":"N/A","type":"HB"},{"name":"Fala Mansa","description":"Chance de convencer atacante a desistir.","cost":"N/A","type":"Reao"}]},{"id":"arquimagos","name":"Arquimagos","type":"Avanada","role":"DPS Mgico Supremo","description":"Moldam elementos, invocando meteoros e tempestades.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Mago Negro","5 Habilidades Mestre em Mago Elemental","+100 INT"],"abilities":[{"name":"Meteoro","description":"Destruio massiva em rea.","cost":"100 MP","type":"Magia"},{"name":"Vrtex de Fogo","description":"Vrtex que queima rea por turnos.","cost":"50 MP","type":"Magia"},{"name":"Chuva de Raios","description":"Atinge inimigos aleatrios por turnos.","cost":"50 MP","type":"Magia"},{"name":"Nevasca Afiada","description":"Estalactites aleatrias por turnos.","cost":"50 MP","type":"Magia"},{"name":"Super Lua","description":"Lua cura aliados e permanece.","cost":"80 MP","type":"Magia"},{"name":"OVER LUNA","description":"Ignora RES sob efeito da Lua.","cost":"N/A","type":"Passiva"}]},{"id":"necromago","name":"Necromago","type":"Avanada","role":"Controle Absoluto / Necromancia","description":"Traz mortos e usa rituais profanos.","bonus_class":{"MANA":10},"requirements":["5 Habilidades Mestre em Ocultista","5 Habilidades Mestre em Arcanista","+100 INT"],"abilities":[{"name":"Necromancia","description":"Controla alma cada.","cost":"70 MP","type":"Magia"},{"name":"Mortis Dorner","description":"Tenta Morte Instantnea.","cost":"40 MP","type":"Magia"},{"name":"Redoma Sentis","description":"Cega e Silencia rea ao redor.","cost":"50 MP","type":"Magia"},{"name":"Invocar Demnio Superior","description":"Invoca demnio brutal (D20).","cost":"90 MP","type":"Magia"},{"name":"Buraco Negro","description":"Remove todos do campo.","cost":"200 MP","type":"Magia"},{"name":"Toque da Morte","description":"Chance de Condenao ao ser atacado.","cost":"N/A","type":"Reao"}]},{"id":"king_street","name":"King Street","type":"Avanada","role":"Controle Mental / Dominao Social","description":"Rei das ruas que controla vontades com a voz.","bonus_class":{"CAR":10},"requirements":["5 Habilidades Mestre em Malandro","+100 CAR"],"abilities":[{"name":"Corra!","description":"Impulsiona mobilidade de alvo.","cost":"N/A","type":"HB"},{"name":"Beleza Sedutora","description":"Encanta alvos em rea.","cost":"N/A","type":"HB"},{"name":"Ajoelhe-se","description":"Obriga inimigos a se ajoelharem.","cost":"N/A","type":"HB"},{"name":" Sua Vez de Novo","description":"Concede ao extra a aliado.","cost":"N/A","type":"HB"},{"name":"Charme do Malandro","description":"Transforma inimigo em aliado.","cost":"N/A","type":"HB"},{"name":"Estrondo Vocal","description":"Atinge todos atributos do alvo.","cost":"N/A","type":"Passiva"}]},{"id":"apostador","name":"Apostador","type":"Avanada","role":"Manipulador de Probabilidades","description":"Usa baralho especial para efeitos aleatrios poderosos.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Malandro","+100 SOR"],"abilities":[{"name":"Escolha uma Carta","description":"Puxa carta (D80) com efeito contnuo.","cost":"N/A","type":"HB"},{"name":"Valete Rpido","description":"Dobra status fsicos (Carta Valete).","cost":"N/A","type":"HB"},{"name":"Dama Salvadora","description":"Cura e remove status (Carta Dama).","cost":"N/A","type":"HB"},{"name":"Rei do Poder","description":"Exploso em rea (Carta Rei).","cost":"N/A","type":"HB"},{"name":"s da Sorte","description":"Puxa todas cartas (Carta s).","cost":"N/A","type":"HB"},{"name":"Carta na Manga","description":"Troca carta guardada instantaneamente.","cost":"N/A","type":"Passiva"}]},{"id":"shadow_hunters","name":"Shadow Hunters","type":"Avanada","role":"Invocador Sombrio","description":"Extrai sombras de mortos para lutar.","bonus_class":{"Livre":10},"requirements":["Chegar a 1 HP em batalha 100 vezes"],"abilities":[{"name":"Erga-se","description":"Extrai sombra de cadver como soldado.","cost":"N/A","type":"HB"},{"name":"Sombra Salvadora","description":"Sombra absorve dano fatal.","cost":"N/A","type":"Reao"}]},{"id":"monarca_das_sombras","name":"Monarca das Sombras","type":"Avanada","role":"Exrcito Vivo","description":"Comanda exrcito sombrio sozinho.","bonus_class":{"Livre":10},"requirements":["Possuir 4 sombras no nvel 10"],"abilities":[{"name":"Troca de Sombra","description":"Troca de lugar com sombra.","cost":"N/A","type":"HB"},{"name":"Retorno das Sombras","description":"Cura ao perder sombra.","cost":"N/A","type":"Passiva"}]}]`),CO={classes:RO},IO=()=>{const i=Xi(),e=w.useRef(null),[n,s]=w.useState("carousel"),[o,c]=w.useState(0),[f,m]=w.useState(null),[g,b]=w.useState("female"),[_,E]=w.useState(null),[N,z]=w.useState(!1),[H,U]=w.useState(""),[D,X]=w.useState(!1),Y=NO.races;w.useEffect(()=>{Nt&&(Nt.pause(),Nt.currentTime=0)},[]),w.useEffect(()=>{(async()=>{if(Ot.currentUser)try{const j=Ue(Ae,"characters",Ot.currentUser.uid);(await kd(j)).exists()&&(console.log("Personagem j existe. Redirecionando..."),i("/jogador-vtt"))}catch(j){console.error("Erro ao verificar personagem:",j)}})()},[i]),w.useEffect(()=>{document.querySelectorAll("audio, video").forEach(T=>{if(!(T.tagName==="VIDEO"&&T.classList.contains("background-video")))try{T.pause(),T.currentTime=0}catch{}})},[]),w.useEffect(()=>{if(n==="carousel"&&e.current){const j=window.innerWidth/2-130,T=o*300-j+130;e.current.scrollTo({left:T,behavior:"smooth"})}},[o,n]);const ee=k=>{e.current&&(e.current.scrollLeft+=k.deltaY*4)},ae=k=>{if(!k)return"Nenhum";const j={value:"Valor",detail:"Detalhes",details:"Detalhes",free_points:"Pontos Livres",female:"Feminino",male:"Masculino",male_exiled:"Masculino (Exilado)"};return typeof k=="object"?Object.entries(k).map(([T,Te],Se)=>{if(T==="type")return null;const G=j[T]||T.toUpperCase().replace(/_/g," ");let ce=Te;return typeof Te=="object"&&(ce=JSON.stringify(Te).replace(/["{}]/g,"").replace(/:/g,": ").replace(/,/g,", ")),u.jsxs("div",{className:"mb-1",children:[u.jsxs("span",{className:"text-gray-400 font-bold",children:[G,":"]})," ",u.jsx("span",{className:"text-gray-200",children:ce})]},Se)}):k},ge=()=>f?typeof f.base_classes=="object"&&!Array.isArray(f.base_classes)?f.id==="viera"?g==="female"?f.base_classes.female:f.base_classes.male||f.base_classes.male_exiled:[]:f.base_classes||[]:[],fe=k=>CO.classes.find(j=>j.name===k),O=()=>{m(Y[o]),E(null),s("details")},C=()=>{s("carousel"),E(null)},I=async()=>{if(!(!H.trim()||!Ot.currentUser||D)){X(!0);try{const k={basic_info:{character_name:H,race:f.name,level:1,experience:{current:0,max:100},guild_insignia:"",special_image:"",guild_rank_image:""},attributes:{FOR:{value:10},INT:{value:10},SOR:{value:10},CAR:{value:10},VEL:{value:10},CONS:{value:10}},status:{hp:{current:20,max:20},mp:{current:10,max:10},arm:{value:0},res:{value:0},mov:{value:3}},inventory:{gil:500,items:[]},equipment:{slots:[{},{},{},{},{},{},{}]},job_system:{primary_class:{name:_,skills:[]},secondary_class:{name:"Nenhuma",skills:[]},reaction_ability:{name:""},passive_ability:{name:""},class_bonus:{value:""}}};await Dg(Ue(Ae,"characters",Ot.currentUser.uid),{uid:Ot.currentUser.uid,email:Ot.currentUser.email,name:H,race:f.name,class:_,gender:g,createdAt:En(),character_sheet:k}),i("/jogador-vtt")}catch(k){console.error("Erro ao salvar personagem:",k),alert("Falha ao invocar personagem."),X(!1)}}},V=Y[o];return u.jsxs("div",{className:"relative w-full h-screen overflow-hidden",children:[u.jsx("style",{children:`
        @keyframes scaleIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        .rpg-modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0, 0, 0, 0.85); backdrop-filter: blur(8px); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .rpg-modal-box { position: relative; width: 500px; max-width: 90%; background: #1a120b; border: 2px solid #b45309; box-shadow: 0 0 50px rgba(234, 179, 8, 0.4); padding: 6px; border-radius: 8px; animation: scaleIn 0.3s ease-out forwards; }
        .rpg-modal-inner { background: linear-gradient(to bottom, #f3e6d5, #e7cba8); border: 1px solid #78350f; padding: 40px 20px; border-radius: 4px; text-align: center; display: flex; flex-direction: column; align-items: center; gap: 20px; }
        .rpg-modal-title { font-family: 'Cinzel', serif; font-size: 32px; color: #78350f; font-weight: bold; text-transform: uppercase; text-shadow: 0px 1px 0px rgba(255,255,255,0.6); margin-bottom: 5px; }
        .rpg-modal-subtitle { font-family: 'Cinzel', serif; font-size: 14px; color: #92400e; font-style: italic; border-top: 1px solid rgba(146, 64, 14, 0.3); padding-top: 10px; width: 100%; }
        .rpg-input { width: 100%; padding: 12px; background: #fff8ed; border: 2px solid #854d0e; font-family: 'Cinzel', serif; font-size: 18px; color: #451a03; outline: none; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); border-radius: 4px; }
        .rpg-input:focus { border-color: #d97706; background: #ffffff; }
        .rpg-btn-go { background: linear-gradient(to bottom, #fcd34d, #d97706); border: 1px solid #92400e; padding: 10px 30px; font-family: 'Cinzel', serif; font-weight: bold; font-size: 18px; color: #451a03; text-transform: uppercase; cursor: pointer; border-radius: 4px; box-shadow: 0 4px 0 #92400e; transition: transform 0.1s; }
        .rpg-btn-go:active { transform: translateY(4px); box-shadow: 0 0 0 #92400e; }
        .rpg-btn-go:disabled { filter: grayscale(1); opacity: 0.6; cursor: not-allowed; }
        .rpg-close-btn { position: absolute; top: 10px; right: 15px; background: none; border: none; font-size: 20px; color: #92400e; cursor: pointer; font-weight: bold; }
        .rpg-close-btn:hover { color: #ff0000; }
        .corner { position: absolute; width: 20px; height: 20px; border-color: #fcd34d; border-style: solid; }
        .tl { top: -2px; left: -2px; border-width: 3px 0 0 3px; }
        .tr { top: -2px; right: -2px; border-width: 3px 3px 0 0; }
        .bl { bottom: -2px; left: -2px; border-width: 0 0 3px 3px; }
        .br { bottom: -2px; right: -2px; border-width: 0 3px 3px 0; }
      `}),u.jsxs("div",{className:"ether-container",children:[u.jsx("div",{className:"ether-vortex"}),u.jsx("div",{className:"ether-particles"})]}),u.jsxs("header",{className:"absolute top-0 w-full p-6 z-50 flex justify-between items-center bg-gradient-to-b from-black/90 to-transparent",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"rpg-title text-3xl",children:"Gnese da Alma"}),u.jsx("p",{className:"rpg-subtitle-styled mt-2",children:n==="carousel"?"Determine sua Linhagem Ancestral":`${f?.name} // Customizao`})]}),n==="details"&&u.jsxs("button",{onClick:C,className:"nav-back-btn",children:[u.jsx("span",{children:""})," Seleo"]})]}),n==="carousel"&&u.jsxs("div",{className:"w-full h-full flex flex-col justify-center animate-[fadeIn_1s]",children:[u.jsx("div",{className:"text-center mb-4 z-10",children:u.jsx("h2",{className:"rpg-title text-5xl text-yellow-500 drop-shadow-lg",children:V.name})}),u.jsx("div",{ref:e,onWheel:ee,className:"carousel-viewport",children:Y.map((k,j)=>u.jsxs("div",{onClick:()=>c(j),className:`race-card-frame ${j===o?"active":""}`,children:[u.jsx("img",{src:k.image,alt:k.name}),u.jsx("div",{className:"card-label",children:k.name})]},k.id))}),u.jsx("div",{className:"text-center mt-10 z-10",children:u.jsxs("button",{onClick:O,className:"confirm-btn w-64 mx-auto",children:["Escolher ",V.name]})})]}),n==="details"&&f&&u.jsxs("div",{className:"details-grid",children:[u.jsx("div",{className:"char-portrait-container",children:u.jsx("img",{src:f.image,alt:f.name,className:"char-portrait"})}),u.jsxs("div",{className:"info-scroll-area custom-scrollbar",children:[u.jsxs("div",{className:"glass-panel mt-8 border-l-4 border-yellow-600",children:[u.jsx("h3",{className:"section-header !border-none !mb-2 text-yellow-500",children:"Descrio"}),u.jsxs("p",{className:"description-text",children:['"',f.description,'"']}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-[10px] uppercase text-blue-400 font-bold",children:"Caractersticas"}),u.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.characteristics})]}),u.jsxs("div",{children:[u.jsx("span",{className:"text-[10px] uppercase text-green-400 font-bold",children:"Bnus Racial"}),u.jsx("div",{className:"text-xs text-gray-300 font-mono mt-1",children:ae(f.racial_bonus)})]})]})]}),u.jsxs("div",{className:"glass-panel flex flex-col gap-2",children:[u.jsx("span",{className:"text-xs text-gray-400 uppercase font-bold tracking-widest",children:"Gnero"}),u.jsxs("div",{className:"flex w-full",children:[u.jsx("div",{onClick:()=>{b("female"),E(null)},className:`gender-option ${g==="female"?"active":""}`,children:"Feminino"}),u.jsx("div",{onClick:()=>{b("male"),E(null)},className:`gender-option ${g==="male"?"active":""}`,children:"Masculino"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"rpg-title text-xl mb-4 text-white",children:"Vocao"}),u.jsx("div",{className:"class-selector-grid",children:ge().map(k=>{const j=fe(k);return u.jsxs("div",{onClick:()=>E(k),className:`class-btn ${_===k?"selected":""}`,children:[u.jsx("span",{className:"class-btn-title",children:k}),u.jsx("span",{className:"class-btn-role",children:j?.role||"Bsico"})]},k)})}),_&&(()=>{const k=fe(_);return k?u.jsxs("div",{className:"class-detail-container",children:[u.jsxs("div",{className:"cd-header",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"cd-title rpg-title",children:k.name}),u.jsxs("div",{className:"cd-meta text-blue-400",children:[k.type," // ",k.role]})]}),u.jsxs("div",{className:"cd-req",children:[u.jsx("span",{className:"cd-req-label",children:"Requisitos"}),u.jsx("div",{className:"cd-req-val",children:k.requirements?.length?k.requirements.join(", "):"Nenhum"})]})]}),u.jsxs("div",{className:"cd-desc",children:['"',k.description,'"']}),u.jsxs("div",{className:"cd-bonus-box",children:[u.jsx("span",{className:"text-xs uppercase font-bold text-blue-300",children:"Bnus de Classe"}),u.jsx("span",{className:"font-mono text-sm text-white",children:ae(k.bonus_class)})]}),u.jsxs("div",{children:[u.jsx("h5",{className:"text-xs uppercase text-yellow-500 font-bold mb-3 tracking-wider border-b border-white/10 pb-1 inline-block",children:"Habilidades Iniciais"}),u.jsx("div",{className:"cd-abilities-grid",children:k.abilities?.map((j,T)=>u.jsxs("div",{className:"cd-ability-card",children:[u.jsxs("div",{className:"cd-ab-header",children:[u.jsx("span",{className:"cd-ab-name",children:j.name}),u.jsx("span",{className:"cd-ab-cost",children:j.cost})]}),u.jsx("p",{className:"cd-ab-desc",children:j.description})]},T))})]})]}):u.jsx("div",{className:"p-4 text-center",children:"Carregando..."})})()]}),u.jsx("div",{className:"mt-8 mb-10",children:u.jsx("button",{disabled:!_,onClick:()=>z(!0),className:"confirm-btn",children:_?"Finalizar Criao":"Selecione uma Vocao"})})]})]}),N&&u.jsx("div",{className:"rpg-modal-overlay",children:u.jsxs("div",{className:"rpg-modal-box",children:[u.jsx("div",{className:"corner tl"}),u.jsx("div",{className:"corner tr"}),u.jsx("div",{className:"corner bl"}),u.jsx("div",{className:"corner br"}),u.jsxs("div",{className:"rpg-modal-inner",children:[u.jsxs("div",{className:"w-full",children:[u.jsx("h3",{className:"rpg-modal-title",children:"Identidade"}),u.jsx("p",{className:"rpg-modal-subtitle",children:"Como a histria o conhecer?"})]}),u.jsxs("div",{className:"w-full flex gap-2",children:[u.jsx("input",{type:"text",value:H,onChange:k=>U(k.target.value),placeholder:"Nome do Aventureiro",className:"rpg-input",autoFocus:!0}),u.jsx("button",{onClick:I,disabled:!H.trim()||D,className:"rpg-btn-go",children:D?"...":"GO"})]}),u.jsx("button",{className:"rpg-close-btn",onClick:()=>z(!1),children:""})]})]})})]})},jO="/assets/fundo-jogador-nsWQkznx.jpg",kO="/assets/level-up-BOEM_DXL.mp3",OO=({token:i,gridSize:e,isMaster:n,onUpdate:s,onMouseDown:o,charData:c})=>{const[f,m]=w.useState(""),g=w.useRef(i.stats?.hp?.current);w.useEffect(()=>{let H;i.type==="player"&&c?H=c.character_sheet?.status?.hp?.current:i.type==="enemy"&&i.stats&&(H=i.stats.hp.current);const U=g.current;if(U!==void 0&&H!==void 0&&H!==U){H<U?m("flash-damage"):H>U&&m("flash-heal");const D=setTimeout(()=>m(""),1e3);return()=>clearTimeout(D)}g.current=H},[i.stats?.hp?.current,c?.character_sheet?.status?.hp?.current]);const b=e*(i.size||1);let _=i.img;i.type==="player"&&c&&c.character_sheet?.imgUrl&&(_=c.character_sheet.imgUrl);const E=i.imgX!==void 0?i.imgX:50,N=i.imgY!==void 0?i.imgY:50,z=i.visible!==!1;return!n&&!z?null:u.jsxs("div",{className:`vtt-token ${i.type} ${f} ${z?"":"ghost-token"}`,style:{width:b,height:b,left:i.x*e,top:i.y*e,cursor:n||i.type==="player"&&i.controlledBy==="me"?"grab":"default",zIndex:n?100:50},onMouseDown:H=>o(H,i),children:[u.jsx("div",{className:"token-inner",style:{backgroundImage:`url(${_})`,backgroundPosition:`${E}% ${N}%`}}),n&&u.jsxs("div",{className:"token-sizer",children:[u.jsx("button",{onMouseDown:H=>{H.stopPropagation(),s("resize",i,-1)},children:"-"}),u.jsx("button",{onMouseDown:H=>{H.stopPropagation(),s("resize",i,1)},children:"+"})]}),u.jsx("div",{className:"token-name",children:i.name})]})};function DO({sessaoData:i,isMaster:e,showManager:n,onCloseManager:s,currentUserUid:o,personagensData:c}){const[f,m]=w.useState(null),[g,b]=w.useState(!1),[_,E]=w.useState([]),[N,z]=w.useState([]),[H,U]=w.useState(""),[D,X]=w.useState(null),[Y,ee]=w.useState(i?.grid_cols||25),[ae,ge]=w.useState(0),[fe,O]=w.useState(null),[C,I]=w.useState({x:0,y:0}),[V,k]=w.useState("cursor"),[j,T]=w.useState(!1),[Te,Se]=w.useState(null),[G,ce]=w.useState(null),_e=w.useRef(null),Pe=w.useRef(null);w.useEffect(()=>{if(i&&(m(i.active_map||null),i.grid_cols&&i.grid_cols!==Y&&ee(i.grid_cols),i.tokens?E(i.tokens):E([]),e)){const pe=i.mapas||[],B=i.saved_maps||[],ve=pe.map((le,Ne)=>{const Ce=B.find(it=>it.url===le);return Ce||{id:`temp_${Ne}`,name:`Mapa Importado ${Ne+1}`,url:le,isTemp:!0}});z(ve)}},[i,e]);const He=()=>{if(_e.current){const pe=_e.current.offsetWidth;if(Y>0){const B=pe/Y;ge(B)}}};w.useEffect(()=>(He(),window.addEventListener("resize",He),()=>window.removeEventListener("resize",He)),[f,Y]);const P=pe=>{if(!_e.current)return{x:0,y:0};const B=_e.current.getBoundingClientRect();return{x:pe.clientX-B.left,y:pe.clientY-B.top}},Z=(pe,B)=>{if(V==="ruler")return;const ve=B.type==="player"&&B.uid===o;if(!e&&!ve)return;pe.stopPropagation(),pe.preventDefault();const le=pe.currentTarget.getBoundingClientRect();I({x:pe.clientX-le.left,y:pe.clientY-le.top}),O({...B,tempX:B.x*ae,tempY:B.y*ae})},ue=pe=>{if(j&&ce(P(pe)),fe){const B=_e.current.getBoundingClientRect();let ve=pe.clientX-B.left-C.x,le=pe.clientY-B.top-C.y;const Ne=fe.size||1,Ce=B.width-ae*Ne,it=B.height-ae*Ne;O(Xe=>({...Xe,tempX:Math.max(0,Math.min(ve,Ce)),tempY:Math.max(0,Math.min(le,it))}))}},be=async()=>{if(j&&(T(!1),Se(null),ce(null)),fe){const pe=Math.round(fe.tempX/ae),B=Math.round(fe.tempY/ae),ve=_.map(le=>le.id===fe.id?{...le,x:pe,y:B}:le);E(ve),O(null);try{await wt(Ue(Ae,"sessoes",i.id),{tokens:ve})}catch(le){console.error("Erro ao mover token",le)}}},oe=async(pe,B,ve)=>{if(!e)return;let le=[..._];const Ne=le.findIndex(Ce=>Ce.id===B.id);if(Ne!==-1&&pe==="resize"){let Ce=(le[Ne].size||1)+ve;Ce<1&&(Ce=1),Ce>4&&(Ce=4),le[Ne].size=Ce,E(le),await wt(Ue(Ae,"sessoes",i.id),{tokens:le})}},xe=pe=>{if(V==="ruler"||pe.button===2){pe.preventDefault(),T(!0);const B=P(pe);Se(B),ce(B)}},ye=async pe=>{if(!e)return;const B=Math.max(1,Math.min(100,Number(pe)));ee(B),await wt(Ue(Ae,"sessoes",i.id),{grid_cols:B})},Ye=()=>{if(!Te||!G||!ae)return"0m";const pe=Math.abs(Te.x-G.x),B=Math.abs(Te.y-G.y),le=Math.sqrt(pe*pe+B*B)/ae;return`${(le*1.5).toFixed(1)}m (${le.toFixed(1)} qd)`},Qe=async pe=>{const B={id:pe.id.toString().startsWith("temp")?Date.now().toString():pe.id,name:H||pe.name,url:pe.url},ve=Ue(Ae,"sessoes",i.id);pe.isTemp||await wt(ve,{saved_maps:Nf(pe)}),await wt(ve,{saved_maps:wm(B)}),X(null),U("")},Bt=async pe=>{await wt(Ue(Ae,"sessoes",i.id),{active_map:pe}),s&&s(),b(!1)},Ht=async()=>{window.confirm("Fechar o mapa para todos?")&&await wt(Ue(Ae,"sessoes",i.id),{active_map:null})};return!f&&!e&&!n?null:u.jsxs(u.Fragment,{children:[f&&u.jsxs("div",{className:`tabletop-wrapper ${g?"minimized":""}`,children:[u.jsxs("div",{className:"tt-header",children:[u.jsxs("span",{className:"tt-title",children:[" ",f.name]}),!g&&u.jsxs("div",{className:"tt-toolbar",children:[u.jsx("button",{className:`tool-btn ${V==="cursor"?"active":""}`,onClick:()=>k("cursor"),title:"Mover",children:""}),u.jsx("button",{className:`tool-btn ${V==="ruler"?"active":""}`,onClick:()=>k("ruler"),title:"Rgua",children:""}),e&&u.jsxs("div",{className:"grid-control-box",children:[u.jsx("span",{className:"grid-label",children:"GRID"}),u.jsxs("div",{className:"grid-input-wrapper",children:[u.jsx("button",{className:"grid-btn-mini",onClick:()=>ye(Y-1),children:"-"}),u.jsx("input",{type:"number",className:"grid-number-display",value:Y,onChange:pe=>ye(pe.target.value)}),u.jsx("button",{className:"grid-btn-mini",onClick:()=>ye(Y+1),children:"+"})]})]})]}),u.jsxs("div",{className:"tt-controls",children:[u.jsx("button",{onClick:()=>b(!g),children:g?"":""}),e&&u.jsx("button",{className:"close-x",onClick:Ht,children:""})]})]}),!g&&u.jsx("div",{className:"tt-viewport",children:u.jsxs("div",{className:"map-layer-container",ref:_e,onMouseDown:xe,onMouseMove:ue,onMouseUp:be,onMouseLeave:be,onContextMenu:pe=>pe.preventDefault(),style:{cursor:V==="ruler"?"crosshair":"default"},children:[u.jsx("img",{ref:Pe,src:f.url,alt:"Map",className:"map-img-element"}),ae>0&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"grid-layer",style:{backgroundSize:`${ae}px ${ae}px`,backgroundImage:"linear-gradient(to right, rgba(255,255,255,0.2) 1px, transparent 1px), linear-gradient(to bottom, rgba(255,255,255,0.2) 1px, transparent 1px)"}}),u.jsxs("div",{className:"tokens-layer",children:[_.map(pe=>fe&&fe.id===pe.id?null:u.jsx(OO,{token:pe,gridSize:ae,isMaster:e,onUpdate:oe,onMouseDown:Z,charData:pe.type==="player"?c.find(B=>B.uid===pe.uid):null},pe.id)),fe&&u.jsx("div",{className:`vtt-token ${fe.type} dragging`,style:{width:ae*(fe.size||1),height:ae*(fe.size||1),left:fe.tempX,top:fe.tempY,cursor:"grabbing",zIndex:1e3},children:u.jsx("div",{className:"token-inner",style:{backgroundImage:`url(${fe.img})`,backgroundPosition:`${fe.imgX||50}% ${fe.imgY||50}%`}})})]})]}),j&&Te&&G&&u.jsxs("div",{className:"ruler-overlay",children:[u.jsxs("svg",{width:"100%",height:"100%",children:[u.jsx("line",{x1:Te.x,y1:Te.y,x2:G.x,y2:G.y,stroke:"#ffcc00",strokeWidth:"3",strokeDasharray:"10,5",filter:"drop-shadow(0px 0px 2px black)"}),u.jsx("circle",{cx:Te.x,cy:Te.y,r:"4",fill:"#ffcc00",stroke:"black"}),u.jsx("circle",{cx:G.x,cy:G.y,r:"4",fill:"#ffcc00",stroke:"black"})]}),u.jsx("div",{className:"ruler-tag",style:{left:G.x+15,top:G.y+15},children:Ye()})]})]})})]}),e&&n&&u.jsx("div",{className:"manager-overlay",onClick:s,children:u.jsxs("div",{className:"manager-box",onClick:pe=>pe.stopPropagation(),children:[u.jsx("h3",{className:"manager-title",children:"SALA DE CARTOGRAFIA"}),u.jsx("div",{className:"manager-list",children:N.map((pe,B)=>u.jsxs("div",{className:"manager-item",children:[u.jsx("img",{src:pe.url,className:"thumb-preview",alt:"thumb"}),D===pe.id?u.jsx("input",{className:"manager-name-input",value:H,onChange:ve=>U(ve.target.value),placeholder:"Nome",autoFocus:!0}):u.jsx("span",{className:"map-name-span",children:pe.name}),D===pe.id?u.jsx("button",{className:"btn-action-sm btn-save-name",onClick:()=>Qe(pe),children:"SALVAR"}):u.jsx("button",{className:"btn-action-sm",onClick:()=>{X(pe.id),U(pe.name)},children:"RENOMEAR"}),u.jsx("button",{className:"btn-action-sm btn-activate",onClick:()=>Bt(pe),children:"ABRIR"})]},B))}),u.jsx("button",{className:"btn-cancelar-main",onClick:s,children:"FECHAR"})]})}),u.jsx("style",{children:`
            .tabletop-wrapper { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90vw; height: 85vh; background: #0b0b0b; border: 2px solid #ffcc00; z-index: 1000; display: flex; flex-direction: column; box-shadow: 0 0 100px rgba(0,0,0,0.9); border-radius: 8px; }
            .tabletop-wrapper.minimized { width: 400px; height: 45px; top: 96%; left: 50%; border-color: #444; border-radius: 10px 10px 0 0; }
            .tt-header { height: 45px; background: #1a1a1a; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; padding: 0 15px; }
            .tt-title { color: #ffcc00; font-weight: bold; letter-spacing: 1px; font-size: 14px; }
            .tt-toolbar { display: flex; gap: 15px; align-items: center; background: #000; padding: 4px 15px; border-radius: 20px; border: 1px solid #333; }
            .tool-btn { background: none; border: none; font-size: 18px; cursor: pointer; opacity: 0.5; }
            .tool-btn.active { opacity: 1; border-bottom: 2px solid #00f2ff; }
            .tt-controls button { background: none; border: none; color: #aaa; cursor: pointer; margin-left: 10px; }
            .tt-viewport { flex: 1; background: #050505; overflow: hidden; display: flex; align-items: center; justify-content: center; position: relative; }
            .grid-control-box { display: flex; align-items: center; gap: 8px; border-left: 1px solid #444; padding-left: 12px; margin-left: 5px; }
            .grid-label { font-size: 10px; color: #888; font-weight: bold; }
            .grid-input-wrapper { display: flex; align-items: center; background: #222; border: 1px solid #444; border-radius: 4px; }
            .grid-btn-mini { background: #333; color: #fff; border: none; width: 20px; cursor: pointer; }
            .grid-number-display { width: 30px; background: #222; border: none; color: #ffcc00; text-align: center; font-size: 12px; outline: none; }
            
            .map-layer-container { position: relative; box-shadow: 0 0 30px #000; user-select: none; }
            .map-img-element { display: block; max-width: 100%; max-height: 80vh; object-fit: contain; pointer-events: none; }
            .grid-layer, .tokens-layer, .ruler-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
            .grid-layer { pointer-events: none; z-index: 2; opacity: 0.6; }
            .tokens-layer { z-index: 5; }
            .ruler-overlay { z-index: 10; pointer-events: none; }
            .ruler-tag { position: absolute; background: rgba(0,0,0,0.9); color: #ffcc00; border: 1px solid #ffcc00; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; pointer-events: none; z-index: 20; }

            .vtt-token { position: absolute; border-radius: 50%; box-shadow: 0 0 10px #000; z-index: 10; overflow: visible; }
            .vtt-token.dragging { z-index: 100; transition: none; box-shadow: 0 10px 20px rgba(0,0,0,0.8); transform: scale(1.05); }
            .vtt-token.enemy { border: 2px solid #f44; }
            .vtt-token.player { border: 2px solid #00f2ff; }
            
            /* GHOST MODE: Para tokens ocultos vistos pelo Mestre */
            .vtt-token.ghost-token { opacity: 0.5; filter: grayscale(100%); border-style: dashed; }

            .token-inner { width: 100%; height: 100%; border-radius: 50%; background-size: cover; pointer-events: none; background-repeat: no-repeat; }
            .token-name { position: absolute; bottom: -15px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color: #fff; font-size: 10px; padding: 2px 5px; border-radius: 4px; white-space: nowrap; pointer-events: none; opacity: 0; transition: 0.2s; z-index: 15; text-shadow: 0 0 3px #000; }
            .vtt-token:hover .token-name { opacity: 1; }
            
            .token-sizer { position: absolute; top: -10px; right: -20px; display: flex; flex-direction: column; opacity: 0; transition: 0.2s; gap: 2px; }
            .vtt-token:hover .token-sizer { opacity: 1; }
            .token-sizer button { width: 15px; height: 15px; background: #000; color: #fff; border: 1px solid #555; border-radius: 50%; font-size: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
            .token-sizer button:hover { border-color: #ffcc00; color: #ffcc00; }

            .flash-damage { animation: flashRed 0.5s; }
            .flash-heal { animation: flashGreen 0.5s; }
            @keyframes flashRed { 0% { box-shadow: 0 0 0 #f00; } 50% { box-shadow: 0 0 20px #f00; border-color: #f00; } 100% { box-shadow: 0 0 0 #000; } }
            @keyframes flashGreen { 0% { box-shadow: 0 0 0 #0f0; } 50% { box-shadow: 0 0 20px #0f0; border-color: #0f0; } 100% { box-shadow: 0 0 0 #000; } }

            .manager-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index: 10000; display:flex; align-items:center; justify-content:center; }
            .manager-box { width: 700px; max-height: 85vh; background: #080808; border: 2px solid #00f2ff; padding: 25px; display:flex; flex-direction:column; border-radius: 8px; }
            .manager-title { color: #00f2ff; border-bottom: 1px solid #00f2ff; padding-bottom: 15px; margin: 0; }
            .manager-list { overflow-y: auto; flex: 1; margin-top: 20px; border: 1px solid #333; background: #000; }
            .manager-item { display: flex; align-items: center; padding: 15px; border-bottom: 1px solid #333; gap: 15px; }
            .thumb-preview { width: 80px; height: 50px; object-fit: cover; border: 1px solid #555; }
            .manager-name-input { flex: 1; background: #111; border: 1px solid #444; color: #fff; padding: 8px; }
            .map-name-span { flex: 1; color: #fff; font-size: 14px; }
            .btn-action-sm { padding: 8px 15px; font-size: 11px; cursor: pointer; border: 1px solid #555; background: transparent; color: #ccc; }
            .btn-activate { border-color: #00f2ff; color: #00f2ff; margin-left: 10px; }
            .btn-save-name { color: #0f0; border-color: #0f0; }
            .btn-cancelar-main { width: 100%; background: #000; color: #fff; border: 1px solid #fff; padding: 14px; cursor: pointer; margin-top: 20px; }
        `})]})}function MO({sessaoData:i,isMaster:e,showManager:n,onCloseManager:s}){const[o,c]=w.useState(null),[f,m]=w.useState(!1),[g,b]=w.useState([]),[_,E]=w.useState(""),[N,z]=w.useState(null);w.useEffect(()=>{if(i&&(c(i.active_scenery||null),e)){const D=i.cenarios||[];b(D)}},[i,e]),w.useEffect(()=>{o&&m(!1)},[o?.url]);const H=async()=>{if(!N)return;const X={url:N,name:_||"Ambiente",timestamp:Date.now()};try{const Y=Ue(Ae,"sessoes",i.id);await wt(Y,{active_scenery:X}),s&&s(),E(""),z(null)}catch(Y){console.error("Erro ao projetar cenrio:",Y)}},U=async()=>{if(window.confirm("Fechar o cenrio para todos?"))try{const D=Ue(Ae,"sessoes",i.id);await wt(D,{active_scenery:null})}catch(D){console.error(D)}};return!o&&!n?null:u.jsxs(u.Fragment,{children:[o&&u.jsxs("div",{className:`scenery-layer ${f?"minimized":"immersive"}`,children:[!f&&u.jsxs("div",{className:"scenery-viewport",children:[u.jsx("div",{className:"vignette-mask"}),u.jsx("img",{src:o.url,alt:"Cenrio",className:"scenery-img"}),u.jsx("div",{className:"scenery-title-overlay",children:u.jsx("h2",{children:o.name})})]}),u.jsxs("div",{className:"scenery-hud",children:[f&&u.jsxs("span",{className:"mini-label",children:[" ",o.name]}),u.jsxs("div",{className:"scenery-actions",children:[u.jsx("button",{className:"btn-scenery-toggle",onClick:()=>m(!f),title:f?"Maximizar Cenrio":"Minimizar",children:f?"":""}),e&&u.jsx("button",{className:"btn-scenery-close",onClick:U,title:"Encerrar Projeo",children:""})]})]})]}),e&&n&&u.jsx("div",{className:"scenery-manager-overlay",onClick:s,children:u.jsxs("div",{className:"scenery-manager-box",onClick:D=>D.stopPropagation(),children:[u.jsx("h3",{className:"manager-title",children:"PROJETOR DE AMBIENTES"}),u.jsxs("div",{className:"scenery-grid",children:[g.length===0&&u.jsx("p",{className:"empty-txt",children:"Nenhuma imagem de cenrio carregada na sesso."}),g.map((D,X)=>u.jsx("div",{className:`scenery-thumb ${N===D?"selected":""}`,onClick:()=>z(D),children:u.jsx("img",{src:D,alt:`Opo ${X}`})},X))]}),u.jsxs("div",{className:"scenery-input-row",children:[u.jsx("input",{type:"text",placeholder:"Nome do Local (Ex: Runas Antigas)",value:_,onChange:D=>E(D.target.value)}),u.jsx("button",{className:"btn-project",onClick:H,disabled:!N,children:"PROJETAR"})]}),u.jsx("button",{className:"btn-close-manager",onClick:s,children:"CANCELAR"})]})}),u.jsx("style",{children:`
        /* --- ESTILO IMERSIVO --- */
        .scenery-layer {
            position: fixed;
            transition: all 0.8s cubic-bezier(0.2, 2, 0.2, 1);
            overflow: hidden;
            /* Z-INDEX EXTREMAMENTE ALTO PARA COBRIR TUDO (Bazar, Fichas, etc) */
            z-index: 200000; 
        }

        .scenery-layer.immersive {
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            animation: fadeInDeep 4s ease-out;
        }

        .scenery-layer.minimized {
            top: 0; /* Cola no teto */
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 40px;
            background: rgba(0,0,0,0.9);
            border: 1px solid #ffcc00;
            border-top: none;
            border-radius: 0 0 15px 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 200001;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }

        @keyframes fadeInDeep { from { opacity: 0; filter: blur(10px); } to { opacity: 1; filter: blur(0); } }

        .scenery-viewport {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .scenery-img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Garante que cubra a tela toda sem bordas internas */
            /* Efeito Ken Burns lento e suave */
            animation: kenBurns 80s infinite alternate ease-in-out;
            opacity: 0.9; /* Levemente escuro para o texto brilhar */
        }

        @keyframes kenBurns { from { transform: scale(1.0); } to { transform: scale(1.15); } }

        /* VIGNETTE CINEMATOGRFICA (OVAL) */
        .vignette-mask {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 2;
            /* Gradiente ELPTICO: Comea transparente no centro e escurece forte nas bordas */
            background: radial-gradient(
                ellipse at center, 
                rgba(0,0,0,0) 30%, 
                rgba(0,0,0,0.3) 60%, 
                rgba(0,0,0,0.8) 85%, 
                #000 100%
            );
            /* Adiciona uma sombra interna extra para garantir bordas pretas */
            box-shadow: inset 0 0 150px #000;
        }

        .scenery-title-overlay {
            position: absolute;
            top: 80px; /* Um pouco mais para baixo para no colar no topo */
            width: 100%;
            text-align: center;
            z-index: 5;
            pointer-events: none;
        }

        .scenery-title-overlay h2 {
            font-family: 'Cinzel', serif;
            font-size: 4.5rem;
            color: #ffcc00;
            text-transform: uppercase;
            letter-spacing: 15px;
            /* Sombra profunda para destacar no fundo */
            text-shadow: 0 10px 30px #000, 0 0 50px rgba(255, 204, 0, 0.2);
            margin: 0;
            opacity: 0;
            /* ANIMAO DE SEQUNCIA: Entra -> Espera -> Sai */
            animation: cinematicTitleSequence 8s ease-in-out 0.5s forwards;
        }

        @keyframes cinematicTitleSequence { 
            0% { 
                opacity: 0; 
                transform: translateY(30px) scale(0.9); 
                letter-spacing: 30px; 
            } 
            20% { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
                letter-spacing: 15px; 
            }
            80% { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
                letter-spacing: 15px; 
            }
            100% { 
                opacity: 0; 
                transform: translateY(-20px) scale(1.05); 
                letter-spacing: 30px; /* Volta a espalhar ao sair */
            } 
        }

        /* HUD DE CONTROLE */
        .scenery-hud {
            position: absolute;
            top: 0; left: 0; width: 100%;
            padding: 20px;
            display: flex;
            justify-content: flex-end; /* Botes na direita */
            align-items: flex-start;
            z-index: 10;
            opacity: 0; /* Invisvel por padro */
            transition: opacity 0.3s;
        }
        
        /* Aparece ao passar o mouse ou se estiver minimizado */
        .scenery-layer:hover .scenery-hud, .scenery-layer.minimized .scenery-hud {
            opacity: 1;
        }
        
        .scenery-layer.minimized .scenery-hud {
            position: relative;
            padding: 0 15px;
            align-items: center;
            justify-content: space-between; /* Espalha texto e botes no modo mini */
            width: 100%;
        }

        .scenery-actions {
            display: flex;
            gap: 15px;
        }

        .btn-scenery-toggle, .btn-scenery-close {
            background: rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.3);
            color: #fff;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.3s;
            pointer-events: auto;
            backdrop-filter: blur(5px);
        }
        .btn-scenery-toggle:hover { background: #fff; color: #000; transform: scale(1.1); }
        .btn-scenery-close { border-color: rgba(255, 68, 68, 0.5); color: #f44; }
        .btn-scenery-close:hover { background: #f44; color: #fff; transform: scale(1.1); }

        .mini-label {
            color: #ffcc00;
            font-family: 'Cinzel', serif;
            font-weight: bold;
            font-size: 14px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-right: 10px;
            text-shadow: 0 0 10px rgba(255,204,0,0.5);
        }

        /* --- GERENCIADOR (MODAL) --- */
        .scenery-manager-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 200002; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .scenery-manager-box { width: 700px; background: #080808; border: 2px solid #ffcc00; padding: 30px; border-radius: 8px; box-shadow: 0 0 80px rgba(255, 204, 0, 0.15); }
        .manager-title { color: #ffcc00; font-family: 'Cinzel', serif; margin: 0 0 25px 0; text-align: center; border-bottom: 1px solid #333; padding-bottom: 15px; letter-spacing: 3px; font-size: 24px; }
        
        .scenery-grid { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 20px; 
            max-height: 50vh; overflow-y: auto; margin-bottom: 25px; padding: 10px;
            background: #000; border: 1px solid #222; border-radius: 4px;
        }
        .scenery-thumb { height: 100px; border: 2px solid #333; border-radius: 6px; overflow: hidden; cursor: pointer; opacity: 0.6; transition: 0.3s; position: relative; }
        .scenery-thumb:hover { opacity: 1; transform: scale(1.05); border-color: #777; }
        .scenery-thumb.selected { border-color: #ffcc00; opacity: 1; box-shadow: 0 0 20px rgba(255,204,0,0.3); transform: scale(1.05); }
        .scenery-thumb img { width: 100%; height: 100%; object-fit: cover; }
        
        .scenery-input-row { display: flex; gap: 15px; margin-bottom: 20px; }
        .scenery-input-row input { flex: 1; background: #111; border: 1px solid #444; color: #fff; padding: 15px; font-family: 'Cinzel', serif; outline: none; font-size: 16px; border-radius: 4px; }
        .scenery-input-row input:focus { border-color: #ffcc00; box-shadow: 0 0 10px rgba(255,204,0,0.1); }
        
        .btn-project { background: linear-gradient(45deg, #ffcc00, #d4a000); color: #000; border: none; padding: 0 35px; font-weight: bold; cursor: pointer; font-family: 'Cinzel', serif; font-size: 16px; border-radius: 4px; }
        .btn-project:hover:not(:disabled) { filter: brightness(1.2); box-shadow: 0 0 25px rgba(255,204,0,0.4); }
        .btn-project:disabled { opacity: 0.5; cursor: not-allowed; background: #444; }
        
        .btn-close-manager { width: 100%; background: transparent; border: 1px solid #555; color: #aaa; padding: 12px; cursor: pointer; transition: 0.2s; font-family: sans-serif; letter-spacing: 2px; font-size: 12px; }
        .btn-close-manager:hover { border-color: #fff; color: #fff; background: rgba(255,255,255,0.05); }
        .empty-txt { color: #666; text-align: center; grid-column: 1 / -1; padding: 30px; font-style: italic; }
      `})]})}function PO({sessaoData:i,isMaster:e,showManager:n,onCloseManager:s}){const[o,c]=w.useState(null),[f,m]=w.useState([]),[g,b]=w.useState(""),[_,E]=w.useState(null);w.useEffect(()=>{if(i&&(c(i.active_npc||null),e)){const U=i.npcs||[];m(U)}},[i,e]);const N=async U=>{if(!_&&!o)return;let D;_?D={url:_,name:g||"Desconhecido",visible:U,timestamp:Date.now()}:o&&(D={...o,visible:U});try{const X=Ue(Ae,"sessoes",i.id);await wt(X,{active_npc:D}),_&&(E(null),b(""))}catch(X){console.error("Erro ao atualizar NPC:",X)}},z=async()=>{if(window.confirm("Remover NPC da cena?"))try{const U=Ue(Ae,"sessoes",i.id);await wt(U,{active_npc:null})}catch(U){console.error(U)}},H=()=>{if(!o)return null;const U=o.visible;return u.jsx("div",{className:`npc-overlay-container ${U?"slide-in":"slide-out"}`,children:u.jsxs("div",{className:"npc-content-wrapper",children:[u.jsxs("div",{className:"npc-image-box",children:[u.jsx("img",{src:o.url,alt:"NPC",className:"npc-img"}),u.jsx("div",{className:"npc-fade-bottom"})]}),u.jsxs("div",{className:"npc-title-container",children:[u.jsx("div",{className:"npc-title-line"}),u.jsx("h3",{className:"npc-title-text",children:o.name})]})]})})};return u.jsxs(u.Fragment,{children:[H(),e&&n&&u.jsx("div",{className:"npc-manager-overlay",onClick:s,children:u.jsxs("div",{className:"npc-manager-box",onClick:U=>U.stopPropagation(),children:[u.jsxs("div",{className:"npc-manager-header",children:[u.jsx("h3",{children:"CONVOCAO DE NPCS"}),u.jsx("button",{className:"close-x",onClick:s,children:""})]}),u.jsxs("div",{className:"npc-grid-list",children:[f.length===0&&u.jsx("p",{className:"empty-msg",children:"Nenhum NPC cadastrado na sesso."}),f.map((U,D)=>u.jsx("div",{className:`npc-thumb ${_===U?"selected":""}`,onClick:()=>{E(U),b("")},children:u.jsx("img",{src:U,alt:"NPC Thumb"})},D))]}),u.jsxs("div",{className:"npc-controls-row",children:[u.jsx("input",{type:"text",placeholder:"Nome (Ex: Lorde das Sombras)",value:g,onChange:U=>b(U.target.value)}),u.jsxs("div",{className:"btn-group",children:[u.jsx("button",{className:"btn-npc-action visible",onClick:()=>N(!0),children:"ENTRAR"}),u.jsx("button",{className:"btn-npc-action hidden",onClick:()=>N(!1),children:"PREPARAR"})]})]}),o&&!_&&u.jsxs("div",{className:"current-npc-controls",children:[u.jsxs("h4",{children:["EM CENA: ",u.jsx("span",{style:{color:"#fff"},children:o.name})]}),u.jsxs("div",{className:"active-actions",children:[u.jsx("button",{className:`toggle-btn ${o.visible?"is-on":"is-off"}`,onClick:()=>N(!o.visible),children:o.visible?"OCULTAR (SAIR)":"REVELAR (ENTRAR)"}),u.jsx("button",{className:"remove-btn",onClick:z,children:"REMOVER"})]})]})]})}),u.jsx("style",{children:`
        /* --- CAMADA DO NPC --- */
        .npc-overlay-container {
            position: fixed;
            top: 50%;
            /* Z-INDEX SUPERIOR AO CENRIO */
            z-index: 210000; 
            width: 33vw; /* 1/3 da tela */
            height: 90vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            
            /* Transies cinematogrficas */
            transition: left 1.5s cubic-bezier(0.22, 1, 0.36, 1), 
                        transform 1.5s cubic-bezier(0.22, 1, 0.36, 1), 
                        opacity 1.5s ease;
        }

        /* SAINDO (Esquerda) */
        .npc-overlay-container.slide-out {
            left: -40%; 
            transform: translate(-100%, -50%);
            opacity: 0;
        }

        /* ENTRANDO (Centro) */
        .npc-overlay-container.slide-in {
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 1;
        }

        .npc-content-wrapper {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            /* Animao de respirao/flutuao */
            animation: breatheNPC 8s ease-in-out infinite;
        }

        @keyframes breatheNPC {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        /* IMAGEM DO NPC (SEM BORDAS, S PNG) */
        .npc-image-box {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
            /* Mscara suave para as bordas no ficarem duras */
            -webkit-mask-image: radial-gradient(ellipse at center, black 70%, transparent 100%);
            mask-image: radial-gradient(ellipse at center, black 70%, transparent 100%);
        }

        .npc-img {
            width: 100%;
            height: auto;
            max-height: 75vh;
            object-fit: contain;
            filter: drop-shadow(0 0 20px rgba(0,0,0,0.8));
        }

        /* FADE INFERIOR (Opcional, para misturar ps com o ttulo) */
        .npc-fade-bottom {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20%;
            background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.0) 100%);
        }

        /* --- TTULO DARK FANTASY (LINHA NO MEIO) --- */
        .npc-title-container {
            position: relative;
            width: 120%; /* Um pouco maior que a imagem */
            text-align: center;
            margin-top: -30px; /* Sobe um pouco para sobrepor a base da imagem */
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .npc-title-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #ffcc00, transparent);
            box-shadow: 0 0 10px #ffcc00;
            z-index: 1;
        }

        .npc-title-text {
            font-family: 'Cinzel', serif;
            font-size: 42px;
            color: #ffcc00;
            text-transform: uppercase;
            letter-spacing: 4px;
            margin: 0;
            padding: 0 20px;
            position: relative;
            z-index: 2;
            
            /* Sombra pesada para simular contorno e cortar a linha visualmente */
            text-shadow: 
                3px 3px 0 #000,
                -1px -1px 0 #000,  
                1px -1px 0 #000,
                -1px 1px 0 #000,
                1px 1px 0 #000,
                0 0 20px rgba(0,0,0,0.8);
        }

        /* --- GERENCIADOR (CANTO SUPERIOR DIREITO) --- */
        .npc-manager-overlay { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100vw; 
            height: 100vh; 
            background: rgba(0,0,0,0.0); /* Fundo transparente para ver o NPC */
            z-index: 200020; 
            display: flex; 
            align-items: flex-start; /* Alinha no topo */
            justify-content: flex-end; /* Alinha na direita */
            padding: 80px 30px; /* Espaamento da borda */
            pointer-events: none; /* Permite clicar atravs do overlay vazio */
        }

        .npc-manager-box { 
            width: 400px; /* Mais compacto */
            background: rgba(10, 10, 10, 0.95); 
            border: 1px solid #ffcc00; 
            padding: 20px; 
            border-radius: 4px; 
            box-shadow: 0 0 30px rgba(0,0,0,0.8);
            pointer-events: auto; /* Reativa cliques na caixa */
            backdrop-filter: blur(10px);
        }

        .npc-manager-header { display: flex; justify-content: space-between; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 15px; }
        .npc-manager-header h3 { color: #ffcc00; margin: 0; font-family: 'Cinzel', serif; font-size: 16px; }
        .close-x { background: none; border: none; color: #fff; font-size: 18px; cursor: pointer; }

        .npc-grid-list { 
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; 
            max-height: 30vh; overflow-y: auto; margin-bottom: 15px; padding: 5px; 
            background: rgba(0,0,0,0.5); border: 1px solid #333;
        }
        .npc-thumb { height: 80px; border: 1px solid #444; cursor: pointer; opacity: 0.6; transition: 0.2s; overflow: hidden; border-radius: 4px; }
        .npc-thumb:hover { opacity: 1; border-color: #fff; }
        .npc-thumb.selected { border-color: #ffcc00; opacity: 1; box-shadow: 0 0 10px rgba(255, 204, 0, 0.2); }
        .npc-thumb img { width: 100%; height: 100%; object-fit: cover; }

        .npc-controls-row { display: flex; gap: 8px; flex-direction: column; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #333; }
        .npc-controls-row input { background: #000; border: 1px solid #444; color: #fff; padding: 8px; font-family: 'Cinzel', serif; outline: none; font-size: 14px; }
        .npc-controls-row input:focus { border-color: #ffcc00; }
        
        .btn-group { display: flex; gap: 5px; }
        .btn-npc-action { flex: 1; padding: 8px; font-weight: bold; cursor: pointer; border: none; font-family: 'Cinzel', serif; transition: 0.2s; font-size: 12px; }
        .btn-npc-action.visible { background: #ffcc00; color: #000; }
        .btn-npc-action.visible:hover { background: #fff; }
        .btn-npc-action.hidden { background: #222; color: #aaa; border: 1px solid #444; }
        .btn-npc-action.hidden:hover { border-color: #fff; color: #fff; }

        .current-npc-controls { background: rgba(255, 204, 0, 0.05); padding: 10px; border: 1px solid #ffcc00; border-radius: 4px; }
        .current-npc-controls h4 { margin: 0 0 8px 0; color: #ffcc00; font-size: 12px; }
        .active-actions { display: flex; gap: 5px; }
        .toggle-btn { flex: 2; padding: 8px; font-weight: bold; cursor: pointer; border: none; transition: 0.3s; font-size: 11px; }
        .toggle-btn.is-on { background: #0f0; color: #000; box-shadow: 0 0 5px #0f0; }
        .toggle-btn.is-off { background: #f44; color: #fff; }
        .remove-btn { flex: 1; background: transparent; border: 1px solid #f44; color: #f44; cursor: pointer; font-size: 11px; font-weight: bold; }
        .remove-btn:hover { background: #f44; color: #fff; }
        .empty-msg { color: #666; text-align: center; padding: 15px; font-style: italic; font-size: 12px; }
      `})]})}const VO=[{type:"d4",sides:4,label:"D4"},{type:"d6",sides:6,label:"D6"},{type:"d8",sides:8,label:"D8"},{type:"d10",sides:10,label:"D10"},{type:"d12",sides:12,label:"D12"},{type:"d20",sides:20,label:"D20"},{type:"d100",sides:100,label:"D100"}],zO=({sessaoId:i,playerName:e,onClose:n})=>{const[s,o]=w.useState({d4:0,d6:0,d8:0,d10:0,d12:0,d20:0,d100:0}),[c,f]=w.useState(""),[m,g]=w.useState(!1),b=(E,N)=>{o(z=>({...z,[E]:Math.max(0,z[E]+N)}))},_=async()=>{if(Object.values(s).reduce((X,Y)=>X+Y,0)===0)return alert("Selecione pelo menos um dado!");g(!0),n();let N=0,z=[];Object.keys(s).forEach(X=>{const Y=s[X],ee=parseInt(X.substring(1));for(let ae=0;ae<Y;ae++){const ge=Math.floor(Math.random()*ee)+1;N+=ge,z.push({die:X,value:ge})}});let H=0;if(c){const X=c.replace(/\s/g,"");H=parseInt(X),isNaN(H)&&(H=0)}const U=N+H,D={playerName:e,rolls:z,modifier:H,total:U,timestamp:Date.now()};try{const X=Ue(Ae,"sessoes",i);await wt(X,{latest_roll:D})}catch(X){console.error("Erro ao rolar dados:",X)}};return u.jsxs("div",{className:"dice-modal-overlay",children:[u.jsxs("div",{className:"dice-selector-box",children:[u.jsxs("div",{className:"ds-header",children:[u.jsx("h3",{children:"CAIXA DE DADOS"}),u.jsx("button",{className:"ds-close-btn",onClick:n,children:""})]}),u.jsx("div",{className:"ds-grid",children:VO.map(E=>u.jsxs("div",{className:"die-control",children:[u.jsx("span",{className:"die-label",children:E.label}),u.jsxs("div",{className:"die-actions",children:[u.jsx("button",{onClick:()=>b(E.type,-1),children:"-"}),u.jsx("span",{className:`die-count ${s[E.type]>0?"active":""}`,children:s[E.type]}),u.jsx("button",{onClick:()=>b(E.type,1),children:"+"})]})]},E.type))}),u.jsxs("div",{className:"ds-footer",children:[u.jsxs("div",{className:"mod-input-group",children:[u.jsx("label",{children:"MODIFICADOR"}),u.jsx("input",{type:"text",placeholder:"+0",value:c,onChange:E=>f(E.target.value)})]}),u.jsx("button",{className:"btn-roll-final",onClick:_,disabled:m,children:m?"...":"ROLAR DADOS"})]})]}),u.jsx("style",{children:`
         .dice-modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.6); z-index: 20000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(2px); }
         /* AUMENTADO A LARGURA PARA 400px PARA CABER O BOTO */
         .dice-selector-box { background: #0d0d15; border: 2px solid #ffcc00; padding: 25px; border-radius: 8px; width: 400px; box-shadow: 0 0 30px rgba(255, 204, 0, 0.2); box-sizing: border-box; }
         .ds-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px; }
         .ds-header h3 { margin: 0; color: #ffcc00; font-family: 'Cinzel', serif; }
         .ds-close-btn { background: none; border: none; color: #fff; font-size: 20px; cursor: pointer; }
         
         .ds-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 25px; }
         .die-control { background: rgba(255,255,255,0.05); padding: 8px 12px; border-radius: 4px; display: flex; justify-content: space-between; align-items: center; }
         .die-label { color: #00f2ff; font-weight: bold; font-family: sans-serif; font-size: 14px; }
         .die-actions { display: flex; align-items: center; gap: 8px; }
         .die-actions button { background: #333; border: 1px solid #555; color: #fff; width: 24px; height: 24px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
         .die-actions button:hover { background: #ffcc00; color: #000; border-color: #ffcc00; }
         .die-count { width: 20px; text-align: center; font-weight: bold; color: #555; }
         .die-count.active { color: #fff; text-shadow: 0 0 5px #fff; }

         /* AJUSTE DO FOOTER PARA O BOTO NO SAIR */
         .ds-footer { display: flex; gap: 15px; align-items: flex-end; width: 100%; }
         .mod-input-group { width: 100px; display: flex; flex-direction: column; }
         .mod-input-group label { font-size: 10px; color: #aaa; margin-bottom: 4px; font-weight: bold; }
         .mod-input-group input { width: 100%; background: #000; border: 1px solid #444; color: #fff; padding: 10px; border-radius: 4px; text-align: center; font-weight: bold; font-size: 16px; outline: none; box-sizing: border-box; }
         .mod-input-group input:focus { border-color: #ffcc00; }
         
         .btn-roll-final { flex: 1; background: linear-gradient(45deg, #ffcc00, #d4a000); border: none; padding: 0 20px; color: #000; font-weight: bold; border-radius: 4px; cursor: pointer; font-family: 'Cinzel', serif; font-size: 16px; height: 44px; display: flex; align-items: center; justify-content: center; white-space: nowrap; }
         .btn-roll-final:hover { filter: brightness(1.2); box-shadow: 0 0 15px #ffcc00; }
         .btn-roll-final:disabled { opacity: 0.5; cursor: not-allowed; }
       `})]})},LO=({rollData:i,onClose:e})=>i?u.jsxs("div",{className:"dice-result-overlay",children:[u.jsxs("div",{className:"dice-result-content fade-in-scale",children:[u.jsxs("div",{className:"dr-title",children:[u.jsx("span",{className:"dr-player-name",children:i.playerName}),u.jsx("span",{className:"dr-action",children:"ROLOU OS DADOS"})]}),u.jsx("div",{className:"dr-dice-list",children:i.rolls.map((n,s)=>u.jsxs("div",{className:`dr-die die-${n.die}`,children:[u.jsx("span",{className:"die-icon-bg",children:""}),u.jsx("span",{className:"die-val",children:n.value}),u.jsx("span",{className:"die-type",children:n.die})]},s))}),u.jsxs("div",{className:"dr-calculation",children:[u.jsxs("span",{className:"calc-label",children:["SOMA: ",i.rolls.reduce((n,s)=>n+s.value,0)]}),u.jsxs("span",{className:"calc-mod",children:["MOD: ",i.modifier>=0?`+${i.modifier}`:i.modifier]})]}),u.jsxs("div",{className:"dr-total",children:[u.jsx("span",{className:"total-label",children:"RESULTADO"}),u.jsx("span",{className:"total-value",children:i.total})]}),u.jsx("button",{className:"dr-close-btn",onClick:e,children:"FECHAR"})]}),u.jsx("style",{children:`
         .dice-result-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 19000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
         .dice-result-content { text-align: center; color: #fff; max-width: 80%; }
         .fade-in-scale { animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
         @keyframes popIn { 0% { opacity: 0; transform: scale(0.5); } 100% { opacity: 1; transform: scale(1); } }
         
         .dr-title { margin-bottom: 30px; }
         .dr-player-name { display: block; font-size: 32px; color: #ffcc00; font-family: 'Cinzel', serif; font-weight: bold; text-shadow: 0 0 10px #ffcc00; }
         .dr-action { font-size: 14px; color: #aaa; letter-spacing: 2px; }

         .dr-dice-list { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-bottom: 30px; }
         .dr-die { position: relative; width: 80px; height: 80px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
         .die-icon-bg { font-size: 80px; position: absolute; color: rgba(255,255,255,0.1); z-index: 0; }
         .die-val { font-size: 36px; font-weight: bold; color: #fff; z-index: 1; text-shadow: 0 2px 4px #000; }
         .die-type { font-size: 12px; color: #00f2ff; z-index: 1; margin-top: -5px; text-transform: uppercase; font-weight: bold; }
         
         .die-d20 .die-val { color: #ffcc00; } /* Destaque pro D20 */

         .dr-calculation { font-family: monospace; color: #aaa; font-size: 18px; margin-bottom: 10px; display: flex; gap: 20px; justify-content: center; }
         
         .dr-total { margin-bottom: 30px; background: linear-gradient(90deg, transparent, rgba(255,204,0,0.2), transparent); padding: 10px; }
         .total-label { display: block; font-size: 14px; color: #ffcc00; letter-spacing: 3px; margin-bottom: 5px; }
         .total-value { font-size: 64px; font-weight: bold; color: #fff; line-height: 1; text-shadow: 0 0 20px #ffcc00; }

         .dr-close-btn { background: transparent; border: 2px solid #555; color: #aaa; padding: 10px 40px; cursor: pointer; border-radius: 30px; font-weight: bold; transition: 0.3s; pointer-events: auto; }
         .dr-close-btn:hover { border-color: #ffcc00; color: #ffcc00; background: rgba(255,255,255,0.1); }
       `})]}):null,UO=({targetDate:i})=>{const[e,n]=w.useState("");return w.useEffect(()=>{const s=()=>{const c=new Date().getTime(),f=new Date(i).getTime()-c;if(f<0)n("AGORA");else{const m=Math.floor(f/864e5),g=Math.floor(f%(1e3*60*60*24)/(1e3*60*60)),b=Math.floor(f%(1e3*60*60)/(1e3*60)),_=Math.floor(f%(1e3*60)/1e3);n(`${m}d ${g}h ${b}m ${_}s`)}};s();const o=setInterval(s,1e3);return()=>clearInterval(o)},[i]),u.jsx("span",{className:"countdown-text",children:e})},BO=()=>u.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M14.5 17.5L3 6V3h3l11.5 11.5"}),u.jsx("path",{d:"M13 19l6-6"}),u.jsx("path",{d:"M16 16l4 4"}),u.jsx("path",{d:"M19 21l2-2"})]});function HO(){const i=Xi(),[e,n]=w.useState(null),[s,o]=w.useState(!0),[c,f]=w.useState([]),[m,g]=w.useState([]),[b,_]=w.useState([]),[E,N]=w.useState([]),[z,H]=w.useState(!1),[U,D]=w.useState(new Date),[X,Y]=w.useState(!1),[ee,ae]=w.useState(null),[ge,fe]=w.useState(null),[O,C]=w.useState([]),[I,V]=w.useState(!1),[k,j]=w.useState(null),[T,Te]=w.useState(null),[Se,G]=w.useState(null),[ce,_e]=w.useState(!1),[Pe,He]=w.useState(!1),[P,Z]=w.useState(null),[ue,be]=w.useState({x:280,y:100}),[oe,xe]=w.useState(!1),[ye,Ye]=w.useState({x:0,y:0}),[Qe,Bt]=w.useState(!1),[Ht,pe]=w.useState(null),B=w.useRef(0),[ve,le]=w.useState(0),[Ne,Ce]=w.useState(!1),it=w.useRef(null),Xe=w.useRef(new Audio(kO)),[Rt,On]=w.useState(!1);w.useEffect(()=>{Nt&&(Nt.pause(),Nt.currentTime=0)},[]),w.useEffect(()=>{Xe.current.volume=.2;const he=setInterval(()=>D(new Date),1e3);return()=>clearInterval(he)},[]),w.useEffect(()=>{const he=[],pt=[];m.forEach(Lt=>{const st=new Date(Lt.dataInicio),Ve=new Date(Lt.expiraEm);U>=st&&U<=Ve?he.push(Lt):U<st&&pt.push(Lt)}),_(he),N(pt)},[U,m]),w.useEffect(()=>{const he=setTimeout(()=>{On(!0)},2e3);return()=>clearTimeout(he)},[]),w.useEffect(()=>{let he=()=>{},pt=()=>{};const Lt=rf(Ot,st=>{if(st){const Ve=Ue(Ae,"characters",st.uid);he=Cn(Ve,rt=>{if(rt.exists()){const Fe=rt.data(),va=Fe.character_sheet?.basic_info?.level||1;it.current!==null&&va>it.current&&(Ce(!0),Xe.current.currentTime=0,Xe.current.play().catch(console.error)),it.current=va,n(Fe),o(!1)}else o(!1)});const dt=Rn(St(Ae,"missoes"));pt=Cn(dt,rt=>f(rt.docs.map(Fe=>({id:Fe.id,...Fe.data()}))))}else o(!1),i("/login")});return()=>{Lt(),he(),pt()}},[i]),w.useEffect(()=>{if(!e)return;const he=Rn(St(Ae,"sessoes"),na("participantes","array-contains",e.name)),pt=Cn(he,Ve=>{const dt=Ve.docs.map(rt=>({id:rt.id,...rt.data()}));if(g(dt),Se){const rt=dt.find(Fe=>Fe.id===Se.id);if(rt){if(G(rt),rt.latest_roll){const va=rt.latest_roll;va.timestamp>B.current&&pe(Pa=>!Pa||Pa.timestamp!==va.timestamp?va:Pa)}const Fe=rt.connected_players?.includes(Ot.currentUser?.uid);Te(Fe?"connected":"waiting")}}}),Lt=Rn(St(Ae,"resenhas"),na("destinatarios","array-contains",e.name)),st=Cn(Lt,Ve=>{const dt=Ve.docs.map(Fe=>({id:Fe.id,...Fe.data()})).filter(Fe=>new Date(Fe.expiraEm)>new Date);C(dt);const rt=parseInt(localStorage.getItem("sanchez_last_read_count")||"0");dt.length>rt?le(dt.length-rt):le(0)});return()=>{pt(),st()}},[e,Se?.id]),w.useEffect(()=>{if(!Se||!Ot.currentUser)return;const he=Ue(Ae,"sessoes",Se.id),pt=Ot.currentUser.uid;wt(he,{connected_players:wm(pt)}).catch(console.error);const Lt=()=>{};return window.addEventListener("beforeunload",Lt),()=>{window.removeEventListener("beforeunload",Lt),wt(he,{connected_players:Nf(pt)}).catch(console.error)}},[Se?.id]);const R=()=>{Ce(!1),Xe.current.pause()},de=async he=>{if(!e)return;if(he.candidatos?.some(st=>st.uid===Ot.currentUser.uid))return alert("J candidatado!");const pt=!he.candidatos||he.candidatos.length===0,Lt={uid:Ot.currentUser.uid,nome:e.name,classe:e.class,isLeader:pt,dataCandidatura:new Date().toISOString()};try{await wt(Ue(Ae,"missoes",he.id),{candidatos:wm(Lt)}),alert(pt?"Voc  o LDER DO GRUPO!":"Candidatura realizada!")}catch(st){console.error(st),alert("Erro ao candidatar.")}},qe=he=>{G(he),H(!0),Te(new Date>=new Date(he.dataInicio)?"connected":"waiting")},zt=()=>{V(!0),localStorage.setItem("sanchez_last_read_count",O.length.toString()),le(0)},Ct=he=>{xe(!0),Ye({x:he.clientX-ue.x,y:he.clientY-ue.y})},It=he=>{oe&&be({x:he.clientX-ye.x,y:he.clientY-ye.y})},Dn=()=>{xe(!1)};return s||!Rt?u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",background:"radial-gradient(circle at center, #001a33 0%, #000000 100%)",color:"#ffcc00",fontFamily:"Cinzel, serif",zIndex:9999,position:"fixed",top:0,left:0},children:[u.jsx("img",{src:If,alt:"Carregando...",style:{width:"100px",marginBottom:"20px"}}),u.jsx("p",{style:{fontSize:"18px",letterSpacing:"2px",textTransform:"uppercase",animation:"pulseText 2s infinite ease-in-out"},children:"Sintonizando ter..."}),u.jsx("style",{children:`
          @keyframes pulseText { 
            0% { opacity: 0.3; } 
            50% { opacity: 1; } 
            100% { opacity: 0.3; } 
          }
        `})]}):e?u.jsxs("div",{className:"jogador-container",onMouseMove:It,onMouseUp:Dn,children:[u.jsx("div",{className:"background-layer",style:{backgroundImage:`url(${jO})`}}),u.jsxs("div",{className:"content-layer",children:[u.jsxs("div",{className:"char-hud clickable-hud",onClick:()=>_e(!0),title:"Abrir Ficha",children:[u.jsx("div",{className:"char-avatar",children:u.jsx("div",{className:"avatar-circle",children:u.jsx("span",{className:"hud-level",children:e.character_sheet?.basic_info?.level||1})})}),u.jsxs("div",{className:"char-info",children:[u.jsx("h2",{className:"char-name",children:e.name}),u.jsxs("span",{className:"char-meta",children:[e.race," // ",e.class]})]})]}),Se&&Se.active_map&&u.jsx(DO,{sessaoData:Se,isMaster:!1,currentUserUid:Ot.currentUser?.uid,personagensData:[e]}),u.jsx(MO,{sessaoData:Se,isMaster:!1}),u.jsx(PO,{sessaoData:Se,isMaster:!1}),Ht&&u.jsx(LO,{rollData:Ht,onClose:()=>{B.current=Ht.timestamp,pe(null)}}),Qe&&Se&&u.jsx(zO,{sessaoId:Se.id,playerName:e.name,onClose:()=>Bt(!1)}),Pe&&Se&&u.jsxs("div",{className:"combat-tracker-panel player-view fade-in",style:{top:ue.y,left:ue.x,zIndex:1e3},children:[u.jsx("div",{className:"tracker-header",onMouseDown:Ct,style:{cursor:"grab"},children:u.jsx("h3",{className:"tracker-title",children:"COMBATE"})}),u.jsxs("div",{className:"tracker-list",children:[Se.tokens?.map((he,pt)=>{if(!(he.visible!==!1))return null;let st=he.img;he.uid===Ot.currentUser.uid&&e.character_sheet?.imgUrl&&(st=e.character_sheet.imgUrl);let Ve="?",dt="?",rt="?",Fe="?";return he.uid===Ot.currentUser.uid?(Ve=e.character_sheet?.status?.hp?.current,rt=e.character_sheet?.status?.hp?.max,dt=e.character_sheet?.status?.mp?.current,Fe=e.character_sheet?.status?.mp?.max):(he.type==="enemy"||he.visibleBars)&&(Ve=he.stats?.hp?.current,rt=he.stats?.hp?.max,dt=he.stats?.mp?.current,Fe=he.stats?.mp?.max),u.jsxs("div",{className:"tracker-item readonly",children:[u.jsxs("div",{className:"t-col-img",children:[u.jsx("div",{className:"t-index",children:pt+1}),u.jsx("div",{className:"t-img",style:{backgroundImage:`url(${st})`,backgroundPosition:`${he.imgX||50}% ${he.imgY||50}%`}})]}),u.jsxs("div",{className:"t-col-info",children:[u.jsx("div",{className:"t-name",children:he.name}),u.jsxs("div",{className:"t-stats-row",children:[u.jsxs("div",{className:"t-stat hp",children:[u.jsx("label",{children:"HP"}),u.jsx("span",{children:Ve}),rt!=="?"&&u.jsxs("small",{children:["/",rt]})]}),u.jsxs("div",{className:"t-stat mp",children:[u.jsx("label",{children:"MP"}),u.jsx("span",{children:dt}),Fe!=="?"&&u.jsxs("small",{children:["/",Fe]})]})]})]}),he.type==="enemy"&&u.jsx("div",{className:"t-col-actions",children:u.jsx("button",{className:"btn-icon-sm",title:"Detalhes",onClick:()=>Z({...he.details,img:he.img}),children:""})})]},he.id)}),(!Se.tokens||Se.tokens.length===0)&&u.jsx("div",{className:"empty-tracker",children:"Mesa Vazia"})]})]}),P&&u.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>Z(null),children:u.jsxs("div",{className:"monster-detail-card",onClick:he=>he.stopPropagation(),children:[u.jsxs("div",{className:"md-header",children:[u.jsxs("div",{className:"md-title-row",children:[u.jsx("h2",{children:P.name}),u.jsxs("div",{className:"md-stars",children:[[...Array(P.stars||1)].map((he,pt)=>u.jsx("span",{children:""},pt)),P.difficultyQ&&u.jsx("span",{className:"md-boss-mark",children:"?"})]})]}),u.jsx("div",{className:"md-sub",children:"Nvel de Ameaa"})]}),u.jsxs("div",{className:"md-body",children:[u.jsx("div",{className:"md-img-col",children:u.jsx("div",{className:"md-portrait",style:{backgroundImage:`url(${P.img})`}})}),u.jsxs("div",{className:"md-info-col custom-scrollbar",children:[u.jsxs("div",{className:"md-block",children:[u.jsx("label",{children:"DESCRIO"}),u.jsx("p",{children:P.description||"Sem dados disponveis."})]}),P.drops&&u.jsxs("div",{className:"md-block",children:[u.jsx("label",{children:"DROPS CONHECIDOS"}),u.jsx("p",{children:P.drops})]})]})]}),u.jsx("button",{className:"md-close-btn",onClick:()=>Z(null),children:"FECHAR"})]})}),Ne&&u.jsx("div",{className:"levelup-global-overlay",children:u.jsxs("div",{className:"levelup-content",children:[u.jsx("h1",{className:"levelup-title",children:"LEVEL UP!"}),u.jsx("button",{className:"levelup-confirm-btn",onClick:R,children:"CONFIRMAR"})]})}),E.length>0&&b.length===0&&!z&&u.jsxs("div",{className:"upcoming-sessions-banner",children:[u.jsx("h3",{children:"A SESSO VAI COMEAR EM BREVE"}),E.map(he=>u.jsxs("div",{className:"countdown-row",children:[u.jsx("span",{className:"sessao-nome-future",children:he.missaoNome}),u.jsx(UO,{targetDate:he.dataInicio})]},he.id))]}),b.length>0&&!z&&u.jsxs("div",{className:"active-sessions-banner fade-in",children:[u.jsx("h3",{children:"SESSO EM ANDAMENTO!"}),b.map(he=>u.jsxs("div",{className:"session-entry-row",children:[u.jsx("span",{className:"sessao-nome-active",children:he.missaoNome}),u.jsx("button",{className:"btn-enter-session",onClick:()=>qe(he),children:"ENTRAR AGORA"})]},he.id))]}),T&&Se&&u.jsxs("div",{className:`vtt-status-widget ${T}`,children:[u.jsx("div",{className:"status-indicator"}),u.jsx("div",{className:"status-text",children:T==="waiting"?u.jsxs(u.Fragment,{children:[u.jsx("h4",{children:"AGUARDANDO"}),u.jsx("small",{children:"Conectado..."})]}):u.jsxs(u.Fragment,{children:[u.jsx("h4",{children:"ONLINE"}),u.jsx("small",{children:"Na Mesa"})]})})]}),u.jsx("button",{className:"floating-mission-btn",onClick:()=>Y(!0),title:"Misses",children:""}),T==="connected"&&u.jsx("button",{className:"floating-combat-btn",onClick:()=>He(!Pe),title:"Ver Combate",children:u.jsx(BO,{})}),T==="connected"&&u.jsx("button",{className:"floating-dice-btn",onClick:()=>Bt(!0),title:"Rolar Dados",children:""}),O.length>0&&u.jsxs("button",{className:"floating-sanchez-btn",onClick:zt,title:"Resenhas",children:[u.jsx("div",{className:"sanchez-icon-face",style:{backgroundImage:`url(${Vg})`}}),ve>0&&u.jsx("span",{className:"notification-badge",children:ve})]}),u.jsx(Lg,{isMestre:!1,playerData:e}),X&&u.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>Y(!1),children:u.jsxs("div",{className:"ff-modal-compact ff-card",onClick:he=>he.stopPropagation(),children:[u.jsxs("div",{className:"modal-header-compact",children:[u.jsx("h3",{className:"modal-title-ff",children:"QUADRO DE CONTRATOS"}),u.jsx("button",{className:"btn-close-x",onClick:()=>Y(!1),children:""})]}),u.jsx("div",{className:"missions-grid-compact",children:c.map(he=>u.jsxs("div",{className:`mission-card-compact rank-${he.rank}`,children:[u.jsx("div",{className:"mc-left",children:u.jsx("span",{className:"mc-rank",children:he.rank})}),u.jsxs("div",{className:"mc-center",children:[u.jsx("h4",{className:"mc-title",children:he.nome}),u.jsxs("span",{className:"mc-reward",children:[" ",he.gilRecompensa," Gil"]})]}),u.jsxs("div",{className:"mc-right",children:[u.jsx("button",{className:"btn-details-mini",onClick:()=>ae(he),children:"Ver Detalhes"}),u.jsx("button",{className:"btn-accept-mini",onClick:()=>de(he),children:"ACEITAR"})]})]},he.id))})]})}),ee&&u.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>ae(null),style:{zIndex:1e5},children:u.jsxs("div",{className:"ff-modal-details-wide ff-card",onClick:he=>he.stopPropagation(),children:[u.jsxs("div",{className:"detail-wide-header",children:[u.jsx("div",{className:"dw-rank-badge",children:ee.rank}),u.jsxs("div",{className:"dw-title-box",children:[u.jsx("h2",{children:ee.nome}),u.jsxs("span",{className:"dw-narrator",children:["Narrador: ",ee.mestreNome]})]}),u.jsxs("div",{className:"dw-vagas-box",children:[u.jsxs("span",{className:"dw-vagas-label",children:["Grupo: ",ee.candidatos?ee.candidatos.length:0," / ",ee.grupo||"?"]}),u.jsx("div",{className:"dw-vagas-bar",children:u.jsx("div",{style:{width:`${Math.min((ee.candidatos?.length||0)/(parseInt(ee.grupo)||1)*100,100)}%`}})})]})]}),u.jsxs("div",{className:"detail-wide-body",children:[u.jsxs("div",{className:"dw-col-left",children:[u.jsxs("div",{className:"dw-info-item",children:[u.jsx("label",{children:" LOCAL"}),u.jsx("span",{children:ee.local||"Desconhecido"})]}),u.jsxs("div",{className:"dw-info-item",children:[u.jsx("label",{children:" CONTRATANTE"}),u.jsx("span",{children:ee.contratante||"Annimo"})]}),u.jsxs("div",{className:"dw-reward-box",children:[u.jsx("label",{children:"RECOMPENSAS"}),u.jsxs("div",{className:"dw-gil-row",children:[u.jsx("span",{className:"gil-icon",children:""})," ",u.jsxs("span",{className:"gil-val",children:[ee.gilRecompensa," GIL"]})]}),ee.recompensa&&u.jsx("div",{className:"dw-extra-rewards",children:ee.recompensa.split(`
`).map((he,pt)=>u.jsxs("div",{className:"reward-item",children:[" ",he]},pt))})]}),u.jsxs("div",{className:"dw-candidates-box",children:[u.jsx("label",{children:"AVENTUREIROS INSCRITOS"}),u.jsx("div",{className:"dw-cand-list",children:ee.candidatos&&ee.candidatos.length>0?ee.candidatos.map((he,pt)=>u.jsxs("div",{className:"dw-cand-item",style:{color:he.isLeader?"#ffcc00":"#ccc"},children:[he.isLeader?"":""," ",he.nome]},pt)):u.jsx("span",{style:{fontSize:"11px",color:"#666"},children:"Seja o primeiro!"})})]}),ee.imagem&&u.jsx("button",{className:"btn-cartaz-full",onClick:()=>fe(ee.imagem),children:" VER CARTAZ"})]}),u.jsxs("div",{className:"dw-col-right custom-scrollbar",children:[u.jsxs("div",{className:"dw-text-block",children:[u.jsx("label",{children:" DESCRIO"}),u.jsx("p",{children:ee.descricaoMissao})]}),u.jsxs("div",{className:"dw-text-block",children:[u.jsx("label",{children:" OBJETIVOS"}),u.jsx("p",{children:ee.objetivosMissao})]}),u.jsxs("div",{className:"dw-text-block",children:[u.jsx("label",{children:" REQUISITOS"}),u.jsx("p",{children:ee.requisitos})]})]})]}),u.jsx("button",{className:"dw-close-btn",onClick:()=>ae(null),children:"FECHAR"})]})}),ge&&u.jsx("div",{className:"ff-modal-overlay-flex",style:{zIndex:100001},onClick:()=>fe(null),children:u.jsxs("div",{className:"lightbox-wrap",children:[u.jsx("button",{className:"close-lightbox",onClick:()=>fe(null),children:""}),u.jsx("img",{src:ge,alt:"Cartaz",className:"cartaz-full-view"})]})}),I&&u.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>V(!1),children:u.jsxs("div",{className:"ff-modal-content ff-card",onClick:he=>he.stopPropagation(),children:[u.jsxs("div",{className:"modal-header-row",children:[u.jsx("h3",{className:"modal-title-ff",children:"RESENHAS"}),u.jsx("button",{className:"btn-close-x",onClick:()=>V(!1),children:""})]}),u.jsx("div",{className:"resenhas-list-container",children:O.map(he=>u.jsx("div",{className:"resenha-row-player",onClick:()=>{j(he),V(!1)},children:u.jsx("h4",{children:he.titulo})},he.id))})]})}),k&&u.jsx("div",{className:"papiro-overlay-full",onClick:()=>j(null),children:u.jsxs("div",{className:"papiro-real-container",style:{backgroundImage:`url(${zg})`},onClick:he=>he.stopPropagation(),children:[u.jsx("h2",{className:"papiro-title-real",children:k.titulo}),u.jsx("div",{className:"papiro-body-real",dangerouslySetInnerHTML:{__html:k.conteudo}}),u.jsx("button",{className:"papiro-close-btn",onClick:()=>j(null),children:"FECHAR"})]})}),ce&&e&&u.jsx(Ug,{characterData:e,isMaster:!1,onClose:()=>_e(!1)})]}),u.jsx("style",{children:`
        /* CSS IGUAL AO ANTERIOR + NOVOS */
        .jogador-container { position: relative; width: 100vw; height: 100vh; overflow: hidden; background: #000; font-family: 'Cinzel', serif; color: white; }
        .background-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; z-index: 0; }
        .content-layer { position: relative; z-index: 10; width: 100%; height: 100%; }
        
        .char-hud { position: absolute; top: 20px; left: 20px; display: flex; align-items: center; gap: 15px; background: rgba(0,0,0,0.8); padding: 15px 25px; border-radius: 50px; border: 1px solid #ffcc00; z-index: 50; cursor: pointer; }
        .avatar-circle { width: 60px; height: 60px; background: #222; border-radius: 50%; border: 2px solid #fff; display: flex; align-items: center; justify-content: center; }
        .hud-level { font-size: 28px; font-weight: bold; color: #ffcc00; }
        .char-info h2 { margin: 0; font-size: 20px; color: #ffcc00; text-shadow: 0 0 10px rgba(255, 204, 0, 0.5); }
        .char-meta { font-size: 12px; color: #00f2ff; }
        
        /* BOTES FLUTUANTES EMPILHADOS */
        .floating-mission-btn { position: fixed; bottom: 30px; left: 15px; width: 50px; height: 50px; border-radius: 50%; border: 2px solid #ffcc00; background: #000; color: #fff; font-size: 24px; cursor: pointer; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-mission-btn:hover { transform: scale(1.1); box-shadow: 0 0 15px #ffcc00; }

        .floating-dice-btn { position: fixed; bottom: 90px; left: 18px; width: 45px; height: 45px; border-radius: 50%; border: 2px solid #fff; background: #111; color: #fff; font-size: 20px; cursor: pointer; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-dice-btn:hover { border-color: #ffcc00; transform: scale(1.1); box-shadow: 0 0 15px #ffcc00; }
        
        .floating-combat-btn { position: fixed; bottom: 150px; left: 18px; width: 45px; height: 45px; border-radius: 50%; border: 2px solid #f44; background: #111; color: #f44; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-combat-btn:hover { border-color: #fff; color: #fff; transform: scale(1.1); box-shadow: 0 0 15px #f44; }

        .floating-sanchez-btn { position: fixed; bottom: 210px; left: 15px; width: 50px; height: 50px; border-radius: 50%; border: 2px solid #00f2ff; background: #000; cursor: pointer; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-sanchez-btn:hover { transform: scale(1.1); box-shadow: 0 0 15px #00f2ff; }

        .sanchez-icon-face { width: 100%; height: 100%; border-radius: 50%; background-size: cover; opacity: 0.8; }
        .floating-sanchez-btn:hover .sanchez-icon-face { opacity: 1; }
        .notification-badge { position: absolute; top: -2px; right: -2px; background: #f00; color: #fff; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; border: 1px solid #fff; font-weight: bold; font-size: 10px; z-index: 1000; box-shadow: 0 0 5px #000; }
        
        /* TRACKER VISUAL PLAYER */
        .combat-tracker-panel { 
            position: absolute; 
            width: 300px; 
            max-height: 70vh; 
            background: linear-gradient(180deg, #0d0d10 0%, #000 100%);
            border: 2px solid #b8860b; 
            border-radius: 6px; 
            z-index: 55; 
            display: flex; flex-direction: column; 
            box-shadow: 0 0 25px rgba(0,0,0,0.9);
        }
        .tracker-header { background: #15100a; border-bottom: 2px solid #b8860b; padding: 10px; text-align: center; }
        .tracker-title { color: #ffcc00; margin: 0; font-family: 'Cinzel', serif; letter-spacing: 3px; font-size: 16px; text-shadow: 0 0 5px #ffcc00; }
        .tracker-list { flex: 1; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 8px; }
        
        .tracker-item { display: flex; align-items: center; background: rgba(20, 20, 25, 0.9); border: 1px solid #444; border-radius: 4px; padding: 8px 5px; gap: 8px; transition: 0.2s; }
        .tracker-item:hover { border-color: #ffcc00; }
        .t-col-img { display: flex; flex-direction: column; align-items: center; width: 45px; flex-shrink: 0; }
        .t-index { color: #666; font-size: 10px; font-weight: bold; margin-bottom: 2px; }
        .t-img { width: 40px; height: 40px; border-radius: 50%; background-size: cover; border: 1px solid #777; box-shadow: 0 0 5px #000; }
        .t-col-info { flex: 1; display: flex; flex-direction: column; gap: 4px; overflow: hidden; }
        .t-name { font-size: 13px; font-weight: bold; color: #eec; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .t-stats-row { display: flex; gap: 5px; }
        .t-stat { display: flex; align-items: center; font-size: 11px; background: #080808; padding: 2px 5px; border-radius: 3px; border: 1px solid #333; }
        .t-stat label { margin-right: 4px; font-weight: bold; font-size: 9px; }
        .t-stat.hp label { color: #f44; } .t-stat.mp label { color: #00f2ff; }
        .t-stat span { color: #fff; font-weight: bold; }
        .t-stat small { color: #555; margin-left: 2px; font-size: 9px; }
        .t-col-actions { display: flex; gap: 6px; align-items: center; margin-left: auto; }
        .btn-icon-sm { background: #222; border: 1px solid #555; color: #ccc; width: 22px; height: 22px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center; border-radius: 3px; }
        .btn-icon-sm:hover { border-color: #ffcc00; color: #fff; }
        .empty-tracker { text-align: center; padding: 30px; color: #666; font-style: italic; font-size: 12px; font-family: 'serif'; }

        /* MONSTER DETAIL MODAL DARK FANTASY */
        .monster-detail-card { 
            width: 500px; max-width: 95vw;
            background: #0d0d10 url('https://www.transparenttextures.com/patterns/dark-matter.png');
            border: 2px solid #b8860b;
            box-shadow: 0 0 50px rgba(0,0,0,0.9), inset 0 0 100px rgba(0,0,0,0.8);
            border-radius: 8px; overflow: hidden; display: flex; flex-direction: column;
        }
        .md-header { background: linear-gradient(90deg, #15100a, #000); padding: 15px 20px; border-bottom: 1px solid #b8860b; }
        .md-title-row { display: flex; justify-content: space-between; align-items: center; }
        .md-title-row h2 { margin: 0; font-family: 'Cinzel', serif; color: #ffcc00; font-size: 20px; letter-spacing: 2px; }
        .md-stars { color: #ffd700; font-size: 14px; text-shadow: 0 0 5px #ffd700; }
        .md-boss-mark { color: #f44; font-weight: bold; margin-left: 5px; font-size: 16px; }
        .md-sub { font-size: 12px; color: #888; margin-top: 5px; font-style: italic; }
        .md-body { display: flex; padding: 20px; gap: 20px; min-height: 250px; }
        .md-img-col { width: 120px; flex-shrink: 0; }
        .md-portrait { width: 120px; height: 120px; border: 2px solid #444; border-radius: 4px; background-size: cover; background-position: center; box-shadow: 0 0 15px #000; }
        .md-info-col { flex: 1; overflow-y: auto; max-height: 400px; padding-right: 5px; }
        .md-block { margin-bottom: 15px; }
        .md-block label { display: block; color: #b8860b; font-size: 10px; font-weight: bold; border-bottom: 1px solid #333; margin-bottom: 5px; }
        .md-block p { margin: 0; font-size: 13px; color: #ccc; line-height: 1.4; white-space: pre-wrap; }
        .md-close-btn { width: 100%; padding: 15px; background: #111; color: #fff; border: none; border-top: 1px solid #b8860b; font-family: 'Cinzel', serif; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .md-close-btn:hover { background: #b8860b; color: #000; }

        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        /* OUTROS ESTILOS (Sesso, VTT Widget, etc) */
        .vtt-status-widget { position: fixed; top: 20px; right: 20px; background: rgba(0,0,0,0.9); border: 2px solid; padding: 15px; border-radius: 8px; display: flex; align-items: center; gap: 15px; z-index: 90; width: 200px; }
        .vtt-status-widget.waiting { border-color: #ffcc00; }
        .vtt-status-widget.connected { border-color: #0f0; }
        .status-indicator { width: 15px; height: 15px; border-radius: 50%; background: #fff; }
        .waiting .status-indicator { background: #ffcc00; }
        .connected .status-indicator { background: #0f0; }
        .status-text h4 { margin: 0; font-size: 14px; color: #fff; }
        .status-text small { font-size: 11px; color: #ccc; }
        
        .upcoming-sessions-banner { position: absolute; top: 150px; left: 50%; transform: translateX(-50%); background: rgba(13, 13, 21, 0.95); border: 2px solid #ffcc00; padding: 30px 50px; border-radius: 8px; text-align: center; z-index: 80; min-width: 400px; }
        .upcoming-sessions-banner h3 { color: #ffcc00; margin: 0 0 15px 0; font-size: 20px; letter-spacing: 2px; }
        .countdown-row { display: flex; justify-content: space-between; align-items: center; gap: 20px; margin-top: 10px; }
        .sessao-nome-future { font-size: 16px; color: #fff; text-transform: uppercase; }
        .countdown-text { color: #00f2ff; font-family: monospace; font-size: 24px; font-weight: bold; }

        .active-sessions-banner { position: absolute; top: 150px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, rgba(20, 0, 0, 0.95), rgba(0,0,0,0.95)); border: 2px solid #f44; padding: 30px 50px; border-radius: 12px; text-align: center; z-index: 80; min-width: 450px; animation: pulseBanner 2s infinite; }
        @keyframes pulseBanner { 0% { box-shadow: 0 0 20px rgba(255,0,0,0.2); } 50% { box-shadow: 0 0 50px rgba(255,0,0,0.5); } 100% { box-shadow: 0 0 20px rgba(255,0,0,0.2); } }
        .session-entry-row { display: flex; justify-content: space-between; align-items: center; gap: 30px; }
        .sessao-nome-active { font-size: 18px; color: #fff; font-weight: bold; text-transform: uppercase; }
        .btn-enter-session { background: #f00; color: #fff; border: none; padding: 12px 30px; cursor: pointer; font-weight: bold; font-size: 16px; border-radius: 4px; }
        
        .ff-modal-overlay-flex { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 99999; display: flex; align-items: center; justify-content: center; }
        .ff-modal-content { width: 600px; background: #0d0d15; border: 2px solid #ffcc00; padding: 25px; border-radius: 8px; }
        .modal-header-row { display: flex; justify-content: space-between; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 15px; }
        .modal-title-ff { color: #ffcc00; margin: 0; }
        .btn-close-x { background: none; border: none; color: #fff; font-size: 24px; cursor: pointer; }
        
        .ff-modal-compact { width: 650px; background: #050505; border: 2px solid #ffcc00; padding: 20px; border-radius: 8px; max-height: 80vh; display: flex; flex-direction: column; }
        .modal-header-compact { display: flex; justify-content: space-between; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px; align-items: center; }
        .missions-grid-compact { overflow-y: auto; padding-right: 5px; display: grid; grid-template-columns: 1fr; gap: 10px; }
        .mission-card-compact { display: flex; background: rgba(255,255,255,0.05); border: 1px solid #333; border-radius: 4px; padding: 10px; align-items: center; transition: 0.2s; }
        .mission-card-compact:hover { border-color: #ffcc00; background: rgba(255,204,0,0.05); }
        .mc-left { width: 50px; display: flex; justify-content: center; font-size: 24px; font-weight: bold; color: #444; }
        .mc-center { flex: 1; padding: 0 15px; }
        .mc-title { margin: 0; font-size: 16px; color: #fff; text-transform: uppercase; }
        .mc-reward { font-size: 12px; color: #ffcc00; }
        .mc-right { display: flex; gap: 10px; }
        .btn-details-mini { background: transparent; border: 1px solid #00f2ff; color: #00f2ff; padding: 5px 10px; font-size: 10px; cursor: pointer; text-transform: uppercase; }
        .btn-accept-mini { background: #00f2ff; color: #000; border: none; padding: 5px 15px; font-size: 10px; font-weight: bold; cursor: pointer; }

        .ff-modal-details-wide { width: 800px; height: 500px; background: #000814; border: 2px solid #ffcc00; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 0 50px #000; border-radius: 6px; }
        .detail-wide-header { height: 70px; background: linear-gradient(90deg, #111, #000); border-bottom: 1px solid #333; display: flex; align-items: center; padding: 0 20px; gap: 20px; }
        .dw-rank-badge { font-size: 36px; font-weight: bold; color: #333; text-shadow: -1px -1px 0 #ffcc00; }
        .dw-title-box h2 { margin: 0; color: #fff; font-size: 22px; text-transform: uppercase; letter-spacing: 1px; }
        .dw-narrator { font-size: 11px; color: #00f2ff; text-transform: uppercase; }
        .dw-vagas-box { flex: 1; display: flex; flex-direction: column; align-items: flex-end; justify-content: center; }
        .dw-vagas-label { font-size: 10px; color: #888; margin-bottom: 3px; }
        .dw-vagas-bar { width: 120px; height: 4px; background: #222; border-radius: 2px; overflow: hidden; }
        .dw-vagas-bar div { height: 100%; background: #0f0; transition: width 0.3s; }
        .detail-wide-body { flex: 1; display: flex; overflow: hidden; }
        .dw-col-left { width: 300px; background: rgba(255,255,255,0.02); border-right: 1px solid #333; padding: 20px; display: flex; flex-direction: column; gap: 20px; overflow-y: auto; }
        .dw-info-item label { display: block; font-size: 10px; color: #ffcc00; font-weight: bold; margin-bottom: 3px; }
        .dw-info-item span { font-size: 13px; color: #fff; }
        .dw-reward-box { background: rgba(255,204,0,0.05); padding: 15px; border: 1px solid rgba(255,204,0,0.1); border-radius: 4px; }
        .dw-reward-box label { display: block; font-size: 10px; color: #ffcc00; font-weight: bold; border-bottom: 1px solid rgba(255,204,0,0.2); padding-bottom: 5px; margin-bottom: 8px; }
        .dw-gil-row { display: flex; align-items: center; gap: 8px; font-size: 16px; color: #fff; font-weight: bold; }
        .dw-extra-rewards { margin-top: 10px; display: flex; flex-direction: column; gap: 4px; }
        .reward-pill { font-size: 11px; color: #ccc; font-style: italic; }
        .dw-candidates-box label { font-size: 10px; color: #666; font-weight: bold; display: block; margin-bottom: 8px; }
        .dw-cand-list { display: flex; flex-direction: column; gap: 5px; }
        .dw-cand-item { font-size: 12px; }
        .btn-cartaz-full { width: 100%; background: #000; border: 1px solid #00f2ff; color: #00f2ff; padding: 10px; font-size: 11px; font-weight: bold; cursor: pointer; margin-top: auto; }
        .btn-cartaz-full:hover { background: #00f2ff; color: #000; }
        .dw-col-right { flex: 1; padding: 25px; overflow-y: auto; }
        .dw-text-block { margin-bottom: 20px; }
        .dw-text-block label { color: #ffcc00; font-size: 11px; font-weight: bold; border-bottom: 1px solid #333; display: block; padding-bottom: 5px; margin-bottom: 8px; }
        .dw-text-block p { color: #ddd; font-size: 14px; line-height: 1.5; white-space: pre-wrap; margin: 0; }
        .dw-close-btn { width: 100%; background: #111; border: none; border-top: 1px solid #333; color: #fff; padding: 12px; cursor: pointer; font-weight: bold; font-size: 12px; }
        .dw-close-btn:hover { background: #222; color: #ffcc00; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #444; border-radius: 3px; }
        .lightbox-wrap { position: relative; max-width: 90vw; max-height: 90vh; display: flex; align-items: center; justify-content: center; }
        .cartaz-full-view { max-width: 100%; max-height: 90vh; border: 3px solid #ffcc00; box-shadow: 0 0 50px #000; }
        .close-lightbox { position: absolute; top: -40px; right: -40px; background: transparent; border: none; color: #fff; font-size: 40px; cursor: pointer; }
        .btn-cyan { border: 1px solid #00f2ff; color: #00f2ff; padding: 10px 15px; background: transparent; cursor: pointer; font-size: 12px; font-weight: bold; transition: 0.2s; text-transform: uppercase; }
        .btn-cyan:hover { background: rgba(0, 242, 255, 0.1); box-shadow: 0 0 10px rgba(0, 242, 255, 0.2); }

        /* PAPIRO REAL (CORRIGIDO PARA ELIMINAR BORDA E AJUSTAR TEXTO) */
        .papiro-overlay-full { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 100000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .papiro-real-container { 
            width: 850px; 
            max-width: 95vw; 
            height: 90vh; 
            background-size: 100% 100%; 
            background-repeat: no-repeat;
            position: relative; 
            /* AUMENTO DO PADDING PARA FUGIR DAS BORDAS DO DESENHO */
            padding: 140px 100px 120px 100px; 
            box-sizing: border-box; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            color: #3e2723; 
            font-family: 'Cinzel', serif; 
            text-shadow: none; 
            /* REMOVIDO box-shadow QUADRADO E TROCADO POR DROP-SHADOW NO PNG */
            box-shadow: none; 
            filter: drop-shadow(0 10px 30px rgba(0,0,0,0.8));
        }
        .papiro-title-real { font-size: 2.5rem; margin: 0 0 20px 0; border-bottom: 2px solid #5d4037; padding-bottom: 10px; width: 100%; text-align: center; color: #3e2723; }
        .papiro-body-real { font-size: 1.2rem; line-height: 1.8; text-align: justify; overflow-y: auto; width: 100%; flex: 1; padding-right: 15px; font-family: 'Lato', serif; font-weight: 600; color: #3e2723; }
        .papiro-close-btn { margin-top: 20px; background: transparent; color: #5d4037; border: 2px solid #5d4037; padding: 10px 40px; font-weight: bold; cursor: pointer; transition: 0.2s; font-family: 'Cinzel', serif; font-size: 1.1rem; }
        .papiro-close-btn:hover { background: #5d4037; color: #d7ccc8; }
        .papiro-body-real::-webkit-scrollbar { width: 8px; }
        .papiro-body-real::-webkit-scrollbar-thumb { background: #8d6e63; border-radius: 4px; }
      `})]}):u.jsx("div",{className:"loading-screen",children:"Nenhum personagem encontrado."})}const s_=({expiry:i})=>{const[e,n]=w.useState("");return w.useEffect(()=>{const s=setInterval(()=>{const o=new Date().getTime(),c=new Date(i).getTime()-o;if(c<0)n("EXPIRADA"),clearInterval(s);else{const f=Math.floor(c/864e5),m=Math.floor(c%(1e3*60*60*24)/(1e3*60*60)),g=Math.floor(c%(1e3*60*60)/(1e3*60));n(`${f}d ${m}h ${g}m`)}},1e3);return()=>clearInterval(s)},[i]),u.jsxs("span",{className:"mission-timer",children:[" ",e]})};function qO(){const i=Xi(),[e,n]=w.useState(null),[s,o]=w.useState([]),[c,f]=w.useState([]),[m,g]=w.useState([]),[b,_]=w.useState([]),[E,N]=w.useState(!0),[z,H]=w.useState(!1),[U,D]=w.useState(!1),[X,Y]=w.useState(!1),[ee,ae]=w.useState(!1),[ge,fe]=w.useState(!1),[O,C]=w.useState(null),[I,V]=w.useState(null),[k,j]=w.useState(null),[T,Te]=w.useState(null),[Se,G]=w.useState(null),[ce,_e]=w.useState(""),[Pe,He]=w.useState(""),[P,Z]=w.useState([]),[ue,be]=w.useState([]),[oe,xe]=w.useState({nome:"",local:"",contratante:"",descricaoMissao:"",objetivosMissao:"",requisitos:"",grupo:"",recompensa:"",rank:"E",imagem:"",duracao:"",gilRecompensa:""}),[ye,Ye]=w.useState({missaoId:"",dataInicio:"",mapas:[],cenarios:[],monstros:[],npcs:[],jogadores:[]}),[Qe,Bt]=w.useState(""),[Ht,pe]=w.useState("mapas"),[B,ve]=w.useState(()=>localStorage.getItem("mestreAssinatura")||"Narrador");w.useEffect(()=>{localStorage.setItem("mestreAssinatura",B)},[B]),w.useEffect(()=>{const R=setTimeout(()=>{H(!0)},2e3);return()=>clearTimeout(R)},[]),w.useEffect(()=>{Nt&&Nt.pause();const R=rf(Ot,de=>{if(de){n(de);const qe=Rn(St(Ae,"missoes"),na("mestreId","==",de.uid),Hi("createdAt","desc")),zt=Rn(St(Ae,"resenhas"),na("mestreId","==",de.uid),Hi("createdAt","desc")),Ct=Rn(St(Ae,"sessoes"),na("mestreId","==",de.uid),Hi("dataInicio","asc")),It=Rn(St(Ae,"characters")),Dn=Cn(qe,st=>o(st.docs.map(Ve=>({id:Ve.id,...Ve.data()})))),he=Cn(zt,st=>f(st.docs.map(Ve=>({id:Ve.id,...Ve.data()})))),pt=Cn(Ct,st=>g(st.docs.map(Ve=>({id:Ve.id,...Ve.data()})))),Lt=Cn(It,st=>{_(st.docs.map(Ve=>({id:Ve.id,...Ve.data()}))),N(!1)});return()=>{Dn(),he(),pt(),Lt()}}else N(!1),i("/login")});return()=>R()},[i]),w.useEffect(()=>{if(O){const R=b.find(de=>de.id===O.id);R&&C(R)}},[b]);const le=async R=>{if(R.preventDefault(),!!e)try{const de=(oe.duracao.match(/(\d+)w/)||[0,0])[1]*6048e5+(oe.duracao.match(/(\d+)d/)||[0,0])[1]*864e5+(oe.duracao.match(/(\d+)h/)||[0,0])[1]*36e5;await Ls(St(Ae,"missoes"),{...oe,mestreNome:B,mestreId:e.uid,createdAt:En(),expiraEm:new Date(Date.now()+(de||36e5)).toISOString()}),D(!1),xe({nome:"",local:"",contratante:"",descricaoMissao:"",objetivosMissao:"",requisitos:"",grupo:"",recompensa:"",rank:"E",imagem:"",duracao:"",gilRecompensa:""})}catch(de){alert("Erro ao forjar cartaz: "+de.message)}},Ne=async()=>{if(!Pe||!ce||!e)return alert("Preencha ttulo e contedo!");try{const R=new Date;R.setDate(R.getDate()+7),await Ls(St(Ae,"resenhas"),{titulo:Pe,conteudo:ce,mestre:B,mestreId:e.uid,destinatarios:P,createdAt:En(),expiraEm:R.toISOString()}),Y(!1),_e(""),He(""),Z([])}catch{alert("Erro ao publicar.")}},Ce=async(R,de)=>{if(window.confirm(`Remover ${de.nome} da misso?`)){const qe=Ue(Ae,"missoes",R);await wt(qe,{candidatos:Nf(de)})}},it=()=>{Qe&&(Ye(R=>({...R,[Ht]:[...R[Ht],Qe]})),Bt(""))},Xe=(R,de)=>{Ye(qe=>({...qe,[R]:qe[R].filter((zt,Ct)=>Ct!==de)}))},Rt=async R=>{if(R.preventDefault(),!ye.missaoId||!ye.dataInicio||!e)return alert("Selecione a misso e o horrio!");try{const de=s.find(Ct=>Ct.id===ye.missaoId),qe=new Date(ye.dataInicio),zt=new Date(qe.getTime()+1440*60*1e3);await Ls(St(Ae,"sessoes"),{missaoId:ye.missaoId,missaoNome:de?de.nome:"Misso Desconhecida",mestreId:e.uid,dataInicio:ye.dataInicio,expiraEm:zt.toISOString(),participantes:ue,mapas:ye.mapas,cenarios:ye.cenarios,monstros:ye.monstros,npcs:ye.npcs,jogadores:ye.jogadores,connected_players:[],dm_online:!1,createdAt:En()}),ae(!1),Ye({missaoId:"",dataInicio:"",mapas:[],cenarios:[],monstros:[],npcs:[],jogadores:[]}),be([]),alert("Sesso criada com sucesso!")}catch(de){alert("Erro ao criar sesso: "+de.message)}},On=R=>{i("/mestre-vtt")};return E||!z?u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",background:"radial-gradient(circle at center, #001a33 0%, #000000 100%)",color:"#ffcc00",fontFamily:"Cinzel, serif",zIndex:9999,position:"fixed",top:0,left:0},children:[u.jsx("img",{src:If,alt:"Carregando...",style:{width:"120px",marginBottom:"20px"}}),u.jsx("p",{style:{fontSize:"18px",letterSpacing:"4px",textTransform:"uppercase",animation:"pulseText 2s infinite ease-in-out"},children:"Sintonizando ter..."}),u.jsx("style",{children:`
          @keyframes pulseText { 
            0% { opacity: 0.4; transform: scale(0.98); } 
            50% { opacity: 1; transform: scale(1.02); } 
            100% { opacity: 0.4; transform: scale(0.98); } 
          }
        `})]}):u.jsxs("div",{className:"mestre-container",children:[u.jsx("div",{className:"mestre-bg-image-full",style:{backgroundImage:`url(${sA})`}}),u.jsxs("div",{className:"mestre-content",children:[u.jsxs("div",{className:"top-bar-flex",children:[u.jsx("h1",{className:"ff-title",children:"HUB DO NARRADOR"}),u.jsxs("div",{className:"mestre-identity-box ff-card fade-in",children:[u.jsx("label",{children:"ASSINATURA DO MESTRE:"}),u.jsx("input",{type:"text",value:B,onChange:R=>ve(R.target.value)})]})]}),u.jsxs("div",{className:"mestre-grid",children:[u.jsxs("div",{className:"ff-card board-column",children:[u.jsxs("div",{className:"card-header no-border",children:[u.jsx("h3",{children:"QUADRO DE MISSES"}),u.jsxs("button",{className:"ff-add-btn",onClick:()=>D(!0),children:[u.jsx("span",{children:"+"})," ADICIONAR CARTAZ"]})]}),u.jsx("div",{className:"mission-scroll",children:s.map(R=>{const de=parseInt(R.grupo)||0,qe=R.candidatos?R.candidatos.length:0,zt=de>0?qe/de*100:0,Ct=qe>=de&&de>0;return u.jsxs("div",{className:`mission-poster rank-${R.rank}`,children:[u.jsx("div",{className:"poster-rank-label-fixed",children:R.rank}),u.jsxs("span",{className:"mestre-tag",children:["Narrador: ",R.mestreNome]}),u.jsx("h4",{children:R.nome}),u.jsxs("p",{className:"gil-recompensa",children:[" Recompensa: ",R.gilRecompensa," Gil"]}),u.jsxs("div",{className:"vagas-container",children:[u.jsxs("div",{className:"vagas-labels",children:[u.jsx("span",{children:"JOGADORES:"}),u.jsxs("span",{style:{color:Ct?"#f44":"#0f0"},children:[qe," / ",de]})]}),u.jsx("div",{className:"vagas-track",children:u.jsx("div",{className:"vagas-fill",style:{width:`${zt}%`,background:Ct?"#f44":"#00f2ff"}})})]}),R.candidatos&&R.candidatos.length>0&&u.jsxs("div",{className:"candidates-mini-box",children:[u.jsx("strong",{children:"Candidatos:"}),R.candidatos.map(It=>u.jsxs("div",{className:"cand-row-master",children:[u.jsxs("span",{style:{color:It.isLeader?"#ffcc00":"#ccc"},children:[It.isLeader&&""," ",It.nome," (",It.classe,")"]}),u.jsx("button",{className:"btn-kick-x",title:"Remover Jogador",onClick:()=>Ce(R.id,It),children:""})]},It.uid))]}),u.jsx(s_,{expiry:R.expiraEm}),u.jsxs("div",{className:"poster-actions",children:[u.jsx("button",{className:"btn-cyan",onClick:()=>Te(R.imagem),children:"CARTAZ"}),u.jsx("button",{className:"btn-cyan",onClick:()=>V(R),children:"DETALHES"}),u.jsx("button",{className:"btn-red",onClick:()=>fi(Ue(Ae,"missoes",R.id)),children:"EXCLUIR"})]})]},R.id)})})]}),u.jsxs("div",{className:"ff-card sanchez-card board-column",children:[u.jsxs("div",{className:"sanchez-header-top no-border",children:[u.jsx("h3",{children:"RESENHA DO SANCHES"}),u.jsx("button",{className:"ff-add-btn-gold-small",onClick:()=>Y(!0),children:"+ CRIAR NOVA RESENHA"})]}),u.jsx("div",{className:"mission-scroll",children:c.map(R=>u.jsxs("div",{className:"resenha-item-card",children:[u.jsx("h4",{children:R.titulo}),u.jsx(s_,{expiry:R.expiraEm}),u.jsxs("div",{className:"poster-actions",children:[u.jsx("button",{className:"btn-cyan",onClick:()=>j(R),children:"VISUALIZAR"}),u.jsx("button",{className:"btn-red",onClick:()=>fi(Ue(Ae,"resenhas",R.id)),children:"EXCLUIR"})]})]},R.id))})]}),u.jsxs("div",{className:"ff-card board-column",children:[u.jsxs("div",{className:"card-header no-border",children:[u.jsx("h3",{children:"SESSES DE JOGO"}),u.jsx("button",{className:"ff-add-btn small-btn",onClick:()=>ae(!0),children:"INICIAR NOVA SESSO"})]}),u.jsx("div",{className:"mission-scroll",children:m.length===0?u.jsx("div",{className:"empty-instancia",children:"NENHUMA INSTNCIA ATIVA"}):m.map(R=>u.jsxs("div",{className:"sessao-card",children:[u.jsx("div",{className:"sessao-status",children:" AO VIVO / AGENDADA"}),u.jsx("h4",{className:"sessao-title",children:R.missaoNome}),u.jsxs("div",{className:"sessao-info",children:[u.jsxs("span",{children:[" ",new Date(R.dataInicio).toLocaleString()]}),u.jsxs("span",{className:"sessao-players",children:[" ",R.participantes?.length||0," Jogadores"]})]}),u.jsxs("div",{className:"sessao-assets-count",children:[" ",(R.mapas?.length||0)+(R.cenarios?.length||0)," Imagens"]}),u.jsxs("div",{className:"poster-actions",style:{marginTop:"15px"},children:[u.jsx("button",{className:"btn-cyan",onClick:()=>G(R),children:" MEMBROS"}),u.jsx("button",{className:"btn-play-vtt",onClick:()=>On(),children:" ACESSAR VTT"}),u.jsx("button",{className:"btn-red",onClick:()=>fi(Ue(Ae,"sessoes",R.id)),children:"CANCELAR"})]})]},R.id))})]})]})]}),u.jsx("button",{className:"fichas-trigger-btn",onClick:()=>fe(!0),title:"Acessar Fichas",children:u.jsx("img",{src:oA,alt:"Fichas"})}),u.jsx(Lg,{isMestre:!0}),u.jsx(rA,{}),ge&&u.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>fe(!1),children:u.jsxs("div",{className:"ff-modal-scrollable ff-card",onClick:R=>R.stopPropagation(),children:[u.jsx("h3",{className:"modal-title-ff",children:"PERSONAGENS REGISTRADOS"}),u.jsx("div",{className:"destinatarios-grid-fixed",children:b.map(R=>u.jsxs("div",{className:"ficha-list-item",children:[u.jsxs("div",{className:"ficha-row-name",children:[u.jsx("strong",{children:R.name}),u.jsxs("small",{children:[R.race," // ",R.class]})]}),u.jsx("button",{className:"btn-cyan",onClick:()=>{C(R),fe(!1)},children:"ABRIR FICHA "})]},R.id))}),u.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"20px"},onClick:()=>fe(!1),children:"FECHAR"})]})}),O&&u.jsx(Ug,{characterData:O,isMaster:!0,onClose:()=>C(null)}),U&&u.jsx("div",{className:"ff-modal-overlay-fixed",children:u.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[u.jsx("h3",{className:"modal-title-ff",children:"NOVA MISSO"}),u.jsxs("form",{onSubmit:le,children:[u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"NOME DA MISSO"}),u.jsx("input",{placeholder:"Ttulo...",value:oe.nome,onChange:R=>xe({...oe,nome:R.target.value}),required:!0})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"LOCAL"}),u.jsx("input",{placeholder:"Onde ocorre...",value:oe.local,onChange:R=>xe({...oe,local:R.target.value})})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"CONTRATANTE"}),u.jsx("input",{placeholder:"Quem paga...",value:oe.contratante,onChange:R=>xe({...oe,contratante:R.target.value})})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"DESCRIO DA MISSO"}),u.jsx("textarea",{className:"tall-area-dark",placeholder:"Detalhes da histria e contexto...",value:oe.descricaoMissao,onChange:R=>xe({...oe,descricaoMissao:R.target.value})})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"OBJETIVOS DA MISSO"}),u.jsx("textarea",{className:"tall-area-dark",placeholder:"O que deve ser feito passo a passo...",value:oe.objetivosMissao,onChange:R=>xe({...oe,objetivosMissao:R.target.value})})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"REQUISITOS DA MISSO"}),u.jsx("textarea",{className:"tall-area-dark",placeholder:"O que  necessrio para aceitar...",value:oe.requisitos,onChange:R=>xe({...oe,requisitos:R.target.value})})]}),u.jsxs("div",{className:"row-double-ff",children:[u.jsxs("div",{className:"field-group",children:[u.jsx("label",{children:"GRUPO MXIMO"}),u.jsx("input",{placeholder:"Ex: 4",value:oe.grupo,onChange:R=>xe({...oe,grupo:R.target.value})})]}),u.jsxs("div",{className:"field-group",children:[u.jsx("label",{children:"RANK"}),u.jsx("select",{value:oe.rank,onChange:R=>xe({...oe,rank:R.target.value}),children:["E","D","C","B","A","S","SS","SC"].map(R=>u.jsxs("option",{value:R,children:["RANK ",R]},R))})]})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"RECOMPENSAS EXTRAS"}),u.jsx("textarea",{className:"tall-area-dark",placeholder:"Itens, especiarias...",value:oe.recompensa,onChange:R=>xe({...oe,recompensa:R.target.value})})]}),u.jsxs("div",{className:"row-double-ff",children:[u.jsxs("div",{className:"field-group",children:[u.jsx("label",{children:"GIL"}),u.jsx("input",{type:"text",className:"gil-input",placeholder:"Ex: 5000",value:oe.gilRecompensa,onChange:R=>xe({...oe,gilRecompensa:R.target.value.replace(/\D/g,"")})})]}),u.jsxs("div",{className:"field-group",children:[u.jsx("label",{children:"DURAO"}),u.jsx("input",{placeholder:"Ex: 1d 10h",value:oe.duracao,onChange:R=>xe({...oe,duracao:R.target.value}),required:!0})]})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"IMAGEM"}),u.jsx("input",{placeholder:"Link Imgur...",value:oe.imagem,onChange:R=>xe({...oe,imagem:R.target.value})})]}),u.jsxs("div",{className:"btn-group-ff",children:[u.jsx("button",{type:"submit",className:"btn-forjar-main",children:"FORJAR MISSO"}),u.jsx("button",{type:"button",className:"btn-cancelar-main",onClick:()=>D(!1),children:"FECHAR"})]})]})]})}),X&&u.jsx("div",{className:"ff-modal-overlay-fixed",children:u.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[u.jsx("h3",{className:"modal-title-ff",children:"ESCREVER CRNICA"}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"TTULO"}),u.jsx("input",{className:"ff-modal-input-dark",value:Pe,onChange:R=>He(R.target.value)})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"CORPO"}),u.jsx("textarea",{className:"tall-area-ff-dark",value:ce,onChange:R=>_e(R.target.value)})]}),u.jsxs("div",{className:"player-selector-box-fixed",children:[u.jsx("label",{children:"DESTINATRIOS:"}),u.jsx("div",{className:"destinatarios-grid-fixed",children:b.map(R=>u.jsxs("label",{className:"chip-label-ff",children:[u.jsx("input",{type:"checkbox",checked:P.includes(R.name),onChange:()=>P.includes(R.name)?Z(P.filter(de=>de!==R.name)):Z([...P,R.name])})," ",R.name]},R.id))})]}),u.jsxs("div",{className:"btn-group-ff",children:[u.jsx("button",{className:"btn-forjar-main",onClick:Ne,children:"PUBLICAR"}),u.jsx("button",{className:"btn-cancelar-main",onClick:()=>Y(!1),children:"FECHAR"})]})]})}),ee&&u.jsx("div",{className:"ff-modal-overlay-fixed",children:u.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[u.jsx("h3",{className:"modal-title-ff",children:"CRIAR NOVA SESSO"}),u.jsxs("form",{onSubmit:Rt,children:[u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"SELECIONAR MISSO"}),u.jsxs("select",{className:"ff-select-dark",value:ye.missaoId,onChange:R=>Ye({...ye,missaoId:R.target.value}),required:!0,children:[u.jsx("option",{value:"",children:"-- Escolha --"}),s.map(R=>u.jsxs("option",{value:R.id,children:[R.nome," (Rank ",R.rank,")"]},R.id))]})]}),u.jsxs("div",{className:"modal-input-group",children:[u.jsx("label",{children:"DATA E HORRIO"}),u.jsx("input",{type:"datetime-local",className:"ff-input-dark",value:ye.dataInicio,onChange:R=>Ye({...ye,dataInicio:R.target.value}),required:!0})]}),u.jsxs("div",{className:"player-selector-box-fixed",children:[u.jsx("label",{children:"JOGADORES:"}),u.jsx("div",{className:"destinatarios-grid-fixed",children:b.map(R=>u.jsxs("label",{className:"chip-label-ff",children:[u.jsx("input",{type:"checkbox",checked:ue.includes(R.name),onChange:()=>ue.includes(R.name)?be(ue.filter(de=>de!==R.name)):be([...ue,R.name])})," ",R.name," (",R.class,")"]},R.id))})]}),u.jsxs("div",{className:"upload-section-box",children:[u.jsx("h4",{className:"upload-section-title",children:"IMPORTAR IMAGENS"}),u.jsxs("div",{className:"link-import-row",children:[u.jsx("input",{className:"ff-input-dark",placeholder:"Link da imagem...",value:Qe,onChange:R=>Bt(R.target.value)}),u.jsxs("select",{className:"ff-select-dark small-select",value:Ht,onChange:R=>pe(R.target.value),children:[u.jsx("option",{value:"mapas",children:"Tabletop"}),u.jsx("option",{value:"cenarios",children:"Cenrio"}),u.jsx("option",{value:"npcs",children:"NPCs"})]}),u.jsx("button",{type:"button",className:"btn-cyan",onClick:it,children:"+"})]}),u.jsxs("div",{className:"assets-lists",children:[ye.mapas.map((R,de)=>u.jsxs("div",{className:"asset-item",children:[u.jsxs("span",{className:"truncate-link",children:["[TABLETOP] ",R]}),u.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>Xe("mapas",de),children:""})]},`map-${de}`)),ye.cenarios.map((R,de)=>u.jsxs("div",{className:"asset-item",children:[u.jsxs("span",{className:"truncate-link",children:["[CENRIO] ",R]}),u.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>Xe("cenarios",de),children:""})]},`cen-${de}`)),ye.npcs.map((R,de)=>u.jsxs("div",{className:"asset-item",children:[u.jsxs("span",{className:"truncate-link",children:["[NPC] ",R]}),u.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>Xe("npcs",de),children:""})]},`npc-${de}`))]})]}),u.jsxs("div",{className:"btn-group-ff",children:[u.jsx("button",{type:"submit",className:"btn-forjar-main",children:"AGENDAR"}),u.jsx("button",{type:"button",className:"btn-cancelar-main",onClick:()=>ae(!1),children:"CANCELAR"})]})]})]})}),Se&&u.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>G(null),children:u.jsxs("div",{className:"ff-modal-scrollable ff-card",onClick:R=>R.stopPropagation(),style:{height:"auto",maxHeight:"500px"},children:[u.jsx("h3",{className:"modal-title-ff",children:"MEMBROS ALOCADOS"}),u.jsx("div",{className:"destinatarios-grid-fixed",children:Se.participantes?.map((R,de)=>u.jsxs("div",{className:"chip-label-ff",style:{cursor:"default",color:"#fff",borderColor:"#00f2ff"},children:[" ",R]},de))}),u.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"20px",width:"100%"},onClick:()=>G(null),children:"FECHAR"})]})}),I&&u.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>V(null),children:u.jsxs("div",{className:"ff-modal ff-card detail-view-main",onClick:R=>R.stopPropagation(),children:[u.jsxs("div",{className:"detail-header-modern",children:[u.jsx("div",{className:`detail-rank-badge rank-${I.rank}`,children:I.rank}),u.jsxs("div",{className:"detail-title-col",children:[u.jsx("h2",{children:I.nome}),u.jsxs("span",{className:"detail-narrator",children:["Narrador: ",I.mestreNome]})]})]}),u.jsxs("div",{className:"detail-body-grid",children:[u.jsxs("div",{className:"detail-info-row",children:[u.jsxs("div",{className:"info-item",children:[u.jsx("label",{children:" LOCAL"}),u.jsx("span",{children:I.local||"Desconhecido"})]}),u.jsxs("div",{className:"info-item",children:[u.jsx("label",{children:" CONTRATANTE"}),u.jsx("span",{children:I.contratante||"Annimo"})]})]}),u.jsxs("div",{className:"detail-section",children:[u.jsx("label",{className:"section-label",children:"VAGAS"}),u.jsxs("div",{style:{background:"#111",padding:"10px",borderRadius:"4px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",color:"#aaa",marginBottom:"5px"},children:[u.jsx("span",{children:"STATUS DO GRUPO"}),u.jsxs("span",{children:[I.candidatos?I.candidatos.length:0," / ",I.grupo||"?"]})]}),u.jsx("div",{style:{width:"100%",height:"6px",background:"#333",borderRadius:"3px"},children:u.jsx("div",{style:{width:`${Math.min((I.candidatos?.length||0)/(parseInt(I.grupo)||1)*100,100)}%`,height:"100%",background:I.candidatos?.length>=parseInt(I.grupo)?"#f44":"#00f2ff"}})})]})]}),u.jsxs("div",{className:"detail-section",children:[u.jsx("label",{className:"section-label",children:" DESCRIO"}),u.jsx("p",{className:"section-text",children:I.descricaoMissao})]}),u.jsxs("div",{className:"detail-section",children:[u.jsx("label",{className:"section-label",children:" OBJETIVOS"}),u.jsx("p",{className:"section-text",children:I.objetivosMissao})]}),u.jsxs("div",{className:"detail-section",children:[u.jsx("label",{className:"section-label",children:" REQUISITOS"}),u.jsx("p",{className:"section-text",children:I.requisitos})]}),u.jsxs("div",{className:"detail-section reward-section",children:[u.jsx("label",{className:"section-label",children:" RECOMPENSAS"}),u.jsxs("div",{className:"reward-content-box",children:[u.jsxs("div",{className:"gil-display-row",children:[u.jsx("span",{className:"gil-icon",children:""})," ",u.jsxs("span",{className:"gil-value",children:[I.gilRecompensa||0," GIL"]})]}),I.recompensa&&u.jsx("div",{className:"extra-rewards-list",children:I.recompensa.split(`
`).map((R,de)=>u.jsxs("div",{className:"reward-item",children:[" ",R]},de))})]})]})]}),u.jsx("button",{className:"ff-final-close-btn",onClick:()=>V(null),children:"FECHAR RELATRIO"})]})}),T&&u.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>Te(null),children:u.jsxs("div",{className:"lightbox-wrap",children:[u.jsx("button",{className:"close-lightbox",onClick:()=>Te(null),children:""}),u.jsx("img",{src:T,alt:"Cartaz",className:"cartaz-full-view"})]})}),k&&u.jsx("div",{className:"papiro-overlay-full",onClick:()=>j(null),children:u.jsxs("div",{className:"papiro-real-container",style:{backgroundImage:`url(${zg})`},onClick:R=>R.stopPropagation(),children:[u.jsx("div",{className:"sanchez-oval-view-no-border",style:{backgroundImage:`url(${Vg})`}}),u.jsx("h2",{className:"papiro-title-real",children:k.titulo}),u.jsxs("p",{className:"papiro-mestre-sub",children:["Narrador: ",k.mestre]}),u.jsx("div",{className:"papiro-body-real",dangerouslySetInnerHTML:{__html:k.conteudo}}),u.jsx("button",{className:"papiro-close-btn",onClick:()=>j(null),children:"FECHAR"})]})}),u.jsx("style",{children:`
        /* --- ESTILOS PRINCIPAIS MESTRE --- */
        .mestre-container { width: 100vw; height: 100vh; overflow: hidden; position: relative; background: #020617; font-family: 'Cinzel', serif; color: #e2e8f0; }
        .mestre-bg-image-full { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.3; z-index: 0; animation: slowPan 60s infinite alternate; }
        @keyframes slowPan { from { transform: scale(1.0); } to { transform: scale(1.1); } }
        
        .mestre-content { position: relative; z-index: 10; height: 100%; display: flex; flex-direction: column; padding: 20px; box-sizing: border-box; }
        .top-bar-flex { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .ff-title { font-size: 2rem; color: #fbbf24; text-shadow: 0 0 10px rgba(251, 191, 36, 0.5); letter-spacing: 4px; margin: 0; }
        .mestre-identity-box { padding: 10px 20px; display: flex; align-items: center; gap: 10px; background: rgba(0,0,0,0.6); border: 1px solid #fbbf24; border-radius: 4px; }
        .mestre-identity-box label { font-size: 0.8rem; color: #fbbf24; font-weight: bold; }
        .mestre-identity-box input { background: transparent; border: none; border-bottom: 1px solid #555; color: #fff; font-family: 'Cinzel', serif; text-align: center; width: 150px; }
        
        .mestre-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; flex: 1; min-height: 0; }
        .board-column { display: flex; flex-direction: column; height: 100%; background: rgba(15, 23, 42, 0.85); border: 1px solid #334155; border-radius: 8px; overflow: hidden; backdrop-filter: blur(5px); box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        .card-header { padding: 15px; border-bottom: 1px solid #334155; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.3); }
        .card-header h3 { margin: 0; color: #e2e8f0; font-size: 1rem; letter-spacing: 2px; }
        .no-border { border-bottom: none !important; }
        
        .mission-scroll { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 15px; scrollbar-width: thin; scrollbar-color: #fbbf24 #0f172a; }
        .mission-scroll::-webkit-scrollbar { width: 6px; }
        .mission-scroll::-webkit-scrollbar-thumb { background: #fbbf24; border-radius: 3px; }
        
        /* CARD MISSO */
        .mission-poster { background: #1e293b; border: 1px solid #334155; padding: 15px; border-radius: 4px; position: relative; transition: transform 0.2s; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .mission-poster:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.3); border-color: #fbbf24; }
        .mission-poster h4 { margin: 25px 0 5px 0; color: #fbbf24; font-size: 1.1rem; text-transform: uppercase; }
        .poster-rank-label-fixed { position: absolute; top: 10px; right: 10px; font-weight: 900; font-size: 1.5rem; opacity: 0.3; color: #fff; }
        .mestre-tag { font-size: 0.7rem; color: #94a3b8; display: block; margin-bottom: 5px; }
        .gil-recompensa { font-size: 0.9rem; color: #fcd34d; font-weight: bold; margin-bottom: 10px; }
        
        .vagas-container { background: #0f172a; padding: 8px; border-radius: 4px; margin-bottom: 10px; border: 1px solid #334155; }
        .vagas-labels { display: flex; justify-content: space-between; font-size: 0.7rem; color: #cbd5e1; margin-bottom: 4px; }
        .vagas-track { height: 6px; background: #334155; border-radius: 3px; overflow: hidden; }
        .vagas-fill { height: 100%; transition: width 0.3s ease; }
        
        .candidates-mini-box { background: rgba(0,0,0,0.3); padding: 8px; border-radius: 4px; margin-bottom: 10px; font-size: 0.75rem; }
        .cand-row-master { display: flex; justify-content: space-between; align-items: center; margin-top: 4px; padding-bottom: 2px; border-bottom: 1px dashed #334155; }
        .btn-kick-x { background: transparent; border: none; color: #ef4444; cursor: pointer; font-weight: bold; font-size: 14px; }
        .btn-kick-x:hover { color: #f87171; }
        
        .mission-timer { display: block; text-align: center; font-size: 0.8rem; color: #94a3b8; margin: 10px 0; font-weight: bold; }
        
        .poster-actions { display: flex; gap: 5px; justify-content: space-between; }
        .btn-cyan { flex: 1; padding: 6px; font-size: 0.7rem; background: transparent; border: 1px solid #00f2ff; color: #00f2ff; cursor: pointer; transition: 0.2s; font-weight: bold; }
        .btn-cyan:hover { background: rgba(0, 242, 255, 0.1); }
        .btn-red { flex: 1; padding: 6px; font-size: 0.7rem; background: transparent; border: 1px solid #ef4444; color: #ef4444; cursor: pointer; transition: 0.2s; font-weight: bold; }
        .btn-red:hover { background: rgba(239, 68, 68, 0.1); }
        
        /* SANCHES */
        .sanchez-card { border-color: #00f2ff; }
        .sanchez-header-top { padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #00f2ff; background: rgba(0, 242, 255, 0.05); }
        .sanchez-header-top h3 { color: #00f2ff; text-shadow: 0 0 5px rgba(0, 242, 255, 0.5); }
        .resenha-item-card { background: #0f172a; border: 1px solid #334155; padding: 15px; border-radius: 4px; border-left: 3px solid #00f2ff; }
        .resenha-item-card h4 { margin: 0 0 10px 0; color: #e2e8f0; font-size: 1rem; }
        
        /* SESSES */
        .sessao-card { background: #1e293b; border: 1px solid #fbbf24; padding: 15px; border-radius: 4px; position: relative; }
        .sessao-status { position: absolute; top: -10px; left: 10px; background: #fbbf24; color: #000; font-size: 0.6rem; font-weight: bold; padding: 2px 6px; border-radius: 2px; }
        .sessao-title { margin: 10px 0 5px 0; color: #fff; font-size: 1.1rem; }
        .sessao-info { font-size: 0.8rem; color: #94a3b8; display: flex; flex-direction: column; gap: 2px; }
        .sessao-assets-count { font-size: 0.75rem; color: #cbd5e1; margin-top: 5px; font-style: italic; }
        .btn-play-vtt { background: #fbbf24; color: #000; border: none; padding: 8px; font-weight: bold; cursor: pointer; flex: 2; transition: 0.2s; }
        .btn-play-vtt:hover { background: #f59e0b; box-shadow: 0 0 10px rgba(251, 191, 36, 0.4); }
        .empty-instancia { text-align: center; color: #475569; padding: 20px; font-style: italic; border: 2px dashed #334155; border-radius: 8px; }

        /* MODAIS GERAIS */
        .ff-modal-overlay-fixed { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 9999; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .ff-modal-scrollable { background: #0f172a; border: 1px solid #fbbf24; width: 600px; max-width: 95vw; max-height: 90vh; overflow-y: auto; padding: 25px; border-radius: 8px; box-shadow: 0 0 30px rgba(0,0,0,0.8); }
        .modal-title-ff { color: #fbbf24; text-align: center; border-bottom: 1px solid #334155; padding-bottom: 15px; margin-bottom: 20px; letter-spacing: 2px; font-size: 1.5rem; }
        .modal-input-group { margin-bottom: 15px; }
        .modal-input-group label { display: block; color: #94a3b8; font-size: 0.8rem; margin-bottom: 5px; font-weight: bold; }
        .modal-input-group input, .modal-input-group textarea, .modal-input-group select { width: 100%; background: #1e293b; border: 1px solid #334155; color: #fff; padding: 10px; font-family: 'Lato', sans-serif; border-radius: 4px; outline: none; }
        .modal-input-group input:focus, .modal-input-group textarea:focus { border-color: #fbbf24; }
        .tall-area-dark { min-height: 100px; resize: vertical; }
        .row-double-ff { display: flex; gap: 15px; margin-bottom: 15px; }
        .field-group { flex: 1; }
        .field-group input, .field-group select { width: 100%; padding: 10px; background: #1e293b; border: 1px solid #334155; color: #fff; border-radius: 4px; }
        
        .btn-group-ff { display: flex; gap: 10px; margin-top: 20px; }
        .btn-forjar-main { flex: 1; background: #fbbf24; color: #000; border: none; padding: 12px; font-weight: bold; cursor: pointer; transition: 0.2s; font-family: 'Cinzel', serif; letter-spacing: 1px; }
        .btn-forjar-main:hover { background: #f59e0b; }
        .btn-cancelar-main { flex: 1; background: transparent; color: #94a3b8; border: 1px solid #334155; padding: 12px; font-weight: bold; cursor: pointer; transition: 0.2s; font-family: 'Cinzel', serif; }
        .btn-cancelar-main:hover { border-color: #fff; color: #fff; }

        .ff-add-btn { background: transparent; border: 1px dashed #fbbf24; color: #fbbf24; padding: 5px 15px; cursor: pointer; font-size: 0.8rem; font-weight: bold; transition: 0.2s; }
        .ff-add-btn:hover { background: rgba(251, 191, 36, 0.1); }
        .ff-add-btn-gold-small { background: transparent; border: 1px dashed #00f2ff; color: #00f2ff; padding: 5px 10px; cursor: pointer; font-size: 0.7rem; font-weight: bold; }
        .ff-add-btn-gold-small:hover { background: rgba(0, 242, 255, 0.1); }

        /* UPLOAD SECTION (SESSO) */
        .upload-section-box { border: 1px solid #334155; padding: 15px; border-radius: 4px; margin-top: 20px; background: rgba(0,0,0,0.2); }
        .upload-section-title { font-size: 0.9rem; color: #fbbf24; margin-bottom: 10px; text-transform: uppercase; border-bottom: 1px solid #334155; padding-bottom: 5px; }
        .link-import-row { display: flex; gap: 10px; margin-bottom: 10px; }
        .ff-input-dark { flex: 1; background: #1e293b; border: 1px solid #334155; color: #fff; padding: 8px; border-radius: 4px; outline: none; }
        .ff-select-dark { background: #1e293b; border: 1px solid #334155; color: #fff; padding: 8px; border-radius: 4px; outline: none; }
        .small-select { width: 120px; }
        .assets-lists { display: flex; flex-direction: column; gap: 5px; max-height: 150px; overflow-y: auto; }
        .asset-item { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); padding: 5px 10px; border-radius: 4px; font-size: 0.8rem; color: #ccc; }
        .truncate-link { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 90%; }
        .btn-remove-x { background: transparent; border: none; color: #f44; cursor: pointer; font-weight: bold; }

        /* SELEO DE JOGADORES */
        .player-selector-box-fixed { margin: 15px 0; }
        .destinatarios-grid-fixed { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; max-height: 150px; overflow-y: auto; background: #020617; padding: 10px; border: 1px solid #334155; border-radius: 4px; }
        .chip-label-ff { display: flex; align-items: center; gap: 8px; font-size: 0.8rem; color: #94a3b8; cursor: pointer; padding: 5px; border: 1px solid transparent; border-radius: 4px; transition: 0.2s; }
        .chip-label-ff:hover { background: rgba(255,255,255,0.05); }
        .chip-label-ff input { width: auto; margin: 0; }

        /* PAPIRO REAL (CORRIGIDO PARA ELIMINAR BORDA E AJUSTAR TEXTO) */
        .papiro-overlay-full { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 10000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(8px); }
        .papiro-real-container { 
            width: 850px; 
            max-width: 95vw; 
            height: 90vh; 
            background-size: 100% 100%; 
            background-repeat: no-repeat;
            position: relative; 
            /* AUMENTO DO PADDING PARA FUGIR DAS BORDAS DO DESENHO */
            padding: 140px 100px 120px 100px; 
            box-sizing: border-box; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            color: #3e2723; 
            font-family: 'Cinzel', serif; 
            text-shadow: none;
            /* REMOVIDO box-shadow QUADRADO E TROCADO POR DROP-SHADOW NO PNG */
            box-shadow: none; 
            filter: drop-shadow(0 10px 30px rgba(0,0,0,0.8));
        }
        .sanchez-oval-view-no-border { width: 80px; height: 80px; border-radius: 50%; background-size: cover; border: 4px solid #8d6e63; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .papiro-title-real { font-size: 2rem; margin: 0; border-bottom: 2px solid #5d4037; padding-bottom: 10px; width: 100%; text-align: center; }
        .papiro-mestre-sub { font-size: 0.9rem; font-style: italic; color: #5d4037; margin-bottom: 30px; }
        .papiro-body-real { font-size: 1.1rem; line-height: 1.6; text-align: justify; overflow-y: auto; width: 100%; flex: 1; padding-right: 10px; font-family: 'Lato', serif; font-weight: 500; }
        .papiro-close-btn { margin-top: 20px; background: #3e2723; color: #d7ccc8; border: 2px solid #5d4037; padding: 10px 30px; font-weight: bold; cursor: pointer; transition: 0.2s; font-family: 'Cinzel', serif; }
        .papiro-close-btn:hover { background: #5d4037; color: #fff; }

        /* DETALHES MISSO (MODERN DARK) */
        .detail-view-main { width: 800px; height: 600px; display: flex; flex-direction: column; overflow: hidden; background: #0f172a; border: 2px solid #fbbf24; border-radius: 8px; }
        .detail-header-modern { background: linear-gradient(90deg, #1e293b, #0f172a); padding: 20px; border-bottom: 1px solid #334155; display: flex; gap: 20px; align-items: center; }
        .detail-rank-badge { font-size: 3rem; font-weight: 900; color: rgba(255,255,255,0.1); text-shadow: 0 0 20px rgba(251, 191, 36, 0.5); }
        .detail-rank-badge.rank-S, .detail-rank-badge.rank-SS { color: #fbbf24; opacity: 1; }
        .detail-title-col h2 { margin: 0; font-size: 2rem; color: #f1f5f9; letter-spacing: 2px; }
        .detail-narrator { color: #00f2ff; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }
        .detail-body-grid { flex: 1; overflow-y: auto; padding: 30px; display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .detail-info-row { grid-column: 1 / -1; display: flex; gap: 40px; border-bottom: 1px solid #334155; padding-bottom: 20px; }
        .info-item label { color: #fbbf24; font-size: 0.7rem; font-weight: bold; display: block; margin-bottom: 5px; }
        .info-item span { color: #fff; font-size: 1.1rem; }
        .detail-section { margin-bottom: 10px; }
        .section-label { display: block; color: #94a3b8; font-size: 0.75rem; font-weight: bold; margin-bottom: 8px; border-left: 3px solid #fbbf24; padding-left: 8px; }
        .section-text { color: #cbd5e1; line-height: 1.6; font-size: 0.95rem; white-space: pre-wrap; }
        .reward-section { grid-column: 1 / -1; background: rgba(251, 191, 36, 0.05); padding: 15px; border: 1px solid rgba(251, 191, 36, 0.2); border-radius: 6px; }
        .reward-content-box { display: flex; justify-content: space-between; align-items: center; }
        .gil-display-row { font-size: 1.5rem; font-weight: bold; color: #fff; display: flex; align-items: center; gap: 10px; }
        .gil-value { color: #fcd34d; }
        .extra-rewards-list { text-align: right; color: #fbbf24; font-size: 0.9rem; font-style: italic; }
        .ff-final-close-btn { width: 100%; padding: 20px; background: #020617; color: #fff; border: none; border-top: 1px solid #334155; font-family: 'Cinzel', serif; font-weight: bold; cursor: pointer; transition: 0.2s; letter-spacing: 2px; }
        .ff-final-close-btn:hover { background: #fbbf24; color: #000; }

        /* LIGHTBOX */
        .lightbox-wrap { position: relative; max-width: 90vw; max-height: 90vh; }
        .cartaz-full-view { max-width: 100%; max-height: 90vh; border: 3px solid #ffcc00; box-shadow: 0 0 50px #000; }
        .close-lightbox { position: absolute; top: -40px; right: -40px; background: transparent; border: none; color: #fff; font-size: 40px; cursor: pointer; }
        
        /* BOTO FLUTUANTE DE FICHAS */
        .fichas-trigger-btn { position: fixed; bottom: 30px; right: 190px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #00f2ff; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; }
        .fichas-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 25px #00f2ff; }
        .fichas-trigger-btn img { width: 70%; height: 70%; object-fit: contain; }

        /* LISTA DE FICHAS */
        .ficha-list-item { display: flex; justify-content: space-between; align-items: center; background: #1e293b; padding: 15px; border-radius: 4px; margin-bottom: 10px; border: 1px solid #334155; }
        .ficha-row-name strong { display: block; color: #fff; font-size: 1.1rem; }
        .ficha-row-name small { color: #94a3b8; }
        .btn-cyan { padding: 8px 15px; font-size: 0.8rem; }
      `})]})}const FO=({user:i,initializing:e,children:n})=>e?null:i&&i.email==="fffvtt10@gmail.com"?n:u.jsx(x_,{to:"/admin-login"});function GO(){const[i,e]=w.useState(!0),[n,s]=w.useState(null);return w.useEffect(()=>rf(Ot,c=>{s(c),e(!1)}),[]),i?u.jsxs("div",{style:{height:"100vh",width:"100vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#000",overflow:"hidden"},children:[u.jsx("img",{src:If,alt:"Loading...",style:{width:"100px",marginBottom:"20px",filter:"drop-shadow(0 0 10px #ffcc00)"}}),u.jsx("div",{style:{width:"200px",height:"4px",background:"#333",borderRadius:"2px",overflow:"hidden"},children:u.jsx("div",{className:"progress-bar"})}),u.jsx("p",{style:{marginTop:"10px"},children:"SINTONIZANDO TER..."}),u.jsx("style",{children:`
          .progress-bar { height: 100%; background: #ffcc00; width: 0%; box-shadow: 0 0 10px #ffcc00; animation: fillProgress 2s ease-in-out forwards; }
          p { color: #ffcc00; font-family: 'serif'; font-size: 10px; letter-spacing: 3px; animation: fadeText 1s infinite alternate; }
          @keyframes fillProgress { from { width: 0%; } to { width: 100%; } }
          @keyframes fadeText { from { opacity: 0.4; } to { opacity: 1; } }
        `})]}):u.jsxs($S,{children:[u.jsx(ii,{path:"/",element:u.jsx(bO,{})}),u.jsx(ii,{path:"/login",element:u.jsx(vO,{})}),u.jsx(ii,{path:"/mestre",element:u.jsx(SO,{})}),u.jsx(ii,{path:"/mestre-vtt",element:u.jsx(qO,{})}),u.jsx(ii,{path:"/create-character",element:u.jsx(IO,{})}),u.jsx(ii,{path:"/jogador-vtt",element:u.jsx(HO,{})}),u.jsx(ii,{path:"/admin-login",element:u.jsx(xO,{})}),u.jsx(ii,{path:"/admin",element:u.jsx(FO,{user:n,initializing:i,children:u.jsx(_O,{})})}),u.jsx(ii,{path:"*",element:u.jsx(x_,{to:"/"})})]})}Yw.createRoot(document.getElementById("root")).render(u.jsx(Bw.StrictMode,{children:u.jsx(gT,{children:u.jsx(GO,{})})}));
