(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function i1(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Cp={exports:{}},lc={};var rx;function BA(){if(rx)return lc;rx=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:f,ref:o!==void 0?o:null,props:u}}return lc.Fragment=e,lc.jsx=n,lc.jsxs=n,lc}var ox;function HA(){return ox||(ox=1,Cp.exports=BA()),Cp.exports}var c=HA(),Ip={exports:{}},Je={};var lx;function qA(){if(lx)return Je;lx=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function M(z){return z===null||typeof z!="object"?null:(z=T&&z[T]||z["@@iterator"],typeof z=="function"?z:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,U={};function V(z,se,le){this.props=z,this.context=se,this.refs=U,this.updater=le||G}V.prototype.isReactComponent={},V.prototype.setState=function(z,se){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,se,"setState")},V.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function $(){}$.prototype=V.prototype;function K(z,se,le){this.props=z,this.context=se,this.refs=U,this.updater=le||G}var re=K.prototype=new $;re.constructor=K,B(re,V.prototype),re.isPureReactComponent=!0;var he=Array.isArray;function ae(){}var w={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function I(z,se,le){var Q=le.ref;return{$$typeof:i,type:z,key:se,ref:Q!==void 0?Q:null,props:le}}function k(z,se){return I(z.type,se,z.props)}function j(z){return typeof z=="object"&&z!==null&&z.$$typeof===i}function O(z){var se={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(le){return se[le]})}var N=/\/+/g;function Ve(z,se){return typeof z=="object"&&z!==null&&z.key!=null?O(""+z.key):se.toString(36)}function ye(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(ae,ae):(z.status="pending",z.then(function(se){z.status==="pending"&&(z.status="fulfilled",z.value=se)},function(se){z.status==="pending"&&(z.status="rejected",z.reason=se)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function ee(z,se,le,Q,ie){var ge=typeof z;(ge==="undefined"||ge==="boolean")&&(z=null);var Ee=!1;if(z===null)Ee=!0;else switch(ge){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(z.$$typeof){case i:case e:Ee=!0;break;case v:return Ee=z._init,ee(Ee(z._payload),se,le,Q,ie)}}if(Ee)return ie=ie(z),Ee=Q===""?"."+Ve(z,0):Q,he(ie)?(le="",Ee!=null&&(le=Ee.replace(N,"$&/")+"/"),ee(ie,se,le,"",function(it){return it})):ie!=null&&(j(ie)&&(ie=k(ie,le+(ie.key==null||z&&z.key===ie.key?"":(""+ie.key).replace(N,"$&/")+"/")+Ee)),se.push(ie)),1;Ee=0;var He=Q===""?".":Q+":";if(he(z))for(var we=0;we<z.length;we++)Q=z[we],ge=He+Ve(Q,we),Ee+=ee(Q,se,le,ge,ie);else if(we=M(z),typeof we=="function")for(z=we.call(z),we=0;!(Q=z.next()).done;)Q=Q.value,ge=He+Ve(Q,we++),Ee+=ee(Q,se,le,ge,ie);else if(ge==="object"){if(typeof z.then=="function")return ee(ye(z),se,le,Q,ie);throw se=String(z),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function me(z,se,le){if(z==null)return z;var Q=[],ie=0;return ee(z,Q,"","",function(ge){return se.call(le,ge,ie++)}),Q}function Re(z){if(z._status===-1){var se=z._result;se=se(),se.then(function(le){(z._status===0||z._status===-1)&&(z._status=1,z._result=le)},function(le){(z._status===0||z._status===-1)&&(z._status=2,z._result=le)}),z._status===-1&&(z._status=0,z._result=se)}if(z._status===1)return z._result.default;throw z._result}var De=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},Qe={map:me,forEach:function(z,se,le){me(z,function(){se.apply(this,arguments)},le)},count:function(z){var se=0;return me(z,function(){se++}),se},toArray:function(z){return me(z,function(se){return se})||[]},only:function(z){if(!j(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Je.Activity=E,Je.Children=Qe,Je.Component=V,Je.Fragment=n,Je.Profiler=o,Je.PureComponent=K,Je.StrictMode=s,Je.Suspense=b,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,Je.__COMPILER_RUNTIME={__proto__:null,c:function(z){return w.H.useMemoCache(z)}},Je.cache=function(z){return function(){return z.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(z,se,le){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Q=B({},z.props),ie=z.key;if(se!=null)for(ge in se.key!==void 0&&(ie=""+se.key),se)!C.call(se,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&se.ref===void 0||(Q[ge]=se[ge]);var ge=arguments.length-2;if(ge===1)Q.children=le;else if(1<ge){for(var Ee=Array(ge),He=0;He<ge;He++)Ee[He]=arguments[He+2];Q.children=Ee}return I(z.type,ie,Q)},Je.createContext=function(z){return z={$$typeof:f,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:u,_context:z},z},Je.createElement=function(z,se,le){var Q,ie={},ge=null;if(se!=null)for(Q in se.key!==void 0&&(ge=""+se.key),se)C.call(se,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ie[Q]=se[Q]);var Ee=arguments.length-2;if(Ee===1)ie.children=le;else if(1<Ee){for(var He=Array(Ee),we=0;we<Ee;we++)He[we]=arguments[we+2];ie.children=He}if(z&&z.defaultProps)for(Q in Ee=z.defaultProps,Ee)ie[Q]===void 0&&(ie[Q]=Ee[Q]);return I(z,ge,ie)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(z){return{$$typeof:m,render:z}},Je.isValidElement=j,Je.lazy=function(z){return{$$typeof:v,_payload:{_status:-1,_result:z},_init:Re}},Je.memo=function(z,se){return{$$typeof:g,type:z,compare:se===void 0?null:se}},Je.startTransition=function(z){var se=w.T,le={};w.T=le;try{var Q=z(),ie=w.S;ie!==null&&ie(le,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(ae,De)}catch(ge){De(ge)}finally{se!==null&&le.types!==null&&(se.types=le.types),w.T=se}},Je.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},Je.use=function(z){return w.H.use(z)},Je.useActionState=function(z,se,le){return w.H.useActionState(z,se,le)},Je.useCallback=function(z,se){return w.H.useCallback(z,se)},Je.useContext=function(z){return w.H.useContext(z)},Je.useDebugValue=function(){},Je.useDeferredValue=function(z,se){return w.H.useDeferredValue(z,se)},Je.useEffect=function(z,se){return w.H.useEffect(z,se)},Je.useEffectEvent=function(z){return w.H.useEffectEvent(z)},Je.useId=function(){return w.H.useId()},Je.useImperativeHandle=function(z,se,le){return w.H.useImperativeHandle(z,se,le)},Je.useInsertionEffect=function(z,se){return w.H.useInsertionEffect(z,se)},Je.useLayoutEffect=function(z,se){return w.H.useLayoutEffect(z,se)},Je.useMemo=function(z,se){return w.H.useMemo(z,se)},Je.useOptimistic=function(z,se){return w.H.useOptimistic(z,se)},Je.useReducer=function(z,se,le){return w.H.useReducer(z,se,le)},Je.useRef=function(z){return w.H.useRef(z)},Je.useState=function(z){return w.H.useState(z)},Je.useSyncExternalStore=function(z,se,le){return w.H.useSyncExternalStore(z,se,le)},Je.useTransition=function(){return w.H.useTransition()},Je.version="19.2.4",Je}var cx;function Nm(){return cx||(cx=1,Ip.exports=qA()),Ip.exports}var A=Nm();const FA=i1(A);var jp={exports:{}},cc={},kp={exports:{}},Op={};var ux;function GA(){return ux||(ux=1,(function(i){function e(ee,me){var Re=ee.length;ee.push(me);e:for(;0<Re;){var De=Re-1>>>1,Qe=ee[De];if(0<o(Qe,me))ee[De]=me,ee[Re]=Qe,Re=De;else break e}}function n(ee){return ee.length===0?null:ee[0]}function s(ee){if(ee.length===0)return null;var me=ee[0],Re=ee.pop();if(Re!==me){ee[0]=Re;e:for(var De=0,Qe=ee.length,z=Qe>>>1;De<z;){var se=2*(De+1)-1,le=ee[se],Q=se+1,ie=ee[Q];if(0>o(le,Re))Q<Qe&&0>o(ie,le)?(ee[De]=ie,ee[Q]=Re,De=Q):(ee[De]=le,ee[se]=Re,De=se);else if(Q<Qe&&0>o(ie,Re))ee[De]=ie,ee[Q]=Re,De=Q;else break e}}return me}function o(ee,me){var Re=ee.sortIndex-me.sortIndex;return Re!==0?Re:ee.id-me.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var b=[],g=[],v=1,E=null,T=3,M=!1,G=!1,B=!1,U=!1,V=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function re(ee){for(var me=n(g);me!==null;){if(me.callback===null)s(g);else if(me.startTime<=ee)s(g),me.sortIndex=me.expirationTime,e(b,me);else break;me=n(g)}}function he(ee){if(B=!1,re(ee),!G)if(n(b)!==null)G=!0,ae||(ae=!0,O());else{var me=n(g);me!==null&&ye(he,me.startTime-ee)}}var ae=!1,w=-1,C=5,I=-1;function k(){return U?!0:!(i.unstable_now()-I<C)}function j(){if(U=!1,ae){var ee=i.unstable_now();I=ee;var me=!0;try{e:{G=!1,B&&(B=!1,$(w),w=-1),M=!0;var Re=T;try{t:{for(re(ee),E=n(b);E!==null&&!(E.expirationTime>ee&&k());){var De=E.callback;if(typeof De=="function"){E.callback=null,T=E.priorityLevel;var Qe=De(E.expirationTime<=ee);if(ee=i.unstable_now(),typeof Qe=="function"){E.callback=Qe,re(ee),me=!0;break t}E===n(b)&&s(b),re(ee)}else s(b);E=n(b)}if(E!==null)me=!0;else{var z=n(g);z!==null&&ye(he,z.startTime-ee),me=!1}}break e}finally{E=null,T=Re,M=!1}me=void 0}}finally{me?O():ae=!1}}}var O;if(typeof K=="function")O=function(){K(j)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Ve=N.port2;N.port1.onmessage=j,O=function(){Ve.postMessage(null)}}else O=function(){V(j,0)};function ye(ee,me){w=V(function(){ee(i.unstable_now())},me)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ee){ee.callback=null},i.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ee?Math.floor(1e3/ee):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(ee){switch(T){case 1:case 2:case 3:var me=3;break;default:me=T}var Re=T;T=me;try{return ee()}finally{T=Re}},i.unstable_requestPaint=function(){U=!0},i.unstable_runWithPriority=function(ee,me){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Re=T;T=ee;try{return me()}finally{T=Re}},i.unstable_scheduleCallback=function(ee,me,Re){var De=i.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?De+Re:De):Re=De,ee){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=Re+Qe,ee={id:v++,callback:me,priorityLevel:ee,startTime:Re,expirationTime:Qe,sortIndex:-1},Re>De?(ee.sortIndex=Re,e(g,ee),n(b)===null&&ee===n(g)&&(B?($(w),w=-1):B=!0,ye(he,Re-De))):(ee.sortIndex=Qe,e(b,ee),G||M||(G=!0,ae||(ae=!0,O()))),ee},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(ee){var me=T;return function(){var Re=T;T=me;try{return ee.apply(this,arguments)}finally{T=Re}}}})(Op)),Op}var dx;function $A(){return dx||(dx=1,kp.exports=GA()),kp.exports}var Dp={exports:{}},zn={};var fx;function YA(){if(fx)return zn;fx=1;var i=Nm();function e(b){var g="https://react.dev/errors/"+b;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+b+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(b,g,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:b,containerInfo:g,implementation:v}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(b,g){if(b==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,zn.createPortal=function(b,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(b,g,null,v)},zn.flushSync=function(b){var g=f.T,v=s.p;try{if(f.T=null,s.p=2,b)return b()}finally{f.T=g,s.p=v,s.d.f()}},zn.preconnect=function(b,g){typeof b=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(b,g))},zn.prefetchDNS=function(b){typeof b=="string"&&s.d.D(b)},zn.preinit=function(b,g){if(typeof b=="string"&&g&&typeof g.as=="string"){var v=g.as,E=m(v,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,M=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?s.d.S(b,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:M}):v==="script"&&s.d.X(b,{crossOrigin:E,integrity:T,fetchPriority:M,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},zn.preinitModule=function(b,g){if(typeof b=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=m(g.as,g.crossOrigin);s.d.M(b,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(b)},zn.preload=function(b,g){if(typeof b=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,E=m(v,g.crossOrigin);s.d.L(b,v,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},zn.preloadModule=function(b,g){if(typeof b=="string")if(g){var v=m(g.as,g.crossOrigin);s.d.m(b,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(b)},zn.requestFormReset=function(b){s.d.r(b)},zn.unstable_batchedUpdates=function(b,g){return b(g)},zn.useFormState=function(b,g,v){return f.H.useFormState(b,g,v)},zn.useFormStatus=function(){return f.H.useHostTransitionStatus()},zn.version="19.2.4",zn}var hx;function QA(){if(hx)return Dp.exports;hx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Dp.exports=YA(),Dp.exports}var px;function KA(){if(px)return cc;px=1;var i=$A(),e=Nm(),n=QA();function s(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var a=t,r=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(r=a.return),t=a.return;while(t)}return a.tag===3?r:null}function f(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function m(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function b(t){if(u(t)!==t)throw Error(s(188))}function g(t){var a=t.alternate;if(!a){if(a=u(t),a===null)throw Error(s(188));return a!==t?null:t}for(var r=t,l=a;;){var h=r.return;if(h===null)break;var p=h.alternate;if(p===null){if(l=h.return,l!==null){r=l;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===r)return b(h),t;if(p===l)return b(h),a;p=p.sibling}throw Error(s(188))}if(r.return!==l.return)r=h,l=p;else{for(var x=!1,S=h.child;S;){if(S===r){x=!0,r=h,l=p;break}if(S===l){x=!0,l=h,r=p;break}S=S.sibling}if(!x){for(S=p.child;S;){if(S===r){x=!0,r=p,l=h;break}if(S===l){x=!0,l=p,r=h;break}S=S.sibling}if(!x)throw Error(s(189))}}if(r.alternate!==l)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?t:a}function v(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=v(t),a!==null)return a;t=t.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),K=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function O(t){return t===null||typeof t!="object"?null:(t=j&&t[j]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function Ve(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case V:return"Profiler";case U:return"StrictMode";case he:return"Suspense";case ae:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case G:return"Portal";case K:return t.displayName||"Context";case $:return(t._context.displayName||"Context")+".Consumer";case re:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case w:return a=t.displayName||null,a!==null?a:Ve(t.type)||"Memo";case C:a=t._payload,t=t._init;try{return Ve(t(a))}catch{}}return null}var ye=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Re={pending:!1,data:null,method:null,action:null},De=[],Qe=-1;function z(t){return{current:t}}function se(t){0>Qe||(t.current=De[Qe],De[Qe]=null,Qe--)}function le(t,a){Qe++,De[Qe]=t.current,t.current=a}var Q=z(null),ie=z(null),ge=z(null),Ee=z(null);function He(t,a){switch(le(ge,a),le(ie,t),le(Q,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Cy(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Cy(a),t=Iy(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}se(Q),le(Q,t)}function we(){se(Q),se(ie),se(ge)}function it(t){t.memoizedState!==null&&le(Ee,t);var a=Q.current,r=Iy(a,t.type);a!==r&&(le(ie,t),le(Q,r))}function st(t){ie.current===t&&(se(Q),se(ie)),Ee.current===t&&(se(Ee),ic._currentValue=Re)}var Ct,At;function Xt(t){if(Ct===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);Ct=a&&a[1]||"",At=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ct+t+At}var Ut=!1;function Jt(t,a){if(!t||Ut)return"";Ut=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ne){var Z=ne}Reflect.construct(t,[],fe)}else{try{fe.call()}catch(ne){Z=ne}t.call(fe.prototype)}}else{try{throw Error()}catch(ne){Z=ne}(fe=t())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ne){if(ne&&Z&&typeof ne.stack=="string")return[ne.stack,Z.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),x=p[0],S=p[1];if(x&&S){var D=x.split(`
`),W=S.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<W.length&&!W[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===W.length)for(l=D.length-1,h=W.length-1;1<=l&&0<=h&&D[l]!==W[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==W[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==W[h]){var oe=`
`+D[l].replace(" at new "," at ");return t.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",t.displayName)),oe}while(1<=l&&0<=h);break}}}finally{Ut=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Xt(r):""}function Y(t,a){switch(t.tag){case 26:case 27:case 5:return Xt(t.type);case 16:return Xt("Lazy");case 13:return t.child!==a&&a!==null?Xt("Suspense Fallback"):Xt("Suspense");case 19:return Xt("SuspenseList");case 0:case 15:return Jt(t.type,!1);case 11:return Jt(t.type.render,!1);case 1:return Jt(t.type,!0);case 31:return Xt("Activity");default:return""}}function Ne(t){try{var a="",r=null;do a+=Y(t,r),r=t,t=t.return;while(t);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ve=Object.prototype.hasOwnProperty,Se=i.unstable_scheduleCallback,Ze=i.unstable_cancelCallback,Le=i.unstable_shouldYield,It=i.unstable_requestPaint,nt=i.unstable_now,Zt=i.unstable_getCurrentPriorityLevel,de=i.unstable_ImmediatePriority,Ce=i.unstable_UserBlockingPriority,Me=i.unstable_NormalPriority,P=i.unstable_LowPriority,_e=i.unstable_IdlePriority,Ue=i.log,Bt=i.unstable_setDisableYieldValue,vt=null,rt=null;function cn(t){if(typeof Ue=="function"&&Bt(t),rt&&typeof rt.setStrictMode=="function")try{rt.setStrictMode(vt,t)}catch{}}var Pt=Math.clz32?Math.clz32:$a,Ga=Math.log,Hn=Math.LN2;function $a(t){return t>>>=0,t===0?32:31-(Ga(t)/Hn|0)|0}var H=256,q=262144,be=4194304;function $e(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ke(t,a,r){var l=t.pendingLanes;if(l===0)return 0;var h=0,p=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var S=l&134217727;return S!==0?(l=S&~p,l!==0?h=$e(l):(x&=S,x!==0?h=$e(x):r||(r=S&~t,r!==0&&(h=$e(r))))):(S=l&~p,S!==0?h=$e(S):x!==0?h=$e(x):r||(r=l&~t,r!==0&&(h=$e(r)))),h===0?0:a!==0&&a!==h&&(a&p)===0&&(p=h&-h,r=a&-a,p>=r||p===32&&(r&4194048)!==0)?a:h}function mt(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function jt(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ye(){var t=be;return be<<=1,(be&62914560)===0&&(be=4194304),t}function bt(t){for(var a=[],r=0;31>r;r++)a.push(t);return a}function Gt(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function En(t,a,r,l,h,p){var x=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var S=t.entanglements,D=t.expirationTimes,W=t.hiddenUpdates;for(r=x&~r;0<r;){var oe=31-Pt(r),fe=1<<oe;S[oe]=0,D[oe]=-1;var Z=W[oe];if(Z!==null)for(W[oe]=null,oe=0;oe<Z.length;oe++){var ne=Z[oe];ne!==null&&(ne.lane&=-536870913)}r&=~fe}l!==0&&Ya(t,l,0),p!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=p&~(x&~a))}function Ya(t,a,r){t.pendingLanes|=a,t.suspendedLanes&=~a;var l=31-Pt(a);t.entangledLanes|=a,t.entanglements[l]=t.entanglements[l]|1073741824|r&261930}function cl(t,a){var r=t.entangledLanes|=a;for(t=t.entanglements;r;){var l=31-Pt(r),h=1<<l;h&a|t[l]&a&&(t[l]|=a),r&=~h}}function ul(t,a){var r=a&-a;return r=(r&42)!==0?1:ir(r),(r&(t.suspendedLanes|a))!==0?0:r}function ir(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Si(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Qc(){var t=me.p;return t!==0?t:(t=window.event,t===void 0?32:Zy(t.type))}function Ia(t,a){var r=me.p;try{return me.p=t,a()}finally{me.p=r}}var ja=Math.random().toString(36).slice(2),un="__reactFiber$"+ja,wn="__reactProps$"+ja,Qa="__reactContainer$"+ja,Yr="__reactEvents$"+ja,Mf="__reactListeners$"+ja,Kc="__reactHandles$"+ja,Xc="__reactResources$"+ja,Ka="__reactMarker$"+ja;function Qr(t){delete t[un],delete t[wn],delete t[Yr],delete t[Mf],delete t[Kc]}function Xa(t){var a=t[un];if(a)return a;for(var r=t.parentNode;r;){if(a=r[Qa]||r[un]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(t=zy(t);t!==null;){if(r=t[un])return r;t=zy(t)}return a}t=r,r=t.parentNode}return null}function pa(t){if(t=t[un]||t[Qa]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function na(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(s(33))}function Ja(t){var a=t[Xc];return a||(a=t[Xc]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function dn(t){t[Ka]=!0}var dl=new Set,fl={};function Wa(t,a){Za(t,a),Za(t+"Capture",a)}function Za(t,a){for(fl[t]=a,t=0;t<a.length;t++)dl.add(a[t])}var hl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pl={},ml={};function Jc(t){return ve.call(ml,t)?!0:ve.call(pl,t)?!1:hl.test(t)?ml[t]=!0:(pl[t]=!0,!1)}function Kr(t,a,r){if(Jc(a))if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+r)}}function aa(t,a,r){if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+r)}}function fn(t,a,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(a,r,""+l)}}function An(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function is(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function gl(t,a,r){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,p=l.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return h.call(this)},set:function(x){r=""+x,p.call(this,x)}}),Object.defineProperty(t,a,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(x){r=""+x},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function St(t){if(!t._valueTracker){var a=is(t)?"checked":"value";t._valueTracker=gl(t,a,""+t[a])}}function sr(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var r=a.getValue(),l="";return t&&(l=is(t)?t.checked?"true":"false":t.value),t=l,t!==r?(a.setValue(t),!0):!1}function ei(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var rr=/[\n"\\]/g;function $n(t){return t.replace(rr,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Xr(t,a,r,l,h,p,x,S){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),a!=null?x==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+An(a)):t.value!==""+An(a)&&(t.value=""+An(a)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),a!=null?bl(t,x,An(a)):r!=null?bl(t,x,An(r)):l!=null&&t.removeAttribute("value"),h==null&&p!=null&&(t.defaultChecked=!!p),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+An(S):t.removeAttribute("name")}function Wc(t,a,r,l,h,p,x,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),a!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){St(t);return}r=r!=null?""+An(r):"",a=a!=null?""+An(a):r,S||a===t.value||(t.value=a),t.defaultValue=a}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=S?t.checked:!!l,t.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),St(t)}function bl(t,a,r){a==="number"&&ei(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function ss(t,a,r,l){if(t=t.options,a){a={};for(var h=0;h<r.length;h++)a["$"+r[h]]=!0;for(r=0;r<t.length;r++)h=a.hasOwnProperty("$"+t[r].value),t[r].selected!==h&&(t[r].selected=h),h&&l&&(t[r].defaultSelected=!0)}else{for(r=""+An(r),a=null,h=0;h<t.length;h++){if(t[h].value===r){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}a!==null||t[h].disabled||(a=t[h])}a!==null&&(a.selected=!0)}}function Zc(t,a,r){if(a!=null&&(a=""+An(a),a!==t.value&&(t.value=a),r==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=r!=null?""+An(r):""}function rs(t,a,r,l){if(a==null){if(l!=null){if(r!=null)throw Error(s(92));if(ye(l)){if(1<l.length)throw Error(s(93));l=l[0]}r=l}r==null&&(r=""),a=r}r=An(a),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l),St(t)}function Yn(t,a){if(a){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=a;return}}t.textContent=a}var eu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yl(t,a,r){var l=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":l?t.setProperty(a,r):typeof r!="number"||r===0||eu.has(a)?a==="float"?t.cssFloat=r:t[a]=(""+r).trim():t[a]=r+"px"}function xl(t,a,r){if(a!=null&&typeof a!="object")throw Error(s(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in a)l=a[h],a.hasOwnProperty(h)&&r[h]!==l&&yl(t,h,l)}else for(var p in a)a.hasOwnProperty(p)&&yl(t,p,a[p])}function Jr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),os=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wr(t){return os.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ka(){}var vl=null;function ma(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ls=null,ti=null;function or(t){var a=pa(t);if(a&&(t=a.stateNode)){var r=t[wn]||null;e:switch(t=a.stateNode,a.type){case"input":if(Xr(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+$n(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var l=r[a];if(l!==t&&l.form===t.form){var h=l[wn]||null;if(!h)throw Error(s(90));Xr(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(a=0;a<r.length;a++)l=r[a],l.form===t.form&&sr(l)}break e;case"textarea":Zc(t,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&ss(t,!!r.multiple,a,!1)}}}var Zr=!1;function cs(t,a,r){if(Zr)return t(a,r);Zr=!0;try{var l=t(a);return l}finally{if(Zr=!1,(ls!==null||ti!==null)&&(Qu(),ls&&(a=ls,t=ti,ti=ls=null,or(a),t)))for(a=0;a<t.length;a++)or(t[a])}}function Oa(t,a){var r=t.stateNode;if(r===null)return null;var l=r[wn]||null;if(l===null)return null;r=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(s(231,a,typeof r));return r}var ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lr=!1;if(ga)try{var kt={};Object.defineProperty(kt,"passive",{get:function(){lr=!0}}),window.addEventListener("test",kt,kt),window.removeEventListener("test",kt,kt)}catch{lr=!1}var ni=null,_l=null,cr=null;function El(){if(cr)return cr;var t,a=_l,r=a.length,l,h="value"in ni?ni.value:ni.textContent,p=h.length;for(t=0;t<r&&a[t]===h[t];t++);var x=r-t;for(l=1;l<=x&&a[r-l]===h[p-l];l++);return cr=h.slice(t,1<l?1-l:void 0)}function ur(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Ti(){return!0}function Da(){return!1}function Cn(t){function a(r,l,h,p,x){this._reactName=r,this._targetInst=h,this.type=l,this.nativeEvent=p,this.target=x,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(r=t[S],this[S]=r?r(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ti:Da,this.isPropagationStopped=Da,this}return E(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ti)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ti)},persist:function(){},isPersistent:Ti}),a}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ai=Cn(Ni),us=E({},Ni,{view:0,detail:0}),wl=Cn(us),ds,eo,ii,to=E({},us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ii&&(ii&&t.type==="mousemove"?(ds=t.screenX-ii.screenX,eo=t.screenY-ii.screenY):eo=ds=0,ii=t),ds)},movementY:function(t){return"movementY"in t?t.movementY:eo}}),Al=Cn(to),dr=E({},to,{dataTransfer:0}),nu=Cn(dr),au=E({},us,{relatedTarget:0}),fr=Cn(au),Sl=E({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),iu=Cn(Sl),no=E({},Ni,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),su=Cn(no),ru=E({},Ni,{data:0}),si=Cn(ru),ou={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uu(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=cu[t])?!!a[t]:!1}function fs(){return uu}var qn=E({},us,{key:function(t){if(t.key){var a=ou[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=ur(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fs,charCode:function(t){return t.type==="keypress"?ur(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ur(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),du=Cn(qn),fu=E({},to,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ri=Cn(fu),d=E({},us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fs}),y=Cn(d),_=E({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Cn(_),X=E({},to,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),te=Cn(X),Ae=E({},Ni,{newState:0,oldState:0}),et=Cn(Ae),an=[9,13,27,32],_t=ga&&"CompositionEvent"in window,$t=null;ga&&"documentMode"in document&&($t=document.documentMode);var ba=ga&&"TextEvent"in window&&!$t,ri=ga&&(!_t||$t&&8<$t&&11>=$t),Ma=" ",Pa=!1;function hr(t,a){switch(t){case"keyup":return an.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ao(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var io=!1;function dw(t,a){switch(t){case"compositionend":return ao(a);case"keypress":return a.which!==32?null:(Pa=!0,Ma);case"textInput":return t=a.data,t===Ma&&Pa?null:t;default:return null}}function fw(t,a){if(io)return t==="compositionend"||!_t&&hr(t,a)?(t=El(),cr=_l=ni=null,io=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ri&&a.locale!=="ko"?null:a.data;default:return null}}var hw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ug(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!hw[t.type]:a==="textarea"}function Bg(t,a,r,l){ls?ti?ti.push(l):ti=[l]:ls=l,a=td(a,"onChange"),0<a.length&&(r=new ai("onChange","change",null,r,l),t.push({event:r,listeners:a}))}var Tl=null,Nl=null;function pw(t){wy(t,0)}function hu(t){var a=na(t);if(sr(a))return t}function Hg(t,a){if(t==="change")return a}var qg=!1;if(ga){var Pf;if(ga){var zf="oninput"in document;if(!zf){var Fg=document.createElement("div");Fg.setAttribute("oninput","return;"),zf=typeof Fg.oninput=="function"}Pf=zf}else Pf=!1;qg=Pf&&(!document.documentMode||9<document.documentMode)}function Gg(){Tl&&(Tl.detachEvent("onpropertychange",$g),Nl=Tl=null)}function $g(t){if(t.propertyName==="value"&&hu(Nl)){var a=[];Bg(a,Nl,t,ma(t)),cs(pw,a)}}function mw(t,a,r){t==="focusin"?(Gg(),Tl=a,Nl=r,Tl.attachEvent("onpropertychange",$g)):t==="focusout"&&Gg()}function gw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hu(Nl)}function bw(t,a){if(t==="click")return hu(a)}function yw(t,a){if(t==="input"||t==="change")return hu(a)}function xw(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var ia=typeof Object.is=="function"?Object.is:xw;function Rl(t,a){if(ia(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var r=Object.keys(t),l=Object.keys(a);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var h=r[l];if(!ve.call(a,h)||!ia(t[h],a[h]))return!1}return!0}function Yg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qg(t,a){var r=Yg(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=a&&l>=a)return{node:r,offset:a-t};t=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yg(r)}}function Kg(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Kg(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Xg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=ei(t.document);a instanceof t.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)t=a.contentWindow;else break;a=ei(t.document)}return a}function Vf(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var vw=ga&&"documentMode"in document&&11>=document.documentMode,so=null,Lf=null,Cl=null,Uf=!1;function Jg(t,a,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Uf||so==null||so!==ei(l)||(l=so,"selectionStart"in l&&Vf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Cl&&Rl(Cl,l)||(Cl=l,l=td(Lf,"onSelect"),0<l.length&&(a=new ai("onSelect","select",null,a,r),t.push({event:a,listeners:l}),a.target=so)))}function pr(t,a){var r={};return r[t.toLowerCase()]=a.toLowerCase(),r["Webkit"+t]="webkit"+a,r["Moz"+t]="moz"+a,r}var ro={animationend:pr("Animation","AnimationEnd"),animationiteration:pr("Animation","AnimationIteration"),animationstart:pr("Animation","AnimationStart"),transitionrun:pr("Transition","TransitionRun"),transitionstart:pr("Transition","TransitionStart"),transitioncancel:pr("Transition","TransitionCancel"),transitionend:pr("Transition","TransitionEnd")},Bf={},Wg={};ga&&(Wg=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function mr(t){if(Bf[t])return Bf[t];if(!ro[t])return t;var a=ro[t],r;for(r in a)if(a.hasOwnProperty(r)&&r in Wg)return Bf[t]=a[r];return t}var Zg=mr("animationend"),e0=mr("animationiteration"),t0=mr("animationstart"),_w=mr("transitionrun"),Ew=mr("transitionstart"),ww=mr("transitioncancel"),n0=mr("transitionend"),a0=new Map,Hf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hf.push("scrollEnd");function za(t,a){a0.set(t,a),Wa(a,[t])}var pu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ya=[],oo=0,qf=0;function mu(){for(var t=oo,a=qf=oo=0;a<t;){var r=ya[a];ya[a++]=null;var l=ya[a];ya[a++]=null;var h=ya[a];ya[a++]=null;var p=ya[a];if(ya[a++]=null,l!==null&&h!==null){var x=l.pending;x===null?h.next=h:(h.next=x.next,x.next=h),l.pending=h}p!==0&&i0(r,h,p)}}function gu(t,a,r,l){ya[oo++]=t,ya[oo++]=a,ya[oo++]=r,ya[oo++]=l,qf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Ff(t,a,r,l){return gu(t,a,r,l),bu(t)}function gr(t,a){return gu(t,null,null,a),bu(t)}function i0(t,a,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var h=!1,p=t.return;p!==null;)p.childLanes|=r,l=p.alternate,l!==null&&(l.childLanes|=r),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(h=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,h&&a!==null&&(h=31-Pt(r),t=p.hiddenUpdates,l=t[h],l===null?t[h]=[a]:l.push(a),a.lane=r|536870912),p):null}function bu(t){if(50<Jl)throw Jl=0,Zh=null,Error(s(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var lo={};function Aw(t,a,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sa(t,a,r,l){return new Aw(t,a,r,l)}function Gf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ci(t,a){var r=t.alternate;return r===null?(r=sa(t.tag,a,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=a,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,a=t.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function s0(t,a){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,a=r.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function yu(t,a,r,l,h,p){var x=0;if(l=t,typeof t=="function")Gf(t)&&(x=1);else if(typeof t=="string")x=CA(t,r,Q.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=sa(31,r,a,h),t.elementType=I,t.lanes=p,t;case B:return br(r.children,h,p,a);case U:x=8,h|=24;break;case V:return t=sa(12,r,a,h|2),t.elementType=V,t.lanes=p,t;case he:return t=sa(13,r,a,h),t.elementType=he,t.lanes=p,t;case ae:return t=sa(19,r,a,h),t.elementType=ae,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case K:x=10;break e;case $:x=9;break e;case re:x=11;break e;case w:x=14;break e;case C:x=16,l=null;break e}x=29,r=Error(s(130,t===null?"null":typeof t,"")),l=null}return a=sa(x,r,a,h),a.elementType=t,a.type=l,a.lanes=p,a}function br(t,a,r,l){return t=sa(7,t,l,a),t.lanes=r,t}function $f(t,a,r){return t=sa(6,t,null,a),t.lanes=r,t}function r0(t){var a=sa(18,null,null,0);return a.stateNode=t,a}function Yf(t,a,r){return a=sa(4,t.children!==null?t.children:[],t.key,a),a.lanes=r,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var o0=new WeakMap;function xa(t,a){if(typeof t=="object"&&t!==null){var r=o0.get(t);return r!==void 0?r:(a={value:t,source:a,stack:Ne(a)},o0.set(t,a),a)}return{value:t,source:a,stack:Ne(a)}}var co=[],uo=0,xu=null,Il=0,va=[],_a=0,hs=null,oi=1,li="";function Ii(t,a){co[uo++]=Il,co[uo++]=xu,xu=t,Il=a}function l0(t,a,r){va[_a++]=oi,va[_a++]=li,va[_a++]=hs,hs=t;var l=oi;t=li;var h=32-Pt(l)-1;l&=~(1<<h),r+=1;var p=32-Pt(a)+h;if(30<p){var x=h-h%5;p=(l&(1<<x)-1).toString(32),l>>=x,h-=x,oi=1<<32-Pt(a)+h|r<<h|l,li=p+t}else oi=1<<p|r<<h|l,li=t}function Qf(t){t.return!==null&&(Ii(t,1),l0(t,1,0))}function Kf(t){for(;t===xu;)xu=co[--uo],co[uo]=null,Il=co[--uo],co[uo]=null;for(;t===hs;)hs=va[--_a],va[_a]=null,li=va[--_a],va[_a]=null,oi=va[--_a],va[_a]=null}function c0(t,a){va[_a++]=oi,va[_a++]=li,va[_a++]=hs,oi=a.id,li=a.overflow,hs=t}var In=null,Ht=null,pt=!1,ps=null,Ea=!1,Xf=Error(s(519));function ms(t){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jl(xa(a,t)),Xf}function u0(t){var a=t.stateNode,r=t.type,l=t.memoizedProps;switch(a[un]=t,a[wn]=l,r){case"dialog":lt("cancel",a),lt("close",a);break;case"iframe":case"object":case"embed":lt("load",a);break;case"video":case"audio":for(r=0;r<Zl.length;r++)lt(Zl[r],a);break;case"source":lt("error",a);break;case"img":case"image":case"link":lt("error",a),lt("load",a);break;case"details":lt("toggle",a);break;case"input":lt("invalid",a),Wc(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":lt("invalid",a);break;case"textarea":lt("invalid",a),rs(a,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||l.suppressHydrationWarning===!0||Ny(a.textContent,r)?(l.popover!=null&&(lt("beforetoggle",a),lt("toggle",a)),l.onScroll!=null&&lt("scroll",a),l.onScrollEnd!=null&&lt("scrollend",a),l.onClick!=null&&(a.onclick=ka),a=!0):a=!1,a||ms(t,!0)}function d0(t){for(In=t.return;In;)switch(In.tag){case 5:case 31:case 13:Ea=!1;return;case 27:case 3:Ea=!0;return;default:In=In.return}}function fo(t){if(t!==In)return!1;if(!pt)return d0(t),pt=!0,!1;var a=t.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||pp(t.type,t.memoizedProps)),r=!r),r&&Ht&&ms(t),d0(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Ht=Py(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Ht=Py(t)}else a===27?(a=Ht,Cs(t.type)?(t=xp,xp=null,Ht=t):Ht=a):Ht=In?Aa(t.stateNode.nextSibling):null;return!0}function yr(){Ht=In=null,pt=!1}function Jf(){var t=ps;return t!==null&&(Jn===null?Jn=t:Jn.push.apply(Jn,t),ps=null),t}function jl(t){ps===null?ps=[t]:ps.push(t)}var Wf=z(null),xr=null,ji=null;function gs(t,a,r){le(Wf,a._currentValue),a._currentValue=r}function ki(t){t._currentValue=Wf.current,se(Wf)}function Zf(t,a,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===r)break;t=t.return}}function eh(t,a,r,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var p=h.dependencies;if(p!==null){var x=h.child;p=p.firstContext;e:for(;p!==null;){var S=p;p=h;for(var D=0;D<a.length;D++)if(S.context===a[D]){p.lanes|=r,S=p.alternate,S!==null&&(S.lanes|=r),Zf(p.return,r,t),l||(x=null);break e}p=S.next}}else if(h.tag===18){if(x=h.return,x===null)throw Error(s(341));x.lanes|=r,p=x.alternate,p!==null&&(p.lanes|=r),Zf(x,r,t),x=null}else x=h.child;if(x!==null)x.return=h;else for(x=h;x!==null;){if(x===t){x=null;break}if(h=x.sibling,h!==null){h.return=x.return,x=h;break}x=x.return}h=x}}function ho(t,a,r,l){t=null;for(var h=a,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var x=h.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var S=h.type;ia(h.pendingProps.value,x.value)||(t!==null?t.push(S):t=[S])}}else if(h===Ee.current){if(x=h.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(ic):t=[ic])}h=h.return}t!==null&&eh(a,t,r,l),a.flags|=262144}function vu(t){for(t=t.firstContext;t!==null;){if(!ia(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function vr(t){xr=t,ji=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function jn(t){return f0(xr,t)}function _u(t,a){return xr===null&&vr(t),f0(t,a)}function f0(t,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},ji===null){if(t===null)throw Error(s(308));ji=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else ji=ji.next=a;return r}var Sw=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){a.aborted=!0,t.forEach(function(r){return r()})}},Tw=i.unstable_scheduleCallback,Nw=i.unstable_NormalPriority,hn={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function th(){return{controller:new Sw,data:new Map,refCount:0}}function kl(t){t.refCount--,t.refCount===0&&Tw(Nw,function(){t.controller.abort()})}var Ol=null,nh=0,po=0,mo=null;function Rw(t,a){if(Ol===null){var r=Ol=[];nh=0,po=sp(),mo={status:"pending",value:void 0,then:function(l){r.push(l)}}}return nh++,a.then(h0,h0),a}function h0(){if(--nh===0&&Ol!==null){mo!==null&&(mo.status="fulfilled");var t=Ol;Ol=null,po=0,mo=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function Cw(t,a){var r=[],l={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return t.then(function(){l.status="fulfilled",l.value=a;for(var h=0;h<r.length;h++)(0,r[h])(a)},function(h){for(l.status="rejected",l.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),l}var p0=ee.S;ee.S=function(t,a){Jb=nt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Rw(t,a),p0!==null&&p0(t,a)};var _r=z(null);function ah(){var t=_r.current;return t!==null?t:zt.pooledCache}function Eu(t,a){a===null?le(_r,_r.current):le(_r,a.pool)}function m0(){var t=ah();return t===null?null:{parent:hn._currentValue,pool:t}}var go=Error(s(460)),ih=Error(s(474)),wu=Error(s(542)),Au={then:function(){}};function g0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function b0(t,a,r){switch(r=t[r],r===void 0?t.push(a):r!==a&&(a.then(ka,ka),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,x0(t),t;default:if(typeof a.status=="string")a.then(ka,ka);else{if(t=zt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=a,t.status="pending",t.then(function(l){if(a.status==="pending"){var h=a;h.status="fulfilled",h.value=l}},function(l){if(a.status==="pending"){var h=a;h.status="rejected",h.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,x0(t),t}throw wr=a,go}}function Er(t){try{var a=t._init;return a(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(wr=r,go):r}}var wr=null;function y0(){if(wr===null)throw Error(s(459));var t=wr;return wr=null,t}function x0(t){if(t===go||t===wu)throw Error(s(483))}var bo=null,Dl=0;function Su(t){var a=Dl;return Dl+=1,bo===null&&(bo=[]),b0(bo,t,a)}function Ml(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Tu(t,a){throw a.$$typeof===T?Error(s(525)):(t=Object.prototype.toString.call(a),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function v0(t){function a(F,L){if(t){var J=F.deletions;J===null?(F.deletions=[L],F.flags|=16):J.push(L)}}function r(F,L){if(!t)return null;for(;L!==null;)a(F,L),L=L.sibling;return null}function l(F){for(var L=new Map;F!==null;)F.key!==null?L.set(F.key,F):L.set(F.index,F),F=F.sibling;return L}function h(F,L){return F=Ci(F,L),F.index=0,F.sibling=null,F}function p(F,L,J){return F.index=J,t?(J=F.alternate,J!==null?(J=J.index,J<L?(F.flags|=67108866,L):J):(F.flags|=67108866,L)):(F.flags|=1048576,L)}function x(F){return t&&F.alternate===null&&(F.flags|=67108866),F}function S(F,L,J,ce){return L===null||L.tag!==6?(L=$f(J,F.mode,ce),L.return=F,L):(L=h(L,J),L.return=F,L)}function D(F,L,J,ce){var Pe=J.type;return Pe===B?oe(F,L,J.props.children,ce,J.key):L!==null&&(L.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===C&&Er(Pe)===L.type)?(L=h(L,J.props),Ml(L,J),L.return=F,L):(L=yu(J.type,J.key,J.props,null,F.mode,ce),Ml(L,J),L.return=F,L)}function W(F,L,J,ce){return L===null||L.tag!==4||L.stateNode.containerInfo!==J.containerInfo||L.stateNode.implementation!==J.implementation?(L=Yf(J,F.mode,ce),L.return=F,L):(L=h(L,J.children||[]),L.return=F,L)}function oe(F,L,J,ce,Pe){return L===null||L.tag!==7?(L=br(J,F.mode,ce,Pe),L.return=F,L):(L=h(L,J),L.return=F,L)}function fe(F,L,J){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=$f(""+L,F.mode,J),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case M:return J=yu(L.type,L.key,L.props,null,F.mode,J),Ml(J,L),J.return=F,J;case G:return L=Yf(L,F.mode,J),L.return=F,L;case C:return L=Er(L),fe(F,L,J)}if(ye(L)||O(L))return L=br(L,F.mode,J,null),L.return=F,L;if(typeof L.then=="function")return fe(F,Su(L),J);if(L.$$typeof===K)return fe(F,_u(F,L),J);Tu(F,L)}return null}function Z(F,L,J,ce){var Pe=L!==null?L.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Pe!==null?null:S(F,L,""+J,ce);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case M:return J.key===Pe?D(F,L,J,ce):null;case G:return J.key===Pe?W(F,L,J,ce):null;case C:return J=Er(J),Z(F,L,J,ce)}if(ye(J)||O(J))return Pe!==null?null:oe(F,L,J,ce,null);if(typeof J.then=="function")return Z(F,L,Su(J),ce);if(J.$$typeof===K)return Z(F,L,_u(F,J),ce);Tu(F,J)}return null}function ne(F,L,J,ce,Pe){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return F=F.get(J)||null,S(L,F,""+ce,Pe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case M:return F=F.get(ce.key===null?J:ce.key)||null,D(L,F,ce,Pe);case G:return F=F.get(ce.key===null?J:ce.key)||null,W(L,F,ce,Pe);case C:return ce=Er(ce),ne(F,L,J,ce,Pe)}if(ye(ce)||O(ce))return F=F.get(J)||null,oe(L,F,ce,Pe,null);if(typeof ce.then=="function")return ne(F,L,J,Su(ce),Pe);if(ce.$$typeof===K)return ne(F,L,J,_u(L,ce),Pe);Tu(L,ce)}return null}function ke(F,L,J,ce){for(var Pe=null,yt=null,Oe=L,at=L=0,ut=null;Oe!==null&&at<J.length;at++){Oe.index>at?(ut=Oe,Oe=null):ut=Oe.sibling;var xt=Z(F,Oe,J[at],ce);if(xt===null){Oe===null&&(Oe=ut);break}t&&Oe&&xt.alternate===null&&a(F,Oe),L=p(xt,L,at),yt===null?Pe=xt:yt.sibling=xt,yt=xt,Oe=ut}if(at===J.length)return r(F,Oe),pt&&Ii(F,at),Pe;if(Oe===null){for(;at<J.length;at++)Oe=fe(F,J[at],ce),Oe!==null&&(L=p(Oe,L,at),yt===null?Pe=Oe:yt.sibling=Oe,yt=Oe);return pt&&Ii(F,at),Pe}for(Oe=l(Oe);at<J.length;at++)ut=ne(Oe,F,at,J[at],ce),ut!==null&&(t&&ut.alternate!==null&&Oe.delete(ut.key===null?at:ut.key),L=p(ut,L,at),yt===null?Pe=ut:yt.sibling=ut,yt=ut);return t&&Oe.forEach(function(Ds){return a(F,Ds)}),pt&&Ii(F,at),Pe}function Be(F,L,J,ce){if(J==null)throw Error(s(151));for(var Pe=null,yt=null,Oe=L,at=L=0,ut=null,xt=J.next();Oe!==null&&!xt.done;at++,xt=J.next()){Oe.index>at?(ut=Oe,Oe=null):ut=Oe.sibling;var Ds=Z(F,Oe,xt.value,ce);if(Ds===null){Oe===null&&(Oe=ut);break}t&&Oe&&Ds.alternate===null&&a(F,Oe),L=p(Ds,L,at),yt===null?Pe=Ds:yt.sibling=Ds,yt=Ds,Oe=ut}if(xt.done)return r(F,Oe),pt&&Ii(F,at),Pe;if(Oe===null){for(;!xt.done;at++,xt=J.next())xt=fe(F,xt.value,ce),xt!==null&&(L=p(xt,L,at),yt===null?Pe=xt:yt.sibling=xt,yt=xt);return pt&&Ii(F,at),Pe}for(Oe=l(Oe);!xt.done;at++,xt=J.next())xt=ne(Oe,F,at,xt.value,ce),xt!==null&&(t&&xt.alternate!==null&&Oe.delete(xt.key===null?at:xt.key),L=p(xt,L,at),yt===null?Pe=xt:yt.sibling=xt,yt=xt);return t&&Oe.forEach(function(UA){return a(F,UA)}),pt&&Ii(F,at),Pe}function Mt(F,L,J,ce){if(typeof J=="object"&&J!==null&&J.type===B&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case M:e:{for(var Pe=J.key;L!==null;){if(L.key===Pe){if(Pe=J.type,Pe===B){if(L.tag===7){r(F,L.sibling),ce=h(L,J.props.children),ce.return=F,F=ce;break e}}else if(L.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===C&&Er(Pe)===L.type){r(F,L.sibling),ce=h(L,J.props),Ml(ce,J),ce.return=F,F=ce;break e}r(F,L);break}else a(F,L);L=L.sibling}J.type===B?(ce=br(J.props.children,F.mode,ce,J.key),ce.return=F,F=ce):(ce=yu(J.type,J.key,J.props,null,F.mode,ce),Ml(ce,J),ce.return=F,F=ce)}return x(F);case G:e:{for(Pe=J.key;L!==null;){if(L.key===Pe)if(L.tag===4&&L.stateNode.containerInfo===J.containerInfo&&L.stateNode.implementation===J.implementation){r(F,L.sibling),ce=h(L,J.children||[]),ce.return=F,F=ce;break e}else{r(F,L);break}else a(F,L);L=L.sibling}ce=Yf(J,F.mode,ce),ce.return=F,F=ce}return x(F);case C:return J=Er(J),Mt(F,L,J,ce)}if(ye(J))return ke(F,L,J,ce);if(O(J)){if(Pe=O(J),typeof Pe!="function")throw Error(s(150));return J=Pe.call(J),Be(F,L,J,ce)}if(typeof J.then=="function")return Mt(F,L,Su(J),ce);if(J.$$typeof===K)return Mt(F,L,_u(F,J),ce);Tu(F,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,L!==null&&L.tag===6?(r(F,L.sibling),ce=h(L,J),ce.return=F,F=ce):(r(F,L),ce=$f(J,F.mode,ce),ce.return=F,F=ce),x(F)):r(F,L)}return function(F,L,J,ce){try{Dl=0;var Pe=Mt(F,L,J,ce);return bo=null,Pe}catch(Oe){if(Oe===go||Oe===wu)throw Oe;var yt=sa(29,Oe,null,F.mode);return yt.lanes=ce,yt.return=F,yt}}}var Ar=v0(!0),_0=v0(!1),bs=!1;function sh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rh(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ys(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function xs(t,a,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Et&2)!==0){var h=l.pending;return h===null?a.next=a:(a.next=h.next,h.next=a),l.pending=a,a=bu(t),i0(t,null,r),a}return gu(t,l,a,r),bu(t)}function Pl(t,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var l=a.lanes;l&=t.pendingLanes,r|=l,a.lanes=r,cl(t,r)}}function oh(t,a){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var h=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var x={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?h=p=x:p=p.next=x,r=r.next}while(r!==null);p===null?h=p=a:p=p.next=a}else h=p=a;r={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=a:t.next=a,r.lastBaseUpdate=a}var lh=!1;function zl(){if(lh){var t=mo;if(t!==null)throw t}}function Vl(t,a,r,l){lh=!1;var h=t.updateQueue;bs=!1;var p=h.firstBaseUpdate,x=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var D=S,W=D.next;D.next=null,x===null?p=W:x.next=W,x=D;var oe=t.alternate;oe!==null&&(oe=oe.updateQueue,S=oe.lastBaseUpdate,S!==x&&(S===null?oe.firstBaseUpdate=W:S.next=W,oe.lastBaseUpdate=D))}if(p!==null){var fe=h.baseState;x=0,oe=W=D=null,S=p;do{var Z=S.lane&-536870913,ne=Z!==S.lane;if(ne?(ct&Z)===Z:(l&Z)===Z){Z!==0&&Z===po&&(lh=!0),oe!==null&&(oe=oe.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var ke=t,Be=S;Z=a;var Mt=r;switch(Be.tag){case 1:if(ke=Be.payload,typeof ke=="function"){fe=ke.call(Mt,fe,Z);break e}fe=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Be.payload,Z=typeof ke=="function"?ke.call(Mt,fe,Z):ke,Z==null)break e;fe=E({},fe,Z);break e;case 2:bs=!0}}Z=S.callback,Z!==null&&(t.flags|=64,ne&&(t.flags|=8192),ne=h.callbacks,ne===null?h.callbacks=[Z]:ne.push(Z))}else ne={lane:Z,tag:S.tag,payload:S.payload,callback:S.callback,next:null},oe===null?(W=oe=ne,D=fe):oe=oe.next=ne,x|=Z;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;ne=S,S=ne.next,ne.next=null,h.lastBaseUpdate=ne,h.shared.pending=null}}while(!0);oe===null&&(D=fe),h.baseState=D,h.firstBaseUpdate=W,h.lastBaseUpdate=oe,p===null&&(h.shared.lanes=0),As|=x,t.lanes=x,t.memoizedState=fe}}function E0(t,a){if(typeof t!="function")throw Error(s(191,t));t.call(a)}function w0(t,a){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)E0(r[t],a)}var yo=z(null),Nu=z(0);function A0(t,a){t=Bi,le(Nu,t),le(yo,a),Bi=t|a.baseLanes}function ch(){le(Nu,Bi),le(yo,yo.current)}function uh(){Bi=Nu.current,se(yo),se(Nu)}var ra=z(null),wa=null;function vs(t){var a=t.alternate;le(sn,sn.current&1),le(ra,t),wa===null&&(a===null||yo.current!==null||a.memoizedState!==null)&&(wa=t)}function dh(t){le(sn,sn.current),le(ra,t),wa===null&&(wa=t)}function S0(t){t.tag===22?(le(sn,sn.current),le(ra,t),wa===null&&(wa=t)):_s()}function _s(){le(sn,sn.current),le(ra,ra.current)}function oa(t){se(ra),wa===t&&(wa=null),se(sn)}var sn=z(0);function Ru(t){for(var a=t;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||bp(r)||yp(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Oi=0,tt=null,Ot=null,pn=null,Cu=!1,xo=!1,Sr=!1,Iu=0,Ll=0,vo=null,Iw=0;function en(){throw Error(s(321))}function fh(t,a){if(a===null)return!1;for(var r=0;r<a.length&&r<t.length;r++)if(!ia(t[r],a[r]))return!1;return!0}function hh(t,a,r,l,h,p){return Oi=p,tt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ee.H=t===null||t.memoizedState===null?lb:Rh,Sr=!1,p=r(l,h),Sr=!1,xo&&(p=N0(a,r,l,h)),T0(t),p}function T0(t){ee.H=Hl;var a=Ot!==null&&Ot.next!==null;if(Oi=0,pn=Ot=tt=null,Cu=!1,Ll=0,vo=null,a)throw Error(s(300));t===null||mn||(t=t.dependencies,t!==null&&vu(t)&&(mn=!0))}function N0(t,a,r,l){tt=t;var h=0;do{if(xo&&(vo=null),Ll=0,xo=!1,25<=h)throw Error(s(301));if(h+=1,pn=Ot=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}ee.H=cb,p=a(r,l)}while(xo);return p}function jw(){var t=ee.H,a=t.useState()[0];return a=typeof a.then=="function"?Ul(a):a,t=t.useState()[0],(Ot!==null?Ot.memoizedState:null)!==t&&(tt.flags|=1024),a}function ph(){var t=Iu!==0;return Iu=0,t}function mh(t,a,r){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~r}function gh(t){if(Cu){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Cu=!1}Oi=0,pn=Ot=tt=null,xo=!1,Ll=Iu=0,vo=null}function Fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?tt.memoizedState=pn=t:pn=pn.next=t,pn}function rn(){if(Ot===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var a=pn===null?tt.memoizedState:pn.next;if(a!==null)pn=a,Ot=t;else{if(t===null)throw tt.alternate===null?Error(s(467)):Error(s(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},pn===null?tt.memoizedState=pn=t:pn=pn.next=t}return pn}function ju(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(t){var a=Ll;return Ll+=1,vo===null&&(vo=[]),t=b0(vo,t,a),a=tt,(pn===null?a.memoizedState:pn.next)===null&&(a=a.alternate,ee.H=a===null||a.memoizedState===null?lb:Rh),t}function ku(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ul(t);if(t.$$typeof===K)return jn(t)}throw Error(s(438,String(t)))}function bh(t){var a=null,r=tt.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var l=tt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(h){return h.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=ju(),tt.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(t),l=0;l<t;l++)r[l]=k;return a.index++,r}function Di(t,a){return typeof a=="function"?a(t):a}function Ou(t){var a=rn();return yh(a,Ot,t)}function yh(t,a,r){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var h=t.baseQueue,p=l.pending;if(p!==null){if(h!==null){var x=h.next;h.next=p.next,p.next=x}a.baseQueue=h=p,l.pending=null}if(p=t.baseState,h===null)t.memoizedState=p;else{a=h.next;var S=x=null,D=null,W=a,oe=!1;do{var fe=W.lane&-536870913;if(fe!==W.lane?(ct&fe)===fe:(Oi&fe)===fe){var Z=W.revertLane;if(Z===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),fe===po&&(oe=!0);else if((Oi&Z)===Z){W=W.next,Z===po&&(oe=!0);continue}else fe={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},D===null?(S=D=fe,x=p):D=D.next=fe,tt.lanes|=Z,As|=Z;fe=W.action,Sr&&r(p,fe),p=W.hasEagerState?W.eagerState:r(p,fe)}else Z={lane:fe,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},D===null?(S=D=Z,x=p):D=D.next=Z,tt.lanes|=fe,As|=fe;W=W.next}while(W!==null&&W!==a);if(D===null?x=p:D.next=S,!ia(p,t.memoizedState)&&(mn=!0,oe&&(r=mo,r!==null)))throw r;t.memoizedState=p,t.baseState=x,t.baseQueue=D,l.lastRenderedState=p}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function xh(t){var a=rn(),r=a.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=t;var l=r.dispatch,h=r.pending,p=a.memoizedState;if(h!==null){r.pending=null;var x=h=h.next;do p=t(p,x.action),x=x.next;while(x!==h);ia(p,a.memoizedState)||(mn=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),r.lastRenderedState=p}return[p,l]}function R0(t,a,r){var l=tt,h=rn(),p=pt;if(p){if(r===void 0)throw Error(s(407));r=r()}else r=a();var x=!ia((Ot||h).memoizedState,r);if(x&&(h.memoizedState=r,mn=!0),h=h.queue,Eh(j0.bind(null,l,h,t),[t]),h.getSnapshot!==a||x||pn!==null&&pn.memoizedState.tag&1){if(l.flags|=2048,_o(9,{destroy:void 0},I0.bind(null,l,h,r,a),null),zt===null)throw Error(s(349));p||(Oi&127)!==0||C0(l,a,r)}return r}function C0(t,a,r){t.flags|=16384,t={getSnapshot:a,value:r},a=tt.updateQueue,a===null?(a=ju(),tt.updateQueue=a,a.stores=[t]):(r=a.stores,r===null?a.stores=[t]:r.push(t))}function I0(t,a,r,l){a.value=r,a.getSnapshot=l,k0(a)&&O0(t)}function j0(t,a,r){return r(function(){k0(a)&&O0(t)})}function k0(t){var a=t.getSnapshot;t=t.value;try{var r=a();return!ia(t,r)}catch{return!0}}function O0(t){var a=gr(t,2);a!==null&&Wn(a,t,2)}function vh(t){var a=Fn();if(typeof t=="function"){var r=t;if(t=r(),Sr){cn(!0);try{r()}finally{cn(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:t},a}function D0(t,a,r,l){return t.baseState=r,yh(t,Ot,typeof l=="function"?l:Di)}function kw(t,a,r,l,h){if(Pu(t))throw Error(s(485));if(t=a.action,t!==null){var p={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){p.listeners.push(x)}};ee.T!==null?r(!0):p.isTransition=!1,l(p),r=a.pending,r===null?(p.next=a.pending=p,M0(a,p)):(p.next=r.next,a.pending=r.next=p)}}function M0(t,a){var r=a.action,l=a.payload,h=t.state;if(a.isTransition){var p=ee.T,x={};ee.T=x;try{var S=r(h,l),D=ee.S;D!==null&&D(x,S),P0(t,a,S)}catch(W){_h(t,a,W)}finally{p!==null&&x.types!==null&&(p.types=x.types),ee.T=p}}else try{p=r(h,l),P0(t,a,p)}catch(W){_h(t,a,W)}}function P0(t,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){z0(t,a,l)},function(l){return _h(t,a,l)}):z0(t,a,r)}function z0(t,a,r){a.status="fulfilled",a.value=r,V0(a),t.state=r,a=t.pending,a!==null&&(r=a.next,r===a?t.pending=null:(r=r.next,a.next=r,M0(t,r)))}function _h(t,a,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=r,V0(a),a=a.next;while(a!==l)}t.action=null}function V0(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function L0(t,a){return a}function U0(t,a){if(pt){var r=zt.formState;if(r!==null){e:{var l=tt;if(pt){if(Ht){t:{for(var h=Ht,p=Ea;h.nodeType!==8;){if(!p){h=null;break t}if(h=Aa(h.nextSibling),h===null){h=null;break t}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){Ht=Aa(h.nextSibling),l=h.data==="F!";break e}}ms(l)}l=!1}l&&(a=r[0])}}return r=Fn(),r.memoizedState=r.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:L0,lastRenderedState:a},r.queue=l,r=sb.bind(null,tt,l),l.dispatch=r,l=vh(!1),p=Nh.bind(null,tt,!1,l.queue),l=Fn(),h={state:a,dispatch:null,action:t,pending:null},l.queue=h,r=kw.bind(null,tt,h,p,r),h.dispatch=r,l.memoizedState=t,[a,r,!1]}function B0(t){var a=rn();return H0(a,Ot,t)}function H0(t,a,r){if(a=yh(t,a,L0)[0],t=Ou(Di)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=Ul(a)}catch(x){throw x===go?wu:x}else l=a;a=rn();var h=a.queue,p=h.dispatch;return r!==a.memoizedState&&(tt.flags|=2048,_o(9,{destroy:void 0},Ow.bind(null,h,r),null)),[l,p,t]}function Ow(t,a){t.action=a}function q0(t){var a=rn(),r=Ot;if(r!==null)return H0(a,r,t);rn(),a=a.memoizedState,r=rn();var l=r.queue.dispatch;return r.memoizedState=t,[a,l,!1]}function _o(t,a,r,l){return t={tag:t,create:r,deps:l,inst:a,next:null},a=tt.updateQueue,a===null&&(a=ju(),tt.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,a.lastEffect=t),t}function F0(){return rn().memoizedState}function Du(t,a,r,l){var h=Fn();tt.flags|=t,h.memoizedState=_o(1|a,{destroy:void 0},r,l===void 0?null:l)}function Mu(t,a,r,l){var h=rn();l=l===void 0?null:l;var p=h.memoizedState.inst;Ot!==null&&l!==null&&fh(l,Ot.memoizedState.deps)?h.memoizedState=_o(a,p,r,l):(tt.flags|=t,h.memoizedState=_o(1|a,p,r,l))}function G0(t,a){Du(8390656,8,t,a)}function Eh(t,a){Mu(2048,8,t,a)}function Dw(t){tt.flags|=4;var a=tt.updateQueue;if(a===null)a=ju(),tt.updateQueue=a,a.events=[t];else{var r=a.events;r===null?a.events=[t]:r.push(t)}}function $0(t){var a=rn().memoizedState;return Dw({ref:a,nextImpl:t}),function(){if((Et&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Y0(t,a){return Mu(4,2,t,a)}function Q0(t,a){return Mu(4,4,t,a)}function K0(t,a){if(typeof a=="function"){t=t();var r=a(t);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function X0(t,a,r){r=r!=null?r.concat([t]):null,Mu(4,4,K0.bind(null,a,t),r)}function wh(){}function J0(t,a){var r=rn();a=a===void 0?null:a;var l=r.memoizedState;return a!==null&&fh(a,l[1])?l[0]:(r.memoizedState=[t,a],t)}function W0(t,a){var r=rn();a=a===void 0?null:a;var l=r.memoizedState;if(a!==null&&fh(a,l[1]))return l[0];if(l=t(),Sr){cn(!0);try{t()}finally{cn(!1)}}return r.memoizedState=[l,a],l}function Ah(t,a,r){return r===void 0||(Oi&1073741824)!==0&&(ct&261930)===0?t.memoizedState=a:(t.memoizedState=r,t=Zb(),tt.lanes|=t,As|=t,r)}function Z0(t,a,r,l){return ia(r,a)?r:yo.current!==null?(t=Ah(t,r,l),ia(t,a)||(mn=!0),t):(Oi&42)===0||(Oi&1073741824)!==0&&(ct&261930)===0?(mn=!0,t.memoizedState=r):(t=Zb(),tt.lanes|=t,As|=t,a)}function eb(t,a,r,l,h){var p=me.p;me.p=p!==0&&8>p?p:8;var x=ee.T,S={};ee.T=S,Nh(t,!1,a,r);try{var D=h(),W=ee.S;if(W!==null&&W(S,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var oe=Cw(D,l);Bl(t,a,oe,ua(t))}else Bl(t,a,l,ua(t))}catch(fe){Bl(t,a,{then:function(){},status:"rejected",reason:fe},ua())}finally{me.p=p,x!==null&&S.types!==null&&(x.types=S.types),ee.T=x}}function Mw(){}function Sh(t,a,r,l){if(t.tag!==5)throw Error(s(476));var h=tb(t).queue;eb(t,h,a,Re,r===null?Mw:function(){return nb(t),r(l)})}function tb(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:Re,baseState:Re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:Re},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:r},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function nb(t){var a=tb(t);a.next===null&&(a=t.alternate.memoizedState),Bl(t,a.next.queue,{},ua())}function Th(){return jn(ic)}function ab(){return rn().memoizedState}function ib(){return rn().memoizedState}function Pw(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var r=ua();t=ys(r);var l=xs(a,t,r);l!==null&&(Wn(l,a,r),Pl(l,a,r)),a={cache:th()},t.payload=a;return}a=a.return}}function zw(t,a,r){var l=ua();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Pu(t)?rb(a,r):(r=Ff(t,a,r,l),r!==null&&(Wn(r,t,l),ob(r,a,l)))}function sb(t,a,r){var l=ua();Bl(t,a,r,l)}function Bl(t,a,r,l){var h={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Pu(t))rb(a,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var x=a.lastRenderedState,S=p(x,r);if(h.hasEagerState=!0,h.eagerState=S,ia(S,x))return gu(t,a,h,0),zt===null&&mu(),!1}catch{}if(r=Ff(t,a,h,l),r!==null)return Wn(r,t,l),ob(r,a,l),!0}return!1}function Nh(t,a,r,l){if(l={lane:2,revertLane:sp(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Pu(t)){if(a)throw Error(s(479))}else a=Ff(t,r,l,2),a!==null&&Wn(a,t,2)}function Pu(t){var a=t.alternate;return t===tt||a!==null&&a===tt}function rb(t,a){xo=Cu=!0;var r=t.pending;r===null?a.next=a:(a.next=r.next,r.next=a),t.pending=a}function ob(t,a,r){if((r&4194048)!==0){var l=a.lanes;l&=t.pendingLanes,r|=l,a.lanes=r,cl(t,r)}}var Hl={readContext:jn,use:ku,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useLayoutEffect:en,useInsertionEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useSyncExternalStore:en,useId:en,useHostTransitionStatus:en,useFormState:en,useActionState:en,useOptimistic:en,useMemoCache:en,useCacheRefresh:en};Hl.useEffectEvent=en;var lb={readContext:jn,use:ku,useCallback:function(t,a){return Fn().memoizedState=[t,a===void 0?null:a],t},useContext:jn,useEffect:G0,useImperativeHandle:function(t,a,r){r=r!=null?r.concat([t]):null,Du(4194308,4,K0.bind(null,a,t),r)},useLayoutEffect:function(t,a){return Du(4194308,4,t,a)},useInsertionEffect:function(t,a){Du(4,2,t,a)},useMemo:function(t,a){var r=Fn();a=a===void 0?null:a;var l=t();if(Sr){cn(!0);try{t()}finally{cn(!1)}}return r.memoizedState=[l,a],l},useReducer:function(t,a,r){var l=Fn();if(r!==void 0){var h=r(a);if(Sr){cn(!0);try{r(a)}finally{cn(!1)}}}else h=a;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=zw.bind(null,tt,t),[l.memoizedState,t]},useRef:function(t){var a=Fn();return t={current:t},a.memoizedState=t},useState:function(t){t=vh(t);var a=t.queue,r=sb.bind(null,tt,a);return a.dispatch=r,[t.memoizedState,r]},useDebugValue:wh,useDeferredValue:function(t,a){var r=Fn();return Ah(r,t,a)},useTransition:function(){var t=vh(!1);return t=eb.bind(null,tt,t.queue,!0,!1),Fn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,r){var l=tt,h=Fn();if(pt){if(r===void 0)throw Error(s(407));r=r()}else{if(r=a(),zt===null)throw Error(s(349));(ct&127)!==0||C0(l,a,r)}h.memoizedState=r;var p={value:r,getSnapshot:a};return h.queue=p,G0(j0.bind(null,l,p,t),[t]),l.flags|=2048,_o(9,{destroy:void 0},I0.bind(null,l,p,r,a),null),r},useId:function(){var t=Fn(),a=zt.identifierPrefix;if(pt){var r=li,l=oi;r=(l&~(1<<32-Pt(l)-1)).toString(32)+r,a="_"+a+"R_"+r,r=Iu++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=Iw++,a="_"+a+"r_"+r.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Th,useFormState:U0,useActionState:U0,useOptimistic:function(t){var a=Fn();a.memoizedState=a.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=Nh.bind(null,tt,!0,r),r.dispatch=a,[t,a]},useMemoCache:bh,useCacheRefresh:function(){return Fn().memoizedState=Pw.bind(null,tt)},useEffectEvent:function(t){var a=Fn(),r={impl:t};return a.memoizedState=r,function(){if((Et&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},Rh={readContext:jn,use:ku,useCallback:J0,useContext:jn,useEffect:Eh,useImperativeHandle:X0,useInsertionEffect:Y0,useLayoutEffect:Q0,useMemo:W0,useReducer:Ou,useRef:F0,useState:function(){return Ou(Di)},useDebugValue:wh,useDeferredValue:function(t,a){var r=rn();return Z0(r,Ot.memoizedState,t,a)},useTransition:function(){var t=Ou(Di)[0],a=rn().memoizedState;return[typeof t=="boolean"?t:Ul(t),a]},useSyncExternalStore:R0,useId:ab,useHostTransitionStatus:Th,useFormState:B0,useActionState:B0,useOptimistic:function(t,a){var r=rn();return D0(r,Ot,t,a)},useMemoCache:bh,useCacheRefresh:ib};Rh.useEffectEvent=$0;var cb={readContext:jn,use:ku,useCallback:J0,useContext:jn,useEffect:Eh,useImperativeHandle:X0,useInsertionEffect:Y0,useLayoutEffect:Q0,useMemo:W0,useReducer:xh,useRef:F0,useState:function(){return xh(Di)},useDebugValue:wh,useDeferredValue:function(t,a){var r=rn();return Ot===null?Ah(r,t,a):Z0(r,Ot.memoizedState,t,a)},useTransition:function(){var t=xh(Di)[0],a=rn().memoizedState;return[typeof t=="boolean"?t:Ul(t),a]},useSyncExternalStore:R0,useId:ab,useHostTransitionStatus:Th,useFormState:q0,useActionState:q0,useOptimistic:function(t,a){var r=rn();return Ot!==null?D0(r,Ot,t,a):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:bh,useCacheRefresh:ib};cb.useEffectEvent=$0;function Ch(t,a,r,l){a=t.memoizedState,r=r(l,a),r=r==null?a:E({},a,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ih={enqueueSetState:function(t,a,r){t=t._reactInternals;var l=ua(),h=ys(l);h.payload=a,r!=null&&(h.callback=r),a=xs(t,h,l),a!==null&&(Wn(a,t,l),Pl(a,t,l))},enqueueReplaceState:function(t,a,r){t=t._reactInternals;var l=ua(),h=ys(l);h.tag=1,h.payload=a,r!=null&&(h.callback=r),a=xs(t,h,l),a!==null&&(Wn(a,t,l),Pl(a,t,l))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var r=ua(),l=ys(r);l.tag=2,a!=null&&(l.callback=a),a=xs(t,l,r),a!==null&&(Wn(a,t,r),Pl(a,t,r))}};function ub(t,a,r,l,h,p,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,x):a.prototype&&a.prototype.isPureReactComponent?!Rl(r,l)||!Rl(h,p):!0}function db(t,a,r,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,l),a.state!==t&&Ih.enqueueReplaceState(a,a.state,null)}function Tr(t,a){var r=a;if("ref"in a){r={};for(var l in a)l!=="ref"&&(r[l]=a[l])}if(t=t.defaultProps){r===a&&(r=E({},r));for(var h in t)r[h]===void 0&&(r[h]=t[h])}return r}function fb(t){pu(t)}function hb(t){console.error(t)}function pb(t){pu(t)}function zu(t,a){try{var r=t.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function mb(t,a,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function jh(t,a,r){return r=ys(r),r.tag=3,r.payload={element:null},r.callback=function(){zu(t,a)},r}function gb(t){return t=ys(t),t.tag=3,t}function bb(t,a,r,l){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var p=l.value;t.payload=function(){return h(p)},t.callback=function(){mb(a,r,l)}}var x=r.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){mb(a,r,l),typeof h!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function Vw(t,a,r,l,h){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=r.alternate,a!==null&&ho(a,r,h,!0),r=ra.current,r!==null){switch(r.tag){case 31:case 13:return wa===null?Ku():r.alternate===null&&tn===0&&(tn=3),r.flags&=-257,r.flags|=65536,r.lanes=h,l===Au?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([l]):a.add(l),np(t,l,h)),!1;case 22:return r.flags|=65536,l===Au?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([l]):r.add(l)),np(t,l,h)),!1}throw Error(s(435,r.tag))}return np(t,l,h),Ku(),!1}if(pt)return a=ra.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=h,l!==Xf&&(t=Error(s(422),{cause:l}),jl(xa(t,r)))):(l!==Xf&&(a=Error(s(423),{cause:l}),jl(xa(a,r))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=xa(l,r),h=jh(t.stateNode,l,h),oh(t,h),tn!==4&&(tn=2)),!1;var p=Error(s(520),{cause:l});if(p=xa(p,r),Xl===null?Xl=[p]:Xl.push(p),tn!==4&&(tn=2),a===null)return!0;l=xa(l,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,t=h&-h,r.lanes|=t,t=jh(r.stateNode,l,t),oh(r,t),!1;case 1:if(a=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ss===null||!Ss.has(p))))return r.flags|=65536,h&=-h,r.lanes|=h,h=gb(h),bb(h,t,r,l),oh(r,h),!1}r=r.return}while(r!==null);return!1}var kh=Error(s(461)),mn=!1;function kn(t,a,r,l){a.child=t===null?_0(a,null,r,l):Ar(a,t.child,r,l)}function yb(t,a,r,l,h){r=r.render;var p=a.ref;if("ref"in l){var x={};for(var S in l)S!=="ref"&&(x[S]=l[S])}else x=l;return vr(a),l=hh(t,a,r,x,p,h),S=ph(),t!==null&&!mn?(mh(t,a,h),Mi(t,a,h)):(pt&&S&&Qf(a),a.flags|=1,kn(t,a,l,h),a.child)}function xb(t,a,r,l,h){if(t===null){var p=r.type;return typeof p=="function"&&!Gf(p)&&p.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=p,vb(t,a,p,l,h)):(t=yu(r.type,null,l,a,a.mode,h),t.ref=a.ref,t.return=a,a.child=t)}if(p=t.child,!Uh(t,h)){var x=p.memoizedProps;if(r=r.compare,r=r!==null?r:Rl,r(x,l)&&t.ref===a.ref)return Mi(t,a,h)}return a.flags|=1,t=Ci(p,l),t.ref=a.ref,t.return=a,a.child=t}function vb(t,a,r,l,h){if(t!==null){var p=t.memoizedProps;if(Rl(p,l)&&t.ref===a.ref)if(mn=!1,a.pendingProps=l=p,Uh(t,h))(t.flags&131072)!==0&&(mn=!0);else return a.lanes=t.lanes,Mi(t,a,h)}return Oh(t,a,r,l,h)}function _b(t,a,r,l){var h=l.children,p=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,t!==null){for(l=a.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~p}else l=0,a.child=null;return Eb(t,a,p,r,l)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Eu(a,p!==null?p.cachePool:null),p!==null?A0(a,p):ch(),S0(a);else return l=a.lanes=536870912,Eb(t,a,p!==null?p.baseLanes|r:r,r,l)}else p!==null?(Eu(a,p.cachePool),A0(a,p),_s(),a.memoizedState=null):(t!==null&&Eu(a,null),ch(),_s());return kn(t,a,h,r),a.child}function ql(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Eb(t,a,r,l,h){var p=ah();return p=p===null?null:{parent:hn._currentValue,pool:p},a.memoizedState={baseLanes:r,cachePool:p},t!==null&&Eu(a,null),ch(),S0(a),t!==null&&ho(t,a,l,!0),a.childLanes=h,null}function Vu(t,a){return a=Uu({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function wb(t,a,r){return Ar(a,t.child,null,r),t=Vu(a,a.pendingProps),t.flags|=2,oa(a),a.memoizedState=null,t}function Lw(t,a,r){var l=a.pendingProps,h=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(pt){if(l.mode==="hidden")return t=Vu(a,l),a.lanes=536870912,ql(null,t);if(dh(a),(t=Ht)?(t=My(t,Ea),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:hs!==null?{id:oi,overflow:li}:null,retryLane:536870912,hydrationErrors:null},r=r0(t),r.return=a,a.child=r,In=a,Ht=null)):t=null,t===null)throw ms(a);return a.lanes=536870912,null}return Vu(a,l)}var p=t.memoizedState;if(p!==null){var x=p.dehydrated;if(dh(a),h)if(a.flags&256)a.flags&=-257,a=wb(t,a,r);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(s(558));else if(mn||ho(t,a,r,!1),h=(r&t.childLanes)!==0,mn||h){if(l=zt,l!==null&&(x=ul(l,r),x!==0&&x!==p.retryLane))throw p.retryLane=x,gr(t,x),Wn(l,t,x),kh;Ku(),a=wb(t,a,r)}else t=p.treeContext,Ht=Aa(x.nextSibling),In=a,pt=!0,ps=null,Ea=!1,t!==null&&c0(a,t),a=Vu(a,l),a.flags|=4096;return a}return t=Ci(t.child,{mode:l.mode,children:l.children}),t.ref=a.ref,a.child=t,t.return=a,t}function Lu(t,a){var r=a.ref;if(r===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(t===null||t.ref!==r)&&(a.flags|=4194816)}}function Oh(t,a,r,l,h){return vr(a),r=hh(t,a,r,l,void 0,h),l=ph(),t!==null&&!mn?(mh(t,a,h),Mi(t,a,h)):(pt&&l&&Qf(a),a.flags|=1,kn(t,a,r,h),a.child)}function Ab(t,a,r,l,h,p){return vr(a),a.updateQueue=null,r=N0(a,l,r,h),T0(t),l=ph(),t!==null&&!mn?(mh(t,a,p),Mi(t,a,p)):(pt&&l&&Qf(a),a.flags|=1,kn(t,a,r,p),a.child)}function Sb(t,a,r,l,h){if(vr(a),a.stateNode===null){var p=lo,x=r.contextType;typeof x=="object"&&x!==null&&(p=jn(x)),p=new r(l,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Ih,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=l,p.state=a.memoizedState,p.refs={},sh(a),x=r.contextType,p.context=typeof x=="object"&&x!==null?jn(x):lo,p.state=a.memoizedState,x=r.getDerivedStateFromProps,typeof x=="function"&&(Ch(a,r,x,l),p.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(x=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),x!==p.state&&Ih.enqueueReplaceState(p,p.state,null),Vl(a,l,p,h),zl(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(t===null){p=a.stateNode;var S=a.memoizedProps,D=Tr(r,S);p.props=D;var W=p.context,oe=r.contextType;x=lo,typeof oe=="object"&&oe!==null&&(x=jn(oe));var fe=r.getDerivedStateFromProps;oe=typeof fe=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=a.pendingProps!==S,oe||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||W!==x)&&db(a,p,l,x),bs=!1;var Z=a.memoizedState;p.state=Z,Vl(a,l,p,h),zl(),W=a.memoizedState,S||Z!==W||bs?(typeof fe=="function"&&(Ch(a,r,fe,l),W=a.memoizedState),(D=bs||ub(a,r,D,l,Z,W,x))?(oe||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=W),p.props=l,p.state=W,p.context=x,l=D):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{p=a.stateNode,rh(t,a),x=a.memoizedProps,oe=Tr(r,x),p.props=oe,fe=a.pendingProps,Z=p.context,W=r.contextType,D=lo,typeof W=="object"&&W!==null&&(D=jn(W)),S=r.getDerivedStateFromProps,(W=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x!==fe||Z!==D)&&db(a,p,l,D),bs=!1,Z=a.memoizedState,p.state=Z,Vl(a,l,p,h),zl();var ne=a.memoizedState;x!==fe||Z!==ne||bs||t!==null&&t.dependencies!==null&&vu(t.dependencies)?(typeof S=="function"&&(Ch(a,r,S,l),ne=a.memoizedState),(oe=bs||ub(a,r,oe,l,Z,ne,D)||t!==null&&t.dependencies!==null&&vu(t.dependencies))?(W||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,ne,D),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,ne,D)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||x===t.memoizedProps&&Z===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&Z===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=ne),p.props=l,p.state=ne,p.context=D,l=oe):(typeof p.componentDidUpdate!="function"||x===t.memoizedProps&&Z===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&Z===t.memoizedState||(a.flags|=1024),l=!1)}return p=l,Lu(t,a),l=(a.flags&128)!==0,p||l?(p=a.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,t!==null&&l?(a.child=Ar(a,t.child,null,h),a.child=Ar(a,null,r,h)):kn(t,a,r,h),a.memoizedState=p.state,t=a.child):t=Mi(t,a,h),t}function Tb(t,a,r,l){return yr(),a.flags|=256,kn(t,a,r,l),a.child}var Dh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mh(t){return{baseLanes:t,cachePool:m0()}}function Ph(t,a,r){return t=t!==null?t.childLanes&~r:0,a&&(t|=ca),t}function Nb(t,a,r){var l=a.pendingProps,h=!1,p=(a.flags&128)!==0,x;if((x=p)||(x=t!==null&&t.memoizedState===null?!1:(sn.current&2)!==0),x&&(h=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,t===null){if(pt){if(h?vs(a):_s(),(t=Ht)?(t=My(t,Ea),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:hs!==null?{id:oi,overflow:li}:null,retryLane:536870912,hydrationErrors:null},r=r0(t),r.return=a,a.child=r,In=a,Ht=null)):t=null,t===null)throw ms(a);return yp(t)?a.lanes=32:a.lanes=536870912,null}var S=l.children;return l=l.fallback,h?(_s(),h=a.mode,S=Uu({mode:"hidden",children:S},h),l=br(l,h,r,null),S.return=a,l.return=a,S.sibling=l,a.child=S,l=a.child,l.memoizedState=Mh(r),l.childLanes=Ph(t,x,r),a.memoizedState=Dh,ql(null,l)):(vs(a),zh(a,S))}var D=t.memoizedState;if(D!==null&&(S=D.dehydrated,S!==null)){if(p)a.flags&256?(vs(a),a.flags&=-257,a=Vh(t,a,r)):a.memoizedState!==null?(_s(),a.child=t.child,a.flags|=128,a=null):(_s(),S=l.fallback,h=a.mode,l=Uu({mode:"visible",children:l.children},h),S=br(S,h,r,null),S.flags|=2,l.return=a,S.return=a,l.sibling=S,a.child=l,Ar(a,t.child,null,r),l=a.child,l.memoizedState=Mh(r),l.childLanes=Ph(t,x,r),a.memoizedState=Dh,a=ql(null,l));else if(vs(a),yp(S)){if(x=S.nextSibling&&S.nextSibling.dataset,x)var W=x.dgst;x=W,l=Error(s(419)),l.stack="",l.digest=x,jl({value:l,source:null,stack:null}),a=Vh(t,a,r)}else if(mn||ho(t,a,r,!1),x=(r&t.childLanes)!==0,mn||x){if(x=zt,x!==null&&(l=ul(x,r),l!==0&&l!==D.retryLane))throw D.retryLane=l,gr(t,l),Wn(x,t,l),kh;bp(S)||Ku(),a=Vh(t,a,r)}else bp(S)?(a.flags|=192,a.child=t.child,a=null):(t=D.treeContext,Ht=Aa(S.nextSibling),In=a,pt=!0,ps=null,Ea=!1,t!==null&&c0(a,t),a=zh(a,l.children),a.flags|=4096);return a}return h?(_s(),S=l.fallback,h=a.mode,D=t.child,W=D.sibling,l=Ci(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,W!==null?S=Ci(W,S):(S=br(S,h,r,null),S.flags|=2),S.return=a,l.return=a,l.sibling=S,a.child=l,ql(null,l),l=a.child,S=t.child.memoizedState,S===null?S=Mh(r):(h=S.cachePool,h!==null?(D=hn._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=m0(),S={baseLanes:S.baseLanes|r,cachePool:h}),l.memoizedState=S,l.childLanes=Ph(t,x,r),a.memoizedState=Dh,ql(t.child,l)):(vs(a),r=t.child,t=r.sibling,r=Ci(r,{mode:"visible",children:l.children}),r.return=a,r.sibling=null,t!==null&&(x=a.deletions,x===null?(a.deletions=[t],a.flags|=16):x.push(t)),a.child=r,a.memoizedState=null,r)}function zh(t,a){return a=Uu({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Uu(t,a){return t=sa(22,t,null,a),t.lanes=0,t}function Vh(t,a,r){return Ar(a,t.child,null,r),t=zh(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Rb(t,a,r){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),Zf(t.return,a,r)}function Lh(t,a,r,l,h,p){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:h,treeForkCount:p}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=r,x.tailMode=h,x.treeForkCount=p)}function Cb(t,a,r){var l=a.pendingProps,h=l.revealOrder,p=l.tail;l=l.children;var x=sn.current,S=(x&2)!==0;if(S?(x=x&1|2,a.flags|=128):x&=1,le(sn,x),kn(t,a,l,r),l=pt?Il:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rb(t,r,a);else if(t.tag===19)Rb(t,r,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(r=a.child,h=null;r!==null;)t=r.alternate,t!==null&&Ru(t)===null&&(h=r),r=r.sibling;r=h,r===null?(h=a.child,a.child=null):(h=r.sibling,r.sibling=null),Lh(a,!1,h,r,p,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,h=a.child,a.child=null;h!==null;){if(t=h.alternate,t!==null&&Ru(t)===null){a.child=h;break}t=h.sibling,h.sibling=r,r=h,h=t}Lh(a,!0,r,null,p,l);break;case"together":Lh(a,!1,null,null,void 0,l);break;default:a.memoizedState=null}return a.child}function Mi(t,a,r){if(t!==null&&(a.dependencies=t.dependencies),As|=a.lanes,(r&a.childLanes)===0)if(t!==null){if(ho(t,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(s(153));if(a.child!==null){for(t=a.child,r=Ci(t,t.pendingProps),a.child=r,r.return=a;t.sibling!==null;)t=t.sibling,r=r.sibling=Ci(t,t.pendingProps),r.return=a;r.sibling=null}return a.child}function Uh(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&vu(t)))}function Uw(t,a,r){switch(a.tag){case 3:He(a,a.stateNode.containerInfo),gs(a,hn,t.memoizedState.cache),yr();break;case 27:case 5:it(a);break;case 4:He(a,a.stateNode.containerInfo);break;case 10:gs(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,dh(a),null;break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(vs(a),a.flags|=128,null):(r&a.child.childLanes)!==0?Nb(t,a,r):(vs(a),t=Mi(t,a,r),t!==null?t.sibling:null);vs(a);break;case 19:var h=(t.flags&128)!==0;if(l=(r&a.childLanes)!==0,l||(ho(t,a,r,!1),l=(r&a.childLanes)!==0),h){if(l)return Cb(t,a,r);a.flags|=128}if(h=a.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),le(sn,sn.current),l)break;return null;case 22:return a.lanes=0,_b(t,a,r,a.pendingProps);case 24:gs(a,hn,t.memoizedState.cache)}return Mi(t,a,r)}function Ib(t,a,r){if(t!==null)if(t.memoizedProps!==a.pendingProps)mn=!0;else{if(!Uh(t,r)&&(a.flags&128)===0)return mn=!1,Uw(t,a,r);mn=(t.flags&131072)!==0}else mn=!1,pt&&(a.flags&1048576)!==0&&l0(a,Il,a.index);switch(a.lanes=0,a.tag){case 16:e:{var l=a.pendingProps;if(t=Er(a.elementType),a.type=t,typeof t=="function")Gf(t)?(l=Tr(t,l),a.tag=1,a=Sb(null,a,t,l,r)):(a.tag=0,a=Oh(null,a,t,l,r));else{if(t!=null){var h=t.$$typeof;if(h===re){a.tag=11,a=yb(null,a,t,l,r);break e}else if(h===w){a.tag=14,a=xb(null,a,t,l,r);break e}}throw a=Ve(t)||t,Error(s(306,a,""))}}return a;case 0:return Oh(t,a,a.type,a.pendingProps,r);case 1:return l=a.type,h=Tr(l,a.pendingProps),Sb(t,a,l,h,r);case 3:e:{if(He(a,a.stateNode.containerInfo),t===null)throw Error(s(387));l=a.pendingProps;var p=a.memoizedState;h=p.element,rh(t,a),Vl(a,l,null,r);var x=a.memoizedState;if(l=x.cache,gs(a,hn,l),l!==p.cache&&eh(a,[hn],r,!0),zl(),l=x.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=Tb(t,a,l,r);break e}else if(l!==h){h=xa(Error(s(424)),a),jl(h),a=Tb(t,a,l,r);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Ht=Aa(t.firstChild),In=a,pt=!0,ps=null,Ea=!0,r=_0(a,null,l,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(yr(),l===h){a=Mi(t,a,r);break e}kn(t,a,l,r)}a=a.child}return a;case 26:return Lu(t,a),t===null?(r=By(a.type,null,a.pendingProps,null))?a.memoizedState=r:pt||(r=a.type,t=a.pendingProps,l=nd(ge.current).createElement(r),l[un]=a,l[wn]=t,On(l,r,t),dn(l),a.stateNode=l):a.memoizedState=By(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return it(a),t===null&&pt&&(l=a.stateNode=Vy(a.type,a.pendingProps,ge.current),In=a,Ea=!0,h=Ht,Cs(a.type)?(xp=h,Ht=Aa(l.firstChild)):Ht=h),kn(t,a,a.pendingProps.children,r),Lu(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&pt&&((h=l=Ht)&&(l=gA(l,a.type,a.pendingProps,Ea),l!==null?(a.stateNode=l,In=a,Ht=Aa(l.firstChild),Ea=!1,h=!0):h=!1),h||ms(a)),it(a),h=a.type,p=a.pendingProps,x=t!==null?t.memoizedProps:null,l=p.children,pp(h,p)?l=null:x!==null&&pp(h,x)&&(a.flags|=32),a.memoizedState!==null&&(h=hh(t,a,jw,null,null,r),ic._currentValue=h),Lu(t,a),kn(t,a,l,r),a.child;case 6:return t===null&&pt&&((t=r=Ht)&&(r=bA(r,a.pendingProps,Ea),r!==null?(a.stateNode=r,In=a,Ht=null,t=!0):t=!1),t||ms(a)),null;case 13:return Nb(t,a,r);case 4:return He(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=Ar(a,null,l,r):kn(t,a,l,r),a.child;case 11:return yb(t,a,a.type,a.pendingProps,r);case 7:return kn(t,a,a.pendingProps,r),a.child;case 8:return kn(t,a,a.pendingProps.children,r),a.child;case 12:return kn(t,a,a.pendingProps.children,r),a.child;case 10:return l=a.pendingProps,gs(a,a.type,l.value),kn(t,a,l.children,r),a.child;case 9:return h=a.type._context,l=a.pendingProps.children,vr(a),h=jn(h),l=l(h),a.flags|=1,kn(t,a,l,r),a.child;case 14:return xb(t,a,a.type,a.pendingProps,r);case 15:return vb(t,a,a.type,a.pendingProps,r);case 19:return Cb(t,a,r);case 31:return Lw(t,a,r);case 22:return _b(t,a,r,a.pendingProps);case 24:return vr(a),l=jn(hn),t===null?(h=ah(),h===null&&(h=zt,p=th(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=r),h=p),a.memoizedState={parent:l,cache:h},sh(a),gs(a,hn,h)):((t.lanes&r)!==0&&(rh(t,a),Vl(a,null,null,r),zl()),h=t.memoizedState,p=a.memoizedState,h.parent!==l?(h={parent:l,cache:l},a.memoizedState=h,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=h),gs(a,hn,l)):(l=p.cache,gs(a,hn,l),l!==h.cache&&eh(a,[hn],r,!0))),kn(t,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Pi(t){t.flags|=4}function Bh(t,a,r,l,h){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(ay())t.flags|=8192;else throw wr=Au,ih}else t.flags&=-16777217}function jb(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!$y(a))if(ay())t.flags|=8192;else throw wr=Au,ih}function Bu(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Ye():536870912,t.lanes|=a,So|=a)}function Fl(t,a){if(!pt)switch(t.tailMode){case"hidden":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function qt(t){var a=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(a)for(var h=t.child;h!==null;)r|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)r|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=r,a}function Bw(t,a,r){var l=a.pendingProps;switch(Kf(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(a),null;case 1:return qt(a),null;case 3:return r=a.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),ki(hn),we(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fo(a)?Pi(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Jf())),qt(a),null;case 26:var h=a.type,p=a.memoizedState;return t===null?(Pi(a),p!==null?(qt(a),jb(a,p)):(qt(a),Bh(a,h,null,l,r))):p?p!==t.memoizedState?(Pi(a),qt(a),jb(a,p)):(qt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==l&&Pi(a),qt(a),Bh(a,h,t,l,r)),null;case 27:if(st(a),r=ge.current,h=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&Pi(a);else{if(!l){if(a.stateNode===null)throw Error(s(166));return qt(a),null}t=Q.current,fo(a)?u0(a):(t=Vy(h,l,r),a.stateNode=t,Pi(a))}return qt(a),null;case 5:if(st(a),h=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&Pi(a);else{if(!l){if(a.stateNode===null)throw Error(s(166));return qt(a),null}if(p=Q.current,fo(a))u0(a);else{var x=nd(ge.current);switch(p){case 1:p=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:p=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":p=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":p=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":p=x.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?x.createElement(h,{is:l.is}):x.createElement(h)}}p[un]=a,p[wn]=l;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)p.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=p;e:switch(On(p,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Pi(a)}}return qt(a),Bh(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,r),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==l&&Pi(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(s(166));if(t=ge.current,fo(a)){if(t=a.stateNode,r=a.memoizedProps,l=null,h=In,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[un]=a,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||Ny(t.nodeValue,r)),t||ms(a,!0)}else t=nd(t).createTextNode(l),t[un]=a,a.stateNode=t}return qt(a),null;case 31:if(r=a.memoizedState,t===null||t.memoizedState!==null){if(l=fo(a),r!==null){if(t===null){if(!l)throw Error(s(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[un]=a}else yr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;qt(a),t=!1}else r=Jf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return a.flags&256?(oa(a),a):(oa(a),null);if((a.flags&128)!==0)throw Error(s(558))}return qt(a),null;case 13:if(l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=fo(a),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=a.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[un]=a}else yr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;qt(a),h=!1}else h=Jf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return a.flags&256?(oa(a),a):(oa(a),null)}return oa(a),(a.flags&128)!==0?(a.lanes=r,a):(r=l!==null,t=t!==null&&t.memoizedState!==null,r&&(l=a.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==h&&(l.flags|=2048)),r!==t&&r&&(a.child.flags|=8192),Bu(a,a.updateQueue),qt(a),null);case 4:return we(),t===null&&cp(a.stateNode.containerInfo),qt(a),null;case 10:return ki(a.type),qt(a),null;case 19:if(se(sn),l=a.memoizedState,l===null)return qt(a),null;if(h=(a.flags&128)!==0,p=l.rendering,p===null)if(h)Fl(l,!1);else{if(tn!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(p=Ru(t),p!==null){for(a.flags|=128,Fl(l,!1),t=p.updateQueue,a.updateQueue=t,Bu(a,t),a.subtreeFlags=0,t=r,r=a.child;r!==null;)s0(r,t),r=r.sibling;return le(sn,sn.current&1|2),pt&&Ii(a,l.treeForkCount),a.child}t=t.sibling}l.tail!==null&&nt()>$u&&(a.flags|=128,h=!0,Fl(l,!1),a.lanes=4194304)}else{if(!h)if(t=Ru(p),t!==null){if(a.flags|=128,h=!0,t=t.updateQueue,a.updateQueue=t,Bu(a,t),Fl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!pt)return qt(a),null}else 2*nt()-l.renderingStartTime>$u&&r!==536870912&&(a.flags|=128,h=!0,Fl(l,!1),a.lanes=4194304);l.isBackwards?(p.sibling=a.child,a.child=p):(t=l.last,t!==null?t.sibling=p:a.child=p,l.last=p)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=nt(),t.sibling=null,r=sn.current,le(sn,h?r&1|2:r&1),pt&&Ii(a,l.treeForkCount),t):(qt(a),null);case 22:case 23:return oa(a),uh(),l=a.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(r&536870912)!==0&&(a.flags&128)===0&&(qt(a),a.subtreeFlags&6&&(a.flags|=8192)):qt(a),r=a.updateQueue,r!==null&&Bu(a,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==r&&(a.flags|=2048),t!==null&&se(_r),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),ki(hn),qt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function Hw(t,a){switch(Kf(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return ki(hn),we(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return st(a),null;case 31:if(a.memoizedState!==null){if(oa(a),a.alternate===null)throw Error(s(340));yr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(oa(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(s(340));yr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return se(sn),null;case 4:return we(),null;case 10:return ki(a.type),null;case 22:case 23:return oa(a),uh(),t!==null&&se(_r),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return ki(hn),null;case 25:return null;default:return null}}function kb(t,a){switch(Kf(a),a.tag){case 3:ki(hn),we();break;case 26:case 27:case 5:st(a);break;case 4:we();break;case 31:a.memoizedState!==null&&oa(a);break;case 13:oa(a);break;case 19:se(sn);break;case 10:ki(a.type);break;case 22:case 23:oa(a),uh(),t!==null&&se(_r);break;case 24:ki(hn)}}function Gl(t,a){try{var r=a.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var h=l.next;r=h;do{if((r.tag&t)===t){l=void 0;var p=r.create,x=r.inst;l=p(),x.destroy=l}r=r.next}while(r!==h)}}catch(S){Nt(a,a.return,S)}}function Es(t,a,r){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&t)===t){var x=l.inst,S=x.destroy;if(S!==void 0){x.destroy=void 0,h=a;var D=r,W=S;try{W()}catch(oe){Nt(h,D,oe)}}}l=l.next}while(l!==p)}}catch(oe){Nt(a,a.return,oe)}}function Ob(t){var a=t.updateQueue;if(a!==null){var r=t.stateNode;try{w0(a,r)}catch(l){Nt(t,t.return,l)}}}function Db(t,a,r){r.props=Tr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){Nt(t,a,l)}}function $l(t,a){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(h){Nt(t,a,h)}}function ci(t,a){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(h){Nt(t,a,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){Nt(t,a,h)}else r.current=null}function Mb(t){var a=t.type,r=t.memoizedProps,l=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(h){Nt(t,t.return,h)}}function Hh(t,a,r){try{var l=t.stateNode;uA(l,t.type,r,a),l[wn]=a}catch(h){Nt(t,t.return,h)}}function Pb(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Cs(t.type)||t.tag===4}function qh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Cs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fh(t,a,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(t),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=ka));else if(l!==4&&(l===27&&Cs(t.type)&&(r=t.stateNode,a=null),t=t.child,t!==null))for(Fh(t,a,r),t=t.sibling;t!==null;)Fh(t,a,r),t=t.sibling}function Hu(t,a,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?r.insertBefore(t,a):r.appendChild(t);else if(l!==4&&(l===27&&Cs(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Hu(t,a,r),t=t.sibling;t!==null;)Hu(t,a,r),t=t.sibling}function zb(t){var a=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,h=a.attributes;h.length;)a.removeAttributeNode(h[0]);On(a,l,r),a[un]=t,a[wn]=r}catch(p){Nt(t,t.return,p)}}var zi=!1,gn=!1,Gh=!1,Vb=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function qw(t,a){if(t=t.containerInfo,fp=cd,t=Xg(t),Vf(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var h=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var x=0,S=-1,D=-1,W=0,oe=0,fe=t,Z=null;t:for(;;){for(var ne;fe!==r||h!==0&&fe.nodeType!==3||(S=x+h),fe!==p||l!==0&&fe.nodeType!==3||(D=x+l),fe.nodeType===3&&(x+=fe.nodeValue.length),(ne=fe.firstChild)!==null;)Z=fe,fe=ne;for(;;){if(fe===t)break t;if(Z===r&&++W===h&&(S=x),Z===p&&++oe===l&&(D=x),(ne=fe.nextSibling)!==null)break;fe=Z,Z=fe.parentNode}fe=ne}r=S===-1||D===-1?null:{start:S,end:D}}else r=null}r=r||{start:0,end:0}}else r=null;for(hp={focusedElem:t,selectionRange:r},cd=!1,Sn=a;Sn!==null;)if(a=Sn,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Sn=t;else for(;Sn!==null;){switch(a=Sn,p=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)h=t[r],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,r=a,h=p.memoizedProps,p=p.memoizedState,l=r.stateNode;try{var ke=Tr(r.type,h);t=l.getSnapshotBeforeUpdate(ke,p),l.__reactInternalSnapshotBeforeUpdate=t}catch(Be){Nt(r,r.return,Be)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,r=t.nodeType,r===9)gp(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":gp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=a.sibling,t!==null){t.return=a.return,Sn=t;break}Sn=a.return}}function Lb(t,a,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:Li(t,r),l&4&&Gl(5,r);break;case 1:if(Li(t,r),l&4)if(t=r.stateNode,a===null)try{t.componentDidMount()}catch(x){Nt(r,r.return,x)}else{var h=Tr(r.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(h,a,t.__reactInternalSnapshotBeforeUpdate)}catch(x){Nt(r,r.return,x)}}l&64&&Ob(r),l&512&&$l(r,r.return);break;case 3:if(Li(t,r),l&64&&(t=r.updateQueue,t!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{w0(t,a)}catch(x){Nt(r,r.return,x)}}break;case 27:a===null&&l&4&&zb(r);case 26:case 5:Li(t,r),a===null&&l&4&&Mb(r),l&512&&$l(r,r.return);break;case 12:Li(t,r);break;case 31:Li(t,r),l&4&&Hb(t,r);break;case 13:Li(t,r),l&4&&qb(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=Ww.bind(null,r),yA(t,r))));break;case 22:if(l=r.memoizedState!==null||zi,!l){a=a!==null&&a.memoizedState!==null||gn,h=zi;var p=gn;zi=l,(gn=a)&&!p?Ui(t,r,(r.subtreeFlags&8772)!==0):Li(t,r),zi=h,gn=p}break;case 30:break;default:Li(t,r)}}function Ub(t){var a=t.alternate;a!==null&&(t.alternate=null,Ub(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Qr(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Yt=null,Qn=!1;function Vi(t,a,r){for(r=r.child;r!==null;)Bb(t,a,r),r=r.sibling}function Bb(t,a,r){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(vt,r)}catch{}switch(r.tag){case 26:gn||ci(r,a),Vi(t,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:gn||ci(r,a);var l=Yt,h=Qn;Cs(r.type)&&(Yt=r.stateNode,Qn=!1),Vi(t,a,r),tc(r.stateNode),Yt=l,Qn=h;break;case 5:gn||ci(r,a);case 6:if(l=Yt,h=Qn,Yt=null,Vi(t,a,r),Yt=l,Qn=h,Yt!==null)if(Qn)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(r.stateNode)}catch(p){Nt(r,a,p)}else try{Yt.removeChild(r.stateNode)}catch(p){Nt(r,a,p)}break;case 18:Yt!==null&&(Qn?(t=Yt,Oy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Oo(t)):Oy(Yt,r.stateNode));break;case 4:l=Yt,h=Qn,Yt=r.stateNode.containerInfo,Qn=!0,Vi(t,a,r),Yt=l,Qn=h;break;case 0:case 11:case 14:case 15:Es(2,r,a),gn||Es(4,r,a),Vi(t,a,r);break;case 1:gn||(ci(r,a),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Db(r,a,l)),Vi(t,a,r);break;case 21:Vi(t,a,r);break;case 22:gn=(l=gn)||r.memoizedState!==null,Vi(t,a,r),gn=l;break;default:Vi(t,a,r)}}function Hb(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Oo(t)}catch(r){Nt(a,a.return,r)}}}function qb(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Oo(t)}catch(r){Nt(a,a.return,r)}}function Fw(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Vb),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Vb),a;default:throw Error(s(435,t.tag))}}function qu(t,a){var r=Fw(t);a.forEach(function(l){if(!r.has(l)){r.add(l);var h=Zw.bind(null,t,l);l.then(h,h)}})}function Kn(t,a){var r=a.deletions;if(r!==null)for(var l=0;l<r.length;l++){var h=r[l],p=t,x=a,S=x;e:for(;S!==null;){switch(S.tag){case 27:if(Cs(S.type)){Yt=S.stateNode,Qn=!1;break e}break;case 5:Yt=S.stateNode,Qn=!1;break e;case 3:case 4:Yt=S.stateNode.containerInfo,Qn=!0;break e}S=S.return}if(Yt===null)throw Error(s(160));Bb(p,x,h),Yt=null,Qn=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Fb(a,t),a=a.sibling}var Va=null;function Fb(t,a){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Kn(a,t),Xn(t),l&4&&(Es(3,t,t.return),Gl(3,t),Es(5,t,t.return));break;case 1:Kn(a,t),Xn(t),l&512&&(gn||r===null||ci(r,r.return)),l&64&&zi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var h=Va;if(Kn(a,t),Xn(t),l&512&&(gn||r===null||ci(r,r.return)),l&4){var p=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){e:{l=t.type,r=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":p=h.getElementsByTagName("title")[0],(!p||p[Ka]||p[un]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(l),h.head.insertBefore(p,h.querySelector("head > title"))),On(p,l,r),p[un]=t,dn(p),l=p;break e;case"link":var x=Fy("link","href",h).get(l+(r.href||""));if(x){for(var S=0;S<x.length;S++)if(p=x[S],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){x.splice(S,1);break t}}p=h.createElement(l),On(p,l,r),h.head.appendChild(p);break;case"meta":if(x=Fy("meta","content",h).get(l+(r.content||""))){for(S=0;S<x.length;S++)if(p=x[S],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){x.splice(S,1);break t}}p=h.createElement(l),On(p,l,r),h.head.appendChild(p);break;default:throw Error(s(468,l))}p[un]=t,dn(p),l=p}t.stateNode=l}else Gy(h,t.type,t.stateNode);else t.stateNode=qy(h,l,t.memoizedProps);else p!==l?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,l===null?Gy(h,t.type,t.stateNode):qy(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Hh(t,t.memoizedProps,r.memoizedProps)}break;case 27:Kn(a,t),Xn(t),l&512&&(gn||r===null||ci(r,r.return)),r!==null&&l&4&&Hh(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Kn(a,t),Xn(t),l&512&&(gn||r===null||ci(r,r.return)),t.flags&32){h=t.stateNode;try{Yn(h,"")}catch(ke){Nt(t,t.return,ke)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Hh(t,h,r!==null?r.memoizedProps:h)),l&1024&&(Gh=!0);break;case 6:if(Kn(a,t),Xn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(ke){Nt(t,t.return,ke)}}break;case 3:if(sd=null,h=Va,Va=ad(a.containerInfo),Kn(a,t),Va=h,Xn(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{Oo(a.containerInfo)}catch(ke){Nt(t,t.return,ke)}Gh&&(Gh=!1,Gb(t));break;case 4:l=Va,Va=ad(t.stateNode.containerInfo),Kn(a,t),Xn(t),Va=l;break;case 12:Kn(a,t),Xn(t);break;case 31:Kn(a,t),Xn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,qu(t,l)));break;case 13:Kn(a,t),Xn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Gu=nt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,qu(t,l)));break;case 22:h=t.memoizedState!==null;var D=r!==null&&r.memoizedState!==null,W=zi,oe=gn;if(zi=W||h,gn=oe||D,Kn(a,t),gn=oe,zi=W,Xn(t),l&8192)e:for(a=t.stateNode,a._visibility=h?a._visibility&-2:a._visibility|1,h&&(r===null||D||zi||gn||Nr(t)),r=null,a=t;;){if(a.tag===5||a.tag===26){if(r===null){D=r=a;try{if(p=D.stateNode,h)x=p.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{S=D.stateNode;var fe=D.memoizedProps.style,Z=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;S.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(ke){Nt(D,D.return,ke)}}}else if(a.tag===6){if(r===null){D=a;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(ke){Nt(D,D.return,ke)}}}else if(a.tag===18){if(r===null){D=a;try{var ne=D.stateNode;h?Dy(ne,!0):Dy(D.stateNode,!1)}catch(ke){Nt(D,D.return,ke)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,qu(t,r))));break;case 19:Kn(a,t),Xn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,qu(t,l)));break;case 30:break;case 21:break;default:Kn(a,t),Xn(t)}}function Xn(t){var a=t.flags;if(a&2){try{for(var r,l=t.return;l!==null;){if(Pb(l)){r=l;break}l=l.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var h=r.stateNode,p=qh(t);Hu(t,p,h);break;case 5:var x=r.stateNode;r.flags&32&&(Yn(x,""),r.flags&=-33);var S=qh(t);Hu(t,S,x);break;case 3:case 4:var D=r.stateNode.containerInfo,W=qh(t);Fh(t,W,D);break;default:throw Error(s(161))}}catch(oe){Nt(t,t.return,oe)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function Gb(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;Gb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Li(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Lb(t,a.alternate,a),a=a.sibling}function Nr(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Es(4,a,a.return),Nr(a);break;case 1:ci(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&Db(a,a.return,r),Nr(a);break;case 27:tc(a.stateNode);case 26:case 5:ci(a,a.return),Nr(a);break;case 22:a.memoizedState===null&&Nr(a);break;case 30:Nr(a);break;default:Nr(a)}t=t.sibling}}function Ui(t,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,h=t,p=a,x=p.flags;switch(p.tag){case 0:case 11:case 15:Ui(h,p,r),Gl(4,p);break;case 1:if(Ui(h,p,r),l=p,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(W){Nt(l,l.return,W)}if(l=p,h=l.updateQueue,h!==null){var S=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)E0(D[h],S)}catch(W){Nt(l,l.return,W)}}r&&x&64&&Ob(p),$l(p,p.return);break;case 27:zb(p);case 26:case 5:Ui(h,p,r),r&&l===null&&x&4&&Mb(p),$l(p,p.return);break;case 12:Ui(h,p,r);break;case 31:Ui(h,p,r),r&&x&4&&Hb(h,p);break;case 13:Ui(h,p,r),r&&x&4&&qb(h,p);break;case 22:p.memoizedState===null&&Ui(h,p,r),$l(p,p.return);break;case 30:break;default:Ui(h,p,r)}a=a.sibling}}function $h(t,a){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&kl(r))}function Yh(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&kl(t))}function La(t,a,r,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)$b(t,a,r,l),a=a.sibling}function $b(t,a,r,l){var h=a.flags;switch(a.tag){case 0:case 11:case 15:La(t,a,r,l),h&2048&&Gl(9,a);break;case 1:La(t,a,r,l);break;case 3:La(t,a,r,l),h&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&kl(t)));break;case 12:if(h&2048){La(t,a,r,l),t=a.stateNode;try{var p=a.memoizedProps,x=p.id,S=p.onPostCommit;typeof S=="function"&&S(x,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){Nt(a,a.return,D)}}else La(t,a,r,l);break;case 31:La(t,a,r,l);break;case 13:La(t,a,r,l);break;case 23:break;case 22:p=a.stateNode,x=a.alternate,a.memoizedState!==null?p._visibility&2?La(t,a,r,l):Yl(t,a):p._visibility&2?La(t,a,r,l):(p._visibility|=2,Eo(t,a,r,l,(a.subtreeFlags&10256)!==0||!1)),h&2048&&$h(x,a);break;case 24:La(t,a,r,l),h&2048&&Yh(a.alternate,a);break;default:La(t,a,r,l)}}function Eo(t,a,r,l,h){for(h=h&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=t,x=a,S=r,D=l,W=x.flags;switch(x.tag){case 0:case 11:case 15:Eo(p,x,S,D,h),Gl(8,x);break;case 23:break;case 22:var oe=x.stateNode;x.memoizedState!==null?oe._visibility&2?Eo(p,x,S,D,h):Yl(p,x):(oe._visibility|=2,Eo(p,x,S,D,h)),h&&W&2048&&$h(x.alternate,x);break;case 24:Eo(p,x,S,D,h),h&&W&2048&&Yh(x.alternate,x);break;default:Eo(p,x,S,D,h)}a=a.sibling}}function Yl(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=t,l=a,h=l.flags;switch(l.tag){case 22:Yl(r,l),h&2048&&$h(l.alternate,l);break;case 24:Yl(r,l),h&2048&&Yh(l.alternate,l);break;default:Yl(r,l)}a=a.sibling}}var Ql=8192;function wo(t,a,r){if(t.subtreeFlags&Ql)for(t=t.child;t!==null;)Yb(t,a,r),t=t.sibling}function Yb(t,a,r){switch(t.tag){case 26:wo(t,a,r),t.flags&Ql&&t.memoizedState!==null&&IA(r,Va,t.memoizedState,t.memoizedProps);break;case 5:wo(t,a,r);break;case 3:case 4:var l=Va;Va=ad(t.stateNode.containerInfo),wo(t,a,r),Va=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Ql,Ql=16777216,wo(t,a,r),Ql=l):wo(t,a,r));break;default:wo(t,a,r)}}function Qb(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Kl(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var l=a[r];Sn=l,Xb(l,t)}Qb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Kb(t),t=t.sibling}function Kb(t){switch(t.tag){case 0:case 11:case 15:Kl(t),t.flags&2048&&Es(9,t,t.return);break;case 3:Kl(t);break;case 12:Kl(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Fu(t)):Kl(t);break;default:Kl(t)}}function Fu(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var l=a[r];Sn=l,Xb(l,t)}Qb(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Es(8,a,a.return),Fu(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,Fu(a));break;default:Fu(a)}t=t.sibling}}function Xb(t,a){for(;Sn!==null;){var r=Sn;switch(r.tag){case 0:case 11:case 15:Es(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:kl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,Sn=l;else e:for(r=t;Sn!==null;){l=Sn;var h=l.sibling,p=l.return;if(Ub(l),l===r){Sn=null;break e}if(h!==null){h.return=p,Sn=h;break e}Sn=p}}}var Gw={getCacheForType:function(t){var a=jn(hn),r=a.data.get(t);return r===void 0&&(r=t(),a.data.set(t,r)),r},cacheSignal:function(){return jn(hn).controller.signal}},$w=typeof WeakMap=="function"?WeakMap:Map,Et=0,zt=null,ot=null,ct=0,Tt=0,la=null,ws=!1,Ao=!1,Qh=!1,Bi=0,tn=0,As=0,Rr=0,Kh=0,ca=0,So=0,Xl=null,Jn=null,Xh=!1,Gu=0,Jb=0,$u=1/0,Yu=null,Ss=null,vn=0,Ts=null,To=null,Hi=0,Jh=0,Wh=null,Wb=null,Jl=0,Zh=null;function ua(){return(Et&2)!==0&&ct!==0?ct&-ct:ee.T!==null?sp():Qc()}function Zb(){if(ca===0)if((ct&536870912)===0||pt){var t=q;q<<=1,(q&3932160)===0&&(q=262144),ca=t}else ca=536870912;return t=ra.current,t!==null&&(t.flags|=32),ca}function Wn(t,a,r){(t===zt&&(Tt===2||Tt===9)||t.cancelPendingCommit!==null)&&(No(t,0),Ns(t,ct,ca,!1)),Gt(t,r),((Et&2)===0||t!==zt)&&(t===zt&&((Et&2)===0&&(Rr|=r),tn===4&&Ns(t,ct,ca,!1)),ui(t))}function ey(t,a,r){if((Et&6)!==0)throw Error(s(327));var l=!r&&(a&127)===0&&(a&t.expiredLanes)===0||mt(t,a),h=l?Kw(t,a):tp(t,a,!0),p=l;do{if(h===0){Ao&&!l&&Ns(t,a,0,!1);break}else{if(r=t.current.alternate,p&&!Yw(r)){h=tp(t,a,!1),p=!1;continue}if(h===2){if(p=a,t.errorRecoveryDisabledLanes&p)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var S=t;h=Xl;var D=S.current.memoizedState.isDehydrated;if(D&&(No(S,x).flags|=256),x=tp(S,x,!1),x!==2){if(Qh&&!D){S.errorRecoveryDisabledLanes|=p,Rr|=p,h=4;break e}p=Jn,Jn=h,p!==null&&(Jn===null?Jn=p:Jn.push.apply(Jn,p))}h=x}if(p=!1,h!==2)continue}}if(h===1){No(t,0),Ns(t,a,0,!0);break}e:{switch(l=t,p=h,p){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Ns(l,a,ca,!ws);break e;case 2:Jn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(h=Gu+300-nt(),10<h)){if(Ns(l,a,ca,!ws),Ke(l,0,!0)!==0)break e;Hi=a,l.timeoutHandle=jy(ty.bind(null,l,r,Jn,Yu,Xh,a,ca,Rr,So,ws,p,"Throttled",-0,0),h);break e}ty(l,r,Jn,Yu,Xh,a,ca,Rr,So,ws,p,null,-0,0)}}break}while(!0);ui(t)}function ty(t,a,r,l,h,p,x,S,D,W,oe,fe,Z,ne){if(t.timeoutHandle=-1,fe=a.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ka},Yb(a,p,fe);var ke=(p&62914560)===p?Gu-nt():(p&4194048)===p?Jb-nt():0;if(ke=jA(fe,ke),ke!==null){Hi=p,t.cancelPendingCommit=ke(cy.bind(null,t,a,p,r,l,h,x,S,D,oe,fe,null,Z,ne)),Ns(t,p,x,!W);return}}cy(t,a,p,r,l,h,x,S,D)}function Yw(t){for(var a=t;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var h=r[l],p=h.getSnapshot;h=h.value;try{if(!ia(p(),h))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ns(t,a,r,l){a&=~Kh,a&=~Rr,t.suspendedLanes|=a,t.pingedLanes&=~a,l&&(t.warmLanes|=a),l=t.expirationTimes;for(var h=a;0<h;){var p=31-Pt(h),x=1<<p;l[p]=-1,h&=~x}r!==0&&Ya(t,r,a)}function Qu(){return(Et&6)===0?(Wl(0),!1):!0}function ep(){if(ot!==null){if(Tt===0)var t=ot.return;else t=ot,ji=xr=null,gh(t),bo=null,Dl=0,t=ot;for(;t!==null;)kb(t.alternate,t),t=t.return;ot=null}}function No(t,a){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,hA(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Hi=0,ep(),zt=t,ot=r=Ci(t.current,null),ct=a,Tt=0,la=null,ws=!1,Ao=mt(t,a),Qh=!1,So=ca=Kh=Rr=As=tn=0,Jn=Xl=null,Xh=!1,(a&8)!==0&&(a|=a&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=a;0<l;){var h=31-Pt(l),p=1<<h;a|=t[h],l&=~p}return Bi=a,mu(),r}function ny(t,a){tt=null,ee.H=Hl,a===go||a===wu?(a=y0(),Tt=3):a===ih?(a=y0(),Tt=4):Tt=a===kh?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,la=a,ot===null&&(tn=1,zu(t,xa(a,t.current)))}function ay(){var t=ra.current;return t===null?!0:(ct&4194048)===ct?wa===null:(ct&62914560)===ct||(ct&536870912)!==0?t===wa:!1}function iy(){var t=ee.H;return ee.H=Hl,t===null?Hl:t}function sy(){var t=ee.A;return ee.A=Gw,t}function Ku(){tn=4,ws||(ct&4194048)!==ct&&ra.current!==null||(Ao=!0),(As&134217727)===0&&(Rr&134217727)===0||zt===null||Ns(zt,ct,ca,!1)}function tp(t,a,r){var l=Et;Et|=2;var h=iy(),p=sy();(zt!==t||ct!==a)&&(Yu=null,No(t,a)),a=!1;var x=tn;e:do try{if(Tt!==0&&ot!==null){var S=ot,D=la;switch(Tt){case 8:ep(),x=6;break e;case 3:case 2:case 9:case 6:ra.current===null&&(a=!0);var W=Tt;if(Tt=0,la=null,Ro(t,S,D,W),r&&Ao){x=0;break e}break;default:W=Tt,Tt=0,la=null,Ro(t,S,D,W)}}Qw(),x=tn;break}catch(oe){ny(t,oe)}while(!0);return a&&t.shellSuspendCounter++,ji=xr=null,Et=l,ee.H=h,ee.A=p,ot===null&&(zt=null,ct=0,mu()),x}function Qw(){for(;ot!==null;)ry(ot)}function Kw(t,a){var r=Et;Et|=2;var l=iy(),h=sy();zt!==t||ct!==a?(Yu=null,$u=nt()+500,No(t,a)):Ao=mt(t,a);e:do try{if(Tt!==0&&ot!==null){a=ot;var p=la;t:switch(Tt){case 1:Tt=0,la=null,Ro(t,a,p,1);break;case 2:case 9:if(g0(p)){Tt=0,la=null,oy(a);break}a=function(){Tt!==2&&Tt!==9||zt!==t||(Tt=7),ui(t)},p.then(a,a);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:g0(p)?(Tt=0,la=null,oy(a)):(Tt=0,la=null,Ro(t,a,p,7));break;case 5:var x=null;switch(ot.tag){case 26:x=ot.memoizedState;case 5:case 27:var S=ot;if(x?$y(x):S.stateNode.complete){Tt=0,la=null;var D=S.sibling;if(D!==null)ot=D;else{var W=S.return;W!==null?(ot=W,Xu(W)):ot=null}break t}}Tt=0,la=null,Ro(t,a,p,5);break;case 6:Tt=0,la=null,Ro(t,a,p,6);break;case 8:ep(),tn=6;break e;default:throw Error(s(462))}}Xw();break}catch(oe){ny(t,oe)}while(!0);return ji=xr=null,ee.H=l,ee.A=h,Et=r,ot!==null?0:(zt=null,ct=0,mu(),tn)}function Xw(){for(;ot!==null&&!Le();)ry(ot)}function ry(t){var a=Ib(t.alternate,t,Bi);t.memoizedProps=t.pendingProps,a===null?Xu(t):ot=a}function oy(t){var a=t,r=a.alternate;switch(a.tag){case 15:case 0:a=Ab(r,a,a.pendingProps,a.type,void 0,ct);break;case 11:a=Ab(r,a,a.pendingProps,a.type.render,a.ref,ct);break;case 5:gh(a);default:kb(r,a),a=ot=s0(a,Bi),a=Ib(r,a,Bi)}t.memoizedProps=t.pendingProps,a===null?Xu(t):ot=a}function Ro(t,a,r,l){ji=xr=null,gh(a),bo=null,Dl=0;var h=a.return;try{if(Vw(t,h,a,r,ct)){tn=1,zu(t,xa(r,t.current)),ot=null;return}}catch(p){if(h!==null)throw ot=h,p;tn=1,zu(t,xa(r,t.current)),ot=null;return}a.flags&32768?(pt||l===1?t=!0:Ao||(ct&536870912)!==0?t=!1:(ws=t=!0,(l===2||l===9||l===3||l===6)&&(l=ra.current,l!==null&&l.tag===13&&(l.flags|=16384))),ly(a,t)):Xu(a)}function Xu(t){var a=t;do{if((a.flags&32768)!==0){ly(a,ws);return}t=a.return;var r=Bw(a.alternate,a,Bi);if(r!==null){ot=r;return}if(a=a.sibling,a!==null){ot=a;return}ot=a=t}while(a!==null);tn===0&&(tn=5)}function ly(t,a){do{var r=Hw(t.alternate,t);if(r!==null){r.flags&=32767,ot=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(t=t.sibling,t!==null)){ot=t;return}ot=t=r}while(t!==null);tn=6,ot=null}function cy(t,a,r,l,h,p,x,S,D){t.cancelPendingCommit=null;do Ju();while(vn!==0);if((Et&6)!==0)throw Error(s(327));if(a!==null){if(a===t.current)throw Error(s(177));if(p=a.lanes|a.childLanes,p|=qf,En(t,r,p,x,S,D),t===zt&&(ot=zt=null,ct=0),To=a,Ts=t,Hi=r,Jh=p,Wh=h,Wb=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,eA(Me,function(){return py(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=ee.T,ee.T=null,h=me.p,me.p=2,x=Et,Et|=4;try{qw(t,a,r)}finally{Et=x,me.p=h,ee.T=l}}vn=1,uy(),dy(),fy()}}function uy(){if(vn===1){vn=0;var t=Ts,a=To,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=ee.T,ee.T=null;var l=me.p;me.p=2;var h=Et;Et|=4;try{Fb(a,t);var p=hp,x=Xg(t.containerInfo),S=p.focusedElem,D=p.selectionRange;if(x!==S&&S&&S.ownerDocument&&Kg(S.ownerDocument.documentElement,S)){if(D!==null&&Vf(S)){var W=D.start,oe=D.end;if(oe===void 0&&(oe=W),"selectionStart"in S)S.selectionStart=W,S.selectionEnd=Math.min(oe,S.value.length);else{var fe=S.ownerDocument||document,Z=fe&&fe.defaultView||window;if(Z.getSelection){var ne=Z.getSelection(),ke=S.textContent.length,Be=Math.min(D.start,ke),Mt=D.end===void 0?Be:Math.min(D.end,ke);!ne.extend&&Be>Mt&&(x=Mt,Mt=Be,Be=x);var F=Qg(S,Be),L=Qg(S,Mt);if(F&&L&&(ne.rangeCount!==1||ne.anchorNode!==F.node||ne.anchorOffset!==F.offset||ne.focusNode!==L.node||ne.focusOffset!==L.offset)){var J=fe.createRange();J.setStart(F.node,F.offset),ne.removeAllRanges(),Be>Mt?(ne.addRange(J),ne.extend(L.node,L.offset)):(J.setEnd(L.node,L.offset),ne.addRange(J))}}}}for(fe=[],ne=S;ne=ne.parentNode;)ne.nodeType===1&&fe.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<fe.length;S++){var ce=fe[S];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}cd=!!fp,hp=fp=null}finally{Et=h,me.p=l,ee.T=r}}t.current=a,vn=2}}function dy(){if(vn===2){vn=0;var t=Ts,a=To,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=ee.T,ee.T=null;var l=me.p;me.p=2;var h=Et;Et|=4;try{Lb(t,a.alternate,a)}finally{Et=h,me.p=l,ee.T=r}}vn=3}}function fy(){if(vn===4||vn===3){vn=0,It();var t=Ts,a=To,r=Hi,l=Wb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?vn=5:(vn=0,To=Ts=null,hy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ss=null),Si(r),a=a.stateNode,rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(vt,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=ee.T,h=me.p,me.p=2,ee.T=null;try{for(var p=t.onRecoverableError,x=0;x<l.length;x++){var S=l[x];p(S.value,{componentStack:S.stack})}}finally{ee.T=a,me.p=h}}(Hi&3)!==0&&Ju(),ui(t),h=t.pendingLanes,(r&261930)!==0&&(h&42)!==0?t===Zh?Jl++:(Jl=0,Zh=t):Jl=0,Wl(0)}}function hy(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,kl(a)))}function Ju(){return uy(),dy(),fy(),py()}function py(){if(vn!==5)return!1;var t=Ts,a=Jh;Jh=0;var r=Si(Hi),l=ee.T,h=me.p;try{me.p=32>r?32:r,ee.T=null,r=Wh,Wh=null;var p=Ts,x=Hi;if(vn=0,To=Ts=null,Hi=0,(Et&6)!==0)throw Error(s(331));var S=Et;if(Et|=4,Kb(p.current),$b(p,p.current,x,r),Et=S,Wl(0,!1),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(vt,p)}catch{}return!0}finally{me.p=h,ee.T=l,hy(t,a)}}function my(t,a,r){a=xa(r,a),a=jh(t.stateNode,a,2),t=xs(t,a,2),t!==null&&(Gt(t,2),ui(t))}function Nt(t,a,r){if(t.tag===3)my(t,t,r);else for(;a!==null;){if(a.tag===3){my(a,t,r);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ss===null||!Ss.has(l))){t=xa(r,t),r=gb(2),l=xs(a,r,2),l!==null&&(bb(r,l,a,t),Gt(l,2),ui(l));break}}a=a.return}}function np(t,a,r){var l=t.pingCache;if(l===null){l=t.pingCache=new $w;var h=new Set;l.set(a,h)}else h=l.get(a),h===void 0&&(h=new Set,l.set(a,h));h.has(r)||(Qh=!0,h.add(r),t=Jw.bind(null,t,a,r),a.then(t,t))}function Jw(t,a,r){var l=t.pingCache;l!==null&&l.delete(a),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,zt===t&&(ct&r)===r&&(tn===4||tn===3&&(ct&62914560)===ct&&300>nt()-Gu?(Et&2)===0&&No(t,0):Kh|=r,So===ct&&(So=0)),ui(t)}function gy(t,a){a===0&&(a=Ye()),t=gr(t,a),t!==null&&(Gt(t,a),ui(t))}function Ww(t){var a=t.memoizedState,r=0;a!==null&&(r=a.retryLane),gy(t,r)}function Zw(t,a){var r=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(r=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(a),gy(t,r)}function eA(t,a){return Se(t,a)}var Wu=null,Co=null,ap=!1,Zu=!1,ip=!1,Rs=0;function ui(t){t!==Co&&t.next===null&&(Co===null?Wu=Co=t:Co=Co.next=t),Zu=!0,ap||(ap=!0,nA())}function Wl(t,a){if(!ip&&Zu){ip=!0;do for(var r=!1,l=Wu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var p=0;else{var x=l.suspendedLanes,S=l.pingedLanes;p=(1<<31-Pt(42|t)+1)-1,p&=h&~(x&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,vy(l,p))}else p=ct,p=Ke(l,l===zt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||mt(l,p)||(r=!0,vy(l,p));l=l.next}while(r);ip=!1}}function tA(){by()}function by(){Zu=ap=!1;var t=0;Rs!==0&&fA()&&(t=Rs);for(var a=nt(),r=null,l=Wu;l!==null;){var h=l.next,p=yy(l,a);p===0?(l.next=null,r===null?Wu=h:r.next=h,h===null&&(Co=r)):(r=l,(t!==0||(p&3)!==0)&&(Zu=!0)),l=h}vn!==0&&vn!==5||Wl(t),Rs!==0&&(Rs=0)}function yy(t,a){for(var r=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var x=31-Pt(p),S=1<<x,D=h[x];D===-1?((S&r)===0||(S&l)!==0)&&(h[x]=jt(S,a)):D<=a&&(t.expiredLanes|=S),p&=~S}if(a=zt,r=ct,r=Ke(t,t===a?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===a&&(Tt===2||Tt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ze(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||mt(t,r)){if(a=r&-r,a===t.callbackPriority)return a;switch(l!==null&&Ze(l),Si(r)){case 2:case 8:r=Ce;break;case 32:r=Me;break;case 268435456:r=_e;break;default:r=Me}return l=xy.bind(null,t),r=Se(r,l),t.callbackPriority=a,t.callbackNode=r,a}return l!==null&&l!==null&&Ze(l),t.callbackPriority=2,t.callbackNode=null,2}function xy(t,a){if(vn!==0&&vn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Ju()&&t.callbackNode!==r)return null;var l=ct;return l=Ke(t,t===zt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ey(t,l,a),yy(t,nt()),t.callbackNode!=null&&t.callbackNode===r?xy.bind(null,t):null)}function vy(t,a){if(Ju())return null;ey(t,a,!0)}function nA(){pA(function(){(Et&6)!==0?Se(de,tA):by()})}function sp(){if(Rs===0){var t=po;t===0&&(t=H,H<<=1,(H&261888)===0&&(H=256)),Rs=t}return Rs}function _y(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Wr(""+t)}function Ey(t,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,t.id&&r.setAttribute("form",t.id),a.parentNode.insertBefore(r,a),t=new FormData(t),r.parentNode.removeChild(r),t}function aA(t,a,r,l,h){if(a==="submit"&&r&&r.stateNode===h){var p=_y((h[wn]||null).action),x=l.submitter;x&&(a=(a=x[wn]||null)?_y(a.formAction):x.getAttribute("formAction"),a!==null&&(p=a,x=null));var S=new ai("action","action",null,l,h);t.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Rs!==0){var D=x?Ey(h,x):new FormData(h);Sh(r,{pending:!0,data:D,method:h.method,action:p},null,D)}}else typeof p=="function"&&(S.preventDefault(),D=x?Ey(h,x):new FormData(h),Sh(r,{pending:!0,data:D,method:h.method,action:p},p,D))},currentTarget:h}]})}}for(var rp=0;rp<Hf.length;rp++){var op=Hf[rp],iA=op.toLowerCase(),sA=op[0].toUpperCase()+op.slice(1);za(iA,"on"+sA)}za(Zg,"onAnimationEnd"),za(e0,"onAnimationIteration"),za(t0,"onAnimationStart"),za("dblclick","onDoubleClick"),za("focusin","onFocus"),za("focusout","onBlur"),za(_w,"onTransitionRun"),za(Ew,"onTransitionStart"),za(ww,"onTransitionCancel"),za(n0,"onTransitionEnd"),Za("onMouseEnter",["mouseout","mouseover"]),Za("onMouseLeave",["mouseout","mouseover"]),Za("onPointerEnter",["pointerout","pointerover"]),Za("onPointerLeave",["pointerout","pointerover"]),Wa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zl));function wy(t,a){a=(a&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],h=l.event;l=l.listeners;e:{var p=void 0;if(a)for(var x=l.length-1;0<=x;x--){var S=l[x],D=S.instance,W=S.currentTarget;if(S=S.listener,D!==p&&h.isPropagationStopped())break e;p=S,h.currentTarget=W;try{p(h)}catch(oe){pu(oe)}h.currentTarget=null,p=D}else for(x=0;x<l.length;x++){if(S=l[x],D=S.instance,W=S.currentTarget,S=S.listener,D!==p&&h.isPropagationStopped())break e;p=S,h.currentTarget=W;try{p(h)}catch(oe){pu(oe)}h.currentTarget=null,p=D}}}}function lt(t,a){var r=a[Yr];r===void 0&&(r=a[Yr]=new Set);var l=t+"__bubble";r.has(l)||(Ay(a,t,2,!1),r.add(l))}function lp(t,a,r){var l=0;a&&(l|=4),Ay(r,t,l,a)}var ed="_reactListening"+Math.random().toString(36).slice(2);function cp(t){if(!t[ed]){t[ed]=!0,dl.forEach(function(r){r!=="selectionchange"&&(rA.has(r)||lp(r,!1,t),lp(r,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[ed]||(a[ed]=!0,lp("selectionchange",!1,a))}}function Ay(t,a,r,l){switch(Zy(a)){case 2:var h=DA;break;case 8:h=MA;break;default:h=Ap}r=h.bind(null,a,r,t),h=void 0,!lr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(a,r,{capture:!0,passive:h}):t.addEventListener(a,r,!0):h!==void 0?t.addEventListener(a,r,{passive:h}):t.addEventListener(a,r,!1)}function up(t,a,r,l,h){var p=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var S=l.stateNode.containerInfo;if(S===h)break;if(x===4)for(x=l.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===h)return;x=x.return}for(;S!==null;){if(x=Xa(S),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){l=p=x;continue e}S=S.parentNode}}l=l.return}cs(function(){var W=p,oe=ma(r),fe=[];e:{var Z=a0.get(t);if(Z!==void 0){var ne=ai,ke=t;switch(t){case"keypress":if(ur(r)===0)break e;case"keydown":case"keyup":ne=du;break;case"focusin":ke="focus",ne=fr;break;case"focusout":ke="blur",ne=fr;break;case"beforeblur":case"afterblur":ne=fr;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Al;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=nu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=y;break;case Zg:case e0:case t0:ne=iu;break;case n0:ne=R;break;case"scroll":case"scrollend":ne=wl;break;case"wheel":ne=te;break;case"copy":case"cut":case"paste":ne=su;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Ri;break;case"toggle":case"beforetoggle":ne=et}var Be=(a&4)!==0,Mt=!Be&&(t==="scroll"||t==="scrollend"),F=Be?Z!==null?Z+"Capture":null:Z;Be=[];for(var L=W,J;L!==null;){var ce=L;if(J=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||J===null||F===null||(ce=Oa(L,F),ce!=null&&Be.push(ec(L,ce,J))),Mt)break;L=L.return}0<Be.length&&(Z=new ne(Z,ke,null,r,oe),fe.push({event:Z,listeners:Be}))}}if((a&7)===0){e:{if(Z=t==="mouseover"||t==="pointerover",ne=t==="mouseout"||t==="pointerout",Z&&r!==vl&&(ke=r.relatedTarget||r.fromElement)&&(Xa(ke)||ke[Qa]))break e;if((ne||Z)&&(Z=oe.window===oe?oe:(Z=oe.ownerDocument)?Z.defaultView||Z.parentWindow:window,ne?(ke=r.relatedTarget||r.toElement,ne=W,ke=ke?Xa(ke):null,ke!==null&&(Mt=u(ke),Be=ke.tag,ke!==Mt||Be!==5&&Be!==27&&Be!==6)&&(ke=null)):(ne=null,ke=W),ne!==ke)){if(Be=Al,ce="onMouseLeave",F="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(Be=Ri,ce="onPointerLeave",F="onPointerEnter",L="pointer"),Mt=ne==null?Z:na(ne),J=ke==null?Z:na(ke),Z=new Be(ce,L+"leave",ne,r,oe),Z.target=Mt,Z.relatedTarget=J,ce=null,Xa(oe)===W&&(Be=new Be(F,L+"enter",ke,r,oe),Be.target=J,Be.relatedTarget=Mt,ce=Be),Mt=ce,ne&&ke)t:{for(Be=oA,F=ne,L=ke,J=0,ce=F;ce;ce=Be(ce))J++;ce=0;for(var Pe=L;Pe;Pe=Be(Pe))ce++;for(;0<J-ce;)F=Be(F),J--;for(;0<ce-J;)L=Be(L),ce--;for(;J--;){if(F===L||L!==null&&F===L.alternate){Be=F;break t}F=Be(F),L=Be(L)}Be=null}else Be=null;ne!==null&&Sy(fe,Z,ne,Be,!1),ke!==null&&Mt!==null&&Sy(fe,Mt,ke,Be,!0)}}e:{if(Z=W?na(W):window,ne=Z.nodeName&&Z.nodeName.toLowerCase(),ne==="select"||ne==="input"&&Z.type==="file")var yt=Hg;else if(Ug(Z))if(qg)yt=yw;else{yt=gw;var Oe=mw}else ne=Z.nodeName,!ne||ne.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?W&&Jr(W.elementType)&&(yt=Hg):yt=bw;if(yt&&(yt=yt(t,W))){Bg(fe,yt,r,oe);break e}Oe&&Oe(t,Z,W),t==="focusout"&&W&&Z.type==="number"&&W.memoizedProps.value!=null&&bl(Z,"number",Z.value)}switch(Oe=W?na(W):window,t){case"focusin":(Ug(Oe)||Oe.contentEditable==="true")&&(so=Oe,Lf=W,Cl=null);break;case"focusout":Cl=Lf=so=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,Jg(fe,r,oe);break;case"selectionchange":if(vw)break;case"keydown":case"keyup":Jg(fe,r,oe)}var at;if(_t)e:{switch(t){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else io?hr(t,r)&&(ut="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(ut="onCompositionStart");ut&&(ri&&r.locale!=="ko"&&(io||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&io&&(at=El()):(ni=oe,_l="value"in ni?ni.value:ni.textContent,io=!0)),Oe=td(W,ut),0<Oe.length&&(ut=new si(ut,t,null,r,oe),fe.push({event:ut,listeners:Oe}),at?ut.data=at:(at=ao(r),at!==null&&(ut.data=at)))),(at=ba?dw(t,r):fw(t,r))&&(ut=td(W,"onBeforeInput"),0<ut.length&&(Oe=new si("onBeforeInput","beforeinput",null,r,oe),fe.push({event:Oe,listeners:ut}),Oe.data=at)),aA(fe,t,W,r,oe)}wy(fe,a)})}function ec(t,a,r){return{instance:t,listener:a,currentTarget:r}}function td(t,a){for(var r=a+"Capture",l=[];t!==null;){var h=t,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=Oa(t,r),h!=null&&l.unshift(ec(t,h,p)),h=Oa(t,a),h!=null&&l.push(ec(t,h,p))),t.tag===3)return l;t=t.return}return[]}function oA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Sy(t,a,r,l,h){for(var p=a._reactName,x=[];r!==null&&r!==l;){var S=r,D=S.alternate,W=S.stateNode;if(S=S.tag,D!==null&&D===l)break;S!==5&&S!==26&&S!==27||W===null||(D=W,h?(W=Oa(r,p),W!=null&&x.unshift(ec(r,W,D))):h||(W=Oa(r,p),W!=null&&x.push(ec(r,W,D)))),r=r.return}x.length!==0&&t.push({event:a,listeners:x})}var lA=/\r\n?/g,cA=/\u0000|\uFFFD/g;function Ty(t){return(typeof t=="string"?t:""+t).replace(lA,`
`).replace(cA,"")}function Ny(t,a){return a=Ty(a),Ty(t)===a}function Dt(t,a,r,l,h,p){switch(r){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||Yn(t,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&Yn(t,""+l);break;case"className":aa(t,"class",l);break;case"tabIndex":aa(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":aa(t,r,l);break;case"style":xl(t,l,p);break;case"data":if(a!=="object"){aa(t,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=Wr(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(a!=="input"&&Dt(t,a,"name",h.name,h,null),Dt(t,a,"formEncType",h.formEncType,h,null),Dt(t,a,"formMethod",h.formMethod,h,null),Dt(t,a,"formTarget",h.formTarget,h,null)):(Dt(t,a,"encType",h.encType,h,null),Dt(t,a,"method",h.method,h,null),Dt(t,a,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=Wr(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=ka);break;case"onScroll":l!=null&&lt("scroll",t);break;case"onScrollEnd":l!=null&&lt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=Wr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":lt("beforetoggle",t),lt("toggle",t),Kr(t,"popover",l);break;case"xlinkActuate":fn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":fn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":fn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":fn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":fn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":fn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":fn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":fn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":fn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Kr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=tu.get(r)||r,Kr(t,r,l))}}function dp(t,a,r,l,h,p){switch(r){case"style":xl(t,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=r}}break;case"children":typeof l=="string"?Yn(t,l):(typeof l=="number"||typeof l=="bigint")&&Yn(t,""+l);break;case"onScroll":l!=null&&lt("scroll",t);break;case"onScrollEnd":l!=null&&lt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ka);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fl.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),a=r.slice(2,h?r.length-7:void 0),p=t[wn]||null,p=p!=null?p[r]:null,typeof p=="function"&&t.removeEventListener(a,p,h),typeof l=="function")){typeof p!="function"&&p!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(a,l,h);break e}r in t?t[r]=l:l===!0?t.setAttribute(r,""):Kr(t,r,l)}}}function On(t,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lt("error",t),lt("load",t);var l=!1,h=!1,p;for(p in r)if(r.hasOwnProperty(p)){var x=r[p];if(x!=null)switch(p){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Dt(t,a,p,x,r,null)}}h&&Dt(t,a,"srcSet",r.srcSet,r,null),l&&Dt(t,a,"src",r.src,r,null);return;case"input":lt("invalid",t);var S=p=x=h=null,D=null,W=null;for(l in r)if(r.hasOwnProperty(l)){var oe=r[l];if(oe!=null)switch(l){case"name":h=oe;break;case"type":x=oe;break;case"checked":D=oe;break;case"defaultChecked":W=oe;break;case"value":p=oe;break;case"defaultValue":S=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(137,a));break;default:Dt(t,a,l,oe,r,null)}}Wc(t,p,S,D,W,x,h,!1);return;case"select":lt("invalid",t),l=x=p=null;for(h in r)if(r.hasOwnProperty(h)&&(S=r[h],S!=null))switch(h){case"value":p=S;break;case"defaultValue":x=S;break;case"multiple":l=S;default:Dt(t,a,h,S,r,null)}a=p,r=x,t.multiple=!!l,a!=null?ss(t,!!l,a,!1):r!=null&&ss(t,!!l,r,!0);return;case"textarea":lt("invalid",t),p=h=l=null;for(x in r)if(r.hasOwnProperty(x)&&(S=r[x],S!=null))switch(x){case"value":l=S;break;case"defaultValue":h=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:Dt(t,a,x,S,r,null)}rs(t,l,h,p);return;case"option":for(D in r)r.hasOwnProperty(D)&&(l=r[D],l!=null)&&(D==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":Dt(t,a,D,l,r,null));return;case"dialog":lt("beforetoggle",t),lt("toggle",t),lt("cancel",t),lt("close",t);break;case"iframe":case"object":lt("load",t);break;case"video":case"audio":for(l=0;l<Zl.length;l++)lt(Zl[l],t);break;case"image":lt("error",t),lt("load",t);break;case"details":lt("toggle",t);break;case"embed":case"source":case"link":lt("error",t),lt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in r)if(r.hasOwnProperty(W)&&(l=r[W],l!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Dt(t,a,W,l,r,null)}return;default:if(Jr(a)){for(oe in r)r.hasOwnProperty(oe)&&(l=r[oe],l!==void 0&&dp(t,a,oe,l,r,void 0));return}}for(S in r)r.hasOwnProperty(S)&&(l=r[S],l!=null&&Dt(t,a,S,l,r,null))}function uA(t,a,r,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,x=null,S=null,D=null,W=null,oe=null;for(ne in r){var fe=r[ne];if(r.hasOwnProperty(ne)&&fe!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":D=fe;default:l.hasOwnProperty(ne)||Dt(t,a,ne,null,l,fe)}}for(var Z in l){var ne=l[Z];if(fe=r[Z],l.hasOwnProperty(Z)&&(ne!=null||fe!=null))switch(Z){case"type":p=ne;break;case"name":h=ne;break;case"checked":W=ne;break;case"defaultChecked":oe=ne;break;case"value":x=ne;break;case"defaultValue":S=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,a));break;default:ne!==fe&&Dt(t,a,Z,ne,l,fe)}}Xr(t,x,S,D,W,oe,p,h);return;case"select":ne=x=S=Z=null;for(p in r)if(D=r[p],r.hasOwnProperty(p)&&D!=null)switch(p){case"value":break;case"multiple":ne=D;default:l.hasOwnProperty(p)||Dt(t,a,p,null,l,D)}for(h in l)if(p=l[h],D=r[h],l.hasOwnProperty(h)&&(p!=null||D!=null))switch(h){case"value":Z=p;break;case"defaultValue":S=p;break;case"multiple":x=p;default:p!==D&&Dt(t,a,h,p,l,D)}a=S,r=x,l=ne,Z!=null?ss(t,!!r,Z,!1):!!l!=!!r&&(a!=null?ss(t,!!r,a,!0):ss(t,!!r,r?[]:"",!1));return;case"textarea":ne=Z=null;for(S in r)if(h=r[S],r.hasOwnProperty(S)&&h!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Dt(t,a,S,null,l,h)}for(x in l)if(h=l[x],p=r[x],l.hasOwnProperty(x)&&(h!=null||p!=null))switch(x){case"value":Z=h;break;case"defaultValue":ne=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==p&&Dt(t,a,x,h,l,p)}Zc(t,Z,ne);return;case"option":for(var ke in r)Z=r[ke],r.hasOwnProperty(ke)&&Z!=null&&!l.hasOwnProperty(ke)&&(ke==="selected"?t.selected=!1:Dt(t,a,ke,null,l,Z));for(D in l)Z=l[D],ne=r[D],l.hasOwnProperty(D)&&Z!==ne&&(Z!=null||ne!=null)&&(D==="selected"?t.selected=Z&&typeof Z!="function"&&typeof Z!="symbol":Dt(t,a,D,Z,l,ne));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in r)Z=r[Be],r.hasOwnProperty(Be)&&Z!=null&&!l.hasOwnProperty(Be)&&Dt(t,a,Be,null,l,Z);for(W in l)if(Z=l[W],ne=r[W],l.hasOwnProperty(W)&&Z!==ne&&(Z!=null||ne!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,a));break;default:Dt(t,a,W,Z,l,ne)}return;default:if(Jr(a)){for(var Mt in r)Z=r[Mt],r.hasOwnProperty(Mt)&&Z!==void 0&&!l.hasOwnProperty(Mt)&&dp(t,a,Mt,void 0,l,Z);for(oe in l)Z=l[oe],ne=r[oe],!l.hasOwnProperty(oe)||Z===ne||Z===void 0&&ne===void 0||dp(t,a,oe,Z,l,ne);return}}for(var F in r)Z=r[F],r.hasOwnProperty(F)&&Z!=null&&!l.hasOwnProperty(F)&&Dt(t,a,F,null,l,Z);for(fe in l)Z=l[fe],ne=r[fe],!l.hasOwnProperty(fe)||Z===ne||Z==null&&ne==null||Dt(t,a,fe,Z,l,ne)}function Ry(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dA(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var h=r[l],p=h.transferSize,x=h.initiatorType,S=h.duration;if(p&&S&&Ry(x)){for(x=0,S=h.responseEnd,l+=1;l<r.length;l++){var D=r[l],W=D.startTime;if(W>S)break;var oe=D.transferSize,fe=D.initiatorType;oe&&Ry(fe)&&(D=D.responseEnd,x+=oe*(D<S?1:(S-W)/(D-W)))}if(--l,a+=8*(p+x)/(h.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var fp=null,hp=null;function nd(t){return t.nodeType===9?t:t.ownerDocument}function Cy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Iy(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function pp(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var mp=null;function fA(){var t=window.event;return t&&t.type==="popstate"?t===mp?!1:(mp=t,!0):(mp=null,!1)}var jy=typeof setTimeout=="function"?setTimeout:void 0,hA=typeof clearTimeout=="function"?clearTimeout:void 0,ky=typeof Promise=="function"?Promise:void 0,pA=typeof queueMicrotask=="function"?queueMicrotask:typeof ky<"u"?function(t){return ky.resolve(null).then(t).catch(mA)}:jy;function mA(t){setTimeout(function(){throw t})}function Cs(t){return t==="head"}function Oy(t,a){var r=a,l=0;do{var h=r.nextSibling;if(t.removeChild(r),h&&h.nodeType===8)if(r=h.data,r==="/$"||r==="/&"){if(l===0){t.removeChild(h),Oo(a);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")tc(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,tc(r);for(var p=r.firstChild;p;){var x=p.nextSibling,S=p.nodeName;p[Ka]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&p.rel.toLowerCase()==="stylesheet"||r.removeChild(p),p=x}}else r==="body"&&tc(t.ownerDocument.body);r=h}while(r);Oo(a)}function Dy(t,a){var r=t;t=0;do{var l=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=l}while(r)}function gp(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":gp(r),Qr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function gA(t,a,r,l){for(;t.nodeType===1;){var h=r;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ka])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=Aa(t.nextSibling),t===null)break}return null}function bA(t,a,r){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Aa(t.nextSibling),t===null))return null;return t}function My(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Aa(t.nextSibling),t===null))return null;return t}function bp(t){return t.data==="$?"||t.data==="$~"}function yp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function yA(t,a){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||r.readyState!=="loading")a();else{var l=function(){a(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Aa(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var xp=null;function Py(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(a===0)return Aa(t.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}t=t.nextSibling}return null}function zy(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return t;a--}else r!=="/$"&&r!=="/&"||a++}t=t.previousSibling}return null}function Vy(t,a,r){switch(a=nd(r),t){case"html":if(t=a.documentElement,!t)throw Error(s(452));return t;case"head":if(t=a.head,!t)throw Error(s(453));return t;case"body":if(t=a.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function tc(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Qr(t)}var Sa=new Map,Ly=new Set;function ad(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var qi=me.d;me.d={f:xA,r:vA,D:_A,C:EA,L:wA,m:AA,X:TA,S:SA,M:NA};function xA(){var t=qi.f(),a=Qu();return t||a}function vA(t){var a=pa(t);a!==null&&a.tag===5&&a.type==="form"?nb(a):qi.r(t)}var Io=typeof document>"u"?null:document;function Uy(t,a,r){var l=Io;if(l&&typeof a=="string"&&a){var h=$n(a);h='link[rel="'+t+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),Ly.has(h)||(Ly.add(h),t={rel:t,crossOrigin:r,href:a},l.querySelector(h)===null&&(a=l.createElement("link"),On(a,"link",t),dn(a),l.head.appendChild(a)))}}function _A(t){qi.D(t),Uy("dns-prefetch",t,null)}function EA(t,a){qi.C(t,a),Uy("preconnect",t,a)}function wA(t,a,r){qi.L(t,a,r);var l=Io;if(l&&t&&a){var h='link[rel="preload"][as="'+$n(a)+'"]';a==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+$n(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+$n(r.imageSizes)+'"]')):h+='[href="'+$n(t)+'"]';var p=h;switch(a){case"style":p=jo(t);break;case"script":p=ko(t)}Sa.has(p)||(t=E({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:t,as:a},r),Sa.set(p,t),l.querySelector(h)!==null||a==="style"&&l.querySelector(nc(p))||a==="script"&&l.querySelector(ac(p))||(a=l.createElement("link"),On(a,"link",t),dn(a),l.head.appendChild(a)))}}function AA(t,a){qi.m(t,a);var r=Io;if(r&&t){var l=a&&typeof a.as=="string"?a.as:"script",h='link[rel="modulepreload"][as="'+$n(l)+'"][href="'+$n(t)+'"]',p=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ko(t)}if(!Sa.has(p)&&(t=E({rel:"modulepreload",href:t},a),Sa.set(p,t),r.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(ac(p)))return}l=r.createElement("link"),On(l,"link",t),dn(l),r.head.appendChild(l)}}}function SA(t,a,r){qi.S(t,a,r);var l=Io;if(l&&t){var h=Ja(l).hoistableStyles,p=jo(t);a=a||"default";var x=h.get(p);if(!x){var S={loading:0,preload:null};if(x=l.querySelector(nc(p)))S.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":a},r),(r=Sa.get(p))&&vp(t,r);var D=x=l.createElement("link");dn(D),On(D,"link",t),D._p=new Promise(function(W,oe){D.onload=W,D.onerror=oe}),D.addEventListener("load",function(){S.loading|=1}),D.addEventListener("error",function(){S.loading|=2}),S.loading|=4,id(x,a,l)}x={type:"stylesheet",instance:x,count:1,state:S},h.set(p,x)}}}function TA(t,a){qi.X(t,a);var r=Io;if(r&&t){var l=Ja(r).hoistableScripts,h=ko(t),p=l.get(h);p||(p=r.querySelector(ac(h)),p||(t=E({src:t,async:!0},a),(a=Sa.get(h))&&_p(t,a),p=r.createElement("script"),dn(p),On(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function NA(t,a){qi.M(t,a);var r=Io;if(r&&t){var l=Ja(r).hoistableScripts,h=ko(t),p=l.get(h);p||(p=r.querySelector(ac(h)),p||(t=E({src:t,async:!0,type:"module"},a),(a=Sa.get(h))&&_p(t,a),p=r.createElement("script"),dn(p),On(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function By(t,a,r,l){var h=(h=ge.current)?ad(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=jo(r.href),r=Ja(h).hoistableStyles,l=r.get(a),l||(l={type:"style",instance:null,count:0,state:null},r.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=jo(r.href);var p=Ja(h).hoistableStyles,x=p.get(t);if(x||(h=h.ownerDocument||h,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,x),(p=h.querySelector(nc(t)))&&!p._p&&(x.instance=p,x.state.loading=5),Sa.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Sa.set(t,r),p||RA(h,t,r,x.state))),a&&l===null)throw Error(s(528,""));return x}if(a&&l!==null)throw Error(s(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ko(r),r=Ja(h).hoistableScripts,l=r.get(a),l||(l={type:"script",instance:null,count:0,state:null},r.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function jo(t){return'href="'+$n(t)+'"'}function nc(t){return'link[rel="stylesheet"]['+t+"]"}function Hy(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function RA(t,a,r,l){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=t.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),On(a,"link",r),dn(a),t.head.appendChild(a))}function ko(t){return'[src="'+$n(t)+'"]'}function ac(t){return"script[async]"+t}function qy(t,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var l=t.querySelector('style[data-href~="'+$n(r.href)+'"]');if(l)return a.instance=l,dn(l),l;var h=E({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),dn(l),On(l,"style",h),id(l,r.precedence,t),a.instance=l;case"stylesheet":h=jo(r.href);var p=t.querySelector(nc(h));if(p)return a.state.loading|=4,a.instance=p,dn(p),p;l=Hy(r),(h=Sa.get(h))&&vp(l,h),p=(t.ownerDocument||t).createElement("link"),dn(p);var x=p;return x._p=new Promise(function(S,D){x.onload=S,x.onerror=D}),On(p,"link",l),a.state.loading|=4,id(p,r.precedence,t),a.instance=p;case"script":return p=ko(r.src),(h=t.querySelector(ac(p)))?(a.instance=h,dn(h),h):(l=r,(h=Sa.get(p))&&(l=E({},r),_p(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),dn(h),On(h,"link",l),t.head.appendChild(h),a.instance=h);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,id(l,r.precedence,t));return a.instance}function id(t,a,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,p=h,x=0;x<l.length;x++){var S=l[x];if(S.dataset.precedence===a)p=S;else if(p!==h)break}p?p.parentNode.insertBefore(t,p.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(t,a.firstChild))}function vp(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function _p(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var sd=null;function Fy(t,a,r){if(sd===null){var l=new Map,h=sd=new Map;h.set(r,l)}else h=sd,l=h.get(r),l||(l=new Map,h.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),h=0;h<r.length;h++){var p=r[h];if(!(p[Ka]||p[un]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var x=p.getAttribute(a)||"";x=t+x;var S=l.get(x);S?S.push(p):l.set(x,[p])}}return l}function Gy(t,a,r){t=t.ownerDocument||t,t.head.insertBefore(r,a==="title"?t.querySelector("head > title"):null)}function CA(t,a,r){if(r===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function $y(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function IA(t,a,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=jo(l.href),p=a.querySelector(nc(h));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=rd.bind(t),a.then(t,t)),r.state.loading|=4,r.instance=p,dn(p);return}p=a.ownerDocument||a,l=Hy(l),(h=Sa.get(h))&&vp(l,h),p=p.createElement("link"),dn(p);var x=p;x._p=new Promise(function(S,D){x.onload=S,x.onerror=D}),On(p,"link",l),r.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=rd.bind(t),a.addEventListener("load",r),a.addEventListener("error",r))}}var Ep=0;function jA(t,a){return t.stylesheets&&t.count===0&&ld(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var l=setTimeout(function(){if(t.stylesheets&&ld(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+a);0<t.imgBytes&&Ep===0&&(Ep=62500*dA());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&ld(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>Ep?50:800)+a);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function rd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ld(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var od=null;function ld(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,od=new Map,a.forEach(kA,t),od=null,rd.call(t))}function kA(t,a){if(!(a.state.loading&4)){var r=od.get(t);if(r)var l=r.get(null);else{r=new Map,od.set(t,r);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var x=h[p];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(r.set(x.dataset.precedence,x),l=x)}l&&r.set(null,l)}h=a.instance,x=h.getAttribute("data-precedence"),p=r.get(x)||l,p===l&&r.set(null,h),r.set(x,h),this.count++,l=rd.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),p?p.parentNode.insertBefore(h,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),a.state.loading|=4}}var ic={$$typeof:K,Provider:null,Consumer:null,_currentValue:Re,_currentValue2:Re,_threadCount:0};function OA(t,a,r,l,h,p,x,S,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bt(0),this.hiddenUpdates=bt(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Yy(t,a,r,l,h,p,x,S,D,W,oe,fe){return t=new OA(t,a,r,x,D,W,oe,fe,S),a=1,p===!0&&(a|=24),p=sa(3,null,null,a),t.current=p,p.stateNode=t,a=th(),a.refCount++,t.pooledCache=a,a.refCount++,p.memoizedState={element:l,isDehydrated:r,cache:a},sh(p),t}function Qy(t){return t?(t=lo,t):lo}function Ky(t,a,r,l,h,p){h=Qy(h),l.context===null?l.context=h:l.pendingContext=h,l=ys(a),l.payload={element:r},p=p===void 0?null:p,p!==null&&(l.callback=p),r=xs(t,l,a),r!==null&&(Wn(r,t,a),Pl(r,t,a))}function Xy(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<a?r:a}}function wp(t,a){Xy(t,a),(t=t.alternate)&&Xy(t,a)}function Jy(t){if(t.tag===13||t.tag===31){var a=gr(t,67108864);a!==null&&Wn(a,t,67108864),wp(t,67108864)}}function Wy(t){if(t.tag===13||t.tag===31){var a=ua();a=ir(a);var r=gr(t,a);r!==null&&Wn(r,t,a),wp(t,a)}}var cd=!0;function DA(t,a,r,l){var h=ee.T;ee.T=null;var p=me.p;try{me.p=2,Ap(t,a,r,l)}finally{me.p=p,ee.T=h}}function MA(t,a,r,l){var h=ee.T;ee.T=null;var p=me.p;try{me.p=8,Ap(t,a,r,l)}finally{me.p=p,ee.T=h}}function Ap(t,a,r,l){if(cd){var h=Sp(l);if(h===null)up(t,a,l,ud,r),ex(t,l);else if(zA(h,t,a,r,l))l.stopPropagation();else if(ex(t,l),a&4&&-1<PA.indexOf(t)){for(;h!==null;){var p=pa(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var x=$e(p.pendingLanes);if(x!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;x;){var D=1<<31-Pt(x);S.entanglements[1]|=D,x&=~D}ui(p),(Et&6)===0&&($u=nt()+500,Wl(0))}}break;case 31:case 13:S=gr(p,2),S!==null&&Wn(S,p,2),Qu(),wp(p,2)}if(p=Sp(l),p===null&&up(t,a,l,ud,r),p===h)break;h=p}h!==null&&l.stopPropagation()}else up(t,a,l,null,r)}}function Sp(t){return t=ma(t),Tp(t)}var ud=null;function Tp(t){if(ud=null,t=Xa(t),t!==null){var a=u(t);if(a===null)t=null;else{var r=a.tag;if(r===13){if(t=f(a),t!==null)return t;t=null}else if(r===31){if(t=m(a),t!==null)return t;t=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return ud=t,null}function Zy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zt()){case de:return 2;case Ce:return 8;case Me:case P:return 32;case _e:return 268435456;default:return 32}default:return 32}}var Np=!1,Is=null,js=null,ks=null,sc=new Map,rc=new Map,Os=[],PA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ex(t,a){switch(t){case"focusin":case"focusout":Is=null;break;case"dragenter":case"dragleave":js=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":sc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(a.pointerId)}}function oc(t,a,r,l,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:a,domEventName:r,eventSystemFlags:l,nativeEvent:p,targetContainers:[h]},a!==null&&(a=pa(a),a!==null&&Jy(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,h!==null&&a.indexOf(h)===-1&&a.push(h),t)}function zA(t,a,r,l,h){switch(a){case"focusin":return Is=oc(Is,t,a,r,l,h),!0;case"dragenter":return js=oc(js,t,a,r,l,h),!0;case"mouseover":return ks=oc(ks,t,a,r,l,h),!0;case"pointerover":var p=h.pointerId;return sc.set(p,oc(sc.get(p)||null,t,a,r,l,h)),!0;case"gotpointercapture":return p=h.pointerId,rc.set(p,oc(rc.get(p)||null,t,a,r,l,h)),!0}return!1}function tx(t){var a=Xa(t.target);if(a!==null){var r=u(a);if(r!==null){if(a=r.tag,a===13){if(a=f(r),a!==null){t.blockedOn=a,Ia(t.priority,function(){Wy(r)});return}}else if(a===31){if(a=m(r),a!==null){t.blockedOn=a,Ia(t.priority,function(){Wy(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function dd(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var r=Sp(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);vl=l,r.target.dispatchEvent(l),vl=null}else return a=pa(r),a!==null&&Jy(a),t.blockedOn=r,!1;a.shift()}return!0}function nx(t,a,r){dd(t)&&r.delete(a)}function VA(){Np=!1,Is!==null&&dd(Is)&&(Is=null),js!==null&&dd(js)&&(js=null),ks!==null&&dd(ks)&&(ks=null),sc.forEach(nx),rc.forEach(nx)}function fd(t,a){t.blockedOn===a&&(t.blockedOn=null,Np||(Np=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,VA)))}var hd=null;function ax(t){hd!==t&&(hd=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){hd===t&&(hd=null);for(var a=0;a<t.length;a+=3){var r=t[a],l=t[a+1],h=t[a+2];if(typeof l!="function"){if(Tp(l||r)===null)continue;break}var p=pa(r);p!==null&&(t.splice(a,3),a-=3,Sh(p,{pending:!0,data:h,method:r.method,action:l},l,h))}}))}function Oo(t){function a(D){return fd(D,t)}Is!==null&&fd(Is,t),js!==null&&fd(js,t),ks!==null&&fd(ks,t),sc.forEach(a),rc.forEach(a);for(var r=0;r<Os.length;r++){var l=Os[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Os.length&&(r=Os[0],r.blockedOn===null);)tx(r),r.blockedOn===null&&Os.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var h=r[l],p=r[l+1],x=h[wn]||null;if(typeof p=="function")x||ax(r);else if(x){var S=null;if(p&&p.hasAttribute("formAction")){if(h=p,x=p[wn]||null)S=x.formAction;else if(Tp(h)!==null)continue}else S=x.action;typeof S=="function"?r[l+1]=S:(r.splice(l,3),l-=3),ax(r)}}}function ix(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(x){return h=x})},focusReset:"manual",scroll:"manual"})}function a(){h!==null&&(h(),h=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),h!==null&&(h(),h=null)}}}function Rp(t){this._internalRoot=t}pd.prototype.render=Rp.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(s(409));var r=a.current,l=ua();Ky(r,l,t,a,null,null)},pd.prototype.unmount=Rp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Ky(t.current,2,null,t,null,null),Qu(),a[Qa]=null}};function pd(t){this._internalRoot=t}pd.prototype.unstable_scheduleHydration=function(t){if(t){var a=Qc();t={blockedOn:null,target:t,priority:a};for(var r=0;r<Os.length&&a!==0&&a<Os[r].priority;r++);Os.splice(r,0,t),r===0&&tx(t)}};var sx=e.version;if(sx!=="19.2.4")throw Error(s(527,sx,"19.2.4"));me.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(a),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var LA={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{vt=md.inject(LA),rt=md}catch{}}return cc.createRoot=function(t,a){if(!o(t))throw Error(s(299));var r=!1,l="",h=fb,p=hb,x=pb;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Yy(t,1,!1,null,null,r,l,null,h,p,x,ix),t[Qa]=a.current,cp(t),new Rp(a)},cc.hydrateRoot=function(t,a,r){if(!o(t))throw Error(s(299));var l=!1,h="",p=fb,x=hb,S=pb,D=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(x=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.formState!==void 0&&(D=r.formState)),a=Yy(t,1,!0,a,r??null,l,h,D,p,x,S,ix),a.context=Qy(null),r=a.current,l=ua(),l=ir(l),h=ys(l),h.callback=null,xs(r,h,l),r=l,a.current.lanes=r,Gt(a,r),ui(a),t[Qa]=a.current,cp(t),new pd(a)},cc.version="19.2.4",cc}var mx;function XA(){if(mx)return jp.exports;mx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),jp.exports=KA(),jp.exports}var JA=XA();const WA=i1(JA);var gx="popstate";function ZA(i={}){function e(o,u){let{pathname:f="/",search:m="",hash:b=""}=Ur(o.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),Jp("",{pathname:f,search:m,hash:b},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let f=o.document.querySelector("base"),m="";if(f&&f.getAttribute("href")){let b=o.location.href,g=b.indexOf("#");m=g===-1?b:b.slice(0,g)}return m+"#"+(typeof u=="string"?u:Tc(u))}function s(o,u){Ca(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return tS(e,n,s,i)}function Kt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Ca(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eS(){return Math.random().toString(36).substring(2,10)}function bx(i,e){return{usr:i.state,key:i.key,idx:e}}function Jp(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Ur(e):e,state:n,key:e&&e.key||s||eS()}}function Tc({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Ur(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function tS(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",b=null,g=v();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function v(){return(f.state||{idx:null}).idx}function E(){m="POP";let U=v(),V=U==null?null:U-g;g=U,b&&b({action:m,location:B.location,delta:V})}function T(U,V){m="PUSH";let $=Jp(B.location,U,V);n&&n($,U),g=v()+1;let K=bx($,g),re=B.createHref($);try{f.pushState(K,"",re)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;o.location.assign(re)}u&&b&&b({action:m,location:B.location,delta:1})}function M(U,V){m="REPLACE";let $=Jp(B.location,U,V);n&&n($,U),g=v();let K=bx($,g),re=B.createHref($);f.replaceState(K,"",re),u&&b&&b({action:m,location:B.location,delta:0})}function G(U){return nS(U)}let B={get action(){return m},get location(){return i(o,f)},listen(U){if(b)throw new Error("A history only accepts one active listener");return o.addEventListener(gx,E),b=U,()=>{o.removeEventListener(gx,E),b=null}},createHref(U){return e(o,U)},createURL:G,encodeLocation(U){let V=G(U);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:T,replace:M,go(U){return f.go(U)}};return B}function nS(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Kt(n,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:Tc(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function s1(i,e,n="/"){return aS(i,e,n,!1)}function aS(i,e,n,s){let o=typeof e=="string"?Ur(e):e,u=Ki(o.pathname||"/",n);if(u==null)return null;let f=r1(i);iS(f);let m=null;for(let b=0;m==null&&b<f.length;++b){let g=mS(u);m=hS(f[b],g,s)}return m}function r1(i,e=[],n=[],s="",o=!1){let u=(f,m,b=o,g)=>{let v={relativePath:g===void 0?f.path||"":g,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(s)&&b)return;Kt(v.relativePath.startsWith(s),`Absolute route path "${v.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(s.length)}let E=$i([s,v.relativePath]),T=n.concat(v);f.children&&f.children.length>0&&(Kt(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),r1(f.children,e,T,E,b)),!(f.path==null&&!f.index)&&e.push({path:E,score:dS(E,f.index),routesMeta:T})};return i.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))u(f,m);else for(let b of o1(f.path))u(f,m,!0,b)}),e}function o1(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=o1(s.join("/")),m=[];return m.push(...f.map(b=>b===""?u:[u,b].join("/"))),o&&m.push(...f),m.map(b=>i.startsWith("/")&&b===""?"/":b)}function iS(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:fS(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var sS=/^:[\w-]+$/,rS=3,oS=2,lS=1,cS=10,uS=-2,yx=i=>i==="*";function dS(i,e){let n=i.split("/"),s=n.length;return n.some(yx)&&(s+=uS),e&&(s+=oS),n.filter(o=>!yx(o)).reduce((o,u)=>o+(sS.test(u)?rS:u===""?lS:cS),s)}function fS(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function hS(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",f=[];for(let m=0;m<s.length;++m){let b=s[m],g=m===s.length-1,v=u==="/"?e:e.slice(u.length)||"/",E=zd({path:b.relativePath,caseSensitive:b.caseSensitive,end:g},v),T=b.route;if(!E&&g&&n&&!s[s.length-1].route.index&&(E=zd({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},v)),!E)return null;Object.assign(o,E.params),f.push({params:o,pathname:$i([u,E.pathname]),pathnameBase:xS($i([u,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(u=$i([u,E.pathnameBase]))}return f}function zd(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=pS(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((g,{paramName:v,isOptional:E},T)=>{if(v==="*"){let G=m[T]||"";f=u.slice(0,u.length-G.length).replace(/(.)\/+$/,"$1")}const M=m[T];return E&&!M?g[v]=void 0:g[v]=(M||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:i}}function pS(i,e=!1,n=!0){Ca(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,b)=>(s.push({paramName:m,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function mS(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ca(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Ki(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}var gS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function bS(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?Ur(i):i,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=xx(n.substring(1),"/"):u=xx(n,e)):u=e,{pathname:u,search:vS(s),hash:_S(o)}}function xx(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Mp(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yS(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rm(i){let e=yS(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Cm(i,e,n,s=!1){let o;typeof i=="string"?o=Ur(i):(o={...i},Kt(!o.pathname||!o.pathname.includes("?"),Mp("?","pathname","search",o)),Kt(!o.pathname||!o.pathname.includes("#"),Mp("#","pathname","hash",o)),Kt(!o.search||!o.search.includes("#"),Mp("#","search","hash",o)));let u=i===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let E=e.length-1;if(!s&&f.startsWith("..")){let T=f.split("/");for(;T[0]==="..";)T.shift(),E-=1;o.pathname=T.join("/")}m=E>=0?e[E]:"/"}let b=bS(o,m),g=f&&f!=="/"&&f.endsWith("/"),v=(u||f===".")&&n.endsWith("/");return!b.pathname.endsWith("/")&&(g||v)&&(b.pathname+="/"),b}var $i=i=>i.join("/").replace(/\/\/+/g,"/"),xS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),vS=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,_S=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,ES=class{constructor(i,e,n,s=!1){this.status=i,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function wS(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function AS(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var l1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function c1(i,e){let n=i;if(typeof n!="string"||!gS.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,o=!1;if(l1)try{let u=new URL(window.location.href),f=n.startsWith("//")?new URL(u.protocol+n):new URL(n),m=Ki(f.pathname,e);f.origin===u.origin&&m!=null?n=m+f.search+f.hash:o=!0}catch{Ca(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var u1=["POST","PUT","PATCH","DELETE"];new Set(u1);var SS=["GET",...u1];new Set(SS);var el=A.createContext(null);el.displayName="DataRouter";var rf=A.createContext(null);rf.displayName="DataRouterState";var TS=A.createContext(!1),d1=A.createContext({isTransitioning:!1});d1.displayName="ViewTransition";var NS=A.createContext(new Map);NS.displayName="Fetchers";var RS=A.createContext(null);RS.displayName="Await";var ha=A.createContext(null);ha.displayName="Navigation";var Mc=A.createContext(null);Mc.displayName="Location";var Ei=A.createContext({outlet:null,matches:[],isDataRoute:!1});Ei.displayName="Route";var Im=A.createContext(null);Im.displayName="RouteError";var f1="REACT_ROUTER_ERROR",CS="REDIRECT",IS="ROUTE_ERROR_RESPONSE";function jS(i){if(i.startsWith(`${f1}:${CS}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function kS(i){if(i.startsWith(`${f1}:${IS}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new ES(e.status,e.statusText,e.data)}catch{}}function OS(i,{relative:e}={}){Kt(tl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=A.useContext(ha),{hash:o,pathname:u,search:f}=Pc(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:$i([n,u])),s.createHref({pathname:m,search:f,hash:o})}function tl(){return A.useContext(Mc)!=null}function Zs(){return Kt(tl(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(Mc).location}var h1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function p1(i){A.useContext(ha).static||A.useLayoutEffect(i)}function ns(){let{isDataRoute:i}=A.useContext(Ei);return i?$S():DS()}function DS(){Kt(tl(),"useNavigate() may be used only in the context of a <Router> component.");let i=A.useContext(el),{basename:e,navigator:n}=A.useContext(ha),{matches:s}=A.useContext(Ei),{pathname:o}=Zs(),u=JSON.stringify(Rm(s)),f=A.useRef(!1);return p1(()=>{f.current=!0}),A.useCallback((b,g={})=>{if(Ca(f.current,h1),!f.current)return;if(typeof b=="number"){n.go(b);return}let v=Cm(b,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:$i([e,v.pathname])),(g.replace?n.replace:n.push)(v,g.state,g)},[e,n,u,o,i])}A.createContext(null);function Pc(i,{relative:e}={}){let{matches:n}=A.useContext(Ei),{pathname:s}=Zs(),o=JSON.stringify(Rm(n));return A.useMemo(()=>Cm(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function MS(i,e){return m1(i,e)}function m1(i,e,n,s,o){Kt(tl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=A.useContext(ha),{matches:f}=A.useContext(Ei),m=f[f.length-1],b=m?m.params:{},g=m?m.pathname:"/",v=m?m.pathnameBase:"/",E=m&&m.route;{let $=E&&E.path||"";b1(g,!E||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let T=Zs(),M;if(e){let $=typeof e=="string"?Ur(e):e;Kt(v==="/"||$.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${$.pathname}" was given in the \`location\` prop.`),M=$}else M=T;let G=M.pathname||"/",B=G;if(v!=="/"){let $=v.replace(/^\//,"").split("/");B="/"+G.replace(/^\//,"").split("/").slice($.length).join("/")}let U=s1(i,{pathname:B});Ca(E||U!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),Ca(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=US(U&&U.map($=>Object.assign({},$,{params:Object.assign({},b,$.params),pathname:$i([v,u.encodeLocation?u.encodeLocation($.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?v:$i([v,u.encodeLocation?u.encodeLocation($.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:$.pathnameBase])})),f,n,s,o);return e&&V?A.createElement(Mc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...M},navigationType:"POP"}},V):V}function PS(){let i=GS(),e=wS(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:u},"ErrorBoundary")," or"," ",A.createElement("code",{style:u},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:o},n):null,f)}var zS=A.createElement(PS,null),g1=class extends A.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const n=kS(i.digest);n&&(i=n)}let e=i!==void 0?A.createElement(Ei.Provider,{value:this.props.routeContext},A.createElement(Im.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?A.createElement(VS,{error:i},e):e}};g1.contextType=TS;var Pp=new WeakMap;function VS({children:i,error:e}){let{basename:n}=A.useContext(ha);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=jS(e.digest);if(s){let o=Pp.get(e);if(o)throw o;let u=c1(s.location,n);if(l1&&!Pp.get(e))if(u.isExternal||s.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:s.replace}));throw Pp.set(e,f),f}return A.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return i}function LS({routeContext:i,match:e,children:n}){let s=A.useContext(el);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(Ei.Provider,{value:i},n)}function US(i,e=[],n=null,s=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let u=i,f=n?.errors;if(f!=null){let v=u.findIndex(E=>E.route.id&&f?.[E.route.id]!==void 0);Kt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,v+1))}let m=!1,b=-1;if(n)for(let v=0;v<u.length;v++){let E=u[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(b=v),E.route.id){let{loaderData:T,errors:M}=n,G=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!M||M[E.route.id]===void 0);if(E.route.lazy||G){m=!0,b>=0?u=u.slice(0,b+1):u=[u[0]];break}}}let g=n&&s?(v,E)=>{s(v,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:AS(n.matches),errorInfo:E})}:void 0;return u.reduceRight((v,E,T)=>{let M,G=!1,B=null,U=null;n&&(M=f&&E.route.id?f[E.route.id]:void 0,B=E.route.errorElement||zS,m&&(b<0&&T===0?(b1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),G=!0,U=null):b===T&&(G=!0,U=E.route.hydrateFallbackElement||null)));let V=e.concat(u.slice(0,T+1)),$=()=>{let K;return M?K=B:G?K=U:E.route.Component?K=A.createElement(E.route.Component,null):E.route.element?K=E.route.element:K=v,A.createElement(LS,{match:E,routeContext:{outlet:v,matches:V,isDataRoute:n!=null},children:K})};return n&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?A.createElement(g1,{location:n.location,revalidation:n.revalidation,component:B,error:M,children:$(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:g}):$()},null)}function jm(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BS(i){let e=A.useContext(el);return Kt(e,jm(i)),e}function HS(i){let e=A.useContext(rf);return Kt(e,jm(i)),e}function qS(i){let e=A.useContext(Ei);return Kt(e,jm(i)),e}function km(i){let e=qS(i),n=e.matches[e.matches.length-1];return Kt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function FS(){return km("useRouteId")}function GS(){let i=A.useContext(Im),e=HS("useRouteError"),n=km("useRouteError");return i!==void 0?i:e.errors?.[n]}function $S(){let{router:i}=BS("useNavigate"),e=km("useNavigate"),n=A.useRef(!1);return p1(()=>{n.current=!0}),A.useCallback(async(o,u={})=>{Ca(n.current,h1),n.current&&(typeof o=="number"?await i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var vx={};function b1(i,e,n){!e&&!vx[i]&&(vx[i]=!0,Ca(!1,n))}A.memo(YS);function YS({routes:i,future:e,state:n,onError:s}){return m1(i,void 0,n,s,e)}function y1({to:i,replace:e,state:n,relative:s}){Kt(tl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=A.useContext(ha);Ca(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=A.useContext(Ei),{pathname:f}=Zs(),m=ns(),b=Cm(i,Rm(u),f,s==="path"),g=JSON.stringify(b);return A.useEffect(()=>{m(JSON.parse(g),{replace:e,state:n,relative:s})},[m,g,s,e,n]),null}function di(i){Kt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function QS({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1,unstable_useTransitions:f}){Kt(!tl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=i.replace(/^\/*/,"/"),b=A.useMemo(()=>({basename:m,navigator:o,static:u,unstable_useTransitions:f,future:{}}),[m,o,u,f]);typeof n=="string"&&(n=Ur(n));let{pathname:g="/",search:v="",hash:E="",state:T=null,key:M="default"}=n,G=A.useMemo(()=>{let B=Ki(g,m);return B==null?null:{location:{pathname:B,search:v,hash:E,state:T,key:M},navigationType:s}},[m,g,v,E,T,M,s]);return Ca(G!=null,`<Router basename="${m}"> is not able to match the URL "${g}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),G==null?null:A.createElement(ha.Provider,{value:b},A.createElement(Mc.Provider,{children:e,value:G}))}function KS({children:i,location:e}){return MS(Wp(i),e)}function Wp(i,e=[]){let n=[];return A.Children.forEach(i,(s,o)=>{if(!A.isValidElement(s))return;let u=[...e,o];if(s.type===A.Fragment){n.push.apply(n,Wp(s.props.children,u));return}Kt(s.type===di,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Kt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Wp(s.props.children,u)),n.push(f)}),n}var Ad="get",Sd="application/x-www-form-urlencoded";function of(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function XS(i){return of(i)&&i.tagName.toLowerCase()==="button"}function JS(i){return of(i)&&i.tagName.toLowerCase()==="form"}function WS(i){return of(i)&&i.tagName.toLowerCase()==="input"}function ZS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function eT(i,e){return i.button===0&&(!e||e==="_self")&&!ZS(i)}var gd=null;function tT(){if(gd===null)try{new FormData(document.createElement("form"),0),gd=!1}catch{gd=!0}return gd}var nT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zp(i){return i!=null&&!nT.has(i)?(Ca(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sd}"`),null):i}function aT(i,e){let n,s,o,u,f;if(JS(i)){let m=i.getAttribute("action");s=m?Ki(m,e):null,n=i.getAttribute("method")||Ad,o=zp(i.getAttribute("enctype"))||Sd,u=new FormData(i)}else if(XS(i)||WS(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=i.getAttribute("formaction")||m.getAttribute("action");if(s=b?Ki(b,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||Ad,o=zp(i.getAttribute("formenctype"))||zp(m.getAttribute("enctype"))||Sd,u=new FormData(m,i),!tT()){let{name:g,type:v,value:E}=i;if(v==="image"){let T=g?`${g}.`:"";u.append(`${T}x`,"0"),u.append(`${T}y`,"0")}else g&&u.append(g,E)}}else{if(of(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ad,s=null,o=Sd,f=i}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Om(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function iT(i,e,n,s){let o=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${s}`:o.pathname=`${o.pathname}.${s}`:o.pathname==="/"?o.pathname=`_root.${s}`:e&&Ki(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${s}`,o}async function sT(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rT(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function oT(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await sT(u,n);return f.links?f.links():[]}return[]}));return dT(s.flat(1).filter(rT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function _x(i,e,n,s,o,u){let f=(b,g)=>n[g]?b.route.id!==n[g].route.id:!0,m=(b,g)=>n[g].pathname!==b.pathname||n[g].route.path?.endsWith("*")&&n[g].params["*"]!==b.params["*"];return u==="assets"?e.filter((b,g)=>f(b,g)||m(b,g)):u==="data"?e.filter((b,g)=>{let v=s.routes[b.route.id];if(!v||!v.hasLoader)return!1;if(f(b,g)||m(b,g))return!0;if(b.route.shouldRevalidate){let E=b.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function lT(i,e,{includeHydrateFallback:n}={}){return cT(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function cT(i){return[...new Set(i)]}function uT(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function dT(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(uT(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function x1(){let i=A.useContext(el);return Om(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function fT(){let i=A.useContext(rf);return Om(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Dm=A.createContext(void 0);Dm.displayName="FrameworkContext";function v1(){let i=A.useContext(Dm);return Om(i,"You must render this element inside a <HydratedRouter> element"),i}function hT(i,e){let n=A.useContext(Dm),[s,o]=A.useState(!1),[u,f]=A.useState(!1),{onFocus:m,onBlur:b,onMouseEnter:g,onMouseLeave:v,onTouchStart:E}=e,T=A.useRef(null);A.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let B=V=>{V.forEach($=>{f($.isIntersecting)})},U=new IntersectionObserver(B,{threshold:.5});return T.current&&U.observe(T.current),()=>{U.disconnect()}}},[i]),A.useEffect(()=>{if(s){let B=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(B)}}},[s]);let M=()=>{o(!0)},G=()=>{o(!1),f(!1)};return n?i!=="intent"?[u,T,{}]:[u,T,{onFocus:uc(m,M),onBlur:uc(b,G),onMouseEnter:uc(g,M),onMouseLeave:uc(v,G),onTouchStart:uc(E,M)}]:[!1,T,{}]}function uc(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function pT({page:i,...e}){let{router:n}=x1(),s=A.useMemo(()=>s1(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?A.createElement(gT,{page:i,matches:s,...e}):null}function mT(i){let{manifest:e,routeModules:n}=v1(),[s,o]=A.useState([]);return A.useEffect(()=>{let u=!1;return oT(i,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[i,e,n]),s}function gT({page:i,matches:e,...n}){let s=Zs(),{future:o,manifest:u,routeModules:f}=v1(),{basename:m}=x1(),{loaderData:b,matches:g}=fT(),v=A.useMemo(()=>_x(i,e,g,u,s,"data"),[i,e,g,u,s]),E=A.useMemo(()=>_x(i,e,g,u,s,"assets"),[i,e,g,u,s]),T=A.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let B=new Set,U=!1;if(e.forEach($=>{let K=u.routes[$.route.id];!K||!K.hasLoader||(!v.some(re=>re.route.id===$.route.id)&&$.route.id in b&&f[$.route.id]?.shouldRevalidate||K.hasClientLoader?U=!0:B.add($.route.id))}),B.size===0)return[];let V=iT(i,m,o.unstable_trailingSlashAwareDataRequests,"data");return U&&B.size>0&&V.searchParams.set("_routes",e.filter($=>B.has($.route.id)).map($=>$.route.id).join(",")),[V.pathname+V.search]},[m,o.unstable_trailingSlashAwareDataRequests,b,s,u,v,e,i,f]),M=A.useMemo(()=>lT(E,u),[E,u]),G=mT(E);return A.createElement(A.Fragment,null,T.map(B=>A.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),M.map(B=>A.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),G.map(({key:B,link:U})=>A.createElement("link",{key:B,nonce:n.nonce,...U,crossOrigin:U.crossOrigin??n.crossOrigin})))}function bT(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var yT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yT&&(window.__reactRouterVersion="7.13.0")}catch{}function xT({basename:i,children:e,unstable_useTransitions:n,window:s}){let o=A.useRef();o.current==null&&(o.current=ZA({window:s,v5Compat:!0}));let u=o.current,[f,m]=A.useState({action:u.action,location:u.location}),b=A.useCallback(g=>{n===!1?m(g):A.startTransition(()=>m(g))},[n]);return A.useLayoutEffect(()=>u.listen(b),[u,b]),A.createElement(QS,{basename:i,children:e,location:f.location,navigationType:f.action,navigator:u,unstable_useTransitions:n})}var _1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,E1=A.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:b,to:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:T,...M},G){let{basename:B,unstable_useTransitions:U}=A.useContext(ha),V=typeof g=="string"&&_1.test(g),$=c1(g,B);g=$.to;let K=OS(g,{relative:o}),[re,he,ae]=hT(s,M),w=wT(g,{replace:f,state:m,target:b,preventScrollReset:v,relative:o,viewTransition:E,unstable_defaultShouldRevalidate:T,unstable_useTransitions:U});function C(k){e&&e(k),k.defaultPrevented||w(k)}let I=A.createElement("a",{...M,...ae,href:$.absoluteURL||K,onClick:$.isExternal||u?e:C,ref:bT(G,he),target:b,"data-discover":!V&&n==="render"?"true":void 0});return re&&!V?A.createElement(A.Fragment,null,I,A.createElement(pT,{page:K})):I});E1.displayName="Link";var vT=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:b,...g},v){let E=Pc(f,{relative:g.relative}),T=Zs(),M=A.useContext(rf),{navigator:G,basename:B}=A.useContext(ha),U=M!=null&&RT(E)&&m===!0,V=G.encodeLocation?G.encodeLocation(E).pathname:E.pathname,$=T.pathname,K=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;n||($=$.toLowerCase(),K=K?K.toLowerCase():null,V=V.toLowerCase()),K&&B&&(K=Ki(K,B)||K);const re=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let he=$===V||!o&&$.startsWith(V)&&$.charAt(re)==="/",ae=K!=null&&(K===V||!o&&K.startsWith(V)&&K.charAt(V.length)==="/"),w={isActive:he,isPending:ae,isTransitioning:U},C=he?e:void 0,I;typeof s=="function"?I=s(w):I=[s,he?"active":null,ae?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let k=typeof u=="function"?u(w):u;return A.createElement(E1,{...g,"aria-current":C,className:I,ref:v,style:k,to:f,viewTransition:m},typeof b=="function"?b(w):b)});vT.displayName="NavLink";var _T=A.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=Ad,action:m,onSubmit:b,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:T,...M},G)=>{let{unstable_useTransitions:B}=A.useContext(ha),U=TT(),V=NT(m,{relative:g}),$=f.toLowerCase()==="get"?"get":"post",K=typeof m=="string"&&_1.test(m),re=he=>{if(b&&b(he),he.defaultPrevented)return;he.preventDefault();let ae=he.nativeEvent.submitter,w=ae?.getAttribute("formmethod")||f,C=()=>U(ae||he.currentTarget,{fetcherKey:e,method:w,navigate:n,replace:o,state:u,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:T});B&&n!==!1?A.startTransition(()=>C()):C()};return A.createElement("form",{ref:G,method:$,action:V,onSubmit:s?b:re,...M,"data-discover":!K&&i==="render"?"true":void 0})});_T.displayName="Form";function ET(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function w1(i){let e=A.useContext(el);return Kt(e,ET(i)),e}function wT(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:b}={}){let g=ns(),v=Zs(),E=Pc(i,{relative:u});return A.useCallback(T=>{if(eT(T,e)){T.preventDefault();let M=n!==void 0?n:Tc(v)===Tc(E),G=()=>g(i,{replace:M,state:s,preventScrollReset:o,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m});b?A.startTransition(()=>G()):G()}},[v,g,E,n,s,e,i,o,u,f,m,b])}var AT=0,ST=()=>`__${String(++AT)}__`;function TT(){let{router:i}=w1("useSubmit"),{basename:e}=A.useContext(ha),n=FS(),s=i.fetch,o=i.navigate;return A.useCallback(async(u,f={})=>{let{action:m,method:b,encType:g,formData:v,body:E}=aT(u,e);if(f.navigate===!1){let T=f.fetcherKey||ST();await s(T,n,f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:v,body:E,formMethod:f.method||b,formEncType:f.encType||g,flushSync:f.flushSync})}else await o(f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:v,body:E,formMethod:f.method||b,formEncType:f.encType||g,replace:f.replace,state:f.state,fromRouteId:n,flushSync:f.flushSync,viewTransition:f.viewTransition})},[s,o,e,n])}function NT(i,{relative:e}={}){let{basename:n}=A.useContext(ha),s=A.useContext(Ei);Kt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Pc(i||".",{relative:e})},f=Zs();if(i==null){u.search=f.search;let m=new URLSearchParams(u.search),b=m.getAll("index");if(b.some(v=>v==="")){m.delete("index"),b.filter(E=>E).forEach(E=>m.append("index",E));let v=m.toString();u.search=v?`?${v}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:$i([n,u.pathname])),Tc(u)}function RT(i,{relative:e}={}){let n=A.useContext(d1);Kt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=w1("useViewTransitionState"),o=Pc(i,{relative:e});if(!n.isTransitioning)return!1;let u=Ki(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=Ki(n.nextLocation.pathname,s)||n.nextLocation.pathname;return zd(o.pathname,f)!=null||zd(o.pathname,u)!=null}const CT=()=>{};var Ex={};const A1=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},IT=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],m=i[n++],b=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(b>>10)),e[s++]=String.fromCharCode(56320+(b&1023))}else{const u=i[n++],f=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},S1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,b=o+2<i.length,g=b?i[o+2]:0,v=u>>2,E=(u&3)<<4|m>>4;let T=(m&15)<<2|g>>6,M=g&63;b||(M=64,f||(T=64)),s.push(n[v],n[E],n[T],n[M])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(A1(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):IT(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const E=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||g==null||E==null)throw new jT;const T=u<<2|m>>4;if(s.push(T),g!==64){const M=m<<4&240|g>>2;if(s.push(M),E!==64){const G=g<<6&192|E;s.push(G)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class jT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kT=function(i){const e=A1(i);return S1.encodeByteArray(e,!0)},Vd=function(i){return kT(i).replace(/\./g,"")},T1=function(i){try{return S1.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function OT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const DT=()=>OT().__FIREBASE_DEFAULTS__,MT=()=>{if(typeof process>"u"||typeof Ex>"u")return;const i=Ex.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},PT=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&T1(i[1]);return e&&JSON.parse(e)},lf=()=>{try{return CT()||DT()||MT()||PT()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},N1=i=>lf()?.emulatorHosts?.[i],R1=i=>{const e=N1(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},C1=()=>lf()?.config,I1=i=>lf()?.[`_${i}`];class zT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Br(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Mm(i){return(await fetch(i,{credentials:"include"})).ok}function j1(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Vd(JSON.stringify(n)),Vd(JSON.stringify(f)),""].join(".")}const yc={};function VT(){const i={prod:[],emulator:[]};for(const e of Object.keys(yc))yc[e]?i.emulator.push(e):i.prod.push(e);return i}function LT(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let wx=!1;function Pm(i,e){if(typeof window>"u"||typeof document>"u"||!Br(window.location.host)||yc[i]===e||yc[i]||wx)return;yc[i]=e;function n(T){return`__firebase__banner__${T}`}const s="__firebase__banner",u=VT().prod.length>0;function f(){const T=document.getElementById(s);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function b(T,M){T.setAttribute("width","24"),T.setAttribute("id",M),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{wx=!0,f()},T}function v(T,M){T.setAttribute("id",M),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=LT(s),M=n("text"),G=document.getElementById(M)||document.createElement("span"),B=n("learnmore"),U=document.getElementById(B)||document.createElement("a"),V=n("preprendIcon"),$=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const K=T.element;m(K),v(U,B);const re=g();b($,V),K.append($,G,U,re),document.body.appendChild(K)}u?(G.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bn())}function BT(){const i=lf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function qT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function FT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GT(){const i=Bn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function $T(){return!BT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YT(){try{return typeof indexedDB=="object"}catch{return!1}}function QT(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const KT="FirebaseError";class wi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=KT,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zc.prototype.create)}}class zc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?XT(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new wi(o,m,s)}}function XT(i,e){return i.replace(JT,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const JT=/\{\$([^}]+)}/g;function WT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Xi(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],f=e[o];if(Ax(u)&&Ax(f)){if(!Xi(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Ax(i){return i!==null&&typeof i=="object"}function Vc(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function fc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function hc(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function ZT(i,e){const n=new eN(i,e);return n.subscribe.bind(n)}class eN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");tN(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Vp),o.error===void 0&&(o.error=Vp),o.complete===void 0&&(o.complete=Vp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tN(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Vp(){}function ln(i){return i&&i._delegate?i._delegate:i}class $s{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Cr="[DEFAULT]";class nN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new zT;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iN(e))try{this.getOrInitializeService({instanceIdentifier:Cr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Cr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cr){return this.instances.has(e)}getOptions(e=Cr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:aN(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Cr){return this.component?this.component.multipleInstances?e:Cr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aN(i){return i===Cr?void 0:i}function iN(i){return i.instantiationMode==="EAGER"}class sN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var dt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(dt||(dt={}));const rN={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},oN=dt.INFO,lN={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},cN=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=lN[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zm{constructor(e){this.name=e,this._logLevel=oN,this._logHandler=cN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}const uN=(i,e)=>e.some(n=>i instanceof n);let Sx,Tx;function dN(){return Sx||(Sx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fN(){return Tx||(Tx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const k1=new WeakMap,Zp=new WeakMap,O1=new WeakMap,Lp=new WeakMap,Vm=new WeakMap;function hN(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(Hs(i.result)),o()},f=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&k1.set(n,i)}).catch(()=>{}),Vm.set(e,i),e}function pN(i){if(Zp.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});Zp.set(i,e)}let em={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Zp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||O1.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hs(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function mN(i){em=i(em)}function gN(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Up(this),e,...n);return O1.set(s,e.sort?e.sort():[e]),Hs(s)}:fN().includes(i)?function(...e){return i.apply(Up(this),e),Hs(k1.get(this))}:function(...e){return Hs(i.apply(Up(this),e))}}function bN(i){return typeof i=="function"?gN(i):(i instanceof IDBTransaction&&pN(i),uN(i,dN())?new Proxy(i,em):i)}function Hs(i){if(i instanceof IDBRequest)return hN(i);if(Lp.has(i))return Lp.get(i);const e=bN(i);return e!==i&&(Lp.set(i,e),Vm.set(e,i)),e}const Up=i=>Vm.get(i);function yN(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),m=Hs(f);return s&&f.addEventListener("upgradeneeded",b=>{s(Hs(f.result),b.oldVersion,b.newVersion,Hs(f.transaction),b)}),n&&f.addEventListener("blocked",b=>n(b.oldVersion,b.newVersion,b)),m.then(b=>{u&&b.addEventListener("close",()=>u()),o&&b.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const xN=["get","getKey","getAll","getAllKeys","count"],vN=["put","add","delete","clear"],Bp=new Map;function Nx(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Bp.get(e))return Bp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=vN.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||xN.includes(n)))return;const u=async function(f,...m){const b=this.transaction(f,o?"readwrite":"readonly");let g=b.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&b.done]))[0]};return Bp.set(e,u),u}mN(i=>({...i,get:(e,n,s)=>Nx(e,n)||i.get(e,n,s),has:(e,n)=>!!Nx(e,n)||i.has(e,n)}));class _N{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(EN(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function EN(i){return i.getComponent()?.type==="VERSION"}const tm="@firebase/app",Rx="0.14.7";const Ji=new zm("@firebase/app"),wN="@firebase/app-compat",AN="@firebase/analytics-compat",SN="@firebase/analytics",TN="@firebase/app-check-compat",NN="@firebase/app-check",RN="@firebase/auth",CN="@firebase/auth-compat",IN="@firebase/database",jN="@firebase/data-connect",kN="@firebase/database-compat",ON="@firebase/functions",DN="@firebase/functions-compat",MN="@firebase/installations",PN="@firebase/installations-compat",zN="@firebase/messaging",VN="@firebase/messaging-compat",LN="@firebase/performance",UN="@firebase/performance-compat",BN="@firebase/remote-config",HN="@firebase/remote-config-compat",qN="@firebase/storage",FN="@firebase/storage-compat",GN="@firebase/firestore",$N="@firebase/ai",YN="@firebase/firestore-compat",QN="firebase",KN="12.8.0";const nm="[DEFAULT]",XN={[tm]:"fire-core",[wN]:"fire-core-compat",[SN]:"fire-analytics",[AN]:"fire-analytics-compat",[NN]:"fire-app-check",[TN]:"fire-app-check-compat",[RN]:"fire-auth",[CN]:"fire-auth-compat",[IN]:"fire-rtdb",[jN]:"fire-data-connect",[kN]:"fire-rtdb-compat",[ON]:"fire-fn",[DN]:"fire-fn-compat",[MN]:"fire-iid",[PN]:"fire-iid-compat",[zN]:"fire-fcm",[VN]:"fire-fcm-compat",[LN]:"fire-perf",[UN]:"fire-perf-compat",[BN]:"fire-rc",[HN]:"fire-rc-compat",[qN]:"fire-gcs",[FN]:"fire-gcs-compat",[GN]:"fire-fst",[YN]:"fire-fst-compat",[$N]:"fire-vertex","fire-js":"fire-js",[QN]:"fire-js-all"};const Fo=new Map,am=new Map,im=new Map;function Cx(i,e){try{i.container.addComponent(e)}catch(n){Ji.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Dr(i){const e=i.name;if(im.has(e))return Ji.debug(`There were multiple attempts to register component ${e}.`),!1;im.set(e,i);for(const n of Fo.values())Cx(n,i);for(const n of am.values())Cx(n,i);return!0}function cf(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function da(i){return i==null?!1:i.settings!==void 0}const JN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qs=new zc("app","Firebase",JN);class WN{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new $s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qs.create("app-deleted",{appName:this._name})}}const Hr=KN;function Lm(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:nm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw qs.create("bad-app-name",{appName:String(o)});if(n||(n=C1()),!n)throw qs.create("no-options");const u=Fo.get(o);if(u){if(Xi(n,u.options)&&Xi(s,u.config))return u;throw qs.create("duplicate-app",{appName:o})}const f=new sN(o);for(const b of im.values())f.addComponent(b);const m=new WN(n,s,f);return Fo.set(o,m),m}function Um(i=nm){const e=Fo.get(i);if(!e&&i===nm&&C1())return Lm();if(!e)throw qs.create("no-app",{appName:i});return e}async function ZN(i){let e=!1;const n=i.name;Fo.has(n)?(e=!0,Fo.delete(n)):am.has(n)&&i.decRefCount()<=0&&(am.delete(n),e=!0),e&&(await Promise.all(i.container.getProviders().map(s=>s.delete())),i.isDeleted=!0)}function pi(i,e,n){let s=XN[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ji.warn(f.join(" "));return}Dr(new $s(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const e2="firebase-heartbeat-database",t2=1,Nc="firebase-heartbeat-store";let Hp=null;function D1(){return Hp||(Hp=yN(e2,t2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Nc)}catch(n){console.warn(n)}}}}).catch(i=>{throw qs.create("idb-open",{originalErrorMessage:i.message})})),Hp}async function n2(i){try{const n=(await D1()).transaction(Nc),s=await n.objectStore(Nc).get(M1(i));return await n.done,s}catch(e){if(e instanceof wi)Ji.warn(e.message);else{const n=qs.create("idb-get",{originalErrorMessage:e?.message});Ji.warn(n.message)}}}async function Ix(i,e){try{const s=(await D1()).transaction(Nc,"readwrite");await s.objectStore(Nc).put(e,M1(i)),await s.done}catch(n){if(n instanceof wi)Ji.warn(n.message);else{const s=qs.create("idb-set",{originalErrorMessage:n?.message});Ji.warn(s.message)}}}function M1(i){return`${i.name}!${i.options.appId}`}const a2=1024,i2=30;class s2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new o2(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>i2){const o=l2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ji.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=jx(),{heartbeatsToSend:n,unsentEntries:s}=r2(this._heartbeatsCache.heartbeats),o=Vd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ji.warn(e),""}}}function jx(){return new Date().toISOString().substring(0,10)}function r2(i,e=a2){const n=[];let s=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),kx(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),kx(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class o2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YT()?QT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await n2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ix(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ix(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function kx(i){return Vd(JSON.stringify({version:2,heartbeats:i})).length}function l2(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function c2(i){Dr(new $s("platform-logger",e=>new _N(e),"PRIVATE")),Dr(new $s("heartbeat",e=>new s2(e),"PRIVATE")),pi(tm,Rx,i),pi(tm,Rx,"esm2020"),pi("fire-js","")}c2("");var u2="firebase",d2="12.8.0";pi(u2,d2,"app");function P1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const f2=P1,z1=new zc("auth","Firebase",P1());const Ld=new zm("@firebase/auth");function h2(i,...e){Ld.logLevel<=dt.WARN&&Ld.warn(`Auth (${Hr}): ${i}`,...e)}function Td(i,...e){Ld.logLevel<=dt.ERROR&&Ld.error(`Auth (${Hr}): ${i}`,...e)}function qa(i,...e){throw Bm(i,...e)}function mi(i,...e){return Bm(i,...e)}function V1(i,e,n){const s={...f2(),[e]:n};return new zc("auth","Firebase",s).create(e,{appName:i.name})}function Yi(i){return V1(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bm(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return z1.create(i,...e)}function Fe(i,e,...n){if(!i)throw Bm(e,...n)}function Fi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Td(e),new Error(e)}function Wi(i,e){i||Fi(e)}function sm(){return typeof self<"u"&&self.location?.href||""}function p2(){return Ox()==="http:"||Ox()==="https:"}function Ox(){return typeof self<"u"&&self.location?.protocol||null}function m2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(p2()||qT()||"connection"in navigator)?navigator.onLine:!0}function g2(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Lc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wi(n>e,"Short delay should be less than long delay!"),this.isMobile=UT()||FT()}get(){return m2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Hm(i,e){Wi(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class L1{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const b2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const y2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],x2=new Lc(3e4,6e4);function er(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function as(i,e,n,s,o={}){return U1(i,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=Vc({key:i.config.apiKey,...f}).slice(1),b=await i._getAdditionalHeaders();b["Content-Type"]="application/json",i.languageCode&&(b["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:b,...u};return HT()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Br(i.emulatorConfig.host)&&(g.credentials="include"),L1.fetch()(await B1(i,i.config.apiHost,n,m),g)})}async function U1(i,e,n){i._canInitEmulator=!1;const s={...b2,...e};try{const o=new _2(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw bd(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[b,g]=m.split(" : ");if(b==="FEDERATED_USER_ID_ALREADY_LINKED")throw bd(i,"credential-already-in-use",f);if(b==="EMAIL_EXISTS")throw bd(i,"email-already-in-use",f);if(b==="USER_DISABLED")throw bd(i,"user-disabled",f);const v=s[b]||b.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw V1(i,v,g);qa(i,v)}}catch(o){if(o instanceof wi)throw o;qa(i,"network-request-failed",{message:String(o)})}}async function Uc(i,e,n,s,o={}){const u=await as(i,e,n,s,o);return"mfaPendingCredential"in u&&qa(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function B1(i,e,n,s){const o=`${e}${n}?${s}`,u=i,f=u.config.emulator?Hm(i.config,o):`${i.config.apiScheme}://${o}`;return y2.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function v2(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(mi(this.auth,"network-request-failed")),x2.get())})}}function bd(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=mi(i,e,s);return o.customData._tokenResponse=n,o}function Dx(i){return i!==void 0&&i.enterprise!==void 0}class E2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return v2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function w2(i,e){return as(i,"GET","/v2/recaptchaConfig",er(i,e))}async function A2(i,e){return as(i,"POST","/v1/accounts:delete",e)}async function Ud(i,e){return as(i,"POST","/v1/accounts:lookup",e)}function xc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function S2(i,e=!1){const n=ln(i),s=await n.getIdToken(e),o=qm(s);Fe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:xc(qp(o.auth_time)),issuedAtTime:xc(qp(o.iat)),expirationTime:xc(qp(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function qp(i){return Number(i)*1e3}function qm(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Td("JWT malformed, contained fewer than 3 sections"),null;try{const o=T1(n);return o?JSON.parse(o):(Td("Failed to decode base64 JWT payload"),null)}catch(o){return Td("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Mx(i){const e=qm(i);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Go(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof wi&&T2(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function T2({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class N2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class rm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xc(this.lastLoginAt),this.creationTime=xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Bd(i){const e=i.auth,n=await i.getIdToken(),s=await Go(i,Ud(e,{idToken:n}));Fe(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?H1(o.providerUserInfo):[],f=C2(i.providerData,u),m=i.isAnonymous,b=!(i.email&&o.passwordHash)&&!f?.length,g=m?b:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new rm(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(i,v)}async function R2(i){const e=ln(i);await Bd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function C2(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function H1(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function I2(i,e){const n=await U1(i,{},async()=>{const s=Vc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await B1(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const b={method:"POST",headers:m,body:s};return i.emulatorConfig&&Br(i.emulatorConfig.host)&&(b.credentials="include"),L1.fetch()(f,b)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function j2(i,e){return as(i,"POST","/v2/accounts:revokeToken",er(i,e))}class Lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=Mx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await I2(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new Lo;return s&&(Fe(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Fe(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Fe(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lo,this.toJSON())}_performRefresh(){return Fi("not implemented")}}function Ms(i,e){Fe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Ua{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new N2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new rm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Go(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return S2(this,e)}reload(){return R2(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ua({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Bd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(da(this.auth.app))return Promise.reject(Yi(this.auth));const e=await this.getIdToken();return await Go(this,A2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,b=n._redirectEventId??void 0,g=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:M,providerData:G,stsTokenManager:B}=n;Fe(E&&B,e,"internal-error");const U=Lo.fromJSON(this.name,B);Fe(typeof E=="string",e,"internal-error"),Ms(s,e.name),Ms(o,e.name),Fe(typeof T=="boolean",e,"internal-error"),Fe(typeof M=="boolean",e,"internal-error"),Ms(u,e.name),Ms(f,e.name),Ms(m,e.name),Ms(b,e.name),Ms(g,e.name),Ms(v,e.name);const V=new Ua({uid:E,auth:e,email:o,emailVerified:T,displayName:s,isAnonymous:M,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:U,createdAt:g,lastLoginAt:v});return G&&Array.isArray(G)&&(V.providerData=G.map($=>({...$}))),b&&(V._redirectEventId=b),V}static async _fromIdTokenResponse(e,n,s=!1){const o=new Lo;o.updateFromServerResponse(n);const u=new Ua({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Bd(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Fe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?H1(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new Lo;m.updateFromIdToken(s);const b=new Ua({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new rm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(b,g),b}}const Px=new Map;function Gi(i){Wi(i instanceof Function,"Expected a class definition");let e=Px.get(i);return e?(Wi(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Px.set(i,e),e)}class q1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}q1.type="NONE";const zx=q1;function Nd(i,e,n){return`firebase:${i}:${e}:${n}`}class Uo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Nd(this.userKey,o.apiKey,u),this.fullPersistenceKey=Nd("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ud(this.auth,{idToken:e}).catch(()=>{});return n?Ua._fromGetAccountInfoResponse(this.auth,n,e):null}return Ua._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Uo(Gi(zx),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||Gi(zx);const f=Nd(s,e.config.apiKey,e.name);let m=null;for(const g of n)try{const v=await g._get(f);if(v){let E;if(typeof v=="string"){const T=await Ud(e,{idToken:v}).catch(()=>{});if(!T)break;E=await Ua._fromGetAccountInfoResponse(e,T,v)}else E=Ua._fromJSON(e,v);g!==u&&(m=E),u=g;break}}catch{}const b=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!b.length?new Uo(u,e,s):(u=b[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new Uo(u,e,s))}}function Vx(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Y1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(K1(e))return"Blackberry";if(X1(e))return"Webos";if(G1(e))return"Safari";if((e.includes("chrome/")||$1(e))&&!e.includes("edge/"))return"Chrome";if(Q1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function F1(i=Bn()){return/firefox\//i.test(i)}function G1(i=Bn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $1(i=Bn()){return/crios\//i.test(i)}function Y1(i=Bn()){return/iemobile/i.test(i)}function Q1(i=Bn()){return/android/i.test(i)}function K1(i=Bn()){return/blackberry/i.test(i)}function X1(i=Bn()){return/webos/i.test(i)}function Fm(i=Bn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function k2(i=Bn()){return Fm(i)&&!!window.navigator?.standalone}function O2(){return GT()&&document.documentMode===10}function J1(i=Bn()){return Fm(i)||Q1(i)||X1(i)||K1(i)||/windows phone/i.test(i)||Y1(i)}function W1(i,e=[]){let n;switch(i){case"Browser":n=Vx(Bn());break;case"Worker":n=`${Vx(Bn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Hr}/${s}`}class D2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const b=e(u);f(b)}catch(b){m(b)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function M2(i,e={}){return as(i,"GET","/v2/passwordPolicy",er(i,e))}const P2=6;class z2{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??P2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class V2{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lx(this),this.idTokenSubscription=new Lx(this),this.beforeStateQueue=new D2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Uo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ud(this,{idToken:e}),s=await Ua._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(da(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=g2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(da(this.app))return Promise.reject(Yi(this));const n=e?ln(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return da(this.app)?Promise.reject(Yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return da(this.app)?Promise.reject(Yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await M2(this),n=new z2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await j2(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gi(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await Uo.create(this,[Gi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const b=e.addObserver(n,s,o);return()=>{f=!0,b()}}else{const b=e.addObserver(n);return()=>{f=!0,b()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=W1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(da(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&h2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function qr(i){return ln(i)}class Lx{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZT(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let uf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function L2(i){uf=i}function Z1(i){return uf.loadJS(i)}function U2(){return uf.recaptchaEnterpriseScript}function B2(){return uf.gapiScript}function H2(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class q2{constructor(){this.enterprise=new F2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class F2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const G2="recaptcha-enterprise",e_="NO_RECAPTCHA";class $2{constructor(e){this.type=G2,this.auth=qr(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{w2(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(b=>{if(b.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new E2(b);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,f(g.siteKey)}}).catch(b=>{m(b)})})}function o(u,f,m){const b=window.grecaptcha;Dx(b)?b.enterprise.ready(()=>{b.enterprise.execute(u,{action:e}).then(g=>{f(g)}).catch(()=>{f(e_)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new q2().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&Dx(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let b=U2();b.length!==0&&(b+=m),Z1(b).then(()=>{o(m,u,f)}).catch(g=>{f(g)})}}).catch(m=>{f(m)})})}}async function Ux(i,e,n,s=!1,o=!1){const u=new $2(i);let f;if(o)f=e_;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const b=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:b,recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const b=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:b,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function om(i,e,n,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Ux(i,e,n,n==="getOobCode");return s(i,u)}else return s(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Ux(i,e,n,n==="getOobCode");return s(i,f)}else return Promise.reject(u)})}function Y2(i,e){const n=cf(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Xi(u,e??{}))return o;qa(o,"already-initialized")}return n.initialize({options:e})}function Q2(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Gi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function Gm(i,e,n){const s=qr(i);Fe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!!n?.disableWarnings,u=t_(e),{host:f,port:m}=K2(e),b=m===null?"":`:${m}`,g={url:`${u}//${f}${b}/`},v=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Fe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Fe(Xi(g,s.config.emulator)&&Xi(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Br(f)?(Mm(`${u}//${f}${b}`),Pm("Auth",!0)):o||X2()}function t_(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function K2(i){const e=t_(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:Bx(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:Bx(f)}}}function Bx(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function X2(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class $m{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fi("not implemented")}_getIdTokenResponse(e){return Fi("not implemented")}_linkToIdToken(e,n){return Fi("not implemented")}_getReauthenticationResolver(e){return Fi("not implemented")}}async function J2(i,e){return as(i,"POST","/v1/accounts:update",e)}async function W2(i,e){return as(i,"POST","/v1/accounts:signUp",e)}async function Z2(i,e){return Uc(i,"POST","/v1/accounts:signInWithPassword",er(i,e))}async function eR(i,e){return Uc(i,"POST","/v1/accounts:signInWithEmailLink",er(i,e))}async function tR(i,e){return Uc(i,"POST","/v1/accounts:signInWithEmailLink",er(i,e))}class Rc extends $m{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Rc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Rc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return om(e,n,"signInWithPassword",Z2);case"emailLink":return eR(e,{email:this._email,oobCode:this._password});default:qa(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return om(e,s,"signUpPassword",W2);case"emailLink":return tR(e,{idToken:n,email:this._email,oobCode:this._password});default:qa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Bo(i,e){return Uc(i,"POST","/v1/accounts:signInWithIdp",er(i,e))}const nR="http://localhost";class Mr extends $m{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Mr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qa("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new Mr(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Bo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Bo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bo(e,n)}buildRequest(){const e={requestUri:nR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vc(n)}return e}}function aR(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iR(i){const e=fc(hc(i)).link,n=e?fc(hc(e)).deep_link_id:null,s=fc(hc(i)).deep_link_id;return(s?fc(hc(s)).link:null)||s||n||e||i}class Ym{constructor(e){const n=fc(hc(e)),s=n.apiKey??null,o=n.oobCode??null,u=aR(n.mode??null);Fe(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=iR(e);try{return new Ym(n)}catch{return null}}}class nl{constructor(){this.providerId=nl.PROVIDER_ID}static credential(e,n){return Rc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Ym.parseLink(n);return Fe(s,"argument-error"),Rc._fromEmailAndCode(e,s.code,s.tenantId)}}nl.PROVIDER_ID="password";nl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class n_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Bc extends n_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ps extends Bc{constructor(){super("facebook.com")}static credential(e){return Mr._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ps.PROVIDER_ID="facebook.com";class zs extends Bc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Mr._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return zs.credential(n,s)}catch{return null}}}zs.GOOGLE_SIGN_IN_METHOD="google.com";zs.PROVIDER_ID="google.com";class Vs extends Bc{constructor(){super("github.com")}static credential(e){return Mr._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.GITHUB_SIGN_IN_METHOD="github.com";Vs.PROVIDER_ID="github.com";class Ls extends Bc{constructor(){super("twitter.com")}static credential(e,n){return Mr._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ls.credential(n,s)}catch{return null}}}Ls.TWITTER_SIGN_IN_METHOD="twitter.com";Ls.PROVIDER_ID="twitter.com";async function sR(i,e){return Uc(i,"POST","/v1/accounts:signUp",er(i,e))}class Pr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Ua._fromIdTokenResponse(e,s,o),f=Hx(s);return new Pr({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Hx(s);return new Pr({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Hx(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class Hd extends wi{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Hd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Hd(e,n,s,o)}}function a_(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Hd._fromErrorAndOperation(i,u,e,s):u})}async function rR(i,e,n=!1){const s=await Go(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Pr._forOperation(i,"link",s)}async function oR(i,e,n=!1){const{auth:s}=i;if(da(s.app))return Promise.reject(Yi(s));const o="reauthenticate";try{const u=await Go(i,a_(s,o,e,i),n);Fe(u.idToken,s,"internal-error");const f=qm(u.idToken);Fe(f,s,"internal-error");const{sub:m}=f;return Fe(i.uid===m,s,"user-mismatch"),Pr._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&qa(s,"user-mismatch"),u}}async function i_(i,e,n=!1){if(da(i.app))return Promise.reject(Yi(i));const s="signIn",o=await a_(i,s,e),u=await Pr._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function lR(i,e){return i_(qr(i),e)}async function s_(i){const e=qr(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cR(i,e,n){if(da(i.app))return Promise.reject(Yi(i));const s=qr(i),f=await om(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sR).catch(b=>{throw b.code==="auth/password-does-not-meet-requirements"&&s_(i),b}),m=await Pr._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(m.user),m}function r_(i,e,n){return da(i.app)?Promise.reject(Yi(i)):lR(ln(i),nl.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&s_(i),s})}function uR(i,e){return dR(ln(i),null,e)}async function dR(i,e,n){const{auth:s}=i,u={idToken:await i.getIdToken(),returnSecureToken:!0};n&&(u.password=n);const f=await Go(i,J2(s,u));await i._updateTokensIfNecessary(f,!0)}function fR(i,e,n,s){return ln(i).onIdTokenChanged(e,n,s)}function hR(i,e,n){return ln(i).beforeAuthStateChanged(e,n)}function df(i,e,n,s){return ln(i).onAuthStateChanged(e,n,s)}function pR(i){return ln(i).signOut()}const qd="__sak";class o_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qd,"1"),this.storage.removeItem(qd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const mR=1e3,gR=10;class l_ extends o_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=J1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,b)=>{this.notifyListeners(f,b)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);O2()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,gR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},mR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}l_.type="LOCAL";const bR=l_;class c_ extends o_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}c_.type="SESSION";const u_=c_;function yR(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class ff{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new ff(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async g=>g(n.origin,u)),b=await yR(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:b})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ff.receivers=[];function Qm(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class xR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,b)=>{const g=Qm("",20);o.port1.start();const v=setTimeout(()=>{b(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(v),u=setTimeout(()=>{b(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(T.data.response);break;default:clearTimeout(v),clearTimeout(u),b(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function gi(){return window}function vR(i){gi().location.href=i}function d_(){return typeof gi().WorkerGlobalScope<"u"&&typeof gi().importScripts=="function"}async function _R(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ER(){return navigator?.serviceWorker?.controller||null}function wR(){return d_()?self:null}const f_="firebaseLocalStorageDb",AR=1,Fd="firebaseLocalStorage",h_="fbase_key";class Hc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function hf(i,e){return i.transaction([Fd],e?"readwrite":"readonly").objectStore(Fd)}function SR(){const i=indexedDB.deleteDatabase(f_);return new Hc(i).toPromise()}function lm(){const i=indexedDB.open(f_,AR);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Fd,{keyPath:h_})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Fd)?e(s):(s.close(),await SR(),e(await lm()))})})}async function qx(i,e,n){const s=hf(i,!0).put({[h_]:e,value:n});return new Hc(s).toPromise()}async function TR(i,e){const n=hf(i,!1).get(e),s=await new Hc(n).toPromise();return s===void 0?null:s.value}function Fx(i,e){const n=hf(i,!0).delete(e);return new Hc(n).toPromise()}const NR=800,RR=3;class p_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await lm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>RR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return d_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ff._getInstance(wR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _R(),!this.activeServiceWorker)return;this.sender=new xR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ER()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await lm();return await qx(e,qd,"1"),await Fx(e,qd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>qx(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>TR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Fx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=hf(o,!1).getAll();return new Hc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}p_.type="LOCAL";const CR=p_;new Lc(3e4,6e4);function IR(i,e){return e?Gi(e):(Fe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Km extends $m{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jR(i){return i_(i.auth,new Km(i),i.bypassAuthState)}function kR(i){const{auth:e,user:n}=i;return Fe(n,e,"internal-error"),oR(n,new Km(i),i.bypassAuthState)}async function OR(i){const{auth:e,user:n}=i;return Fe(n,e,"internal-error"),rR(n,new Km(i),i.bypassAuthState)}class m_{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const b={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(b))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jR;case"linkViaPopup":case"linkViaRedirect":return OR;case"reauthViaPopup":case"reauthViaRedirect":return kR;default:qa(this.auth,"internal-error")}}resolve(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const DR=new Lc(2e3,1e4);class Vo extends m_{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Vo.currentPopupAction&&Vo.currentPopupAction.cancel(),Vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){Wi(this.filter.length===1,"Popup operations only handle one event");const e=Qm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DR.get())};e()}}Vo.currentPopupAction=null;const MR="pendingRedirect",Rd=new Map;class PR extends m_{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Rd.get(this.auth._key());if(!e){try{const s=await zR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Rd.set(this.auth._key(),e)}return this.bypassAuthState||Rd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zR(i,e){const n=UR(e),s=LR(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function VR(i,e){Rd.set(i._key(),e)}function LR(i){return Gi(i._redirectPersistence)}function UR(i){return Nd(MR,i.config.apiKey,i.name)}async function BR(i,e,n=!1){if(da(i.app))return Promise.reject(Yi(i));const s=qr(i),o=IR(s,e),f=await new PR(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}const HR=600*1e3;class qR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!g_(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(mi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gx(e))}saveEventToCache(e){this.cachedEventUids.add(Gx(e)),this.lastProcessedEventTime=Date.now()}}function Gx(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function g_({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function FR(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return g_(i);default:return!1}}async function GR(i,e={}){return as(i,"GET","/v1/projects",e)}const $R=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YR=/^https?/;async function QR(i){if(i.config.emulator)return;const{authorizedDomains:e}=await GR(i);for(const n of e)try{if(KR(n))return}catch{}qa(i,"unauthorized-domain")}function KR(i){const e=sm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!YR.test(n))return!1;if($R.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const XR=new Lc(3e4,6e4);function $x(){const i=gi().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function JR(i){return new Promise((e,n)=>{function s(){$x(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$x(),n(mi(i,"network-request-failed"))},timeout:XR.get()})}if(gi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(gi().gapi?.load)s();else{const o=H2("iframefcb");return gi()[o]=()=>{gapi.load?s():n(mi(i,"network-request-failed"))},Z1(`${B2()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Cd=null,e})}let Cd=null;function WR(i){return Cd=Cd||JR(i),Cd}const ZR=new Lc(5e3,15e3),eC="__/auth/iframe",tC="emulator/auth/iframe",nC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iC(i){const e=i.config;Fe(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Hm(e,tC):`https://${i.config.authDomain}/${eC}`,s={apiKey:e.apiKey,appName:i.name,v:Hr},o=aC.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Vc(s).slice(1)}`}async function sC(i){const e=await WR(i),n=gi().gapi;return Fe(n,i,"internal-error"),e.open({where:document.body,url:iC(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nC,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=mi(i,"network-request-failed"),m=gi().setTimeout(()=>{u(f)},ZR.get());function b(){gi().clearTimeout(m),o(s)}s.ping(b).then(b,()=>{u(f)})}))}const rC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oC=500,lC=600,cC="_blank",uC="http://localhost";class Yx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dC(i,e,n,s=oC,o=lC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const b={...rC,width:s.toString(),height:o.toString(),top:u,left:f},g=Bn().toLowerCase();n&&(m=$1(g)?cC:n),F1(g)&&(e=e||uC,b.scrollbars="yes");const v=Object.entries(b).reduce((T,[M,G])=>`${T}${M}=${G},`,"");if(k2(g)&&m!=="_self")return fC(e||"",m),new Yx(null);const E=window.open(e||"",m,v);Fe(E,i,"popup-blocked");try{E.focus()}catch{}return new Yx(E)}function fC(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const hC="__/auth/handler",pC="emulator/auth/handler",mC=encodeURIComponent("fac");async function Qx(i,e,n,s,o,u){Fe(i.config.authDomain,i,"auth-domain-config-required"),Fe(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Hr,eventId:o};if(e instanceof n_){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",WT(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))f[v]=E}if(e instanceof Bc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(f.scopes=v.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const b=await i._getAppCheckToken(),g=b?`#${mC}=${encodeURIComponent(b)}`:"";return`${gC(i)}?${Vc(m).slice(1)}${g}`}function gC({config:i}){return i.emulator?Hm(i,pC):`https://${i.authDomain}/${hC}`}const Fp="webStorageSupport";class bC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=u_,this._completeRedirectFn=BR,this._overrideRedirectResult=VR}async _openPopup(e,n,s,o){Wi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Qx(e,n,s,sm(),o);return dC(e,u,Qm())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await Qx(e,n,s,sm(),o);return vR(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Wi(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await sC(e),s=new qR(e);return n.register("authEvent",o=>(Fe(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fp,{type:Fp},o=>{const u=o?.[0]?.[Fp];u!==void 0&&n(!!u),qa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return J1()||G1()||Fm()}}const yC=bC;var Kx="@firebase/auth",Xx="1.12.0";class xC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function vC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _C(i){Dr(new $s("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;Fe(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const b={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W1(i)},g=new V2(s,o,u,b);return Q2(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Dr(new $s("auth-internal",e=>{const n=qr(e.getProvider("auth").getImmediate());return(s=>new xC(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(Kx,Xx,vC(i)),pi(Kx,Xx,"esm2020")}const EC=300,wC=I1("authIdTokenMaxAge")||EC;let Jx=null;const AC=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>wC)return;const o=n?.token;Jx!==o&&(Jx=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function b_(i=Um()){const e=cf(i,"auth");if(e.isInitialized())return e.getImmediate();const n=Y2(i,{popupRedirectResolver:yC,persistence:[CR,bR,u_]}),s=I1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=AC(u.toString());hR(n,f,()=>f(n.currentUser)),fR(n,m=>f(m))}}const o=N1("auth");return o&&Gm(n,`http://${o}`),n}function SC(){return document.getElementsByTagName("head")?.[0]??document}L2({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=mi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",SC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_C("Browser");var Wx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Fs,y_;(function(){var i;function e(w,C){function I(){}I.prototype=C.prototype,w.F=C.prototype,w.prototype=new I,w.prototype.constructor=w,w.D=function(k,j,O){for(var N=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)N[Ve-2]=arguments[Ve];return C.prototype[j].apply(k,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(w,C,I){I||(I=0);const k=Array(16);if(typeof C=="string")for(var j=0;j<16;++j)k[j]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(j=0;j<16;++j)k[j]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=w.g[0],I=w.g[1],j=w.g[2];let O=w.g[3],N;N=C+(O^I&(j^O))+k[0]+3614090360&4294967295,C=I+(N<<7&4294967295|N>>>25),N=O+(j^C&(I^j))+k[1]+3905402710&4294967295,O=C+(N<<12&4294967295|N>>>20),N=j+(I^O&(C^I))+k[2]+606105819&4294967295,j=O+(N<<17&4294967295|N>>>15),N=I+(C^j&(O^C))+k[3]+3250441966&4294967295,I=j+(N<<22&4294967295|N>>>10),N=C+(O^I&(j^O))+k[4]+4118548399&4294967295,C=I+(N<<7&4294967295|N>>>25),N=O+(j^C&(I^j))+k[5]+1200080426&4294967295,O=C+(N<<12&4294967295|N>>>20),N=j+(I^O&(C^I))+k[6]+2821735955&4294967295,j=O+(N<<17&4294967295|N>>>15),N=I+(C^j&(O^C))+k[7]+4249261313&4294967295,I=j+(N<<22&4294967295|N>>>10),N=C+(O^I&(j^O))+k[8]+1770035416&4294967295,C=I+(N<<7&4294967295|N>>>25),N=O+(j^C&(I^j))+k[9]+2336552879&4294967295,O=C+(N<<12&4294967295|N>>>20),N=j+(I^O&(C^I))+k[10]+4294925233&4294967295,j=O+(N<<17&4294967295|N>>>15),N=I+(C^j&(O^C))+k[11]+2304563134&4294967295,I=j+(N<<22&4294967295|N>>>10),N=C+(O^I&(j^O))+k[12]+1804603682&4294967295,C=I+(N<<7&4294967295|N>>>25),N=O+(j^C&(I^j))+k[13]+4254626195&4294967295,O=C+(N<<12&4294967295|N>>>20),N=j+(I^O&(C^I))+k[14]+2792965006&4294967295,j=O+(N<<17&4294967295|N>>>15),N=I+(C^j&(O^C))+k[15]+1236535329&4294967295,I=j+(N<<22&4294967295|N>>>10),N=C+(j^O&(I^j))+k[1]+4129170786&4294967295,C=I+(N<<5&4294967295|N>>>27),N=O+(I^j&(C^I))+k[6]+3225465664&4294967295,O=C+(N<<9&4294967295|N>>>23),N=j+(C^I&(O^C))+k[11]+643717713&4294967295,j=O+(N<<14&4294967295|N>>>18),N=I+(O^C&(j^O))+k[0]+3921069994&4294967295,I=j+(N<<20&4294967295|N>>>12),N=C+(j^O&(I^j))+k[5]+3593408605&4294967295,C=I+(N<<5&4294967295|N>>>27),N=O+(I^j&(C^I))+k[10]+38016083&4294967295,O=C+(N<<9&4294967295|N>>>23),N=j+(C^I&(O^C))+k[15]+3634488961&4294967295,j=O+(N<<14&4294967295|N>>>18),N=I+(O^C&(j^O))+k[4]+3889429448&4294967295,I=j+(N<<20&4294967295|N>>>12),N=C+(j^O&(I^j))+k[9]+568446438&4294967295,C=I+(N<<5&4294967295|N>>>27),N=O+(I^j&(C^I))+k[14]+3275163606&4294967295,O=C+(N<<9&4294967295|N>>>23),N=j+(C^I&(O^C))+k[3]+4107603335&4294967295,j=O+(N<<14&4294967295|N>>>18),N=I+(O^C&(j^O))+k[8]+1163531501&4294967295,I=j+(N<<20&4294967295|N>>>12),N=C+(j^O&(I^j))+k[13]+2850285829&4294967295,C=I+(N<<5&4294967295|N>>>27),N=O+(I^j&(C^I))+k[2]+4243563512&4294967295,O=C+(N<<9&4294967295|N>>>23),N=j+(C^I&(O^C))+k[7]+1735328473&4294967295,j=O+(N<<14&4294967295|N>>>18),N=I+(O^C&(j^O))+k[12]+2368359562&4294967295,I=j+(N<<20&4294967295|N>>>12),N=C+(I^j^O)+k[5]+4294588738&4294967295,C=I+(N<<4&4294967295|N>>>28),N=O+(C^I^j)+k[8]+2272392833&4294967295,O=C+(N<<11&4294967295|N>>>21),N=j+(O^C^I)+k[11]+1839030562&4294967295,j=O+(N<<16&4294967295|N>>>16),N=I+(j^O^C)+k[14]+4259657740&4294967295,I=j+(N<<23&4294967295|N>>>9),N=C+(I^j^O)+k[1]+2763975236&4294967295,C=I+(N<<4&4294967295|N>>>28),N=O+(C^I^j)+k[4]+1272893353&4294967295,O=C+(N<<11&4294967295|N>>>21),N=j+(O^C^I)+k[7]+4139469664&4294967295,j=O+(N<<16&4294967295|N>>>16),N=I+(j^O^C)+k[10]+3200236656&4294967295,I=j+(N<<23&4294967295|N>>>9),N=C+(I^j^O)+k[13]+681279174&4294967295,C=I+(N<<4&4294967295|N>>>28),N=O+(C^I^j)+k[0]+3936430074&4294967295,O=C+(N<<11&4294967295|N>>>21),N=j+(O^C^I)+k[3]+3572445317&4294967295,j=O+(N<<16&4294967295|N>>>16),N=I+(j^O^C)+k[6]+76029189&4294967295,I=j+(N<<23&4294967295|N>>>9),N=C+(I^j^O)+k[9]+3654602809&4294967295,C=I+(N<<4&4294967295|N>>>28),N=O+(C^I^j)+k[12]+3873151461&4294967295,O=C+(N<<11&4294967295|N>>>21),N=j+(O^C^I)+k[15]+530742520&4294967295,j=O+(N<<16&4294967295|N>>>16),N=I+(j^O^C)+k[2]+3299628645&4294967295,I=j+(N<<23&4294967295|N>>>9),N=C+(j^(I|~O))+k[0]+4096336452&4294967295,C=I+(N<<6&4294967295|N>>>26),N=O+(I^(C|~j))+k[7]+1126891415&4294967295,O=C+(N<<10&4294967295|N>>>22),N=j+(C^(O|~I))+k[14]+2878612391&4294967295,j=O+(N<<15&4294967295|N>>>17),N=I+(O^(j|~C))+k[5]+4237533241&4294967295,I=j+(N<<21&4294967295|N>>>11),N=C+(j^(I|~O))+k[12]+1700485571&4294967295,C=I+(N<<6&4294967295|N>>>26),N=O+(I^(C|~j))+k[3]+2399980690&4294967295,O=C+(N<<10&4294967295|N>>>22),N=j+(C^(O|~I))+k[10]+4293915773&4294967295,j=O+(N<<15&4294967295|N>>>17),N=I+(O^(j|~C))+k[1]+2240044497&4294967295,I=j+(N<<21&4294967295|N>>>11),N=C+(j^(I|~O))+k[8]+1873313359&4294967295,C=I+(N<<6&4294967295|N>>>26),N=O+(I^(C|~j))+k[15]+4264355552&4294967295,O=C+(N<<10&4294967295|N>>>22),N=j+(C^(O|~I))+k[6]+2734768916&4294967295,j=O+(N<<15&4294967295|N>>>17),N=I+(O^(j|~C))+k[13]+1309151649&4294967295,I=j+(N<<21&4294967295|N>>>11),N=C+(j^(I|~O))+k[4]+4149444226&4294967295,C=I+(N<<6&4294967295|N>>>26),N=O+(I^(C|~j))+k[11]+3174756917&4294967295,O=C+(N<<10&4294967295|N>>>22),N=j+(C^(O|~I))+k[2]+718787259&4294967295,j=O+(N<<15&4294967295|N>>>17),N=I+(O^(j|~C))+k[9]+3951481745&4294967295,w.g[0]=w.g[0]+C&4294967295,w.g[1]=w.g[1]+(j+(N<<21&4294967295|N>>>11))&4294967295,w.g[2]=w.g[2]+j&4294967295,w.g[3]=w.g[3]+O&4294967295}s.prototype.v=function(w,C){C===void 0&&(C=w.length);const I=C-this.blockSize,k=this.C;let j=this.h,O=0;for(;O<C;){if(j==0)for(;O<=I;)o(this,w,O),O+=this.blockSize;if(typeof w=="string"){for(;O<C;)if(k[j++]=w.charCodeAt(O++),j==this.blockSize){o(this,k),j=0;break}}else for(;O<C;)if(k[j++]=w[O++],j==this.blockSize){o(this,k),j=0;break}}this.h=j,this.o+=C},s.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var C=1;C<w.length-8;++C)w[C]=0;C=this.o*8;for(var I=w.length-8;I<w.length;++I)w[I]=C&255,C/=256;for(this.v(w),w=Array(16),C=0,I=0;I<4;++I)for(let k=0;k<32;k+=8)w[C++]=this.g[I]>>>k&255;return w};function u(w,C){var I=m;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=C(w)}function f(w,C){this.h=C;const I=[];let k=!0;for(let j=w.length-1;j>=0;j--){const O=w[j]|0;k&&O==C||(I[j]=O,k=!1)}this.g=I}var m={};function b(w){return-128<=w&&w<128?u(w,function(C){return new f([C|0],C<0?-1:0)}):new f([w|0],w<0?-1:0)}function g(w){if(isNaN(w)||!isFinite(w))return E;if(w<0)return U(g(-w));const C=[];let I=1;for(let k=0;w>=I;k++)C[k]=w/I|0,I*=4294967296;return new f(C,0)}function v(w,C){if(w.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(w.charAt(0)=="-")return U(v(w.substring(1),C));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(C,8));let k=E;for(let O=0;O<w.length;O+=8){var j=Math.min(8,w.length-O);const N=parseInt(w.substring(O,O+j),C);j<8?(j=g(Math.pow(C,j)),k=k.j(j).add(g(N))):(k=k.j(I),k=k.add(g(N)))}return k}var E=b(0),T=b(1),M=b(16777216);i=f.prototype,i.m=function(){if(B(this))return-U(this).m();let w=0,C=1;for(let I=0;I<this.g.length;I++){const k=this.i(I);w+=(k>=0?k:4294967296+k)*C,C*=4294967296}return w},i.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(G(this))return"0";if(B(this))return"-"+U(this).toString(w);const C=g(Math.pow(w,6));var I=this;let k="";for(;;){const j=re(I,C).g;I=V(I,j.j(C));let O=((I.g.length>0?I.g[0]:I.h)>>>0).toString(w);if(I=j,G(I))return O+k;for(;O.length<6;)O="0"+O;k=O+k}},i.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function G(w){if(w.h!=0)return!1;for(let C=0;C<w.g.length;C++)if(w.g[C]!=0)return!1;return!0}function B(w){return w.h==-1}i.l=function(w){return w=V(this,w),B(w)?-1:G(w)?0:1};function U(w){const C=w.g.length,I=[];for(let k=0;k<C;k++)I[k]=~w.g[k];return new f(I,~w.h).add(T)}i.abs=function(){return B(this)?U(this):this},i.add=function(w){const C=Math.max(this.g.length,w.g.length),I=[];let k=0;for(let j=0;j<=C;j++){let O=k+(this.i(j)&65535)+(w.i(j)&65535),N=(O>>>16)+(this.i(j)>>>16)+(w.i(j)>>>16);k=N>>>16,O&=65535,N&=65535,I[j]=N<<16|O}return new f(I,I[I.length-1]&-2147483648?-1:0)};function V(w,C){return w.add(U(C))}i.j=function(w){if(G(this)||G(w))return E;if(B(this))return B(w)?U(this).j(U(w)):U(U(this).j(w));if(B(w))return U(this.j(U(w)));if(this.l(M)<0&&w.l(M)<0)return g(this.m()*w.m());const C=this.g.length+w.g.length,I=[];for(var k=0;k<2*C;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(let j=0;j<w.g.length;j++){const O=this.i(k)>>>16,N=this.i(k)&65535,Ve=w.i(j)>>>16,ye=w.i(j)&65535;I[2*k+2*j]+=N*ye,$(I,2*k+2*j),I[2*k+2*j+1]+=O*ye,$(I,2*k+2*j+1),I[2*k+2*j+1]+=N*Ve,$(I,2*k+2*j+1),I[2*k+2*j+2]+=O*Ve,$(I,2*k+2*j+2)}for(w=0;w<C;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=C;w<2*C;w++)I[w]=0;return new f(I,0)};function $(w,C){for(;(w[C]&65535)!=w[C];)w[C+1]+=w[C]>>>16,w[C]&=65535,C++}function K(w,C){this.g=w,this.h=C}function re(w,C){if(G(C))throw Error("division by zero");if(G(w))return new K(E,E);if(B(w))return C=re(U(w),C),new K(U(C.g),U(C.h));if(B(C))return C=re(w,U(C)),new K(U(C.g),C.h);if(w.g.length>30){if(B(w)||B(C))throw Error("slowDivide_ only works with positive integers.");for(var I=T,k=C;k.l(w)<=0;)I=he(I),k=he(k);var j=ae(I,1),O=ae(k,1);for(k=ae(k,2),I=ae(I,2);!G(k);){var N=O.add(k);N.l(w)<=0&&(j=j.add(I),O=N),k=ae(k,1),I=ae(I,1)}return C=V(w,j.j(C)),new K(j,C)}for(j=E;w.l(C)>=0;){for(I=Math.max(1,Math.floor(w.m()/C.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),O=g(I),N=O.j(C);B(N)||N.l(w)>0;)I-=k,O=g(I),N=O.j(C);G(O)&&(O=T),j=j.add(O),w=V(w,N)}return new K(j,w)}i.B=function(w){return re(this,w).h},i.and=function(w){const C=Math.max(this.g.length,w.g.length),I=[];for(let k=0;k<C;k++)I[k]=this.i(k)&w.i(k);return new f(I,this.h&w.h)},i.or=function(w){const C=Math.max(this.g.length,w.g.length),I=[];for(let k=0;k<C;k++)I[k]=this.i(k)|w.i(k);return new f(I,this.h|w.h)},i.xor=function(w){const C=Math.max(this.g.length,w.g.length),I=[];for(let k=0;k<C;k++)I[k]=this.i(k)^w.i(k);return new f(I,this.h^w.h)};function he(w){const C=w.g.length+1,I=[];for(let k=0;k<C;k++)I[k]=w.i(k)<<1|w.i(k-1)>>>31;return new f(I,w.h)}function ae(w,C){const I=C>>5;C%=32;const k=w.g.length-I,j=[];for(let O=0;O<k;O++)j[O]=C>0?w.i(O+I)>>>C|w.i(O+I+1)<<32-C:w.i(O+I);return new f(j,w.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,y_=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=v,Fs=f}).apply(typeof Wx<"u"?Wx:typeof self<"u"?self:typeof window<"u"?window:{});var yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var x_,pc,v_,Id,cm,__,E_,w_;(function(){var i,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof yd=="object"&&yd];for(var y=0;y<d.length;++y){var _=d[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(d,y){if(y)e:{var _=s;d=d.split(".");for(var R=0;R<d.length-1;R++){var X=d[R];if(!(X in _))break e;_=_[X]}d=d[d.length-1],R=_[d],y=y(R),y!=R&&y!=null&&e(_,d,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(y){var _=[],R;for(R in y)Object.prototype.hasOwnProperty.call(y,R)&&_.push([R,y[R]]);return _}});var u=u||{},f=this||self;function m(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function b(d,y,_){return d.call.apply(d.bind,arguments)}function g(d,y,_){return g=b,g.apply(null,arguments)}function v(d,y){var _=Array.prototype.slice.call(arguments,1);return function(){var R=_.slice();return R.push.apply(R,arguments),d.apply(this,R)}}function E(d,y){function _(){}_.prototype=y.prototype,d.Z=y.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(R,X,te){for(var Ae=Array(arguments.length-2),et=2;et<arguments.length;et++)Ae[et-2]=arguments[et];return y.prototype[X].apply(R,Ae)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function M(d){const y=d.length;if(y>0){const _=Array(y);for(let R=0;R<y;R++)_[R]=d[R];return _}return[]}function G(d,y){for(let R=1;R<arguments.length;R++){const X=arguments[R];var _=typeof X;if(_=_!="object"?_:X?Array.isArray(X)?"array":_:"null",_=="array"||_=="object"&&typeof X.length=="number"){_=d.length||0;const te=X.length||0;d.length=_+te;for(let Ae=0;Ae<te;Ae++)d[_+Ae]=X[Ae]}else d.push(X)}}class B{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function U(d){f.setTimeout(()=>{throw d},0)}function V(){var d=w;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class ${constructor(){this.h=this.g=null}add(y,_){const R=K.get();R.set(y,_),this.h?this.h.next=R:this.g=R,this.h=R}}var K=new B(()=>new re,d=>d.reset());class re{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ae=!1,w=new $,C=()=>{const d=Promise.resolve(void 0);he=()=>{d.then(I)}};function I(){for(var d;d=V();){try{d.h.call(d.g)}catch(_){U(_)}var y=K;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}ae=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var O=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};f.addEventListener("test",_,y),f.removeEventListener("test",_,y)}catch{}return d})();function N(d){return/^[\s\xa0]*$/.test(d)}function Ve(d,y){j.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}E(Ve,j),Ve.prototype.init=function(d,y){const _=this.type=d.type,R=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(_=="mouseover"?y=d.fromElement:_=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Ve.Z.h.call(this)},Ve.prototype.h=function(){Ve.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),ee=0;function me(d,y,_,R,X){this.listener=d,this.proxy=null,this.src=y,this.type=_,this.capture=!!R,this.ha=X,this.key=++ee,this.da=this.fa=!1}function Re(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function De(d,y,_){for(const R in d)y.call(_,d[R],R,d)}function Qe(d,y){for(const _ in d)y.call(void 0,d[_],_,d)}function z(d){const y={};for(const _ in d)y[_]=d[_];return y}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(d,y){let _,R;for(let X=1;X<arguments.length;X++){R=arguments[X];for(_ in R)d[_]=R[_];for(let te=0;te<se.length;te++)_=se[te],Object.prototype.hasOwnProperty.call(R,_)&&(d[_]=R[_])}}function Q(d){this.src=d,this.g={},this.h=0}Q.prototype.add=function(d,y,_,R,X){const te=d.toString();d=this.g[te],d||(d=this.g[te]=[],this.h++);const Ae=ge(d,y,R,X);return Ae>-1?(y=d[Ae],_||(y.fa=!1)):(y=new me(y,this.src,te,!!R,X),y.fa=_,d.push(y)),y};function ie(d,y){const _=y.type;if(_ in d.g){var R=d.g[_],X=Array.prototype.indexOf.call(R,y,void 0),te;(te=X>=0)&&Array.prototype.splice.call(R,X,1),te&&(Re(y),d.g[_].length==0&&(delete d.g[_],d.h--))}}function ge(d,y,_,R){for(let X=0;X<d.length;++X){const te=d[X];if(!te.da&&te.listener==y&&te.capture==!!_&&te.ha==R)return X}return-1}var Ee="closure_lm_"+(Math.random()*1e6|0),He={};function we(d,y,_,R,X){if(Array.isArray(y)){for(let te=0;te<y.length;te++)we(d,y[te],_,R,X);return null}return _=Ne(_),d&&d[ye]?d.J(y,_,m(R)?!!R.capture:!1,X):it(d,y,_,!1,R,X)}function it(d,y,_,R,X,te){if(!y)throw Error("Invalid event type");const Ae=m(X)?!!X.capture:!!X;let et=Jt(d);if(et||(d[Ee]=et=new Q(d)),_=et.add(y,_,R,Ae,te),_.proxy)return _;if(R=st(),_.proxy=R,R.src=d,R.listener=_,d.addEventListener)O||(X=Ae),X===void 0&&(X=!1),d.addEventListener(y.toString(),R,X);else if(d.attachEvent)d.attachEvent(Xt(y.toString()),R);else if(d.addListener&&d.removeListener)d.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return _}function st(){function d(_){return y.call(d.src,d.listener,_)}const y=Ut;return d}function Ct(d,y,_,R,X){if(Array.isArray(y))for(var te=0;te<y.length;te++)Ct(d,y[te],_,R,X);else R=m(R)?!!R.capture:!!R,_=Ne(_),d&&d[ye]?(d=d.i,te=String(y).toString(),te in d.g&&(y=d.g[te],_=ge(y,_,R,X),_>-1&&(Re(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete d.g[te],d.h--)))):d&&(d=Jt(d))&&(y=d.g[y.toString()],d=-1,y&&(d=ge(y,_,R,X)),(_=d>-1?y[d]:null)&&At(_))}function At(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[ye])ie(y.i,d);else{var _=d.type,R=d.proxy;y.removeEventListener?y.removeEventListener(_,R,d.capture):y.detachEvent?y.detachEvent(Xt(_),R):y.addListener&&y.removeListener&&y.removeListener(R),(_=Jt(y))?(ie(_,d),_.h==0&&(_.src=null,y[Ee]=null)):Re(d)}}}function Xt(d){return d in He?He[d]:He[d]="on"+d}function Ut(d,y){if(d.da)d=!0;else{y=new Ve(y,this);const _=d.listener,R=d.ha||d.src;d.fa&&At(d),d=_.call(R,y)}return d}function Jt(d){return d=d[Ee],d instanceof Q?d:null}var Y="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ne(d){return typeof d=="function"?d:(d[Y]||(d[Y]=function(y){return d.handleEvent(y)}),d[Y])}function ve(){k.call(this),this.i=new Q(this),this.M=this,this.G=null}E(ve,k),ve.prototype[ye]=!0,ve.prototype.removeEventListener=function(d,y,_,R){Ct(this,d,y,_,R)};function Se(d,y){var _,R=d.G;if(R)for(_=[];R;R=R.G)_.push(R);if(d=d.M,R=y.type||y,typeof y=="string")y=new j(y,d);else if(y instanceof j)y.target=y.target||d;else{var X=y;y=new j(R,d),le(y,X)}X=!0;let te,Ae;if(_)for(Ae=_.length-1;Ae>=0;Ae--)te=y.g=_[Ae],X=Ze(te,R,!0,y)&&X;if(te=y.g=d,X=Ze(te,R,!0,y)&&X,X=Ze(te,R,!1,y)&&X,_)for(Ae=0;Ae<_.length;Ae++)te=y.g=_[Ae],X=Ze(te,R,!1,y)&&X}ve.prototype.N=function(){if(ve.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const _=d.g[y];for(let R=0;R<_.length;R++)Re(_[R]);delete d.g[y],d.h--}}this.G=null},ve.prototype.J=function(d,y,_,R){return this.i.add(String(d),y,!1,_,R)},ve.prototype.K=function(d,y,_,R){return this.i.add(String(d),y,!0,_,R)};function Ze(d,y,_,R){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let X=!0;for(let te=0;te<y.length;++te){const Ae=y[te];if(Ae&&!Ae.da&&Ae.capture==_){const et=Ae.listener,an=Ae.ha||Ae.src;Ae.fa&&ie(d.i,Ae),X=et.call(an,R)!==!1&&X}}return X&&!R.defaultPrevented}function Le(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=g(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:f.setTimeout(d,y||0)}function It(d){d.g=Le(()=>{d.g=null,d.i&&(d.i=!1,It(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class nt extends k{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:It(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zt(d){k.call(this),this.h=d,this.g={}}E(Zt,k);var de=[];function Ce(d){De(d.g,function(y,_){this.g.hasOwnProperty(_)&&At(y)},d),d.g={}}Zt.prototype.N=function(){Zt.Z.N.call(this),Ce(this)},Zt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Me=f.JSON.stringify,P=f.JSON.parse,_e=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function Ue(){}function Bt(){}var vt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rt(){j.call(this,"d")}E(rt,j);function cn(){j.call(this,"c")}E(cn,j);var Pt={},Ga=null;function Hn(){return Ga=Ga||new ve}Pt.Ia="serverreachability";function $a(d){j.call(this,Pt.Ia,d)}E($a,j);function H(d){const y=Hn();Se(y,new $a(y))}Pt.STAT_EVENT="statevent";function q(d,y){j.call(this,Pt.STAT_EVENT,d),this.stat=y}E(q,j);function be(d){const y=Hn();Se(y,new q(y,d))}Pt.Ja="timingevent";function $e(d,y){j.call(this,Pt.Ja,d),this.size=y}E($e,j);function Ke(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},y)}function mt(){this.g=!0}mt.prototype.ua=function(){this.g=!1};function jt(d,y,_,R,X,te){d.info(function(){if(d.g)if(te){var Ae="",et=te.split("&");for(let _t=0;_t<et.length;_t++){var an=et[_t].split("=");if(an.length>1){const $t=an[0];an=an[1];const ba=$t.split("_");Ae=ba.length>=2&&ba[1]=="type"?Ae+($t+"="+an+"&"):Ae+($t+"=redacted&")}}}else Ae=null;else Ae=te;return"XMLHTTP REQ ("+R+") [attempt "+X+"]: "+y+`
`+_+`
`+Ae})}function Ye(d,y,_,R,X,te,Ae){d.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+X+"]: "+y+`
`+_+`
`+te+" "+Ae})}function bt(d,y,_,R){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+En(d,_)+(R?" "+R:"")})}function Gt(d,y){d.info(function(){return"TIMEOUT: "+y})}mt.prototype.info=function(){};function En(d,y){if(!d.g)return y;if(!y)return null;try{const te=JSON.parse(y);if(te){for(d=0;d<te.length;d++)if(Array.isArray(te[d])){var _=te[d];if(!(_.length<2)){var R=_[1];if(Array.isArray(R)&&!(R.length<1)){var X=R[0];if(X!="noop"&&X!="stop"&&X!="close")for(let Ae=1;Ae<R.length;Ae++)R[Ae]=""}}}}return Me(te)}catch{return y}}var Ya={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},cl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ul;function ir(){}E(ir,Ue),ir.prototype.g=function(){return new XMLHttpRequest},ul=new ir;function Si(d){return encodeURIComponent(String(d))}function Qc(d){var y=1;d=d.split(":");const _=[];for(;y>0&&d.length;)_.push(d.shift()),y--;return d.length&&_.push(d.join(":")),_}function Ia(d,y,_,R){this.j=d,this.i=y,this.l=_,this.S=R||1,this.V=new Zt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ja}function ja(){this.i=null,this.g="",this.h=!1}var un={},wn={};function Qa(d,y,_){d.M=1,d.A=sr(fn(y)),d.u=_,d.R=!0,Yr(d,null)}function Yr(d,y){d.F=Date.now(),Ka(d),d.B=fn(d.A);var _=d.B,R=d.S;Array.isArray(R)||(R=[String(R)]),Jr(_.i,"t",R),d.C=0,_=d.j.L,d.h=new ja,d.g=cu(d.j,_?y:null,!d.u),d.P>0&&(d.O=new nt(g(d.Y,d,d.g),d.P)),y=d.V,_=d.g,R=d.ba;var X="readystatechange";Array.isArray(X)||(X&&(de[0]=X.toString()),X=de);for(let te=0;te<X.length;te++){const Ae=we(_,X[te],R||y.handleEvent,!1,y.h||y);if(!Ae)break;y.g[Ae.key]=Ae}y=d.J?z(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),H(),jt(d.i,d.v,d.B,d.l,d.S,d.u)}Ia.prototype.ba=function(d){d=d.target;const y=this.O;y&&Da(d)==3?y.j():this.Y(d)},Ia.prototype.Y=function(d){try{if(d==this.g)e:{const et=Da(this.g),an=this.g.ya(),_t=this.g.ca();if(!(et<3)&&(et!=3||this.g&&(this.h.h||this.g.la()||Cn(this.g)))){this.K||et!=4||an==7||(an==8||_t<=0?H(3):H(2)),Xa(this);var y=this.g.ca();this.X=y;var _=Mf(this);if(this.o=y==200,Ye(this.i,this.v,this.B,this.l,this.S,et,y),this.o){if(this.U&&!this.L){t:{if(this.g){var R,X=this.g;if((R=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(R)){var te=R;break t}}te=null}if(d=te)bt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ja(this,d);else{this.o=!1,this.m=3,be(12),na(this),pa(this);break e}}if(this.R){d=!0;let $t;for(;!this.K&&this.C<_.length;)if($t=Xc(this,_),$t==wn){et==4&&(this.m=4,be(14),d=!1),bt(this.i,this.l,null,"[Incomplete Response]");break}else if($t==un){this.m=4,be(15),bt(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else bt(this.i,this.l,$t,null),Ja(this,$t);if(Kc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||_.length!=0||this.h.h||(this.m=1,be(16),d=!1),this.o=this.o&&d,!d)bt(this.i,this.l,_,"[Invalid Chunked Response]"),na(this),pa(this);else if(_.length>0&&!this.W){this.W=!0;var Ae=this.j;Ae.g==this&&Ae.aa&&!Ae.P&&(Ae.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Sl(Ae),Ae.P=!0,be(11))}}else bt(this.i,this.l,_,null),Ja(this,_);et==4&&na(this),this.o&&!this.K&&(et==4?su(this.j,this):(this.o=!1,Ka(this)))}else Ni(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),na(this),pa(this)}}}catch{}};function Mf(d){if(!Kc(d))return d.g.la();const y=Cn(d.g);if(y==="")return"";let _="";const R=y.length,X=Da(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return na(d),pa(d),"";d.h.i=new f.TextDecoder}for(let te=0;te<R;te++)d.h.h=!0,_+=d.h.i.decode(y[te],{stream:!(X&&te==R-1)});return y.length=0,d.h.g+=_,d.C=0,d.h.g}function Kc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Xc(d,y){var _=d.C,R=y.indexOf(`
`,_);return R==-1?wn:(_=Number(y.substring(_,R)),isNaN(_)?un:(R+=1,R+_>y.length?wn:(y=y.slice(R,R+_),d.C=R+_,y)))}Ia.prototype.cancel=function(){this.K=!0,na(this)};function Ka(d){d.T=Date.now()+d.H,Qr(d,d.H)}function Qr(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Ke(g(d.aa,d),y)}function Xa(d){d.D&&(f.clearTimeout(d.D),d.D=null)}Ia.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Gt(this.i,this.B),this.M!=2&&(H(),be(17)),na(this),this.m=2,pa(this)):Qr(this,this.T-d)};function pa(d){d.j.I==0||d.K||su(d.j,d)}function na(d){Xa(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,Ce(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function Ja(d,y){try{var _=d.j;if(_.I!=0&&(_.g==d||Za(_.h,d))){if(!d.L&&Za(_.h,d)&&_.I==3){try{var R=_.Ba.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var X=R;if(X[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)no(_),ds(_);else break e;fr(_),be(18)}}else _.xa=X[1],0<_.xa-_.K&&X[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Ke(g(_.Va,_),6e3));Wa(_.h)<=1&&_.ta&&(_.ta=void 0)}else si(_,11)}else if((d.L||_.g==d)&&no(_),!N(y))for(X=_.Ba.g.parse(y),y=0;y<X.length;y++){let _t=X[y];const $t=_t[0];if(!($t<=_.K))if(_.K=$t,_t=_t[1],_.I==2)if(_t[0]=="c"){_.M=_t[1],_.ba=_t[2];const ba=_t[3];ba!=null&&(_.ka=ba,_.j.info("VER="+_.ka));const ri=_t[4];ri!=null&&(_.za=ri,_.j.info("SVER="+_.za));const Ma=_t[5];Ma!=null&&typeof Ma=="number"&&Ma>0&&(R=1.5*Ma,_.O=R,_.j.info("backChannelRequestTimeoutMs_="+R)),R=_;const Pa=d.g;if(Pa){const hr=Pa.g?Pa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hr){var te=R.h;te.g||hr.indexOf("spdy")==-1&&hr.indexOf("quic")==-1&&hr.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(hl(te,te.h),te.h=null))}if(R.G){const ao=Pa.g?Pa.g.getResponseHeader("X-HTTP-Session-Id"):null;ao&&(R.wa=ao,St(R.J,R.G,ao))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),R=_;var Ae=d;if(R.na=lu(R,R.L?R.ba:null,R.W),Ae.L){pl(R.h,Ae);var et=Ae,an=R.O;an&&(et.H=an),et.D&&(Xa(et),Ka(et)),R.g=Ae}else au(R);_.i.length>0&&ii(_)}else _t[0]!="stop"&&_t[0]!="close"||si(_,7);else _.I==3&&(_t[0]=="stop"||_t[0]=="close"?_t[0]=="stop"?si(_,7):wl(_):_t[0]!="noop"&&_.l&&_.l.qa(_t),_.A=0)}}H(4)}catch{}}var dn=class{constructor(d,y){this.g=d,this.map=y}};function dl(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Wa(d){return d.h?1:d.g?d.g.size:0}function Za(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function hl(d,y){d.g?d.g.add(y):d.h=y}function pl(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}dl.prototype.cancel=function(){if(this.i=ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function ml(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const _ of d.g.values())y=y.concat(_.G);return y}return M(d.i)}var Jc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kr(d,y){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const R=d[_].indexOf("=");let X,te=null;R>=0?(X=d[_].substring(0,R),te=d[_].substring(R+1)):X=d[_],y(X,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function aa(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof aa?(this.l=d.l,An(this,d.j),this.o=d.o,this.g=d.g,is(this,d.u),this.h=d.h,gl(this,tu(d.i)),this.m=d.m):d&&(y=String(d).match(Jc))?(this.l=!1,An(this,y[1]||"",!0),this.o=ei(y[2]||""),this.g=ei(y[3]||"",!0),is(this,y[4]),this.h=ei(y[5]||"",!0),gl(this,y[6]||"",!0),this.m=ei(y[7]||"")):(this.l=!1,this.i=new rs(null,this.l))}aa.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(rr(y,Xr,!0),":");var _=this.g;return(_||y=="file")&&(d.push("//"),(y=this.o)&&d.push(rr(y,Xr,!0),"@"),d.push(Si(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(rr(_,_.charAt(0)=="/"?bl:Wc,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",rr(_,Zc)),d.join("")},aa.prototype.resolve=function(d){const y=fn(this);let _=!!d.j;_?An(y,d.j):_=!!d.o,_?y.o=d.o:_=!!d.g,_?y.g=d.g:_=d.u!=null;var R=d.h;if(_)is(y,d.u);else if(_=!!d.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var X=y.h.lastIndexOf("/");X!=-1&&(R=y.h.slice(0,X+1)+R)}if(X=R,X==".."||X==".")R="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){R=X.lastIndexOf("/",0)==0,X=X.split("/");const te=[];for(let Ae=0;Ae<X.length;){const et=X[Ae++];et=="."?R&&Ae==X.length&&te.push(""):et==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),R&&Ae==X.length&&te.push("")):(te.push(et),R=!0)}R=te.join("/")}else R=X}return _?y.h=R:_=d.i.toString()!=="",_?gl(y,tu(d.i)):_=!!d.m,_&&(y.m=d.m),y};function fn(d){return new aa(d)}function An(d,y,_){d.j=_?ei(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function is(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function gl(d,y,_){y instanceof rs?(d.i=y,Wr(d.i,d.l)):(_||(y=rr(y,ss)),d.i=new rs(y,d.l))}function St(d,y,_){d.i.set(y,_)}function sr(d){return St(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function ei(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function rr(d,y,_){return typeof d=="string"?(d=encodeURI(d).replace(y,$n),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function $n(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Xr=/[#\/\?@]/g,Wc=/[#\?:]/g,bl=/[#\?]/g,ss=/[#\?@]/g,Zc=/#/g;function rs(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Yn(d){d.g||(d.g=new Map,d.h=0,d.i&&Kr(d.i,function(y,_){d.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}i=rs.prototype,i.add=function(d,y){Yn(this),this.i=null,d=os(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(y),this.h+=1,this};function eu(d,y){Yn(d),y=os(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function yl(d,y){return Yn(d),y=os(d,y),d.g.has(y)}i.forEach=function(d,y){Yn(this),this.g.forEach(function(_,R){_.forEach(function(X){d.call(y,X,R,this)},this)},this)};function xl(d,y){Yn(d);let _=[];if(typeof y=="string")yl(d,y)&&(_=_.concat(d.g.get(os(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)_=_.concat(d[y]);return _}i.set=function(d,y){return Yn(this),this.i=null,d=os(this,d),yl(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},i.get=function(d,y){return d?(d=xl(this,d),d.length>0?String(d[0]):y):y};function Jr(d,y,_){eu(d,y),_.length>0&&(d.i=null,d.g.set(os(d,y),M(_)),d.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let R=0;R<y.length;R++){var _=y[R];const X=Si(_);_=xl(this,_);for(let te=0;te<_.length;te++){let Ae=X;_[te]!==""&&(Ae+="="+Si(_[te])),d.push(Ae)}}return this.i=d.join("&")};function tu(d){const y=new rs;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function os(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function Wr(d,y){y&&!d.j&&(Yn(d),d.i=null,d.g.forEach(function(_,R){const X=R.toLowerCase();R!=X&&(eu(this,R),Jr(this,X,_))},d)),d.j=y}function ka(d,y){const _=new mt;if(f.Image){const R=new Image;R.onload=v(ma,_,"TestLoadImage: loaded",!0,y,R),R.onerror=v(ma,_,"TestLoadImage: error",!1,y,R),R.onabort=v(ma,_,"TestLoadImage: abort",!1,y,R),R.ontimeout=v(ma,_,"TestLoadImage: timeout",!1,y,R),f.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=d}else y(!1)}function vl(d,y){const _=new mt,R=new AbortController,X=setTimeout(()=>{R.abort(),ma(_,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:R.signal}).then(te=>{clearTimeout(X),te.ok?ma(_,"TestPingServer: ok",!0,y):ma(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(X),ma(_,"TestPingServer: error",!1,y)})}function ma(d,y,_,R,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),R(_)}catch{}}function ls(){this.g=new _e}function ti(d){this.i=d.Sb||null,this.h=d.ab||!1}E(ti,Ue),ti.prototype.g=function(){return new or(this.i,this.h)};function or(d,y){ve.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(or,ve),i=or.prototype,i.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,Oa(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||f).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,cs(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Oa(this)),this.g&&(this.readyState=3,Oa(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Zr(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Zr(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?cs(this):Oa(this),this.readyState==3&&Zr(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,cs(this))},i.Na=function(d){this.g&&(this.response=d,cs(this))},i.ga=function(){this.g&&cs(this)};function cs(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Oa(d)}i.setRequestHeader=function(d,y){this.A.append(d,y)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=y.next();return d.join(`\r
`)};function Oa(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(or.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ga(d){let y="";return De(d,function(_,R){y+=R,y+=":",y+=_,y+=`\r
`}),y}function lr(d,y,_){e:{for(R in _){var R=!1;break e}R=!0}R||(_=ga(_),typeof d=="string"?_!=null&&Si(_):St(d,y,_))}function kt(d){ve.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(kt,ve);var ni=/^https?$/i,_l=["POST","PUT"];i=kt.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,y,_,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ul.g(),this.g.onreadystatechange=T(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(te){cr(this,te);return}if(d=_||"",_=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var X in R)_.set(X,R[X]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const te of R.keys())_.set(te,R.get(te));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(_.keys()).find(te=>te.toLowerCase()=="content-type"),X=f.FormData&&d instanceof f.FormData,!(Array.prototype.indexOf.call(_l,y,void 0)>=0)||R||X||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,Ae]of _)this.g.setRequestHeader(te,Ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(te){cr(this,te)}};function cr(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,El(d),Ti(d)}function El(d){d.A||(d.A=!0,Se(d,"complete"),Se(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Se(this,"complete"),Se(this,"abort"),Ti(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ti(this,!0)),kt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?ur(this):this.Xa())},i.Xa=function(){ur(this)};function ur(d){if(d.h&&typeof u<"u"){if(d.v&&Da(d)==4)setTimeout(d.Ca.bind(d),0);else if(Se(d,"readystatechange"),Da(d)==4){d.h=!1;try{const te=d.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var R;if(R=te===0){let Ae=String(d.D).match(Jc)[1]||null;!Ae&&f.self&&f.self.location&&(Ae=f.self.location.protocol.slice(0,-1)),R=!ni.test(Ae?Ae.toLowerCase():"")}_=R}if(_)Se(d,"complete"),Se(d,"success");else{d.o=6;try{var X=Da(d)>2?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.ca()+"]",El(d)}}finally{Ti(d)}}}}function Ti(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,y||Se(d,"ready");try{_.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function Da(d){return d.g?d.g.readyState:0}i.ca=function(){try{return Da(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),P(y)}};function Cn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ni(d){const y={};d=(d.g&&Da(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<d.length;R++){if(N(d[R]))continue;var _=Qc(d[R]);const X=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const te=y[X]||[];y[X]=te,te.push(_)}Qe(y,function(R){return R.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ai(d,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||y}function us(d){this.za=0,this.i=[],this.j=new mt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ai("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ai("baseRetryDelayMs",5e3,d),this.Za=ai("retryDelaySeedMs",1e4,d),this.Ta=ai("forwardChannelMaxRetries",2,d),this.va=ai("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new dl(d&&d.concurrentRequestLimit),this.Ba=new ls,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=us.prototype,i.ka=8,i.I=1,i.connect=function(d,y,_,R){be(0),this.W=d,this.H=y||{},_&&R!==void 0&&(this.H.OSID=_,this.H.OAID=R),this.F=this.X,this.J=lu(this,null,this.W),ii(this)};function wl(d){if(eo(d),d.I==3){var y=d.V++,_=fn(d.J);if(St(_,"SID",d.M),St(_,"RID",y),St(_,"TYPE","terminate"),dr(d,_),y=new Ia(d,d.j,y),y.M=2,y.A=sr(fn(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&f.Image&&(new Image().src=y.A,_=!0),_||(y.g=cu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ka(y)}ou(d)}function ds(d){d.g&&(Sl(d),d.g.cancel(),d.g=null)}function eo(d){ds(d),d.v&&(f.clearTimeout(d.v),d.v=null),no(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&f.clearTimeout(d.m),d.m=null)}function ii(d){if(!fl(d.h)&&!d.m){d.m=!0;var y=d.Ea;he||C(),ae||(he(),ae=!0),w.add(y,d),d.D=0}}function to(d,y){return Wa(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Ke(g(d.Ea,d,y),ru(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const X=new Ia(this,this.j,d);let te=this.o;if(this.U&&(te?(te=z(te),le(te,this.U)):te=this.U),this.u!==null||this.R||(X.J=te,te=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var R=this.i[_];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=nu(this,X,y),_=fn(this.J),St(_,"RID",d),St(_,"CVER",22),this.G&&St(_,"X-HTTP-Session-Id",this.G),dr(this,_),te&&(this.R?y="headers="+Si(ga(te))+"&"+y:this.u&&lr(_,this.u,te)),hl(this.h,X),this.Ra&&St(_,"TYPE","init"),this.S?(St(_,"$req",y),St(_,"SID","null"),X.U=!0,Qa(X,_,null)):Qa(X,_,y),this.I=2}}else this.I==3&&(d?Al(this,d):this.i.length==0||fl(this.h)||Al(this))};function Al(d,y){var _;y?_=y.l:_=d.V++;const R=fn(d.J);St(R,"SID",d.M),St(R,"RID",_),St(R,"AID",d.K),dr(d,R),d.u&&d.o&&lr(R,d.u,d.o),_=new Ia(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),y&&(d.i=y.G.concat(d.i)),y=nu(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),hl(d.h,_),Qa(_,R,y)}function dr(d,y){d.H&&De(d.H,function(_,R){St(y,R,_)}),d.l&&De({},function(_,R){St(y,R,_)})}function nu(d,y,_){_=Math.min(d.i.length,_);const R=d.l?g(d.l.Ka,d.l,d):null;e:{var X=d.i;let et=-1;for(;;){const an=["count="+_];et==-1?_>0?(et=X[0].g,an.push("ofs="+et)):et=0:an.push("ofs="+et);let _t=!0;for(let $t=0;$t<_;$t++){var te=X[$t].g;const ba=X[$t].map;if(te-=et,te<0)et=Math.max(0,X[$t].g-100),_t=!1;else try{te="req"+te+"_"||"";try{var Ae=ba instanceof Map?ba:Object.entries(ba);for(const[ri,Ma]of Ae){let Pa=Ma;m(Ma)&&(Pa=Me(Ma)),an.push(te+ri+"="+encodeURIComponent(Pa))}}catch(ri){throw an.push(te+"type="+encodeURIComponent("_badmap")),ri}}catch{R&&R(ba)}}if(_t){Ae=an.join("&");break e}}Ae=void 0}return d=d.i.splice(0,_),y.G=d,Ae}function au(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;he||C(),ae||(he(),ae=!0),w.add(y,d),d.A=0}}function fr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Ke(g(d.Da,d),ru(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,iu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Ke(g(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),ds(this),iu(this))};function Sl(d){d.B!=null&&(f.clearTimeout(d.B),d.B=null)}function iu(d){d.g=new Ia(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=fn(d.na);St(y,"RID","rpc"),St(y,"SID",d.M),St(y,"AID",d.K),St(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&St(y,"TO",d.ia),St(y,"TYPE","xmlhttp"),dr(d,y),d.u&&d.o&&lr(y,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=sr(fn(y)),_.u=null,_.R=!0,Yr(_,d)}i.Va=function(){this.C!=null&&(this.C=null,ds(this),fr(this),be(19))};function no(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function su(d,y){var _=null;if(d.g==y){no(d),Sl(d),d.g=null;var R=2}else if(Za(d.h,y))_=y.G,pl(d.h,y),R=1;else return;if(d.I!=0){if(y.o)if(R==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var X=d.D;R=Hn(),Se(R,new $e(R,_)),ii(d)}else au(d);else if(X=y.m,X==3||X==0&&y.X>0||!(R==1&&to(d,y)||R==2&&fr(d)))switch(_&&_.length>0&&(y=d.h,y.i=y.i.concat(_)),X){case 1:si(d,5);break;case 4:si(d,10);break;case 3:si(d,6);break;default:si(d,2)}}}function ru(d,y){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*y}function si(d,y){if(d.j.info("Error code "+y),y==2){var _=g(d.bb,d),R=d.Ua;const X=!R;R=new aa(R||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||An(R,"https"),sr(R),X?ka(R.toString(),_):vl(R.toString(),_)}else be(2);d.I=0,d.l&&d.l.pa(y),ou(d),eo(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))};function ou(d){if(d.I=0,d.ja=[],d.l){const y=ml(d.h);(y.length!=0||d.i.length!=0)&&(G(d.ja,y),G(d.ja,d.i),d.h.i.length=0,M(d.i),d.i.length=0),d.l.oa()}}function lu(d,y,_){var R=_ instanceof aa?fn(_):new aa(_);if(R.g!="")y&&(R.g=y+"."+R.g),is(R,R.u);else{var X=f.location;R=X.protocol,y=y?y+"."+X.hostname:X.hostname,X=+X.port;const te=new aa(null);R&&An(te,R),y&&(te.g=y),X&&is(te,X),_&&(te.h=_),R=te}return _=d.G,y=d.wa,_&&y&&St(R,_,y),St(R,"VER",d.ka),dr(d,R),R}function cu(d,y,_){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new kt(new ti({ab:_})):new kt(d.ma),y.Fa(d.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function uu(){}i=uu.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function fs(){}fs.prototype.g=function(d,y){return new qn(d,y)};function qn(d,y){ve.call(this),this.g=new us(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!N(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!N(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Ri(this)}E(qn,ve),qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){wl(this.g)},qn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=Me(d),d=_);y.i.push(new dn(y.Ya++,d)),y.I==3&&ii(y)},qn.prototype.N=function(){this.g.l=null,delete this.j,wl(this.g),delete this.g,qn.Z.N.call(this)};function du(d){rt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const _ in y){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}E(du,rt);function fu(){cn.call(this),this.status=1}E(fu,cn);function Ri(d){this.g=d}E(Ri,uu),Ri.prototype.ra=function(){Se(this.g,"a")},Ri.prototype.qa=function(d){Se(this.g,new du(d))},Ri.prototype.pa=function(d){Se(this.g,new fu)},Ri.prototype.oa=function(){Se(this.g,"b")},fs.prototype.createWebChannel=fs.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,w_=function(){return new fs},E_=function(){return Hn()},__=Pt,cm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ya.NO_ERROR=0,Ya.TIMEOUT=8,Ya.HTTP_ERROR=6,Id=Ya,cl.COMPLETE="complete",v_=cl,Bt.EventType=vt,vt.OPEN="a",vt.CLOSE="b",vt.ERROR="c",vt.MESSAGE="d",ve.prototype.listen=ve.prototype.J,pc=Bt,kt.prototype.listenOnce=kt.prototype.K,kt.prototype.getLastError=kt.prototype.Ha,kt.prototype.getLastErrorCode=kt.prototype.ya,kt.prototype.getStatus=kt.prototype.ca,kt.prototype.getResponseJson=kt.prototype.La,kt.prototype.getResponseText=kt.prototype.la,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Fa,x_=kt}).apply(typeof yd<"u"?yd:typeof self<"u"?self:typeof window<"u"?window:{});class Ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");let al="12.8.0";function TC(i){al=i}const zr=new zm("@firebase/firestore");function Do(){return zr.logLevel}function Ie(i,...e){if(zr.logLevel<=dt.DEBUG){const n=e.map(Xm);zr.debug(`Firestore (${al}): ${i}`,...n)}}function Zi(i,...e){if(zr.logLevel<=dt.ERROR){const n=e.map(Xm);zr.error(`Firestore (${al}): ${i}`,...n)}}function $o(i,...e){if(zr.logLevel<=dt.WARN){const n=e.map(Xm);zr.warn(`Firestore (${al}): ${i}`,...n)}}function Xm(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function Ge(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,A_(i,s,n)}function A_(i,e,n){let s=`FIRESTORE (${al}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Zi(s),new Error(s)}function wt(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||A_(e,o,s)}function We(i,e){return i}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends wi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class S_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ln.UNAUTHENTICATED)))}shutdown(){}}class RC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class CC{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){wt(this.o===void 0,42304);let s=this.i;const o=b=>this.i!==s?(s=this.i,n(b)):Promise.resolve();let u=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Qi,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const b=u;e.enqueueRetryable((async()=>{await b.promise,await o(this.currentUser)}))},m=b=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((b=>m(b))),setTimeout((()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?m(b):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Qi)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(wt(typeof s.accessToken=="string",31837,{l:s}),new S_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new Ln(e)}}class IC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class jC{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new IC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Zx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,da(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){wt(this.o===void 0,3512);const s=u=>{u.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,Ie("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Zx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(wt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Zx(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function OC(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Jm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=OC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function ft(i,e){return i<e?-1:i>e?1:0}function um(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return Gp(o)===Gp(u)?ft(o,u):Gp(o)?1:-1}return ft(i.length,e.length)}const DC=55296,MC=57343;function Gp(i){const e=i.charCodeAt(0);return e>=DC&&e<=MC}function Yo(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const ev="__name__";class fi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ge(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ge(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return fi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=fi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return ft(e.length,n.length)}static compareSegments(e,n){const s=fi.isNumericId(e),o=fi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?fi.extractNumericId(e).compare(fi.extractNumericId(n)):um(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fs.fromString(e.substring(4,e.length-2))}}class Lt extends fi{construct(e,n,s){return new Lt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Te(ue.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new Lt(n)}static emptyPath(){return new Lt([])}}const PC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mn extends fi{construct(e,n,s){return new Mn(e,n,s)}static isValidIdentifier(e){return PC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ev}static keyField(){return new Mn([ev])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new Te(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new Te(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[o+1];if(b!=="\\"&&b!=="."&&b!=="`")throw new Te(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=b,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new Te(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mn(n)}static emptyPath(){return new Mn([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(Lt.fromString(e))}static fromName(e){return new ze(Lt.fromString(e).popFirst(5))}static empty(){return new ze(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new Lt(e.slice()))}}function T_(i,e,n){if(!n)throw new Te(ue.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function zC(i,e,n,s){if(e===!0&&s===!0)throw new Te(ue.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function tv(i){if(!ze.isDocumentKey(i))throw new Te(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function nv(i){if(ze.isDocumentKey(i))throw new Te(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function N_(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function pf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ge(12329,{type:typeof i})}function ta(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Te(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=pf(i);throw new Te(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function xn(i,e){const n={typeString:i};return e&&(n.value=e),n}function qc(i,e){if(!N_(i))throw new Te(ue.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const f=i[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new Te(ue.INVALID_ARGUMENT,n);return!0}const av=-62135596800,iv=1e6;class Ft{static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*iv);return new Ft(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Te(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Te(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<av)throw new Te(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iv}_compareTo(e){return this.seconds===e.seconds?ft(this.nanoseconds,e.nanoseconds):ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qc(e,Ft._jsonSchema))return new Ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-av;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ft._jsonSchemaVersion="firestore/timestamp/1.0",Ft._jsonSchema={type:xn("string",Ft._jsonSchemaVersion),seconds:xn("number"),nanoseconds:xn("number")};class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new Ft(0,0))}static max(){return new Xe(new Ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Cc=-1;function VC(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Xe.fromTimestamp(s===1e9?new Ft(n+1,0):new Ft(n,s));return new Ys(o,ze.empty(),e)}function LC(i){return new Ys(i.readTime,i.key,Cc)}class Ys{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ys(Xe.min(),ze.empty(),Cc)}static max(){return new Ys(Xe.max(),ze.empty(),Cc)}}function UC(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ze.comparator(i.documentKey,e.documentKey),n!==0?n:ft(i.largestBatchId,e.largestBatchId))}const BC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function il(i){if(i.code!==ue.FAILED_PRECONDITION||i.message!==BC)throw i;Ie("LocalStore","Unexpectedly lost primary lease")}class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new pe(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof pe?n:pe.resolve(n)}catch(n){return pe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):pe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):pe.reject(n)}static resolve(e){return new pe(((n,s)=>{n(e)}))}static reject(e){return new pe(((n,s)=>{s(e)}))}static waitFor(e){return new pe(((n,s)=>{let o=0,u=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++u,f&&u===o&&n()}),(b=>s(b)))})),f=!0,u===o&&n()}))}static or(e){let n=pe.resolve(!1);for(const s of e)n=n.next((o=>o?pe.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new pe(((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let b=0;b<u;b++){const g=b;n(e[g]).next((v=>{f[g]=v,++m,m===u&&s(f)}),(v=>o(v)))}}))}static doWhile(e,n){return new pe(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function qC(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sl(i){return i.name==="IndexedDbTransactionError"}class mf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mf.ce=-1;const Wm=-1;function gf(i){return i==null}function Gd(i){return i===0&&1/i==-1/0}function FC(i){return typeof i=="number"&&Number.isInteger(i)&&!Gd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const R_="";function GC(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=sv(e)),e=$C(i.get(n),e);return sv(e)}function $C(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case R_:n+="";break;default:n+=u}}return n}function sv(i){return i+R_+""}function rv(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function tr(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function C_(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Wt{constructor(e,n){this.comparator=e,this.root=n||Dn.EMPTY}insert(e,n){return new Wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new Wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xd(this.root,e,this.comparator,!1)}getReverseIterator(){return new xd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xd(this.root,e,this.comparator,!0)}}class xd{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Dn.RED,this.left=o??Dn.EMPTY,this.right=u??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Dn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Dn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new Wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ov(this.data.getIterator())}getIteratorFrom(e){return new ov(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new _n(this.comparator);return n.data=e,n}}class ov{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class fa{constructor(e){this.fields=e,e.sort(Mn.comparator)}static empty(){return new fa([])}unionWith(e){let n=new _n(Mn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new fa(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Yo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class I_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Pn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new I_("Invalid base64 string: "+u):u}})(e);return new Pn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new Pn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pn.EMPTY_BYTE_STRING=new Pn("");const YC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qs(i){if(wt(!!i,39018),typeof i=="string"){let e=0;const n=YC.exec(i);if(wt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:on(i.seconds),nanos:on(i.nanos)}}function on(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ks(i){return typeof i=="string"?Pn.fromBase64String(i):Pn.fromUint8Array(i)}const j_="server_timestamp",k_="__type__",O_="__previous_value__",D_="__local_write_time__";function Zm(i){return(i?.mapValue?.fields||{})[k_]?.stringValue===j_}function bf(i){const e=i.mapValue.fields[O_];return Zm(e)?bf(e):e}function Ic(i){const e=Qs(i.mapValue.fields[D_].timestampValue);return new Ft(e.seconds,e.nanos)}class QC{constructor(e,n,s,o,u,f,m,b,g,v,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=b,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=E}}const $d="(default)";class jc{constructor(e,n){this.projectId=e,this.database=n||$d}static empty(){return new jc("","")}get isDefaultDatabase(){return this.database===$d}isEqual(e){return e instanceof jc&&e.projectId===this.projectId&&e.database===this.database}}function KC(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Te(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jc(i.options.projectId,e)}const M_="__type__",XC="__max__",vd={mapValue:{}},P_="__vector__",Yd="value";function Xs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Zm(i)?4:WC(i)?9007199254740991:JC(i)?10:11:Ge(28295,{value:i})}function vi(i,e){if(i===e)return!0;const n=Xs(i);if(n!==Xs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ic(i).isEqual(Ic(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Qs(o.timestampValue),m=Qs(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return Ks(o.bytesValue).isEqual(Ks(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return on(o.geoPointValue.latitude)===on(u.geoPointValue.latitude)&&on(o.geoPointValue.longitude)===on(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return on(o.integerValue)===on(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=on(o.doubleValue),m=on(u.doubleValue);return f===m?Gd(f)===Gd(m):isNaN(f)&&isNaN(m)}return!1})(i,e);case 9:return Yo(i.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(rv(f)!==rv(m))return!1;for(const b in f)if(f.hasOwnProperty(b)&&(m[b]===void 0||!vi(f[b],m[b])))return!1;return!0})(i,e);default:return Ge(52216,{left:i})}}function kc(i,e){return(i.values||[]).find((n=>vi(n,e)))!==void 0}function Qo(i,e){if(i===e)return 0;const n=Xs(i),s=Xs(e);if(n!==s)return ft(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ft(i.booleanValue,e.booleanValue);case 2:return(function(u,f){const m=on(u.integerValue||u.doubleValue),b=on(f.integerValue||f.doubleValue);return m<b?-1:m>b?1:m===b?0:isNaN(m)?isNaN(b)?0:-1:1})(i,e);case 3:return lv(i.timestampValue,e.timestampValue);case 4:return lv(Ic(i),Ic(e));case 5:return um(i.stringValue,e.stringValue);case 6:return(function(u,f){const m=Ks(u),b=Ks(f);return m.compareTo(b)})(i.bytesValue,e.bytesValue);case 7:return(function(u,f){const m=u.split("/"),b=f.split("/");for(let g=0;g<m.length&&g<b.length;g++){const v=ft(m[g],b[g]);if(v!==0)return v}return ft(m.length,b.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,f){const m=ft(on(u.latitude),on(f.latitude));return m!==0?m:ft(on(u.longitude),on(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return cv(i.arrayValue,e.arrayValue);case 10:return(function(u,f){const m=u.fields||{},b=f.fields||{},g=m[Yd]?.arrayValue,v=b[Yd]?.arrayValue,E=ft(g?.values?.length||0,v?.values?.length||0);return E!==0?E:cv(g,v)})(i.mapValue,e.mapValue);case 11:return(function(u,f){if(u===vd.mapValue&&f===vd.mapValue)return 0;if(u===vd.mapValue)return 1;if(f===vd.mapValue)return-1;const m=u.fields||{},b=Object.keys(m),g=f.fields||{},v=Object.keys(g);b.sort(),v.sort();for(let E=0;E<b.length&&E<v.length;++E){const T=um(b[E],v[E]);if(T!==0)return T;const M=Qo(m[b[E]],g[v[E]]);if(M!==0)return M}return ft(b.length,v.length)})(i.mapValue,e.mapValue);default:throw Ge(23264,{he:n})}}function lv(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ft(i,e);const n=Qs(i),s=Qs(e),o=ft(n.seconds,s.seconds);return o!==0?o:ft(n.nanos,s.nanos)}function cv(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Qo(n[o],s[o]);if(u)return u}return ft(n.length,s.length)}function Ko(i){return dm(i)}function dm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=Qs(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Ks(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return ze.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=dm(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${dm(n.fields[f])}`;return o+"}"})(i.mapValue):Ge(61005,{value:i})}function jd(i){switch(Xs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bf(i);return e?16+jd(e):16;case 5:return 2*i.stringValue.length;case 6:return Ks(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+jd(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return tr(s.fields,((u,f)=>{o+=u.length+jd(f)})),o})(i.mapValue);default:throw Ge(13486,{value:i})}}function uv(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function fm(i){return!!i&&"integerValue"in i}function eg(i){return!!i&&"arrayValue"in i}function dv(i){return!!i&&"nullValue"in i}function fv(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function kd(i){return!!i&&"mapValue"in i}function JC(i){return(i?.mapValue?.fields||{})[M_]?.stringValue===P_}function vc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return tr(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=vc(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vc(i.arrayValue.values[n]);return e}return{...i}}function WC(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===XC}class ea{constructor(e){this.value=e}static empty(){return new ea({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!kd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vc(n)}setAll(e){let n=Mn.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const b=this.getFieldsMap(n);this.applyChanges(b,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=vc(f):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());kd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];kd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){tr(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new ea(vc(this.value))}}function z_(i){const e=[];return tr(i.fields,((n,s)=>{const o=new Mn([n]);if(kd(s)){const u=z_(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new fa(e)}class Un{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Un(e,0,Xe.min(),Xe.min(),Xe.min(),ea.empty(),0)}static newFoundDocument(e,n,s,o){return new Un(e,1,n,Xe.min(),s,o,0)}static newNoDocument(e,n){return new Un(e,2,n,Xe.min(),Xe.min(),ea.empty(),0)}static newUnknownDocument(e,n){return new Un(e,3,n,Xe.min(),Xe.min(),ea.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ea.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ea.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qd{constructor(e,n){this.position=e,this.inclusive=n}}function hv(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?s=ze.comparator(ze.fromName(f.referenceValue),n.key):s=Qo(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function pv(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!vi(i.position[n],e.position[n]))return!1;return!0}class Oc{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZC(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class V_{}class yn extends V_{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new tI(e,n,s):n==="array-contains"?new iI(e,s):n==="in"?new sI(e,s):n==="not-in"?new rI(e,s):n==="array-contains-any"?new oI(e,s):new yn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new nI(e,s):new aI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qo(n,this.value)):n!==null&&Xs(this.value)===Xs(n)&&this.matchesComparison(Qo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fa extends V_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Fa(e,n)}matches(e){return L_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function L_(i){return i.op==="and"}function U_(i){return eI(i)&&L_(i)}function eI(i){for(const e of i.filters)if(e instanceof Fa)return!1;return!0}function hm(i){if(i instanceof yn)return i.field.canonicalString()+i.op.toString()+Ko(i.value);if(U_(i))return i.filters.map((e=>hm(e))).join(",");{const e=i.filters.map((n=>hm(n))).join(",");return`${i.op}(${e})`}}function B_(i,e){return i instanceof yn?(function(s,o){return o instanceof yn&&s.op===o.op&&s.field.isEqual(o.field)&&vi(s.value,o.value)})(i,e):i instanceof Fa?(function(s,o){return o instanceof Fa&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,m)=>u&&B_(f,o.filters[m])),!0):!1})(i,e):void Ge(19439)}function H_(i){return i instanceof yn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Ko(n.value)}`})(i):i instanceof Fa?(function(n){return n.op.toString()+" {"+n.getFilters().map(H_).join(" ,")+"}"})(i):"Filter"}class tI extends yn{constructor(e,n,s){super(e,n,s),this.key=ze.fromName(s.referenceValue)}matches(e){const n=ze.comparator(e.key,this.key);return this.matchesComparison(n)}}class nI extends yn{constructor(e,n){super(e,"in",n),this.keys=q_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class aI extends yn{constructor(e,n){super(e,"not-in",n),this.keys=q_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function q_(i,e){return(e.arrayValue?.values||[]).map((n=>ze.fromName(n.referenceValue)))}class iI extends yn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return eg(n)&&kc(n.arrayValue,this.value)}}class sI extends yn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&kc(this.value.arrayValue,n)}}class rI extends yn{constructor(e,n){super(e,"not-in",n)}matches(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!kc(this.value.arrayValue,n)}}class oI extends yn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>kc(this.value.arrayValue,s)))}}class lI{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function mv(i,e=null,n=[],s=[],o=null,u=null,f=null){return new lI(i,e,n,s,o,u,f)}function tg(i){const e=We(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>hm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),gf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Ko(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Ko(s))).join(",")),e.Te=n}return e.Te}function ng(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!ZC(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!B_(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!pv(i.startAt,e.startAt)&&pv(i.endAt,e.endAt)}function pm(i){return ze.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class rl{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,b=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=b,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function cI(i,e,n,s,o,u,f,m){return new rl(i,e,n,s,o,u,f,m)}function yf(i){return new rl(i)}function gv(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function uI(i){return ze.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function F_(i){return i.collectionGroup!==null}function _c(i){const e=We(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new _n(Mn.comparator);return f.filters.forEach((b=>{b.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Oc(u,s))})),n.has(Mn.keyField().canonicalString())||e.Ie.push(new Oc(Mn.keyField(),s))}return e.Ie}function bi(i){const e=We(i);return e.Ee||(e.Ee=dI(e,_c(i))),e.Ee}function dI(i,e){if(i.limitType==="F")return mv(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Oc(o.field,u)}));const n=i.endAt?new Qd(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Qd(i.startAt.position,i.startAt.inclusive):null;return mv(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function mm(i,e){const n=i.filters.concat([e]);return new rl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function fI(i,e){const n=i.explicitOrderBy.concat([e]);return new rl(i.path,i.collectionGroup,n,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function gm(i,e,n){return new rl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function xf(i,e){return ng(bi(i),bi(e))&&i.limitType===e.limitType}function G_(i){return`${tg(bi(i))}|lt:${i.limitType}`}function Mo(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>H_(o))).join(", ")}]`),gf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Ko(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Ko(o))).join(",")),`Target(${s})`})(bi(i))}; limitType=${i.limitType})`}function vf(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ze.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of _c(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,b){const g=hv(f,m,b);return f.inclusive?g<=0:g<0})(s.startAt,_c(s),o)||s.endAt&&!(function(f,m,b){const g=hv(f,m,b);return f.inclusive?g>=0:g>0})(s.endAt,_c(s),o))})(i,e)}function hI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function $_(i){return(e,n)=>{let s=!1;for(const o of _c(i)){const u=pI(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function pI(i,e,n){const s=i.field.isKeyField()?ze.comparator(e.key,n.key):(function(u,f,m){const b=f.data.field(u),g=m.data.field(u);return b!==null&&g!==null?Qo(b,g):Ge(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ge(19790,{direction:i.dir})}}class Fr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){tr(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return C_(this.inner)}size(){return this.innerSize}}const mI=new Wt(ze.comparator);function es(){return mI}const Y_=new Wt(ze.comparator);function mc(...i){let e=Y_;for(const n of i)e=e.insert(n.key,n);return e}function Q_(i){let e=Y_;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Ir(){return Ec()}function K_(){return Ec()}function Ec(){return new Fr((i=>i.toString()),((i,e)=>i.isEqual(e)))}const gI=new Wt(ze.comparator),bI=new _n(ze.comparator);function ht(...i){let e=bI;for(const n of i)e=e.add(n);return e}const yI=new _n(ft);function xI(){return yI}function ag(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gd(e)?"-0":e}}function X_(i){return{integerValue:""+i}}function vI(i,e){return FC(e)?X_(e):ag(i,e)}class _f{constructor(){this._=void 0}}function _I(i,e,n){return i instanceof Dc?(function(o,u){const f={fields:{[k_]:{stringValue:j_},[D_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Zm(u)&&(u=bf(u)),u&&(f.fields[O_]=u),{mapValue:f}})(n,e):i instanceof Xo?W_(i,e):i instanceof Jo?Z_(i,e):(function(o,u){const f=J_(o,u),m=bv(f)+bv(o.Ae);return fm(f)&&fm(o.Ae)?X_(m):ag(o.serializer,m)})(i,e)}function EI(i,e,n){return i instanceof Xo?W_(i,e):i instanceof Jo?Z_(i,e):n}function J_(i,e){return i instanceof Kd?(function(s){return fm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Dc extends _f{}class Xo extends _f{constructor(e){super(),this.elements=e}}function W_(i,e){const n=eE(e);for(const s of i.elements)n.some((o=>vi(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Jo extends _f{constructor(e){super(),this.elements=e}}function Z_(i,e){let n=eE(e);for(const s of i.elements)n=n.filter((o=>!vi(o,s)));return{arrayValue:{values:n}}}class Kd extends _f{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function bv(i){return on(i.integerValue||i.doubleValue)}function eE(i){return eg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class ig{constructor(e,n){this.field=e,this.transform=n}}function wI(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Xo&&o instanceof Xo||s instanceof Jo&&o instanceof Jo?Yo(s.elements,o.elements,vi):s instanceof Kd&&o instanceof Kd?vi(s.Ae,o.Ae):s instanceof Dc&&o instanceof Dc})(i.transform,e.transform)}class AI{constructor(e,n){this.version=e,this.transformResults=n}}class Ra{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ra}static exists(e){return new Ra(void 0,e)}static updateTime(e){return new Ra(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Od(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Ef{}function tE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new sg(i.key,Ra.none()):new Fc(i.key,i.data,Ra.none());{const n=i.data,s=ea.empty();let o=new _n(Mn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new nr(i.key,s,new fa(o.toArray()),Ra.none())}}function SI(i,e,n){i instanceof Fc?(function(o,u,f){const m=o.value.clone(),b=xv(o.fieldTransforms,u,f.transformResults);m.setAll(b),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(i,e,n):i instanceof nr?(function(o,u,f){if(!Od(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=xv(o.fieldTransforms,u,f.transformResults),b=u.data;b.setAll(nE(o)),b.setAll(m),u.convertToFoundDocument(f.version,b).setHasCommittedMutations()})(i,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function wc(i,e,n,s){return i instanceof Fc?(function(u,f,m,b){if(!Od(u.precondition,f))return m;const g=u.value.clone(),v=vv(u.fieldTransforms,b,f);return g.setAll(v),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null})(i,e,n,s):i instanceof nr?(function(u,f,m,b){if(!Od(u.precondition,f))return m;const g=vv(u.fieldTransforms,b,f),v=f.data;return v.setAll(nE(u)),v.setAll(g),f.convertToFoundDocument(f.version,v).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(i,e,n,s):(function(u,f,m){return Od(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(i,e,n)}function TI(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=J_(s.transform,o||null);u!=null&&(n===null&&(n=ea.empty()),n.set(s.field,u))}return n||null}function yv(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Yo(s,o,((u,f)=>wI(u,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Fc extends Ef{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class nr extends Ef{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function nE(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function xv(i,e,n){const s=new Map;wt(i.length===n.length,32656,{Ve:n.length,de:i.length});for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,EI(f,m,n[o]))}return s}function vv(i,e,n){const s=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);s.set(o.field,_I(u,f,e))}return s}class sg extends Ef{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NI extends Ef{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class RI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&SI(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=wc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=wc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=K_();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const b=tE(f,m);b!==null&&s.set(o.key,b),f.isValidDocument()||f.convertToNoDocument(Xe.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ht())}isEqual(e){return this.batchId===e.batchId&&Yo(this.mutations,e.mutations,((n,s)=>yv(n,s)))&&Yo(this.baseMutations,e.baseMutations,((n,s)=>yv(n,s)))}}class rg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){wt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return gI})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new rg(e,n,s,o)}}class CI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class II{constructor(e,n){this.count=e,this.unchangedNames=n}}var bn,gt;function jI(i){switch(i){case ue.OK:return Ge(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Ge(15467,{code:i})}}function aE(i){if(i===void 0)return Zi("GRPC error has no .code"),ue.UNKNOWN;switch(i){case bn.OK:return ue.OK;case bn.CANCELLED:return ue.CANCELLED;case bn.UNKNOWN:return ue.UNKNOWN;case bn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case bn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case bn.INTERNAL:return ue.INTERNAL;case bn.UNAVAILABLE:return ue.UNAVAILABLE;case bn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case bn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case bn.NOT_FOUND:return ue.NOT_FOUND;case bn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case bn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case bn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case bn.ABORTED:return ue.ABORTED;case bn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case bn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case bn.DATA_LOSS:return ue.DATA_LOSS;default:return Ge(39323,{code:i})}}(gt=bn||(bn={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";function kI(){return new TextEncoder}const OI=new Fs([4294967295,4294967295],0);function _v(i){const e=kI().encode(i),n=new y_;return n.update(e),new Uint8Array(n.digest())}function Ev(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Fs([n,s],0),new Fs([o,u],0)]}class og{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new gc(`Invalid padding: ${n}`);if(s<0)throw new gc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new gc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new gc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Fs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Fs.fromNumber(s)));return o.compare(OI)===1&&(o=new Fs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=_v(e),[s,o]=Ev(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new og(u,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=_v(e),[s,o]=Ev(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.be(f)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class wf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Gc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new wf(Xe.min(),o,new Wt(ft),es(),ht())}}class Gc{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Gc(s,n,ht(),ht(),ht())}}class Dd{constructor(e,n,s,o){this.Se=e,this.removedTargetIds=n,this.key=s,this.De=o}}class iE{constructor(e,n){this.targetId=e,this.Ce=n}}class sE{constructor(e,n,s=Pn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class wv{constructor(){this.ve=0,this.Fe=Av(),this.Me=Pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ht(),n=ht(),s=ht();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ge(38017,{changeType:u})}})),new Gc(this.Me,this.xe,e,n,s)}Ke(){this.Oe=!1,this.Fe=Av()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class DI{constructor(e){this.Ge=e,this.ze=new Map,this.je=es(),this.He=_d(),this.Je=_d(),this.Ze=new Wt(ft)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(pm(u))if(s===0){const f=new ze(u.path);this.et(n,f,Un.newNoDocument(f,Xe.min()))}else wt(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),b=m?this.ct(m,e,f):1;if(b!==0){this.it(n);const g=b===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=Ks(s).toUint8Array()}catch(b){if(b instanceof I_)return $o("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{m=new og(f,o,u)}catch(b){return $o(b instanceof gc?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&pm(m.target)){const b=new ze(m.target.path);this.It(b).has(f)||this.Et(f,b)||this.et(f,b,Un.newNoDocument(b,e))}u.Be&&(n.set(f,u.ke()),u.Ke())}}));let s=ht();this.Je.forEach(((u,f)=>{let m=!0;f.forEachWhile((b=>{const g=this.ot(b);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new wf(e,n,this.Ze,this.je,s);return this.je=es(),this.He=_d(),this.Je=_d(),this.Ze=new Wt(ft),o}Ye(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,s),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new wv,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new _n(ft),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new _n(ft),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function _d(){return new Wt(ze.comparator)}function Av(){return new Wt(ze.comparator)}const MI={asc:"ASCENDING",desc:"DESCENDING"},PI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zI={and:"AND",or:"OR"};class VI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bm(i,e){return i.useProto3Json||gf(e)?e:{value:e}}function Xd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function LI(i,e){return Xd(i,e.toTimestamp())}function yi(i){return wt(!!i,49232),Xe.fromTimestamp((function(n){const s=Qs(n);return new Ft(s.seconds,s.nanos)})(i))}function lg(i,e){return ym(i,e).canonicalString()}function ym(i,e){const n=(function(o){return new Lt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function oE(i){const e=Lt.fromString(i);return wt(fE(e),10190,{key:e.toString()}),e}function xm(i,e){return lg(i.databaseId,e.path)}function $p(i,e){const n=oE(e);if(n.get(1)!==i.databaseId.projectId)throw new Te(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Te(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ze(cE(n))}function lE(i,e){return lg(i.databaseId,e)}function UI(i){const e=oE(i);return e.length===4?Lt.emptyPath():cE(e)}function vm(i){return new Lt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function cE(i){return wt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Sv(i,e,n){return{name:xm(i,e),fields:n.value.mapValue.fields}}function BI(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ge(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(g,v){return g.useProto3Json?(wt(v===void 0||typeof v=="string",58123),Pn.fromBase64String(v||"")):(wt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Pn.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(g){const v=g.code===void 0?ue.UNKNOWN:aE(g.code);return new Te(v,g.message||"")})(f);n=new sE(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=$p(i,s.document.name),u=yi(s.document.updateTime),f=s.document.createTime?yi(s.document.createTime):Xe.min(),m=new ea({mapValue:{fields:s.document.fields}}),b=Un.newFoundDocument(o,u,f,m),g=s.targetIds||[],v=s.removedTargetIds||[];n=new Dd(g,v,b.key,b)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=$p(i,s.document),u=s.readTime?yi(s.readTime):Xe.min(),f=Un.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Dd([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=$p(i,s.document),u=s.removedTargetIds||[];n=new Dd([],u,o,null)}else{if(!("filter"in e))return Ge(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new II(o,u),m=s.targetId;n=new iE(m,f)}}return n}function HI(i,e){let n;if(e instanceof Fc)n={update:Sv(i,e.key,e.value)};else if(e instanceof sg)n={delete:xm(i,e.key)};else if(e instanceof nr)n={update:Sv(i,e.key,e.data),updateMask:JI(e.fieldMask)};else{if(!(e instanceof NI))return Ge(16599,{dt:e.type});n={verify:xm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const m=f.transform;if(m instanceof Dc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Xo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Jo)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Kd)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Ge(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:LI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ge(27497)})(i,e.precondition)),n}function qI(i,e){return i&&i.length>0?(wt(e!==void 0,14353),i.map((n=>(function(o,u){let f=o.updateTime?yi(o.updateTime):yi(u);return f.isEqual(Xe.min())&&(f=yi(u)),new AI(f,o.transformResults||[])})(n,e)))):[]}function FI(i,e){return{documents:[lE(i,e.path)]}}function GI(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=lE(i,o);const u=(function(g){if(g.length!==0)return dE(Fa.create(g,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(g){if(g.length!==0)return g.map((v=>(function(T){return{field:Po(T.field),direction:QI(T.dir)}})(v)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=bm(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:o}}function $I(i){let e=UI(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){wt(s===1,65062);const v=n.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let u=[];n.where&&(u=(function(E){const T=uE(E);return T instanceof Fa&&U_(T)?T.getFilters():[T]})(n.where));let f=[];n.orderBy&&(f=(function(E){return E.map((T=>(function(G){return new Oc(zo(G.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(T)))})(n.orderBy));let m=null;n.limit&&(m=(function(E){let T;return T=typeof E=="object"?E.value:E,gf(T)?null:T})(n.limit));let b=null;n.startAt&&(b=(function(E){const T=!!E.before,M=E.values||[];return new Qd(M,T)})(n.startAt));let g=null;return n.endAt&&(g=(function(E){const T=!E.before,M=E.values||[];return new Qd(M,T)})(n.endAt)),cI(e,o,f,u,m,"F",b,g)}function YI(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uE(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=zo(n.unaryFilter.field);return yn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=zo(n.unaryFilter.field);return yn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=zo(n.unaryFilter.field);return yn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=zo(n.unaryFilter.field);return yn.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}})(i):i.fieldFilter!==void 0?(function(n){return yn.create(zo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Fa.create(n.compositeFilter.filters.map((s=>uE(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}})(n.compositeFilter.op))})(i):Ge(30097,{filter:i})}function QI(i){return MI[i]}function KI(i){return PI[i]}function XI(i){return zI[i]}function Po(i){return{fieldPath:i.canonicalString()}}function zo(i){return Mn.fromServerFormat(i.fieldPath)}function dE(i){return i instanceof yn?(function(n){if(n.op==="=="){if(fv(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NAN"}};if(dv(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fv(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NOT_NAN"}};if(dv(n.value))return{unaryFilter:{field:Po(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Po(n.field),op:KI(n.op),value:n.value}}})(i):i instanceof Fa?(function(n){const s=n.getFilters().map((o=>dE(o)));return s.length===1?s[0]:{compositeFilter:{op:XI(n.op),filters:s}}})(i):Ge(54877,{filter:i})}function JI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function fE(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function hE(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class Us{constructor(e,n,s,o,u=Xe.min(),f=Xe.min(),m=Pn.EMPTY_BYTE_STRING,b=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=b}withSequenceNumber(e){return new Us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class WI{constructor(e){this.yt=e}}function ZI(i){const e=$I({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?gm(e,e.limit,"L"):e}class ej{constructor(){this.Sn=new tj}addToCollectionParentIndex(e,n){return this.Sn.add(n),pe.resolve()}getCollectionParents(e,n){return pe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return pe.resolve()}deleteFieldIndex(e,n){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,n){return pe.resolve()}getDocumentsMatchingTarget(e,n){return pe.resolve(null)}getIndexType(e,n){return pe.resolve(0)}getFieldIndexes(e,n){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,n){return pe.resolve(Ys.min())}getMinOffsetFromCollectionGroup(e,n){return pe.resolve(Ys.min())}updateCollectionGroup(e,n,s){return pe.resolve()}updateIndexEntries(e,n){return pe.resolve()}}class tj{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new _n(Lt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new _n(Lt.comparator)).toArray()}}const Tv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pE=41943040;class Zn{static withCacheSize(e){return new Zn(e,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Zn.DEFAULT_COLLECTION_PERCENTILE=10,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zn.DEFAULT=new Zn(pE,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zn.DISABLED=new Zn(-1,0,0);class Wo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Wo(0)}static ar(){return new Wo(-1)}}const Nv="LruGarbageCollector",nj=1048576;function Rv([i,e],[n,s]){const o=ft(i,n);return o===0?ft(e,s):o}class aj{constructor(e){this.Pr=e,this.buffer=new _n(Rv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Rv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ij{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ie(Nv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sl(n)?Ie(Nv,"Ignoring IndexedDB error during garbage collection: ",n):await il(n)}await this.Ar(3e5)}))}}class sj{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return pe.resolve(mf.ce);const s=new aj(n);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Tv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tv):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let s,o,u,f,m,b,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,f=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,m=Date.now(),this.removeTargets(e,s,n)))).next((E=>(u=E,b=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(g=Date.now(),Do()<=dt.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-v}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(b-m)+`ms
	Removed ${E} documents in `+(g-b)+`ms
Total Duration: ${g-v}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:E}))))}}function rj(i,e){return new sj(i,e)}class oj{constructor(){this.changes=new Fr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?pe.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class cj{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&wc(s.mutation,o,fa.empty(),Ft.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,ht()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=ht()){const o=Ir();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=mc();return u.forEach(((m,b)=>{f=f.insert(m,b.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=Ir();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,ht())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let u=es();const f=Ec(),m=(function(){return Ec()})();return n.forEach(((b,g)=>{const v=s.get(g.key);o.has(g.key)&&(v===void 0||v.mutation instanceof nr)?u=u.insert(g.key,g):v!==void 0?(f.set(g.key,v.mutation.getFieldMask()),wc(v.mutation,g,v.mutation.getFieldMask(),Ft.now())):f.set(g.key,fa.empty())})),this.recalculateAndSaveOverlays(e,u).next((b=>(b.forEach(((g,v)=>f.set(g,v))),n.forEach(((g,v)=>m.set(g,new lj(v,f.get(g)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=Ec();let o=new Wt(((f,m)=>f-m)),u=ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((b=>{const g=n.get(b);if(g===null)return;let v=s.get(b)||fa.empty();v=m.applyToLocalView(g,v),s.set(b,v);const E=(o.get(m.batchId)||ht()).add(b);o=o.insert(m.batchId,E)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const b=m.getNext(),g=b.key,v=b.value,E=K_();v.forEach((T=>{if(!u.has(T)){const M=tE(n.get(T),s.get(T));M!==null&&E.set(T,M),u=u.add(T)}})),f.push(this.documentOverlayCache.saveOverlays(e,g,E))}return pe.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return uI(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):F_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):pe.resolve(Ir());let m=Cc,b=u;return f.next((g=>pe.forEach(g,((v,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),u.get(v)?pe.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{b=b.insert(v,T)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,b,g,ht()))).next((v=>({batchId:m,changes:Q_(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ze(n)).next((s=>{let o=mc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=mc();return this.indexManager.getCollectionParents(e,u).next((m=>pe.forEach(m,(b=>{const g=(function(E,T){return new rl(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,b.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((v=>{v.forEach(((E,T)=>{f=f.insert(E,T)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((b,g)=>{const v=g.getKey();f.get(v)===null&&(f=f.insert(v,Un.newInvalidDocument(v)))}));let m=mc();return f.forEach(((b,g)=>{const v=u.get(b);v!==void 0&&wc(v.mutation,g,fa.empty(),Ft.now()),vf(n,g)&&(m=m.insert(b,g))})),m}))}}class uj{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return pe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:yi(o.createTime)}})(n)),pe.resolve()}getNamedQuery(e,n){return pe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:ZI(o.bundledQuery),readTime:yi(o.readTime)}})(n)),pe.resolve()}}class dj{constructor(){this.overlays=new Wt(ze.comparator),this.Lr=new Map}getOverlay(e,n){return pe.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ir();return pe.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.bt(e,n,u)})),pe.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(s)),pe.resolve()}getOverlaysForCollection(e,n,s){const o=Ir(),u=n.length+1,f=new ze(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const b=m.getNext().value,g=b.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&b.largestBatchId>s&&o.set(b.getKey(),b)}return pe.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new Wt(((g,v)=>g-v));const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let v=u.get(g.largestBatchId);v===null&&(v=Ir(),u=u.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const m=Ir(),b=u.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach(((g,v)=>m.set(g,v))),!(m.size()>=o)););return pe.resolve(m)}bt(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new CI(n,s));let u=this.Lr.get(n);u===void 0&&(u=ht(),this.Lr.set(n,u)),this.Lr.set(n,u.add(s.key))}}class fj{constructor(){this.sessionToken=Pn.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,pe.resolve()}}class cg{constructor(){this.kr=new _n(Tn.Kr),this.qr=new _n(Tn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const s=new Tn(e,n);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Wr(new Tn(e,n))}Qr(e,n){e.forEach((s=>this.removeReference(s,n)))}Gr(e){const n=new ze(new Lt([])),s=new Tn(n,e),o=new Tn(n,e+1),u=[];return this.qr.forEachInRange([s,o],(f=>{this.Wr(f),u.push(f.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ze(new Lt([])),s=new Tn(n,e),o=new Tn(n,e+1);let u=ht();return this.qr.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new Tn(e,0),s=this.kr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Tn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ze.comparator(e.key,n.key)||ft(e.Hr,n.Hr)}static Ur(e,n){return ft(e.Hr,n.Hr)||ze.comparator(e.key,n.key)}}class hj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new _n(Tn.Kr)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new RI(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Jr=this.Jr.add(new Tn(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return pe.resolve(f)}lookupMutationBatch(e,n){return pe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Xr(s),u=o<0?0:o;return pe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?Wm:this.Yn-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Tn(n,0),o=new Tn(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([s,o],(f=>{const m=this.Zr(f.Hr);u.push(m)})),pe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new _n(ft);return n.forEach((o=>{const u=new Tn(o,0),f=new Tn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,f],(m=>{s=s.add(m.Hr)}))})),pe.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ze.isDocumentKey(u)||(u=u.child(""));const f=new Tn(new ze(u),0);let m=new _n(ft);return this.Jr.forEachWhile((b=>{const g=b.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(m=m.add(b.Hr)),!0)}),f),pe.resolve(this.Yr(m))}Yr(e){const n=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){wt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return pe.forEach(n.mutations,(o=>{const u=new Tn(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,n){const s=new Tn(n,0),o=this.Jr.firstAfterOrEqual(s);return pe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class pj{constructor(e){this.ti=e,this.docs=(function(){return new Wt(ze.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ti(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return pe.resolve(s?s.document.mutableCopy():Un.newInvalidDocument(n))}getEntries(e,n){let s=es();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Un.newInvalidDocument(o))})),pe.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=es();const f=n.path,m=new ze(f.child("__id-9223372036854775808__")),b=this.docs.getIteratorFrom(m);for(;b.hasNext();){const{key:g,value:{document:v}}=b.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||UC(LC(v),s)<=0||(o.has(v.key)||vf(n,v))&&(u=u.insert(v.key,v.mutableCopy()))}return pe.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ge(9500)}ni(e,n){return pe.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new mj(this)}getSize(e){return pe.resolve(this.size)}}class mj extends oj{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),pe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class gj{constructor(e){this.persistence=e,this.ri=new Fr((n=>tg(n)),ng),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.ii=0,this.si=new cg,this.targetCount=0,this.oi=Wo._r()}forEachTarget(e,n){return this.ri.forEach(((s,o)=>n(o))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ii&&(this.ii=n),pe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Wo(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,pe.resolve()}updateTargetData(e,n){return this.lr(n),pe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.ri.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.ri.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),pe.waitFor(u).next((()=>o))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,n){const s=this.ri.get(n)||null;return pe.resolve(s)}addMatchingKeys(e,n,s){return this.si.$r(n,s),pe.resolve()}removeMatchingKeys(e,n,s){this.si.Qr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),pe.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),pe.resolve()}getMatchingKeysForTargetId(e,n){const s=this.si.jr(n);return pe.resolve(s)}containsKey(e,n){return pe.resolve(this.si.containsKey(n))}}class mE{constructor(e,n){this._i={},this.overlays={},this.ai=new mf(0),this.ui=!1,this.ui=!0,this.ci=new fj,this.referenceDelegate=e(this),this.li=new gj(this),this.indexManager=new ej,this.remoteDocumentCache=(function(o){return new pj(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new WI(n),this.Pi=new uj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this._i[e.toKey()];return s||(s=new hj(n,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,s){Ie("MemoryPersistence","Starting transaction:",e);const o=new bj(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return pe.or(Object.values(this._i).map((s=>()=>s.containsKey(e,n))))}}class bj extends HC{constructor(e){super(),this.currentSequenceNumber=e}}class ug{constructor(e){this.persistence=e,this.Ri=new cg,this.Ai=null}static Vi(e){return new ug(e)}get di(){if(this.Ai)return this.Ai;throw Ge(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.di.delete(s.toString()),pe.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.di.add(s.toString()),pe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),pe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.di,(s=>{const o=ze.fromPath(s);return this.mi(e,o).next((u=>{u||n.removeEntry(o,Xe.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return pe.or([()=>pe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Jd{constructor(e,n){this.persistence=e,this.fi=new Fr((s=>GC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=rj(this,n)}static Vi(e,n){return new Jd(e,n)}Ti(){}Ii(e){return pe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}pr(e){let n=0;return this.mr(e,(s=>{n++})).next((()=>n))}mr(e,n){return pe.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((u=>u?pe.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(f=>this.wr(e,f,n).next((m=>{m||(s++,u.removeEntry(f,Xe.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),pe.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),pe.resolve()}removeReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),pe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=jd(e.data.value)),n}wr(e,n,s){return pe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return pe.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class dg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Ts=s,this.Is=o}static Es(e,n){let s=ht(),o=ht();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new dg(e,n.fromCache,s,o)}}class yj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xj{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return $T()?8:qC(Bn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.gs(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ps(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new yj;return this.ys(e,n,f).next((m=>{if(u.result=m,this.As)return this.ws(e,n,f,m.size)}))})).next((()=>u.result))}ws(e,n,s,o){return s.documentReadCount<this.Vs?(Do()<=dt.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",Mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),pe.resolve()):(Do()<=dt.DEBUG&&Ie("QueryEngine","Query:",Mo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(Do()<=dt.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",Mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bi(n))):pe.resolve())}gs(e,n){if(gv(n))return pe.resolve(null);let s=bi(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=gm(n,null,"F"),s=bi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=ht(...u);return this.fs.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((b=>{const g=this.bs(n,m);return this.Ss(n,g,f,b.readTime)?this.gs(e,gm(n,null,"F")):this.Ds(e,g,n,b)}))))})))))}ps(e,n,s,o){return gv(n)||o.isEqual(Xe.min())?pe.resolve(null):this.fs.getDocuments(e,s).next((u=>{const f=this.bs(n,u);return this.Ss(n,f,s,o)?pe.resolve(null):(Do()<=dt.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Mo(n)),this.Ds(e,f,n,VC(o,Cc)).next((m=>m)))}))}bs(e,n){let s=new _n($_(e));return n.forEach(((o,u)=>{vf(e,u)&&(s=s.add(u))})),s}Ss(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,s){return Do()<=dt.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",Mo(n)),this.fs.getDocumentsMatchingQuery(e,n,Ys.min(),s)}Ds(e,n,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const fg="LocalStore",vj=3e8;class _j{constructor(e,n,s,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new Wt(ft),this.Fs=new Fr((u=>tg(u)),ng),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cj(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function Ej(i,e,n,s){return new _j(i,e,n,s)}async function gE(i,e){const n=We(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],m=[];let b=ht();for(const g of o){f.push(g.batchId);for(const v of g.mutations)b=b.add(v.key)}for(const g of u){m.push(g.batchId);for(const v of g.mutations)b=b.add(v.key)}return n.localDocuments.getDocuments(s,b).next((g=>({Ns:g,removedBatchIds:f,addedBatchIds:m})))}))}))}function wj(i,e){const n=We(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(m,b,g,v){const E=g.batch,T=E.keys();let M=pe.resolve();return T.forEach((G=>{M=M.next((()=>v.getEntry(b,G))).next((B=>{const U=g.docVersions.get(G);wt(U!==null,48541),B.version.compareTo(U)<0&&(E.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),v.addEntry(B)))}))})),M.next((()=>m.mutationQueue.removeMutationBatch(b,E)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let b=ht();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(b=b.add(m.batch.mutations[g].key));return b})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function bE(i){const e=We(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function Aj(i,e){const n=We(i),s=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const m=[];e.targetChanges.forEach(((v,E)=>{const T=o.get(E);if(!T)return;m.push(n.li.removeMatchingKeys(u,v.removedDocuments,E).next((()=>n.li.addMatchingKeys(u,v.addedDocuments,E))));let M=T.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?M=M.withResumeToken(Pn.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):v.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(v.resumeToken,s)),o=o.insert(E,M),(function(B,U,V){return B.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=vj?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(T,M,v)&&m.push(n.li.updateTargetData(u,M))}));let b=es(),g=ht();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,v))})),m.push(Sj(u,f,e.documentUpdates).next((v=>{b=v.Bs,g=v.Ls}))),!s.isEqual(Xe.min())){const v=n.li.getLastRemoteSnapshotVersion(u).next((E=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(v)}return pe.waitFor(m).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,b,g))).next((()=>b))})).then((u=>(n.vs=o,u)))}function Sj(i,e,n){let s=ht(),o=ht();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let f=es();return n.forEach(((m,b)=>{const g=u.get(m);b.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),b.isNoDocument()&&b.version.isEqual(Xe.min())?(e.removeEntry(m,b.readTime),f=f.insert(m,b)):!g.isValidDocument()||b.version.compareTo(g.version)>0||b.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(b),f=f.insert(m,b)):Ie(fg,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",b.version)})),{Bs:f,Ls:o}}))}function Tj(i,e){const n=We(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Wm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Nj(i,e){const n=We(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.li.getTargetData(s,e).next((u=>u?(o=u,pe.resolve(o)):n.li.allocateTargetId(s).next((f=>(o=new Us(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(s.targetId,s),n.Fs.set(e,s.targetId)),s}))}async function _m(i,e,n){const s=We(i),o=s.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!sl(f))throw f;Ie(fg,`Failed to update sequence numbers for target ${e}: ${f}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function Cv(i,e,n){const s=We(i);let o=Xe.min(),u=ht();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(b,g,v){const E=We(b),T=E.Fs.get(v);return T!==void 0?pe.resolve(E.vs.get(T)):E.li.getTargetData(g,v)})(s,f,bi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(f,m.targetId).next((b=>{u=b}))})).next((()=>s.Cs.getDocumentsMatchingQuery(f,e,n?o:Xe.min(),n?u:ht()))).next((m=>(Rj(s,hI(e),m),{documents:m,ks:u})))))}function Rj(i,e,n){let s=i.Ms.get(e)||Xe.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Ms.set(e,s)}class Iv{constructor(){this.activeTargetIds=xI()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cj{constructor(){this.vo=new Iv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,s){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Iv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ij{Mo(e){}shutdown(){}}const jv="ConnectivityMonitor";class kv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ie(jv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ie(jv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ed=null;function Em(){return Ed===null?Ed=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ed++,"0x"+Ed.toString(16)}const Yp="RestConnection",jj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class kj{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===$d?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,n,s,o,u){const f=Em(),m=this.Qo(e,n.toUriEncodedString());Ie(Yp,`Sending RPC '${e}' ${f}:`,m,s);const b={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(b,o,u);const{host:g}=new URL(m),v=Br(g);return this.zo(e,m,b,s,v).then((E=>(Ie(Yp,`Received RPC '${e}' ${f}: `,E),E)),(E=>{throw $o(Yp,`RPC '${e}' ${f} failed with error: `,E,"url: ",m,"request:",s),E}))}jo(e,n,s,o,u,f){return this.Wo(e,n,s,o,u)}Go(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+al})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const s=jj[e];let o=`${this.qo}/v1/${n}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class Oj{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Vn="WebChannelConnection",dc=(i,e,n)=>{i.listen(e,(s=>{try{n(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Ho extends kj{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ho.c_){const e=E_();dc(e,__.STAT_EVENT,(n=>{n.stat===cm.PROXY?Ie(Vn,"STAT_EVENT: detected buffering proxy"):n.stat===cm.NOPROXY&&Ie(Vn,"STAT_EVENT: detected no buffering proxy")})),Ho.c_=!0}}zo(e,n,s,o,u){const f=Em();return new Promise(((m,b)=>{const g=new x_;g.setWithCredentials(!0),g.listenOnce(v_.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Id.NO_ERROR:const E=g.getResponseJson();Ie(Vn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(E)),m(E);break;case Id.TIMEOUT:Ie(Vn,`RPC '${e}' ${f} timed out`),b(new Te(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Id.HTTP_ERROR:const T=g.getStatus();if(Ie(Vn,`RPC '${e}' ${f} failed with status:`,T,"response text:",g.getResponseText()),T>0){let M=g.getResponseJson();Array.isArray(M)&&(M=M[0]);const G=M?.error;if(G&&G.status&&G.message){const B=(function(V){const $=V.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf($)>=0?$:ue.UNKNOWN})(G.status);b(new Te(B,G.message))}else b(new Te(ue.UNKNOWN,"Server responded with status "+g.getStatus()))}else b(new Te(ue.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:f,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Ie(Vn,`RPC '${e}' ${f} completed.`)}}));const v=JSON.stringify(o);Ie(Vn,`RPC '${e}' ${f} sending request:`,o),g.send(n,"POST",v,s,15)}))}T_(e,n,s){const o=Em(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;b!==void 0&&(m.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,n,s),m.encodeInitMessageHeaders=!0;const g=u.join("");Ie(Vn,`Creating RPC '${e}' stream ${o}: ${g}`,m);const v=f.createWebChannel(g,m);this.I_(v);let E=!1,T=!1;const M=new Oj({Ho:G=>{T?Ie(Vn,`Not sending because RPC '${e}' stream ${o} is closed:`,G):(E||(Ie(Vn,`Opening RPC '${e}' stream ${o} transport.`),v.open(),E=!0),Ie(Vn,`RPC '${e}' stream ${o} sending:`,G),v.send(G))},Jo:()=>v.close()});return dc(v,pc.EventType.OPEN,(()=>{T||(Ie(Vn,`RPC '${e}' stream ${o} transport opened.`),M.i_())})),dc(v,pc.EventType.CLOSE,(()=>{T||(T=!0,Ie(Vn,`RPC '${e}' stream ${o} transport closed`),M.o_(),this.E_(v))})),dc(v,pc.EventType.ERROR,(G=>{T||(T=!0,$o(Vn,`RPC '${e}' stream ${o} transport errored. Name:`,G.name,"Message:",G.message),M.o_(new Te(ue.UNAVAILABLE,"The operation could not be completed")))})),dc(v,pc.EventType.MESSAGE,(G=>{if(!T){const B=G.data[0];wt(!!B,16349);const U=B,V=U?.error||U[0]?.error;if(V){Ie(Vn,`RPC '${e}' stream ${o} received error:`,V);const $=V.status;let K=(function(ae){const w=bn[ae];if(w!==void 0)return aE(w)})($),re=V.message;K===void 0&&(K=ue.INTERNAL,re="Unknown error status: "+$+" with message "+V.message),T=!0,M.o_(new Te(K,re)),v.close()}else Ie(Vn,`RPC '${e}' stream ${o} received:`,B),M.__(B)}})),Ho.u_(),setTimeout((()=>{M.s_()}),0),M}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,s){super.Go(e,n,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return w_()}}function Dj(i){return new Ho(i)}function Qp(){return typeof document<"u"?document:null}function Af(i){return new VI(i,!0)}Ho.c_=!1;class yE{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=s,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&Ie("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Ov="PersistentStream";class xE{constructor(e,n,s,o,u,f,m,b){this.Ci=e,this.b_=s,this.S_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=b,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(Zi(n.toString()),Zi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new Te(ue.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ie(Ov,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Ie(Ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Mj extends xE{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=BI(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Xe.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Xe.min():f.readTime?yi(f.readTime):Xe.min()})(e);return this.listener.J_(n,s)}Z_(e){const n={};n.database=vm(this.serializer),n.addTarget=(function(u,f){let m;const b=f.target;if(m=pm(b)?{documents:FI(u,b)}:{query:GI(u,b).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=rE(u,f.resumeToken);const g=bm(u,f.expectedCount);g!==null&&(m.expectedCount=g)}else if(f.snapshotVersion.compareTo(Xe.min())>0){m.readTime=Xd(u,f.snapshotVersion.toTimestamp());const g=bm(u,f.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,e);const s=YI(this.serializer,e);s&&(n.labels=s),this.K_(n)}X_(e){const n={};n.database=vm(this.serializer),n.removeTarget=e,this.K_(n)}}class Pj extends xE{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=qI(e.writeResults,e.commitTime),s=yi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=vm(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>HI(this.serializer,s)))};this.K_(n)}}class zj{}class Vj extends zj{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Te(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Wo(e,ym(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Te(ue.UNKNOWN,u.toString())}))}jo(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.jo(e,ym(n,s),o,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Te(ue.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Lj(i,e,n,s){return new Vj(i,e,n,s)}class Uj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zi(n),this.aa=!1):Ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Vr="RemoteStore";class Bj{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((f=>{s.enqueueAndForget((async()=>{Gr(this)&&(Ie(Vr,"Restarting streams for network reachability change."),await(async function(b){const g=We(b);g.Ea.add(4),await $c(g),g.Va.set("Unknown"),g.Ea.delete(4),await Sf(g)})(this))}))})),this.Va=new Uj(s,o)}}async function Sf(i){if(Gr(i))for(const e of i.Ra)await e(!0)}async function $c(i){for(const e of i.Ra)await e(!1)}function vE(i,e){const n=We(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),gg(n)?mg(n):ol(n).O_()&&pg(n,e))}function hg(i,e){const n=We(i),s=ol(n);n.Ia.delete(e),s.O_()&&_E(n,e),n.Ia.size===0&&(s.O_()?s.L_():Gr(n)&&n.Va.set("Unknown"))}function pg(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ol(i).Z_(e)}function _E(i,e){i.da.$e(e),ol(i).X_(e)}function mg(i){i.da=new DI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),ol(i).start(),i.Va.ua()}function gg(i){return Gr(i)&&!ol(i).x_()&&i.Ia.size>0}function Gr(i){return We(i).Ea.size===0}function EE(i){i.da=void 0}async function Hj(i){i.Va.set("Online")}async function qj(i){i.Ia.forEach(((e,n)=>{pg(i,e)}))}async function Fj(i,e){EE(i),gg(i)?(i.Va.ha(e),mg(i)):i.Va.set("Unknown")}async function Gj(i,e,n){if(i.Va.set("Online"),e instanceof sE&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.da.removeTarget(m))})(i,e)}catch(s){Ie(Vr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Wd(i,s)}else if(e instanceof Dd?i.da.Xe(e):e instanceof iE?i.da.st(e):i.da.tt(e),!n.isEqual(Xe.min()))try{const s=await bE(i.localStore);n.compareTo(s)>=0&&await(function(u,f){const m=u.da.Tt(f);return m.targetChanges.forEach(((b,g)=>{if(b.resumeToken.approximateByteSize()>0){const v=u.Ia.get(g);v&&u.Ia.set(g,v.withResumeToken(b.resumeToken,f))}})),m.targetMismatches.forEach(((b,g)=>{const v=u.Ia.get(b);if(!v)return;u.Ia.set(b,v.withResumeToken(Pn.EMPTY_BYTE_STRING,v.snapshotVersion)),_E(u,b);const E=new Us(v.target,b,g,v.sequenceNumber);pg(u,E)})),u.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){Ie(Vr,"Failed to raise snapshot:",s),await Wd(i,s)}}async function Wd(i,e,n){if(!sl(e))throw e;i.Ea.add(1),await $c(i),i.Va.set("Offline"),n||(n=()=>bE(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{Ie(Vr,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Sf(i)}))}function wE(i,e){return e().catch((n=>Wd(i,n,e)))}async function Tf(i){const e=We(i),n=Js(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Wm;for(;$j(e);)try{const o=await Tj(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,Yj(e,o)}catch(o){await Wd(e,o)}AE(e)&&SE(e)}function $j(i){return Gr(i)&&i.Ta.length<10}function Yj(i,e){i.Ta.push(e);const n=Js(i);n.O_()&&n.Y_&&n.ea(e.mutations)}function AE(i){return Gr(i)&&!Js(i).x_()&&i.Ta.length>0}function SE(i){Js(i).start()}async function Qj(i){Js(i).ra()}async function Kj(i){const e=Js(i);for(const n of i.Ta)e.ea(n.mutations)}async function Xj(i,e,n){const s=i.Ta.shift(),o=rg.from(s,e,n);await wE(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Tf(i)}async function Jj(i,e){e&&Js(i).Y_&&await(async function(s,o){if((function(f){return jI(f)&&f!==ue.ABORTED})(o.code)){const u=s.Ta.shift();Js(s).B_(),await wE(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Tf(s)}})(i,e),AE(i)&&SE(i)}async function Dv(i,e){const n=We(i);n.asyncQueue.verifyOperationInProgress(),Ie(Vr,"RemoteStore received new credentials");const s=Gr(n);n.Ea.add(3),await $c(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Sf(n)}async function Wj(i,e){const n=We(i);e?(n.Ea.delete(2),await Sf(n)):e||(n.Ea.add(2),await $c(n),n.Va.set("Unknown"))}function ol(i){return i.ma||(i.ma=(function(n,s,o){const u=We(n);return u.sa(),new Mj(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Zo:Hj.bind(null,i),Yo:qj.bind(null,i),t_:Fj.bind(null,i),J_:Gj.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),gg(i)?mg(i):i.Va.set("Unknown")):(await i.ma.stop(),EE(i))}))),i.ma}function Js(i){return i.fa||(i.fa=(function(n,s,o){const u=We(n);return u.sa(),new Pj(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Qj.bind(null,i),t_:Jj.bind(null,i),ta:Kj.bind(null,i),na:Xj.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await Tf(i)):(await i.fa.stop(),i.Ta.length>0&&(Ie(Vr,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class bg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new bg(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yg(i,e){if(Zi("AsyncQueue",`${e}: ${i}`),sl(i))return new Te(ue.UNAVAILABLE,`${e}: ${i}`);throw i}class qo{static emptySet(e){return new qo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ze.comparator(n.key,s.key):(n,s)=>ze.comparator(n.key,s.key),this.keyedMap=mc(),this.sortedSet=new Wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new qo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class Mv{constructor(){this.ga=new Wt(ze.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ge(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Zo{constructor(e,n,s,o,u,f,m,b,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=b,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new Zo(e,n,qo.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class Zj{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class ek{constructor(){this.queries=Pv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=We(n),u=o.queries;o.queries=Pv(),u.forEach(((f,m)=>{for(const b of m.ba)b.onError(s)}))})(this,new Te(ue.ABORTED,"Firestore shutting down"))}}function Pv(){return new Fr((i=>G_(i)),xf)}async function xg(i,e){const n=We(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(s=2):(u=new Zj,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=yg(f,`Initialization of query '${Mo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&_g(n)}async function vg(i,e){const n=We(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.ba.indexOf(e);f>=0&&(u.ba.splice(f,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function tk(i,e){const n=We(i);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.ba)m.Fa(o)&&(s=!0);f.wa=o}}s&&_g(n)}function nk(i,e,n){const s=We(i),o=s.queries.get(e);if(o)for(const u of o.ba)u.onError(n);s.queries.delete(e)}function _g(i){i.Ca.forEach((e=>{e.next()}))}var wm,zv;(zv=wm||(wm={})).Ma="default",zv.Cache="cache";class Eg{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Zo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==wm.Cache}}class TE{constructor(e){this.key=e}}class NE{constructor(e){this.key=e}}class ak{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ht(),this.mutatedKeys=ht(),this.eu=$_(e),this.tu=new qo(this.eu)}get nu(){return this.Za}ru(e,n){const s=n?n.iu:new Mv,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const b=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const T=o.get(v),M=vf(this.query,E)?E:null,G=!!T&&this.mutatedKeys.has(T.key),B=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let U=!1;T&&M?T.data.isEqual(M.data)?G!==B&&(s.track({type:3,doc:M}),U=!0):this.su(T,M)||(s.track({type:2,doc:M}),U=!0,(b&&this.eu(M,b)>0||g&&this.eu(M,g)<0)&&(m=!0)):!T&&M?(s.track({type:0,doc:M}),U=!0):T&&!M&&(s.track({type:1,doc:T}),U=!0,(b||g)&&(m=!0)),U&&(M?(f=f.add(M),u=B?u.add(v):u.delete(v)):(f=f.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const v=this.query.limitType==="F"?f.last():f.first();f=f.delete(v.key),u=u.delete(v.key),s.track({type:1,doc:v})}return{tu:f,iu:s,Ss:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((v,E)=>(function(M,G){const B=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Vt:U})}};return B(M)-B(G)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],b=this.Ya.size===0&&this.current&&!o?1:0,g=b!==this.Xa;return this.Xa=b,f.length!==0||g?{snapshot:new Zo(this.query,e.tu,u,f,e.mutatedKeys,b===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Mv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ht(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const n=[];return e.forEach((s=>{this.Ya.has(s)||n.push(new NE(s))})),this.Ya.forEach((s=>{e.has(s)||n.push(new TE(s))})),n}cu(e){this.Za=e.ks,this.Ya=ht();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Zo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const wg="SyncEngine";class ik{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class sk{constructor(e){this.key=e,this.hu=!1}}class rk{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Fr((m=>G_(m)),xf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Wt(ze.comparator),this.Au=new Map,this.Vu=new cg,this.du={},this.mu=new Map,this.fu=Wo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ok(i,e,n=!0){const s=OE(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await RE(s,e,n,!0),o}async function lk(i,e){const n=OE(i);await RE(n,e,!0,!1)}async function RE(i,e,n,s){const o=await Nj(i.localStore,bi(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await ck(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&vE(i.remoteStore,o),m}async function ck(i,e,n,s,o){i.pu=(E,T,M)=>(async function(B,U,V,$){let K=U.view.ru(V);K.Ss&&(K=await Cv(B.localStore,U.query,!1).then((({documents:w})=>U.view.ru(w,K))));const re=$&&$.targetChanges.get(U.targetId),he=$&&$.targetMismatches.get(U.targetId)!=null,ae=U.view.applyChanges(K,B.isPrimaryClient,re,he);return Lv(B,U.targetId,ae.au),ae.snapshot})(i,E,T,M);const u=await Cv(i.localStore,e,!0),f=new ak(e,u.ks),m=f.ru(u.documents),b=Gc.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),g=f.applyChanges(m,i.isPrimaryClient,b);Lv(i,n,g.au);const v=new ik(e,n,f);return i.Tu.set(e,v),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),g.snapshot}async function uk(i,e,n){const s=We(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!xf(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await _m(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&hg(s.remoteStore,o.targetId),Am(s,o.targetId)})).catch(il)):(Am(s,o.targetId),await _m(s.localStore,o.targetId,!0))}async function dk(i,e){const n=We(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),hg(n.remoteStore,s.targetId))}async function fk(i,e,n){const s=xk(i);try{const o=await(function(f,m){const b=We(f),g=Ft.now(),v=m.reduce(((M,G)=>M.add(G.key)),ht());let E,T;return b.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let G=es(),B=ht();return b.xs.getEntries(M,v).next((U=>{G=U,G.forEach(((V,$)=>{$.isValidDocument()||(B=B.add(V))}))})).next((()=>b.localDocuments.getOverlayedDocuments(M,G))).next((U=>{E=U;const V=[];for(const $ of m){const K=TI($,E.get($.key).overlayedDocument);K!=null&&V.push(new nr($.key,K,z_(K.value.mapValue),Ra.exists(!0)))}return b.mutationQueue.addMutationBatch(M,g,V,m)})).next((U=>{T=U;const V=U.applyToLocalDocumentSet(E,B);return b.documentOverlayCache.saveOverlays(M,U.batchId,V)}))})).then((()=>({batchId:T.batchId,changes:Q_(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,b){let g=f.du[f.currentUser.toKey()];g||(g=new Wt(ft)),g=g.insert(m,b),f.du[f.currentUser.toKey()]=g})(s,o.batchId,n),await Yc(s,o.changes),await Tf(s.remoteStore)}catch(o){const u=yg(o,"Failed to persist write");n.reject(u)}}async function CE(i,e){const n=We(i);try{const s=await Aj(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(wt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?wt(f.hu,14607):o.removedDocuments.size>0&&(wt(f.hu,42227),f.hu=!1))})),await Yc(n,s,e)}catch(s){await il(s)}}function Vv(i,e,n){const s=We(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const b=We(f);b.onlineState=m;let g=!1;b.queries.forEach(((v,E)=>{for(const T of E.ba)T.va(m)&&(g=!0)})),g&&_g(b)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function hk(i,e,n){const s=We(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new Wt(ze.comparator);f=f.insert(u,Un.newNoDocument(u,Xe.min()));const m=ht().add(u),b=new wf(Xe.min(),new Map,new Wt(ft),f,m);await CE(s,b),s.Ru=s.Ru.remove(u),s.Au.delete(e),Ag(s)}else await _m(s.localStore,e,!1).then((()=>Am(s,e,n))).catch(il)}async function pk(i,e){const n=We(i),s=e.batch.batchId;try{const o=await wj(n.localStore,e);jE(n,s,null),IE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Yc(n,o)}catch(o){await il(o)}}async function mk(i,e,n){const s=We(i);try{const o=await(function(f,m){const b=We(f);return b.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return b.mutationQueue.lookupMutationBatch(g,m).next((E=>(wt(E!==null,37113),v=E.keys(),b.mutationQueue.removeMutationBatch(g,E)))).next((()=>b.mutationQueue.performConsistencyCheck(g))).next((()=>b.documentOverlayCache.removeOverlaysForBatchId(g,v,m))).next((()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>b.localDocuments.getDocuments(g,v)))}))})(s.localStore,e);jE(s,e,n),IE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Yc(s,o)}catch(o){await il(o)}}function IE(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function jE(i,e,n){const s=We(i);let o=s.du[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function Am(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((s=>{i.Vu.containsKey(s)||kE(i,s)}))}function kE(i,e){i.Eu.delete(e.path.canonicalString());const n=i.Ru.get(e);n!==null&&(hg(i.remoteStore,n),i.Ru=i.Ru.remove(e),i.Au.delete(n),Ag(i))}function Lv(i,e,n){for(const s of n)s instanceof TE?(i.Vu.addReference(s.key,e),gk(i,s)):s instanceof NE?(Ie(wg,"Document no longer in limbo: "+s.key),i.Vu.removeReference(s.key,e),i.Vu.containsKey(s.key)||kE(i,s.key)):Ge(19791,{wu:s})}function gk(i,e){const n=e.key,s=n.path.canonicalString();i.Ru.get(n)||i.Eu.has(s)||(Ie(wg,"New document in limbo: "+n),i.Eu.add(s),Ag(i))}function Ag(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new ze(Lt.fromString(e)),s=i.fu.next();i.Au.set(s,new sk(n)),i.Ru=i.Ru.insert(n,s),vE(i.remoteStore,new Us(bi(yf(n.path)),s,"TargetPurposeLimboResolution",mf.ce))}}async function Yc(i,e,n){const s=We(i),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,b)=>{f.push(s.pu(b,e,n).then((g=>{if((g||n)&&s.isPrimaryClient){const v=g?!g.fromCache:n?.targetChanges.get(b.targetId)?.current;s.sharedClientState.updateQueryState(b.targetId,v?"current":"not-current")}if(g){o.push(g);const v=dg.Es(b.targetId,g);u.push(v)}})))})),await Promise.all(f),s.Pu.J_(o),await(async function(b,g){const v=We(b);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>pe.forEach(g,(T=>pe.forEach(T.Ts,(M=>v.persistence.referenceDelegate.addReference(E,T.targetId,M))).next((()=>pe.forEach(T.Is,(M=>v.persistence.referenceDelegate.removeReference(E,T.targetId,M)))))))))}catch(E){if(!sl(E))throw E;Ie(fg,"Failed to update sequence numbers: "+E)}for(const E of g){const T=E.targetId;if(!E.fromCache){const M=v.vs.get(T),G=M.snapshotVersion,B=M.withLastLimboFreeSnapshotVersion(G);v.vs=v.vs.insert(T,B)}}})(s.localStore,u))}async function bk(i,e){const n=We(i);if(!n.currentUser.isEqual(e)){Ie(wg,"User change. New user:",e.toKey());const s=await gE(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((m=>{m.forEach((b=>{b.reject(new Te(ue.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Yc(n,s.Ns)}}function yk(i,e){const n=We(i),s=n.Au.get(e);if(s&&s.hu)return ht().add(s.key);{let o=ht();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function OE(i){const e=We(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=CE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hk.bind(null,e),e.Pu.J_=tk.bind(null,e.eventManager),e.Pu.yu=nk.bind(null,e.eventManager),e}function xk(i){const e=We(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mk.bind(null,e),e}class Zd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Af(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Ej(this.persistence,new xj,e.initialUser,this.serializer)}Cu(e){return new mE(ug.Vi,this.serializer)}Du(e){return new Cj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zd.provider={build:()=>new Zd};class vk extends Zd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){wt(this.persistence.referenceDelegate instanceof Jd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new ij(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Zn.withCacheSize(this.cacheSizeBytes):Zn.DEFAULT;return new mE((s=>Jd.Vi(s,n)),this.serializer)}}class Sm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Vv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=bk.bind(null,this.syncEngine),await Wj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ek})()}createDatastore(e){const n=Af(e.databaseInfo.databaseId),s=Dj(e.databaseInfo);return Lj(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,m){return new Bj(s,o,u,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>Vv(this.syncEngine,n,0)),(function(){return kv.v()?new kv:new Ij})())}createSyncEngine(e,n){return(function(o,u,f,m,b,g,v){const E=new rk(o,u,f,m,b,g);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=We(n);Ie(Vr,"RemoteStore shutting down."),s.Ea.add(5),await $c(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Sm.provider={build:()=>new Sm};class Sg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Ws="FirestoreClient";class _k{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this._databaseInfo=o,this.user=Ln.UNAUTHENTICATED,this.clientId=Jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{Ie(Ws,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(Ie(Ws,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=yg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Kp(i,e){i.asyncQueue.verifyOperationInProgress(),Ie(Ws,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await gE(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Uv(i,e){i.asyncQueue.verifyOperationInProgress();const n=await Ek(i);Ie(Ws,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>Dv(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>Dv(e.remoteStore,o))),i._onlineComponents=e}async function Ek(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ie(Ws,"Using user provided OfflineComponentProvider");try{await Kp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ue.FAILED_PRECONDITION||o.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;$o("Error using user provided cache. Falling back to memory cache: "+n),await Kp(i,new Zd)}}else Ie(Ws,"Using default OfflineComponentProvider"),await Kp(i,new vk(void 0));return i._offlineComponents}async function DE(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ie(Ws,"Using user provided OnlineComponentProvider"),await Uv(i,i._uninitializedComponentsProvider._online)):(Ie(Ws,"Using default OnlineComponentProvider"),await Uv(i,new Sm))),i._onlineComponents}function wk(i){return DE(i).then((e=>e.syncEngine))}async function ef(i){const e=await DE(i),n=e.eventManager;return n.onListen=ok.bind(null,e.syncEngine),n.onUnlisten=uk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dk.bind(null,e.syncEngine),n}function Ak(i,e,n,s){const o=new Sg(s),u=new Eg(e,o,n);return i.asyncQueue.enqueueAndForget((async()=>xg(await ef(i),u))),()=>{o.Nu(),i.asyncQueue.enqueueAndForget((async()=>vg(await ef(i),u)))}}function Sk(i,e,n={}){const s=new Qi;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,b,g){const v=new Sg({next:T=>{v.Nu(),f.enqueueAndForget((()=>vg(u,E)));const M=T.docs.has(m);!M&&T.fromCache?g.reject(new Te(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&T.fromCache&&b&&b.source==="server"?g.reject(new Te(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new Eg(yf(m.path),v,{includeMetadataChanges:!0,Ka:!0});return xg(u,E)})(await ef(i),i.asyncQueue,e,n,s))),s.promise}function Tk(i,e,n={}){const s=new Qi;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,b,g){const v=new Sg({next:T=>{v.Nu(),f.enqueueAndForget((()=>vg(u,E))),T.fromCache&&b.source==="server"?g.reject(new Te(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new Eg(m,v,{includeMetadataChanges:!0,Ka:!0});return xg(u,E)})(await ef(i),i.asyncQueue,e,n,s))),s.promise}function Nk(i,e){const n=new Qi;return i.asyncQueue.enqueueAndForget((async()=>fk(await wk(i),e,n))),n.promise}function ME(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const Rk="ComponentProvider",Bv=new Map;function Ck(i,e,n,s,o){return new QC(i,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,ME(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}const PE="firestore.googleapis.com",Hv=!0;class qv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PE,this.ssl=Hv}else this.host=e.host,this.ssl=e.ssl??Hv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nj)throw new Te(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ME(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Te(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new NC;switch(s.type){case"firstParty":return new jC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Te(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Bv.get(n);s&&(Ie(Rk,"Removing Datastore"),Bv.delete(n),s.terminate())})(this),Promise.resolve()}}function zE(i,e,n,s={}){i=ta(i,Nf);const o=Br(e),u=i._getSettings(),f={...u,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(Mm(`https://${m}`),Pm("Firestore",!0)),u.host!==PE&&u.host!==m&&$o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const b={...u,host:m,ssl:o,emulatorOptions:s};if(!Xi(b,f)&&(i._setSettings(b),s.mockUserToken)){let g,v;if(typeof s.mockUserToken=="string")g=s.mockUserToken,v=Ln.MOCK_USER;else{g=j1(s.mockUserToken,i._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new Te(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Ln(E)}i._authCredentials=new RC(new S_(g,v))}}class ar{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ar(this.firestore,e,this._query)}}class nn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}toJSON(){return{type:nn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(qc(n,nn._jsonSchema))return new nn(e,s||null,new ze(Lt.fromString(n.referencePath)))}}nn._jsonSchemaVersion="firestore/documentReference/1.0",nn._jsonSchema={type:xn("string",nn._jsonSchemaVersion),referencePath:xn("string")};class Gs extends ar{constructor(e,n,s){super(e,n,yf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new ze(e))}withConverter(e){return new Gs(this.firestore,e,this._path)}}function Rt(i,e,...n){if(i=ln(i),T_("collection","path",e),i instanceof Nf){const s=Lt.fromString(e,...n);return nv(s),new Gs(i,null,s)}{if(!(i instanceof nn||i instanceof Gs))throw new Te(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Lt.fromString(e,...n));return nv(s),new Gs(i.firestore,null,s)}}function je(i,e,...n){if(i=ln(i),arguments.length===1&&(e=Jm.newId()),T_("doc","path",e),i instanceof Nf){const s=Lt.fromString(e,...n);return tv(s),new nn(i,null,new ze(s))}{if(!(i instanceof nn||i instanceof Gs))throw new Te(ue.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Lt.fromString(e,...n));return tv(s),new nn(i.firestore,i instanceof Gs?i.converter:null,new ze(s))}}const Fv="AsyncQueue";class Gv{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yE(this,"async_queue_retry"),this._c=()=>{const s=Qp();s&&Ie(Fv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Qp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Qp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Qi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!sl(e))throw e;Ie(Fv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Zi("INTERNAL UNHANDLED ERROR: ",$v(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=bg.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ge(47125,{Pc:$v(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function $v(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class ts extends Nf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new Gv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gv(e),this._firestoreClient=void 0,await e}}}function Ik(i,e){const n=typeof i=="object"?i:Um(),s=typeof i=="string"?i:$d,o=cf(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=R1("firestore");u&&zE(o,...u)}return o}function Rf(i){if(i._terminated)throw new Te(ue.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||jk(i),i._firestoreClient}function jk(i){const e=i._freezeSettings(),n=Ck(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new _k(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class Ta{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ta(Pn.fromBase64String(e))}catch(n){throw new Te(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ta(Pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ta._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qc(e,Ta._jsonSchema))return Ta.fromBase64String(e.bytes)}}Ta._jsonSchemaVersion="firestore/bytes/1.0",Ta._jsonSchema={type:xn("string",Ta._jsonSchemaVersion),bytes:xn("string")};class Tg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Te(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ll{constructor(e){this._methodName=e}}class xi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Te(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Te(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ft(this._lat,e._lat)||ft(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xi._jsonSchemaVersion}}static fromJSON(e){if(qc(e,xi._jsonSchema))return new xi(e.latitude,e.longitude)}}xi._jsonSchemaVersion="firestore/geoPoint/1.0",xi._jsonSchema={type:xn("string",xi._jsonSchemaVersion),latitude:xn("number"),longitude:xn("number")};class Ha{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ha._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qc(e,Ha._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ha(e.vectorValues);throw new Te(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ha._jsonSchemaVersion="firestore/vectorValue/1.0",Ha._jsonSchema={type:xn("string",Ha._jsonSchemaVersion),vectorValues:xn("object")};const kk=/^__.*__$/;class Ok{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new nr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fc(e,this.data,n,this.fieldTransforms)}}class VE{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new nr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LE(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{dataSource:i})}}class Cf{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Cf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return tf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(LE(this.dataSource)&&kk.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Dk{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Af(e)}createContext(e,n,s,o=!1){return new Cf({dataSource:e,methodName:n,targetDoc:s,path:Mn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function If(i){const e=i._freezeSettings(),n=Af(i._databaseId);return new Dk(i._databaseId,!!e.ignoreUndefinedProperties,n)}function UE(i,e,n,s,o,u={}){const f=i.createContext(u.merge||u.mergeFields?2:0,e,n,o);Ig("Data must be an object, but it was:",f,s);const m=HE(s,f);let b,g;if(u.merge)b=new fa(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const v=[];for(const E of u.mergeFields){const T=Lr(e,E,n);if(!f.contains(T))throw new Te(ue.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);GE(v,T)||v.push(T)}b=new fa(v),g=f.fieldTransforms.filter((E=>b.covers(E.field)))}else b=null,g=f.fieldTransforms;return new Ok(new ea(m),b,g)}class jf extends ll{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jf}}function BE(i,e,n){return new Cf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:i._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ng extends ll{_toFieldTransform(e){return new ig(e.path,new Dc)}isEqual(e){return e instanceof Ng}}class Rg extends ll{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=BE(this,e,!0),s=this.Ac.map((u=>$r(u,n))),o=new Xo(s);return new ig(e.path,o)}isEqual(e){return e instanceof Rg&&Xi(this.Ac,e.Ac)}}class Cg extends ll{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=BE(this,e,!0),s=this.Ac.map((u=>$r(u,n))),o=new Jo(s);return new ig(e.path,o)}isEqual(e){return e instanceof Cg&&Xi(this.Ac,e.Ac)}}function Mk(i,e,n,s){const o=i.createContext(1,e,n);Ig("Data must be an object, but it was:",o,s);const u=[],f=ea.empty();tr(s,((b,g)=>{const v=FE(e,b,n);g=ln(g);const E=o.childContextForFieldPath(v);if(g instanceof jf)u.push(v);else{const T=$r(g,E);T!=null&&(u.push(v),f.set(v,T))}}));const m=new fa(u);return new VE(f,m,o.fieldTransforms)}function Pk(i,e,n,s,o,u){const f=i.createContext(1,e,n),m=[Lr(e,s,n)],b=[o];if(u.length%2!=0)throw new Te(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)m.push(Lr(e,u[T])),b.push(u[T+1]);const g=[],v=ea.empty();for(let T=m.length-1;T>=0;--T)if(!GE(g,m[T])){const M=m[T];let G=b[T];G=ln(G);const B=f.childContextForFieldPath(M);if(G instanceof jf)g.push(M);else{const U=$r(G,B);U!=null&&(g.push(M),v.set(M,U))}}const E=new fa(g);return new VE(v,E,f.fieldTransforms)}function zk(i,e,n,s=!1){return $r(n,i.createContext(s?4:3,e))}function $r(i,e){if(qE(i=ln(i)))return Ig("Unsupported field value:",e,i),HE(i,e);if(i instanceof ll)return(function(s,o){if(!LE(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const m of s){let b=$r(m,o.childContextForArray(f));b==null&&(b={nullValue:"NULL_VALUE"}),u.push(b),f++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=ln(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return vI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Ft.fromDate(s);return{timestampValue:Xd(o.serializer,u)}}if(s instanceof Ft){const u=new Ft(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Xd(o.serializer,u)}}if(s instanceof xi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ta)return{bytesValue:rE(o.serializer,s._byteString)};if(s instanceof nn){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.createError(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:lg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Ha)return(function(f,m){const b=f instanceof Ha?f.toArray():f;return{mapValue:{fields:{[M_]:{stringValue:P_},[Yd]:{arrayValue:{values:b.map((v=>{if(typeof v!="number")throw m.createError("VectorValues must only contain numeric values.");return ag(m.serializer,v)}))}}}}}})(s,o);if(hE(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${pf(s)}`)})(i,e)}function HE(i,e){const n={};return C_(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tr(i,((s,o)=>{const u=$r(o,e.childContextForField(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function qE(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ft||i instanceof xi||i instanceof Ta||i instanceof nn||i instanceof ll||i instanceof Ha||hE(i))}function Ig(i,e,n){if(!qE(n)||!N_(n)){const s=pf(n);throw s==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+s)}}function Lr(i,e,n){if((e=ln(e))instanceof Tg)return e._internalPath;if(typeof e=="string")return FE(i,e);throw tf("Field path arguments must be of type string or ",i,!1,void 0,n)}const Vk=new RegExp("[~\\*/\\[\\]]");function FE(i,e,n){if(e.search(Vk)>=0)throw tf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Tg(...e.split("."))._internalPath}catch{throw tf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function tf(i,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let b="";return(u||f)&&(b+=" (found",u&&(b+=` in field ${s}`),f&&(b+=` in document ${o}`),b+=")"),new Te(ue.INVALID_ARGUMENT,m+i+b)}function GE(i,e){return i.some((n=>n.isEqual(e)))}class Lk{convertValue(e,n="none"){switch(Xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return on(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return tr(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[Yd].arrayValue?.values?.map((s=>on(s.doubleValue)));return new Ha(n)}convertGeoPoint(e){return new xi(on(e.latitude),on(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=bf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ic(e));default:return null}}convertTimestamp(e){const n=Qs(e);return new Ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Lt.fromString(e);wt(fE(s),9688,{name:e});const o=new jc(s.get(1),s.get(3)),u=new ze(s.popFirst(5));return o.isEqual(n)||Zi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class jg extends Lk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ta(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,n)}}function Gn(){return new Ng("serverTimestamp")}function Ac(...i){return new Rg("arrayUnion",i)}function Sc(...i){return new Cg("arrayRemove",i)}const Yv="@firebase/firestore",Qv="4.10.0";function Kv(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class $E{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Uk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Lr("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Uk extends $E{data(){return super.data()}}function YE(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Te(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kg{}class QE extends kg{}function Nn(i,e,...n){let s=[];e instanceof kg&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((b=>b instanceof Og)).length,m=u.filter((b=>b instanceof kf)).length;if(f>1||f>0&&m>0)throw new Te(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class kf extends QE{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new kf(e,n,s)}_apply(e){const n=this._parse(e);return KE(e._query,n),new ar(e.firestore,e.converter,mm(e._query,n))}_parse(e){const n=If(e.firestore);return(function(u,f,m,b,g,v,E){let T;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Te(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Jv(E,v);const G=[];for(const B of E)G.push(Xv(b,u,B));T={arrayValue:{values:G}}}else T=Xv(b,u,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Jv(E,v),T=zk(m,f,E,v==="in"||v==="not-in");return yn.create(g,v,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Na(i,e,n){const s=e,o=Lr("where",i);return kf._create(o,s,n)}class Og extends kg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Og(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Fa.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const m=u.getFlattenedFilters();for(const b of m)KE(f,b),f=mm(f,b)})(e._query,n),new ar(e.firestore,e.converter,mm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Dg extends QE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Dg(e,n)}_apply(e){const n=(function(o,u,f){if(o.startAt!==null)throw new Te(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Te(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oc(u,f)})(e._query,this._field,this._direction);return new ar(e.firestore,e.converter,fI(e._query,n))}}function jr(i,e="asc"){const n=e,s=Lr("orderBy",i);return Dg._create(s,n)}function Xv(i,e,n){if(typeof(n=ln(n))=="string"){if(n==="")throw new Te(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!F_(e)&&n.indexOf("/")!==-1)throw new Te(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Lt.fromString(n));if(!ze.isDocumentKey(s))throw new Te(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return uv(i,new ze(s))}if(n instanceof nn)return uv(i,n._key);throw new Te(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pf(n)}.`)}function Jv(i,e){if(!Array.isArray(i)||i.length===0)throw new Te(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KE(i,e){const n=(function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Te(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Te(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function XE(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class bc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kr extends $E{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Lr("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=kr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}kr._jsonSchemaVersion="firestore/documentSnapshot/1.0",kr._jsonSchema={type:xn("string",kr._jsonSchemaVersion),bundleSource:xn("string","DocumentSnapshot"),bundleName:xn("string"),bundle:xn("string")};class Md extends kr{data(e={}){return super.data(e)}}class Or{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new bc(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Md(this._firestore,this._userDataWriter,s.key,s,new bc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Te(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const b=new Md(o._firestore,o._userDataWriter,m.doc.key,m.doc,new bc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:b,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const b=new Md(o._firestore,o._userDataWriter,m.doc.key,m.doc,new bc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,v=-1;return m.type!==0&&(g=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),v=f.indexOf(m.doc.key)),{type:Bk(m.type),doc:b,oldIndex:g,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Te(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Or._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Bk(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:i})}}Or._jsonSchemaVersion="firestore/querySnapshot/1.0",Or._jsonSchema={type:xn("string",Or._jsonSchemaVersion),bundleSource:xn("string","QuerySnapshot"),bundleName:xn("string"),bundle:xn("string")};function Pd(i){i=ta(i,nn);const e=ta(i.firestore,ts),n=Rf(e);return Sk(n,i._key).then((s=>JE(e,i,s)))}function nf(i){i=ta(i,ar);const e=ta(i.firestore,ts),n=Rf(e),s=new jg(e);return YE(i._query),Tk(n,i._query).then((o=>new Or(e,s,i,o)))}function Mg(i,e,n){i=ta(i,nn);const s=ta(i.firestore,ts),o=XE(i.converter,e,n),u=If(s);return Of(s,[UE(u,"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,Ra.none())])}function qe(i,e,n,...s){i=ta(i,nn);const o=ta(i.firestore,ts),u=If(o);let f;return f=typeof(e=ln(e))=="string"||e instanceof Tg?Pk(u,"updateDoc",i._key,e,n,s):Mk(u,"updateDoc",i._key,e),Of(o,[f.toMutation(i._key,Ra.exists(!0))])}function hi(i){return Of(ta(i.firestore,ts),[new sg(i._key,Ra.none())])}function Bs(i,e){const n=ta(i.firestore,ts),s=je(i),o=XE(i.converter,e),u=If(i.firestore);return Of(n,[UE(u,"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,Ra.exists(!1))]).then((()=>s))}function Rn(i,...e){i=ln(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Kv(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Kv(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let u,f,m;if(i instanceof nn)f=ta(i.firestore,ts),m=yf(i._key.path),u={next:g=>{e[s]&&e[s](JE(f,i,g))},error:e[s+1],complete:e[s+2]};else{const g=ta(i,ar);f=ta(g.firestore,ts),m=g._query;const v=new jg(f);u={next:E=>{e[s]&&e[s](new Or(f,v,g,E))},error:e[s+1],complete:e[s+2]},YE(i._query)}const b=Rf(f);return Ak(b,m,o,u)}function Of(i,e){const n=Rf(i);return Nk(n,e)}function JE(i,e,n){const s=n.docs.get(e._key),o=new jg(i);return new kr(i,o,e._key,s,new bc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){TC(Hr),Dr(new $s("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new ts(new CC(s.getProvider("auth-internal")),new kC(f,s.getProvider("app-check-internal")),KC(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),pi(Yv,Qv,e),pi(Yv,Qv,"esm2020")})();const WE="firebasestorage.googleapis.com",Hk="storageBucket",qk=120*1e3,Fk=600*1e3;class Ai extends wi{constructor(e,n,s=0){super(Xp(e),`Firebase Storage: ${n} (${Xp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ai.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _i;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_i||(_i={}));function Xp(i){return"storage/"+i}function Gk(){const i="An unknown error occurred, please check the error payload for server response.";return new Ai(_i.UNKNOWN,i)}function $k(){return new Ai(_i.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Yk(){return new Ai(_i.CANCELED,"User canceled the upload/download.")}function Qk(i){return new Ai(_i.INVALID_URL,"Invalid URL '"+i+"'.")}function Kk(i){return new Ai(_i.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function Wv(i){return new Ai(_i.INVALID_ARGUMENT,i)}function ZE(){return new Ai(_i.APP_DELETED,"The Firebase app was deleted.")}function Xk(i){return new Ai(_i.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Ba{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Ba.makeFromUrl(e,n)}catch{return new Ba(e,"")}if(s.path==="")return s;throw Kk(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const f="(/(.*))?$",m=new RegExp("^gs://"+o+f,"i"),b={bucket:1,path:3};function g(re){re.path_=decodeURIComponent(re.path)}const v="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",M=new RegExp(`^https?://${E}/${v}/b/${o}/o${T}`,"i"),G={bucket:1,path:3},B=n===WE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,U="([^?#]*)",V=new RegExp(`^https?://${B}/${o}/${U}`,"i"),K=[{regex:m,indices:b,postModify:u},{regex:M,indices:G,postModify:g},{regex:V,indices:{bucket:1,path:2},postModify:g}];for(let re=0;re<K.length;re++){const he=K[re],ae=he.regex.exec(e);if(ae){const w=ae[he.indices.bucket];let C=ae[he.indices.path];C||(C=""),s=new Ba(w,C),he.postModify(s);break}}if(s==null)throw Qk(e);return s}}class Jk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Wk(i,e,n){let s=1,o=null,u=null,f=!1,m=0;function b(){return m===2}let g=!1;function v(...U){g||(g=!0,e.apply(null,U))}function E(U){o=setTimeout(()=>{o=null,i(M,b())},U)}function T(){u&&clearTimeout(u)}function M(U,...V){if(g){T();return}if(U){T(),v.call(null,U,...V);return}if(b()||f){T(),v.call(null,U,...V);return}s<64&&(s*=2);let K;m===1?(m=2,K=0):K=(s+Math.random())*1e3,E(K)}let G=!1;function B(U){G||(G=!0,T(),!g&&(o!==null?(U||(m=2),clearTimeout(o),E(0)):U||(m=1)))}return E(0),u=setTimeout(()=>{f=!0,B(!0)},n),B}function Zk(i){i(!1)}function e5(i){return i!==void 0}function Zv(i,e,n,s){if(s<e)throw Wv(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>n)throw Wv(`Invalid value for '${i}'. Expected ${n} or less.`)}function t5(i){const e=encodeURIComponent;let n="?";for(const s in i)if(i.hasOwnProperty(s)){const o=e(s)+"="+e(i[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var af;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(af||(af={}));function n5(i,e){const n=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,u=e.indexOf(i)!==-1;return n||o||u}class a5{constructor(e,n,s,o,u,f,m,b,g,v,E,T=!0,M=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=f,this.callback_=m,this.errorCallback_=b,this.timeout_=g,this.progressCallback_=v,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((G,B)=>{this.resolve_=G,this.reject_=B,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new wd(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const f=m=>{const b=m.loaded,g=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(b,g)};this.progressCallback_!==null&&u.addUploadProgressListener(f),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(f),this.pendingConnection_=null;const m=u.getErrorCode()===af.NO_ERROR,b=u.getStatus();if(!m||n5(b,this.additionalRetryCodes_)&&this.retry){const v=u.getErrorCode()===af.ABORT;s(!1,new wd(!1,null,v));return}const g=this.successCodes_.indexOf(b)!==-1;s(!0,new wd(g,u))})},n=(s,o)=>{const u=this.resolve_,f=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const b=this.callback_(m,m.getResponse());e5(b)?u(b):u()}catch(b){f(b)}else if(m!==null){const b=Gk();b.serverResponse=m.getErrorText(),this.errorCallback_?f(this.errorCallback_(m,b)):f(b)}else if(o.canceled){const b=this.appDelete_?ZE():Yk();f(b)}else{const b=$k();f(b)}};this.canceled_?n(!1,new wd(!1,null,!0)):this.backoffId_=Wk(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Zk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class wd{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function i5(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function s5(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function r5(i,e){e&&(i["X-Firebase-GMPID"]=e)}function o5(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function l5(i,e,n,s,o,u,f=!0,m=!1){const b=t5(i.urlParams),g=i.url+b,v=Object.assign({},i.headers);return r5(v,e),i5(v,n),s5(v,u),o5(v,s),new a5(g,i.method,v,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,f,m)}function c5(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function u5(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}class sf{constructor(e,n){this._service=e,n instanceof Ba?this._location=n:this._location=Ba.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new sf(e,n)}get root(){const e=new Ba(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return u5(this._location.path)}get storage(){return this._service}get parent(){const e=c5(this._location.path);if(e===null)return null;const n=new Ba(this._location.bucket,e);return new sf(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Xk(e)}}function e1(i,e){const n=e?.[Hk];return n==null?null:Ba.makeFromBucketSpec(n,i)}function d5(i,e,n,s={}){i.host=`${e}:${n}`;const o=Br(e);o&&(Mm(`https://${i.host}/b`),Pm("Storage",!0)),i._isUsingEmulator=!0,i._protocol=o?"https":"http";const{mockUserToken:u}=s;u&&(i._overrideAuthToken=typeof u=="string"?u:j1(u,i.app.options.projectId))}class f5{constructor(e,n,s,o,u,f=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=f,this._bucket=null,this._host=WE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qk,this._maxUploadRetryTime=Fk,this._requests=new Set,o!=null?this._bucket=Ba.makeFromBucketSpec(o,this._host):this._bucket=e1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ba.makeFromBucketSpec(this._url,e):this._bucket=e1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Zv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Zv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(da(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new sf(this,e)}_makeRequest(e,n,s,o,u=!0){if(this._deleted)return new Jk(ZE());{const f=l5(e,this._appId,s,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const t1="@firebase/storage",n1="0.14.0";const ew="storage";function h5(i=Um(),e){i=ln(i);const s=cf(i,ew).getImmediate({identifier:e}),o=R1("storage");return o&&tw(s,...o),s}function tw(i,e,n,s={}){d5(i,e,n,s)}function p5(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new f5(n,s,o,e,Hr)}function m5(){Dr(new $s(ew,p5,"PUBLIC").setMultipleInstances(!0)),pi(t1,n1,""),pi(t1,n1,"esm2020")}m5();const nw={apiKey:"AIzaSyB3p9kAAb0TJXvJMKzUS6pummdlkbzlt6I",authDomain:"fft12l.firebaseapp.com",projectId:"fft12l",storageBucket:"fft12l.firebasestorage.app",messagingSenderId:"459190857682",appId:"1:459190857682:web:d857f4bf1fa2e5ec11220b"},Pg=Lm(nw),Vt=b_(Pg),xe=Ik(Pg),g5=h5(Pg);(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&(console.log(" MODO DEV: Conectando aos Emuladores do Firebase..."),Gm(Vt,"http://127.0.0.1:9099",{disableWarnings:!0}),zE(xe,"127.0.0.1",8080),tw(g5,"127.0.0.1",9199));const b5=(i,e)=>r_(Vt,i,e),Df="/assets/chocobo-loading-CZsGc2ZM.gif",y5="/assets/musica-tema-78rqvj_H.mp3",x5="/assets/fundo-rpg-BXz1tR4K.jpg",Qt=new Audio(y5);Qt.loop=!0;Qt.volume=.2;function v5(){const i=ns(),e=()=>{Qt.volume=.2,Qt.play().then(()=>{console.log("ter musical sintonizado.")}).catch(n=>{console.log("Aguardando interao: ",n)}),i("/login")};return c.jsxs("div",{className:"landing-container",onClick:e,children:[c.jsxs("div",{className:"content",children:[c.jsx("h1",{className:"game-title",children:"FINAL FANTASY"}),c.jsx("h2",{className:"sub-title",children:"12 Libertao"}),c.jsx("div",{className:"press-start",children:"PRESS START"})]}),c.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .landing-container {
          height: 100vh; width: 100vw; display: flex; align-items: center; justify-content: center;
          background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url(${x5}) no-repeat center center;
          background-size: cover; cursor: pointer; position: fixed; top: 0; left: 0; z-index: 1000;
        }
        .content { text-align: center; animation: fadeInSuave 4s ease-in-out; }
        .game-title { font-size: clamp(30px, 8vw, 60px); letter-spacing: 8px; color: #fff; text-shadow: 3px 3px 5px #000, 0 0 20px rgba(0, 242, 255, 0.5); font-family: 'serif'; }
        .sub-title { font-size: clamp(14px, 4vw, 24px); color: #ffcc00; margin-top: 10px; text-shadow: 1px 1px 3px #000; font-family: 'serif'; }
        .press-start { margin-top: 80px; font-size: 20px; color: #fff; letter-spacing: 5px; text-shadow: 0 0 10px #00f2ff; animation: blink 1.5s infinite; font-family: 'sans-serif'; }
        @keyframes blink { 0%, 100% { opacity: 0; } 50% { opacity: 1; } }
        @keyframes fadeInSuave { from { opacity: 0; filter: blur(15px); transform: scale(0.9); } to { opacity: 1; filter: blur(0); transform: scale(1); } }
      `}})]})}const zg="/assets/video-fundo-B5LPnOg0.mp4",_5="/assets/botao-admin-T-iaDg61.png";function E5(){const i=ns(),[e,n]=A.useState(null),[s,o]=A.useState(""),[u,f]=A.useState(""),[m,b]=A.useState("");A.useEffect(()=>{Qt.volume=.2,Qt.paused&&Qt.play().catch(T=>console.log("Autoplay bloqueado:",T))},[]);const g=()=>{Qt.pause(),Qt.currentTime=0},v=async T=>{T.preventDefault(),b("");try{const G=(await b5(s,u)).user,B=je(xe,"users",G.uid),U=await Pd(B);if(U.exists()){const V=U.data();if(e==="master"&&V.role!=="mestre"){b("ACESSO NEGADO: VOC NO  UM MESTRE.");return}if(g(),V.role==="mestre")i("/mestre");else{const $=je(xe,"characters",G.uid);(await Pd($)).exists()?i("/jogador-vtt"):i("/create-character")}}else{const V=je(xe,"characters",G.uid),$=await Pd(V);g(),$.exists()?i("/jogador-vtt"):i("/create-character")}}catch(M){console.error(M),b("FALHA NA CONEXO COM O TER.")}},E=()=>{i("/admin-login")};return c.jsxs("div",{className:"login-container",children:[c.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",className:"background-video",children:c.jsx("source",{src:zg,type:"video/mp4"})}),c.jsx("div",{className:"content-overlay",children:e?c.jsxs("form",{className:"login-panel fade-in",onSubmit:v,children:[c.jsx("button",{type:"button",className:"ff-back",onClick:()=>n(null),children:" RETORNAR"}),c.jsx("h3",{className:"ff-subtitle",children:e==="master"?"NARRADOR":"JOGADOR"}),c.jsxs("div",{className:"ff-input-group",children:[c.jsx("input",{type:"email",placeholder:"E-MAIL",value:s,onChange:T=>o(T.target.value),required:!0}),c.jsx("input",{type:"password",placeholder:"SENHA",value:u,onChange:T=>f(T.target.value),required:!0})]}),m&&c.jsx("p",{className:"ff-error",children:m}),c.jsx("button",{type:"submit",className:"ff-submit",children:"ENTRAR"})]}):c.jsxs("div",{className:"selection-screen fade-in",children:[c.jsx("h2",{className:"ff-title",children:"ESCOLHA SUA JORNADA"}),c.jsxs("div",{className:"ff-button-group",children:[c.jsx("button",{className:"ff-btn",onClick:()=>n("player"),children:"JOGADOR"}),c.jsx("button",{className:"ff-btn",onClick:()=>n("master"),children:"NARRADOR"})]})]})}),c.jsx("button",{className:"admin-portal-btn",onClick:E,title:"Acesso ao Admin",children:c.jsx("img",{src:_5,alt:"Portal Admin"})}),c.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .login-container { height: 100vh; width: 100vw; background: #000; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; }
        .background-video { position: absolute; top: 50%; left: 50%; min-width: 100%; min-height: 100%; width: auto; height: auto; z-index: 1; transform: translate(-50%, -50%); object-fit: cover; animation: quickLoopFade 0.5s ease-in-out; }
        @keyframes quickLoopFade { 0% { opacity: 0; } 100% { opacity: 1; } }
        .content-overlay { position: relative; z-index: 10; display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.4); }
        .ff-title { color: #fff; font-size: 32px; letter-spacing: 8px; margin-bottom: 40px; text-shadow: 0 0 15px rgba(255, 255, 255, 0.5); text-align: center; font-family: 'serif'; }
        .ff-subtitle { color: #ffcc00; letter-spacing: 4px; margin-bottom: 30px; text-align: center; }
        .ff-button-group { display: flex; flex-direction: column; gap: 20px; align-items: center; }
        .ff-btn { background: rgba(0, 0, 30, 0.6); border: 1px solid rgba(255, 255, 255, 0.6); color: #fff; padding: 15px 50px; letter-spacing: 3px; cursor: pointer; transition: 0.4s; width: 280px; backdrop-filter: blur(5px); font-weight: bold; }
        .ff-submit { background: rgba(0, 0, 30, 0.6); border: 1px solid rgba(255, 255, 255, 0.6); color: #fff; padding: 15px 0; letter-spacing: 3px; cursor: pointer; transition: 0.4s; width: 326px; backdrop-filter: blur(5px); font-weight: bold; margin: 0 auto; display: block; }
        .ff-btn:hover, .ff-submit:hover { background: #fff; color: #000; box-shadow: 0 0 20px #fff; }
        .ff-input-group input { display: block; width: 300px; padding: 12px; margin: 0 auto 20px auto; background: rgba(0, 0, 0, 0.7); border: 1px solid #444; color: #fff; text-align: center; letter-spacing: 2px; outline: none; }
        .ff-input-group input:focus { border-color: #ffcc00; }
        .ff-back { background: none; border: none; color: #ffcc00; cursor: pointer; margin-bottom: 15px; display: block; font-weight: bold; }
        .ff-error { color: #ff4444; font-size: 12px; margin-bottom: 15px; text-shadow: 0 0 5px #000; text-align: center; }
        .admin-portal-btn { position: absolute; bottom: 30px; right: 30px; z-index: 100; background: none; border: none; cursor: pointer; width: 70px; transition: 0.5s; filter: drop-shadow(0 0 8px rgba(0, 242, 255, 0.6)); }
        .admin-portal-btn img { width: 100%; height: auto; }
        .admin-portal-btn:hover { transform: scale(1.2) rotate(-5deg); filter: drop-shadow(0 0 15px #00f2ff); }
        .fade-in { animation: fadeInFF 2s ease-out forwards; }
        @keyframes fadeInFF { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
      `}})]})}function w5(){const[i,e]=A.useState(""),[n,s]=A.useState(""),[o,u]=A.useState(""),f=ns();A.useEffect(()=>{Qt.volume=.2,Qt.paused&&Qt.play().catch(()=>{})},[]);const m=async b=>{if(b.preventDefault(),u(""),i!==void 0){u("VOC NO TEM PERMISSO DE NARRADOR.");return}try{await r_(Vt,i,n),Qt.pause(),Qt.currentTime=0,f("/admin")}catch(v){console.error(v),u("SENHA INCORRETA OU FALHA NA CONEXO.")}};return c.jsxs("div",{className:"login-container",children:[c.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"background-video",children:c.jsx("source",{src:zg,type:"video/mp4"})}),c.jsx("div",{className:"content-overlay",children:c.jsxs("form",{className:"login-panel fade-in",onSubmit:m,children:[c.jsx("button",{type:"button",className:"ff-back",onClick:()=>f("/"),children:" RETORNAR"}),c.jsx("h3",{className:"ff-subtitle",children:"PORTAL DO ADMINISTRADOR"}),c.jsxs("div",{className:"ff-input-group",children:[c.jsx("input",{type:"email",placeholder:"E-MAIL",value:i,onChange:b=>e(b.target.value),required:!0}),c.jsx("input",{type:"password",placeholder:"CHAVE DE ACESSO",value:n,onChange:b=>s(b.target.value),required:!0})]}),o&&c.jsx("p",{className:"ff-error",style:{color:"#ff4444",fontSize:"12px",marginBottom:"10px"},children:o}),c.jsx("button",{type:"submit",className:"ff-submit",children:"DESBLOQUEAR"})]})}),c.jsx("style",{children:`
        .login-container { height: 100vh; width: 100vw; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; background: #000; }
        .background-video { position: absolute; top: 50%; left: 50%; min-width: 100%; min-height: 100%; transform: translate(-50%, -50%); object-fit: cover; z-index: 1; }
        .content-overlay { position: absolute; top: 0; left: 0; z-index: 10; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.6); }
        .login-panel { background: rgba(0, 0, 30, 0.85); padding: 40px; border: 1px solid #00f2ff; backdrop-filter: blur(15px); text-align: center; box-shadow: 0 0 30px rgba(0, 242, 255, 0.3); width: 350px; }
        .ff-subtitle { color: #ffcc00; letter-spacing: 4px; margin-bottom: 25px; font-weight: bold; }
        .ff-input-group input { display: block; width: 100%; padding: 12px; margin: 10px 0; background: rgba(0,0,0,0.8); border: 1px solid #444; color: #fff; text-align: center; outline: none; box-sizing: border-box; }
        .ff-input-group input:focus { border-color: #00f2ff; box-shadow: 0 0 10px rgba(0, 242, 255, 0.2); }
        .ff-submit { background: transparent; border: 1px solid #fff; color: #fff; padding: 12px 40px; cursor: pointer; transition: 0.3s; width: 100%; letter-spacing: 2px; margin-top: 10px; }
        .ff-submit:hover { background: #fff; color: #000; box-shadow: 0 0 15px #fff; }
        .ff-back { background: none; border: none; color: #ffcc00; cursor: pointer; margin-bottom: 20px; font-size: 12px; }
        .fade-in { animation: fadeInFF 1.5s ease-out; }
        @keyframes fadeInFF { from { opacity: 0; } to { opacity: 1; } }
      `})]})}function A5(){const[i,e]=A.useState([]),[n,s]=A.useState([]),[o,u]=A.useState(""),[f,m]=A.useState(""),[b,g]=A.useState("jogador"),[v,E]=A.useState(""),[T,M]=A.useState(!1);A.useEffect(()=>{Qt&&Qt.pause()},[]),A.useEffect(()=>{G()},[]);const G=async()=>{try{const he=(await nf(Rt(xe,"users"))).docs.map(C=>({id:C.id,...C.data()})).filter(C=>C.email!=="fffvtt10@gmail.com"),w=(await nf(Rt(xe,"characters"))).docs.map(C=>({id:C.id,...C.data()}));e(he),s(w)}catch(re){console.error("Erro ao carregar dados do ter: ",re)}},B=async re=>{if(re.preventDefault(),!o||!f)return alert("Preencha todos os campos!");M(!0);let he=null;try{he=Lm(nw,"SecondaryApp");const ae=b_(he);window.location.hostname==="localhost"&&Gm(ae,"http://127.0.0.1:9099");const C=(await cR(ae,o,f)).user;await Mg(je(xe,"users",C.uid),{email:o,role:b,uid:C.uid,active:!0,createdAt:Gn()}),await pR(ae),alert(`Usurio ${o} invocado com sucesso!`),u(""),m(""),G()}catch(ae){console.error(ae),alert("Erro ao invocar usurio: "+ae.message)}finally{he&&await ZN(he),M(!1)}},U=async(re,he)=>{if(window.confirm(`Deseja banir permanentemente ${he} do ter?`))try{await hi(je(xe,"users",re)),await hi(je(xe,"characters",re)),alert("Conta e personagem banidos com sucesso."),G()}catch(ae){alert("Erro ao banir usurio: "+ae.message)}},V=async re=>{if(window.confirm("Tem certeza que deseja apagar APENAS o personagem deste usurio? Ele ter que criar outro."))try{await hi(je(xe,"characters",re)),alert("Personagem deletado. O usurio continua ativo."),G()}catch(he){alert("Erro ao deletar personagem: "+he.message)}},$=re=>{const he=n.find(ae=>ae.uid===re);return he||null},K=async()=>{if(v.length<6)return alert("A senha deve ter no mnimo 6 caracteres.");try{await uR(Vt.currentUser,v),alert("Sua chave de mestre foi alterada!"),E("")}catch{alert("Erro ao trocar senha. Tente fazer login novamente.")}};return c.jsxs("div",{className:"admin-container",children:[c.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"background-video-admin",children:c.jsx("source",{src:zg,type:"video/mp4"})}),c.jsxs("div",{className:"admin-overlay",children:[c.jsx("h1",{className:"admin-title",children:"PAINEL DO ADMINISTRADOR"}),c.jsxs("div",{className:"admin-grid",children:[c.jsxs("div",{className:"admin-card",children:[c.jsx("h3",{children:"INVOCAR NOVO JOGADOR"}),c.jsxs("form",{onSubmit:B,children:[c.jsx("input",{placeholder:"E-mail Arcano",type:"email",value:o,onChange:re=>u(re.target.value),required:!0}),c.jsx("input",{placeholder:"Palavra-Passe",type:"text",value:f,onChange:re=>m(re.target.value),required:!0}),c.jsxs("select",{value:b,onChange:re=>g(re.target.value),children:[c.jsx("option",{value:"jogador",children:"Jogador"}),c.jsx("option",{value:"mestre",children:"Mestre"})]}),c.jsx("button",{type:"submit",disabled:T,className:"btn-summon",children:T?"INVOCANDO...":"CRIAR ACESSO"})]})]}),c.jsxs("div",{className:"admin-card scroll-card",children:[c.jsxs("h3",{children:["ALMAS REGISTRADAS (",i.length,")"]}),c.jsx("div",{className:"list-container",children:i.map(re=>{const he=$(re.id);return c.jsxs("div",{className:"list-item",children:[c.jsxs("div",{className:"item-info",children:[c.jsx("span",{className:"item-main",children:re.email}),c.jsx("span",{className:`badge ${re.role}`,children:re.role.toUpperCase()}),he&&c.jsxs("span",{style:{fontSize:"10px",color:"#ffcc00",marginTop:"2px"},children:[" ",he.name]})]}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[c.jsx("button",{className:"btn-ban",onClick:()=>U(re.id,re.email),children:"BANIR"}),he&&c.jsx("button",{className:"btn-ban",style:{borderColor:"#f80",color:"#f80"},onClick:()=>V(re.id),children:"DEL CHAR"})]})]},re.id)})})]}),c.jsxs("div",{className:"admin-card",children:[c.jsx("h3",{children:"MINHA CHAVE MESTRA"}),c.jsx("input",{type:"password",placeholder:"Nova Senha",value:v,onChange:re=>E(re.target.value)}),c.jsx("button",{className:"btn-summon",style:{background:"#333",border:"1px solid #fff"},onClick:K,children:"ATUALIZAR"})]})]})]}),c.jsx("style",{children:`
        .admin-container { width: 100vw; height: 100vh; overflow: hidden; position: relative; font-family: 'Cinzel', serif; color: #fff; background: #000; }
        .background-video-admin { position: absolute; top: 50%; left: 50%; width: 100%; height: 100%; object-fit: cover; transform: translate(-50%, -50%); opacity: 0.4; pointer-events: none; }
        .admin-overlay { position: relative; z-index: 10; padding: 40px; display: flex; flex-direction: column; height: 100%; }
        .admin-title { color: #ffcc00; text-align: center; font-size: 32px; letter-spacing: 5px; margin-bottom: 30px; text-shadow: 0 0 10px #ffcc00; }
        .admin-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 30px; height: 100%; }
        .admin-card { background: rgba(0, 10, 20, 0.9); border: 1px solid #ffcc00; border-radius: 8px; padding: 20px; display: flex; flex-direction: column; backdrop-filter: blur(10px); }
        .admin-card h3 { color: #00f2ff; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0; font-size: 16px; letter-spacing: 2px; }
        .scroll-card .list-container { overflow-y: auto; flex: 1; padding-right: 5px; }
        .scroll-card .list-container::-webkit-scrollbar { width: 5px; }
        .scroll-card .list-container::-webkit-scrollbar-thumb { background: #333; }
        
        input, select { background: #000; border: 1px solid #444; color: #fff; padding: 12px; width: 100%; margin-bottom: 15px; font-family: 'serif'; outline: none; }
        input:focus, select:focus { border-color: #ffcc00; }
        
        .btn-summon { width: 100%; background: #ffcc00; color: #000; border: none; padding: 12px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-summon:hover:not(:disabled) { background: #fff; box-shadow: 0 0 15px #fff; }
        .btn-summon:disabled { background: #333; color: #666; cursor: not-allowed; }

        .list-item { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); padding: 10px; margin-bottom: 8px; border-radius: 4px; border: 1px solid transparent; }
        .list-item:hover { border-color: #00f2ff; }
        .item-info { display: flex; flex-direction: column; }
        .item-main { font-weight: bold; color: #eee; font-size: 14px; }
        .item-sub { font-size: 10px; color: #aaa; }
        
        .badge { font-size: 10px; padding: 2px 6px; border-radius: 4px; font-weight: bold; color: #000; text-transform: uppercase; margin-right: 5px; }
        .badge.jogador { background: #00f2ff; }
        .badge.mestre { background: #ffcc00; }
        
        .btn-ban { background: transparent; border: 1px solid #f44; color: #f44; font-size: 10px; padding: 4px 8px; cursor: pointer; }
        .btn-ban:hover { background: #f44; color: #fff; }
      `})]})}const aw="/assets/fundo-mestre-OTxRyTTC.jpg",Tm="/assets/sanchez-1nilABmc.jpeg",S5="/assets/bazar-DZ7p321B.png";function Vg({isMestre:i,playerData:e,vttDock:n}){const[s,o]=A.useState(!1),[u,f]=A.useState([]),[m,b]=A.useState([]),[g,v]=A.useState(""),[E,T]=A.useState(null),[M,G]=A.useState(""),[B,U]=A.useState(!1),[V,$]=A.useState({show:!1,type:"",title:"",message:"",inputValue:1,maxQuantity:1,actionData:null,onConfirm:null}),[K,re]=A.useState({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""}),[he,ae]=A.useState([]);A.useEffect(()=>{if(!s)return;const Q=Nn(Rt(xe,"game_items"),Na("status","==","bazar"),jr("updatedAt","desc")),ie=Rn(Q,ge=>{f(ge.docs.map(Ee=>({id:Ee.id,...Ee.data()})))});return()=>ie()},[s]),A.useEffect(()=>{if(!s||!i)return;const Q=Nn(Rt(xe,"game_items"),Na("status","==","vault"),jr("nome","asc")),ie=Rn(Q,ge=>{const Ee=ge.docs.map(He=>({id:He.id,...He.data()})).filter(He=>!He.ownerId);b(Ee)});return()=>ie()},[s,i]),A.useEffect(()=>{if(!i||!s)return;const Q=Nn(Rt(xe,"game_items"),Na("status","==","requested")),ie=Rn(Q,ge=>{ae(ge.docs.map(Ee=>({id:Ee.id,...Ee.data()})))});return()=>ie()},[i,s]);const w=(Q,ie)=>{$({show:!0,type:"alert",title:Q,message:ie,onConfirm:C})},C=()=>{$({...V,show:!1,actionData:null,onConfirm:null})},I=Q=>{const ie=Q.target.value;if(G(ie),!ie)return;const ge=m.find(Ee=>Ee.id===ie);ge&&re({...K,nome:ge.nome,descricao:ge.descricao,imagem:ge.imagem,valorGil:"",valorReal:""})},k=async Q=>{if(Q.preventDefault(),!K.nome||!K.valorGil)return w("ERRO","Preencha nome e valor em Gil!");try{const ie={...K,updatedAt:Gn()};if(E)await qe(je(xe,"game_items",E),ie),T(null);else if(M){if(B){const Ee=m.filter(He=>He.nome===K.nome).map(He=>qe(je(xe,"game_items",He.id),{...ie,status:"bazar"}));await Promise.all(Ee),w("SUCESSO",`${Ee.length} itens colocados  venda!`)}else await qe(je(xe,"game_items",M),{...ie,status:"bazar"});G("")}else await Bs(Rt(xe,"game_items"),{...ie,status:"bazar",ownerId:null,createdAt:Gn()});re({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""}),U(!1)}catch{w("ERRO","Erro ao salvar item no Bazar.")}},j=async Q=>{window.confirm("Remover do mercado? O item voltar para a Forja.")&&await qe(je(xe,"game_items",Q),{status:"vault",updatedAt:Gn()})},O=async Q=>{if(window.confirm(`Aprovar a entrega de ${Q.length} itens para ${Q[0].buyerName}?`))try{const ie=Q.map(ge=>qe(je(xe,"game_items",ge.id),{status:"vault",updatedAt:Gn()}));await Promise.all(ie),w("APROVADO","Venda aprovada! Itens enviados.")}catch{w("ERRO","Erro ao aprovar.")}},N=Q=>{T(Q.id),G(""),re(Q)},Ve=()=>{T(null),G(""),re({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""})},ye=async Q=>{const{group:ie,quantity:ge,totalPrice:Ee,currentGil:He}=Q;try{const we=He-Ee,it=je(xe,"characters",Vt.currentUser.uid),st=JSON.parse(JSON.stringify(e.character_sheet));st.inventory.gil=we,await Mg(it,{character_sheet:st},{merge:!0});const At=ie.slice(0,ge).map(Xt=>qe(je(xe,"game_items",Xt.id),{status:"requested",ownerId:Vt.currentUser.uid,buyerName:e.name,updatedAt:Gn()}));await Promise.all(At),w("SUCESSO",`Solicitao enviada! Saldo restante: ${we} Gil.`)}catch(we){console.error(we),w("ERRO CRTICO","Falha na transao.")}},ee=(Q,ie)=>{const ge=parseInt(Q);if(isNaN(ge)||ge<=0)return w("ERRO","Quantidade invlida.");if(ge>ie.length)return w("ERRO",`Estoque insuficiente. Mximo: ${ie.length}`);const Ee=ie[0],He=e?.character_sheet?.inventory?.gil||0,it=Number(Ee.valorGil)*ge;if(He<it)return w("SALDO INSUFICIENTE",`Voc tem ${He} Gil. Custo total: ${it} Gil.`);$({show:!0,type:"confirm",title:"CONFIRMAR COMPRA",message:`Comprar ${ge}x "${Ee.nome}" por ${it} Gil?`,actionData:{group:ie,quantity:ge,totalPrice:it,currentGil:He},onConfirm:ye})},me=Q=>{if(!Vt.currentUser)return w("ACESSO NEGADO","Voc precisa estar logado.");Q.length===1?ee(1,Q):$({show:!0,type:"prompt",title:"QUANTIDADE",message:`Quantas unidades de "${Q[0].nome}" deseja comprar?`,inputValue:1,maxQuantity:Q.length,actionData:Q,onConfirm:ee})},Re=Q=>Q.reduce((ie,ge)=>{const Ee=`${ge.nome}-${ge.valorGil}`;return ie[Ee]||(ie[Ee]=[]),ie[Ee].push(ge),ie},{}),De=Q=>Q.reduce((ie,ge)=>{const Ee=`${ge.buyerName}-${ge.nome}`;return ie[Ee]||(ie[Ee]=[]),ie[Ee].push(ge),ie},{}),Qe=u.filter(Q=>Q.nome.toLowerCase().includes(g.toLowerCase())),z=Re(Qe),se=De(he),le=Q=>Q&&Q.startsWith("http")?`url(${Q})`:"url('https://via.placeholder.com/150?text=Item')";return c.jsxs(c.Fragment,{children:[c.jsx("button",{className:`bazar-trigger-btn ${n?"vtt-dock-style":""}`,onClick:()=>o(!0),title:"Abrir Bazar",children:c.jsx("img",{src:S5,alt:"Bazar",onError:Q=>{Q.target.style.display="none",Q.target.parentNode.innerText="BAZAR"}})}),s&&c.jsxs("div",{className:"bazar-overlay-flex",onClick:()=>o(!1),children:[c.jsxs("div",{className:"bazar-modal-centered",onClick:Q=>Q.stopPropagation(),children:[c.jsxs("div",{className:"bazar-header",children:[c.jsx("h2",{children:"Bazar"}),c.jsx("button",{className:"close-btn",onClick:()=>o(!1),children:""})]}),i&&c.jsxs("div",{className:"mestre-panel",children:[he.length>0&&c.jsxs("div",{className:"requests-box",children:[c.jsxs("h4",{children:["PEDIDOS DE COMPRA (",he.length,")"]}),Object.values(se).map((Q,ie)=>{const ge=Q[0],Ee=Q.reduce((He,we)=>He+Number(we.valorGil),0);return c.jsxs("div",{className:"request-row",children:[c.jsxs("span",{children:[c.jsx("strong",{children:ge.buyerName}),": ",Q.length,"x ",ge.nome," (Total: ",Ee," G)"]}),c.jsx("button",{className:"btn-approve",onClick:()=>O(Q),children:"APROVAR"})]},ie)})]}),c.jsxs("form",{onSubmit:k,className:"bazar-form",children:[!E&&c.jsxs("div",{className:"row",style:{marginBottom:"10px",alignItems:"center"},children:[c.jsxs("select",{className:"bazar-input",onChange:I,value:M,children:[c.jsx("option",{value:"",children:" Item da Forja..."}),Array.from(new Set(m.map(Q=>Q.nome))).map(Q=>{const ie=m.find(Ee=>Ee.nome===Q),ge=m.filter(Ee=>Ee.nome===Q).length;return c.jsxs("option",{value:ie.id,children:[Q," (Estoque: ",ge,")"]},ie.id)})]}),M&&c.jsxs("label",{style:{color:"#fff",fontSize:"12px",marginLeft:"10px",display:"flex",alignItems:"center",gap:"5px"},children:[c.jsx("input",{type:"checkbox",checked:B,onChange:Q=>U(Q.target.checked)}),"Vender Todos"]})]}),c.jsxs("div",{className:"row",children:[c.jsx("input",{placeholder:"Nome",value:K.nome,onChange:Q=>re({...K,nome:Q.target.value}),className:"bazar-input",readOnly:!!M&&!E}),c.jsx("input",{placeholder:"Imagem URL",value:K.imagem,onChange:Q=>re({...K,imagem:Q.target.value}),className:"bazar-input"})]}),c.jsxs("div",{className:"row",children:[c.jsx("input",{placeholder:"Valor Gil",type:"number",value:K.valorGil,onChange:Q=>re({...K,valorGil:Q.target.value}),className:"bazar-input",required:!0}),c.jsx("input",{placeholder:"R$ (Opcional)",type:"number",value:K.valorReal,onChange:Q=>re({...K,valorReal:Q.target.value}),className:"bazar-input"})]}),c.jsx("textarea",{placeholder:"Descrio...",value:K.descricao,onChange:Q=>re({...K,descricao:Q.target.value}),className:"bazar-input area"}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"submit",className:"btn-save",children:E?"SALVAR":M?B?"VENDER LOTE":"VENDER ITEM":"CRIAR E VENDER"}),(E||M)&&c.jsx("button",{type:"button",onClick:Ve,className:"btn-cancel",children:"CANCELAR"})]})]})]}),c.jsx("div",{className:"search-bar-container",children:c.jsx("input",{type:"text",placeholder:" Buscar...",value:g,onChange:Q=>v(Q.target.value),className:"search-input"})}),c.jsxs("div",{className:"bazar-grid",children:[Object.values(z).map(Q=>{const ie=Q[0],ge=Q.length;return c.jsxs("div",{className:"bazar-item-card",children:[c.jsx("div",{className:"item-img",style:{backgroundImage:le(ie.imagem)}}),c.jsxs("div",{className:"item-info",children:[c.jsxs("div",{className:"item-header-row",children:[c.jsx("h4",{children:ie.nome}),c.jsxs("span",{className:"stock-badge",children:["QTD: ",ge]})]}),c.jsx("p",{className:"desc",children:ie.descricao}),c.jsxs("div",{className:"prices",children:[c.jsxs("span",{className:"price-tag gil",children:[" ",ie.valorGil," G"]}),ie.valorReal&&c.jsxs("span",{className:"price-tag real",children:[" R$ ",ie.valorReal]})]})]}),c.jsx("div",{className:"item-actions",children:i?c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"btn-icon edit",onClick:()=>N(ie),children:""}),c.jsx("button",{className:"btn-icon delete",onClick:()=>j(ie.id),children:""})]}):c.jsx("button",{className:"btn-buy",onClick:()=>me(Q),children:"COMPRAR"})})]},ie.id)}),Qe.length===0&&c.jsx("p",{className:"empty-msg",children:"Mercado vazio."})]})]}),V.show&&c.jsx("div",{className:"custom-dialog-overlay",onClick:Q=>Q.stopPropagation(),children:c.jsxs("div",{className:"custom-dialog-box",onClick:Q=>Q.stopPropagation(),children:[c.jsx("h3",{className:"dialog-title",children:V.title}),c.jsx("p",{className:"dialog-msg",children:V.message}),V.type==="prompt"&&c.jsxs("div",{className:"dialog-input-container",children:[c.jsx("input",{type:"number",min:"1",max:V.maxQuantity,value:V.inputValue,onChange:Q=>$({...V,inputValue:Q.target.value}),className:"dialog-input",autoFocus:!0}),c.jsxs("small",{style:{color:"#888",display:"block",marginTop:"5px"},children:["Mximo: ",V.maxQuantity]})]}),c.jsxs("div",{className:"dialog-actions",children:[V.type!=="alert"&&c.jsx("button",{className:"dialog-btn cancel",onClick:C,children:"CANCELAR"}),c.jsx("button",{className:"dialog-btn confirm",onClick:()=>{V.onConfirm?V.type==="prompt"?V.onConfirm(V.inputValue,V.actionData):V.onConfirm(V.actionData):C()},children:V.type==="alert"?"OK":"CONFIRMAR"})]})]})})]}),c.jsx("style",{children:`
        /* ESTILO PADRO (FIXO) */
        .bazar-trigger-btn { position: fixed; bottom: 30px; right: 30px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #ffcc00; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; }
        .bazar-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 25px #ffcc00; }
        .bazar-trigger-btn img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }

        .bazar-trigger-btn.vtt-dock-style { position: relative; bottom: auto; right: auto; width: 50px; height: 50px; margin: 0; z-index: auto; border: 2px solid #555; background: #111; box-shadow: 0 0 10px #000; }
        .bazar-trigger-btn.vtt-dock-style:hover { border-color: #ffcc00; color: #ffcc00; transform: scale(1.1); }

        .bazar-overlay-flex { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 100000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .bazar-modal-centered { width: 800px; max-width: 95vw; height: 750px; max-height: 90vh; background: #0d0d15; border: 1px solid #ffcc00; display: flex; flex-direction: column; box-shadow: 0 0 50px rgba(0,0,0,0.8); border-radius: 8px; overflow: hidden; position: relative; }
        
        .bazar-header { background: linear-gradient(90deg, #1a1a1a, #000); padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #ffcc00; }
        .bazar-header h2 { margin: 0; color: #ffcc00; font-family: serif; letter-spacing: 2px; text-shadow: 0 0 10px #ffcc00; font-size: 24px; }
        .close-btn { background: transparent; border: none; color: #fff; font-size: 30px; cursor: pointer; }
        
        .mestre-panel { background: rgba(255, 204, 0, 0.05); padding: 15px; border-bottom: 1px solid #333; }
        .requests-box { background: rgba(0, 242, 255, 0.1); border: 1px solid #00f2ff; padding: 10px; margin-bottom: 15px; border-radius: 4px; max-height: 150px; overflow-y: auto; }
        .requests-box h4 { color: #00f2ff; margin: 0 0 10px 0; font-size: 12px; }
        .request-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; font-size: 12px; color: #fff; border-bottom: 1px solid rgba(0,242,255,0.2); padding-bottom: 2px; }
        .btn-approve { background: #00f2ff; color: #000; border: none; padding: 2px 8px; font-weight: bold; cursor: pointer; border-radius: 3px; font-size: 10px; }
        
        .bazar-form { display: flex; flex-direction: column; gap: 8px; }
        .bazar-form .row { display: flex; gap: 10px; }
        .bazar-input { background: #000; border: 1px solid #444; color: #fff; padding: 8px; flex: 1; outline: none; font-family: serif; font-size: 14px; }
        .bazar-input.area { height: 50px; resize: none; }
        .form-actions { display: flex; gap: 10px; }
        .btn-save { flex: 1; background: #ffcc00; border: none; padding: 8px; font-weight: bold; cursor: pointer; color: #000; }
        .btn-cancel { background: #333; color: #fff; border: 1px solid #555; padding: 8px; cursor: pointer; }
        
        .search-bar-container { padding: 10px 15px; background: #000; border-bottom: 1px solid #333; }
        .search-input { width: 100%; background: #111; border: 1px solid #444; color: #fff; padding: 10px; border-radius: 20px; text-align: center; outline: none; font-size: 16px; }
        
        .bazar-grid { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 10px; scrollbar-width: none; }
        .bazar-item-card { background: linear-gradient(90deg, rgba(20,20,30,0.9), rgba(0,0,0,0.8)); border: 1px solid #444; display: flex; align-items: center; padding: 10px; border-radius: 4px; transition: 0.2s; }
        .bazar-item-card:hover { border-color: #00f2ff; box-shadow: 0 0 15px rgba(0, 242, 255, 0.1); }
        .item-img { width: 70px; height: 70px; background-size: cover; background-position: center; border: 1px solid #666; margin-right: 15px; border-radius: 4px; background-color: #000; }
        .item-info { flex: 1; }
        
        /* ALINHAMENTO DO HEADER DO ITEM */
        .item-header-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
        .item-header-row h4 { margin: 0; color: #fff; font-size: 18px; letter-spacing: 1px; }
        
        .item-info .desc { margin: 0 0 8px 0; color: #aaa; font-size: 12px; font-style: italic; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .stock-badge { font-size: 10px; background: #333; color: #fff; padding: 2px 6px; border-radius: 4px; font-weight: bold; border: 1px solid #555; }
        
        .prices { display: flex; gap: 10px; }
        .price-tag { padding: 3px 6px; border-radius: 3px; font-weight: bold; font-size: 11px; }
        .price-tag.gil { background: rgba(255,255,0,0.1); color: #ffcc00; border: 1px solid #ffcc00; }
        .price-tag.real { background: rgba(0, 242, 255, 0.1); color: #00f2ff; border: 1px solid #00f2ff; }
        
        .item-actions { display: flex; gap: 8px; align-items: center; margin-left: 15px; }
        .btn-buy { background: #00f2ff; color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; clip-path: polygon(10% 0, 100% 0, 100% 70%, 90% 100%, 0 100%, 0 30%); transition: 0.2s; }
        .btn-buy:hover { background: #fff; box-shadow: 0 0 15px #00f2ff; }
        .btn-icon { background: transparent; border: 1px solid #444; color: #fff; padding: 8px; cursor: pointer; border-radius: 4px; }
        .btn-icon:hover { background: #fff; color: #000; }
        
        /* ESTILOS DO MODAL CUSTOMIZADO */
        .custom-dialog-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 100010; backdrop-filter: blur(2px); }
        .custom-dialog-box { width: 350px; background: #111; border: 2px solid #ffcc00; box-shadow: 0 0 30px #ffcc00; padding: 20px; text-align: center; border-radius: 8px; animation: popIn 0.2s ease-out; }
        .dialog-title { color: #ffcc00; margin: 0 0 10px 0; font-family: serif; text-transform: uppercase; letter-spacing: 2px; }
        .dialog-msg { color: #fff; margin-bottom: 20px; font-size: 14px; line-height: 1.4; }
        .dialog-input-container { margin-bottom: 20px; }
        .dialog-input { background: #000; color: #fff; border: 1px solid #ffcc00; padding: 10px; font-size: 18px; width: 80px; text-align: center; outline: none; border-radius: 5px; }
        .dialog-actions { display: flex; justify-content: center; gap: 15px; }
        .dialog-btn { padding: 10px 20px; border: none; cursor: pointer; font-weight: bold; text-transform: uppercase; border-radius: 3px; }
        .dialog-btn.confirm { background: #ffcc00; color: #000; box-shadow: 0 0 10px rgba(255, 204, 0, 0.4); }
        .dialog-btn.confirm:hover { background: #fff; transform: scale(1.05); }
        .dialog-btn.cancel { background: #333; color: #ccc; border: 1px solid #555; }
        .dialog-btn.cancel:hover { background: #444; color: #fff; }

        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
      `})]})}const T5="/assets/forja-Dr7AylP_.png";function iw({vttDock:i}){const[e,n]=A.useState(!1),[s,o]=A.useState([]),[u,f]=A.useState(""),[m,b]=A.useState(null),[g,v]=A.useState({nome:"",descricao:"",imagem:"",quantidade:1});A.useEffect(()=>{if(!e)return;const V=Nn(Rt(xe,"game_items"),jr("createdAt","desc")),$=Rn(V,K=>{const re=K.docs.map(he=>({id:he.id,...he.data()}));o(re.filter(he=>he.status==="vault"||he.ownerId))});return()=>$()},[e]);const E=async V=>{if(V.preventDefault(),!g.nome)return alert("O item precisa de um nome!");try{const $={nome:g.nome,descricao:g.descricao,imagem:g.imagem,updatedAt:Gn()};if(m)await qe(je(xe,"game_items",m),$),b(null);else{const K=parseInt(g.quantidade)||1,re=[];for(let he=0;he<K;he++)re.push(Bs(Rt(xe,"game_items"),{...$,status:"vault",ownerId:null,valorGil:0,createdAt:Gn()}));await Promise.all(re),alert(`${K} item(ns) forjado(s) com sucesso!`)}v({nome:"",descricao:"",imagem:"",quantidade:1})}catch($){alert("Erro ao forjar item."),console.error($)}},T=async V=>{window.confirm("ATENO: Isso destruir o item permanentemente. Deseja continuar?")&&await hi(je(xe,"game_items",V))},M=async V=>{window.confirm("Desafixar item do jogador e retornar ao Bazar para venda?")&&await qe(je(xe,"game_items",V),{ownerId:null,buyerName:null,status:"bazar",updatedAt:Gn()})},G=V=>{b(V.id),v({...V,quantidade:1})},B=()=>{b(null),v({nome:"",descricao:"",imagem:"",quantidade:1})},U=s.filter(V=>V.nome.toLowerCase().includes(u.toLowerCase()));return c.jsxs(c.Fragment,{children:[c.jsx("button",{className:`forja-trigger-btn ${i?"vtt-dock-style":""}`,onClick:()=>n(!0),title:"Abrir Forja",children:c.jsx("img",{src:T5,alt:"Forja",onError:V=>{V.target.style.display="none",V.target.parentNode.innerText="FORJA"}})}),e&&c.jsx("div",{className:"forja-overlay",onClick:()=>n(!1),children:c.jsxs("div",{className:"forja-modal",onClick:V=>V.stopPropagation(),children:[c.jsxs("div",{className:"forja-header",children:[c.jsx("h2",{children:"A FORJA ANTIGA"}),c.jsx("button",{className:"close-btn",onClick:()=>n(!1),children:""})]}),c.jsxs("div",{className:"mestre-panel-forja",children:[c.jsx("h4",{style:{color:"#f44",margin:"0 0 10px 0"},children:"FORJAR NOVO ARTEFATO"}),c.jsxs("form",{onSubmit:E,className:"forja-form",children:[c.jsxs("div",{className:"row",children:[c.jsx("input",{placeholder:"Nome do Artefato",value:g.nome,onChange:V=>v({...g,nome:V.target.value}),className:"forja-input"}),c.jsx("input",{placeholder:"URL da Imagem (Imgur)",value:g.imagem,onChange:V=>v({...g,imagem:V.target.value}),className:"forja-input"})]}),c.jsxs("div",{className:"row",children:[!m&&c.jsx("div",{style:{flex:"0 0 100px"},children:c.jsx("input",{type:"number",min:"1",placeholder:"Qtd.",value:g.quantidade,onChange:V=>v({...g,quantidade:V.target.value}),className:"forja-input",title:"Quantidade de itens a criar"})}),c.jsx("textarea",{placeholder:"Descrio detalhada e lore do item...",value:g.descricao,onChange:V=>v({...g,descricao:V.target.value}),className:"forja-input area",style:{height:"40px"}})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"submit",className:"btn-forjar",children:m?"REFUNDIR (SALVAR)":"FORJAR ITENS"}),m&&c.jsx("button",{type:"button",onClick:B,className:"btn-cancel",children:"CANCELAR"})]})]})]}),c.jsx("div",{className:"search-bar-container-forja",children:c.jsx("input",{type:"text",placeholder:" Buscar nos arquivos da forja...",value:u,onChange:V=>f(V.target.value),className:"search-input-forja"})}),c.jsxs("div",{className:"forja-grid",children:[U.map(V=>c.jsxs("div",{className:"forja-item-card",children:[c.jsx("div",{className:"item-img",style:{backgroundImage:`url(${V.imagem||"https://via.placeholder.com/150?text=?"})`}}),c.jsxs("div",{className:"item-info",children:[c.jsx("h4",{children:V.nome}),V.ownerId&&c.jsxs("div",{className:"owner-tag",children:["POSSE DE: ",V.buyerName||"Jogador"]}),c.jsx("p",{className:"desc",children:V.descricao}),c.jsxs("small",{style:{color:"#666"},children:["Status: ",V.ownerId?"Cofre Pessoal":"Cofre Global"]})]}),c.jsxs("div",{className:"item-actions",children:[V.ownerId&&c.jsx("button",{className:"btn-icon",onClick:()=>M(V.id),title:"Desafixar e Retornar ao Bazar",children:""}),c.jsx("button",{className:"btn-icon edit",onClick:()=>G(V),title:"Editar",children:""}),c.jsx("button",{className:"btn-icon delete",onClick:()=>T(V.id),title:"Destruir",children:""})]})]},V.id)),U.length===0&&c.jsx("p",{className:"empty-msg",children:"A forja est fria. Nenhum item no cofre."})]})]})}),c.jsx("style",{children:`
        /* ESTILO PADRO (FIXO) */
        .forja-trigger-btn { position: fixed; bottom: 30px; right: 110px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #f44; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; color: #f44; font-weight: bold; font-size: 10px; }
        .forja-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 20px #f44; }
        .forja-trigger-btn img { width: 80%; height: 80%; object-fit: contain; }

        /* ESTILO QUANDO NO DOCK DO VTT (SOBRESCREVE O FIXO) */
        .forja-trigger-btn.vtt-dock-style {
            position: relative; 
            bottom: auto; 
            right: auto; 
            width: 50px; 
            height: 50px; 
            margin: 0; 
            z-index: auto;
            border: 2px solid #555;
            background: #111;
            box-shadow: 0 0 10px #000;
        }
        .forja-trigger-btn.vtt-dock-style:hover {
            border-color: #ffcc00;
            color: #ffcc00;
            transform: scale(1.1);
        }

        .forja-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 100000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .forja-modal { width: 800px; max-height: 90vh; background: #150a0a; border: 1px solid #f44; display: flex; flex-direction: column; box-shadow: 0 0 50px rgba(255, 68, 68, 0.2); border-radius: 8px; overflow: hidden; }
        .forja-header { background: linear-gradient(90deg, #2a0e0e, #000); padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #f44; }
        .forja-header h2 { margin: 0; color: #f44; font-family: serif; letter-spacing: 2px; text-shadow: 0 0 10px #f44; font-size: 24px; }
        .close-btn { background: transparent; border: none; color: #fff; font-size: 30px; cursor: pointer; }
        .mestre-panel-forja { background: rgba(255, 68, 68, 0.05); padding: 20px; border-bottom: 1px solid #333; }
        .forja-form { display: flex; flex-direction: column; gap: 10px; }
        .forja-form .row { display: flex; gap: 10px; }
        .forja-input { background: #000; border: 1px solid #522; color: #fff; padding: 10px; flex: 1; outline: none; font-family: serif; }
        .forja-input:focus { border-color: #f44; }
        .forja-input.area { height: 80px; resize: none; }
        .btn-forjar { flex: 1; background: #f44; border: none; padding: 12px; font-weight: bold; cursor: pointer; color: #fff; text-transform: uppercase; letter-spacing: 1px; }
        .btn-forjar:hover { background: #d00; box-shadow: 0 0 10px #d00; }
        .btn-cancel { background: #333; color: #fff; border: 1px solid #555; padding: 10px; cursor: pointer; }
        .search-bar-container-forja { padding: 15px; background: #000; border-bottom: 1px solid #333; }
        .search-input-forja { width: 100%; background: #111; border: 1px solid #522; color: #fff; padding: 12px; border-radius: 20px; text-align: center; outline: none; font-size: 16px; }
        .forja-grid { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; scrollbar-width: none; -ms-overflow-style: none; }
        .forja-grid::-webkit-scrollbar { display: none; }
        .forja-item-card { background: linear-gradient(90deg, rgba(40,10,10,0.9), rgba(0,0,0,0.8)); border: 1px solid #522; display: flex; align-items: center; padding: 10px; border-radius: 4px; transition: 0.2s; }
        .forja-item-card:hover { border-color: #f44; }
        .item-img { width: 70px; height: 70px; background-size: cover; background-position: center; border: 1px solid #633; margin-right: 15px; border-radius: 4px; background-color: #000; }
        .item-info { flex: 1; }
        .item-info h4 { margin: 0 0 5px 0; color: #fff; font-size: 18px; }
        .item-info .desc { margin: 0; color: #aaa; font-size: 12px; font-style: italic; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .owner-tag { background: #00f2ff; color: #000; font-size: 10px; font-weight: bold; padding: 2px 6px; border-radius: 4px; display: inline-block; margin-bottom: 4px; }
        .item-actions { display: flex; gap: 8px; margin-left: 15px; }
        .btn-icon { background: transparent; border: 1px solid #444; color: #fff; padding: 8px; cursor: pointer; border-radius: 4px; }
        .btn-icon:hover { background: #fff; color: #000; }
        .btn-icon.delete:hover { background: #f44; border-color: #f44; color: #fff; }
        .empty-msg { text-align: center; color: #666; margin-top: 50px; font-style: italic; }
      `})]})}const N5=["h-Basica.png","h-avanada.png","h-lendaria.png","h-magica.png","h-mestre.png","h-passiva.png","h-reacao.png","h-secreta.png"],R5=({isOpen:i,onClose:e,onSave:n,label:s})=>{const[o,u]=A.useState("");return i?c.jsx("div",{className:"img-modal-overlay",onClick:e,children:c.jsxs("div",{className:"img-modal-content",onClick:f=>f.stopPropagation(),children:[c.jsxs("h3",{children:["ALTERAR IMAGEM: ",s.toUpperCase()]}),c.jsx("input",{placeholder:"Cole o link da imagem (Imgur, Discord, etc)...",value:o,onChange:f=>u(f.target.value),autoFocus:!0}),c.jsxs("div",{className:"img-modal-actions",children:[c.jsx("button",{onClick:()=>{n(o),e()},className:"btn-confirm",children:"CONFIRMAR"}),c.jsx("button",{onClick:e,className:"btn-cancel",children:"CANCELAR"})]})]})}):null};function Lg({characterData:i,isMaster:e,onClose:n}){const[s,o]=A.useState(i.character_sheet||{}),[u,f]=A.useState("geral"),[m,b]=A.useState(!1),[g,v]=A.useState(!1),[E,T]=A.useState(!1),[M,G]=A.useState(""),[B,U]=A.useState(null),[V,$]=A.useState(!1),[K,re]=A.useState([]),[he,ae]=A.useState(null),[w,C]=A.useState(null),[I,k]=A.useState(null),[j,O]=A.useState(null),[N,Ve]=A.useState(null);A.useRef(s.basic_info?.level),A.useEffect(()=>{if(i&&i.character_sheet){const Y=i.character_sheet;Y.job_system.passives||(Y.job_system.passives=[]),Y.job_system.reactions||(Y.job_system.reactions=[]),o(Y)}},[i]);const ye=(Y,Ne)=>{if(!e)return;const ve=JSON.parse(JSON.stringify(s)),Se=Y.split(".");let Ze=ve;for(let Le=0;Le<Se.length-1;Le++)Ze[Se[Le]]||(Ze[Se[Le]]={}),Ze=Ze[Se[Le]];Ze[Se[Se.length-1]]=Ne,o(ve),v(!0)},ee=async()=>{try{const Y=je(xe,"characters",i.uid||i.id);await qe(Y,{character_sheet:s}),v(!1)}catch(Y){console.error("Erro ao salvar:",Y),alert("Erro ao salvar ficha.")}},me=(Y,Ne)=>{e&&(G(Y),U(()=>Ne),T(!0))},Re=(Y,Ne,ve,Se)=>{e&&(k({skill:Ne,index:Se}),O(ve),Y.dataTransfer.effectAllowed="move")},De=Y=>{Y.preventDefault()},Qe=(Y,Ne,ve)=>{if(Y.preventDefault(),!I||!e||j!==Ne)return;const Se=JSON.parse(JSON.stringify(s)),Le=((nt,Zt)=>Zt==="primary"?nt.job_system.primary_class.skills:Zt==="secondary"?nt.job_system.secondary_class.skills:Zt==="passives"?nt.job_system.passives:Zt==="reactions"?nt.job_system.reactions:[])(Se,j),[It]=Le.splice(I.index,1);Le.splice(ve,0,It),o(Se),v(!0),k(null),O(null)},z=Y=>{const Ne=()=>"_"+Math.random().toString(36).substr(2,9),ve=JSON.parse(JSON.stringify(s)),Se={id:Ne(),name:"",cost:"",effect:"",xp:{current:0,max:100},master:!1,icon:"h-Basica.png"};Y==="primary"?ve.job_system.primary_class.skills.push(Se):Y==="secondary"?ve.job_system.secondary_class.skills.push(Se):Y==="passives"?(ve.job_system.passives||(ve.job_system.passives=[]),ve.job_system.passives.push(Se)):Y==="reactions"&&(ve.job_system.reactions||(ve.job_system.reactions=[]),ve.job_system.reactions.push(Se)),o(ve),v(!0)},se=(Y,Ne)=>{if(!window.confirm("Remover este slot de habilidade?"))return;const ve=JSON.parse(JSON.stringify(s));Y==="primary"?ve.job_system.primary_class.skills.splice(Ne,1):Y==="secondary"?ve.job_system.secondary_class.skills.splice(Ne,1):Y==="passives"?ve.job_system.passives.splice(Ne,1):Y==="reactions"&&ve.job_system.reactions.splice(Ne,1),o(ve),v(!0)},le=(Y,Ne)=>{const ve=JSON.parse(JSON.stringify(s));let Se;Y==="primary"?Se=ve.job_system.primary_class.skills[Ne]:Y==="secondary"?Se=ve.job_system.secondary_class.skills[Ne]:Y==="passives"?Se=ve.job_system.passives[Ne]:Y==="reactions"&&(Se=ve.job_system.reactions[Ne]),Se.master=!0,Se.xp.current=Se.xp.max,o(ve),v(!0)},Q=Y=>{if(!N)return;const{listType:Ne,skillIndex:ve}=N;let Se="";Ne==="primary"?Se=`job_system.primary_class.skills.${ve}.icon`:Ne==="secondary"?Se=`job_system.secondary_class.skills.${ve}.icon`:Ne==="passives"?Se=`job_system.passives.${ve}.icon`:Ne==="reactions"&&(Se=`job_system.reactions.${ve}.icon`),ye(Se,Y),Ve(null)},ie=async Y=>{if(!e)return;ae(Y);const Ne=Nn(Rt(xe,"game_items"),Na("status","==","vault")),Ze=(await nf(Ne)).docs.map(Le=>({id:Le.id,...Le.data()})).filter(Le=>!Le.ownerId||Le.ownerId===(i.uid||i.id));re(Ze),$(!0)},ge=async Y=>{const Ne=JSON.parse(JSON.stringify(s));Ne.equipment.slots[he]={item_id:Y.id,item_name:Y.nome,item_img:Y.imagem,description:Y.descricao,effect:""},o(Ne),v(!0);const ve=je(xe,"game_items",Y.id);await qe(ve,{status:"equipped",ownerId:i.uid||i.id,slotIndex:he,updatedAt:Gn()}),$(!1)},Ee=async Y=>{if(!e)return;const Ne=s.equipment.slots[Y];if(Ne.item_id&&window.confirm("Isso devolver o item para a Forja (Cofre). Confirmar?")){const Se=je(xe,"game_items",Ne.item_id);await qe(Se,{status:"vault",slotIndex:null,updatedAt:Gn()})}const ve=JSON.parse(JSON.stringify(s));ve.equipment.slots[Y]={item_name:"",item_img:"",effect:""},o(ve),v(!0)},He=async()=>{e&&(b(!0),setTimeout(async()=>{b(!1);const Y=s.basic_info.level||1,Ne=Math.floor(s.basic_info.experience.max*1.5),ve=JSON.parse(JSON.stringify(s));ve.basic_info.level=Y+1,ve.basic_info.experience.current=0,ve.basic_info.experience.max=Ne,o(ve);const Se=je(xe,"characters",i.uid||i.id);await qe(Se,{character_sheet:ve})},4e3))},we=["FOR","INT","SOR","CAR","VEL","CONS"],it=100,st=85,Ct=125,At=(Y,Ne,ve)=>{const Se=Math.PI*2*Ne/ve-Math.PI/2,Ze=Ct+st*(Y/it)*Math.cos(Se),Le=Ct+st*(Y/it)*Math.sin(Se);return{x:Ze,y:Le}},Xt=we.map((Y,Ne)=>{const ve=s.attributes?.[Y]?.value||0,{x:Se,y:Ze}=At(ve,Ne,we.length);return`${Se},${Ze}`}).join(" "),Ut=Y=>Y&&Y.length>5?{backgroundImage:`url(${Y})`}:{backgroundColor:"#111",border:"1px solid #333"},Jt=(Y,Ne,ve=!1)=>{const Se={primary:s.job_system?.primary_class?.name||"Classe Primria",secondary:s.job_system?.secondary_class?.name||"Classe Secundria",passives:"Passivas",reactions:"Reaes"}[Y],Ze={primary:"job_system.primary_class.skills",secondary:"job_system.secondary_class.skills",passives:"job_system.passives",reactions:"job_system.reactions"}[Y];return c.jsxs("div",{className:`skills-col ${ve?"compact-col":""}`,children:[c.jsxs("h3",{className:`class-header ${Y==="secondary"?"secondary":""} ${ve?"compact-header":""}`,children:[Y==="primary"||Y==="secondary"?e?c.jsx("input",{className:"class-name-input",value:Se,onChange:Le=>ye(`job_system.${Y}_class.name`,Le.target.value)}):Se:c.jsx("span",{children:Se}),e&&c.jsx("button",{className:"btn-add-skill-slot",onClick:()=>z(Y),children:"+"})]}),c.jsx("div",{className:"skills-list",children:(Ne||[]).map((Le,It)=>c.jsxs("div",{className:`skill-card ${Y==="secondary"?"secondary":""} ${ve?"compact-card":""} ${Le.master?"mastered":""}`,draggable:e,onDragStart:nt=>Re(nt,Le,Y,It),onDragOver:De,onDrop:nt=>Qe(nt,Y,It),children:[c.jsxs("div",{className:"skill-top",children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",flex:1},children:[Le.master&&c.jsx("span",{className:"star-icon pulsing",children:""}),e?c.jsx("input",{placeholder:"Nome",value:Le.name,onChange:nt=>ye(`${Ze}.${It}.name`,nt.target.value),className:"skill-name-in"}):c.jsx("strong",{className:"skill-name",children:Le.name||"Slot Vazio"})]}),c.jsx("div",{className:`skill-type-icon ${e?"clickable":""}`,onClick:()=>e&&Ve({listType:Y,skillIndex:It}),title:e?"Mudar Tipo":"",children:c.jsx("img",{src:`/simbolos/${Le.icon||"h-Basica.png"}`,alt:"Tipo"})}),e&&c.jsx("button",{className:"btn-x-red-small",onClick:()=>se(Y,It),children:""})]}),e?c.jsx("textarea",{placeholder:"Efeito...",value:Le.effect,onChange:nt=>ye(`${Ze}.${It}.effect`,nt.target.value),className:"skill-desc-in"}):c.jsx("p",{className:"skill-desc",children:Le.effect}),c.jsxs("div",{className:"skill-xp-box",children:[c.jsxs("div",{className:"xp-labels",children:[c.jsx("span",{children:"XP"}),e?c.jsxs("div",{style:{display:"flex"},children:[c.jsx("input",{className:"xp-tiny",value:Le.xp?.current||0,onChange:nt=>ye(`${Ze}.${It}.xp.current`,Number(nt.target.value))})," /",c.jsx("input",{className:"xp-tiny",value:Le.xp?.max||100,onChange:nt=>ye(`${Ze}.${It}.xp.max`,Number(nt.target.value))})]}):c.jsxs("span",{children:[Le.xp?.current||0," / ",Le.xp?.max||100]})]}),c.jsx("div",{className:`skill-track ${Le.master?"grayed":""}`,children:c.jsx("div",{className:"skill-fill",style:{width:`${Math.min((Le.xp?.current||0)/(Le.xp?.max||100)*100,100)}%`}})}),e&&!Le.master&&Le.xp?.current>=Le.xp?.max&&c.jsx("button",{className:"btn-masterize",onClick:()=>le(Y,It),children:"MASTERIZAR"})]})]},Le.id))})]})};return c.jsxs("div",{className:"ficha-overlay-fixed",children:[c.jsx(R5,{isOpen:E,onClose:()=>T(!1),onSave:B,label:M}),e&&g&&c.jsx("button",{className:"save-fab glowing",onClick:ee,title:"Salvar Alteraes",children:""}),c.jsxs("div",{className:"ficha-container fade-in",children:[c.jsx("button",{className:"close-btn-ficha",onClick:n,children:""}),c.jsxs("div",{className:"ficha-header",children:[c.jsxs("div",{className:"header-left-group",children:[c.jsxs("div",{className:"guild-insignia-box",children:[c.jsx("span",{className:"header-label-top",children:"SIGNO"}),c.jsx("div",{className:`insignia-display ${e?"clickable":""}`,style:Ut(s.basic_info.guild_insignia),onClick:()=>me("Signo",Y=>ye("basic_info.guild_insignia",Y))})]}),c.jsxs("div",{className:"guild-item-box",children:[c.jsx("span",{className:"header-label-top",children:"RAA"}),c.jsx("div",{className:`special-display ${e?"clickable":""}`,style:Ut(s.basic_info.special_image),onClick:()=>me("Raa",Y=>ye("basic_info.special_image",Y))})]})]}),c.jsxs("div",{className:"header-info",children:[c.jsx("h1",{className:"responsive-title",children:s.basic_info.character_name}),c.jsxs("span",{className:"sub-header",children:[s.basic_info.race," // ",i.class]}),c.jsxs("div",{className:"xp-container",children:[c.jsxs("div",{className:"lvl-box",children:[c.jsx("small",{children:"LVL"}),e?c.jsx("input",{className:"lvl-input",type:"number",value:s.basic_info.level,onChange:Y=>ye("basic_info.level",Number(Y.target.value))}):c.jsx("span",{children:s.basic_info.level})]}),c.jsxs("div",{className:"xp-bar-box",children:[c.jsxs("div",{className:"xp-text",children:["XP ",e?c.jsx("input",{className:"xp-mini-input",value:s.basic_info.experience.current,onChange:Y=>ye("basic_info.experience.current",Number(Y.target.value))}):s.basic_info.experience.current," / ",e?c.jsx("input",{className:"xp-mini-input",value:s.basic_info.experience.max,onChange:Y=>ye("basic_info.experience.max",Number(Y.target.value))}):s.basic_info.experience.max]}),c.jsx("div",{className:"xp-track",children:c.jsx("div",{className:"xp-fill",style:{width:`${Math.min(s.basic_info.experience.current/s.basic_info.experience.max*100,100)}%`}})})]}),e&&s.basic_info.experience.current>=s.basic_info.experience.max&&c.jsx("button",{className:"btn-levelup glowing",onClick:He,children:" UP"})]})]}),c.jsxs("div",{className:"header-right-group",children:[c.jsxs("div",{className:"guild-item-box hidemobile",children:[c.jsx("span",{className:"header-label-top",children:"CLASSE 1"}),c.jsx("div",{className:`special-display ${e?"clickable":""}`,style:Ut(s.basic_info.class1_image),onClick:()=>me("Classe 1",Y=>ye("basic_info.class1_image",Y))})]}),c.jsxs("div",{className:"guild-item-box hidemobile",children:[c.jsx("span",{className:"header-label-top",children:"CLASSE 2"}),c.jsx("div",{className:`special-display ${e?"clickable":""}`,style:Ut(s.basic_info.class2_image),onClick:()=>me("Classe 2",Y=>ye("basic_info.class2_image",Y))})]}),c.jsxs("div",{className:"guild-item-box",children:[c.jsx("span",{className:"header-label-top",children:"RANK"}),c.jsx("div",{className:`rank-display ${e?"clickable":""}`,style:Ut(s.basic_info.guild_rank_image),onClick:()=>me("Rank",Y=>ye("basic_info.guild_rank_image",Y))})]})]})]}),c.jsxs("div",{className:"ficha-tabs",children:[c.jsx("button",{className:`tab-btn ${u==="geral"?"active":""}`,onClick:()=>f("geral"),children:"VISO GERAL"}),c.jsx("button",{className:`tab-btn ${u==="habilidades"?"active":""}`,onClick:()=>f("habilidades"),children:"GRIMRIO"})]}),c.jsx("div",{className:"ficha-body",children:u==="geral"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"col-attributes",children:[c.jsx("h3",{className:"section-title",children:"ATRIBUTOS"}),c.jsx("div",{className:"radar-wrapper",children:c.jsxs("svg",{width:"250",height:"250",viewBox:"0 0 250 250",className:"radar-svg",children:[[20,40,60,80,100].map(Y=>c.jsx("polygon",{points:we.map((Ne,ve)=>{const{x:Se,y:Ze}=At(Y,ve,6);return`${Se},${Ze}`}).join(" "),fill:"none",stroke:"#333",strokeWidth:"1"},Y)),c.jsx("polygon",{points:Xt,fill:"rgba(0, 242, 255, 0.2)",stroke:"#00f2ff",strokeWidth:"2"}),we.map((Y,Ne)=>{const{x:ve,y:Se}=At(120,Ne,6),Ze=s.attributes?.[Y]?.value||0;return c.jsx("foreignObject",{x:ve-20,y:Se-15,width:"40",height:"30",children:c.jsxs("div",{className:"stat-box-chart",children:[c.jsx("span",{className:"sb-label",children:Y}),e?c.jsx("input",{className:"sb-input",value:Ze,onChange:Le=>ye(`attributes.${Y}.value`,Number(Le.target.value))}):c.jsx("span",{className:"sb-val",children:Ze})]})},Y)})]})}),c.jsxs("div",{className:"secondary-stats",children:[c.jsxs("div",{className:"stat-row",children:[c.jsx("label",{children:"HP"}),c.jsxs("div",{className:"stat-bars-inputs",children:[e?c.jsx("input",{value:s.status.hp.current,onChange:Y=>ye("status.hp.current",Number(Y.target.value))}):c.jsx("span",{children:s.status.hp.current}),"/",e?c.jsx("input",{value:s.status.hp.max,onChange:Y=>ye("status.hp.max",Number(Y.target.value))}):c.jsx("span",{children:s.status.hp.max})]})]}),c.jsxs("div",{className:"stat-row",children:[c.jsx("label",{children:"MP"}),c.jsxs("div",{className:"stat-bars-inputs mp",children:[e?c.jsx("input",{value:s.status.mp.current,onChange:Y=>ye("status.mp.current",Number(Y.target.value))}):c.jsx("span",{children:s.status.mp.current}),"/",e?c.jsx("input",{value:s.status.mp.max,onChange:Y=>ye("status.mp.max",Number(Y.target.value))}):c.jsx("span",{children:s.status.mp.max})]})]}),c.jsxs("div",{className:"stat-row-simple",children:[c.jsxs("div",{className:"s-box",children:[c.jsx("img",{src:"/simbolos/ARM.png",alt:"ARM",className:"stat-icon-img"}),e?c.jsx("input",{value:s.status.arm.value,onChange:Y=>ye("status.arm.value",Number(Y.target.value))}):c.jsx("span",{children:s.status.arm.value})]}),c.jsxs("div",{className:"s-box",children:[c.jsx("img",{src:"/simbolos/RES.png",alt:"RES",className:"stat-icon-img"}),e?c.jsx("input",{value:s.status.res.value,onChange:Y=>ye("status.res.value",Number(Y.target.value))}):c.jsx("span",{children:s.status.res.value})]}),c.jsxs("div",{className:"s-box",children:[c.jsx("img",{src:"/simbolos/MOV.png",alt:"MOV",className:"stat-icon-img"}),e?c.jsx("input",{value:s.status.mov?.value||3,onChange:Y=>ye("status.mov.value",Number(Y.target.value))}):c.jsx("span",{children:s.status.mov?.value||3})]})]})]})]}),c.jsxs("div",{className:"col-center-equip",children:[c.jsx("div",{className:`char-image-frame ${e?"clickable":""}`,onClick:()=>me("Personagem",Y=>ye("imgUrl",Y)),children:c.jsx("div",{className:"image-display",style:Ut(s.imgUrl)})}),c.jsx("div",{className:"equip-slots-overlay",children:[{id:0,label:"CABEA",style:{top:"-30px",left:"50%",transform:"translateX(-50%)"}},{id:1,label:"ACESS. 2",style:{top:"80px",right:"-15px"}},{id:2,label:"MO DIR.",style:{bottom:"120px",right:"-15px"}},{id:3,label:"MO ESQ.",style:{bottom:"120px",left:"-15px"}},{id:4,label:"ACESS. 1",style:{top:"80px",left:"-15px"}},{id:5,label:"CORPO",style:{bottom:"-20px",left:"60px"}},{id:6,label:"PS",style:{bottom:"-20px",right:"60px"}}].map((Y,Ne)=>c.jsxs("div",{className:"equip-slot",style:Y.style,children:[c.jsx("div",{className:"slot-label",children:Y.label}),c.jsxs("div",{className:"slot-square",children:[!s.equipment?.slots?.[Ne]?.item_img&&e&&c.jsx("button",{className:"btn-plus-item",onClick:()=>ie(Ne),children:"+"}),s.equipment?.slots?.[Ne]?.item_img?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"item-bg",style:Ut(s.equipment.slots[Ne].item_img)}),c.jsx("button",{className:"btn-eye-item",onClick:()=>C(s.equipment.slots[Ne]),children:""}),e&&c.jsx("button",{className:"btn-return-forge",title:"Devolver",onClick:()=>Ee(Ne),children:""})]}):!e&&c.jsx("span",{className:"empty-text",children:"Vazio"})]})]},Ne))})]}),c.jsxs("div",{className:"col-inventory",children:[c.jsx("h3",{className:"section-title",children:"BOLSA & GIL"}),c.jsxs("div",{className:"gil-display",children:[c.jsx("span",{className:"coin-icon",children:""}),e?c.jsx("input",{type:"number",className:"gil-input-master",value:s.inventory.gil,onChange:Y=>ye("inventory.gil",Number(Y.target.value))}):c.jsx("span",{className:"gil-amount",children:s.inventory.gil}),c.jsx("span",{className:"currency",children:"GIL"})]}),c.jsxs("div",{className:"items-list",children:[c.jsx("h4",{children:"MOCHILA"}),c.jsxs("div",{className:"items-scroll",children:[(s.inventory.items||[]).map((Y,Ne)=>c.jsx("div",{className:"inv-row",children:e?c.jsxs(c.Fragment,{children:[c.jsx("input",{className:"inv-name",value:Y.name,onChange:ve=>ye(`inventory.items.${Ne}.name`,ve.target.value)}),c.jsx("input",{className:"inv-qtd",type:"number",value:Y.quantity,onChange:ve=>ye(`inventory.items.${Ne}.quantity`,Number(ve.target.value))}),c.jsx("button",{className:"btn-x-red",onClick:()=>{const ve=s.inventory.items.filter((Se,Ze)=>Ze!==Ne);ye("inventory.items",ve)},children:""})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"i-name",children:Y.name||"Slot Vazio"}),c.jsxs("span",{className:"i-qtd",children:["x",Y.quantity||0]})]})},Ne)),e&&c.jsx("button",{className:"add-item-btn",onClick:()=>ye("inventory.items",[...s.inventory.items||[],{name:"Novo Item",quantity:1}]),children:"+ Slot"})]})]})]})]}):c.jsxs("div",{className:"skills-tab-content",children:[Jt("primary",s.job_system.primary_class.skills),Jt("secondary",s.job_system.secondary_class.skills),c.jsxs("div",{className:"skills-col extra-col",children:[Jt("passives",s.job_system.passives||[],!0),Jt("reactions",s.job_system.reactions||[],!0),c.jsxs("div",{className:"extra-abilities-box",children:[c.jsxs("div",{className:"bonus-row",children:[c.jsx("label",{children:"BNUS DE CLASSE"}),e?c.jsx("textarea",{value:s.job_system?.class_bonus?.value,onChange:Y=>ye("job_system.class_bonus.value",Y.target.value),className:"bonus-area"}):c.jsx("p",{className:"bonus-area-read",children:s.job_system?.class_bonus?.value||"Nenhum"})]}),c.jsxs("div",{className:"bonus-row",style:{marginTop:"15px"},children:[c.jsx("label",{children:"TTULO"}),e?c.jsx("input",{className:"ab-input",style:{background:"rgba(0,0,0,0.5)",padding:"5px",width:"100%",border:"1px solid #444",borderRadius:"4px"},value:s.basic_info?.custom_title||"",onChange:Y=>ye("basic_info.custom_title",Y.target.value)}):c.jsx("p",{style:{background:"rgba(0,0,0,0.5)",padding:"8px",borderRadius:"4px",fontSize:"12px",color:"#ffcc00",fontWeight:"bold",margin:0},children:s.basic_info?.custom_title||"Sem Ttulo"})]})]})]})]})}),N&&c.jsx("div",{className:"item-selector-overlay",onClick:()=>Ve(null),children:c.jsxs("div",{className:"item-selector-box",onClick:Y=>Y.stopPropagation(),style:{height:"auto",maxHeight:"400px"},children:[c.jsx("h3",{children:"ESCOLHA O TIPO"}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"10px",padding:"10px"},children:N5.map(Y=>c.jsx("div",{style:{cursor:"pointer",border:"1px solid #333",padding:"5px",borderRadius:"4px",textAlign:"center",background:"#fff"},onClick:()=>Q(Y),children:c.jsx("img",{src:`/simbolos/${Y}`,alt:Y,style:{width:"40px",height:"auto"}})},Y))}),c.jsx("button",{className:"btn-cancel-modal",onClick:()=>Ve(null),children:"CANCELAR"})]})}),V&&c.jsx("div",{className:"item-selector-overlay",onClick:()=>$(!1),children:c.jsxs("div",{className:"item-selector-box",onClick:Y=>Y.stopPropagation(),children:[c.jsx("h3",{children:"EQUIPAR DO COFRE"}),c.jsxs("div",{className:"forge-list-scroll",children:[K.length===0&&c.jsx("p",{className:"empty-text",children:"Nenhum item disponvel na Forja."}),K.map(Y=>c.jsxs("div",{className:"forge-item-row",onClick:()=>ge(Y),children:[c.jsx("div",{className:"forge-thumb",style:Ut(Y.imagem)}),c.jsxs("div",{children:[c.jsx("strong",{children:Y.nome}),Y.ownerId&&c.jsx("small",{style:{color:"#0f0"},children:" (Seu Item)"}),c.jsxs("p",{children:[Y.descricao.substring(0,40),"..."]})]})]},Y.id))]}),c.jsx("button",{className:"btn-cancel-modal",onClick:()=>$(!1),children:"CANCELAR"})]})}),w&&c.jsx("div",{className:"item-selector-overlay",onClick:()=>C(null),children:c.jsxs("div",{className:"item-details-box",onClick:Y=>Y.stopPropagation(),children:[c.jsx("div",{className:"detail-img-large",style:Ut(w.item_img)}),c.jsx("h3",{children:w.item_name}),c.jsx("p",{className:"details-desc",children:w.description||"Sem descrio"}),c.jsxs("p",{className:"details-effect",children:["Efeito: ",w.effect||"Nenhum"]}),c.jsx("button",{className:"btn-cancel-modal",onClick:()=>C(null),children:"FECHAR"})]})}),m&&c.jsx("div",{className:"level-up-overlay",children:c.jsx("h1",{className:"levelup-text",children:"LEVEL UP!"})})]}),c.jsx("style",{children:`
        /* GERAL */
        .ficha-overlay-fixed { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.95); z-index: 200000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(8px); overflow-y: auto; }
        .ficha-container { width: 1200px; height: 850px; max-width: 95vw; max-height: 98vh; background: #050a10; border: 2px solid #ffcc00; display: flex; flex-direction: column; position: relative; box-shadow: 0 0 50px rgba(255, 204, 0, 0.2); border-radius: 8px; overflow: hidden; font-family: 'Cinzel', serif; color: #fff; }
        .close-btn-ficha { position: absolute; top: 10px; right: 15px; background: transparent; border: none; color: #f44; font-size: 24px; cursor: pointer; z-index: 200; font-weight: bold; }
        .save-fab { position: absolute; bottom: 30px; right: 30px; width: 60px; height: 60px; border-radius: 50%; background: #222; border: 2px solid #444; color: #fff; font-size: 30px; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 300; transition: 0.3s; box-shadow: 0 0 15px #000; }
        .save-fab:hover { background: #00f2ff; border-color: #fff; color: #000; box-shadow: 0 0 30px #00f2ff; }
        .save-fab.glowing { animation: pulseSave 1.5s infinite; border-color: #00f2ff; color: #00f2ff; }
        @keyframes pulseSave { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        /* HEADER */
        .ficha-header { padding: 25px 30px 10px 30px; background: linear-gradient(90deg, #101020, #000); border-bottom: 2px solid #333; display: flex; justify-content: space-between; align-items: center; height: 140px; position: relative; flex-shrink: 0; }
        .guild-insignia-box, .guild-rank-box, .guild-item-box { display: flex; flex-direction: column; align-items: center; width: 80px; position: relative; padding-top: 10px; }
        .header-left-group, .header-right-group { display: flex; gap: 20px; align-items: flex-end; }
        .header-label-top { font-size: 10px; color: #ffcc00; font-weight: bold; letter-spacing: 1px; margin-bottom: 2px; }
        .insignia-display, .rank-display, .special-display { width: 70px; height: 70px; background-size: contain; background-repeat: no-repeat; background-position: center; border: 1px solid #333; border-radius: 50%; background-color: #000; position: relative; transition: 0.2s; }
        .special-display { border-radius: 12px; }
        .clickable:hover { cursor: pointer; border-color: #ffcc00; box-shadow: 0 0 10px #ffcc00; }
        .header-info { flex: 1; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; min-width: 0; }
        .header-info h1 { margin: 0; color: #ffcc00; font-size: 36px; letter-spacing: 4px; text-shadow: 0 0 10px rgba(255,204,0,0.3); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%; }
        .sub-header { color: #00f2ff; font-size: 14px; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 15px; }
        .xp-container { display: flex; align-items: center; gap: 15px; width: 60%; margin-top: -5px; }
        .lvl-box { display: flex; flex-direction: column; align-items: center; background: #222; border: 1px solid #ffcc00; padding: 5px 12px; border-radius: 4px; box-shadow: 0 0 10px rgba(255,204,0,0.2); }
        .lvl-box small { font-size: 8px; color: #ffcc00; }
        .lvl-box span { font-size: 24px; font-weight: bold; line-height: 1; }
        .lvl-input { width: 40px; background: transparent; border: none; color: #fff; font-size: 24px; font-weight: bold; text-align: center; }
        .xp-bar-box { flex: 1; display: flex; flex-direction: column; }
        .xp-text { text-align: right; font-size: 10px; color: #aaa; margin-bottom: 2px; }
        .xp-mini-input { background: #111; border: none; color: #fff; width: 30px; text-align: center; font-size: 10px; }
        .xp-track { width: 100%; height: 8px; background: #111; border: 1px solid #444; border-radius: 4px; overflow: hidden; }
        .xp-fill { height: 100%; background: linear-gradient(90deg, #00f2ff, #0088ff); transition: width 0.5s; }
        .btn-levelup { background: linear-gradient(to bottom, #ffcc00, #ff8800); border: 2px solid #fff; color: #000; font-weight: bold; padding: 5px 15px; cursor: pointer; border-radius: 20px; animation: glow 1s infinite alternate; font-family: 'Cinzel', serif; font-size: 10px; }
        @keyframes glow { from { box-shadow: 0 0 10px #ffcc00; } to { box-shadow: 0 0 30px #ffcc00; transform: scale(1.05); } }
        .ficha-tabs { display: flex; background: #111; border-bottom: 1px solid #333; margin-top: 0; flex-shrink: 0; }
        .tab-btn { flex: 1; background: transparent; border: none; padding: 15px; color: #666; font-family: 'Cinzel', serif; font-size: 16px; cursor: pointer; transition: 0.3s; border-bottom: 3px solid transparent; }
        .tab-btn:hover { color: #fff; background: rgba(255,255,255,0.05); }
        .tab-btn.active { color: #ffcc00; border-bottom: 3px solid #ffcc00; background: rgba(255, 204, 0, 0.05); }
        .ficha-body { flex: 1; display: flex; padding: 30px 20px; gap: 20px; overflow: hidden; position: relative; }
        
        /* SCROLLBAR ESTILOSA (WEBKIT) */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #050a10; 
            border-left: 1px solid #333;
        }
        ::-webkit-scrollbar-thumb {
            background: #444; 
            border-radius: 4px;
            border: 1px solid #222;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #ffcc00;
            border-color: #fff;
        }

        /* Aplicando especificamente */
        .skills-list, .bonus-area, .skills-col.extra-col, .forge-list-scroll, .items-scroll {
            scrollbar-width: thin; 
            scrollbar-color: #ffcc00 #050a10; 
        }

        /* ESTILOS DE HABILIDADES */
        .skills-tab-content { display: flex; width: 100%; height: 100%; gap: 20px; }
        .skills-col { flex: 1; display: flex; flex-direction: column; background: rgba(0,0,0,0.3); border: 1px solid #333; padding: 10px; border-radius: 4px; overflow: hidden; min-width: 0; }
        .class-header { color: #00f2ff; font-size: 16px; border-bottom: 2px solid #00f2ff; padding-bottom: 5px; margin-bottom: 10px; text-transform: uppercase; display: flex; justify-content: space-between; align-items: center; }
        .class-header.secondary { color: #aaa; border-color: #666; }
        .class-name-input { background: transparent; border: none; color: inherit; font-size: inherit; font-weight: bold; width: 80%; }
        .btn-add-skill-slot { background: transparent; border: 1px solid #555; color: #fff; width: 20px; height: 20px; cursor: pointer; font-size: 14px; line-height: 1; }
        
        /* CORRIGIDO SCROLL DA LISTA */
        .skills-list { 
            flex: 1; 
            overflow-y: auto; 
            display: flex; 
            flex-direction: column; 
            gap: 8px; 
            padding-right: 5px; 
        }
        
        .skill-card { background: rgba(0, 30, 60, 0.4); border: 1px solid #005577; padding: 8px; border-radius: 4px; cursor: grab; transition: 0.2s; position: relative; }
        .skill-card.secondary { background: rgba(30, 30, 30, 0.4); border-color: #444; }
        .skill-card:active { cursor: grabbing; border-color: #ffcc00; }
        .skill-card.mastered { border-color: #ffd700; background: rgba(50, 40, 0, 0.4); }
        .skill-top { display: flex; justify-content: space-between; margin-bottom: 5px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; align-items: flex-start; }
        .skill-name { color: #ffcc00; font-size: 13px; }
        .skill-desc { font-size: 11px; color: #ccc; line-height: 1.3; margin: 0 0 5px 0; }
        .skill-name-in { flex: 1; font-weight: bold; color: #ffcc00; background: transparent; border: none; font-size: 12px; }
        .skill-desc-in { width: 100%; background: transparent; border: none; color: #ccc; font-size: 11px; resize: none; font-family: sans-serif; height: 30px; }
        .skill-type-icon { width: 30px; height: 30px; margin-left: 5px; background: #fff; padding: 2px; border-radius: 4px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .skill-type-icon img { width: 100%; height: 100%; object-fit: contain; }
        .skill-xp-box { margin-top: 5px; background: rgba(0,0,0,0.3); padding: 4px; border-radius: 3px; }
        .xp-labels { display: flex; justify-content: space-between; font-size: 9px; color: #888; margin-bottom: 2px; }
        .xp-tiny { background: transparent; border: none; color: #aaa; width: 20px; text-align: center; font-size: 9px; }
        .skill-track { width: 100%; height: 5px; background: #222; border-radius: 2px; overflow: hidden; }
        .skill-track.grayed .skill-fill { background: #888; }
        .skill-fill { height: 100%; background: #00f2ff; transition: width 0.3s; }
        .btn-masterize { width: 100%; margin-top: 4px; background: linear-gradient(to right, #d4af37, #b8860b); border: none; color: #000; font-size: 9px; font-weight: bold; cursor: pointer; padding: 2px; border-radius: 2px; }
        .star-icon { color: #ffd700; font-size: 14px; margin-right: 5px; text-shadow: 0 0 5px #ffd700; }
        .pulsing { animation: pulseStar 1.5s infinite; }
        @keyframes pulseStar { 0% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.3); opacity: 1; } 100% { transform: scale(1); opacity: 0.8; } }
        .btn-x-red-small { color: #f44; background: none; border: none; font-weight: bold; cursor: pointer; font-size: 12px; margin-left: 5px; }

        /* ESTILOS COMPACTOS (PASSIVA/REAO) */
        .compact-col { background: transparent; border: none; padding: 0; margin-bottom: 10px; flex: none; }
        .compact-header { font-size: 12px; border-color: #555; color: #aaa; margin-bottom: 5px; padding-bottom: 2px; }
        .compact-card { padding: 4px; margin-bottom: 5px; border-color: #333; background: rgba(20,20,20,0.5); }
        .compact-card .skill-name { font-size: 11px; }
        .compact-card .skill-type-icon { width: 20px; height: 20px; }
        .compact-card .skill-desc { font-size: 10px; margin-bottom: 2px; }
        .compact-card .skill-track { height: 3px; }

        /* COLUNA EXTRA COM SCROLL FUNCIONAL */
        .skills-col.extra-col { 
            flex: 0.8; 
            overflow-y: auto; 
            padding-right: 5px;
        }
        .skills-col.extra-col .skills-list {
            overflow-y: visible;
            flex: none;
        }

        /* OUTRAS COLUNAS */
        .col-attributes { width: 300px; display: flex; flex-direction: column; align-items: center; border-right: 1px solid #333; padding-right: 20px; flex-shrink: 0; }
        .col-center-equip { flex: 1; position: relative; display: flex; justify-content: center; align-items: center; }
        .col-inventory { width: 280px; border-left: 1px solid #333; padding-left: 20px; display: flex; flex-direction: column; flex-shrink: 0; }
        .section-title { color: #aaa; font-size: 14px; border-bottom: 1px solid #00f2ff; width: 100%; text-align: center; margin-bottom: 15px; padding-bottom: 5px; }
        .radar-wrapper { position: relative; margin-bottom: 20px; width: 100%; display: flex; justify-content: center; }
        .stat-box-chart { background: #000; border: 1px solid #ffcc00; width: 40px; height: 30px; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 4px; box-shadow: 0 0 5px #000; }
        .sb-label { font-size: 8px; color: #aaa; }
        .sb-val { font-size: 12px; font-weight: bold; color: #fff; }
        .sb-input { width: 100%; height: 100%; background: transparent; border: none; color: #ffcc00; text-align: center; font-weight: bold; padding: 0; font-size: 12px; }
        .secondary-stats { width: 100%; }
        .stat-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
        .stat-row label { font-weight: bold; color: #ffcc00; width: 30px; }
        .stat-bars-inputs { flex: 1; background: rgba(255,0,0,0.1); border: 1px solid #522; padding: 5px; display: flex; align-items: center; justify-content: center; gap: 5px; color: #fff; border-radius: 4px; }
        .stat-bars-inputs.mp { background: rgba(0,0,255,0.1); border-color: #225; }
        .stat-bars-inputs input { background: transparent; border: none; color: #fff; width: 40px; text-align: center; font-family: 'serif'; font-weight: bold; }
        .stat-row-simple { display: flex; justify-content: space-between; gap: 10px; margin-top: 15px; }
        .s-box { flex: 1; background: #111; border: 1px solid #444; padding: 10px; text-align: center; border-radius: 4px; display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .s-box label { display: block; font-size: 10px; color: #888; margin-bottom: 5px; }
        .s-box input { background: transparent; border: none; color: #fff; text-align: center; font-size: 18px; width: 100%; font-weight: bold; }
        .s-box span { font-size: 18px; font-weight: bold; }
        .stat-icon-img { width: 30px; height: 30px; object-fit: contain; }
        .char-image-frame { width: 300px; height: 450px; border: 2px solid #333; position: relative; background: #000; border-radius: 150px; overflow: hidden; box-shadow: inset 0 0 50px #000; margin-top: -20px; z-index: 1; transition: 0.2s; }
        .char-image-frame.clickable:hover { border-color: #ffcc00; cursor: pointer; }
        .image-display { width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.8; }
        .equip-slots-overlay { position: absolute; width: 300px; height: 450px; left: 50%; top: 50%; transform: translate(-50%, -50%); pointer-events: none; z-index: 2; margin-top: -10px; }
        .equip-slot { position: absolute; width: 80px; display: flex; flex-direction: column; align-items: center; pointer-events: auto; }
        .slot-label { font-size: 9px; color: #00f2ff; text-shadow: 0 0 2px #000; margin-bottom: 2px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        .slot-square { width: 60px; height: 60px; background: rgba(0, 10, 30, 0.9); border: 1px solid #ffcc00; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 15px rgba(0,0,0,0.8); position: relative; overflow: hidden; border-radius: 4px; }
        .item-bg { width: 100%; height: 100%; background-size: cover; background-position: center; position: absolute; top: 0; left: 0; }
        .empty-text { font-size: 9px; color: #666; text-align: center; line-height: 1; padding: 2px; }
        .btn-plus-item { background: transparent; color: #ffcc00; font-size: 24px; border: none; cursor: pointer; font-weight: bold; }
        .btn-eye-item { position: absolute; bottom: 2px; right: 2px; font-size: 10px; background: rgba(0,0,0,0.8); color: #fff; border: none; border-radius: 3px; cursor: pointer; padding: 2px 4px; z-index: 5; }
        .btn-return-forge { position: absolute; top: 2px; left: 2px; font-size: 10px; background: rgba(200, 0, 0, 0.8); color: #fff; border: none; border-radius: 3px; cursor: pointer; padding: 2px 4px; z-index: 5; }
        .gil-display { background: linear-gradient(90deg, rgba(255,204,0,0.1), transparent); border: 1px solid #ffcc00; padding: 15px; border-radius: 4px; display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .coin-icon { font-size: 20px; }
        .gil-amount { font-size: 24px; font-weight: bold; color: #fff; flex: 1; text-align: right; }
        .gil-input-master { background: transparent; border: none; color: #fff; font-size: 24px; font-weight: bold; width: 100%; text-align: right; outline: none; }
        input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        .currency { font-size: 10px; color: #ffcc00; font-weight: bold; }
        .items-list { flex: 1; display: flex; flex-direction: column; }
        .items-list h4 { color: #888; font-size: 12px; border-bottom: 1px solid #444; padding-bottom: 5px; margin-bottom: 10px; }
        .items-scroll { flex: 1; overflow-y: auto; padding-right: 5px; }
        .inv-row { display: flex; justify-content: space-between; border-bottom: 1px solid #222; padding: 8px 0; font-size: 12px; align-items: center; }
        .inv-name { background: transparent; border: none; color: #ddd; flex: 1; font-family: 'serif'; }
        .inv-qtd { background: transparent; border: none; color: #00f2ff; width: 40px; text-align: right; font-weight: bold; }
        .btn-x-red { color: #f44; background: none; border: none; cursor: pointer; font-weight: bold; margin-left: 5px; }
        .i-name { color: #ddd; }
        .i-qtd { color: #00f2ff; font-weight: bold; }
        .add-item-btn { width: 100%; background: #222; border: 1px dashed #555; color: #888; padding: 5px; cursor: pointer; margin-top: 10px; font-size: 10px; }
        .img-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 300000; display: flex; align-items: center; justify-content: center; }
        .img-modal-content { background: #111; border: 1px solid #ffcc00; padding: 25px; width: 400px; border-radius: 8px; text-align: center; box-shadow: 0 0 30px rgba(255,204,0,0.2); }
        .img-modal-content h3 { color: #ffcc00; margin-top: 0; font-family: 'Cinzel', serif; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 20px; }
        .img-modal-content input { width: 100%; padding: 12px; background: #000; border: 1px solid #444; color: #fff; margin-bottom: 20px; outline: none; border-radius: 4px; }
        .img-modal-content input:focus { border-color: #00f2ff; }
        .img-modal-actions { display: flex; gap: 15px; justify-content: center; }
        .btn-confirm { background: #00f2ff; color: #000; padding: 10px 25px; border: none; cursor: pointer; font-weight: bold; border-radius: 4px; transition: 0.2s; }
        .btn-confirm:hover { background: #fff; box-shadow: 0 0 15px #00f2ff; }
        .btn-cancel { background: #333; color: #fff; padding: 10px 25px; border: none; cursor: pointer; border-radius: 4px; }
        .btn-cancel:hover { background: #444; }
        .item-selector-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 300000; display: flex; align-items: center; justify-content: center; }
        .item-selector-box { width: 400px; height: 500px; background: #111; border: 1px solid #ffcc00; padding: 20px; display: flex; flex-direction: column; border-radius: 8px; }
        .item-selector-box h3 { color: #ffcc00; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0; }
        .forge-list-scroll { flex: 1; overflow-y: auto; margin-bottom: 15px; }
        .forge-item-row { display: flex; align-items: center; padding: 10px; border-bottom: 1px solid #333; cursor: pointer; }
        .forge-item-row:hover { background: rgba(255,255,255,0.1); }
        .forge-item-row img { width: 40px; height: 40px; border: 1px solid #555; margin-right: 10px; }
        .forge-thumb { width: 40px; height: 40px; border: 1px solid #555; margin-right: 10px; background-size: cover; background-position: center; }
        .forge-item-row strong { color: #00f2ff; display: block; font-size: 12px; }
        .forge-item-row p { font-size: 10px; color: #aaa; margin: 0; }
        .btn-cancel-modal { width: 100%; padding: 10px; background: #333; color: #fff; border: none; cursor: pointer; }
        .item-details-box { width: 300px; background: #000; border: 1px solid #00f2ff; padding: 20px; text-align: center; border-radius: 8px; }
        .item-details-box img { width: 80px; height: 80px; border: 1px solid #fff; margin-bottom: 10px; }
        .detail-img-large { width: 80px; height: 80px; border: 1px solid #fff; margin: 0 auto 10px auto; background-size: cover; background-position: center; }
        .item-details-box h3 { color: #00f2ff; margin: 0 0 10px 0; }
        .details-desc { font-size: 12px; color: #ccc; margin-bottom: 10px; font-style: italic; }
        .details-effect { font-size: 12px; color: #ffcc00; font-weight: bold; margin-bottom: 20px; }
        .extra-abilities-box { margin-top: 20px; border-top: 2px solid #444; padding-top: 15px; }
        .bonus-row { margin-top: 10px; }
        .bonus-row label { font-size: 10px; color: #00f2ff; display: block; margin-bottom: 5px; font-weight: bold; }
        .bonus-row p { font-size: 12px; color: #ddd; font-style: italic; background: rgba(0,0,0,0.5); padding: 8px; border-radius: 4px; }
        
        /* CAIXA DE BNUS DE CLASSE MAIOR */
        .bonus-area { 
            width: 100%; 
            height: 120px; 
            background: rgba(0,0,0,0.5); 
            border: 1px solid #444; 
            color: #ddd; 
            font-size: 12px; 
            padding: 5px; 
            resize: vertical; 
        }
        .bonus-area-read {
            min-height: 40px;
            max-height: 120px;
            overflow-y: auto;
        }

        .ab-input { background: transparent; border: none; color: #fff; font-weight: bold; flex: 1; font-size: 12px; }
        
        /* --- LEVEL UP STYLE (FFT) --- */
        .level-up-overlay { 
            position: fixed; /* Mudei para FIXED para ignorar o scroll do modal */
            top: 0; 
            left: 0; 
            width: 100vw; 
            height: 100vh; 
            background: rgba(0,0,0,0.7); 
            z-index: 999999; /* Z-index bem alto para ficar acima de tudo */
            display: flex; 
            align-items: center; 
            justify-content: center; 
            pointer-events: none; 
            animation: fadeOverlay 4s forwards;
        }

        .levelup-text { 
            font-family: 'Cinzel', serif;
            font-size: 100px; 
            font-weight: bold;
            color: #ffcc00; 
            text-transform: uppercase;
            letter-spacing: 10px;
            /* Shadow estilo FFT: Borda preta dura + Brilho dourado */
            text-shadow: 
                3px 3px 0 #000,
                -1px -1px 0 #000,  
                1px -1px 0 #000,
                -1px 1px 0 #000,
                1px 1px 0 #000,
                0 0 20px #ffcc00,
                0 0 40px #ffcc00;
            animation: fftFloatUp 4s ease-out forwards;
        }

        @keyframes fftFloatUp {
            0% { opacity: 0; transform: translateY(50px) scale(0.5); }
            10% { opacity: 1; transform: translateY(0) scale(1.2); }
            20% { transform: translateY(0) scale(1); }
            80% { opacity: 1; transform: translateY(-20px); }
            100% { opacity: 0; transform: translateY(-50px); }
        }

        @keyframes fadeOverlay { 0% { opacity: 1; } 80% { opacity: 1; } 100% { opacity: 0; } }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        /* --- RESPONSIVIDADE --- */
        
        /* TABLET & NOTEBOOK MENOR (max-width: 1024px) */
        @media (max-width: 1024px) {
            .ficha-container { width: 100%; height: 100%; max-height: none; border-radius: 0; border: none; overflow-y: auto; }
            .ficha-header { height: auto; flex-wrap: wrap; padding-bottom: 20px; }
            .header-info h1 { font-size: 24px; }
            .ficha-body { flex-direction: column; overflow-y: visible; padding-bottom: 80px; }
            
            /* Na viso geral, alinha itens ao centro e remove larguras fixas */
            .col-attributes, .col-inventory { width: 100%; border: none; padding: 0; margin-bottom: 20px; }
            .col-attributes { border-bottom: 1px solid #333; padding-bottom: 20px; }
            .col-center-equip { order: -1; margin-bottom: 30px; transform: scale(0.9); }
            
            /* Em Habilidades, empilha colunas */
            .skills-tab-content { flex-direction: column; }
            .skills-col { overflow: visible; }
        }

        /* CELULAR (max-width: 768px) */
        @media (max-width: 768px) {
            /* 1. O CONTAINER PRINCIPAL VIRA UMA JANELA ROLVEL GRANDE */
            .ficha-container { 
                width: 95% !important; 
                height: 90vh !important; /* Ocupa quase toda a tela */
                max-height: none !important; 
                overflow-y: auto !important; /* Scroll aqui, na janela toda */
                margin: 20px auto; /* Centraliza */
                display: block; /* Garante que os elementos desam */
            }

            .ficha-header { justify-content: center; flex-direction: column; gap: 10px; }
            .header-left-group, .header-right-group { gap: 10px; }
            .header-info { width: 100%; order: -1; margin-bottom: 15px; }
            .xp-container { width: 90%; }
            .hidemobile { display: none; } 
            
            .col-center-equip { transform: scale(0.85); margin-top: -30px; margin-bottom: 10px; }
            
            /* RESTAURANDO O GRFICO DE ATRIBUTOS COM AJUSTE DE ESCALA */
            .radar-wrapper { 
                display: flex !important; 
                justify-content: center; 
                transform: scale(0.85); /* Diminui um pouco para no vazar a tela */
                margin: -20px 0; /* Ajusta margem vertical para no ocupar muito espao */
            }
            
            .stat-row-simple { gap: 5px; }
            .s-box input { font-size: 14px; }
            
            /* 2. LIBERA O TAMANHO DAS LISTAS DE HABILIDADES/PASSIVAS */
            .skills-list, .skills-col, .box-passivas { 
                max-height: none !important; /* Remove o limite de altura */
                height: auto !important;     /* Cresce conforme o texto */
                overflow: visible !important; /* Tira o scroll interno ruim */
                flex-shrink: 0; /* Impede que o flexbox esmague a caixa */
                padding-bottom: 20px;
            }
            
            .save-fab { bottom: 20px; right: 20px; width: 50px; height: 50px; font-size: 24px; }
            
            .levelup-text { font-size: 50px; } /* Ajuste de fonte no mobile */
        }
      `})]})}const C5="/assets/ficha-icon-Ds6_MepT.png",sw=({isMaster:i})=>{const[e,n]=A.useState(!1),[s,o]=A.useState([]),[u,f]=A.useState(null),[m,b]=A.useState(null),[g,v]=A.useState(""),[E,T]=A.useState("D");A.useEffect(()=>{const ae=Nn(Rt(xe,"guild_fraternidade"),jr("order","asc")),w=Rn(ae,C=>{const I=C.docs.map(k=>({id:k.id,...k.data()}));o(I)});return()=>w()},[]);const M=async()=>{if(i)try{console.log("Iniciando sincronizao...");const ae=Rt(xe,"characters"),w=await nf(ae);if(w.empty){alert("Nenhum personagem encontrado na coleo 'characters'.");return}const C=w.docs.map(I=>{const k=I.data(),j=k.character_sheet||{},O=j.basic_info||{};return{id:I.id,name:k.name||k.nome||O.name||"Sem Nome",race:k.race||k.raca||O.race||"?",class:k.class||k.classe||O.class||"?",level:k.level||k.nivel||O.level||1,photo:k.imagemUrl||k.photo||j.imgUrl||"https://via.placeholder.com/100"}});console.log("Fichas encontradas:",C);for(let I of C){if(I.name==="Sem Nome")continue;const k=s.find(j=>j.originalCharId===I.id);if(k){const j=je(xe,"guild_fraternidade",k.id);await qe(j,{name:I.name,race:I.race,class:I.class,level:Number(I.level),photo:I.photo,status:k.status==="dead"?"dead":"active"})}else{const j=s.length+1;await Bs(Rt(xe,"guild_fraternidade"),{originalCharId:I.id,name:I.name,race:I.race,class:I.class,level:Number(I.level),photo:I.photo,mvpScore:0,status:"active",order:j,missions:[]})}}alert(`Sincronizao concluda! ${C.length} personagens verificados.`)}catch(ae){console.error("Erro detalhado ao sincronizar:",ae),alert("Erro ao sincronizar. Veja o console (F12) para detalhes.")}},G=ae=>{b(ae)},B=ae=>{ae.preventDefault()},U=async ae=>{if(!i||m===null)return;const w=[...s],[C]=w.splice(m,1);w.splice(ae,0,C),o(w),b(null);for(let I=0;I<w.length;I++){const k=w[I];k.order!==I+1&&await qe(je(xe,"guild_fraternidade",k.id),{order:I+1})}},V=async ae=>{if(!u||!i)return;let w=parseInt(ae);isNaN(w)&&(w=0),w<0&&(w=0),w>100&&(w=100),await qe(je(xe,"guild_fraternidade",u.id),{mvpScore:w})},$=async()=>{if(!g||!u)return;const ae={id:Date.now().toString(),name:g,rank:E,completed:!1,isMvp:!1},w=[...u.missions||[],ae];await qe(je(xe,"guild_fraternidade",u.id),{missions:w}),v("")},K=async(ae,w)=>{if(!i||!u)return;const C=u.missions.map(I=>I.id===ae?{...I,[w]:!I[w]}:I);await qe(je(xe,"guild_fraternidade",u.id),{missions:C})},re=async ae=>{if(!i||!u)return;const w=u.missions.filter(C=>C.id!==ae);await qe(je(xe,"guild_fraternidade",u.id),{missions:w})},he=async()=>{if(!i||!u)return;const ae=u.status==="dead"?"active":"dead";await qe(je(xe,"guild_fraternidade",u.id),{status:ae})};return A.useEffect(()=>{if(u){const ae=s.find(w=>w.id===u.id);ae&&f(ae)}},[s]),c.jsxs(c.Fragment,{children:[c.jsx("style",{children:`
        .guild-btn-float {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 60px;
            background: #000;
            border: 2px solid #ffcc00;
            border-radius: 50%;
            color: #ffcc00;
            font-size: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 9999;
            box-shadow: 0 0 15px #ffcc00;
            transition: all 0.3s;
        }
        .guild-btn-float:hover {
            transform: translateX(-50%) scale(1.1);
            background: #ffcc00;
            color: #000;
        }

        .guild-modal-overlay {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: rgba(0,0,0,0.85);
            z-index: 10000;
            display: flex; align-items: center; justify-content: center;
        }
        .guild-board-container {
            width: 500px;
            height: 80vh;
            background: #111;
            border: 4px solid #ffcc00;
            border-radius: 10px;
            display: flex; flex-direction: column;
            padding: 20px;
            box-shadow: 0 0 30px rgba(255, 204, 0, 0.3);
            position: relative;
        }
        .guild-title {
            text-align: center;
            color: #ffcc00;
            font-family: 'Cinzel', serif;
            font-size: 24px;
            margin-bottom: 20px;
            text-transform: uppercase;
            text-shadow: 0 0 10px #ffcc00;
        }
        
        /* Lista Invisvel Scroll */
        .guild-list {
            flex: 1;
            overflow-y: auto;
            padding-right: 5px;
        }
        .guild-list::-webkit-scrollbar { display: none; }
        .guild-list { -ms-overflow-style: none; scrollbar-width: none; }

        .guild-row {
            display: flex; align-items: center;
            background: rgba(255, 255, 255, 0.05);
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #333;
            cursor: pointer;
            transition: 0.2s;
            border-radius: 5px;
        }
        .guild-row:hover { border-color: #ffcc00; background: rgba(255, 204, 0, 0.1); }
        .guild-row.rip {
            filter: grayscale(100%);
            opacity: 0.6;
            border-color: #555;
        }
        .guild-row.rip:hover { filter: grayscale(0%); opacity: 1; }

        .rank-num {
            font-size: 20px; font-weight: bold; color: #ffcc00;
            width: 40px; text-align: center; font-family: 'Cinzel', serif;
        }
        .char-info { flex: 1; display: flex; flex-direction: column; }
        .char-name { font-weight: bold; color: #fff; font-size: 16px; }
        .char-meta { font-size: 12px; color: #aaa; }
        .rip-tag { color: #fff; background: #333; padding: 2px 5px; font-size: 10px; margin-left: 5px; border: 1px solid #555; }

        /* Modal Detalhes */
        .member-modal {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #1a1a1a;
            padding: 20px;
            display: flex; flex-direction: column;
            z-index: 10001;
            overflow-y: auto;
        }
        .close-btn {
            position: absolute; top: 10px; right: 10px;
            background: none; border: none; color: #fff; font-size: 24px; cursor: pointer;
        }
        .member-header { display: flex; gap: 20px; margin-bottom: 20px; align-items: center; }
        .member-photo {
            width: 100px; height: 100px; object-fit: cover;
            border: 2px solid #ffcc00; border-radius: 50%;
            background: #000;
        }
        .mvp-box {
            background: #000; border: 1px solid #ffcc00; padding: 10px;
            text-align: center;
            min-width: 80px;
        }
        .mvp-val { font-size: 24px; color: #ffcc00; font-weight: bold; }
        .mvp-input { width: 50px; background: #222; border: 1px solid #555; color: #fff; text-align: center; }

        .missions-container { flex: 1; background: #000; border: 1px solid #333; padding: 10px; overflow-y: auto; }
        .mission-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 8px; border-bottom: 1px solid #222;
        }
        .m-name { color: #fff; font-size: 14px; flex: 1; }
        .m-rank { color: #aaa; font-size: 12px; margin-right: 10px; }
        .m-status { font-size: 18px; cursor: pointer; margin-right: 10px; }
        .m-mvp { font-size: 18px; cursor: pointer; color: #333; }
        .m-mvp.active { color: #ffcc00; text-shadow: 0 0 5px #ffcc00; }
        
        .status-success { color: #4ade80; }
        .status-fail { color: #f87171; }
        
        .add-mission-box { display: flex; gap: 5px; margin-top: 10px; }
        .input-dark { background: #222; border: 1px solid #444; color: #fff; padding: 5px; }
        .btn-gold { background: #ffcc00; color: #000; border: none; font-weight: bold; padding: 5px 10px; cursor: pointer; }

        .sync-btn {
            margin-top: 10px; background: #333; color: #aaa; border: 1px solid #555;
            width: 100%; padding: 5px; cursor: pointer; font-size: 12px; transition: 0.2s;
        }
        .sync-btn:hover { background: #444; color: #fff; border-color: #ffcc00; }
        
        .rip-btn {
            background: #222; color: #f44; border: 1px solid #f44;
            padding: 5px; font-size: 10px; cursor: pointer; margin-top: 5px;
        }
      `}),c.jsx("div",{className:"guild-btn-float",onClick:()=>n(!0),title:"Fraternidade das Lmpadas Errantes",children:""}),e&&c.jsx("div",{className:"guild-modal-overlay",onClick:()=>n(!1),children:c.jsxs("div",{className:"guild-board-container",onClick:ae=>ae.stopPropagation(),children:[c.jsx("h2",{className:"guild-title",children:"Fraternidade das Lmpadas Errantes"}),c.jsxs("div",{className:"guild-list",children:[s.map((ae,w)=>c.jsxs("div",{className:`guild-row ${ae.status==="dead"?"rip":""}`,draggable:i,onDragStart:()=>G(w),onDragOver:B,onDrop:()=>U(w),onClick:()=>f(ae),children:[c.jsx("div",{className:"rank-num",children:w+1}),c.jsxs("div",{className:"char-info",children:[c.jsxs("div",{className:"char-name",children:[ae.name,ae.status==="dead"&&c.jsx("span",{className:"rip-tag",children:"R.I.P "})]}),c.jsxs("div",{className:"char-meta",children:[ae.race," | ",ae.class," | Lvl ",ae.level]})]})]},ae.id)),s.length===0&&c.jsx("p",{style:{textAlign:"center",color:"#555",marginTop:20},children:"A guilda est vazia."})]}),i&&c.jsx("button",{className:"sync-btn",onClick:M,children:" Sincronizar com Banco de Dados"}),u&&c.jsxs("div",{className:"member-modal",children:[c.jsx("button",{className:"close-btn",onClick:()=>f(null),children:""}),c.jsxs("div",{className:"member-header",children:[c.jsx("img",{src:u.photo||"https://via.placeholder.com/100",alt:"Char",className:"member-photo"}),c.jsxs("div",{children:[c.jsx("h2",{style:{margin:0,color:"#fff"},children:u.name}),c.jsxs("p",{style:{margin:0,color:"#aaa"},children:[u.race," - ",u.class]}),c.jsxs("p",{style:{margin:0,color:"#aaa"},children:["Nvel: ",u.level]}),u.status==="dead"&&c.jsx("p",{style:{color:"red",fontWeight:"bold",fontSize:"12px",marginTop:5},children:" MORTOS NO CONTAM HISTRIAS "}),i&&c.jsx("button",{className:"rip-btn",onClick:he,children:u.status==="dead"?"REVIVER":"MARCAR R.I.P"})]}),c.jsxs("div",{className:"mvp-box",children:[c.jsx("div",{style:{fontSize:"10px",color:"#aaa",textTransform:"uppercase"},children:"MVP Score"}),i?c.jsx("input",{type:"number",className:"mvp-input",value:u.mvpScore,onChange:ae=>V(ae.target.value)}):c.jsx("div",{className:"mvp-val",children:u.mvpScore})]})]}),c.jsx("h3",{style:{color:"#ffcc00",borderBottom:"1px solid #333",paddingBottom:"5px"},children:"Registro de Misses"}),c.jsx("div",{className:"missions-container",children:u.missions&&u.missions.length>0?u.missions.map(ae=>c.jsxs("div",{className:"mission-row",children:[c.jsxs("div",{style:{flex:1},children:[c.jsx("div",{className:"m-name",children:ae.name}),c.jsxs("div",{className:"m-rank",children:["Rank: ",ae.rank]})]}),c.jsx("div",{className:`m-status ${ae.completed?"status-success":"status-fail"}`,title:ae.completed?"Concluda":"Falha",onClick:()=>i&&K(ae.id,"completed"),children:ae.completed?"":""}),c.jsx("div",{className:`m-mvp ${ae.isMvp?"active":""}`,title:"Foi MVP?",onClick:()=>i&&K(ae.id,"isMvp"),children:""}),i&&c.jsx("div",{style:{color:"red",cursor:"pointer",marginLeft:10},onClick:()=>re(ae.id),children:""})]},ae.id)):c.jsx("p",{style:{color:"#666",textAlign:"center",marginTop:20},children:"Nenhum registro encontrado."})}),i&&c.jsxs("div",{className:"add-mission-box",children:[c.jsx("input",{className:"input-dark",style:{flex:1},placeholder:"Nome da Misso",value:g,onChange:ae=>v(ae.target.value)}),c.jsxs("select",{className:"input-dark",value:E,onChange:ae=>T(ae.target.value),children:[c.jsx("option",{children:"S"}),c.jsx("option",{children:"A"}),c.jsx("option",{children:"B"}),c.jsx("option",{children:"C"}),c.jsx("option",{children:"D"}),c.jsx("option",{children:"E"})]}),c.jsx("button",{className:"btn-gold",onClick:$,children:"+"})]})]})]})})]})},I5=({onClose:i,isMaster:e,disponibilidades:n,sessoes:s,onAddSlot:o,onUpdateSession:u,onDeleteSlot:f})=>{const[m,b]=A.useState(new Date),[g,v]=A.useState(null),[E,T]=A.useState(null),[M,G]=A.useState("20:00"),B=(O,N)=>new Date(O,N+1,0).getDate(),U=(O,N)=>new Date(O,N,1).getDay(),V=m.getFullYear(),$=m.getMonth(),K=B(V,$),re=U(V,$),he=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],ae=()=>b(new Date(V,$-1,1)),w=()=>b(new Date(V,$+1,1)),C=[...n.map(O=>({...O,type:"slot",dateObj:new Date(O.start)})),...s.map(O=>({...O,type:"session",dateObj:new Date(O.dataInicio)}))],I=()=>{const O=[];for(let N=0;N<re;N++)O.push(c.jsx("div",{className:"cal-day empty"},`empty-${N}`));for(let N=1;N<=K;N++){`${V}${String($+1).padStart(2,"0")}${String(N).padStart(2,"0")}`;const Ve=C.filter(ye=>{const ee=ye.dateObj;return ee.getDate()===N&&ee.getMonth()===$&&ee.getFullYear()===V});O.push(c.jsxs("div",{className:`cal-day ${g===N?"selected":""}`,onClick:()=>e&&v(N),children:[c.jsx("span",{className:"cal-day-number",children:N}),c.jsx("div",{className:"cal-events-list",children:Ve.map((ye,ee)=>c.jsxs("div",{className:`cal-event-pill ${ye.type}`,onClick:me=>{me.stopPropagation(),T(ye)},title:ye.type==="session"?ye.missaoNome:"Disponvel",children:[ye.dateObj.getHours(),":",String(ye.dateObj.getMinutes()).padStart(2,"0")," ",ye.type==="session"?"":""]},ee))})]},N))}return O},k=()=>{if(!g)return;const O=new Date(V,$,g),[N,Ve]=M.split(":");O.setHours(N,Ve),o(O.toISOString()),v(null)},j=O=>{E&&E.type==="session"&&(u(E.id,O),T(null))};return c.jsxs("div",{className:"ff-modal-overlay-fixed",style:{zIndex:1e4},children:[c.jsxs("div",{className:"ff-modal-calendar ff-card",children:[c.jsxs("div",{className:"cal-header",children:[c.jsx("button",{onClick:ae,children:""}),c.jsxs("h2",{children:[he[$]," ",V]}),c.jsx("button",{onClick:w,children:""}),c.jsx("button",{className:"btn-close-cal",onClick:i,children:"FECHAR"})]}),c.jsxs("div",{className:"cal-grid-header",children:[c.jsx("div",{children:"DOM"}),c.jsx("div",{children:"SEG"}),c.jsx("div",{children:"TER"}),c.jsx("div",{children:"QUA"}),c.jsx("div",{children:"QUI"}),c.jsx("div",{children:"SEX"}),c.jsx("div",{children:"SB"})]}),c.jsx("div",{className:"cal-grid-body",children:I()}),g&&e&&c.jsx("div",{className:"mini-modal-overlay",children:c.jsxs("div",{className:"mini-modal",children:[c.jsx("h4",{children:"Marcar Disponibilidade"}),c.jsxs("p",{children:["Dia ",g," de ",he[$]]}),c.jsx("label",{children:"Horrio de Incio:"}),c.jsx("input",{type:"time",value:M,onChange:O=>G(O.target.value),className:"ff-input-dark"}),c.jsxs("div",{className:"row-btns",children:[c.jsx("button",{className:"btn-cyan",onClick:k,children:"CRIAR"}),c.jsx("button",{className:"btn-red",onClick:()=>v(null),children:"CANCELAR"})]})]})}),E&&c.jsx("div",{className:"mini-modal-overlay",children:c.jsxs("div",{className:"mini-modal detail",children:[E.type==="session"?c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{color:"#f44"},children:" SESSO AGENDADA"}),c.jsx("h3",{children:E.missaoNome}),c.jsxs("p",{children:[c.jsx("strong",{children:"Horrio Atual:"})," ",new Date(E.dataInicio).toLocaleString()]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Mestre:"})," ",E.mestreNome||"Voc"]}),c.jsxs("div",{className:"detail-players",children:[c.jsx("strong",{children:"Jogadores:"}),E.participantes?.join(", ")||"Nenhum"]}),e&&c.jsxs("div",{className:"edit-time-box",children:[c.jsx("label",{children:"Alterar Horrio:"}),c.jsx("input",{type:"datetime-local",className:"ff-input-dark",onChange:O=>j(O.target.value)}),c.jsx("small",{children:"Selecione para mudar imediatamente."})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{color:"#0f0"},children:" DISPONIBILIDADE"}),c.jsxs("p",{children:[c.jsx("strong",{children:"Data:"})," ",new Date(E.start).toLocaleString()]}),c.jsx("p",{children:"Horrio reservado para futuras sesses."}),e&&c.jsx("button",{className:"btn-red",onClick:()=>{f(E.id),T(null)},children:"REMOVER DISPONIBILIDADE"})]}),c.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"10px",width:"100%"},onClick:()=>T(null),children:"FECHAR"})]})})]}),c.jsx("style",{children:`
        .ff-modal-calendar { width: 90vw; height: 90vh; background: #0f172a; border: 2px solid #fbbf24; display: flex; flex-direction: column; padding: 20px; box-shadow: 0 0 50px #000; }
        .cal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; font-size: 1.5rem; color: #fbbf24; }
        .cal-header button { background: transparent; border: 1px solid #fbbf24; color: #fbbf24; cursor: pointer; padding: 5px 15px; font-weight: bold; }
        .btn-close-cal { background: #f44 !important; border-color: #f44 !important; color: #fff !important; }
        
        .cal-grid-header { display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; color: #94a3b8; font-weight: bold; margin-bottom: 10px; }
        .cal-grid-body { display: grid; grid-template-columns: repeat(7, 1fr); grid-auto-rows: 1fr; gap: 5px; flex: 1; overflow-y: auto; }
        
        .cal-day { background: #1e293b; border: 1px solid #334155; padding: 5px; min-height: 100px; position: relative; cursor: pointer; transition: 0.2s; display: flex; flex-direction: column; }
        .cal-day:hover { background: #334155; }
        .cal-day.empty { background: transparent; border: none; cursor: default; }
        .cal-day.selected { border-color: #00f2ff; background: rgba(0, 242, 255, 0.1); }
        .cal-day-number { font-weight: bold; color: #64748b; font-size: 0.9rem; align-self: flex-end; }
        
        .cal-events-list { display: flex; flex-direction: column; gap: 3px; margin-top: 5px; }
        .cal-event-pill { font-size: 0.75rem; padding: 2px 4px; border-radius: 3px; cursor: pointer; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .cal-event-pill.session { background: #7f1d1d; color: #fca5a5; border: 1px solid #f87171; }
        .cal-event-pill.slot { background: #064e3b; color: #6ee7b7; border: 1px solid #34d399; }

        .mini-modal-overlay { position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; z-index: 20; }
        .mini-modal { background: #020617; border: 1px solid #fbbf24; padding: 20px; width: 300px; border-radius: 8px; box-shadow: 0 0 20px #000; }
        .mini-modal.detail { width: 400px; }
        .mini-modal h4 { color: #fbbf24; margin: 0 0 10px 0; }
        .row-btns { display: flex; gap: 10px; margin-top: 15px; }
        .edit-time-box { margin-top: 15px; border-top: 1px solid #333; padding-top: 10px; }
      `})]})},a1=({expiry:i})=>{const[e,n]=A.useState("");return A.useEffect(()=>{const s=setInterval(()=>{const o=new Date().getTime(),u=new Date(i).getTime()-o;if(u<0)n("EXPIRADA"),clearInterval(s);else{const f=Math.floor(u/864e5),m=Math.floor(u%(1e3*60*60*24)/(1e3*60*60)),b=Math.floor(u%(1e3*60*60)/(1e3*60));n(`${f}d ${m}h ${b}m`)}},1e3);return()=>clearInterval(s)},[i]),c.jsxs("span",{className:"mission-timer",children:[" ",e]})},j5=i=>i?{__html:i.replace(/\*(.*?)\*/g,"<strong>$1</strong>").replace(/_(.*?)_/g,"<em>$1</em>").replace(/\n/g,"<br />")}:{__html:""};function k5(){const i=ns(),[e,n]=A.useState(null),[s,o]=A.useState([]),[u,f]=A.useState([]),[m,b]=A.useState([]),[g,v]=A.useState([]),[E,T]=A.useState([]),[M,G]=A.useState(!0),[B,U]=A.useState(!1),[V,$]=A.useState(!1),[K,re]=A.useState(!1),[he,ae]=A.useState(!1),[w,C]=A.useState(!1),[I,k]=A.useState(!1),[j,O]=A.useState(null),[N,Ve]=A.useState(null),[ye,ee]=A.useState(null),[me,Re]=A.useState(null),[De,Qe]=A.useState(null),[z,se]=A.useState(""),[le,Q]=A.useState(""),[ie,ge]=A.useState([]),[Ee,He]=A.useState([]),[we,it]=A.useState({nome:"",local:"",contratante:"",descricaoMissao:"",objetivosMissao:"",requisitos:"",grupo:"",recompensa:"",rank:"E",imagem:"",duracao:"",gilRecompensa:""}),[st,Ct]=A.useState({missaoId:"",selectedSlotId:"",mapas:[],cenarios:[],monstros:[],npcs:[],jogadores:[]}),[At,Xt]=A.useState(""),[Ut,Jt]=A.useState("mapas"),[Y,Ne]=A.useState(()=>localStorage.getItem("mestreAssinatura")||"Narrador");A.useEffect(()=>{localStorage.setItem("mestreAssinatura",Y)},[Y]),A.useEffect(()=>{const P=setTimeout(()=>{U(!0)},2e3);return()=>clearTimeout(P)},[]),A.useEffect(()=>{Qt&&Qt.pause();const P=df(Vt,_e=>{if(_e){n(_e);const Ue=Nn(Rt(xe,"missoes"),Na("mestreId","==",_e.uid),jr("createdAt","desc")),Bt=Nn(Rt(xe,"resenhas"),Na("mestreId","==",_e.uid),jr("createdAt","desc")),vt=Nn(Rt(xe,"sessoes"),Na("mestreId","==",_e.uid),jr("dataInicio","asc")),rt=Nn(Rt(xe,"disponibilidades"),Na("mestreId","==",_e.uid)),cn=Nn(Rt(xe,"characters")),Pt=Rn(Ue,q=>o(q.docs.map(be=>({id:be.id,...be.data()})))),Ga=Rn(Bt,q=>f(q.docs.map(be=>({id:be.id,...be.data()})))),Hn=Rn(vt,q=>b(q.docs.map(be=>({id:be.id,...be.data()})))),$a=Rn(rt,q=>T(q.docs.map(be=>({id:be.id,...be.data()})))),H=Rn(cn,q=>{v(q.docs.map(be=>({id:be.id,...be.data()}))),G(!1)});return()=>{Pt(),Ga(),Hn(),H(),$a()}}else G(!1),i("/login")});return()=>P()},[i]),A.useEffect(()=>{if(j){const P=g.find(_e=>_e.id===j.id);P&&O(P)}},[g]);const ve=async P=>{if(P.preventDefault(),!!e)try{const _e=(we.duracao.match(/(\d+)w/)||[0,0])[1]*6048e5+(we.duracao.match(/(\d+)d/)||[0,0])[1]*864e5+(we.duracao.match(/(\d+)h/)||[0,0])[1]*36e5;await Bs(Rt(xe,"missoes"),{...we,mestreNome:Y,mestreId:e.uid,createdAt:Gn(),expiraEm:new Date(Date.now()+(_e||36e5)).toISOString()}),$(!1),it({nome:"",local:"",contratante:"",descricaoMissao:"",objetivosMissao:"",requisitos:"",grupo:"",recompensa:"",rank:"E",imagem:"",duracao:"",gilRecompensa:""})}catch(_e){alert("Erro ao forjar cartaz: "+_e.message)}},Se=async()=>{if(!le||!z||!e)return alert("Preencha ttulo e contedo!");try{const P=new Date;P.setDate(P.getDate()+7),await Bs(Rt(xe,"resenhas"),{titulo:le,conteudo:z,mestre:Y,mestreId:e.uid,destinatarios:ie,createdAt:Gn(),expiraEm:P.toISOString()}),re(!1),se(""),Q(""),ge([])}catch{alert("Erro ao publicar.")}},Ze=async(P,_e)=>{if(window.confirm(`Remover ${_e.nome} da misso?`)){const Ue=je(xe,"missoes",P);await qe(Ue,{candidatos:Sc(_e)})}},Le=()=>{At&&(Ct(P=>({...P,[Ut]:[...P[Ut],At]})),Xt(""))},It=(P,_e)=>{Ct(Ue=>({...Ue,[P]:Ue[P].filter((Bt,vt)=>vt!==_e)}))},nt=async P=>{if(e)try{await Bs(Rt(xe,"disponibilidades"),{mestreId:e.uid,start:P,status:"free"}),alert("Disponibilidade criada!")}catch(_e){alert("Erro ao criar slot: "+_e.message)}},Zt=async P=>{if(window.confirm("Remover esta disponibilidade?"))try{await hi(je(xe,"disponibilidades",P))}catch(_e){alert("Erro ao remover: "+_e.message)}},de=async(P,_e)=>{if(_e)try{const Ue=new Date(_e),Bt=new Date(Ue.getTime()+1440*60*1e3);await qe(je(xe,"sessoes",P),{dataInicio:_e,expiraEm:Bt.toISOString()}),alert("Horrio da sesso atualizado!")}catch(Ue){alert("Erro ao atualizar horrio: "+Ue.message)}},Ce=async P=>{if(P.preventDefault(),!st.missaoId||!st.selectedSlotId||!e)return alert("Selecione a misso e um horrio disponvel!");try{const _e=E.find(rt=>rt.id===st.selectedSlotId);if(!_e)return alert("Horrio invlido ou j ocupado.");const Ue=s.find(rt=>rt.id===st.missaoId),Bt=new Date(_e.start),vt=new Date(Bt.getTime()+1440*60*1e3);await Bs(Rt(xe,"sessoes"),{missaoId:st.missaoId,missaoNome:Ue?Ue.nome:"Misso Desconhecida",mestreId:e.uid,dataInicio:_e.start,expiraEm:vt.toISOString(),participantes:Ee,mapas:st.mapas,cenarios:st.cenarios,monstros:st.monstros,npcs:st.npcs,jogadores:st.jogadores,connected_players:[],dm_online:!1,createdAt:Gn()}),await hi(je(xe,"disponibilidades",st.selectedSlotId)),ae(!1),Ct({missaoId:"",selectedSlotId:"",maps:[],cenarios:[],monstros:[],npcs:[],jogadores:[]}),He([]),alert("Sesso agendada com sucesso!")}catch(_e){alert("Erro ao criar sesso: "+_e.message)}},Me=P=>{i("/mestre-vtt")};return M||!B?c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",background:"radial-gradient(circle at center, #001a33 0%, #000000 100%)",color:"#ffcc00",fontFamily:"Cinzel, serif",zIndex:9999,position:"fixed",top:0,left:0},children:[c.jsx("img",{src:Df,alt:"Carregando...",style:{width:"120px",marginBottom:"20px"}}),c.jsx("p",{style:{fontSize:"18px",letterSpacing:"4px",textTransform:"uppercase",animation:"pulseText 2s infinite ease-in-out"},children:"Sintonizando ter..."}),c.jsx("style",{children:`
          @keyframes pulseText { 
            0% { opacity: 0.4; transform: scale(0.98); } 
            50% { opacity: 1; transform: scale(1.02); } 
            100% { opacity: 0.4; transform: scale(0.98); } 
          }
        `})]}):c.jsxs("div",{className:"mestre-container",children:[c.jsx("div",{className:"mestre-bg-image-full",style:{backgroundImage:`url(${aw})`}}),c.jsxs("div",{className:"mestre-content",children:[c.jsxs("div",{className:"top-bar-flex",children:[c.jsx("h1",{className:"ff-title",children:"HUB DO NARRADOR"}),c.jsxs("div",{className:"mestre-identity-box ff-card fade-in",children:[c.jsx("label",{children:"ASSINATURA DO MESTRE:"}),c.jsx("input",{type:"text",value:Y,onChange:P=>Ne(P.target.value)})]})]}),c.jsxs("div",{className:"mestre-grid",children:[c.jsxs("div",{className:"ff-card board-column",children:[c.jsxs("div",{className:"card-header no-border",children:[c.jsx("h3",{children:"QUADRO DE MISSES"}),c.jsxs("button",{className:"ff-add-btn",onClick:()=>$(!0),children:[c.jsx("span",{children:"+"})," ADICIONAR CARTAZ"]})]}),c.jsx("div",{className:"mission-scroll",children:s.map(P=>{const _e=parseInt(P.grupo)||0,Ue=P.candidatos?P.candidatos.length:0,Bt=_e>0?Ue/_e*100:0,vt=Ue>=_e&&_e>0;return c.jsxs("div",{className:`mission-poster rank-${P.rank}`,children:[c.jsx("div",{className:"poster-rank-label-fixed",children:P.rank}),c.jsxs("span",{className:"mestre-tag",children:["Narrador: ",P.mestreNome]}),c.jsx("h4",{children:P.nome}),c.jsxs("p",{className:"gil-recompensa",children:[" Recompensa: ",P.gilRecompensa," Gil"]}),c.jsxs("div",{className:"vagas-container",children:[c.jsxs("div",{className:"vagas-labels",children:[c.jsx("span",{children:"JOGADORES:"}),c.jsxs("span",{style:{color:vt?"#f44":"#0f0"},children:[Ue," / ",_e]})]}),c.jsx("div",{className:"vagas-track",children:c.jsx("div",{className:"vagas-fill",style:{width:`${Bt}%`,background:vt?"#f44":"#00f2ff"}})})]}),P.candidatos&&P.candidatos.length>0&&c.jsxs("div",{className:"candidates-mini-box",children:[c.jsx("strong",{children:"Candidatos:"}),P.candidatos.map(rt=>c.jsxs("div",{className:"cand-row-master",children:[c.jsxs("span",{style:{color:rt.isLeader?"#ffcc00":"#ccc"},children:[rt.isLeader&&""," ",rt.nome," (",rt.classe,")"]}),c.jsx("button",{className:"btn-kick-x",title:"Remover Jogador",onClick:()=>Ze(P.id,rt),children:""})]},rt.uid))]}),c.jsx(a1,{expiry:P.expiraEm}),c.jsxs("div",{className:"poster-actions",children:[c.jsx("button",{className:"btn-cyan",onClick:()=>Re(P.imagem),children:"CARTAZ"}),c.jsx("button",{className:"btn-cyan",onClick:()=>Ve(P),children:"DETALHES"}),c.jsx("button",{className:"btn-red",onClick:()=>hi(je(xe,"missoes",P.id)),children:"EXCLUIR"})]})]},P.id)})})]}),c.jsxs("div",{className:"ff-card sanchez-card board-column",children:[c.jsxs("div",{className:"sanchez-header-top no-border",children:[c.jsx("h3",{children:"RESENHA DO SANCHES"}),c.jsx("button",{className:"ff-add-btn-gold-small",onClick:()=>re(!0),children:"+ CRIAR NOVA RESENHA"})]}),c.jsx("div",{className:"mission-scroll",children:u.map(P=>c.jsxs("div",{className:"resenha-item-card",children:[c.jsx("h4",{children:P.titulo}),c.jsx(a1,{expiry:P.expiraEm}),c.jsxs("div",{className:"poster-actions",children:[c.jsx("button",{className:"btn-cyan",onClick:()=>ee(P),children:"VISUALIZAR"}),c.jsx("button",{className:"btn-red",onClick:()=>hi(je(xe,"resenhas",P.id)),children:"EXCLUIR"})]})]},P.id))})]}),c.jsxs("div",{className:"ff-card board-column",children:[c.jsxs("div",{className:"card-header no-border",style:{display:"flex",gap:"5px"},children:[c.jsx("h3",{children:"SESSES DE JOGO"}),c.jsxs("div",{style:{display:"flex",gap:"5px"},children:[c.jsx("button",{className:"ff-add-btn small-btn",onClick:()=>C(!0),children:" AGENDA"}),c.jsx("button",{className:"ff-add-btn small-btn",onClick:()=>ae(!0),children:"+ SESSO"})]})]}),c.jsx("div",{className:"mission-scroll",children:m.length===0?c.jsx("div",{className:"empty-instancia",children:"NENHUMA INSTNCIA ATIVA"}):m.map(P=>c.jsxs("div",{className:"sessao-card",children:[c.jsx("div",{className:"sessao-status",children:" AO VIVO / AGENDADA"}),c.jsx("h4",{className:"sessao-title",children:P.missaoNome}),c.jsxs("div",{className:"sessao-info",children:[c.jsxs("span",{children:[" ",new Date(P.dataInicio).toLocaleString()]}),c.jsxs("span",{className:"sessao-players",children:[" ",P.participantes?.length||0," Jogadores"]})]}),c.jsxs("div",{className:"sessao-assets-count",children:[" ",(P.mapas?.length||0)+(P.cenarios?.length||0)," Imagens"]}),c.jsxs("div",{className:"poster-actions",style:{marginTop:"15px"},children:[c.jsx("button",{className:"btn-cyan",onClick:()=>Qe(P),children:" MEMBROS"}),c.jsx("button",{className:"btn-play-vtt",onClick:()=>Me(),children:" ACESSAR VTT"}),c.jsx("button",{className:"btn-red",onClick:()=>hi(je(xe,"sessoes",P.id)),children:"CANCELAR"})]})]},P.id))})]})]})]}),c.jsx("button",{className:"fichas-trigger-btn",onClick:()=>k(!0),title:"Acessar Fichas",children:c.jsx("img",{src:C5,alt:"Fichas"})}),c.jsx(sw,{isMaster:!0})," ",c.jsx(Vg,{isMestre:!0}),c.jsx(iw,{}),w&&c.jsx(I5,{onClose:()=>C(!1),isMaster:!0,disponibilidades:E,sessoes:m,onAddSlot:nt,onUpdateSession:de,onDeleteSlot:Zt}),I&&c.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>k(!1),children:c.jsxs("div",{className:"ff-modal-scrollable ff-card fichas-modal-container",onClick:P=>P.stopPropagation(),children:[c.jsx("h3",{className:"modal-title-ff",children:"PERSONAGENS REGISTRADOS"}),c.jsx("div",{className:"fichas-grid-large",children:g.map(P=>c.jsxs("div",{className:"ficha-list-item",children:[c.jsxs("div",{className:"ficha-row-name",children:[c.jsx("strong",{children:P.name}),c.jsxs("small",{children:[P.race," // ",P.class]})]}),c.jsx("button",{className:"btn-cyan",onClick:()=>{O(P),k(!1)},children:"ABRIR FICHA "})]},P.id))}),c.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"20px"},onClick:()=>k(!1),children:"FECHAR"})]})}),j&&c.jsx(Lg,{characterData:j,isMaster:!0,onClose:()=>O(null)}),V&&c.jsx("div",{className:"ff-modal-overlay-fixed",children:c.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[c.jsx("h3",{className:"modal-title-ff",children:"NOVA MISSO"}),c.jsxs("form",{onSubmit:ve,children:[c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"NOME DA MISSO"}),c.jsx("input",{placeholder:"Ttulo...",value:we.nome,onChange:P=>it({...we,nome:P.target.value}),required:!0})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"LOCAL"}),c.jsx("input",{placeholder:"Onde ocorre...",value:we.local,onChange:P=>it({...we,local:P.target.value})})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"CONTRATANTE"}),c.jsx("input",{placeholder:"Quem paga...",value:we.contratante,onChange:P=>it({...we,contratante:P.target.value})})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"DESCRIO DA MISSO"}),c.jsx("textarea",{className:"tall-area-dark",placeholder:"Detalhes da histria e contexto...",value:we.descricaoMissao,onChange:P=>it({...we,descricaoMissao:P.target.value})})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"OBJETIVOS DA MISSO"}),c.jsx("textarea",{className:"tall-area-dark",placeholder:"O que deve ser feito passo a passo...",value:we.objetivosMissao,onChange:P=>it({...we,objetivosMissao:P.target.value})})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"REQUISITOS DA MISSO"}),c.jsx("textarea",{className:"tall-area-dark",placeholder:"O que  necessrio para aceitar...",value:we.requisitos,onChange:P=>it({...we,requisitos:P.target.value})})]}),c.jsxs("div",{className:"row-double-ff",children:[c.jsxs("div",{className:"field-group",children:[c.jsx("label",{children:"GRUPO MXIMO"}),c.jsx("input",{placeholder:"Ex: 4",value:we.grupo,onChange:P=>it({...we,grupo:P.target.value})})]}),c.jsxs("div",{className:"field-group",children:[c.jsx("label",{children:"RANK"}),c.jsx("select",{value:we.rank,onChange:P=>it({...we,rank:P.target.value}),children:["E","D","C","B","A","S","SS","SC"].map(P=>c.jsxs("option",{value:P,children:["RANK ",P]},P))})]})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"RECOMPENSAS EXTRAS"}),c.jsx("textarea",{className:"tall-area-dark",placeholder:"Itens, especiarias...",value:we.recompensa,onChange:P=>it({...we,recompensa:P.target.value})})]}),c.jsxs("div",{className:"row-double-ff",children:[c.jsxs("div",{className:"field-group",children:[c.jsx("label",{children:"GIL"}),c.jsx("input",{type:"text",className:"gil-input",placeholder:"Ex: 5000",value:we.gilRecompensa,onChange:P=>it({...we,gilRecompensa:P.target.value.replace(/\D/g,"")})})]}),c.jsxs("div",{className:"field-group",children:[c.jsx("label",{children:"DURAO"}),c.jsx("input",{placeholder:"Ex: 1d 10h",value:we.duracao,onChange:P=>it({...we,duracao:P.target.value}),required:!0})]})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"IMAGEM"}),c.jsx("input",{placeholder:"Link Imgur...",value:we.imagem,onChange:P=>it({...we,imagem:P.target.value})})]}),c.jsxs("div",{className:"btn-group-ff",children:[c.jsx("button",{type:"submit",className:"btn-forjar-main",children:"FORJAR MISSO"}),c.jsx("button",{type:"button",className:"btn-cancelar-main",onClick:()=>$(!1),children:"FECHAR"})]})]})]})}),K&&c.jsx("div",{className:"ff-modal-overlay-fixed",children:c.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[c.jsx("h3",{className:"modal-title-ff",children:"ESCREVER CRNICA"}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"TTULO"}),c.jsx("input",{className:"ff-modal-input-dark",value:le,onChange:P=>Q(P.target.value)})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"CORPO"}),c.jsx("textarea",{className:"tall-area-ff-dark",value:z,onChange:P=>se(P.target.value)})]}),c.jsxs("div",{className:"player-selector-box-fixed",children:[c.jsx("label",{children:"DESTINATRIOS:"}),c.jsx("div",{className:"destinatarios-grid-fixed",children:g.map(P=>c.jsxs("label",{className:"chip-label-ff",children:[c.jsx("input",{type:"checkbox",checked:ie.includes(P.name),onChange:()=>ie.includes(P.name)?ge(ie.filter(_e=>_e!==P.name)):ge([...ie,P.name])})," ",P.name]},P.id))})]}),c.jsxs("div",{className:"btn-group-ff",children:[c.jsx("button",{className:"btn-forjar-main",onClick:Se,children:"PUBLICAR"}),c.jsx("button",{className:"btn-cancelar-main",onClick:()=>re(!1),children:"FECHAR"})]})]})}),he&&c.jsx("div",{className:"ff-modal-overlay-fixed",children:c.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[c.jsx("h3",{className:"modal-title-ff",children:"CRIAR NOVA SESSO"}),c.jsxs("form",{onSubmit:Ce,children:[c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"SELECIONAR MISSO"}),c.jsxs("select",{className:"ff-select-dark",value:st.missaoId,onChange:P=>Ct({...st,missaoId:P.target.value}),required:!0,children:[c.jsx("option",{value:"",children:"-- Escolha --"}),s.map(P=>c.jsxs("option",{value:P.id,children:[P.nome," (Rank ",P.rank,")"]},P.id))]})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"HORRIO DISPONVEL (DA AGENDA)"}),c.jsxs("select",{className:"ff-select-dark",value:st.selectedSlotId,onChange:P=>Ct({...st,selectedSlotId:P.target.value}),required:!0,children:[c.jsx("option",{value:"",children:"-- Selecione um Horrio --"}),E.filter(P=>new Date(P.start)>new Date).sort((P,_e)=>new Date(P.start)-new Date(_e.start)).map(P=>c.jsx("option",{value:P.id,children:new Date(P.start).toLocaleString()},P.id))]}),c.jsx("small",{style:{color:"#666",fontStyle:"italic"},children:"*Crie horrios no boto AGENDA se a lista estiver vazia."})]}),c.jsxs("div",{className:"player-selector-box-fixed",children:[c.jsx("label",{children:"JOGADORES:"}),c.jsx("div",{className:"destinatarios-grid-fixed",children:g.map(P=>c.jsxs("label",{className:"chip-label-ff",children:[c.jsx("input",{type:"checkbox",checked:Ee.includes(P.name),onChange:()=>Ee.includes(P.name)?He(Ee.filter(_e=>_e!==P.name)):He([...Ee,P.name])})," ",P.name," (",P.class,")"]},P.id))})]}),c.jsxs("div",{className:"upload-section-box",children:[c.jsx("h4",{className:"upload-section-title",children:"IMPORTAR IMAGENS"}),c.jsxs("div",{className:"link-import-row",children:[c.jsx("input",{className:"ff-input-dark",placeholder:"Link da imagem...",value:At,onChange:P=>Xt(P.target.value)}),c.jsxs("select",{className:"ff-select-dark small-select",value:Ut,onChange:P=>Jt(P.target.value),children:[c.jsx("option",{value:"mapas",children:"Tabletop"}),c.jsx("option",{value:"cenarios",children:"Cenrio"}),c.jsx("option",{value:"npcs",children:"NPCs"})]}),c.jsx("button",{type:"button",className:"btn-cyan",onClick:Le,children:"+"})]}),c.jsxs("div",{className:"assets-lists",children:[st.mapas.map((P,_e)=>c.jsxs("div",{className:"asset-item",children:[c.jsxs("span",{className:"truncate-link",children:["[TABLETOP] ",P]}),c.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>It("mapas",_e),children:""})]},`map-${_e}`)),st.cenarios.map((P,_e)=>c.jsxs("div",{className:"asset-item",children:[c.jsxs("span",{className:"truncate-link",children:["[CENRIO] ",P]}),c.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>It("cenarios",_e),children:""})]},`cen-${_e}`)),st.npcs.map((P,_e)=>c.jsxs("div",{className:"asset-item",children:[c.jsxs("span",{className:"truncate-link",children:["[NPC] ",P]}),c.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>It("npcs",_e),children:""})]},`npc-${_e}`))]})]}),c.jsxs("div",{className:"btn-group-ff",children:[c.jsx("button",{type:"submit",className:"btn-forjar-main",children:"AGENDAR"}),c.jsx("button",{type:"button",className:"btn-cancelar-main",onClick:()=>ae(!1),children:"CANCELAR"})]})]})]})}),De&&c.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>Qe(null),children:c.jsxs("div",{className:"ff-modal-scrollable ff-card",onClick:P=>P.stopPropagation(),style:{height:"auto",maxHeight:"500px"},children:[c.jsx("h3",{className:"modal-title-ff",children:"MEMBROS ALOCADOS"}),c.jsx("div",{className:"destinatarios-grid-fixed",children:De.participantes?.map((P,_e)=>c.jsxs("div",{className:"chip-label-ff",style:{cursor:"default",color:"#fff",borderColor:"#00f2ff"},children:[" ",P]},_e))}),c.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"20px",width:"100%"},onClick:()=>Qe(null),children:"FECHAR"})]})}),N&&c.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>Ve(null),children:c.jsxs("div",{className:"ff-modal ff-card detail-view-main",onClick:P=>P.stopPropagation(),children:[c.jsxs("div",{className:"detail-header-modern",children:[c.jsx("div",{className:`detail-rank-badge rank-${N.rank}`,children:N.rank}),c.jsxs("div",{className:"detail-title-col",children:[c.jsx("h2",{children:N.nome}),c.jsxs("span",{className:"detail-narrator",children:["Narrador: ",N.mestreNome]})]})]}),c.jsxs("div",{className:"detail-body-grid",children:[c.jsxs("div",{className:"detail-info-row",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:" LOCAL"}),c.jsx("span",{children:N.local||"Desconhecido"})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:" CONTRATANTE"}),c.jsx("span",{children:N.contratante||"Annimo"})]})]}),c.jsxs("div",{className:"detail-section",children:[c.jsx("label",{className:"section-label",children:"VAGAS"}),c.jsxs("div",{style:{background:"#111",padding:"10px",borderRadius:"4px"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",color:"#aaa",marginBottom:"5px"},children:[c.jsx("span",{children:"STATUS DO GRUPO"}),c.jsxs("span",{children:[N.candidatos?N.candidatos.length:0," / ",N.grupo||"?"]})]}),c.jsx("div",{style:{width:"100%",height:"6px",background:"#333",borderRadius:"3px"},children:c.jsx("div",{style:{width:`${Math.min((N.candidatos?.length||0)/(parseInt(N.grupo)||1)*100,100)}%`,height:"100%",background:N.candidatos?.length>=parseInt(N.grupo)?"#f44":"#00f2ff"}})})]})]}),c.jsxs("div",{className:"detail-section",children:[c.jsx("label",{className:"section-label",children:" DESCRIO"}),c.jsx("p",{className:"section-text",children:N.descricaoMissao})]}),c.jsxs("div",{className:"detail-section",children:[c.jsx("label",{className:"section-label",children:" OBJETIVOS"}),c.jsx("p",{className:"section-text",children:N.objetivosMissao})]}),c.jsxs("div",{className:"detail-section",children:[c.jsx("label",{className:"section-label",children:" REQUISITOS"}),c.jsx("p",{className:"section-text",children:N.requisitos})]}),c.jsxs("div",{className:"detail-section reward-section",children:[c.jsx("label",{className:"section-label",children:" RECOMPENSAS"}),c.jsxs("div",{className:"reward-content-box",children:[c.jsxs("div",{className:"gil-display-row",children:[c.jsx("span",{className:"gil-icon",children:""})," ",c.jsxs("span",{className:"gil-value",children:[N.gilRecompensa||0," GIL"]})]}),N.recompensa&&c.jsx("div",{className:"extra-rewards-list",children:N.recompensa.split(`
`).map((P,_e)=>c.jsxs("div",{className:"reward-item",children:[" ",P]},_e))})]})]})]}),c.jsx("button",{className:"ff-final-close-btn",onClick:()=>Ve(null),children:"FECHAR RELATRIO"})]})}),me&&c.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>Re(null),children:c.jsxs("div",{className:"lightbox-wrap",children:[c.jsx("button",{className:"close-lightbox",onClick:()=>Re(null),children:""}),c.jsx("img",{src:me,alt:"Cartaz",className:"cartaz-full-view"})]})}),ye&&c.jsx("div",{className:"fft-modal-overlay",onClick:()=>ee(null),children:c.jsxs("div",{className:"fft-dialog-box",onClick:P=>P.stopPropagation(),children:[c.jsxs("div",{className:"fft-portrait-section",children:[c.jsx("div",{className:"fft-portrait-frame",children:c.jsx("img",{src:Tm,alt:"Sanchez"})}),c.jsx("div",{className:"fft-name-plate",children:"SANCHEZ"})]}),c.jsxs("div",{className:"fft-content-section",children:[c.jsx("h2",{className:"fft-title",children:ye.titulo}),c.jsx("div",{className:"fft-scroll-text",dangerouslySetInnerHTML:j5(ye.conteudo)})]}),c.jsx("button",{className:"fft-close-btn",onClick:()=>ee(null),children:"X"})]})}),c.jsx("style",{children:`
        /* --- ESTILOS PRINCIPAIS MESTRE --- */
        .mestre-container { width: 100vw; height: 100vh; overflow: hidden; position: relative; background: #020617; font-family: 'Cinzel', serif; color: #e2e8f0; }
        .mestre-bg-image-full { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.3; z-index: 0; animation: slowPan 60s infinite alternate; }
        @keyframes slowPan { from { transform: scale(1.0); } to { transform: scale(1.1); } }
        
        .mestre-content { position: relative; z-index: 10; height: 100%; display: flex; flex-direction: column; padding: 20px; box-sizing: border-box; }
        .top-bar-flex { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .ff-title { font-size: 2rem; color: #fbbf24; text-shadow: 0 0 10px rgba(251, 191, 36, 0.5); letter-spacing: 4px; margin: 0; }
        .mestre-identity-box { padding: 10px 20px; display: flex; align-items: center; gap: 10px; background: rgba(0,0,0,0.6); border: 1px solid #fbbf24; border-radius: 4px; }
        .mestre-identity-box label { font-size: 0.8rem; color: #fbbf24; font-weight: bold; }
        .mestre-identity-box input { background: transparent; border: none; border-bottom: 1px solid #555; color: #fff; font-family: 'Cinzel', serif; text-align: center; width: 150px; }
        
        .mestre-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; flex: 1; min-height: 0; }
        .board-column { display: flex; flex-direction: column; height: 100%; background: rgba(15, 23, 42, 0.85); border: 1px solid #334155; border-radius: 8px; overflow: hidden; backdrop-filter: blur(5px); box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        .card-header { padding: 15px; border-bottom: 1px solid #334155; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.3); }
        .card-header h3 { margin: 0; color: #e2e8f0; font-size: 1rem; letter-spacing: 2px; }
        .no-border { border-bottom: none !important; }
        
        .mission-scroll { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 15px; scrollbar-width: thin; scrollbar-color: #fbbf24 #0f172a; }
        .mission-scroll::-webkit-scrollbar { width: 6px; }
        .mission-scroll::-webkit-scrollbar-thumb { background: #fbbf24; border-radius: 3px; }
        
        /* CARD MISSO */
        .mission-poster { background: #1e293b; border: 1px solid #334155; padding: 15px; border-radius: 4px; position: relative; transition: transform 0.2s; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .mission-poster:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.3); border-color: #fbbf24; }
        .mission-poster h4 { margin: 25px 0 5px 0; color: #fbbf24; font-size: 1.1rem; text-transform: uppercase; }
        .poster-rank-label-fixed { position: absolute; top: 10px; right: 10px; font-weight: 900; font-size: 1.5rem; opacity: 0.3; color: #fff; }
        .mestre-tag { font-size: 0.7rem; color: #94a3b8; display: block; margin-bottom: 5px; }
        .gil-recompensa { font-size: 0.9rem; color: #fcd34d; font-weight: bold; margin-bottom: 10px; }
        
        .vagas-container { background: #0f172a; padding: 8px; border-radius: 4px; margin-bottom: 10px; border: 1px solid #334155; }
        .vagas-labels { display: flex; justify-content: space-between; font-size: 0.7rem; color: #cbd5e1; margin-bottom: 4px; }
        .vagas-track { height: 6px; background: #334155; border-radius: 3px; overflow: hidden; }
        .vagas-fill { height: 100%; transition: width 0.3s ease; }
        
        .candidates-mini-box { background: rgba(0,0,0,0.3); padding: 8px; border-radius: 4px; margin-bottom: 10px; font-size: 0.75rem; }
        .cand-row-master { display: flex; justify-content: space-between; align-items: center; margin-top: 4px; padding-bottom: 2px; border-bottom: 1px dashed #334155; }
        .btn-kick-x { background: transparent; border: none; color: #ef4444; cursor: pointer; font-weight: bold; font-size: 14px; }
        .btn-kick-x:hover { color: #f87171; }
        
        .mission-timer { display: block; text-align: center; font-size: 0.8rem; color: #94a3b8; margin: 10px 0; font-weight: bold; }
        
        .poster-actions { display: flex; gap: 5px; justify-content: space-between; }
        .btn-cyan { flex: 1; padding: 6px; font-size: 0.7rem; background: transparent; border: 1px solid #00f2ff; color: #00f2ff; cursor: pointer; transition: 0.2s; font-weight: bold; }
        .btn-cyan:hover { background: rgba(0, 242, 255, 0.1); }
        .btn-red { flex: 1; padding: 6px; font-size: 0.7rem; background: transparent; border: 1px solid #ef4444; color: #ef4444; cursor: pointer; transition: 0.2s; font-weight: bold; }
        .btn-red:hover { background: rgba(239, 68, 68, 0.1); }
        
        /* SANCHES */
        .sanchez-card { border-color: #00f2ff; }
        .sanchez-header-top { padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #00f2ff; background: rgba(0, 242, 255, 0.05); }
        .sanchez-header-top h3 { color: #00f2ff; text-shadow: 0 0 5px rgba(0, 242, 255, 0.5); }
        .resenha-item-card { background: #0f172a; border: 1px solid #334155; padding: 15px; border-radius: 4px; border-left: 3px solid #00f2ff; }
        .resenha-item-card h4 { margin: 0 0 10px 0; color: #e2e8f0; font-size: 1rem; }
        
        /* SESSES */
        .sessao-card { background: #1e293b; border: 1px solid #fbbf24; padding: 15px; border-radius: 4px; position: relative; }
        .sessao-status { position: absolute; top: -10px; left: 10px; background: #fbbf24; color: #000; font-size: 0.6rem; font-weight: bold; padding: 2px 6px; border-radius: 2px; }
        .sessao-title { margin: 10px 0 5px 0; color: #fff; font-size: 1.1rem; }
        .sessao-info { font-size: 0.8rem; color: #94a3b8; display: flex; flex-direction: column; gap: 2px; }
        .sessao-assets-count { font-size: 0.75rem; color: #cbd5e1; margin-top: 5px; font-style: italic; }
        .btn-play-vtt { background: #fbbf24; color: #000; border: none; padding: 8px; font-weight: bold; cursor: pointer; flex: 2; transition: 0.2s; }
        .btn-play-vtt:hover { background: #f59e0b; box-shadow: 0 0 10px rgba(251, 191, 36, 0.4); }
        .empty-instancia { text-align: center; color: #475569; padding: 20px; font-style: italic; border: 2px dashed #334155; border-radius: 8px; }

        /* MODAIS GERAIS */
        .ff-modal-overlay-fixed { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 9999; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .ff-modal-scrollable { background: #0f172a; border: 1px solid #fbbf24; width: 600px; max-width: 95vw; max-height: 90vh; overflow-y: auto; padding: 25px; border-radius: 8px; box-shadow: 0 0 30px rgba(0,0,0,0.8); }
        
        /* NOVO: CLASSE ESPECFICA PARA MODAL DE FICHAS MAIOR */
        .fichas-modal-container { width: 900px; max-width: 95vw; }
        .fichas-grid-large { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; max-height: 60vh; overflow-y: auto; background: #020617; padding: 15px; border: 1px solid #334155; border-radius: 4px; }

        .modal-title-ff { color: #fbbf24; text-align: center; border-bottom: 1px solid #334155; padding-bottom: 15px; margin-bottom: 20px; letter-spacing: 2px; font-size: 1.5rem; }
        .modal-input-group { margin-bottom: 15px; }
        .modal-input-group label { display: block; color: #94a3b8; font-size: 0.8rem; margin-bottom: 5px; font-weight: bold; }
        .modal-input-group input, .modal-input-group textarea, .modal-input-group select { width: 100%; background: #1e293b; border: 1px solid #334155; color: #fff; padding: 10px; font-family: 'Lato', sans-serif; border-radius: 4px; outline: none; }
        .modal-input-group input:focus, .modal-input-group textarea:focus { border-color: #fbbf24; }
        .tall-area-dark { min-height: 100px; resize: vertical; }
        .row-double-ff { display: flex; gap: 15px; margin-bottom: 15px; }
        .field-group { flex: 1; }
        .field-group input, .field-group select { width: 100%; padding: 10px; background: #1e293b; border: 1px solid #334155; color: #fff; border-radius: 4px; }
        
        .btn-group-ff { display: flex; gap: 10px; margin-top: 20px; }
        .btn-forjar-main { flex: 1; background: #fbbf24; color: #000; border: none; padding: 12px; font-weight: bold; cursor: pointer; transition: 0.2s; font-family: 'Cinzel', serif; letter-spacing: 1px; }
        .btn-forjar-main:hover { background: #f59e0b; }
        .btn-cancelar-main { flex: 1; background: transparent; color: #94a3b8; border: 1px solid #334155; padding: 12px; font-weight: bold; cursor: pointer; transition: 0.2s; font-family: 'Cinzel', serif; }
        .btn-cancelar-main:hover { border-color: #fff; color: #fff; }

        .ff-add-btn { background: transparent; border: 1px dashed #fbbf24; color: #fbbf24; padding: 5px 15px; cursor: pointer; font-size: 0.8rem; font-weight: bold; transition: 0.2s; }
        .ff-add-btn:hover { background: rgba(251, 191, 36, 0.1); }
        .ff-add-btn-gold-small { background: transparent; border: 1px dashed #00f2ff; color: #00f2ff; padding: 5px 10px; cursor: pointer; font-size: 0.7rem; font-weight: bold; }
        .ff-add-btn-gold-small:hover { background: rgba(0, 242, 255, 0.1); }

        /* UPLOAD SECTION (SESSO) */
        .upload-section-box { border: 1px solid #334155; padding: 15px; border-radius: 4px; margin-top: 20px; background: rgba(0,0,0,0.2); }
        .upload-section-title { font-size: 0.9rem; color: #fbbf24; margin-bottom: 10px; text-transform: uppercase; border-bottom: 1px solid #334155; padding-bottom: 5px; }
        .link-import-row { display: flex; gap: 10px; margin-bottom: 10px; }
        .ff-input-dark { flex: 1; background: #1e293b; border: 1px solid #334155; color: #fff; padding: 8px; border-radius: 4px; outline: none; }
        .ff-select-dark { background: #1e293b; border: 1px solid #334155; color: #fff; padding: 8px; border-radius: 4px; outline: none; }
        .small-select { width: 120px; }
        .assets-lists { display: flex; flex-direction: column; gap: 5px; max-height: 150px; overflow-y: auto; }
        .asset-item { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); padding: 5px 10px; border-radius: 4px; font-size: 0.8rem; color: #ccc; }
        .truncate-link { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 90%; }
        .btn-remove-x { background: transparent; border: none; color: #f44; cursor: pointer; font-weight: bold; }

        /* SELEO DE JOGADORES */
        .player-selector-box-fixed { margin: 15px 0; }
        .destinatarios-grid-fixed { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; max-height: 150px; overflow-y: auto; background: #020617; padding: 10px; border: 1px solid #334155; border-radius: 4px; }
        .chip-label-ff { display: flex; align-items: center; gap: 8px; font-size: 0.8rem; color: #94a3b8; cursor: pointer; padding: 5px; border: 1px solid transparent; border-radius: 4px; transition: 0.2s; }
        .chip-label-ff:hover { background: rgba(255,255,255,0.05); }
        .chip-label-ff input { width: auto; margin: 0; }

        /* --- FINAL FANTASY TACTICS MODAL STYLE --- */
        .fft-modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 10000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        
        .fft-dialog-box {
          position: relative;
          width: 800px;
          max-width: 95vw;
          height: 450px;
          background: linear-gradient(180deg, #001a4d 0%, #000022 100%);
          border: 4px solid #b8860b;
          border-radius: 8px;
          box-shadow: 0 0 30px rgba(0,0,0,0.8), inset 0 0 50px rgba(0,0,0,0.5);
          display: flex;
          align-items: flex-start;
          padding: 30px;
          gap: 20px;
          color: #fff;
          font-family: 'Cinzel', serif;
        }

        .fft-portrait-section {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 10px;
          width: 150px;
          flex-shrink: 0;
        }

        .fft-portrait-frame {
          width: 140px;
          height: 180px;
          border: 3px solid #b8860b;
          background: #000;
          overflow: hidden;
          box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        .fft-portrait-frame img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .fft-name-plate {
          width: 100%;
          background: linear-gradient(90deg, #b8860b, #8a6e14);
          color: #000;
          text-align: center;
          font-weight: bold;
          padding: 5px 0;
          font-size: 0.9rem;
          border: 1px solid #ffd700;
          box-shadow: 0 2px 5px rgba(0,0,0,0.5);
          letter-spacing: 1px;
        }

        .fft-content-section {
          flex: 1;
          height: 100%;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        }

        .fft-title {
          margin: 0 0 15px 0;
          font-size: 1.8rem;
          color: #00f2ff;
          text-shadow: 0 0 5px rgba(0, 242, 255, 0.5);
          border-bottom: 1px solid #b8860b;
          padding-bottom: 10px;
          letter-spacing: 1px;
        }

        .fft-scroll-text {
          flex: 1;
          overflow-y: auto;
          font-family: 'Lato', sans-serif;
          font-size: 1.1rem;
          line-height: 1.6;
          color: #e0e0e0;
          padding-right: 10px;
          /* Barra invisvel mas funcional */
          scrollbar-width: none; /* Firefox */
          -ms-overflow-style: none;  /* IE 10+ */
        }
        .fft-scroll-text::-webkit-scrollbar { 
          display: none; /* Chrome/Safari */
        }

        .fft-close-btn {
          position: absolute;
          top: -15px;
          right: -15px;
          width: 40px;
          height: 40px;
          background: #b8860b;
          color: #000;
          font-weight: bold;
          border: 2px solid #fff;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          font-family: sans-serif;
          box-shadow: 0 0 10px #000;
          transition: 0.2s;
        }
        .fft-close-btn:hover {
          background: #ffd700;
          transform: scale(1.1);
        }

        /* DETALHES MISSO (MODERN DARK) */
        .detail-view-main { width: 800px; height: 600px; display: flex; flex-direction: column; overflow: hidden; background: #0f172a; border: 2px solid #fbbf24; border-radius: 8px; }
        .detail-header-modern { background: linear-gradient(90deg, #1e293b, #0f172a); padding: 20px; border-bottom: 1px solid #334155; display: flex; gap: 20px; align-items: center; }
        .detail-rank-badge { font-size: 3rem; font-weight: 900; color: rgba(255,255,255,0.1); text-shadow: 0 0 20px rgba(251, 191, 36, 0.5); }
        .detail-rank-badge.rank-S, .detail-rank-badge.rank-SS { color: #fbbf24; opacity: 1; }
        .detail-title-col h2 { margin: 0; font-size: 2rem; color: #f1f5f9; letter-spacing: 2px; }
        .detail-narrator { color: #00f2ff; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }
        .detail-body-grid { flex: 1; overflow-y: auto; padding: 30px; display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .detail-info-row { grid-column: 1 / -1; display: flex; gap: 40px; border-bottom: 1px solid #334155; padding-bottom: 20px; }
        .info-item label { color: #fbbf24; font-size: 0.7rem; font-weight: bold; display: block; margin-bottom: 5px; }
        .info-item span { color: #fff; font-size: 1.1rem; }
        .detail-section { margin-bottom: 10px; }
        .section-label { display: block; color: #94a3b8; font-size: 0.75rem; font-weight: bold; margin-bottom: 8px; border-left: 3px solid #fbbf24; padding-left: 8px; }
        .section-text { color: #cbd5e1; line-height: 1.6; font-size: 0.95rem; white-space: pre-wrap; }
        .reward-section { grid-column: 1 / -1; background: rgba(251, 191, 36, 0.05); padding: 15px; border: 1px solid rgba(251, 191, 36, 0.2); border-radius: 6px; }
        .reward-content-box { display: flex; justify-content: space-between; align-items: center; }
        .gil-display-row { font-size: 1.5rem; font-weight: bold; color: #fff; display: flex; align-items: center; gap: 10px; }
        .gil-value { color: #fcd34d; }
        .extra-rewards-list { text-align: right; color: #fbbf24; font-size: 0.9rem; font-style: italic; }
        .ff-final-close-btn { width: 100%; padding: 20px; background: #020617; color: #fff; border: none; border-top: 1px solid #334155; font-family: 'Cinzel', serif; font-weight: bold; cursor: pointer; transition: 0.2s; letter-spacing: 2px; }
        .ff-final-close-btn:hover { background: #fbbf24; color: #000; }

        /* LIGHTBOX */
        .lightbox-wrap { position: relative; max-width: 90vw; max-height: 90vh; }
        .cartaz-full-view { max-width: 100%; max-height: 90vh; border: 3px solid #ffcc00; box-shadow: 0 0 50px #000; }
        .close-lightbox { position: absolute; top: -40px; right: -40px; background: transparent; border: none; color: #fff; font-size: 40px; cursor: pointer; }
        
        /* BOTO FLUTUANTE DE FICHAS */
        .fichas-trigger-btn { position: fixed; bottom: 30px; right: 190px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #00f2ff; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; }
        .fichas-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 25px #00f2ff; }
        .fichas-trigger-btn img { width: 70%; height: 70%; object-fit: contain; }

        /* LISTA DE FICHAS */
        .ficha-list-item { display: flex; justify-content: space-between; align-items: center; background: #1e293b; padding: 15px; border-radius: 4px; margin-bottom: 10px; border: 1px solid #334155; }
        .ficha-row-name strong { display: block; color: #fff; font-size: 1.1rem; }
        .ficha-row-name small { color: #94a3b8; }
        .btn-cyan { padding: 8px 15px; font-size: 0.8rem; }
        .guild-btn-float {
            top: auto !important;
            left: auto !important;
            transform: none !important;
            bottom: 30px !important;
            right: 270px !important; /* 30 (Bazar) -> 110 (Forja) -> 190 (Ficha) -> 270 (Guilda) */
        }
      `})]})}const O5=[{id:"humes",name:"Humes",image:"races/humes.png",description:"Os Humes so a raa mais comum e predominante em Ivalice. Adaptveis, curiosos e persistentes, habitam desde as grandes capitais at vilarejos fronteirios. Sua origem  antiga e pouco documentada, mas acredita-se que foram os primeiros a construir grandes cidades e fundar os cls atuais.",characteristics:"Sua maior qualidade  a versatilidade. No se destacam naturalmente em nenhum atributo especfico, mas aprendem qualquer funo rapidamente, prosperando em qualquer lugar que chamem de lar.",racial_bonus:{value:5,detail:"5 pontos extras para distribuir livremente entre os atributos durante a criao de personagem."},base_classes:["Soldado","Mago Branco","Qumico"]},{id:"viera",name:"Viera",image:"races/viera.png",description:"Uma raa graciosa e enigmtica, marcada por longas orelhas e aparncia esguia. Vivem em florestas profundas, isoladas do mundo exterior e conectadas aos espritos da natureza. A sociedade  matriarcal.",characteristics:"Conhecidas por sentidos aguados, velocidade impressionante e habilidades mgicas refinadas. Os machos so raros e exilados ao atingirem a maturidade.",racial_bonus:{female:{VEL:3,INT:2},male_exiled:{"pontos-livres":5}},base_classes:{female:["Arqueira","Esgrimista","Curandeira"],male:["Exilado"]}},{id:"moogles",name:"Moogles",image:"races/moogles.png",description:"Pequenos, adorveis e envoltos em mistrio. Possuem corpos peludos, antenas com pompons flutuantes e pequenas asas de morcego. No possuem gnero definido.",characteristics:"Extremamente inteligentes e obcecados por tecnologia e invenes, misturando cincia com feitiaria. Carregam um estranho 'magnetismo da sorte'.",racial_bonus:{SOR:5},base_classes:["Animista","Engenheiro"]},{id:"bangaa",name:"Bangaa",image:"races/bangaa.png",description:"Guerreiros reptilianos robustos, com pele escamosa e traos que lembram drages antigos. So temidos pela fora bruta e respeitados pela honra em combate.",characteristics:"Sua origem remonta a tempos ancestrais e acredita-se que possuam sangue dracnico. Valorizam a lealdade, a disciplina fsica e o dever.",racial_bonus:{FOR:3,CONS:2},base_classes:["Monge","Guerreiro"]},{id:"grias",name:"Grias",image:"races/grias.png",description:"Guerreiras aladas, exclusivamente femininas, nascidas para dominar os cus. Possuem corpos atlticos, chifres, caudas e asas fortes.",characteristics:"Mestres da caa alada e emboscadas areas. Usam a altura como vantagem ttica e seus ataques de mergulho so devastadores.",racial_bonus:{VEL:2},passive_ability:{name:"Imunidade a Dano de Queda",effect:"No sofrem dano ao cair de qualquer altura nem de impactos ascendentes."},base_classes:["Raptora","Rastreadora"]},{id:"elvaan",name:"Elvaan",image:"races/elvaan.png",description:"Originrios de Valendia, so guerreiros altos, nobres e disciplinados, com orelhas alongadas. Simbolizam tradio e justia em Ivalice.",characteristics:"Treinados desde a infncia no manejo de lminas e estilos de combate ancestrais. Desprezam truques e valorizam o confronto direto.",racial_bonus:{FOR:2},passive_ability:{name:"Domnio de Reao",effect:"Aprendem habilidades de reao com o dobro de rapidez."},base_classes:["Soldado","Espadachim"]},{id:"mithra",name:"Mithra",image:"races/mithra.png",description:"Raa com traos felinos, gil e astuta. Compartilham uma origem ancestral com as Viera, mas se espalharam por matas tropicais e runas.",characteristics:"Especialistas em furtividade, espionagem e ladronagem. Possuem forte senso de honra ligado  astcia.",racial_bonus:{VEL:2},passive_ability:{name:"Bnus de Camuflagem",effect:"Recebem vantagem em testes de furtividade, infiltrao e disfarce."},base_classes:["Ladra","Espreitadora"]},{id:"nu_mou",name:"Nu Mou",image:"races/nu-mou.png",description:"Pequenos em estatura, com aparncia canina e pelagem espessa, mas imensos em conhecimento. So magos natos que vivem sculos acumulando sabedoria.",characteristics:"Frequentemente ocupam cargos de conselheiros. Possuem empatia natural com a vida selvagem, comunicando-se com monstros e animais.",racial_bonus:{INT:3,CAR:2},base_classes:["Mago Branco","Adestrador"]},{id:"hypello",name:"Hypello",image:"races/hypello.png",description:"Raa anfbia dos pntanos de Kerwon. Possuem grande estatura, corpos robustos e pele azulada ou esverdeada.",characteristics:"Herbalistas por excelncia, mestres em usar plantas para curas ou venenos. Sua maior fora  a vitalidade e a empatia.",racial_bonus:{CONS:5},base_classes:["Escudeiro","Curandeiro"]},{id:"umbros",name:"Umbros",image:"races/umbros.png",description:"Seres de pele negra e marcas brilhantes que reagem  lua. Descendentes dos seres tocados pelas Pedras Zodiacais.",characteristics:"Alta resistncia  corrupo e aptido mgica. Vistos como orculos ou andarilhos que carregam segredos esquecidos.",racial_bonus:{INT:2},passive_ability:{name:"Modo Luar",effect:"Sob luz direta da lua visvel, causam o dobro de dano final com qualquer magia."},base_classes:["Mago Negro","Ocultista"]}],D5={races:O5},M5=JSON.parse(`[{"id":"soldado","name":"Soldado","type":"Bsica","role":"Tanque / Suporte de status","description":"Guerreiros de linha de frente, treinados para resistir aos maiores impactos do campo de batalha e desestabilizar o inimigo com habilidades tticas conhecidas como 'Pausas'.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Primeiro Socorro","description":"Trata os prprios ferimentos, restaurando 25% do HP.","cost":"N/A","type":"HB"},{"name":"Quebra de Poder","description":"Reduz a FOR do alvo pela metade, por trs turnos.","cost":"N/A","type":"HB"},{"name":"Quebra Magia","description":"Reduz a INT do alvo pela metade, por trs turnos.","cost":"N/A","type":"HB"},{"name":"Quebra de Mana","description":"Reduz a MP do alvo pela metade por trs turnos.","cost":"N/A","type":"HB"},{"name":"Provocar","description":"Inflige FURIA a um alvo.","cost":"N/A","type":"HB"},{"name":"Shieldbearer","description":"Permite ao usurio equipar escudos, mesmo fora da classe Soldado.","cost":"N/A","type":"Passiva"}]},{"id":"mago_branco","name":"Mago Branco","type":"Bsica","role":"Suporte / Cura / Anti-morto-vivo","description":"Especialistas em suporte mgico, sua principal funo  manter o grupo de p com curas poderosas, proteo espiritual e magias de ressuscitao.","bonus_class":{"MP":5},"requirements":[],"abilities":[{"name":"Cure","description":"Cura magicamente os ferimentos do alvo. Restaura 10% do PV e causa dano a mortos-vivos.","cost":"8 MP","type":"Magia"},{"name":"Cura","description":"Restaura magicamente 25% de HP. Causa dano a mortos-vivos.","cost":"18 MP","type":"Magia"},{"name":"Curaga","description":"Restaura magicamente 75% de HP. Causa dano a mortos-vivos.","cost":"32 MP","type":"Magia"},{"name":"Esuna","description":"Remove magicamente os efeitos negativos do alvo.","cost":"10 MP","type":"Magia"},{"name":"Arise","description":"Revive magicamente o alvo, removendo o KO. Causa dano a mortos-vivos.","cost":"40 MP","type":"Magia"},{"name":"Turbo MP","description":"Os feitios custam o dobro de seus MP normais, e do o dobro de dano.","cost":"N/A","type":"Passiva"}]},{"id":"quimico","name":"Qumico","type":"Bsica","role":"Suporte / Manipulador de Itens","description":"Mestres do preparo e uso ttico de poes. Utilizam conhecimentos alqumicos para curar aliados e enfraquecer inimigos.","bonus_class":{"SOR":2,"CAR":3},"requirements":[],"abilities":[{"name":"Preparar Poo","description":"Cria uma poo bsica durante o turno.","cost":"N/A","type":"HB"},{"name":"Arremessar Poo","description":"Permite arremessar qualquer poo equipada em um aliado ou inimigo a at 3 quadrados.","cost":"N/A","type":"HB"},{"name":"Frasco Instvel","description":"Arremessa uma mistura explosiva improvisada que causa dano de elemento aleatrio.","cost":"N/A","type":"HB"},{"name":"Reao em Cadeia","description":"Permite usar duas poes diferentes ao mesmo tempo.","cost":"N/A","type":"HB"},{"name":"Reciclagem Alqumica","description":"Recupera uma poo gasta no combate.","cost":"N/A","type":"HB"},{"name":"Inventrio Estendido","description":"Bolsa exclusiva para poes que no ocupa espao no inventrio padro (at 8 poes).","cost":"N/A","type":"Passiva"}]},{"id":"arqueira","name":"Arqueira","type":"Bsica","role":"Atiradora / Controle de Campo","description":"Especialistas em combate  distncia, treinadas para derrubar inimigos com preciso e neutralizar alvos.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Foco","description":"Aumenta drasticamente a preciso e dobra o dano final do ataque.","cost":"N/A","type":"HB"},{"name":"Acerto na Perna","description":"Causa IMOBILIZAO, impedindo movimentos por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Acerto na Mo","description":"Causa DESARME por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Mira Precisa","description":"Adiciona o atributo SORTE ao dano final do ataque.","cost":"N/A","type":"HB"},{"name":"Apago","description":"Causa CEGUEIRA, reduzindo severamente a chance de acerto do alvo por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Concentrao","description":"Aumenta a chance de acerto em todos os disparos de longa distncia.","cost":"N/A","type":"Passiva"}]},{"id":"esgrimista","name":"Esgrimista","type":"Bsica","role":"Duelista / Assassina de preciso","description":"Combatentes graciosas e letais, treinadas no uso refinado da rapieira.","bonus_class":{"VEL":3,"FOR":2},"requirements":[],"abilities":[{"name":"Picada Venenosa","description":"Causa dano e aplica VENENO ao alvo.","cost":"N/A","type":"HB"},{"name":"Voo da Andorinha","description":"Ataca todos os inimigos ao redor, podendo derrub-los.","cost":"N/A","type":"HB"},{"name":"Golpe Perfurante","description":"Estocada que atravessa o primeiro alvo e atinge um segundo atrs dele.","cost":"N/A","type":"HB"},{"name":"Golpe de Mana","description":"Causa dano e reduz o MP do inimigo.","cost":"N/A","type":"HB"},{"name":"Xeque-mate","description":"Inflige CONDENAO (morte aps 3 turnos).","cost":"N/A","type":"HB"},{"name":"Passos Leves","description":"Pode atravessar reas de gua rasa sem perder mobilidade.","cost":"N/A","type":"Passiva"}]},{"id":"curandeira","name":"Curandeira","type":"Bsica","role":"Suporte / Cura Natural","description":"Guardis da vida e das florestas, conectadas  energia da natureza para curar e proteger.","bonus_class":{"HP":3,"MP":2},"requirements":[],"abilities":[{"name":"Folha Serena","description":"Cura um aliado em 10 de HP.","cost":"8 MP","type":"Magia"},{"name":"Broto Purificador","description":"Remove um status negativo de um aliado.","cost":"18 MP","type":"Magia"},{"name":"Conexo Natural","description":"25% do dano recebido pelo aliado  transferido para a Curandeira por 3 turnos.","cost":"20 MP","type":"Magia"},{"name":"Vinhas Enlaantes","description":"Prende at 3 inimigos, impedindo movimento por 2 turnos.","cost":"24 MP","type":"Magia"},{"name":"Nvoa Vigorosa","description":"Cura leve em todos os aliados prximos (rea 3 blocos).","cost":"35 MP","type":"Magia"},{"name":"Refrigrio da Floresta","description":"30% de chance de conceder Resistncia Natural (+5 ARM ou +5 RES) ao curar.","cost":"N/A","type":"Passiva"}]},{"id":"exilado","name":"Exilado","type":"Bsica","role":"Lutador Adaptvel / Sobrevivente","description":"Viera masculinos banidos que aprenderam a sobreviver por conta prpria, adaptando-se a qualquer arma.","bonus_class":{"Livre":5},"requirements":[],"abilities":[{"name":"Tiro Preciso","description":"Disparo com preciso perfeita (usa SOR).","cost":"N/A","type":"HB (Arco)"},{"name":"Golpe Silencioso","description":"Causa DANO CRTICO automtico se o alvo estiver de costas.","cost":"N/A","type":"HB (Adaga)"},{"name":"Finta Desarmante","description":"Reduz o ATAQUE do inimigo por 2 turnos.","cost":"N/A","type":"HB (Espada)"},{"name":"Ruptura Selvagem","description":"Ignora a DEFESA do inimigo e causa dano elevado.","cost":"N/A","type":"HB (Espado)"},{"name":"Primeiros Socorros","description":"Cura 20% do HP a si mesmo ou aliado.","cost":"N/A","type":"HB"},{"name":"Adaptao de Combate","description":"Pode trocar a arma equipada 1 vez por turno sem custo de ao.","cost":"N/A","type":"Passiva"}]},{"id":"guerreiro","name":"Guerreiro","type":"Bsica","role":"Linha de Frente / Espancador","description":"Muralhas de msculo treinados para esmagar o inimigo com pura fora fsica.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Primeiro Socorro","description":"Trata os prprios ferimentos, restaurando 20% do HP.","cost":"N/A","type":"HB"},{"name":"Poder de Rend","description":"Reduz o ATAQUE do alvo.","cost":"N/A","type":"HB"},{"name":"Rend Magick","description":"Reduz a MAGIA do alvo.","cost":"N/A","type":"HB"},{"name":"Batida Corporal","description":"Investida causando dano FOR+CONS, volta 40% do dano a si mesmo.","cost":"N/A","type":"HB"},{"name":"Grito de Guerra","description":"Imobiliza o inimigo por 2 turnos e pode causar medo.","cost":"N/A","type":"HB"},{"name":"Monkey Grip","description":"Permite empunhar armas de duas mos com uma mo s.","cost":"N/A","type":"Passiva"}]},{"id":"monge","name":"Monge","type":"Bsica","role":"Linha de Frente / Espancador","description":"Lutadores que usam o ki e seus prprios corpos como armas letais.","bonus_class":{"FOR":3,"CONS":2},"requirements":[],"abilities":[{"name":"Onda Giratria","description":"Ataque giratrio que atinge todos ao redor em 1 bloco.","cost":"N/A","type":"HB"},{"name":"Pulso de Ar","description":"Soco com ki que causa dano e empurra o alvo 2 blocos.","cost":"N/A","type":"HB"},{"name":"Pulso de Terra","description":"Dano terrestre em linha reta (at 3 blocos).","cost":"N/A","type":"HB"},{"name":"Exploso de Ki","description":"Dano em rea de 2 blocos ao redor do monge.","cost":"N/A","type":"HB"},{"name":"Meditao","description":"Restaura 20% de HP e remove status negativos.","cost":"N/A","type":"HB"},{"name":"Reflexo","description":"50% de chance de desviar de ataques bsicos fsicos.","cost":"N/A","type":"Reao"}]},{"id":"animista","name":"Animista","type":"Bsica","role":"Suporte / Manipulador de Status","description":"Moogles que usam instrumentos e talentos imprevisveis para causar efeitos absurdos no campo.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"L Fofa","description":"Garante status 'Proteo' e 'Shell' por 3 turnos.","cost":"8 MP","type":"Magia"},{"name":"Erva de Gato","description":"Aplica 'BERSERK' no inimigo.","cost":"8 MP","type":"HB"},{"name":"Canto do Sapo","description":"Transforma o alvo em SAPO por 2 turnos.","cost":"22 MP","type":"Magia"},{"name":"Cozinhar","description":"Restaura 50% do HP do Alvo.","cost":"22 MP","type":"HB"},{"name":"Conte Ovelhinhas","description":"Faz todos os inimigos em pequena rea adormecerem.","cost":"15 MP","type":"Magia"},{"name":"Abanar o Rabo","description":"20% de chance de ENCANTAR o atacante quando alvejado.","cost":"N/A","type":"Reao"}]},{"id":"engenheiro","name":"Engenheiro","type":"Bsica","role":"Suporte Aleatrio / Caos Tecnolgico","description":"Gnios insanos que usam aparatos e mecanismos imprevisveis.","bonus_class":{"SOR":3,"INT":2},"requirements":[],"abilities":[{"name":"Box Vermelha","description":"Lana 'Haste' em uma unidade aleatria.","cost":"8 MP","type":"HB"},{"name":"Kit Azul","description":"Lana 'Dissipar' ao colidir com alvo aleatrio.","cost":"8 MP","type":"HB"},{"name":"Chaves Negras","description":"Aplica 'Condenao' em quem for atingido.","cost":"20 MP","type":"HB"},{"name":"Bateria Dourada","description":"Restaura 50% HP em uma unidade aleatria.","cost":"16 MP","type":"HB"},{"name":"Borrifador Verde","description":"Aplica VENENO em uma unidade aleatria na rea.","cost":"8 MP","type":"HB"},{"name":"Ajuste Rpido","description":"Permite reutilizar habilidade que falhou no turno seguinte sem custo de MP.","cost":"N/A","type":"Passiva"}]},{"id":"raptora","name":"Raptora","type":"Bsica","role":"Lutadora de Linha de Frente / Alta Mobilidade","description":"Guerreiras aladas que usam velocidade e instintos aguados para ataques rpidos.","bonus_class":{"FOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Ciclone","description":"Causa dano de vento em rea pequena.","cost":"N/A","type":"HB"},{"name":"Poder de Rend","description":"Reduz o ATAQUE do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Rend Magick","description":"Reduz a MAGIA do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Rend MP","description":"Diminui MP do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Redemoinho","description":"Lminas de vento causam dano e CONFUSO.","cost":"N/A","type":"HB"},{"name":"Salvaguarda","description":"Impede que a arma seja roubada ou destruda.","cost":"N/A","type":"Passiva"}]},{"id":"rastreadora","name":"Rastreadora","type":"Bsica","role":"Caadora / Suporte de Rastreio e Preciso","description":"Mestres da observao que leem o terreno e perseguem presas.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Sonic Boom","description":"Dano sonoro impossvel de desviar.","cost":"N/A","type":"HB"},{"name":"Expulsar","description":"Fora um monstro a fugir do combate.","cost":"N/A","type":"HB"},{"name":"Rastrear","description":"Marca um Monstro como 'presa', causando DANO DOBRADO.","cost":"N/A","type":"HB"},{"name":"Investigar","description":"Revela todas as informaes do alvo.","cost":"N/A","type":"HB"},{"name":"ltimo Tiro","description":"Alto dano com chance de infligir CONDENAO.","cost":"N/A","type":"HB"},{"name":"Sobrevivente","description":"Recebe REGEN quando estiver com 20% de HP ou menos.","cost":"N/A","type":"Passiva"}]},{"id":"espadachim","name":"Espadachim","type":"Bsica","role":"Lutador Verstil / Duelo & Tcnica","description":"Guerreiros disciplinados que combinam preciso fsica e poder mgico na lmina.","bonus_class":{"FOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Corte Cruzado","description":"Dano em rea frontal (arco) em at 3 inimigos.","cost":"N/A","type":"HB"},{"name":"Olhos no Duelo","description":"+25% de dano se enfrentar apenas um inimigo.","cost":"N/A","type":"HB"},{"name":"Corte Etreo","description":"Golpe mgico  distncia (FOR+INT).","cost":"10 MP","type":"HB"},{"name":"Passo Veloz","description":"Move-se para trs do inimigo com +50% de chance de crtico.","cost":"N/A","type":"HB"},{"name":"Trifria","description":"Combo de 3 ataques com chance de Sangramento.","cost":"N/A","type":"HB"},{"name":"Corte Reflexivo","description":"30% de chance de aparar projteis fsicos.","cost":"N/A","type":"Reao"}]},{"id":"ladra","name":"Ladra","type":"Bsica","role":"Furtividade / Roubo","description":"Mestras do furto e agilidade que roubam itens e gil em combate.","bonus_class":{"SOR":3,"CAR":2},"requirements":[],"abilities":[{"name":"Roubar Gil","description":"Tenta roubar dinheiro.","cost":"N/A","type":"HB"},{"name":"Roubar Item","description":"Tenta roubar um item.","cost":"N/A","type":"HB"},{"name":"Roubar Equipamento","description":"Tenta roubar o Equipamento do alvo.","cost":"N/A","type":"HB"},{"name":"Destrancar","description":"Pode destrancar portas ou bas.","cost":"N/A","type":"HB"},{"name":"Golpe Furtivo","description":"Dobro de dano se estiver Escondida.","cost":"N/A","type":"HB"},{"name":"Instinto Possessivo","description":"Evita roubo e tenta roubar a arma do ladro.","cost":"N/A","type":"Reao"}]},{"id":"espreitadora","name":"Espreitadora","type":"Bsica","role":"Furtividade / Infiltrao","description":"Especialistas em camuflagem e eliminao silenciosa.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Ataque Surpresa","description":"Crtico automtico se fora do campo de viso.","cost":"N/A","type":"HB"},{"name":"Rpida e Escondida","description":"Velocidade dobrada quando camuflada.","cost":"N/A","type":"Passiva"},{"name":"Manto Noturno","description":"Aumenta chance de camuflagem  noite.","cost":"N/A","type":"Passiva"},{"name":"Silncio","description":"Aplica Silncio por 3 turnos (apenas camuflada).","cost":"N/A","type":"HB"},{"name":"Derrubada Mortal","description":"Elimina instantaneamente alvo pelas costas (apenas camuflada).","cost":"N/A","type":"HB"},{"name":"Morte Silenciosa","description":"50% de chance de permanecer camuflada aps eliminar alvo.","cost":"N/A","type":"Passiva"}]},{"id":"adestrador","name":"Adestrador","type":"Bsica","role":"Controle de Criaturas / Suporte Ttico","description":"Especialistas em lidar com a vida selvagem, controlando monstros temporariamente.","bonus_class":{"CAR":5},"requirements":[],"abilities":[{"name":"Adestrar","description":"Controla um monstro por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Bater ou Correr","description":"Recebe Haste quando HP chega a 10%.","cost":"N/A","type":"Reao"}]},{"id":"escudeiro","name":"Escudeiro","type":"Bsica","role":"Defensor / Suporte com Itens","description":"Pilares de defesa que protegem aliados e usam itens de suporte.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Postura de Defesa","description":"Reduz pela metade o dano recebido at o prximo turno.","cost":"N/A","type":"HB"},{"name":"Apoio Vital","description":"Usa at 2 poes para curar aliados adjacentes.","cost":"N/A","type":"HB"},{"name":"Eu te Protejo!","description":"Salta no aliado que tomar dano e absorve o golpe.","cost":"N/A","type":"Reao"},{"name":"Lanamento Cuidadoso","description":"Arremessa item a at 3 blocos.","cost":"N/A","type":"HB"},{"name":"Grito Protetor","description":"Provoca inimigos forando ataque ao Escudeiro.","cost":"N/A","type":"HB"},{"name":"Reao Instintiva","description":"Usa poo automaticamente ao sofrer golpe com HP baixo.","cost":"N/A","type":"Reao"}]},{"id":"mago_negro","name":"Mago Negro","type":"Bsica","role":"Ofensivo Mgico / Controle Elemental","description":"Conjuradores que dominam a magia elemental destrutiva.","bonus_class":{"INT":3,"MP":2},"requirements":[],"abilities":[{"name":"Fire","description":"Esfera de fogo em rea (alvo + 1 casa cada lado).","cost":"10 MP","type":"Magia"},{"name":"Blizzard","description":"Fragmento congelante perfurante.","cost":"10 MP","type":"Magia"},{"name":"Thunder","description":"Raio direto sobre inimigo e adjacentes.","cost":"10 MP","type":"Magia"},{"name":"Aero","description":"Turbilho de vento em rea.","cost":"10 MP","type":"Magia"},{"name":"Telecinese","description":"Move objeto/unidade at 5 blocos.","cost":"10 MP","type":"Magia"},{"name":"Absorver Mana","description":"Absorve 20% do dano mgico recebido como Mana.","cost":"N/A","type":"Reao"}]},{"id":"ocultista","name":"Ocultista","type":"Bsica","role":"Mago das Sombras / Maldies","description":"Estudiosos do proibido que manipulam trevas e maldies.","bonus_class":{"MP":3,"INT":2},"requirements":[],"abilities":[{"name":"Escurido","description":"Dano mgico de trevas em rea.","cost":"10 MP","type":"Magia"},{"name":"Ritual da Condenao","description":"Aplica CONDENAO no alvo.","cost":"15 MP","type":"Magia"},{"name":"Barreira do Silncio","description":"Aplica SILNCIO no alvo.","cost":"15 MP","type":"Magia"},{"name":"Vu Cego","description":"Aplica CEGUEIRA no alvo.","cost":"15 MP","type":"Magia"},{"name":"Avada Mortis","description":"Tenta aplicar morte instantnea.","cost":"30 MP","type":"Magia"},{"name":"Olhar do Abismo","description":"Aumenta INT aps concluir maldio.","cost":"N/A","type":"Passiva"}]},{"id":"quimico_avancado","name":"Qumico Avanado","type":"Avanada","role":"Suporte / Manipulador de Itens","description":"Evoluo do Qumico, usa reaes elementares e poes ofensivas em rea.","bonus_class":{"SOR":4,"CAR":2},"requirements":["3 Habilidades Mestre em Qumico","+30 SOR"],"abilities":[{"name":"Criar Poo Avanada","description":"Cria poes de qualidade superior.","cost":"N/A","type":"HB"},{"name":"Arremesso Rpido","description":"Arremessa at 3 poes em um movimento.","cost":"N/A","type":"HB"},{"name":"Frasco Venenoso","description":"Libera veneno em rea.","cost":"N/A","type":"HB"},{"name":"Frasco Milagroso","description":"Remove todos status negativos.","cost":"N/A","type":"HB"},{"name":"Dose Grande","description":"Aumenta rea de efeito da poo.","cost":"N/A","type":"HB"},{"name":"Pr-Preparo","description":"Inicia combate com 2 poes prontas.","cost":"N/A","type":"Passiva"}]},{"id":"clerigo","name":"Clrigo","type":"Avanada","role":"Curandeiro de Linha de Frente","description":"Elo entre fora e f, luta na frente enquanto cura aliados.","bonus_class":{"CONS":4,"MANA":2},"requirements":["1 Habilidade Mestre em Soldado","2 Habilidades Mestre em Mago Branco","+20 FOR"],"abilities":[{"name":"Julgamento Divino","description":"Dano sagrado (FOR+Luz).","cost":"20 MP","type":"Magia"},{"name":"Palavras de F","description":"Concede Barreira e Shell.","cost":"15 MP","type":"Magia"},{"name":"Espurgar","description":"Expulsa monstros espirituais.","cost":"25 MP","type":"Magia"},{"name":"Martelo Giratrio","description":"Dano em rea ao redor (CONS+FOR+Luz).","cost":"30 MP","type":"HB"},{"name":"Ruptura Divina","description":"Exploso triangular de luz.","cost":"50 MP","type":"HB"},{"name":"Estou com Voc","description":"Cura auto 10% de aliado adjacente por turno.","cost":"N/A","type":"Passiva"}]},{"id":"alquimista","name":"Alquimista","type":"Avanada","role":"Suporte / Manipulador de Campo","description":"Molda o mundo convertendo solo e energia em poder.","bonus_class":{"INT":4,"MANA":2},"requirements":["2 Habilidades Mestre em Mago Branco","1 Habilidade Mestre em Qumico","+30 INT"],"abilities":[{"name":"Pilar de Pedra","description":"Pilar de rocha atinge inimigo (INT+Terra).","cost":"20 MP","type":"Magia"},{"name":"Canho de Pedra","description":"Projtil de rocha distante.","cost":"20 MP","type":"Magia"},{"name":"Correntes de Solo","description":"Imobiliza inimigo.","cost":"17 MP","type":"Magia"},{"name":"Transmutao Peridica","description":"Altera elemento natural de rea/objeto.","cost":"30 MP","type":"Magia"},{"name":"Golem de Pedra","description":"Cria golem controlvel.","cost":"50 MP","type":"Magia"},{"name":"Muro","description":"Bloqueia ataque com muro de pedra.","cost":"N/A","type":"Reao"}]},{"id":"duelista","name":"Duelista","type":"Avanada","role":"Lutador de Elite / Combate Singular","description":"pice do domnio da espada, focado em preciso e duelos.","bonus_class":{"FOR":4,"VEL":2},"requirements":["3 Habilidades Mestre em Espadachim","+30 FOR","+20 VEL"],"abilities":[{"name":"BackStep","description":"Salta 2 blocos para esquiva.","cost":"N/A","type":"HB"},{"name":"Eu Contra Voc","description":"+50% dano em alvo nico.","cost":"N/A","type":"HB"},{"name":"Chuva de Lminas","description":"Trs cortes de ar consecutivos.","cost":"N/A","type":"HB"},{"name":"Postura de Batalha","description":"Aumenta ataque fsico em 50%.","cost":"N/A","type":"HB"},{"name":"Grande Slash","description":"Golpe que percorre o campo todo.","cost":"N/A","type":"HB"},{"name":"Defesa Contnua","description":"Desvia golpe se FOR > inimigo.","cost":"N/A","type":"Reao"}]},{"id":"iluminista","name":"Iluminista","type":"Avanada","role":"Mago Supremo / Controlador Elemental Global","description":"Concentra energia para ataques globais ou curas totais.","bonus_class":{"INT":5,"MANA":5},"requirements":["5 Habilidades Mestre em Mago Branco","5 Habilidades Mestre em Mago Negro"],"abilities":[{"name":"Piromancia","description":"Dano global de Fogo aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Aquamancia","description":"Dano global de gua aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Raiomancia","description":"Dano global de Trovo aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Whitemancia","description":"Cura global 50% HP aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Tretamancia","description":"Plasma linear de ponta a ponta.","cost":"50 MP","type":"Magia"},{"name":"Ritual Seguro","description":"Ativa Barreira/Veloz ao ser alvejado conjurando.","cost":"N/A","type":"Reao"}]},{"id":"oppenheir","name":"Oppenheir","type":"Avanada","role":"Mestre Qumico / Manipulador da Destruio","description":"Alquimia levada ao limite de exploses e reaes em cadeia.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Qumico","5 Habilidades Mestre em Qumico Avanado"],"abilities":[{"name":"Reao Altrusta","description":"Exploso de cura e remoo de status.","cost":"N/A","type":"HB"},{"name":"Nuvem Txica","description":"Veneno em rea e reduz preciso.","cost":"N/A","type":"HB"},{"name":"Ignis Vitae","description":"Chamas conscientes perseguidoras.","cost":"N/A","type":"HB"},{"name":"Fragmento Celular","description":"Microexploso de dano massivo.","cost":"N/A","type":"HB"},{"name":"Bomba Atmica","description":"Exploso que elimina todos no campo (exceto cobertura).","cost":"N/A","type":"HB"},{"name":"Entropia Perfeita","description":"Chance de remover penalidades ao explodir.","cost":"N/A","type":"Passiva"}]},{"id":"eremita","name":"Eremita","type":"Avanada","role":"Tanque / Protetor Espiritual","description":"Sacerdote de batalha que converte dano em sacrifcio e proteo.","bonus_class":{"CONS":10},"requirements":["5 Habilidades Mestre em Clrigo","+100 CONS"],"abilities":[{"name":"F ao Meu Redor","description":"Aura cura 50% HP aliados prximos.","cost":"N/A","type":"HB"},{"name":"F do Sol","description":"Raio solar expurga mortos-vivos e queima.","cost":"N/A","type":"HB"},{"name":"F da Lua","description":"Cura 100% HP aliados prximos.","cost":"N/A","type":"HB"},{"name":"F do Ferro","description":"Concede Shell+ e Barreira+.","cost":"N/A","type":"HB"},{"name":"F do Brbaro","description":"Provoca inimigos e soma CONS ao dano.","cost":"N/A","type":"HB"},{"name":"Aquele que Me Protege","description":"Converte 20% do dano recebido em cura.","cost":"N/A","type":"Passiva"}]},{"id":"arquidenio","name":"Arquidnio","type":"Avanada","role":"Suporte / Manipulador de Probabilidades","description":"Mago matemtico que manipula valores e estatsticas de combate.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Alquimista","+100 INT"],"abilities":[{"name":"O Dobro","description":"Dobra qualquer valor por 1 turno.","cost":"50 MP","type":"Magia"},{"name":"Pela Metade","description":"Divide qualquer valor por 2.","cost":"50 MP","type":"Magia"},{"name":"100%","description":"Garante acerto absoluto.","cost":"70 MP","type":"Magia"},{"name":"0%","description":"Anula valor ou chance a 0.","cost":"70 MP","type":"Magia"},{"name":"Septania","description":"Multiplica valor por 7x.","cost":"100 MP","type":"Magia"},{"name":"Lgica Perfeita","description":"Resultado natural 20 uma vez por batalha.","cost":"N/A","type":"Passiva"}]},{"id":"samurai","name":"Samurai","type":"Avanada","role":"Ofensivo / Especialista em Duelo","description":"Guerreiro disciplinado que une velocidade e fora em cortes perfeitos.","bonus_class":{"FOR":5,"VEL":5},"requirements":["5 Habilidades Mestre em Espadachim","5 Habilidades Mestre em Duelista"],"abilities":[{"name":"Saque Rpido","description":"Duplica FOR e VEL por 1 turno.","cost":"N/A","type":"HB"},{"name":"Furaco da Folha","description":"Tornado de cortes em linha reta.","cost":"N/A","type":"HB"},{"name":"Olhos de Falco","description":"Soma FOR + SOR contra alvo.","cost":"N/A","type":"HB"},{"name":"Corte do Drago","description":"Golpe instantneo. 20 natural elimina alvo.","cost":"N/A","type":"HB"},{"name":"Cu Limpo","description":"Corte vertical colossal aps preparao.","cost":"N/A","type":"HB"},{"name":"Empunhadura Dupla","description":"Pode empunhar duas armas.","cost":"N/A","type":"Passiva"}]},{"id":"gladiador","name":"Gladiador","type":"Avanada","role":"Linha de Frente / Controle e Fora Bruta","description":"Colosso de arena que luta por glria e brutalidade.","bonus_class":{"FOR":4,"CONS":2},"requirements":["2 Habilidades Mestre em Guerreiro","+30 FOR"],"abilities":[{"name":"Grito Selvagem","description":"Aumenta FOR e provoca inimigos.","cost":"N/A","type":"HB"},{"name":"Investida de Escudo","description":"Dano de impacto com escudo.","cost":"N/A","type":"HB"},{"name":"Espancamento","description":"5 golpes consecutivos, pode imobilizar.","cost":"N/A","type":"HB"},{"name":"Espada Flamejante","description":"Causa Queimadura com ataques fsicos.","cost":"N/A","type":"HB"},{"name":"Postura de Luta","description":"Evita ataques e contra-ataca.","cost":"N/A","type":"HB"},{"name":"Escudeiro","description":"Pode usar escudos em qualquer classe.","cost":"N/A","type":"Passiva"}]},{"id":"artista_marcial","name":"Artista Marcial","type":"Avanada","role":"Linha de Frente / Especialista em Combos","description":"Especialista em golpes precisos e canalizao de fora vital.","bonus_class":{"VEL":4,"CONS":2},"requirements":["2 Habilidades Mestre em Monge","+30 VEL"],"abilities":[{"name":"Combo do Tigre","description":"3 golpes, dano aumenta a cada acerto.","cost":"N/A","type":"HB"},{"name":"Golpe Serpenteante","description":"Aproximao em zigue-zague e crtico.","cost":"N/A","type":"HB"},{"name":"Palma Sagrada","description":"Golpe de dano puro que ignora armadura.","cost":"N/A","type":"HB"},{"name":"Passo do Vento","description":"Teleporte curto e ataque surpresa.","cost":"N/A","type":"HB"},{"name":"Punhos do Drago","description":"5 golpes simultneos com chance de atordoar.","cost":"N/A","type":"HB"},{"name":"Esprito Indomvel","description":"Ganha FOR e VEL quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"lanceiro","name":"Lanceiro","type":"Avanada","role":"Ofensivo / Alcance e Preciso","description":"Predador de longo alcance com lanas.","bonus_class":{"VEL":4,"SOR":2},"requirements":["2 Habilidades Mestre em Guerreiro","+30 VEL"],"abilities":[{"name":"Ponta Longa","description":"Estende alcance para 4 blocos.","cost":"N/A","type":"HB"},{"name":"Dardo de Javali","description":"Arremessa a lana perfurando linha reta.","cost":"N/A","type":"HB"},{"name":"Jump","description":"Salta e cai sobre inimigo com dano alto.","cost":"N/A","type":"HB"},{"name":"Barreira de Cabo","description":"Empurra inimigos adjacentes.","cost":"N/A","type":"HB"},{"name":"Ponta Perfurante","description":"Golpe linear que perfura alvos.","cost":"N/A","type":"HB"},{"name":"Rpido como uma Lana","description":"Converte VEL em dano quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"lutador_de_rua","name":"Lutador de Rua","type":"Avanada","role":"Ofensivo / Anti-Honra","description":"Brigo desonesto que usa fora bruta e truques sujos.","bonus_class":{"Livre":6},"requirements":["2 Habilidades Mestre em Monge","1 Habilidade Mestre em outra classe"],"abilities":[{"name":"Vou te Arrebentar!","description":"+20% dano contra alvo marcado.","cost":"N/A","type":"HB"},{"name":"Lariat de Msculos","description":"Golpe de brao com chance de Atordoar.","cost":"N/A","type":"HB"},{"name":"Soco na Costela","description":"Finta e golpe crtico preciso.","cost":"N/A","type":"HB"},{"name":"Rasteira Malandra","description":"Aplica Imobilizado.","cost":"N/A","type":"HB"},{"name":"Sequncia de Raiva","description":"5 ataques e entra em Fria.","cost":"N/A","type":"HB"},{"name":"Covarde","description":"Dobra VEL para fugir quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"vinking","name":"Vinking","type":"Avanada","role":"Brbaro Mstico","description":"Guerreiro ancestral guiado por troves e fria divina.","bonus_class":{"FOR":4,"CONS":2},"requirements":["3 Habilidades Mestre em Gladiador","+50 FOR","+50 CONS"],"abilities":[{"name":"Marchar de Heimdall","description":"Dobra VEL prpria e de aliados.","cost":"N/A","type":"HB"},{"name":"Trovo de Thor","description":"Raio cai a distncia.","cost":"N/A","type":"HB"},{"name":"Confronto de Tyr","description":"Dobra FOR por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Ma de Iduna","description":"Recupera 80% HP e remove status.","cost":"N/A","type":"HB"},{"name":"Por Odin!","description":"Aumenta todos atributos por 1 turno.","cost":"N/A","type":"HB"},{"name":"At Valhalla","description":"Converte CONS em FOR quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"templario","name":"Templrio","type":"Avanada","role":"Mobilidade Extrema / Linha de Frente","description":"Soldado perfeito que domina o campo com lana e velocidade.","bonus_class":{"VEL":4,"CONS":2},"requirements":["3 Habilidades Mestre em Lanceiro","+50 VEL","+50 FOR"],"abilities":[{"name":"Salto Rpido","description":"Teleporte para qualquer parte do mapa.","cost":"N/A","type":"HB"},{"name":"Avano Perfurante","description":"Avano linear perfurante.","cost":"N/A","type":"HB"},{"name":"Dardos Perfurantes","description":"5 ataques em sequncia.","cost":"N/A","type":"HB"},{"name":"Lana Flamejante","description":"Adiciona Fogo aos ataques.","cost":"N/A","type":"HB"},{"name":"Dardo do Drago","description":"Arremesso perfurante em linha reta.","cost":"N/A","type":"HB"},{"name":"Lana Giratria","description":"Evita ataques  distncia.","cost":"N/A","type":"Reao"}]},{"id":"mestre_artes_marciais","name":"Mestre das Artes Marciais","type":"Avanada","role":"Duelista / Manipulador de Ki","description":"Harmonia total entre corpo e Ki.","bonus_class":{"CONS":4,"Livre":2},"requirements":["5 Habilidades Mestre em Monge","5 Habilidades Mestre em Artista Marcial"],"abilities":[{"name":"Dana do Carvalho Vermelho","description":"Combo de 5 golpes de vento.","cost":"N/A","type":"HB"},{"name":"Palma do Drago","description":"Ondas de ar  distncia.","cost":"N/A","type":"HB"},{"name":"Teken","description":"Dobra ARM e RES por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Dana do Sabugueiro Marrom","description":"Reduz ARM do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Dana do Esprito Branco","description":"Clone dobra aes por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Intuio de Ki","description":"Imune a surpresas.","cost":"N/A","type":"Passiva"}]},{"id":"brutamontes","name":"Brutamontes","type":"Avanada","role":"Tanque Ofensivo","description":"Muralha do submundo que protege e esmaga.","bonus_class":{"CAR":4,"SOR":2},"requirements":["5 Habilidades Mestre em Lutador de Rua","100 FOR"],"abilities":[{"name":"No Vai Passar","description":"Bloqueia avano inimigo e dobra defesa.","cost":"N/A","type":"HB"},{"name":"Lariat Duplo","description":"Arrasta inimigos adjacentes.","cost":"N/A","type":"HB"},{"name":"Emboscada","description":"Recupera HP e contra-ataca quem aproximar.","cost":"N/A","type":"HB"},{"name":"Pose do Brutamontes","description":"Salto esmagador com onda de choque.","cost":"N/A","type":"HB"},{"name":"Manda-Chuva","description":"Buffa aliados e debuffa inimigos em rea.","cost":"N/A","type":"HB"},{"name":"Fraco Demais","description":"Nega dano menor que sua FOR.","cost":"N/A","type":"Passiva"}]},{"id":"cavaleiro_dragao","name":"Cavaleiro Drago","type":"Avanada","role":"Caador de Drages / Ofensivo Elemental","description":"Guerreiros que usam poderes de drago.","bonus_class":{"CONS":5,"BonusDanoDragao":"20%"},"requirements":["Eliminar um Drago"],"abilities":[{"name":"Bafo do Drago Vermelho","description":"Fogo em rea triangular.","cost":"N/A","type":"HB"},{"name":"Garras do Drago Ciano","description":"Golpe de gelo com avano.","cost":"N/A","type":"HB"},{"name":"Salto do Drago Amarelo","description":"Salto eltrico (1 turno no ar).","cost":"N/A","type":"HB"},{"name":"Beno do Drago Azul","description":"Cura 50% HP.","cost":"N/A","type":"HB"},{"name":"Energia do Drago Branco","description":"Raio de luz linear.","cost":"N/A","type":"HB"},{"name":"Aura de Drago","description":"Monstros fracos sentem medo.","cost":"N/A","type":"Passiva"}]},{"id":"dragonslayer","name":"Dragonslayer","type":"Avanada","role":"Anti-Drago / Executador","description":"Arma final contra drages, capaz de subjugar feras colossais.","bonus_class":{"FOR":6,"BonusDanoDragao":"60%"},"requirements":["5 Habilidades Mestre em Cavaleiro Drago"],"abilities":[{"name":"Sopro do Drago Esmeralda","description":"Nuvem txica em rea.","cost":"N/A","type":"HB"},{"name":"Rasante do Drago Prateado","description":"Rasante de vento linear mapa todo.","cost":"N/A","type":"HB"},{"name":"Escamas do Drago Ouro","description":"Dobra ARM e RES.","cost":"N/A","type":"HB"},{"name":"Tremor do Drago de Bronze","description":"Estacas de pedra e tremor.","cost":"N/A","type":"HB"},{"name":"Ameaa do Drago Negro","description":"Miasma negra aplica Condenao.","cost":"N/A","type":"HB"},{"name":"Escamas Elementais","description":"Absorve dano elemental convertendo em CONS.","cost":"N/A","type":"Passiva"}]},{"id":"xama","name":"Xam","type":"Avanada","role":"Debuff / Manipulador de Caos","description":"Lida com foras ocultas e ancestrais dos pntanos.","bonus_class":{"MANA":3,"CONS":2},"requirements":["2 Habilidades Mestre em Curandeiro","+30 MANA"],"abilities":[{"name":"Xabala Cegaris","description":"Cega alvo por 5 turnos.","cost":"15 MP","type":"Magia"},{"name":"Ziriki Sileci","description":"Silencia alvo por 5 turnos.","cost":"15 MP","type":"Magia"},{"name":"Urucubaca","description":"Aplica Envenenamento.","cost":"20 MP","type":"Magia"},{"name":"Ianhamaj","description":"Imobiliza alvo por 5 turnos.","cost":"20 MP","type":"Magia"},{"name":"Zakarinhad","description":"Aplica Condenao.","cost":"30 MP","type":"Magia"},{"name":"Oshala","description":"Imune a status negativos.","cost":"N/A","type":"Passiva"}]},{"id":"monge_do_pantano","name":"Monge do Pntano","type":"Avanada","role":"Lutador de Terreno / Porradeiro","description":"Canaliza a densidade do pntano em golpes pesados.","bonus_class":{"CONS":3,"FOR":2},"requirements":["1 Habilidade Mestre em Curandeiro","1 Habilidade Mestre em Escudeiro","+20 FOR"],"abilities":[{"name":"Soco do Pntano","description":"Golpe aqutico carregado.","cost":"N/A","type":"HB"},{"name":"Barrigada","description":"Esmaga e empurra.","cost":"N/A","type":"HB"},{"name":"Vu do Pntano","description":"Dobra RES por 3 turnos.","cost":"N/A","type":"HB"},{"name":"Abrao do Pntano","description":"Agarro esmagador.","cost":"N/A","type":"HB"},{"name":"Boxe do Pntano","description":"3 golpes consecutivos pantanosos.","cost":"N/A","type":"HB"},{"name":"gua Est Comigo","description":"Dobra dano em terreno de gua.","cost":"N/A","type":"Passiva"}]},{"id":"glutao","name":"Gluto","type":"Avanada","role":"Tank / Absorvedor de Dano","description":"Foras da natureza famintas e indestrutveis.","bonus_class":{"CONS":5},"requirements":["1 Habilidade Mestre em Curandeiro","1 Habilidade Mestre em Escudeiro","+20 CONS"],"abilities":[{"name":"Investida do Sapo","description":"Atropela em linha reta.","cost":"N/A","type":"HB"},{"name":"Descanso do Sapo","description":"Cura e dobra defesa (imvel).","cost":"N/A","type":"HB"},{"name":"Arroto do Sapo","description":"Dano de impacto sonoro.","cost":"N/A","type":"HB"},{"name":"Pulo do Sapo","description":"Esmaga alvo com peso.","cost":"N/A","type":"HB"},{"name":"Vou Te Comer","description":"Devora inimigo com 25% HP ou menos.","cost":"N/A","type":"HB"},{"name":"Boca Sempre Mexendo","description":"Recupera 10% HP se no agir.","cost":"N/A","type":"Passiva"}]},{"id":"protetor","name":"Protetor","type":"Avanada","role":"Tank / Guardio de Campo","description":"Muralhas vivas dedicadas a proteger aliados.","bonus_class":{"CONS":5},"requirements":["2 Habilidades Mestre em Escudeiro","+30 CONS"],"abilities":[{"name":"Eu Tanko, Voc Mata","description":"Absorve 80% do dano de aliado e buffa FOR dele.","cost":"N/A","type":"HB"},{"name":"Investida do Escudo","description":"Corre com escudo e atordoa.","cost":"N/A","type":"HB"},{"name":"Reflexo do Escudo","description":"Escudo ricocheteia em inimigos.","cost":"N/A","type":"HB"},{"name":"Sapo Protetor","description":"Compartilha defesa com aliados ao redor.","cost":"N/A","type":"HB"},{"name":"Escudo de Proteo Areo","description":"Anula prximo dano em aliado.","cost":"N/A","type":"HB"},{"name":"Socorros Rpidos","description":"Salta para tomar golpe por aliado.","cost":"N/A","type":"Reao"}]},{"id":"pai_do_pantano","name":"Pai do Pntano","type":"Avanada","role":"Mago de Terreno / Controle","description":"Tornou-se um com o pntano, controlando razes e mars.","bonus_class":{"MANA":6},"requirements":["5 Habilidades Mestre em Xam","5 Habilidades Mestre em Curandeiro"],"abilities":[{"name":"Razes do Sabugueiro de Ihoa","description":"Imobiliza inimigos em rea.","cost":"50 MP","type":"Magia"},{"name":"Pico dos Pinheiros","description":"Pinheiros empalam inimigos.","cost":"50 MP","type":"Magia"},{"name":"Gota de Orvalho","description":"Cura 100% HP e remove status (rea).","cost":"50 MP","type":"Magia"},{"name":"Primavera Serena","description":"Dobra INT e RES de aliados.","cost":"40 MP","type":"Magia"},{"name":"Mar do Mangue","description":"Empurra inimigos, remove buffs e cura aliados (global).","cost":"100 MP","type":"Magia"},{"name":"Floresta Viva","description":"Razes prendem inimigos engajados.","cost":"N/A","type":"Passiva"}]},{"id":"sabio_do_pantano","name":"Sbio do Pntano","type":"Avanada","role":"Controle de gua / Contra-Golpe","description":"Domina a energia viva do pntano com constituio colossal.","bonus_class":{"CONS":6},"requirements":["5 Habilidades Mestre em Monge do Pntano","+100 CONS"],"abilities":[{"name":"Punho do Pntano","description":"Ataques ganham elemento gua.","cost":"N/A","type":"Passiva"},{"name":"Serpente do Pntano","description":"Ataque linear de gua.","cost":"N/A","type":"HB"},{"name":"AquaReflete","description":"Esfera de gua empurra alvo.","cost":"N/A","type":"HB"},{"name":"Pantanogan","description":"Esfera de gua empurra alvo.","cost":"N/A","type":"HB"},{"name":"Bola de Canho","description":"Projtil vivo de dano massivo.","cost":"N/A","type":"HB"},{"name":"Contra-Corpo","description":"Contra-ataca fsico e empurra.","cost":"N/A","type":"Reao"}]},{"id":"burgues_do_pantano","name":"Burgus do Pntano","type":"Avanada","role":"Tanque / Controle","description":"Suprema ganncia, usa corpo colossal e autoridade.","bonus_class":{"CONS":6},"requirements":["5 Habilidades Mestre em Gluto","+100 CONS"],"abilities":[{"name":"Imposto do Pntano","description":"Rouba 20% HP do alvo e remove buff.","cost":"N/A","type":"HB"},{"name":"Barriga Monrquica","description":"Dobra defesa e bloqueia passagem.","cost":"N/A","type":"HB"},{"name":"Banquete Exclusivo","description":"Cura 100% HP e ganha Fria.","cost":"N/A","type":"HB"},{"name":"Tesouro do Pntano","description":"Exploso de cofre.","cost":"N/A","type":"HB"},{"name":"Decreto de Propriedade","description":"Debuffa inimigos e buffa aliados em rea.","cost":"N/A","type":"HB"},{"name":"Soberania do Pntano","description":"Cura ao aproximar inimigo e aplica Lentido.","cost":"N/A","type":"Passiva"}]},{"id":"guardiao_do_pantano","name":"Guardio do Pntano","type":"Avanada","role":"Tanque / Suporte Supremo","description":"Monlito vivo que ergue muralhas de escudos.","bonus_class":{"CONS":10},"requirements":["5 Habilidades Mestre em Escudeiro","5 Habilidades Mestre em Protetor"],"abilities":[{"name":"Priso de Escudo","description":"Prende alvo em 4 escudos.","cost":"N/A","type":"HB"},{"name":"Dobro de Escudo","description":"Dobra qualquer escudo em jogo.","cost":"N/A","type":"HB"},{"name":"Grande Escudo","description":"Protege rea enorme atrs dele.","cost":"N/A","type":"HB"},{"name":"Escudo Revitalizador","description":"Cura 100% HP rea.","cost":"N/A","type":"HB"},{"name":"Proteo em Grande Escala","description":"Anula prximo dano em TODOS aliados.","cost":"N/A","type":"HB"},{"name":"Proteo Mgica","description":"Usa habilidade de proteo em aliado alvejado.","cost":"N/A","type":"Reao"}]},{"id":"cantor_das_mares","name":"Cantor das Mars","type":"Avanada","role":"Suporte / Buffer Musical","description":"Bardos que usam melodias espirituais.","bonus_class":{"CAR":5},"requirements":["+50 CAR"],"abilities":[{"name":"Cantar","description":"Executa msica do repertrio (efeitos variados).","cost":"N/A","type":"HB"},{"name":"Palco Improvisado","description":"Dobro de efeito se estiver em terreno elevado.","cost":"N/A","type":"Passiva"}]},{"id":"astro_do_pantano","name":"Astro do Pntano","type":"Avanada","role":"Suporte Musical / Manipulador de Moral","description":"cone musical que move multides.","bonus_class":{"CAR":10},"requirements":["Ttulo musical com Cantor das Mars"],"abilities":[{"name":"Mashup","description":"Combina duas msicas simultneas.","cost":"N/A","type":"HB"},{"name":"Charme Musical","description":"Enfeitia atacante.","cost":"N/A","type":"Reao"}]},{"id":"sutileira","name":"Sutileira","type":"Avanada","role":"Roubo de Elite / Suporte Social","description":"Ladras de alta classe, elegantes e imperceptveis.","bonus_class":{"CAR":3,"SOR":2},"requirements":["2 Habilidades Mestre em Ladra","+20 SOR"],"abilities":[{"name":"Roubar Arma Principal","description":"Furta a arma equipada do alvo.","cost":"N/A","type":"HB"},{"name":"Roubar Acessrios","description":"Furta anis/colares.","cost":"N/A","type":"HB"},{"name":"Roubar Item de Luxo","description":"Furta item mais raro.","cost":"N/A","type":"HB"},{"name":"Detectar Armadilhas","description":"Percebe armadilhas em raio de 5 blocos.","cost":"N/A","type":"HB"},{"name":"Famme Fatale","description":"Encanta alvo e pode aplicar Condenao.","cost":"N/A","type":"HB"},{"name":"Mestre dos Assaltos","description":"No ativa armadilhas.","cost":"N/A","type":"Passiva"}]},{"id":"rastreadora_avancada","name":"Rastreadora (Avanada)","type":"Avanada","role":"Dano / Furtividade / Controle","description":"Felinas letais que unem furtividade com caa predatria.","bonus_class":{"SOR":3,"VEL":2},"requirements":["2 Habilidades Mestre em Espreitadora","+20 VEL"],"abilities":[{"name":"Cheiro do Medo","description":"Dobra MOV na direo do alvo.","cost":"N/A","type":"HB"},{"name":"Detectar Fraqueza","description":"Prximo ataque soma SOR ao dano.","cost":"N/A","type":"HB"},{"name":"Colocar Armadilhas","description":"Instala armadilha no campo.","cost":"N/A","type":"HB"},{"name":"Salto da Morte","description":"Ataque de cima com bnus de SOR.","cost":"N/A","type":"HB"},{"name":"Morte em Sequncia","description":"Golpe linear em todos no trajeto.","cost":"N/A","type":"HB"},{"name":"Contra Ataque","description":"Contra-ataca fsico adjacente.","cost":"N/A","type":"Reao"}]},{"id":"kunoichi","name":"Kunoichi","type":"Avanada","role":"Ninjutsu / Controle Elemental","description":"Assassinas discretas que usam iluses e ninjutsu.","bonus_class":{"INT":3,"SOR":2},"requirements":["2 Habilidades Mestre em Ladra","2 Habilidades Mestre em Espreitadora"],"abilities":[{"name":"Arremesso de Kunai","description":"Kunai amplificada com INT.","cost":"N/A","type":"HB"},{"name":"Bomba de Fumaa","description":"Fica camuflada instantaneamente.","cost":"N/A","type":"HB"},{"name":"Genjutsu","description":"Iluso causa Confuso.","cost":"25 MP","type":"Magia"},{"name":"Suiton","description":"Vrtice de gua (INT+gua).","cost":"30 MP","type":"Magia"},{"name":"Doton","description":"Pilar de terra (INT+Terra).","cost":"30 MP","type":"Magia"},{"name":"Clone das Sombras","description":"Clone repete ninjutsu.","cost":"N/A","type":"Passiva"}]},{"id":"chefona","name":"Chefona","type":"Avanada","role":"DPS / Suporte Criminoso","description":"Mandachuva do crime que usa pistolas e capangas.","bonus_class":{"SOR":6},"requirements":["5 Habilidades Mestre em Ladra","5 Habilidades Mestre em Sutileira","+100 SOR"],"abilities":[{"name":"Paredo","description":"Saraivada de balas em alvo.","cost":"N/A","type":"HB"},{"name":"Tiroteio","description":"Tiros em rea ao redor.","cost":"N/A","type":"HB"},{"name":"Estragar o Velrio","description":"Tiro na cabea (morte instantnea) se camuflada.","cost":"N/A","type":"HB"},{"name":"Bora Rapaziada","description":"Buffa MOV e VEL de aliados.","cost":"N/A","type":"HB"},{"name":"Meus Capangas","description":"Invoca 2 capangas.","cost":"N/A","type":"HB"},{"name":"Dois Ferros","description":"Pode usar duas armas de fogo.","cost":"N/A","type":"Passiva"}]},{"id":"assassina","name":"Assassina","type":"Avanada","role":"Eliminadora de Alvos","description":"Lenda das sombras, elimina alvos silenciosamente.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Espreitadora","5 Habilidades Mestre em Rastreadora","+100 SOR"],"abilities":[{"name":"Lmina de Veneno","description":"Ataques causam Envenenamento.","cost":"N/A","type":"HB"},{"name":"Sombras Caminhantes","description":"Teleporte via sombras.","cost":"N/A","type":"HB"},{"name":"Tendes Frgeis","description":"Aplica Imobilizado.","cost":"N/A","type":"HB"},{"name":"Instinto Assassino","description":"Causa Medo em alvos com <20% HP.","cost":"N/A","type":"Passiva"},{"name":"Frenesi das Sombras","description":"Fria de sombra, dobra VEL.","cost":"N/A","type":"HB"},{"name":"Minha Garrucha","description":"Finaliza alvo com <15% HP.","cost":"N/A","type":"Reao"}]},{"id":"jounin","name":"Jounin","type":"Avanada","role":"Mestre Elemental / Ttico","description":"Elite ninja que domina ninjutsu avanado.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Kunoichi","+100 INT"],"abilities":[{"name":"Futon","description":"5 lminas de ar em alvos diversos.","cost":"50 MP","type":"Magia"},{"name":"Raiton","description":"5 troves em alvos diversos.","cost":"50 MP","type":"Magia"},{"name":"Katon","description":"Esfera de fogo linear larga.","cost":"50 MP","type":"Magia"},{"name":"Embuir Arma","description":"Infunde arma com elemento.","cost":"30 MP","type":"Magia"},{"name":"Invocao","description":"Invoca animal ninja (D20).","cost":"N/A","type":"HB"},{"name":"Substituio","description":"Troca com tronco ao ser alvejada.","cost":"N/A","type":"Reao"}]},{"id":"dancarina","name":"Danarina","type":"Avanada","role":"Performer Mstica","description":"Transforma o campo em palco com performances mgicas.","bonus_class":{"CAR":5},"requirements":["+50 CAR"],"abilities":[{"name":"Danar","description":"Executa performance ligada ao equipamento.","cost":"N/A","type":"HB"},{"name":"Pirueta Defensiva","description":"Chance de esquivar de ataque fsico.","cost":"N/A","type":"Reao"}]},{"id":"odalisca_de_batalha","name":"Odalisca de Batalha","type":"Avanada","role":"Suporte Supremo / DPS Elegante","description":"Danarina de elite com armas exticas e danas agressivas.","bonus_class":{"CAR":10},"requirements":["4 Performances de Danarina"],"abilities":[{"name":"Swicth","description":"Troca equipamento de dana sem gastar ao.","cost":"N/A","type":"HB"},{"name":"Mestre da Dana","description":"Equipa dois instrumentos simultneos.","cost":"N/A","type":"Passiva"}]},{"id":"cavaleira_alada","name":"Cavaleira Alada","type":"Avanada","role":"Duelista Area","description":"Elite militar do cu, mergulha com velocidade devastadora.","bonus_class":{"FOR":3,"VEL":2},"requirements":["3 Habilidades Mestre em Raptora","+30 FOR"],"abilities":[{"name":"Por Glria","description":"Buffa FOR de aliados.","cost":"N/A","type":"HB"},{"name":"Redemoinho de Lmina","description":"Corte circular de vento.","cost":"N/A","type":"HB"},{"name":"Brisa da Guerra","description":"Ataques ganham lmina de vento extra.","cost":"N/A","type":"HB"},{"name":"Slash de Vento","description":"Lmina de ar  distncia.","cost":"N/A","type":"HB"},{"name":"Suplex Aero","description":"Agarra e arremessa inimigo do cu.","cost":"N/A","type":"HB"},{"name":"Escudo Meu","description":"Pode usar escudos.","cost":"N/A","type":"Passiva"}]},{"id":"cacadora_alada","name":"Caadora Alada","type":"Avanada","role":"DPS / Rastreio","description":"Predadora do cu com viso aguada e arco.","bonus_class":{"VEL":3,"SOR":2},"requirements":["3 Habilidades Mestre em Ranged","+30 VEL"],"abilities":[{"name":"Animal Guia","description":"Invoca esprito animal companheiro.","cost":"N/A","type":"HB"},{"name":"Camuflagem","description":"Entra em camuflagem.","cost":"N/A","type":"HB"},{"name":"Saraivada Area","description":"Chuva de flechas em rea.","cost":"N/A","type":"HB"},{"name":"Colocar Armadilhas","description":"Posiciona armadilha.","cost":"N/A","type":"HB"},{"name":"Tiro Avanado","description":"Flecha colossal linear (Arco Grande).","cost":"N/A","type":"HB"},{"name":"Tiro Duplo","description":"Dispara duas flechas por ataque.","cost":"N/A","type":"Passiva"}]},{"id":"terrana","name":"Terrana","type":"Avanada","role":"Lutadora Arcana / Terra","description":"Devotada  fora bruta da terra, usa martelos e magia.","bonus_class":{"INT":3,"MANA":2},"requirements":["1 Habilidade Mestre em Raptora","1 Habilidade Mestre em Ranged","+30 INT"],"abilities":[{"name":"Me Terra","description":"Cura em rea ao bater martelo.","cost":"20 MP","type":"Magia"},{"name":"Fissura Terrana","description":"Cria fissura no solo.","cost":"30 MP","type":"Magia"},{"name":"A Terra Sobre Mim","description":"Armadura de rocha (dobra AMR/RES).","cost":"20 MP","type":"Magia"},{"name":"Pilar do Martelo","description":"Ataque  distncia com pilar.","cost":"40 MP","type":"Magia"},{"name":"Terremoto Aero","description":"Impacto ssmico ao saltar.","cost":"50 MP","type":"Magia"},{"name":"Vibrao do Solo","description":"Detecta inimigos no solo.","cost":"N/A","type":"Passiva"}]},{"id":"devastadora","name":"Devastadora","type":"Avanada","role":"Dano Areo / Linha de Frente","description":"Especialista em combate areo com espades colossais.","bonus_class":{"FOR":4,"VEL":2},"requirements":["5 Habilidades Mestre em Raptora","5 Habilidades Mestre em Cavaleira Alada","+100 FOR"],"abilities":[{"name":"Ventania do Espado","description":"Empurra alvos com vento.","cost":"N/A","type":"HB"},{"name":"Arrasante Cortante","description":"Corte em alta velocidade.","cost":"N/A","type":"HB"},{"name":"Furaco de Lminas","description":"Tornado de lminas em rea.","cost":"N/A","type":"HB"},{"name":"Rpida e Veloz","description":"Dobra VEL.","cost":"N/A","type":"HB"},{"name":"Corte da Montanha","description":"Corte colossal de vento.","cost":"N/A","type":"HB"},{"name":"Contra-ataque do Vento","description":"Rebate fsico e empurra.","cost":"N/A","type":"Reao"}]},{"id":"atiradora_dos_ceus","name":"Atiradora dos Cus","type":"Avanada","role":"DPS Area","description":"Caadora suprema que domina territrios do ar.","bonus_class":{"VEL":4,"SOR":2},"requirements":["5 Habilidades Mestre em Ranged","5 Habilidades Mestre em Caadora Alada","+100 VEL"],"abilities":[{"name":"Ataque Areo","description":"Disparo vertical preciso.","cost":"N/A","type":"HB"},{"name":"Reposicionamento Areo","description":"Voo rpido e ataque.","cost":"N/A","type":"HB"},{"name":"Bombardeio Areo","description":"Atinge inimigos no trajeto de voo.","cost":"N/A","type":"HB"},{"name":"Alvo Marcado","description":"Marca alvo adicionando SOR ao dano.","cost":"N/A","type":"HB"},{"name":"Alvos Certeiros","description":"Tiros perfeitos em 5 alvos.","cost":"N/A","type":"HB"},{"name":"Minha Flecha  Melhor","description":"Desvia de projtil e contra-ataca.","cost":"N/A","type":"Reao"}]},{"id":"geomancer","name":"Geomancer","type":"Avanada","role":"Maga Elemental / Joias","description":"Maga que desperta poder oculto de joias antigas.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Terrana","+100 INT"],"abilities":[{"name":"Ressonncia","description":"Disparo elemental da joia.","cost":"30 MP","type":"Magia"},{"name":"Jia Equipada","description":"Engata joia na arma (dano elemental).","cost":"N/A","type":"HB"},{"name":"Joia Astral","description":"Buff poderoso da joia.","cost":"30 MP","type":"Magia"},{"name":"Sacrifcio da Jia","description":"Destri joia para duplicar efeito.","cost":"40 MP","type":"Magia"},{"name":"Triplo Gen","description":"Feixe combinado de 3 joias.","cost":"70 MP","type":"Magia"},{"name":"Joalheira","description":"Troca de joias sem gastar ao.","cost":"N/A","type":"Passiva"}]},{"id":"demon","name":"Demon","type":"Avanada","role":"Ameaa / Controle","description":"Guerreiras marcadas pela morte, brutais e imprevisveis.","bonus_class":{"Livre":5},"requirements":["Voltar da morte 10 vezes"],"abilities":[{"name":"Rugido do Demnio","description":"Aplica Medo em rea.","cost":"N/A","type":"HB"},{"name":"Vampirismo","description":"Rouba HP do alvo.","cost":"N/A","type":"HB"},{"name":"Consumir Arma","description":"Destri arma para ganhar status.","cost":"N/A","type":"HB"},{"name":"Embuir Demon","description":"Infunde arma com escurido.","cost":"N/A","type":"HB"},{"name":"Demon Ark","description":"Aplica Medo/Condenao/Morte.","cost":"N/A","type":"HB"},{"name":"Mestre de Armas","description":"Equipa arma instantaneamente.","cost":"N/A","type":"Passiva"}]},{"id":"lord_demon","name":"Lord Demon","type":"Avanada","role":"Senhora da Morte","description":"pice da linhagem demonaca, comanda almas.","bonus_class":{"Livre":10},"requirements":["5 Habilidades Mestre em Demon","Colher 100 almas"],"abilities":[{"name":"Dark Esfera","description":"Absorve alma de inimigos com Medo.","cost":"N/A","type":"HB"},{"name":"Colheita","description":"Suga alma de alvo com Medo (Morte).","cost":"N/A","type":"HB"},{"name":"Aura da Lord","description":"Dobra RES e fora Medo.","cost":"N/A","type":"HB"},{"name":"Dark Arma","description":"Lana armas sacrificadas.","cost":"N/A","type":"HB"},{"name":"ltimo Rugido","description":"Medo global e morte em quem j tem.","cost":"N/A","type":"HB"},{"name":"Tenha Medo de Mim","description":"Chance de aplicar Medo ao receber dano.","cost":"N/A","type":"Reao"}]},{"id":"magos_elementais","name":"Magos Elementais","type":"Avanada","role":"DPS Mgico de rea","description":"Umbros que transformam magia em cataclismos.","bonus_class":{"INT":3,"MANA":2},"requirements":["3 Habilidades Mestre em Mago Negro","+30 INT"],"abilities":[{"name":"Fire+","description":"Exploso de fogo grande rea.","cost":"20 MP","type":"Magia"},{"name":"Blizzard+","description":"Estilhaos de gelo grande rea.","cost":"20 MP","type":"Magia"},{"name":"Thunder+","description":"Trovo colossal em rea.","cost":"20 MP","type":"Magia"},{"name":"Maremoto","description":"Onda empurra inimigos.","cost":"40 MP","type":"Magia"},{"name":"Trifsico","description":"Combina 3 elementos em exploso.","cost":"50 MP","type":"Magia"},{"name":"Manto Refletor","description":"Reflete magia com 50% dano.","cost":"N/A","type":"Reao"}]},{"id":"arcanistas","name":"Arcanistas","type":"Avanada","role":"Maldies / Invocador","description":"Preservam artes proibidas e invocam demnios.","bonus_class":{"MANA":3,"INT":2},"requirements":["3 Habilidades Mestre em Ocultista","+50 MANA"],"abilities":[{"name":"Escurido+","description":"Exploso de trevas.","cost":"25 MP","type":"Magia"},{"name":"Cruz Mana","description":"Drena Mana.","cost":"30 MP","type":"Magia"},{"name":"Sentidus Mortis","description":"Remove sentidos (Silncio/Cegueira).","cost":"40 MP","type":"Magia"},{"name":"Petrificatis","description":"Petrifica alvo.","cost":"40 MP","type":"Magia"},{"name":"Invocar Demnio Menor","description":"Invoca demnio (D20).","cost":"50 MP","type":"Magia"},{"name":"Pacto","description":"Dobra VEL e RES com demnio ativo.","cost":"N/A","type":"Passiva"}]},{"id":"malandro","name":"Malandro","type":"Avanada","role":"Suporte Social / Manipulao","description":"Usa lbia e cartas para manipular o campo.","bonus_class":{"CAR":3,"SOR":2},"requirements":["+20 CAR"],"abilities":[{"name":"Fala Positiva","description":"Dobra atributo de alvo.","cost":"N/A","type":"HB"},{"name":"Fala Negativa","description":"Reduz atributo pela metade.","cost":"N/A","type":"HB"},{"name":"Carta Voadora","description":"Carta ricocheteia em alvos.","cost":"N/A","type":"HB"},{"name":"Carta Marcada","description":"Dobra dano recebido pelo alvo.","cost":"N/A","type":"HB"},{"name":"Malabarismo de Cartas","description":"Impede movimentos em rea.","cost":"N/A","type":"HB"},{"name":"Fala Mansa","description":"Chance de convencer atacante a desistir.","cost":"N/A","type":"Reao"}]},{"id":"arquimagos","name":"Arquimagos","type":"Avanada","role":"DPS Mgico Supremo","description":"Moldam elementos, invocando meteoros e tempestades.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Mago Negro","5 Habilidades Mestre em Mago Elemental","+100 INT"],"abilities":[{"name":"Meteoro","description":"Destruio massiva em rea.","cost":"100 MP","type":"Magia"},{"name":"Vrtex de Fogo","description":"Vrtex que queima rea por turnos.","cost":"50 MP","type":"Magia"},{"name":"Chuva de Raios","description":"Atinge inimigos aleatrios por turnos.","cost":"50 MP","type":"Magia"},{"name":"Nevasca Afiada","description":"Estalactites aleatrias por turnos.","cost":"50 MP","type":"Magia"},{"name":"Super Lua","description":"Lua cura aliados e permanece.","cost":"80 MP","type":"Magia"},{"name":"OVER LUNA","description":"Ignora RES sob efeito da Lua.","cost":"N/A","type":"Passiva"}]},{"id":"necromago","name":"Necromago","type":"Avanada","role":"Controle Absoluto / Necromancia","description":"Traz mortos e usa rituais profanos.","bonus_class":{"MANA":10},"requirements":["5 Habilidades Mestre em Ocultista","5 Habilidades Mestre em Arcanista","+100 INT"],"abilities":[{"name":"Necromancia","description":"Controla alma cada.","cost":"70 MP","type":"Magia"},{"name":"Mortis Dorner","description":"Tenta Morte Instantnea.","cost":"40 MP","type":"Magia"},{"name":"Redoma Sentis","description":"Cega e Silencia rea ao redor.","cost":"50 MP","type":"Magia"},{"name":"Invocar Demnio Superior","description":"Invoca demnio brutal (D20).","cost":"90 MP","type":"Magia"},{"name":"Buraco Negro","description":"Remove todos do campo.","cost":"200 MP","type":"Magia"},{"name":"Toque da Morte","description":"Chance de Condenao ao ser atacado.","cost":"N/A","type":"Reao"}]},{"id":"king_street","name":"King Street","type":"Avanada","role":"Controle Mental / Dominao Social","description":"Rei das ruas que controla vontades com a voz.","bonus_class":{"CAR":10},"requirements":["5 Habilidades Mestre em Malandro","+100 CAR"],"abilities":[{"name":"Corra!","description":"Impulsiona mobilidade de alvo.","cost":"N/A","type":"HB"},{"name":"Beleza Sedutora","description":"Encanta alvos em rea.","cost":"N/A","type":"HB"},{"name":"Ajoelhe-se","description":"Obriga inimigos a se ajoelharem.","cost":"N/A","type":"HB"},{"name":" Sua Vez de Novo","description":"Concede ao extra a aliado.","cost":"N/A","type":"HB"},{"name":"Charme do Malandro","description":"Transforma inimigo em aliado.","cost":"N/A","type":"HB"},{"name":"Estrondo Vocal","description":"Atinge todos atributos do alvo.","cost":"N/A","type":"Passiva"}]},{"id":"apostador","name":"Apostador","type":"Avanada","role":"Manipulador de Probabilidades","description":"Usa baralho especial para efeitos aleatrios poderosos.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Malandro","+100 SOR"],"abilities":[{"name":"Escolha uma Carta","description":"Puxa carta (D80) com efeito contnuo.","cost":"N/A","type":"HB"},{"name":"Valete Rpido","description":"Dobra status fsicos (Carta Valete).","cost":"N/A","type":"HB"},{"name":"Dama Salvadora","description":"Cura e remove status (Carta Dama).","cost":"N/A","type":"HB"},{"name":"Rei do Poder","description":"Exploso em rea (Carta Rei).","cost":"N/A","type":"HB"},{"name":"s da Sorte","description":"Puxa todas cartas (Carta s).","cost":"N/A","type":"HB"},{"name":"Carta na Manga","description":"Troca carta guardada instantaneamente.","cost":"N/A","type":"Passiva"}]},{"id":"shadow_hunters","name":"Shadow Hunters","type":"Avanada","role":"Invocador Sombrio","description":"Extrai sombras de mortos para lutar.","bonus_class":{"Livre":10},"requirements":["Chegar a 1 HP em batalha 100 vezes"],"abilities":[{"name":"Erga-se","description":"Extrai sombra de cadver como soldado.","cost":"N/A","type":"HB"},{"name":"Sombra Salvadora","description":"Sombra absorve dano fatal.","cost":"N/A","type":"Reao"}]},{"id":"monarca_das_sombras","name":"Monarca das Sombras","type":"Avanada","role":"Exrcito Vivo","description":"Comanda exrcito sombrio sozinho.","bonus_class":{"Livre":10},"requirements":["Possuir 4 sombras no nvel 10"],"abilities":[{"name":"Troca de Sombra","description":"Troca de lugar com sombra.","cost":"N/A","type":"HB"},{"name":"Retorno das Sombras","description":"Cura ao perder sombra.","cost":"N/A","type":"Passiva"}]}]`),P5={classes:M5},z5=()=>{const i=ns(),e=A.useRef(null),[n,s]=A.useState("carousel"),[o,u]=A.useState(0),[f,m]=A.useState(null),[b,g]=A.useState("female"),[v,E]=A.useState(null),[T,M]=A.useState(!1),[G,B]=A.useState(""),[U,V]=A.useState(!1),$=D5.races;A.useEffect(()=>{Qt&&(Qt.pause(),Qt.currentTime=0)},[]),A.useEffect(()=>{(async()=>{if(Vt.currentUser)try{const O=je(xe,"characters",Vt.currentUser.uid);(await Pd(O)).exists()&&(console.log("Personagem j existe. Redirecionando..."),i("/jogador-vtt"))}catch(O){console.error("Erro ao verificar personagem:",O)}})()},[i]),A.useEffect(()=>{document.querySelectorAll("audio, video").forEach(N=>{if(!(N.tagName==="VIDEO"&&N.classList.contains("background-video")))try{N.pause(),N.currentTime=0}catch{}})},[]),A.useEffect(()=>{if(n==="carousel"&&e.current){const O=window.innerWidth/2-130,N=o*300-O+130;e.current.scrollTo({left:N,behavior:"smooth"})}},[o,n]);const K=j=>{e.current&&(e.current.scrollLeft+=j.deltaY*4)},re=j=>{if(!j)return"Nenhum";const O={value:"Valor",detail:"Detalhes",details:"Detalhes",free_points:"Pontos Livres",female:"Feminino",male:"Masculino",male_exiled:"Masculino (Exilado)"};return typeof j=="object"?Object.entries(j).map(([N,Ve],ye)=>{if(N==="type")return null;const ee=O[N]||N.toUpperCase().replace(/_/g," ");let me=Ve;return typeof Ve=="object"&&(me=JSON.stringify(Ve).replace(/["{}]/g,"").replace(/:/g,": ").replace(/,/g,", ")),c.jsxs("div",{className:"mb-1",children:[c.jsxs("span",{className:"text-gray-400 font-bold",children:[ee,":"]})," ",c.jsx("span",{className:"text-gray-200",children:me})]},ye)}):j},he=()=>f?typeof f.base_classes=="object"&&!Array.isArray(f.base_classes)?f.id==="viera"?b==="female"?f.base_classes.female:f.base_classes.male||f.base_classes.male_exiled:[]:f.base_classes||[]:[],ae=j=>P5.classes.find(O=>O.name===j),w=()=>{m($[o]),E(null),s("details")},C=()=>{s("carousel"),E(null)},I=async()=>{if(!(!G.trim()||!Vt.currentUser||U)){V(!0);try{const j={basic_info:{character_name:G,race:f.name,level:1,experience:{current:0,max:100},guild_insignia:"",special_image:"",guild_rank_image:""},attributes:{FOR:{value:10},INT:{value:10},SOR:{value:10},CAR:{value:10},VEL:{value:10},CONS:{value:10}},status:{hp:{current:20,max:20},mp:{current:10,max:10},arm:{value:0},res:{value:0},mov:{value:3}},inventory:{gil:500,items:[]},equipment:{slots:[{},{},{},{},{},{},{}]},job_system:{primary_class:{name:v,skills:[]},secondary_class:{name:"Nenhuma",skills:[]},reaction_ability:{name:""},passive_ability:{name:""},class_bonus:{value:""}}};await Mg(je(xe,"characters",Vt.currentUser.uid),{uid:Vt.currentUser.uid,email:Vt.currentUser.email,name:G,race:f.name,class:v,gender:b,createdAt:Gn(),character_sheet:j}),i("/jogador-vtt")}catch(j){console.error("Erro ao salvar personagem:",j),alert("Falha ao invocar personagem."),V(!1)}}},k=$[o];return c.jsxs("div",{className:"relative w-full h-screen overflow-hidden",children:[c.jsx("style",{children:`
        @keyframes scaleIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        .rpg-modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0, 0, 0, 0.85); backdrop-filter: blur(8px); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .rpg-modal-box { position: relative; width: 500px; max-width: 90%; background: #1a120b; border: 2px solid #b45309; box-shadow: 0 0 50px rgba(234, 179, 8, 0.4); padding: 6px; border-radius: 8px; animation: scaleIn 0.3s ease-out forwards; }
        .rpg-modal-inner { background: linear-gradient(to bottom, #f3e6d5, #e7cba8); border: 1px solid #78350f; padding: 40px 20px; border-radius: 4px; text-align: center; display: flex; flex-direction: column; align-items: center; gap: 20px; }
        .rpg-modal-title { font-family: 'Cinzel', serif; font-size: 32px; color: #78350f; font-weight: bold; text-transform: uppercase; text-shadow: 0px 1px 0px rgba(255,255,255,0.6); margin-bottom: 5px; }
        .rpg-modal-subtitle { font-family: 'Cinzel', serif; font-size: 14px; color: #92400e; font-style: italic; border-top: 1px solid rgba(146, 64, 14, 0.3); padding-top: 10px; width: 100%; }
        .rpg-input { width: 100%; padding: 12px; background: #fff8ed; border: 2px solid #854d0e; font-family: 'Cinzel', serif; font-size: 18px; color: #451a03; outline: none; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); border-radius: 4px; }
        .rpg-input:focus { border-color: #d97706; background: #ffffff; }
        .rpg-btn-go { background: linear-gradient(to bottom, #fcd34d, #d97706); border: 1px solid #92400e; padding: 10px 30px; font-family: 'Cinzel', serif; font-weight: bold; font-size: 18px; color: #451a03; text-transform: uppercase; cursor: pointer; border-radius: 4px; box-shadow: 0 4px 0 #92400e; transition: transform 0.1s; }
        .rpg-btn-go:active { transform: translateY(4px); box-shadow: 0 0 0 #92400e; }
        .rpg-btn-go:disabled { filter: grayscale(1); opacity: 0.6; cursor: not-allowed; }
        .rpg-close-btn { position: absolute; top: 10px; right: 15px; background: none; border: none; font-size: 20px; color: #92400e; cursor: pointer; font-weight: bold; }
        .rpg-close-btn:hover { color: #ff0000; }
        .corner { position: absolute; width: 20px; height: 20px; border-color: #fcd34d; border-style: solid; }
        .tl { top: -2px; left: -2px; border-width: 3px 0 0 3px; }
        .tr { top: -2px; right: -2px; border-width: 3px 3px 0 0; }
        .bl { bottom: -2px; left: -2px; border-width: 0 0 3px 3px; }
        .br { bottom: -2px; right: -2px; border-width: 0 3px 3px 0; }
      `}),c.jsxs("div",{className:"ether-container",children:[c.jsx("div",{className:"ether-vortex"}),c.jsx("div",{className:"ether-particles"})]}),c.jsxs("header",{className:"absolute top-0 w-full p-6 z-50 flex justify-between items-center bg-gradient-to-b from-black/90 to-transparent",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"rpg-title text-3xl",children:"Gnese da Alma"}),c.jsx("p",{className:"rpg-subtitle-styled mt-2",children:n==="carousel"?"Determine sua Linhagem Ancestral":`${f?.name} // Customizao`})]}),n==="details"&&c.jsxs("button",{onClick:C,className:"nav-back-btn",children:[c.jsx("span",{children:""})," Seleo"]})]}),n==="carousel"&&c.jsxs("div",{className:"w-full h-full flex flex-col justify-center animate-[fadeIn_1s]",children:[c.jsx("div",{className:"text-center mb-4 z-10",children:c.jsx("h2",{className:"rpg-title text-5xl text-yellow-500 drop-shadow-lg",children:k.name})}),c.jsx("div",{ref:e,onWheel:K,className:"carousel-viewport",children:$.map((j,O)=>c.jsxs("div",{onClick:()=>u(O),className:`race-card-frame ${O===o?"active":""}`,children:[c.jsx("img",{src:j.image,alt:j.name}),c.jsx("div",{className:"card-label",children:j.name})]},j.id))}),c.jsx("div",{className:"text-center mt-10 z-10",children:c.jsxs("button",{onClick:w,className:"confirm-btn w-64 mx-auto",children:["Escolher ",k.name]})})]}),n==="details"&&f&&c.jsxs("div",{className:"details-grid",children:[c.jsx("div",{className:"char-portrait-container",children:c.jsx("img",{src:f.image,alt:f.name,className:"char-portrait"})}),c.jsxs("div",{className:"info-scroll-area custom-scrollbar",children:[c.jsxs("div",{className:"glass-panel mt-8 border-l-4 border-yellow-600",children:[c.jsx("h3",{className:"section-header !border-none !mb-2 text-yellow-500",children:"Descrio"}),c.jsxs("p",{className:"description-text",children:['"',f.description,'"']}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] uppercase text-blue-400 font-bold",children:"Caractersticas"}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.characteristics})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] uppercase text-green-400 font-bold",children:"Bnus Racial"}),c.jsx("div",{className:"text-xs text-gray-300 font-mono mt-1",children:re(f.racial_bonus)})]})]})]}),c.jsxs("div",{className:"glass-panel flex flex-col gap-2",children:[c.jsx("span",{className:"text-xs text-gray-400 uppercase font-bold tracking-widest",children:"Gnero"}),c.jsxs("div",{className:"flex w-full",children:[c.jsx("div",{onClick:()=>{g("female"),E(null)},className:`gender-option ${b==="female"?"active":""}`,children:"Feminino"}),c.jsx("div",{onClick:()=>{g("male"),E(null)},className:`gender-option ${b==="male"?"active":""}`,children:"Masculino"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"rpg-title text-xl mb-4 text-white",children:"Vocao"}),c.jsx("div",{className:"class-selector-grid",children:he().map(j=>{const O=ae(j);return c.jsxs("div",{onClick:()=>E(j),className:`class-btn ${v===j?"selected":""}`,children:[c.jsx("span",{className:"class-btn-title",children:j}),c.jsx("span",{className:"class-btn-role",children:O?.role||"Bsico"})]},j)})}),v&&(()=>{const j=ae(v);return j?c.jsxs("div",{className:"class-detail-container",children:[c.jsxs("div",{className:"cd-header",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"cd-title rpg-title",children:j.name}),c.jsxs("div",{className:"cd-meta text-blue-400",children:[j.type," // ",j.role]})]}),c.jsxs("div",{className:"cd-req",children:[c.jsx("span",{className:"cd-req-label",children:"Requisitos"}),c.jsx("div",{className:"cd-req-val",children:j.requirements?.length?j.requirements.join(", "):"Nenhum"})]})]}),c.jsxs("div",{className:"cd-desc",children:['"',j.description,'"']}),c.jsxs("div",{className:"cd-bonus-box",children:[c.jsx("span",{className:"text-xs uppercase font-bold text-blue-300",children:"Bnus de Classe"}),c.jsx("span",{className:"font-mono text-sm text-white",children:re(j.bonus_class)})]}),c.jsxs("div",{children:[c.jsx("h5",{className:"text-xs uppercase text-yellow-500 font-bold mb-3 tracking-wider border-b border-white/10 pb-1 inline-block",children:"Habilidades Iniciais"}),c.jsx("div",{className:"cd-abilities-grid",children:j.abilities?.map((O,N)=>c.jsxs("div",{className:"cd-ability-card",children:[c.jsxs("div",{className:"cd-ab-header",children:[c.jsx("span",{className:"cd-ab-name",children:O.name}),c.jsx("span",{className:"cd-ab-cost",children:O.cost})]}),c.jsx("p",{className:"cd-ab-desc",children:O.description})]},N))})]})]}):c.jsx("div",{className:"p-4 text-center",children:"Carregando..."})})()]}),c.jsx("div",{className:"mt-8 mb-10",children:c.jsx("button",{disabled:!v,onClick:()=>M(!0),className:"confirm-btn",children:v?"Finalizar Criao":"Selecione uma Vocao"})})]})]}),T&&c.jsx("div",{className:"rpg-modal-overlay",children:c.jsxs("div",{className:"rpg-modal-box",children:[c.jsx("div",{className:"corner tl"}),c.jsx("div",{className:"corner tr"}),c.jsx("div",{className:"corner bl"}),c.jsx("div",{className:"corner br"}),c.jsxs("div",{className:"rpg-modal-inner",children:[c.jsxs("div",{className:"w-full",children:[c.jsx("h3",{className:"rpg-modal-title",children:"Identidade"}),c.jsx("p",{className:"rpg-modal-subtitle",children:"Como a histria o conhecer?"})]}),c.jsxs("div",{className:"w-full flex gap-2",children:[c.jsx("input",{type:"text",value:G,onChange:j=>B(j.target.value),placeholder:"Nome do Aventureiro",className:"rpg-input",autoFocus:!0}),c.jsx("button",{onClick:I,disabled:!G.trim()||U,className:"rpg-btn-go",children:U?"...":"GO"})]}),c.jsx("button",{className:"rpg-close-btn",onClick:()=>M(!1),children:""})]})]})})]})},V5="/assets/fundo-jogador-nsWQkznx.jpg",L5="/assets/level-up-BOEM_DXL.mp3",U5=i=>{if(!i)return"#ffffff";let e=0;for(let s=0;s<i.length;s++)e=i.charCodeAt(s)+((e<<5)-e);const n=(e&16777215).toString(16).toUpperCase();return"#"+"00000".substring(0,6-n.length)+n},B5=({ping:i,gridSizePx:e})=>{const n=i.gX*e+e/2,s=i.gY*e+e/2;return c.jsxs("div",{className:`ping-marker ${i.isMaster?"master-ping":""}`,style:{left:n,top:s,"--ping-color":i.color},children:[c.jsx("div",{className:"ping-center",style:{backgroundColor:i.color}}),c.jsx("div",{className:"ping-ripple",style:{borderColor:i.color}}),i.isMaster&&c.jsx("div",{className:"ping-ripple delay",style:{borderColor:i.color}}),c.jsx("div",{className:"ping-name",style:{color:i.color},children:i.userName})]})},H5=({token:i,gridSize:e,isMaster:n,onUpdate:s,onStart:o,charData:u,isHighlighted:f})=>{const[m,b]=A.useState(""),g=A.useRef(i.stats?.hp?.current);A.useEffect(()=>{let B;i.type==="player"&&u?B=u.character_sheet?.status?.hp?.current:i.type==="enemy"&&i.stats&&(B=i.stats.hp.current);const U=g.current;if(U!==void 0&&B!==void 0&&B!==U){B<U?b("flash-damage"):B>U&&b("flash-heal");const V=setTimeout(()=>b(""),1e3);return()=>clearTimeout(V)}g.current=B},[i.stats?.hp?.current,u?.character_sheet?.status?.hp?.current]);const v=e*(i.size||1);let E=i.img;i.type==="player"&&u&&u.character_sheet?.imgUrl&&(E=u.character_sheet.imgUrl);const T=i.imgX!==void 0?i.imgX:50,M=i.imgY!==void 0?i.imgY:50,G=i.visible!==!1;return!n&&!G?null:c.jsxs("div",{className:`vtt-token ${i.type} ${m} ${G?"":"ghost-token"} ${f?"blinking-highlight":""}`,style:{width:v,height:v,left:i.x*e,top:i.y*e,cursor:n||i.type==="player"&&i.controlledBy==="me"?"grab":"default",zIndex:n?100:50},onMouseDown:B=>o(B,i),onTouchStart:B=>o(B,i),children:[c.jsx("div",{className:"token-inner",style:{backgroundImage:`url(${E})`,backgroundPosition:`${T}% ${M}%`}}),n&&c.jsxs("div",{className:"token-sizer",children:[c.jsx("button",{onMouseDown:B=>{B.stopPropagation(),s("resize",i,-1)},onTouchStart:B=>{B.stopPropagation(),s("resize",i,-1)},children:"-"}),c.jsx("button",{onMouseDown:B=>{B.stopPropagation(),s("resize",i,1)},onTouchStart:B=>{B.stopPropagation(),s("resize",i,1)},children:"+"})]}),c.jsx("div",{className:"token-name",children:i.name})]})};function rw({sessaoData:i,isMaster:e,showManager:n,onCloseManager:s,currentUserUid:o,personagensData:u,highlightTokenId:f}){const[m,b]=A.useState(null),[g,v]=A.useState(!1),[E,T]=A.useState([]),[M,G]=A.useState([]),[B,U]=A.useState([]),[V,$]=A.useState(""),[K,re]=A.useState(null),[he,ae]=A.useState(i?.grid_cols||25),[w,C]=A.useState(0),[I,k]=A.useState(null),[j,O]=A.useState({x:0,y:0}),[N,Ve]=A.useState("cursor"),[ye,ee]=A.useState(!1),[me,Re]=A.useState(null),[De,Qe]=A.useState(null),[z,se]=A.useState("#00f2ff"),[le,Q]=A.useState(!1),[ie,ge]=A.useState(null),[Ee,He]=A.useState([]),we=A.useRef(null),it=A.useRef(null),st=A.useRef(0);A.useEffect(()=>{if(i&&(b(i.active_map||null),i.grid_cols&&i.grid_cols!==he&&ae(i.grid_cols),i.tokens?T(i.tokens):T([]),i.pings?G(i.pings):G([]),e)){const de=i.mapas||[],Ce=i.saved_maps||[],Me=de.map((P,_e)=>{const Ue=Ce.find(Bt=>Bt.url===P);return Ue||{id:`temp_${_e}`,name:`Mapa Importado ${_e+1}`,url:P,isTemp:!0}});U(Me)}},[i,e]),A.useEffect(()=>{if(!e)return;const de=setInterval(()=>{if(!M||M.length===0)return;const Ce=Date.now(),Me=M.filter(P=>Ce-P.createdAt>3e3);if(Me.length>0){const P=je(xe,"sessoes",i.id);Me.forEach(async _e=>{try{await qe(P,{pings:Sc(_e)})}catch(Ue){console.log("Erro ao limpar ping",Ue)}})}},1e3);return()=>clearInterval(de)},[M,e,i?.id]);const Ct=()=>{if(we.current){const de=we.current.offsetWidth;if(he>0){const Ce=de/he;C(Ce)}}};A.useEffect(()=>(Ct(),window.addEventListener("resize",Ct),()=>window.removeEventListener("resize",Ct)),[m,he]);const At=de=>{if(!we.current)return{x:0,y:0};const Ce=we.current.getBoundingClientRect(),Me=de.touches&&de.touches.length>0?de.touches[0].clientX:de.clientX,P=de.touches&&de.touches.length>0?de.touches[0].clientY:de.clientY;return{x:Me-Ce.left,y:P-Ce.top}},Xt=async de=>{if(!m)return;const Ce=Date.now();if(Ce-st.current<5e3)return;st.current=Ce;const Me=At(de),P=Math.floor(Me.x/w),_e=Math.floor(Me.y/w);let Ue="Desconhecido";if(e)Ue="Mestre";else{const vt=u?.find(rt=>rt.uid===o);vt&&(Ue=vt.name)}const Bt={id:Date.now().toString()+Math.random(),gX:P,gY:_e,color:e?"#ffd700":U5(o),isMaster:!!e,createdAt:Date.now(),userName:Ue,uid:o||"anon"};try{await qe(je(xe,"sessoes",i.id),{pings:Ac(Bt)})}catch(vt){console.error("Erro ao criar ping:",vt)}},Ut=(de,Ce)=>{if(N!=="cursor")return;const Me=Ce.type==="player"&&Ce.uid===o;if(!e&&!Me)return;de.stopPropagation();const P=de.touches?de.touches[0].clientX:de.clientX,_e=de.touches?de.touches[0].clientY:de.clientY,Ue=de.currentTarget.getBoundingClientRect();O({x:P-Ue.left,y:_e-Ue.top}),k({...Ce,tempX:Ce.x*w,tempY:Ce.y*w})},Jt=de=>{if(ye&&N==="ruler"){const Ce=At(de);Qe({gX:Math.floor(Ce.x/w),gY:Math.floor(Ce.y/w)})}if(le&&N==="paint"){const Ce=At(de),Me=Math.floor(Ce.x/w),P=Math.floor(Ce.y/w);He(_e=>_e.find(Ue=>Ue.gX===Me&&Ue.gY===P)?_e:[..._e,{gX:Me,gY:P,color:z}])}if(I){const Ce=de.touches?de.touches[0].clientX:de.clientX,Me=de.touches?de.touches[0].clientY:de.clientY,P=we.current.getBoundingClientRect();let _e=Ce-P.left-j.x,Ue=Me-P.top-j.y;const Bt=I.size||1,vt=P.width-w*Bt,rt=P.height-w*Bt;k(cn=>({...cn,tempX:Math.max(0,Math.min(_e,vt)),tempY:Math.max(0,Math.min(Ue,rt))}))}},Y=async()=>{if(ye&&(ee(!1),Re(null),Qe(null)),le&&N==="paint"&&(Q(!1),Ee.length>0)){const de={groupId:ie,color:z,cells:Ee};try{await qe(je(xe,"sessoes",i.id),{painted_groups:Ac(de)})}catch(Ce){console.error("Erro ao salvar pintura",Ce)}He([]),ge(null)}if(I){const de=Math.round(I.tempX/w),Ce=Math.round(I.tempY/w),Me=E.map(P=>P.id===I.id?{...P,x:de,y:Ce}:P);T(Me),k(null);try{await qe(je(xe,"sessoes",i.id),{tokens:Me})}catch(P){console.error("Erro ao mover token",P)}}},Ne=async(de,Ce,Me)=>{if(!e)return;let P=[...E];const _e=P.findIndex(Ue=>Ue.id===Ce.id);if(_e!==-1&&de==="resize"){let Ue=(P[_e].size||1)+Me;Ue<1&&(Ue=1),Ue>4&&(Ue=4),P[_e].size=Ue,T(P),await qe(je(xe,"sessoes",i.id),{tokens:P})}},ve=de=>{if(N==="ping"){de.cancelable&&de.preventDefault(),Xt(de);return}if(N==="paint"){de.cancelable&&de.preventDefault(),Q(!0);const Ce=Date.now().toString();ge(Ce);const Me=At(de),P=Math.floor(Me.x/w),_e=Math.floor(Me.y/w);He([{gX:P,gY:_e,color:z}]);return}if(N==="ruler"||de.button===2){de.cancelable&&de.preventDefault(),ee(!0);const Ce=At(de),Me=Math.floor(Ce.x/w),P=Math.floor(Ce.y/w);Re({gX:Me,gY:P}),Qe({gX:Me,gY:P})}},Se=async de=>{if(!e)return;const Ce=Math.max(1,Math.min(100,Number(de)));ae(Ce),await qe(je(xe,"sessoes",i.id),{grid_cols:Ce})},Ze=()=>{if(!me||!De)return"0m";const de=Math.abs(me.gX-De.gX),Ce=Math.abs(me.gY-De.gY),Me=de+Ce;return`${(Me*1.5).toFixed(1)}m (${Me} qd)`},Le=async de=>{if(e)try{await qe(je(xe,"sessoes",i.id),{painted_groups:Sc(de)})}catch(Ce){console.error("Erro ao apagar pintura",Ce)}},It=async de=>{const Ce={id:de.id.toString().startsWith("temp")?Date.now().toString():de.id,name:V||de.name,url:de.url},Me=je(xe,"sessoes",i.id);de.isTemp||await qe(Me,{saved_maps:Sc(de)}),await qe(Me,{saved_maps:Ac(Ce)}),re(null),$("")},nt=async de=>{await qe(je(xe,"sessoes",i.id),{active_map:de}),s&&s(),v(!1)},Zt=async()=>{window.confirm("Fechar o mapa para todos?")&&await qe(je(xe,"sessoes",i.id),{active_map:null})};return!m&&!e&&!n?null:c.jsxs(c.Fragment,{children:[m&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"rotate-device-overlay",children:[c.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"#ffcc00",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"spin-phone-icon",children:[c.jsx("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}),c.jsx("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"})]}),c.jsx("h2",{style:{marginTop:"20px",fontSize:"20px",textShadow:"0 0 10px #ffcc00"},children:"VIRE O DISPOSITIVO"}),c.jsx("p",{style:{fontSize:"12px",color:"#ccc",maxWidth:"80%",margin:"10px auto"},children:"A Mesa Virtual requer a tela na horizontal para liberar os controles de forma correta e exibir o mapa inteiro."})]}),c.jsxs("div",{className:`tabletop-wrapper ${g?"minimized":""}`,children:[c.jsxs("div",{className:"tt-header",children:[c.jsxs("span",{className:"tt-title",children:[" ",m.name]}),!g&&c.jsxs("div",{className:"tt-toolbar",children:[c.jsx("button",{className:`tool-btn ${N==="cursor"?"active":""}`,onClick:()=>Ve("cursor"),title:"Mover",children:""}),c.jsx("button",{className:`tool-btn ${N==="ruler"?"active":""}`,onClick:()=>Ve("ruler"),title:"Rgua",children:""}),c.jsx("button",{className:`tool-btn ${N==="ping"?"active":""}`,onClick:()=>Ve("ping"),title:"Ping",children:""}),e&&c.jsx("button",{className:`tool-btn ${N==="paint"?"active":""}`,onClick:()=>Ve("paint"),title:"Pintar Mapa",children:""}),e&&N==="paint"&&c.jsx("div",{className:"paint-colors",children:c.jsx("input",{type:"color",value:z,onChange:de=>se(de.target.value),title:"Escolher Cor"})}),e&&c.jsxs("div",{className:"grid-control-box",children:[c.jsx("span",{className:"grid-label",children:"GRID"}),c.jsxs("div",{className:"grid-input-wrapper",children:[c.jsx("button",{className:"grid-btn-mini",onClick:()=>Se(he-1),children:"-"}),c.jsx("input",{type:"number",className:"grid-number-display",value:he,onChange:de=>Se(de.target.value)}),c.jsx("button",{className:"grid-btn-mini",onClick:()=>Se(he+1),children:"+"})]})]}),e&&i.painted_groups?.length>0&&c.jsx("div",{className:"paint-groups-manager",children:i.painted_groups.map((de,Ce)=>c.jsxs("button",{className:"paint-group-btn",onClick:()=>Le(de),title:"Apagar Pintura",children:["M",Ce+1," "]},de.groupId))})]}),c.jsxs("div",{className:"tt-controls",children:[c.jsx("button",{onClick:()=>v(!g),children:g?"":""}),e&&c.jsx("button",{className:"close-x",onClick:Zt,children:""})]})]}),!g&&c.jsx("div",{className:"tt-viewport",children:c.jsxs("div",{className:"map-layer-container",ref:we,onMouseDown:ve,onTouchStart:ve,onMouseMove:Jt,onTouchMove:Jt,onMouseUp:Y,onTouchEnd:Y,onMouseLeave:Y,onTouchCancel:Y,onContextMenu:de=>de.preventDefault(),style:{cursor:N==="ruler"?"crosshair":N==="ping"?"copy":N==="paint"?"cell":"default"},children:[c.jsx("img",{ref:it,src:m.url,alt:"Map",className:"map-img-element"}),w>0&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"paint-layer",children:[i.painted_groups?.map(de=>de.cells.map((Ce,Me)=>c.jsx("div",{className:"painted-grid-cell",style:{left:Ce.gX*w,top:Ce.gY*w,width:w,height:w,backgroundColor:de.color}},`${de.groupId}-${Me}`))),Ee.map((de,Ce)=>c.jsx("div",{className:"painted-grid-cell",style:{left:de.gX*w,top:de.gY*w,width:w,height:w,backgroundColor:de.color}},`temp-${Ce}`))]}),c.jsx("div",{className:"grid-layer",style:{backgroundSize:`${w}px ${w}px`,backgroundImage:"linear-gradient(to right, rgba(255,255,255,0.2) 1px, transparent 1px), linear-gradient(to bottom, rgba(255,255,255,0.2) 1px, transparent 1px)"}}),c.jsxs("div",{className:"tokens-layer",children:[E.map(de=>I&&I.id===de.id?null:c.jsx(H5,{token:de,gridSize:w,isMaster:e,onUpdate:Ne,onStart:Ut,charData:de.type==="player"?u?.find(Ce=>Ce.uid===de.uid):null,isHighlighted:de.id===f},de.id)),I&&c.jsx("div",{className:`vtt-token ${I.type} dragging`,style:{width:w*(I.size||1),height:w*(I.size||1),left:I.tempX,top:I.tempY,cursor:"grabbing",zIndex:1e3},children:c.jsx("div",{className:"token-inner",style:{backgroundImage:`url(${I.img})`,backgroundPosition:`${I.imgX||50}% ${I.imgY||50}%`}})})]}),c.jsx("div",{className:"pings-layer",children:M.map(de=>c.jsx(B5,{ping:de,gridSizePx:w},de.id))})]}),ye&&me&&De&&c.jsxs("div",{className:"ruler-overlay",children:[c.jsxs("svg",{width:"100%",height:"100%",children:[c.jsx("path",{d:`M ${me.gX*w+w/2} ${me.gY*w+w/2} 
                                                    L ${De.gX*w+w/2} ${me.gY*w+w/2} 
                                                    L ${De.gX*w+w/2} ${De.gY*w+w/2}`,stroke:"#ffcc00",strokeWidth:"3",strokeDasharray:"10,5",fill:"none",filter:"drop-shadow(0px 0px 2px black)"}),c.jsx("circle",{cx:me.gX*w+w/2,cy:me.gY*w+w/2,r:"4",fill:"#ffcc00",stroke:"black"}),c.jsx("circle",{cx:De.gX*w+w/2,cy:De.gY*w+w/2,r:"4",fill:"#ffcc00",stroke:"black"})]}),c.jsx("div",{className:"ruler-tag",style:{left:De.gX*w+w/2+15,top:De.gY*w+w/2+15},children:Ze()})]})]})})]})]}),e&&n&&c.jsx("div",{className:"manager-overlay",onClick:s,children:c.jsxs("div",{className:"manager-box",onClick:de=>de.stopPropagation(),children:[c.jsx("h3",{className:"manager-title",children:"SALA DE CARTOGRAFIA"}),c.jsx("div",{className:"manager-list",children:B.map((de,Ce)=>c.jsxs("div",{className:"manager-item",children:[c.jsx("img",{src:de.url,className:"thumb-preview",alt:"thumb"}),K===de.id?c.jsx("input",{className:"manager-name-input",value:V,onChange:Me=>$(Me.target.value),placeholder:"Nome",autoFocus:!0}):c.jsx("span",{className:"map-name-span",children:de.name}),K===de.id?c.jsx("button",{className:"btn-action-sm btn-save-name",onClick:()=>It(de),children:"SALVAR"}):c.jsx("button",{className:"btn-action-sm",onClick:()=>{re(de.id),$(de.name)},children:"RENOMEAR"}),c.jsx("button",{className:"btn-action-sm btn-activate",onClick:()=>nt(de),children:"ABRIR"})]},Ce))}),c.jsx("button",{className:"btn-cancelar-main",onClick:s,children:"FECHAR"})]})}),c.jsx("style",{children:`
            .tabletop-wrapper { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90vw; height: 85vh; background: #0b0b0b; border: 2px solid #ffcc00; z-index: 1000; display: flex; flex-direction: column; box-shadow: 0 0 100px rgba(0,0,0,0.9); border-radius: 8px; }
            .tabletop-wrapper.minimized { width: 400px; height: 45px; top: 96%; left: 50%; border-color: #444; border-radius: 10px 10px 0 0; }
            .tt-header { height: 45px; background: #1a1a1a; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; padding: 0 15px; }
            .tt-title { color: #ffcc00; font-weight: bold; letter-spacing: 1px; font-size: 14px; }
            .tt-toolbar { display: flex; gap: 15px; align-items: center; background: #000; padding: 4px 15px; border-radius: 20px; border: 1px solid #333; flex-wrap: wrap; }
            .tool-btn { background: none; border: none; font-size: 18px; cursor: pointer; opacity: 0.5; }
            .tool-btn.active { opacity: 1; border-bottom: 2px solid #00f2ff; }
            .tt-controls button { background: none; border: none; color: #aaa; cursor: pointer; margin-left: 10px; }
            .tt-viewport { flex: 1; background: #050505; overflow: hidden; display: flex; align-items: center; justify-content: center; position: relative; }
            .grid-control-box { display: flex; align-items: center; gap: 8px; border-left: 1px solid #444; padding-left: 12px; margin-left: 5px; }
            .grid-label { font-size: 10px; color: #888; font-weight: bold; }
            .grid-input-wrapper { display: flex; align-items: center; background: #222; border: 1px solid #444; border-radius: 4px; }
            .grid-btn-mini { background: #333; color: #fff; border: none; width: 20px; cursor: pointer; }
            .grid-number-display { width: 30px; background: #222; border: none; color: #ffcc00; text-align: center; font-size: 12px; outline: none; }
            
            /* TOQUE NATIVO (MOBILE) - OBRIGA O GRID A IGNORAR O SCROLL DA PGINA PARA TOQUES FLUIDOS */
            .map-layer-container { position: relative; box-shadow: 0 0 30px #000; user-select: none; touch-action: none; }
            .map-img-element { display: block; max-width: 100%; max-height: 80vh; object-fit: contain; pointer-events: none; }
            
            .grid-layer, .tokens-layer, .pings-layer, .ruler-overlay, .paint-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
            .grid-layer { pointer-events: none; z-index: 2; opacity: 0.6; }
            .paint-layer { pointer-events: none; z-index: 3; }
            .tokens-layer { z-index: 5; }
            .pings-layer { z-index: 20; pointer-events: none; }
            .ruler-overlay { z-index: 10; pointer-events: none; }
            .ruler-tag { position: absolute; background: rgba(0,0,0,0.9); color: #ffcc00; border: 1px solid #ffcc00; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; pointer-events: none; z-index: 20; }

            /* --- OVERLAY PARA FORAR CELULAR NA HORIZONTAL --- */
            .rotate-device-overlay { display: none; }
            @media screen and (max-width: 950px) and (orientation: portrait) {
                .rotate-device-overlay {
                    display: flex; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
                    background: #000; z-index: 9999999; flex-direction: column; align-items: center; justify-content: center;
                    color: #ffcc00; font-family: 'Cinzel', serif; text-align: center; padding: 20px; box-sizing: border-box;
                }
                .tabletop-wrapper { display: none !important; }
            }
            .spin-phone-icon { animation: spinPhone 2s ease-in-out infinite; }
            @keyframes spinPhone { 0% { transform: rotate(0deg); } 50% { transform: rotate(-90deg); } 100% { transform: rotate(-90deg); } }

            /* --- ESTILOS DE PING E NOMES --- */
            .ping-marker {
                position: absolute;
                width: 0; height: 0;
                transform: translate(-50%, -50%);
                pointer-events: none;
                z-index: 20;
            }
            .ping-center {
                position: absolute;
                left: -6px; top: -6px;
                width: 12px; height: 12px;
                border-radius: 50%;
                box-shadow: 0 0 10px var(--ping-color);
                animation: pingPop 0.3s ease-out;
            }
            .ping-ripple {
                position: absolute;
                left: -25px; top: -25px;
                width: 50px; height: 50px;
                border-radius: 50%;
                border: 3px solid;
                opacity: 0;
                box-shadow: 0 0 5px var(--ping-color);
                animation: pingRipple 1.5s ease-out infinite;
            }
            .ping-ripple.delay { animation-delay: 0.5s; }
            
            .ping-name {
                position: absolute; 
                top: 25px; left: 50%; 
                transform: translateX(-50%);
                background: rgba(0,0,0,0.85);
                padding: 2px 8px; border-radius: 4px; 
                font-size: 11px; font-weight: bold; 
                white-space: nowrap; font-family: sans-serif;
            }

            .ping-marker.master-ping .ping-center {
                width: 16px; height: 16px; left: -8px; top: -8px;
                box-shadow: 0 0 20px #ffd700, 0 0 40px #ffd700;
                background-color: #ffd700 !important;
            }
            .ping-marker.master-ping .ping-ripple {
                border-color: #ffd700 !important;
                border-width: 4px;
                animation-duration: 1s;
                width: 60px; height: 60px; left: -30px; top: -30px;
            }

            @keyframes pingPop { 
                0% { transform: scale(0); opacity: 0; } 
                80% { transform: scale(1.2); opacity: 1; }
                100% { transform: scale(1); opacity: 1; } 
            }
            @keyframes pingRipple {
                0% { transform: scale(0.2); opacity: 1; border-width: 3px; }
                100% { transform: scale(2.0); opacity: 0; border-width: 0px; }
            }

            /* --- ESTILOS DA PINTURA DE MAPA (GLASSMORPHISM) --- */
            .paint-colors { display: flex; align-items: center; margin-left: 10px; border-left: 1px solid #444; padding-left: 10px; }
            .paint-colors input[type="color"] { background: none; border: none; width: 25px; height: 25px; cursor: pointer; padding: 0; }
            .paint-groups-manager { display: flex; gap: 5px; margin-left: 10px; align-items: center; }
            .paint-group-btn { background: #222; border: 1px solid #555; color: #fff; padding: 2px 6px; font-size: 10px; border-radius: 4px; cursor: pointer; transition: 0.2s; }
            .paint-group-btn:hover { background: #f44; border-color: #f44; }

            .painted-grid-cell {
                position: absolute;
                backdrop-filter: blur(2px);
                animation: pulsePaint 2s infinite alternate ease-in-out;
                pointer-events: none;
                box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
                border-radius: 2px;
            }
            @keyframes pulsePaint {
                0% { filter: brightness(0.8); opacity: 0.6; }
                100% { filter: brightness(1.2); opacity: 1; }
            }

            /* --- TOKENS --- */
            .vtt-token { position: absolute; border-radius: 50%; box-shadow: 0 0 10px #000; z-index: 10; overflow: visible; }
            .vtt-token.dragging { z-index: 100; transition: none; box-shadow: 0 10px 20px rgba(0,0,0,0.8); transform: scale(1.05); }
            .vtt-token.enemy { border: 2px solid #f44; }
            .vtt-token.player { border: 2px solid #00f2ff; }
            .vtt-token.object { border: 2px dashed #ffcc00; border-radius: 4px; } 
            
            .vtt-token.ghost-token { opacity: 0.5; filter: grayscale(100%); border-style: dashed; }

            /* ANIMAO DE DESTAQUE (BLINK/PISCAR) */
            .blinking-highlight {
                animation: superBlink 0.5s infinite alternate !important;
                border: 4px solid #ffcc00 !important;
                box-shadow: 0 0 30px #ffcc00, 0 0 50px rgba(255, 204, 0, 0.5) !important;
                z-index: 200 !important;
            }
            @keyframes superBlink {
                0% { filter: brightness(1); transform: scale(1); }
                100% { filter: brightness(1.8); transform: scale(1.2); }
            }

            .token-inner { width: 100%; height: 100%; border-radius: inherit; background-size: cover; pointer-events: none; background-repeat: no-repeat; }
            .token-name { position: absolute; bottom: -15px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color: #fff; font-size: 10px; padding: 2px 5px; border-radius: 4px; white-space: nowrap; pointer-events: none; opacity: 0; transition: 0.2s; z-index: 15; text-shadow: 0 0 3px #000; }
            .vtt-token:hover .token-name { opacity: 1; }
            
            .token-sizer { position: absolute; top: -10px; right: -20px; display: flex; flex-direction: column; opacity: 0; transition: 0.2s; gap: 2px; }
            .vtt-token:hover .token-sizer { opacity: 1; }
            .token-sizer button { width: 15px; height: 15px; background: #000; color: #fff; border: 1px solid #555; border-radius: 50%; font-size: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
            .token-sizer button:hover { border-color: #ffcc00; color: #ffcc00; }

            .flash-damage { animation: flashRed 0.5s; }
            .flash-heal { animation: flashGreen 0.5s; }
            @keyframes flashRed { 0% { box-shadow: 0 0 0 #f00; } 50% { box-shadow: 0 0 20px #f00; border-color: #f00; } 100% { box-shadow: 0 0 0 #000; } }
            @keyframes flashGreen { 0% { box-shadow: 0 0 0 #0f0; } 50% { box-shadow: 0 0 20px #0f0; border-color: #0f0; } 100% { box-shadow: 0 0 0 #000; } }

            .manager-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index: 10000; display:flex; align-items:center; justify-content:center; }
            .manager-box { width: 700px; max-height: 85vh; background: #080808; border: 2px solid #00f2ff; padding: 25px; display:flex; flex-direction:column; border-radius: 8px; }
            .manager-title { color: #00f2ff; border-bottom: 1px solid #00f2ff; padding-bottom: 15px; margin: 0; }
            .manager-list { overflow-y: auto; flex: 1; margin-top: 20px; border: 1px solid #333; background: #000; }
            .manager-item { display: flex; align-items: center; padding: 15px; border-bottom: 1px solid #333; gap: 15px; }
            .thumb-preview { width: 80px; height: 50px; object-fit: cover; border: 1px solid #555; }
            .manager-name-input { flex: 1; background: #111; border: 1px solid #444; color: #fff; padding: 8px; }
            .map-name-span { flex: 1; color: #fff; font-size: 14px; }
            .btn-action-sm { padding: 8px 15px; font-size: 11px; cursor: pointer; border: 1px solid #555; background: transparent; color: #ccc; }
            .btn-activate { border-color: #00f2ff; color: #00f2ff; margin-left: 10px; }
            .btn-save-name { color: #0f0; border-color: #0f0; }
            .btn-cancelar-main { width: 100%; background: #000; color: #fff; border: 1px solid #fff; padding: 14px; cursor: pointer; margin-top: 20px; }
        `})]})}function ow({sessaoData:i,isMaster:e,showManager:n,onCloseManager:s}){const[o,u]=A.useState(null),[f,m]=A.useState(!1),[b,g]=A.useState([]),[v,E]=A.useState(""),[T,M]=A.useState(null);A.useEffect(()=>{if(i&&(u(i.active_scenery||null),e)){const U=i.cenarios||[];g(U)}},[i,e]),A.useEffect(()=>{o&&m(!1)},[o?.url]);const G=async()=>{if(!T)return;const V={url:T,name:v||"Ambiente",timestamp:Date.now()};try{const $=je(xe,"sessoes",i.id);await qe($,{active_scenery:V}),s&&s(),E(""),M(null)}catch($){console.error("Erro ao projetar cenrio:",$)}},B=async()=>{if(window.confirm("Fechar o cenrio para todos?"))try{const U=je(xe,"sessoes",i.id);await qe(U,{active_scenery:null})}catch(U){console.error(U)}};return!o&&!n?null:c.jsxs(c.Fragment,{children:[o&&c.jsxs("div",{className:`scenery-layer ${f?"minimized":"immersive"}`,children:[!f&&c.jsxs("div",{className:"scenery-viewport",children:[c.jsx("div",{className:"vignette-mask"}),c.jsx("img",{src:o.url,alt:"Cenrio",className:"scenery-img"}),c.jsx("div",{className:"scenery-title-overlay",children:c.jsx("h2",{children:o.name})})]}),c.jsxs("div",{className:"scenery-hud",children:[f&&c.jsxs("span",{className:"mini-label",children:[" ",o.name]}),c.jsxs("div",{className:"scenery-actions",children:[c.jsx("button",{className:"btn-scenery-toggle",onClick:()=>m(!f),title:f?"Maximizar Cenrio":"Minimizar",children:f?"":""}),e&&c.jsx("button",{className:"btn-scenery-close",onClick:B,title:"Encerrar Projeo",children:""})]})]})]}),e&&n&&c.jsx("div",{className:"scenery-manager-overlay",onClick:s,children:c.jsxs("div",{className:"scenery-manager-box",onClick:U=>U.stopPropagation(),children:[c.jsx("h3",{className:"manager-title",children:"PROJETOR DE AMBIENTES"}),c.jsxs("div",{className:"scenery-grid",children:[b.length===0&&c.jsx("p",{className:"empty-txt",children:"Nenhuma imagem de cenrio carregada na sesso."}),b.map((U,V)=>c.jsx("div",{className:`scenery-thumb ${T===U?"selected":""}`,onClick:()=>M(U),children:c.jsx("img",{src:U,alt:`Opo ${V}`})},V))]}),c.jsxs("div",{className:"scenery-input-row",children:[c.jsx("input",{type:"text",placeholder:"Nome do Local (Ex: Runas Antigas)",value:v,onChange:U=>E(U.target.value)}),c.jsx("button",{className:"btn-project",onClick:G,disabled:!T,children:"PROJETAR"})]}),c.jsx("button",{className:"btn-close-manager",onClick:s,children:"CANCELAR"})]})}),c.jsx("style",{children:`
        /* --- ESTILO IMERSIVO --- */
        .scenery-layer {
            position: fixed;
            transition: all 0.8s cubic-bezier(0.2, 2, 0.2, 1);
            overflow: hidden;
            /* Z-INDEX EXTREMAMENTE ALTO PARA COBRIR TUDO (Bazar, Fichas, etc) */
            z-index: 200000; 
        }

        .scenery-layer.immersive {
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            animation: fadeInDeep 4s ease-out;
        }

        .scenery-layer.minimized {
            top: 0; /* Cola no teto */
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 40px;
            background: rgba(0,0,0,0.9);
            border: 1px solid #ffcc00;
            border-top: none;
            border-radius: 0 0 15px 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 200001;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }

        @keyframes fadeInDeep { from { opacity: 0; filter: blur(10px); } to { opacity: 1; filter: blur(0); } }

        .scenery-viewport {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .scenery-img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Garante que cubra a tela toda sem bordas internas */
            /* Efeito Ken Burns lento e suave */
            animation: kenBurns 80s infinite alternate ease-in-out;
            opacity: 0.9; /* Levemente escuro para o texto brilhar */
        }

        @keyframes kenBurns { from { transform: scale(1.0); } to { transform: scale(1.15); } }

        /* VIGNETTE CINEMATOGRFICA (OVAL) */
        .vignette-mask {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 2;
            /* Gradiente ELPTICO: Comea transparente no centro e escurece forte nas bordas */
            background: radial-gradient(
                ellipse at center, 
                rgba(0,0,0,0) 30%, 
                rgba(0,0,0,0.3) 60%, 
                rgba(0,0,0,0.8) 85%, 
                #000 100%
            );
            /* Adiciona uma sombra interna extra para garantir bordas pretas */
            box-shadow: inset 0 0 150px #000;
        }

        .scenery-title-overlay {
            position: absolute;
            top: 80px; /* Um pouco mais para baixo para no colar no topo */
            width: 100%;
            text-align: center;
            z-index: 5;
            pointer-events: none;
        }

        .scenery-title-overlay h2 {
            font-family: 'Cinzel', serif;
            font-size: 4.5rem;
            color: #ffcc00;
            text-transform: uppercase;
            letter-spacing: 15px;
            /* Sombra profunda para destacar no fundo */
            text-shadow: 0 10px 30px #000, 0 0 50px rgba(255, 204, 0, 0.2);
            margin: 0;
            opacity: 0;
            /* ANIMAO DE SEQUNCIA: Entra -> Espera -> Sai */
            animation: cinematicTitleSequence 8s ease-in-out 0.5s forwards;
        }

        @keyframes cinematicTitleSequence { 
            0% { 
                opacity: 0; 
                transform: translateY(30px) scale(0.9); 
                letter-spacing: 30px; 
            } 
            20% { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
                letter-spacing: 15px; 
            }
            80% { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
                letter-spacing: 15px; 
            }
            100% { 
                opacity: 0; 
                transform: translateY(-20px) scale(1.05); 
                letter-spacing: 30px; /* Volta a espalhar ao sair */
            } 
        }

        /* HUD DE CONTROLE */
        .scenery-hud {
            position: absolute;
            top: 0; left: 0; width: 100%;
            padding: 20px;
            display: flex;
            justify-content: flex-end; /* Botes na direita */
            align-items: flex-start;
            z-index: 10;
            opacity: 0; /* Invisvel por padro */
            transition: opacity 0.3s;
        }
        
        /* Aparece ao passar o mouse ou se estiver minimizado */
        .scenery-layer:hover .scenery-hud, .scenery-layer.minimized .scenery-hud {
            opacity: 1;
        }
        
        .scenery-layer.minimized .scenery-hud {
            position: relative;
            padding: 0 15px;
            align-items: center;
            justify-content: space-between; /* Espalha texto e botes no modo mini */
            width: 100%;
        }

        .scenery-actions {
            display: flex;
            gap: 15px;
        }

        .btn-scenery-toggle, .btn-scenery-close {
            background: rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.3);
            color: #fff;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.3s;
            pointer-events: auto;
            backdrop-filter: blur(5px);
        }
        .btn-scenery-toggle:hover { background: #fff; color: #000; transform: scale(1.1); }
        .btn-scenery-close { border-color: rgba(255, 68, 68, 0.5); color: #f44; }
        .btn-scenery-close:hover { background: #f44; color: #fff; transform: scale(1.1); }

        .mini-label {
            color: #ffcc00;
            font-family: 'Cinzel', serif;
            font-weight: bold;
            font-size: 14px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-right: 10px;
            text-shadow: 0 0 10px rgba(255,204,0,0.5);
        }

        /* --- GERENCIADOR (MODAL) --- */
        .scenery-manager-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 200002; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .scenery-manager-box { width: 700px; background: #080808; border: 2px solid #ffcc00; padding: 30px; border-radius: 8px; box-shadow: 0 0 80px rgba(255, 204, 0, 0.15); }
        .manager-title { color: #ffcc00; font-family: 'Cinzel', serif; margin: 0 0 25px 0; text-align: center; border-bottom: 1px solid #333; padding-bottom: 15px; letter-spacing: 3px; font-size: 24px; }
        
        .scenery-grid { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 20px; 
            max-height: 50vh; overflow-y: auto; margin-bottom: 25px; padding: 10px;
            background: #000; border: 1px solid #222; border-radius: 4px;
        }
        .scenery-thumb { height: 100px; border: 2px solid #333; border-radius: 6px; overflow: hidden; cursor: pointer; opacity: 0.6; transition: 0.3s; position: relative; }
        .scenery-thumb:hover { opacity: 1; transform: scale(1.05); border-color: #777; }
        .scenery-thumb.selected { border-color: #ffcc00; opacity: 1; box-shadow: 0 0 20px rgba(255,204,0,0.3); transform: scale(1.05); }
        .scenery-thumb img { width: 100%; height: 100%; object-fit: cover; }
        
        .scenery-input-row { display: flex; gap: 15px; margin-bottom: 20px; }
        .scenery-input-row input { flex: 1; background: #111; border: 1px solid #444; color: #fff; padding: 15px; font-family: 'Cinzel', serif; outline: none; font-size: 16px; border-radius: 4px; }
        .scenery-input-row input:focus { border-color: #ffcc00; box-shadow: 0 0 10px rgba(255,204,0,0.1); }
        
        .btn-project { background: linear-gradient(45deg, #ffcc00, #d4a000); color: #000; border: none; padding: 0 35px; font-weight: bold; cursor: pointer; font-family: 'Cinzel', serif; font-size: 16px; border-radius: 4px; }
        .btn-project:hover:not(:disabled) { filter: brightness(1.2); box-shadow: 0 0 25px rgba(255,204,0,0.4); }
        .btn-project:disabled { opacity: 0.5; cursor: not-allowed; background: #444; }
        
        .btn-close-manager { width: 100%; background: transparent; border: 1px solid #555; color: #aaa; padding: 12px; cursor: pointer; transition: 0.2s; font-family: sans-serif; letter-spacing: 2px; font-size: 12px; }
        .btn-close-manager:hover { border-color: #fff; color: #fff; background: rgba(255,255,255,0.05); }
        .empty-txt { color: #666; text-align: center; grid-column: 1 / -1; padding: 30px; font-style: italic; }
      `})]})}function lw({sessaoData:i,isMaster:e,showManager:n,onCloseManager:s}){const[o,u]=A.useState(null),[f,m]=A.useState([]),[b,g]=A.useState(""),[v,E]=A.useState(null);A.useEffect(()=>{if(i&&(u(i.active_npc||null),e)){const B=i.npcs||[];m(B)}},[i,e]);const T=async B=>{if(!v&&!o)return;let U;v?U={url:v,name:b||"Desconhecido",visible:B,timestamp:Date.now()}:o&&(U={...o,visible:B});try{const V=je(xe,"sessoes",i.id);await qe(V,{active_npc:U}),v&&(E(null),g(""))}catch(V){console.error("Erro ao atualizar NPC:",V)}},M=async()=>{if(window.confirm("Remover NPC da cena?"))try{const B=je(xe,"sessoes",i.id);await qe(B,{active_npc:null})}catch(B){console.error(B)}},G=()=>{if(!o)return null;const B=o.visible;return c.jsx("div",{className:`npc-overlay-container ${B?"slide-in":"slide-out"}`,children:c.jsxs("div",{className:"npc-content-wrapper",children:[c.jsxs("div",{className:"npc-image-box",children:[c.jsx("img",{src:o.url,alt:"NPC",className:"npc-img"}),c.jsx("div",{className:"npc-fade-bottom"})]}),c.jsxs("div",{className:"npc-title-container",children:[c.jsx("div",{className:"npc-title-line"}),c.jsx("h3",{className:"npc-title-text",children:o.name})]})]})})};return c.jsxs(c.Fragment,{children:[G(),e&&n&&c.jsx("div",{className:"npc-manager-overlay",onClick:s,children:c.jsxs("div",{className:"npc-manager-box",onClick:B=>B.stopPropagation(),children:[c.jsxs("div",{className:"npc-manager-header",children:[c.jsx("h3",{children:"CONVOCAO DE NPCS"}),c.jsx("button",{className:"close-x",onClick:s,children:""})]}),c.jsxs("div",{className:"npc-grid-list",children:[f.length===0&&c.jsx("p",{className:"empty-msg",children:"Nenhum NPC cadastrado na sesso."}),f.map((B,U)=>c.jsx("div",{className:`npc-thumb ${v===B?"selected":""}`,onClick:()=>{E(B),g("")},children:c.jsx("img",{src:B,alt:"NPC Thumb"})},U))]}),c.jsxs("div",{className:"npc-controls-row",children:[c.jsx("input",{type:"text",placeholder:"Nome (Ex: Lorde das Sombras)",value:b,onChange:B=>g(B.target.value)}),c.jsxs("div",{className:"btn-group",children:[c.jsx("button",{className:"btn-npc-action visible",onClick:()=>T(!0),children:"ENTRAR"}),c.jsx("button",{className:"btn-npc-action hidden",onClick:()=>T(!1),children:"PREPARAR"})]})]}),o&&!v&&c.jsxs("div",{className:"current-npc-controls",children:[c.jsxs("h4",{children:["EM CENA: ",c.jsx("span",{style:{color:"#fff"},children:o.name})]}),c.jsxs("div",{className:"active-actions",children:[c.jsx("button",{className:`toggle-btn ${o.visible?"is-on":"is-off"}`,onClick:()=>T(!o.visible),children:o.visible?"OCULTAR (SAIR)":"REVELAR (ENTRAR)"}),c.jsx("button",{className:"remove-btn",onClick:M,children:"REMOVER"})]})]})]})}),c.jsx("style",{children:`
        /* --- CAMADA DO NPC --- */
        .npc-overlay-container {
            position: fixed;
            top: 50%;
            /* Z-INDEX SUPERIOR AO CENRIO */
            z-index: 210000; 
            width: 33vw; /* 1/3 da tela */
            height: 90vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            
            /* Transies cinematogrficas */
            transition: left 1.5s cubic-bezier(0.22, 1, 0.36, 1), 
                        transform 1.5s cubic-bezier(0.22, 1, 0.36, 1), 
                        opacity 1.5s ease;
        }

        /* SAINDO (Esquerda) */
        .npc-overlay-container.slide-out {
            left: -40%; 
            transform: translate(-100%, -50%);
            opacity: 0;
        }

        /* ENTRANDO (Centro) */
        .npc-overlay-container.slide-in {
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 1;
        }

        .npc-content-wrapper {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            /* Animao de respirao/flutuao */
            animation: breatheNPC 8s ease-in-out infinite;
        }

        @keyframes breatheNPC {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        /* IMAGEM DO NPC (SEM BORDAS, S PNG) */
        .npc-image-box {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
            /* Mscara suave para as bordas no ficarem duras */
            -webkit-mask-image: radial-gradient(ellipse at center, black 70%, transparent 100%);
            mask-image: radial-gradient(ellipse at center, black 70%, transparent 100%);
        }

        .npc-img {
            width: 100%;
            height: auto;
            max-height: 75vh;
            object-fit: contain;
            filter: drop-shadow(0 0 20px rgba(0,0,0,0.8));
        }

        /* FADE INFERIOR (Opcional, para misturar ps com o ttulo) */
        .npc-fade-bottom {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20%;
            background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.0) 100%);
        }

        /* --- TTULO DARK FANTASY (LINHA NO MEIO) --- */
        .npc-title-container {
            position: relative;
            width: 120%; /* Um pouco maior que a imagem */
            text-align: center;
            margin-top: -30px; /* Sobe um pouco para sobrepor a base da imagem */
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .npc-title-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #ffcc00, transparent);
            box-shadow: 0 0 10px #ffcc00;
            z-index: 1;
        }

        .npc-title-text {
            font-family: 'Cinzel', serif;
            font-size: 42px;
            color: #ffcc00;
            text-transform: uppercase;
            letter-spacing: 4px;
            margin: 0;
            padding: 0 20px;
            position: relative;
            z-index: 2;
            
            /* Sombra pesada para simular contorno e cortar a linha visualmente */
            text-shadow: 
                3px 3px 0 #000,
                -1px -1px 0 #000,  
                1px -1px 0 #000,
                -1px 1px 0 #000,
                1px 1px 0 #000,
                0 0 20px rgba(0,0,0,0.8);
        }

        /* --- GERENCIADOR (CANTO SUPERIOR DIREITO) --- */
        .npc-manager-overlay { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100vw; 
            height: 100vh; 
            background: rgba(0,0,0,0.0); /* Fundo transparente para ver o NPC */
            z-index: 200020; 
            display: flex; 
            align-items: flex-start; /* Alinha no topo */
            justify-content: flex-end; /* Alinha na direita */
            padding: 80px 30px; /* Espaamento da borda */
            pointer-events: none; /* Permite clicar atravs do overlay vazio */
        }

        .npc-manager-box { 
            width: 400px; /* Mais compacto */
            background: rgba(10, 10, 10, 0.95); 
            border: 1px solid #ffcc00; 
            padding: 20px; 
            border-radius: 4px; 
            box-shadow: 0 0 30px rgba(0,0,0,0.8);
            pointer-events: auto; /* Reativa cliques na caixa */
            backdrop-filter: blur(10px);
        }

        .npc-manager-header { display: flex; justify-content: space-between; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 15px; }
        .npc-manager-header h3 { color: #ffcc00; margin: 0; font-family: 'Cinzel', serif; font-size: 16px; }
        .close-x { background: none; border: none; color: #fff; font-size: 18px; cursor: pointer; }

        .npc-grid-list { 
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; 
            max-height: 30vh; overflow-y: auto; margin-bottom: 15px; padding: 5px; 
            background: rgba(0,0,0,0.5); border: 1px solid #333;
        }
        .npc-thumb { height: 80px; border: 1px solid #444; cursor: pointer; opacity: 0.6; transition: 0.2s; overflow: hidden; border-radius: 4px; }
        .npc-thumb:hover { opacity: 1; border-color: #fff; }
        .npc-thumb.selected { border-color: #ffcc00; opacity: 1; box-shadow: 0 0 10px rgba(255, 204, 0, 0.2); }
        .npc-thumb img { width: 100%; height: 100%; object-fit: cover; }

        .npc-controls-row { display: flex; gap: 8px; flex-direction: column; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #333; }
        .npc-controls-row input { background: #000; border: 1px solid #444; color: #fff; padding: 8px; font-family: 'Cinzel', serif; outline: none; font-size: 14px; }
        .npc-controls-row input:focus { border-color: #ffcc00; }
        
        .btn-group { display: flex; gap: 5px; }
        .btn-npc-action { flex: 1; padding: 8px; font-weight: bold; cursor: pointer; border: none; font-family: 'Cinzel', serif; transition: 0.2s; font-size: 12px; }
        .btn-npc-action.visible { background: #ffcc00; color: #000; }
        .btn-npc-action.visible:hover { background: #fff; }
        .btn-npc-action.hidden { background: #222; color: #aaa; border: 1px solid #444; }
        .btn-npc-action.hidden:hover { border-color: #fff; color: #fff; }

        .current-npc-controls { background: rgba(255, 204, 0, 0.05); padding: 10px; border: 1px solid #ffcc00; border-radius: 4px; }
        .current-npc-controls h4 { margin: 0 0 8px 0; color: #ffcc00; font-size: 12px; }
        .active-actions { display: flex; gap: 5px; }
        .toggle-btn { flex: 2; padding: 8px; font-weight: bold; cursor: pointer; border: none; transition: 0.3s; font-size: 11px; }
        .toggle-btn.is-on { background: #0f0; color: #000; box-shadow: 0 0 5px #0f0; }
        .toggle-btn.is-off { background: #f44; color: #fff; }
        .remove-btn { flex: 1; background: transparent; border: 1px solid #f44; color: #f44; cursor: pointer; font-size: 11px; font-weight: bold; }
        .remove-btn:hover { background: #f44; color: #fff; }
        .empty-msg { color: #666; text-align: center; padding: 15px; font-style: italic; font-size: 12px; }
      `})]})}const q5=[{type:"d4",sides:4,label:"D4"},{type:"d6",sides:6,label:"D6"},{type:"d8",sides:8,label:"D8"},{type:"d10",sides:10,label:"D10"},{type:"d12",sides:12,label:"D12"},{type:"d20",sides:20,label:"D20"},{type:"d100",sides:100,label:"D100"}],cw=({sessaoId:i,playerName:e,onClose:n})=>{const[s,o]=A.useState({d4:0,d6:0,d8:0,d10:0,d12:0,d20:0,d100:0}),[u,f]=A.useState(""),[m,b]=A.useState(!1),g=(E,T)=>{o(M=>({...M,[E]:Math.max(0,M[E]+T)}))},v=async()=>{if(Object.values(s).reduce((V,$)=>V+$,0)===0)return alert("Selecione pelo menos um dado!");b(!0),n();let T=0,M=[];Object.keys(s).forEach(V=>{const $=s[V],K=parseInt(V.substring(1));for(let re=0;re<$;re++){const he=Math.floor(Math.random()*K)+1;T+=he,M.push({die:V,value:he})}});let G=0;if(u){const V=u.replace(/\s/g,"");G=parseInt(V),isNaN(G)&&(G=0)}const B=T+G,U={playerName:e,rolls:M,modifier:G,total:B,timestamp:Date.now()};try{const V=je(xe,"sessoes",i);await qe(V,{latest_roll:U})}catch(V){console.error("Erro ao rolar dados:",V)}};return c.jsxs("div",{className:"dice-modal-overlay",children:[c.jsxs("div",{className:"dice-selector-box",children:[c.jsxs("div",{className:"ds-header",children:[c.jsx("h3",{children:"CAIXA DE DADOS"}),c.jsx("button",{className:"ds-close-btn",onClick:n,children:""})]}),c.jsx("div",{className:"ds-grid",children:q5.map(E=>c.jsxs("div",{className:"die-control",children:[c.jsx("span",{className:"die-label",children:E.label}),c.jsxs("div",{className:"die-actions",children:[c.jsx("button",{onClick:()=>g(E.type,-1),children:"-"}),c.jsx("span",{className:`die-count ${s[E.type]>0?"active":""}`,children:s[E.type]}),c.jsx("button",{onClick:()=>g(E.type,1),children:"+"})]})]},E.type))}),c.jsxs("div",{className:"ds-footer",children:[c.jsxs("div",{className:"mod-input-group",children:[c.jsx("label",{children:"MODIFICADOR"}),c.jsx("input",{type:"text",placeholder:"+0",value:u,onChange:E=>f(E.target.value)})]}),c.jsx("button",{className:"btn-roll-final",onClick:v,disabled:m,children:m?"...":"ROLAR DADOS"})]})]}),c.jsx("style",{children:`
         .dice-modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.6); z-index: 20000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(2px); }
         /* AUMENTADO A LARGURA PARA 400px PARA CABER O BOTO */
         .dice-selector-box { background: #0d0d15; border: 2px solid #ffcc00; padding: 25px; border-radius: 8px; width: 400px; box-shadow: 0 0 30px rgba(255, 204, 0, 0.2); box-sizing: border-box; }
         .ds-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px; }
         .ds-header h3 { margin: 0; color: #ffcc00; font-family: 'Cinzel', serif; }
         .ds-close-btn { background: none; border: none; color: #fff; font-size: 20px; cursor: pointer; }
         
         .ds-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 25px; }
         .die-control { background: rgba(255,255,255,0.05); padding: 8px 12px; border-radius: 4px; display: flex; justify-content: space-between; align-items: center; }
         .die-label { color: #00f2ff; font-weight: bold; font-family: sans-serif; font-size: 14px; }
         .die-actions { display: flex; align-items: center; gap: 8px; }
         .die-actions button { background: #333; border: 1px solid #555; color: #fff; width: 24px; height: 24px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
         .die-actions button:hover { background: #ffcc00; color: #000; border-color: #ffcc00; }
         .die-count { width: 20px; text-align: center; font-weight: bold; color: #555; }
         .die-count.active { color: #fff; text-shadow: 0 0 5px #fff; }

         /* AJUSTE DO FOOTER PARA O BOTO NO SAIR */
         .ds-footer { display: flex; gap: 15px; align-items: flex-end; width: 100%; }
         .mod-input-group { width: 100px; display: flex; flex-direction: column; }
         .mod-input-group label { font-size: 10px; color: #aaa; margin-bottom: 4px; font-weight: bold; }
         .mod-input-group input { width: 100%; background: #000; border: 1px solid #444; color: #fff; padding: 10px; border-radius: 4px; text-align: center; font-weight: bold; font-size: 16px; outline: none; box-sizing: border-box; }
         .mod-input-group input:focus { border-color: #ffcc00; }
         
         .btn-roll-final { flex: 1; background: linear-gradient(45deg, #ffcc00, #d4a000); border: none; padding: 0 20px; color: #000; font-weight: bold; border-radius: 4px; cursor: pointer; font-family: 'Cinzel', serif; font-size: 16px; height: 44px; display: flex; align-items: center; justify-content: center; white-space: nowrap; }
         .btn-roll-final:hover { filter: brightness(1.2); box-shadow: 0 0 15px #ffcc00; }
         .btn-roll-final:disabled { opacity: 0.5; cursor: not-allowed; }
       `})]})},uw=({rollData:i,onClose:e})=>i?c.jsxs("div",{className:"dice-result-overlay",children:[c.jsxs("div",{className:"dice-result-content fade-in-scale",children:[c.jsxs("div",{className:"dr-title",children:[c.jsx("span",{className:"dr-player-name",children:i.playerName}),c.jsx("span",{className:"dr-action",children:"ROLOU OS DADOS"})]}),c.jsx("div",{className:"dr-dice-list",children:i.rolls.map((n,s)=>c.jsxs("div",{className:`dr-die die-${n.die}`,children:[c.jsx("span",{className:"die-icon-bg",children:""}),c.jsx("span",{className:"die-val",children:n.value}),c.jsx("span",{className:"die-type",children:n.die})]},s))}),c.jsxs("div",{className:"dr-calculation",children:[c.jsxs("span",{className:"calc-label",children:["SOMA: ",i.rolls.reduce((n,s)=>n+s.value,0)]}),c.jsxs("span",{className:"calc-mod",children:["MOD: ",i.modifier>=0?`+${i.modifier}`:i.modifier]})]}),c.jsxs("div",{className:"dr-total",children:[c.jsx("span",{className:"total-label",children:"RESULTADO"}),c.jsx("span",{className:"total-value",children:i.total})]}),c.jsx("button",{className:"dr-close-btn",onClick:e,children:"FECHAR"})]}),c.jsx("style",{children:`
         .dice-result-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 19000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
         .dice-result-content { text-align: center; color: #fff; max-width: 80%; }
         .fade-in-scale { animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
         @keyframes popIn { 0% { opacity: 0; transform: scale(0.5); } 100% { opacity: 1; transform: scale(1); } }
         
         .dr-title { margin-bottom: 30px; }
         .dr-player-name { display: block; font-size: 32px; color: #ffcc00; font-family: 'Cinzel', serif; font-weight: bold; text-shadow: 0 0 10px #ffcc00; }
         .dr-action { font-size: 14px; color: #aaa; letter-spacing: 2px; }

         .dr-dice-list { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-bottom: 30px; }
         .dr-die { position: relative; width: 80px; height: 80px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
         .die-icon-bg { font-size: 80px; position: absolute; color: rgba(255,255,255,0.1); z-index: 0; }
         .die-val { font-size: 36px; font-weight: bold; color: #fff; z-index: 1; text-shadow: 0 2px 4px #000; }
         .die-type { font-size: 12px; color: #00f2ff; z-index: 1; margin-top: -5px; text-transform: uppercase; font-weight: bold; }
         
         .die-d20 .die-val { color: #ffcc00; } /* Destaque pro D20 */

         .dr-calculation { font-family: monospace; color: #aaa; font-size: 18px; margin-bottom: 10px; display: flex; gap: 20px; justify-content: center; }
         
         .dr-total { margin-bottom: 30px; background: linear-gradient(90deg, transparent, rgba(255,204,0,0.2), transparent); padding: 10px; }
         .total-label { display: block; font-size: 14px; color: #ffcc00; letter-spacing: 3px; margin-bottom: 5px; }
         .total-value { font-size: 64px; font-weight: bold; color: #fff; line-height: 1; text-shadow: 0 0 20px #ffcc00; }

         .dr-close-btn { background: transparent; border: 2px solid #555; color: #aaa; padding: 10px 40px; cursor: pointer; border-radius: 30px; font-weight: bold; transition: 0.3s; pointer-events: auto; }
         .dr-close-btn:hover { border-color: #ffcc00; color: #ffcc00; background: rgba(255,255,255,0.1); }
       `})]}):null,F5=({onClose:i,disponibilidades:e,sessoes:n})=>{const[s,o]=A.useState(new Date),[u,f]=A.useState(null),m=($,K)=>new Date($,K+1,0).getDate(),b=($,K)=>new Date($,K,1).getDay(),g=s.getFullYear(),v=s.getMonth(),E=m(g,v),T=b(g,v),M=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],G=()=>o(new Date(g,v-1,1)),B=()=>o(new Date(g,v+1,1)),U=[...e.map($=>({...$,type:"slot",dateObj:new Date($.start)})),...n.map($=>({...$,type:"session",dateObj:new Date($.dataInicio)}))],V=()=>{const $=[];for(let K=0;K<T;K++)$.push(c.jsx("div",{className:"cal-day empty"},`empty-${K}`));for(let K=1;K<=E;K++){const re=U.filter(he=>{const ae=he.dateObj;return ae.getDate()===K&&ae.getMonth()===v&&ae.getFullYear()===g});$.push(c.jsxs("div",{className:"cal-day",children:[c.jsx("span",{className:"cal-day-number",children:K}),c.jsx("div",{className:"cal-events-list",children:re.map((he,ae)=>c.jsxs("div",{className:`cal-event-pill ${he.type}`,onClick:w=>{w.stopPropagation(),f(he)},title:he.type==="session"?he.missaoNome:"Disponvel",children:[he.dateObj.getHours(),":",String(he.dateObj.getMinutes()).padStart(2,"0")," ",he.type==="session"?"":""]},ae))})]},K))}return $};return c.jsxs("div",{className:"ff-modal-overlay-calendar",children:[c.jsxs("div",{className:"ff-modal-calendar ff-card",children:[c.jsxs("div",{className:"cal-header",children:[c.jsx("button",{onClick:G,children:""}),c.jsxs("h2",{children:[M[v]," ",g]}),c.jsx("button",{onClick:B,children:""}),c.jsx("button",{className:"btn-close-cal",onClick:i,children:"FECHAR"})]}),c.jsxs("div",{className:"cal-grid-header",children:[c.jsx("div",{children:"DOM"}),c.jsx("div",{children:"SEG"}),c.jsx("div",{children:"TER"}),c.jsx("div",{children:"QUA"}),c.jsx("div",{children:"QUI"}),c.jsx("div",{children:"SEX"}),c.jsx("div",{children:"SB"})]}),c.jsx("div",{className:"cal-grid-body",children:V()}),u&&c.jsx("div",{className:"mini-modal-overlay",children:c.jsxs("div",{className:"mini-modal detail",children:[u.type==="session"?c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{color:"#f44"},children:" SESSO AGENDADA"}),c.jsx("h3",{children:u.missaoNome}),c.jsxs("p",{children:[c.jsx("strong",{children:"Horrio:"})," ",new Date(u.dataInicio).toLocaleString()]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Narrador:"})," ",u.mestreNome]}),c.jsxs("div",{className:"detail-players",children:[c.jsx("strong",{children:"Jogadores:"}),u.participantes?.join(", ")||"Nenhum"]})]}):c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{color:"#0f0"},children:" HORRIO DISPONVEL"}),c.jsxs("p",{children:[c.jsx("strong",{children:"Data:"})," ",new Date(u.start).toLocaleString()]}),c.jsx("p",{children:"O Mestre est livre neste horrio."})]}),c.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"10px",width:"100%"},onClick:()=>f(null),children:"FECHAR"})]})})]}),c.jsx("style",{children:`
        .ff-modal-calendar { width: 90vw; height: 90vh; background: #0f172a; border: 2px solid #fbbf24; display: flex; flex-direction: column; padding: 20px; box-shadow: 0 0 50px #000; }
        .cal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; font-size: 1.5rem; color: #fbbf24; }
        .cal-header button { background: transparent; border: 1px solid #fbbf24; color: #fbbf24; cursor: pointer; padding: 5px 15px; font-weight: bold; }
        .btn-close-cal { background: #f44 !important; border-color: #f44 !important; color: #fff !important; }
        .cal-grid-header { display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; color: #94a3b8; font-weight: bold; margin-bottom: 10px; }
        .cal-grid-body { display: grid; grid-template-columns: repeat(7, 1fr); grid-auto-rows: 1fr; gap: 5px; flex: 1; overflow-y: auto; }
        .cal-day { background: #1e293b; border: 1px solid #334155; padding: 5px; min-height: 100px; position: relative; display: flex; flex-direction: column; }
        .cal-day.empty { background: transparent; border: none; }
        .cal-day-number { font-weight: bold; color: #64748b; font-size: 0.9rem; align-self: flex-end; }
        .cal-events-list { display: flex; flex-direction: column; gap: 3px; margin-top: 5px; }
        .cal-event-pill { font-size: 0.75rem; padding: 2px 4px; border-radius: 3px; cursor: pointer; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .cal-event-pill.session { background: #7f1d1d; color: #fca5a5; border: 1px solid #f87171; }
        .cal-event-pill.slot { background: #064e3b; color: #6ee7b7; border: 1px solid #34d399; }
        .mini-modal-overlay { position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; z-index: 20; }
        .mini-modal { background: #020617; border: 1px solid #fbbf24; padding: 20px; width: 300px; border-radius: 8px; box-shadow: 0 0 20px #000; }
        .mini-modal.detail { width: 400px; }
        .mini-modal h4 { color: #fbbf24; margin: 0 0 10px 0; }
        
        .ff-modal-overlay-calendar { 
          position: fixed; 
          top: 0; 
          left: 0; 
          width: 100vw; 
          height: 100vh; 
          background: rgba(0,0,0,0.95); 
          z-index: 99999; 
          display: flex; 
          align-items: center; 
          justify-content: center; 
          backdrop-filter: blur(5px); 
        }
      `})]})},G5=({targetDate:i})=>{const[e,n]=A.useState("");return A.useEffect(()=>{const s=()=>{const u=new Date().getTime(),f=new Date(i).getTime()-u;if(f<0)n("AGORA");else{const m=Math.floor(f/864e5),b=Math.floor(f%(1e3*60*60*24)/(1e3*60*60)),g=Math.floor(f%(1e3*60*60)/(1e3*60)),v=Math.floor(f%(1e3*60)/1e3);n(`${m}d ${b}h ${g}m ${v}s`)}};s();const o=setInterval(s,1e3);return()=>clearInterval(o)},[i]),c.jsx("span",{className:"countdown-text",children:e})},$5=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M14.5 17.5L3 6V3h3l11.5 11.5"}),c.jsx("path",{d:"M13 19l6-6"}),c.jsx("path",{d:"M16 16l4 4"}),c.jsx("path",{d:"M19 21l2-2"})]}),Y5=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),c.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),Q5=i=>i?{__html:i.replace(/\*(.*?)\*/g,"<strong>$1</strong>").replace(/_(.*?)_/g,"<em>$1</em>").replace(/\n/g,"<br />")}:{__html:""};function K5(){const i=ns(),[e,n]=A.useState(null),[s,o]=A.useState(!0),[u,f]=A.useState([]),[m,b]=A.useState([]),[g,v]=A.useState([]),[E,T]=A.useState([]),[M,G]=A.useState(!1),[B,U]=A.useState(new Date),[V,$]=A.useState(!1),[K,re]=A.useState(null),[he,ae]=A.useState(null),[w,C]=A.useState([]),[I,k]=A.useState(!1),[j,O]=A.useState(null),[N,Ve]=A.useState(null),[ye,ee]=A.useState(null),[me,Re]=A.useState(!1),[De,Qe]=A.useState(!1),[z,se]=A.useState([]),[le,Q]=A.useState(!1),[ie,ge]=A.useState(null),[Ee,He]=A.useState({x:280,y:100}),[we,it]=A.useState(!1),[st,Ct]=A.useState({x:0,y:0}),[At,Xt]=A.useState({x:620,y:100}),[Ut,Jt]=A.useState(!1),[Y,Ne]=A.useState({x:0,y:0}),[ve,Se]=A.useState(!1),[Ze,Le]=A.useState(null),It=A.useRef(0),[nt,Zt]=A.useState(0),[de,Ce]=A.useState(!1),Me=A.useRef(null),P=A.useRef(new Audio(L5)),[_e,Ue]=A.useState(!1);A.useEffect(()=>{Qt&&(Qt.pause(),Qt.currentTime=0)},[]),A.useEffect(()=>{P.current.volume=.2;const q=setInterval(()=>U(new Date),1e3);return()=>clearInterval(q)},[]),A.useEffect(()=>{const q=[],be=[];m.forEach($e=>{const Ke=new Date($e.dataInicio),mt=new Date($e.expiraEm);B>=Ke&&B<=mt?q.push($e):B<Ke&&be.push($e)}),v(q),T(be)},[B,m]),A.useEffect(()=>{const q=setTimeout(()=>{Ue(!0)},2e3);return()=>clearTimeout(q)},[]),A.useEffect(()=>{let q=()=>{},be=()=>{},$e=()=>{};const Ke=df(Vt,mt=>{if(mt){const jt=je(xe,"characters",mt.uid);q=Rn(jt,Gt=>{if(Gt.exists()){const En=Gt.data(),Ya=En.character_sheet?.basic_info?.level||1;Me.current!==null&&Ya>Me.current&&(Ce(!0),P.current.currentTime=0,P.current.play().catch(console.error)),Me.current=Ya,n(En),o(!1)}else o(!1)});const Ye=Nn(Rt(xe,"missoes")),bt=Nn(Rt(xe,"disponibilidades"));be=Rn(Ye,Gt=>f(Gt.docs.map(En=>({id:En.id,...En.data()})))),$e=Rn(bt,Gt=>se(Gt.docs.map(En=>({id:En.id,...En.data()}))))}else o(!1),i("/login")});return()=>{Ke(),q(),be(),$e()}},[i]),A.useEffect(()=>{if(!e)return;const q=Nn(Rt(xe,"sessoes"),Na("participantes","array-contains",e.name)),be=Rn(q,mt=>{const jt=mt.docs.map(Ye=>({id:Ye.id,...Ye.data()}));if(b(jt),ye){const Ye=jt.find(bt=>bt.id===ye.id);if(Ye){if(ee(Ye),Ye.latest_roll){const Gt=Ye.latest_roll;Gt.timestamp>It.current&&Le(En=>!En||En.timestamp!==Gt.timestamp?Gt:En)}const bt=Ye.connected_players?.includes(Vt.currentUser?.uid);Ve(bt?"connected":"waiting")}}}),$e=Nn(Rt(xe,"resenhas"),Na("destinatarios","array-contains",e.name)),Ke=Rn($e,mt=>{const jt=mt.docs.map(bt=>({id:bt.id,...bt.data()})).filter(bt=>new Date(bt.expiraEm)>new Date);C(jt);const Ye=parseInt(localStorage.getItem("sanchez_last_read_count")||"0");jt.length>Ye?Zt(jt.length-Ye):Zt(0)});return()=>{be(),Ke()}},[e,ye?.id]),A.useEffect(()=>{if(!ye||!Vt.currentUser)return;const q=je(xe,"sessoes",ye.id),be=Vt.currentUser.uid;qe(q,{connected_players:Ac(be)}).catch(console.error);const $e=()=>{};return window.addEventListener("beforeunload",$e),()=>{window.removeEventListener("beforeunload",$e),qe(q,{connected_players:Sc(be)}).catch(console.error)}},[ye?.id]);const Bt=()=>{Ce(!1),P.current.pause()},vt=async q=>{if(!e)return;if(q.candidatos?.some(Ke=>Ke.uid===Vt.currentUser.uid))return alert("J candidatado!");const be=!q.candidatos||q.candidatos.length===0,$e={uid:Vt.currentUser.uid,nome:e.name,classe:e.class,isLeader:be,dataCandidatura:new Date().toISOString()};try{await qe(je(xe,"missoes",q.id),{candidatos:Ac($e)}),alert(be?"Voc  o LDER DO GRUPO!":"Candidatura realizada!")}catch(Ke){console.error(Ke),alert("Erro ao candidatar.")}},rt=q=>{ee(q),G(!0),Ve(new Date>=new Date(q.dataInicio)?"connected":"waiting")},cn=()=>{k(!0),localStorage.setItem("sanchez_last_read_count",w.length.toString()),Zt(0)},Pt=()=>{window.open("https://www.canva.com/design/DAGpzszHsc4/NcbQ19hsr4grzm9aotQFtw/edit?utm_content=DAGpzszHsc4&utm_campaign=designshare&utm_medium=link2&utm_source=sharebutton","_blank")},Ga=q=>{it(!0),Ct({x:q.clientX-Ee.x,y:q.clientY-Ee.y})},Hn=q=>{Jt(!0),Ne({x:q.clientX-At.x,y:q.clientY-At.y})},$a=q=>{we&&He({x:q.clientX-st.x,y:q.clientY-st.y}),Ut&&Xt({x:q.clientX-Y.x,y:q.clientY-Y.y})},H=()=>{it(!1),Jt(!1)};return s||!_e?c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",background:"radial-gradient(circle at center, #001a33 0%, #000000 100%)",color:"#ffcc00",fontFamily:"Cinzel, serif",zIndex:9999,position:"fixed",top:0,left:0},children:[c.jsx("img",{src:Df,alt:"Carregando...",style:{width:"100px",marginBottom:"20px"}}),c.jsx("p",{style:{fontSize:"18px",letterSpacing:"2px",textTransform:"uppercase",animation:"pulseText 2s infinite ease-in-out"},children:"Sintonizando ter..."}),c.jsx("style",{children:`
          @keyframes pulseText { 
            0% { opacity: 0.3; } 
            50% { opacity: 1; } 
            100% { opacity: 0.3; } 
          }
        `})]}):e?c.jsxs("div",{className:"jogador-container",onMouseMove:$a,onMouseUp:H,children:[c.jsx("div",{className:"background-layer",style:{backgroundImage:`url(${V5})`}}),c.jsxs("div",{className:"content-layer",children:[c.jsxs("div",{className:"char-hud clickable-hud",onClick:()=>Re(!0),title:"Abrir Ficha",children:[c.jsx("div",{className:"char-avatar",children:c.jsx("div",{className:"avatar-circle",children:c.jsx("span",{className:"hud-level",children:e.character_sheet?.basic_info?.level||1})})}),c.jsxs("div",{className:"char-info",children:[c.jsx("h2",{className:"char-name",children:e.name}),c.jsxs("span",{className:"char-meta",children:[e.race," // ",e.class]})]})]}),ye&&ye.active_map&&c.jsx(rw,{sessaoData:ye,isMaster:!1,currentUserUid:Vt.currentUser?.uid,personagensData:[e]}),c.jsx(ow,{sessaoData:ye,isMaster:!1}),c.jsx(lw,{sessaoData:ye,isMaster:!1}),Ze&&c.jsx(uw,{rollData:Ze,onClose:()=>{It.current=Ze.timestamp,Le(null)}}),ve&&ye&&c.jsx(cw,{sessaoId:ye.id,playerName:e.name,onClose:()=>Se(!1)}),le&&ye&&c.jsxs("div",{className:"combat-tracker-panel player-view fade-in",style:{top:Ee.y,left:Ee.x,zIndex:2100},children:[c.jsx("div",{className:"tracker-header",onMouseDown:Ga,style:{cursor:"grab"},children:c.jsx("h3",{className:"tracker-title",children:"COMBATE"})}),c.jsxs("div",{className:"tracker-list",children:[ye.tokens?.map((q,be)=>({...q,originalIndex:be})).filter(q=>q.type!=="object").map(q=>{if(!(q.visible!==!1))return null;let $e=q.img;q.uid===Vt.currentUser.uid&&e.character_sheet?.imgUrl&&($e=e.character_sheet.imgUrl);let Ke="?",mt="?",jt="?",Ye="?";return q.uid===Vt.currentUser.uid?(Ke=e.character_sheet?.status?.hp?.current,jt=e.character_sheet?.status?.hp?.max,mt=e.character_sheet?.status?.mp?.current,Ye=e.character_sheet?.status?.mp?.max):(q.type==="enemy"||q.visibleBars)&&(Ke=q.stats?.hp?.current,jt=q.stats?.hp?.max,mt=q.stats?.mp?.current,Ye=q.stats?.mp?.max),c.jsxs("div",{className:"tracker-item readonly",children:[c.jsxs("div",{className:"t-col-img",children:[c.jsx("div",{className:"t-index",children:q.originalIndex+1}),c.jsx("div",{className:"t-img",style:{backgroundImage:`url(${$e})`,backgroundPosition:`${q.imgX||50}% ${q.imgY||50}%`}})]}),c.jsxs("div",{className:"t-col-info",children:[c.jsx("div",{className:"t-name",children:q.name}),c.jsxs("div",{className:"t-stats-row",children:[c.jsxs("div",{className:"t-stat hp",children:[c.jsx("label",{children:"HP"}),c.jsx("span",{children:Ke}),jt!=="?"&&c.jsxs("small",{children:["/",jt]})]}),c.jsxs("div",{className:"t-stat mp",children:[c.jsx("label",{children:"MP"}),c.jsx("span",{children:mt}),Ye!=="?"&&c.jsxs("small",{children:["/",Ye]})]})]})]}),q.type==="enemy"&&c.jsx("div",{className:"t-col-actions",children:c.jsx("button",{className:"btn-icon-sm",title:"Detalhes",onClick:()=>ge({...q.details,img:q.img}),children:""})})]},q.id)}),ye.tokens?.some(q=>q.type==="object")&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"tracker-divider",children:"OBJETOS"}),ye.tokens?.map((q,be)=>({...q,originalIndex:be})).filter(q=>q.type==="object").map(q=>q.visible!==!1?c.jsxs("div",{className:"tracker-item object-item readonly",children:[c.jsxs("div",{className:"t-col-img",children:[c.jsx("div",{className:"t-index",children:q.originalIndex+1}),c.jsx("div",{className:"t-img",style:{backgroundImage:`url(${q.img})`,backgroundPosition:`${q.imgX||50}% ${q.imgY||50}%`}})]}),c.jsx("div",{className:"t-col-info",children:c.jsxs("div",{className:"t-name",style:{color:"#ffcc00"},children:[q.name," ",c.jsx("small",{children:"(Obj)"})]})})]},q.id):null)]}),(!ye.tokens||ye.tokens.length===0)&&c.jsx("div",{className:"empty-tracker",children:"Mesa Vazia"})]})]}),ie&&c.jsxs("div",{className:"monster-detail-card draggable-card fade-in",style:{position:"absolute",top:At.y,left:At.x,zIndex:2200},onClick:q=>q.stopPropagation(),children:[c.jsxs("div",{className:"md-header",onMouseDown:Hn,style:{cursor:"grab"},children:[c.jsxs("div",{className:"md-title-row",children:[c.jsx("h2",{children:ie.name}),c.jsxs("div",{className:"md-stars",children:[[...Array(ie.stars||1)].map((q,be)=>c.jsx("span",{children:""},be)),ie.difficultyQ&&c.jsx("span",{className:"md-boss-mark",children:"?"})]})]}),c.jsx("div",{className:"md-sub",children:"Nvel de Ameaa"})]}),c.jsxs("div",{className:"md-body",children:[c.jsx("div",{className:"md-img-col",children:c.jsx("div",{className:"md-portrait",style:{backgroundImage:`url(${ie.img})`}})}),c.jsxs("div",{className:"md-info-col custom-scrollbar",children:[c.jsxs("div",{className:"md-block",children:[c.jsx("label",{children:"DESCRIO"}),c.jsx("p",{children:ie.description||"Sem dados disponveis."})]}),ie.drops&&c.jsxs("div",{className:"md-block",children:[c.jsx("label",{children:"DROPS CONHECIDOS"}),c.jsx("p",{children:ie.drops})]})]})]}),c.jsx("button",{className:"md-close-btn",onClick:()=>ge(null),children:"FECHAR"})]}),de&&c.jsx("div",{className:"levelup-global-overlay",children:c.jsxs("div",{className:"levelup-content",children:[c.jsx("h1",{className:"levelup-title",children:"LEVEL UP!"}),c.jsx("button",{className:"levelup-confirm-btn",onClick:Bt,children:"CONFIRMAR"})]})}),E.length>0&&g.length===0&&!M&&c.jsxs("div",{className:"upcoming-sessions-banner",children:[c.jsx("h3",{children:"A SESSO VAI COMEAR EM BREVE"}),E.map(q=>c.jsxs("div",{className:"countdown-row",children:[c.jsx("span",{className:"sessao-nome-future",children:q.missaoNome}),c.jsx(G5,{targetDate:q.dataInicio})]},q.id))]}),g.length>0&&!M&&c.jsxs("div",{className:"active-sessions-banner fade-in",children:[c.jsx("h3",{children:"SESSO EM ANDAMENTO!"}),g.map(q=>c.jsxs("div",{className:"session-entry-row",children:[c.jsx("span",{className:"sessao-nome-active",children:q.missaoNome}),c.jsx("button",{className:"btn-enter-session",onClick:()=>rt(q),children:"ENTRAR AGORA"})]},q.id))]}),N&&ye&&c.jsxs("div",{className:`vtt-status-widget ${N}`,children:[c.jsx("div",{className:"status-indicator"}),c.jsx("div",{className:"status-text",children:N==="waiting"?c.jsxs(c.Fragment,{children:[c.jsx("h4",{children:"AGUARDANDO"}),c.jsx("small",{children:"Conectado..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("h4",{children:"ONLINE"}),c.jsx("small",{children:"Na Mesa"})]})})]}),c.jsx("button",{className:"floating-mission-btn",onClick:()=>$(!0),title:"Misses",children:""}),c.jsx("button",{className:"floating-calendar-btn",onClick:()=>Qe(!0),title:"Agenda",children:""}),N==="connected"&&c.jsx("button",{className:"floating-combat-btn",onClick:()=>Q(!le),title:"Ver Combate",children:c.jsx($5,{})}),N==="connected"&&c.jsx("button",{className:"floating-dice-btn",onClick:()=>Se(!0),title:"Rolar Dados",children:""}),w.length>0&&c.jsxs("button",{className:"floating-sanchez-btn",onClick:cn,title:"Resenhas",children:[c.jsx("div",{className:"sanchez-icon-face",style:{backgroundImage:`url(${Tm})`}}),nt>0&&c.jsx("span",{className:"notification-badge",children:nt})]}),c.jsx("button",{className:"floating-book-btn",onClick:Pt,title:"Livro do Jogo",children:c.jsx(Y5,{})}),c.jsx(Vg,{isMestre:!1,playerData:e}),c.jsx(sw,{isMaster:!1}),De&&c.jsx(F5,{onClose:()=>Qe(!1),disponibilidades:z,sessoes:m}),V&&c.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>$(!1),children:c.jsxs("div",{className:"ff-modal-compact ff-card",onClick:q=>q.stopPropagation(),children:[c.jsxs("div",{className:"modal-header-compact",children:[c.jsx("h3",{className:"modal-title-ff",children:"QUADRO DE CONTRATOS"}),c.jsx("button",{className:"btn-close-x",onClick:()=>$(!1),children:""})]}),c.jsx("div",{className:"missions-grid-compact",children:u.map(q=>c.jsxs("div",{className:`mission-card-compact rank-${q.rank}`,children:[c.jsx("div",{className:"mc-left",children:c.jsx("span",{className:"mc-rank",children:q.rank})}),c.jsxs("div",{className:"mc-center",children:[c.jsx("h4",{className:"mc-title",children:q.nome}),c.jsxs("span",{className:"mc-reward",children:[" ",q.gilRecompensa," Gil"]})]}),c.jsxs("div",{className:"mc-right",children:[c.jsx("button",{className:"btn-details-mini",onClick:()=>re(q),children:"Ver Detalhes"}),c.jsx("button",{className:"btn-accept-mini",onClick:()=>vt(q),children:"ACEITAR"})]})]},q.id))})]})}),K&&c.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>re(null),style:{zIndex:1e5},children:c.jsxs("div",{className:"ff-modal-details-wide ff-card",onClick:q=>q.stopPropagation(),children:[c.jsxs("div",{className:"detail-wide-header",children:[c.jsx("div",{className:"dw-rank-badge",children:K.rank}),c.jsxs("div",{className:"dw-title-box",children:[c.jsx("h2",{children:K.nome}),c.jsxs("span",{className:"dw-narrator",children:["Narrador: ",K.mestreNome]})]}),c.jsxs("div",{className:"dw-vagas-box",children:[c.jsxs("span",{className:"dw-vagas-label",children:["Grupo: ",K.candidatos?K.candidatos.length:0," / ",K.grupo||"?"]}),c.jsx("div",{className:"dw-vagas-bar",children:c.jsx("div",{style:{width:`${Math.min((K.candidatos?.length||0)/(parseInt(K.grupo)||1)*100,100)}%`}})})]})]}),c.jsxs("div",{className:"detail-wide-body",children:[c.jsxs("div",{className:"dw-col-left",children:[c.jsxs("div",{className:"dw-info-item",children:[c.jsx("label",{children:" LOCAL"}),c.jsx("span",{children:K.local||"Desconhecido"})]}),c.jsxs("div",{className:"dw-info-item",children:[c.jsx("label",{children:" CONTRATANTE"}),c.jsx("span",{children:K.contratante||"Annimo"})]}),c.jsxs("div",{className:"dw-reward-box",children:[c.jsx("label",{children:"RECOMPENSAS"}),c.jsxs("div",{className:"dw-gil-row",children:[c.jsx("span",{className:"gil-icon",children:""})," ",c.jsxs("span",{className:"gil-val",children:[K.gilRecompensa," GIL"]})]}),K.recompensa&&c.jsx("div",{className:"dw-extra-rewards",children:K.recompensa.split(`
`).map((q,be)=>c.jsxs("div",{className:"reward-item",children:[" ",q]},be))})]}),c.jsxs("div",{className:"dw-candidates-box",children:[c.jsx("label",{children:"AVENTUREIROS INSCRITOS"}),c.jsx("div",{className:"dw-cand-list",children:K.candidatos&&K.candidatos.length>0?K.candidatos.map((q,be)=>c.jsxs("div",{className:"dw-cand-item",style:{color:q.isLeader?"#ffcc00":"#ccc"},children:[q.isLeader?"":""," ",q.nome]},be)):c.jsx("span",{style:{fontSize:"11px",color:"#666"},children:"Seja o primeiro!"})})]}),K.imagem&&c.jsx("button",{className:"btn-cartaz-full",onClick:()=>ae(K.imagem),children:" VER CARTAZ"})]}),c.jsxs("div",{className:"dw-col-right custom-scrollbar",children:[c.jsxs("div",{className:"dw-text-block",children:[c.jsx("label",{children:" DESCRIO"}),c.jsx("p",{children:K.descricaoMissao})]}),c.jsxs("div",{className:"dw-text-block",children:[c.jsx("label",{children:" OBJETIVOS"}),c.jsx("p",{children:K.objetivosMissao})]}),c.jsxs("div",{className:"dw-text-block",children:[c.jsx("label",{children:" REQUISITOS"}),c.jsx("p",{children:K.requisitos})]})]})]}),c.jsx("button",{className:"dw-close-btn",onClick:()=>re(null),children:"FECHAR"})]})}),he&&c.jsx("div",{className:"ff-modal-overlay-flex",style:{zIndex:100001},onClick:()=>ae(null),children:c.jsxs("div",{className:"lightbox-wrap",children:[c.jsx("button",{className:"close-lightbox",onClick:()=>ae(null),children:""}),c.jsx("img",{src:he,alt:"Cartaz",className:"cartaz-full-view"})]})}),I&&c.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>k(!1),children:c.jsxs("div",{className:"ff-modal-content ff-card",onClick:q=>q.stopPropagation(),children:[c.jsxs("div",{className:"modal-header-row",children:[c.jsx("h3",{className:"modal-title-ff",children:"RESENHAS"}),c.jsx("button",{className:"btn-close-x",onClick:()=>k(!1),children:""})]}),c.jsx("div",{className:"resenhas-list-container",children:w.map(q=>c.jsx("div",{className:"resenha-row-player",onClick:()=>{O(q),k(!1)},children:c.jsx("h4",{children:q.titulo})},q.id))})]})}),j&&c.jsx("div",{className:"fft-modal-overlay",onClick:()=>O(null),children:c.jsxs("div",{className:"fft-dialog-box",onClick:q=>q.stopPropagation(),children:[c.jsxs("div",{className:"fft-portrait-section",children:[c.jsx("div",{className:"fft-portrait-frame",children:c.jsx("img",{src:Tm,alt:"Sanchez"})}),c.jsx("div",{className:"fft-name-plate",children:"SANCHEZ"})]}),c.jsxs("div",{className:"fft-content-section",children:[c.jsx("h2",{className:"fft-title",children:j.titulo}),c.jsx("div",{className:"fft-scroll-text",dangerouslySetInnerHTML:Q5(j.conteudo)})]}),c.jsx("button",{className:"fft-close-btn",onClick:()=>O(null),children:"X"})]})}),me&&e&&c.jsx(Lg,{characterData:e,isMaster:!1,onClose:()=>Re(!1)})]}),c.jsx("style",{children:`
        .jogador-container { position: relative; width: 100vw; height: 100vh; overflow: hidden; background: #000; font-family: 'Cinzel', serif; color: white; }
        .background-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; z-index: 0; }
        .content-layer { position: relative; z-index: 10; width: 100%; height: 100%; }
        
        /* Z-INDEX ALTERADO PARA 2000 PARA FICAR ACIMA DO TABLETOP (1000) */
        .char-hud { position: absolute; top: 20px; left: 20px; display: flex; align-items: center; gap: 15px; background: rgba(0,0,0,0.8); padding: 15px 25px; border-radius: 50px; border: 1px solid #ffcc00; z-index: 999; cursor: pointer; }
        .avatar-circle { width: 60px; height: 60px; background: #222; border-radius: 50%; border: 2px solid #fff; display: flex; align-items: center; justify-content: center; }
        .hud-level { font-size: 28px; font-weight: bold; color: #ffcc00; }
        .char-info h2 { margin: 0; font-size: 20px; color: #ffcc00; text-shadow: 0 0 10px rgba(255, 204, 0, 0.5); }
        .char-meta { font-size: 12px; color: #00f2ff; }
        
        /* Z-INDEX DOS BOTES FLUTUANTES ALTERADOS PARA 2000 */
        .floating-mission-btn { position: fixed; bottom: 30px; left: 15px; width: 50px; height: 50px; border-radius: 50%; border: 2px solid #ffcc00; background: #000; color: #fff; font-size: 24px; cursor: pointer; z-index: 2000; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-mission-btn:hover { transform: scale(1.1); box-shadow: 0 0 15px #ffcc00; }

        .floating-dice-btn { position: fixed; bottom: 90px; left: 18px; width: 45px; height: 45px; border-radius: 50%; border: 2px solid #fff; background: #111; color: #fff; font-size: 20px; cursor: pointer; z-index: 2000; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-dice-btn:hover { border-color: #ffcc00; transform: scale(1.1); box-shadow: 0 0 15px #ffcc00; }
        
        .floating-combat-btn { position: fixed; bottom: 150px; left: 18px; width: 45px; height: 45px; border-radius: 50%; border: 2px solid #f44; background: #111; color: #f44; z-index: 2000; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-combat-btn:hover { border-color: #fff; color: #fff; transform: scale(1.1); box-shadow: 0 0 15px #f44; }

        .floating-sanchez-btn { position: fixed; bottom: 210px; left: 15px; width: 50px; height: 50px; border-radius: 50%; border: 2px solid #00f2ff; background: #000; cursor: pointer; z-index: 2000; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-sanchez-btn:hover { transform: scale(1.1); box-shadow: 0 0 15px #00f2ff; }

        .floating-book-btn { position: fixed; bottom: 270px; left: 15px; width: 50px; height: 50px; border-radius: 50%; border: 2px solid #fff; background: #000; color: #fff; cursor: pointer; z-index: 2000; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-book-btn:hover { transform: scale(1.1); box-shadow: 0 0 15px #fff; border-color: #ffcc00; color: #ffcc00; }

        .floating-calendar-btn { position: fixed; bottom: 330px; left: 15px; width: 50px; height: 50px; border-radius: 50%; border: 2px solid #22c55e; background: #000; color: #22c55e; cursor: pointer; z-index: 2000; display: flex; align-items: center; justify-content: center; transition: 0.3s; font-size: 24px; }
        .floating-calendar-btn:hover { transform: scale(1.1); box-shadow: 0 0 15px #22c55e; color: #fff; border-color: #fff; }

        .sanchez-icon-face { width: 100%; height: 100%; border-radius: 50%; background-size: cover; opacity: 0.8; }
        .floating-sanchez-btn:hover .sanchez-icon-face { opacity: 1; }
        .notification-badge { position: absolute; top: -2px; right: -2px; background: #f00; color: #fff; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; border: 1px solid #fff; font-weight: bold; font-size: 10px; z-index: 2000; box-shadow: 0 0 5px #000; }
        
        .combat-tracker-panel { 
            position: absolute; 
            width: 300px; 
            max-height: 70vh; 
            background: linear-gradient(180deg, #0d0d10 0%, #000 100%);
            border: 2px solid #b8860b; 
            border-radius: 6px; 
            z-index: 2100; 
            display: flex; flex-direction: column; 
            box-shadow: 0 0 25px rgba(0,0,0,0.9);
        }
        .tracker-header { background: #15100a; border-bottom: 2px solid #b8860b; padding: 10px; text-align: center; }
        .tracker-title { color: #ffcc00; margin: 0; font-family: 'Cinzel', serif; letter-spacing: 3px; font-size: 16px; text-shadow: 0 0 5px #ffcc00; }
        .tracker-divider { background: #1a1a1a; color: #ffcc00; font-size: 11px; font-weight: bold; text-align: center; padding: 4px; margin: 5px 0; border-top: 1px dashed #444; border-bottom: 1px dashed #444; letter-spacing: 1px; }
        .tracker-list { flex: 1; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 8px; }
        
        .tracker-item { display: flex; align-items: center; background: rgba(20, 20, 25, 0.9); border: 1px solid #444; border-radius: 4px; padding: 8px 5px; gap: 8px; transition: 0.2s; }
        .tracker-item.object-item { border-style: dashed; }
        .tracker-item:hover { border-color: #ffcc00; }
        .t-col-img { display: flex; flex-direction: column; align-items: center; width: 45px; flex-shrink: 0; }
        .t-index { color: #666; font-size: 10px; font-weight: bold; margin-bottom: 2px; }
        .t-img { width: 40px; height: 40px; border-radius: 50%; background-size: cover; border: 1px solid #777; box-shadow: 0 0 5px #000; }
        .t-col-info { flex: 1; display: flex; flex-direction: column; gap: 4px; overflow: hidden; }
        .t-name { font-size: 13px; font-weight: bold; color: #eec; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .t-stats-row { display: flex; gap: 5px; }
        .t-stat { display: flex; align-items: center; font-size: 11px; background: #080808; padding: 2px 5px; border-radius: 3px; border: 1px solid #333; }
        .t-stat label { margin-right: 4px; font-weight: bold; font-size: 9px; }
        .t-stat.hp label { color: #f44; } .t-stat.mp label { color: #00f2ff; }
        .t-stat span { color: #fff; font-weight: bold; }
        .t-stat small { color: #555; margin-left: 2px; font-size: 9px; }
        .t-col-actions { display: flex; gap: 6px; align-items: center; margin-left: auto; }
        .btn-icon-sm { background: #222; border: 1px solid #555; color: #ccc; width: 22px; height: 22px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center; border-radius: 3px; }
        .btn-icon-sm:hover { border-color: #ffcc00; color: #fff; }
        .empty-tracker { text-align: center; padding: 30px; color: #666; font-style: italic; font-size: 12px; font-family: 'serif'; }

        .monster-detail-card { width: 500px; max-width: 95vw; background: #0d0d10 url('https://www.transparenttextures.com/patterns/dark-matter.png'); border: 2px solid #b8860b; box-shadow: 0 0 50px rgba(0,0,0,0.9), inset 0 0 100px rgba(0,0,0,0.8); border-radius: 8px; overflow: hidden; display: flex; flex-direction: column; }
        .draggable-card { box-shadow: 0 10px 40px rgba(0,0,0,0.9); }
        .md-header { background: linear-gradient(90deg, #15100a, #000); padding: 15px 20px; border-bottom: 1px solid #b8860b; cursor: grab; }
        .md-header:active { cursor: grabbing; }
        .md-title-row { display: flex; justify-content: space-between; align-items: center; }
        .md-title-row h2 { margin: 0; font-family: 'Cinzel', serif; color: #ffcc00; font-size: 20px; letter-spacing: 2px; }
        .md-stars { color: #ffd700; font-size: 14px; text-shadow: 0 0 5px #ffd700; }
        .md-boss-mark { color: #f44; font-weight: bold; margin-left: 5px; font-size: 16px; }
        .md-sub { font-size: 12px; color: #888; margin-top: 5px; font-style: italic; }
        .md-body { display: flex; padding: 20px; gap: 20px; min-height: 250px; }
        .md-img-col { width: 120px; flex-shrink: 0; }
        .md-portrait { width: 120px; height: 120px; border: 2px solid #444; border-radius: 4px; background-size: cover; background-position: center; box-shadow: 0 0 15px #000; }
        .md-info-col { flex: 1; overflow-y: auto; max-height: 400px; padding-right: 5px; }
        .md-block { margin-bottom: 15px; }
        .md-block label { display: block; color: #b8860b; font-size: 10px; font-weight: bold; border-bottom: 1px solid #333; margin-bottom: 5px; }
        .md-block p { margin: 0; font-size: 13px; color: #ccc; line-height: 1.4; white-space: pre-wrap; }
        .md-close-btn { width: 100%; padding: 15px; background: #111; color: #fff; border: none; border-top: 1px solid #b8860b; font-family: 'Cinzel', serif; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .md-close-btn:hover { background: #b8860b; color: #000; }

        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .vtt-status-widget { position: fixed; top: 20px; right: 20px; background: rgba(0,0,0,0.9); border: 2px solid; padding: 15px; border-radius: 8px; display: flex; align-items: center; gap: 15px; z-index: 999; width: 200px; }
        .vtt-status-widget.waiting { border-color: #ffcc00; }
        .vtt-status-widget.connected { border-color: #0f0; }
        .status-indicator { width: 15px; height: 15px; border-radius: 50%; background: #fff; }
        .waiting .status-indicator { background: #ffcc00; }
        .connected .status-indicator { background: #0f0; }
        .status-text h4 { margin: 0; font-size: 14px; color: #fff; }
        .status-text small { font-size: 11px; color: #ccc; }
        
        .upcoming-sessions-banner { position: absolute; top: 150px; left: 50%; transform: translateX(-50%); background: rgba(13, 13, 21, 0.95); border: 2px solid #ffcc00; padding: 30px 50px; border-radius: 8px; text-align: center; z-index: 80; min-width: 400px; }
        .upcoming-sessions-banner h3 { color: #ffcc00; margin: 0 0 15px 0; font-size: 20px; letter-spacing: 2px; }
        .countdown-row { display: flex; justify-content: space-between; align-items: center; gap: 20px; margin-top: 10px; }
        .sessao-nome-future { font-size: 16px; color: #fff; text-transform: uppercase; }
        .countdown-text { color: #00f2ff; font-family: monospace; font-size: 24px; font-weight: bold; }

        .active-sessions-banner { position: absolute; top: 150px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, rgba(20, 0, 0, 0.95), rgba(0,0,0,0.95)); border: 2px solid #f44; padding: 30px 50px; border-radius: 12px; text-align: center; z-index: 80; min-width: 450px; animation: pulseBanner 2s infinite; }
        @keyframes pulseBanner { 0% { box-shadow: 0 0 20px rgba(255,0,0,0.2); } 50% { box-shadow: 0 0 50px rgba(255,0,0,0.5); } 100% { box-shadow: 0 0 20px rgba(255,0,0,0.2); } }
        .session-entry-row { display: flex; justify-content: space-between; align-items: center; gap: 30px; }
        .sessao-nome-active { font-size: 18px; color: #fff; font-weight: bold; text-transform: uppercase; }
        .btn-enter-session { background: #f00; color: #fff; border: none; padding: 12px 30px; cursor: pointer; font-weight: bold; font-size: 16px; border-radius: 4px; }
        
        .ff-modal-overlay-flex { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 99999; display: flex; align-items: center; justify-content: center; }
        .ff-modal-content { width: 600px; background: #0d0d15; border: 2px solid #ffcc00; padding: 25px; border-radius: 8px; }
        .modal-header-row { display: flex; justify-content: space-between; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 15px; }
        .modal-title-ff { color: #ffcc00; margin: 0; }
        .btn-close-x { background: none; border: none; color: #fff; font-size: 24px; cursor: pointer; }
        
        .ff-modal-compact { width: 650px; background: #050505; border: 2px solid #ffcc00; padding: 20px; border-radius: 8px; max-height: 80vh; display: flex; flex-direction: column; }
        .modal-header-compact { display: flex; justify-content: space-between; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px; align-items: center; }
        .missions-grid-compact { overflow-y: auto; padding-right: 5px; display: grid; grid-template-columns: 1fr; gap: 10px; }
        .mission-card-compact { display: flex; background: rgba(255,255,255,0.05); border: 1px solid #333; border-radius: 4px; padding: 10px; align-items: center; transition: 0.2s; }
        .mission-card-compact:hover { border-color: #ffcc00; background: rgba(255,204,0,0.05); }
        .mc-left { width: 50px; display: flex; justify-content: center; font-size: 24px; font-weight: bold; color: #444; }
        .mc-center { flex: 1; padding: 0 15px; }
        .mc-title { margin: 0; font-size: 16px; color: #fff; text-transform: uppercase; }
        .mc-reward { font-size: 12px; color: #ffcc00; }
        .mc-right { display: flex; gap: 10px; }
        .btn-details-mini { background: transparent; border: 1px solid #00f2ff; color: #00f2ff; padding: 5px 10px; font-size: 10px; cursor: pointer; text-transform: uppercase; }
        .btn-accept-mini { background: #00f2ff; color: #000; border: none; padding: 5px 15px; font-size: 10px; font-weight: bold; cursor: pointer; }

        .ff-modal-details-wide { width: 800px; height: 500px; background: #000814; border: 2px solid #ffcc00; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 0 50px #000; border-radius: 6px; }
        .detail-wide-header { height: 70px; background: linear-gradient(90deg, #111, #000); border-bottom: 1px solid #333; display: flex; align-items: center; padding: 0 20px; gap: 20px; }
        .dw-rank-badge { font-size: 36px; font-weight: bold; color: #333; text-shadow: -1px -1px 0 #ffcc00; }
        .dw-title-box h2 { margin: 0; color: #fff; font-size: 22px; text-transform: uppercase; letter-spacing: 1px; }
        .dw-narrator { font-size: 11px; color: #00f2ff; text-transform: uppercase; }
        .dw-vagas-box { flex: 1; display: flex; flex-direction: column; align-items: flex-end; justify-content: center; }
        .dw-vagas-label { font-size: 10px; color: #888; margin-bottom: 3px; }
        .dw-vagas-bar { width: 120px; height: 4px; background: #222; border-radius: 2px; overflow: hidden; }
        .dw-vagas-bar div { height: 100%; background: #0f0; transition: width 0.3s; }
        .detail-wide-body { flex: 1; display: flex; overflow: hidden; }
        .dw-col-left { width: 300px; background: rgba(255,255,255,0.02); border-right: 1px solid #333; padding: 20px; display: flex; flex-direction: column; gap: 20px; overflow-y: auto; }
        .dw-info-item label { display: block; font-size: 10px; color: #ffcc00; font-weight: bold; margin-bottom: 3px; }
        .dw-info-item span { font-size: 13px; color: #fff; }
        .dw-reward-box { background: rgba(255,204,0,0.05); padding: 15px; border: 1px solid rgba(255,204,0,0.1); border-radius: 4px; }
        .dw-reward-box label { display: block; font-size: 10px; color: #ffcc00; font-weight: bold; border-bottom: 1px solid rgba(255,204,0,0.2); padding-bottom: 5px; margin-bottom: 8px; }
        .dw-gil-row { display: flex; align-items: center; gap: 8px; font-size: 16px; color: #fff; font-weight: bold; }
        .dw-extra-rewards { margin-top: 10px; display: flex; flex-direction: column; gap: 4px; }
        .reward-pill { font-size: 11px; color: #ccc; font-style: italic; }
        .dw-candidates-box label { font-size: 10px; color: #666; font-weight: bold; display: block; margin-bottom: 8px; }
        .dw-cand-list { display: flex; flex-direction: column; gap: 5px; }
        .dw-cand-item { font-size: 12px; }
        .btn-cartaz-full { width: 100%; background: #000; border: 1px solid #00f2ff; color: #00f2ff; padding: 10px; font-size: 11px; font-weight: bold; cursor: pointer; margin-top: auto; }
        .btn-cartaz-full:hover { background: #00f2ff; color: #000; }
        .dw-col-right { flex: 1; padding: 25px; overflow-y: auto; }
        .dw-text-block { margin-bottom: 20px; }
        .dw-text-block label { color: #ffcc00; font-size: 11px; font-weight: bold; border-bottom: 1px solid #333; display: block; padding-bottom: 5px; margin-bottom: 8px; }
        .dw-text-block p { color: #ddd; font-size: 14px; line-height: 1.5; white-space: pre-wrap; margin: 0; }
        .dw-close-btn { width: 100%; background: #111; border: none; border-top: 1px solid #333; color: #fff; padding: 12px; cursor: pointer; font-weight: bold; font-size: 12px; }
        .dw-close-btn:hover { background: #222; color: #ffcc00; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #444; border-radius: 3px; }
        .lightbox-wrap { position: relative; max-width: 90vw; max-height: 90vh; display: flex; align-items: center; justify-content: center; }
        .cartaz-full-view { max-width: 100%; max-height: 90vh; border: 3px solid #ffcc00; box-shadow: 0 0 50px #000; }
        .close-lightbox { position: absolute; top: -40px; right: -40px; background: transparent; border: none; color: #fff; font-size: 40px; cursor: pointer; }
        .btn-cyan { border: 1px solid #00f2ff; color: #00f2ff; padding: 10px 15px; background: transparent; cursor: pointer; font-size: 12px; font-weight: bold; transition: 0.2s; text-transform: uppercase; }
        .btn-cyan:hover { background: rgba(0, 242, 255, 0.1); box-shadow: 0 0 10px rgba(0, 242, 255, 0.2); }

        .fft-modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 10000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        
        .fft-dialog-box {
          position: relative;
          width: 800px;
          max-width: 95vw;
          height: 450px;
          background: linear-gradient(180deg, #001a4d 0%, #000022 100%);
          border: 4px solid #b8860b;
          border-radius: 8px;
          box-shadow: 0 0 30px rgba(0,0,0,0.8), inset 0 0 50px rgba(0,0,0,0.5);
          display: flex;
          align-items: flex-start;
          padding: 30px;
          gap: 20px;
          color: #fff;
          font-family: 'Cinzel', serif;
        }

        .fft-portrait-section {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 10px;
          width: 150px;
          flex-shrink: 0;
        }

        .fft-portrait-frame {
          width: 140px;
          height: 180px;
          border: 3px solid #b8860b;
          background: #000;
          overflow: hidden;
          box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        .fft-portrait-frame img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .fft-name-plate {
          width: 100%;
          background: linear-gradient(90deg, #b8860b, #8a6e14);
          color: #000;
          text-align: center;
          font-weight: bold;
          padding: 5px 0;
          font-size: 0.9rem;
          border: 1px solid #ffd700;
          box-shadow: 0 2px 5px rgba(0,0,0,0.5);
          letter-spacing: 1px;
        }

        .fft-content-section {
          flex: 1;
          height: 100%;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        }

        .fft-title {
          margin: 0 0 15px 0;
          font-size: 1.8rem;
          color: #00f2ff;
          text-shadow: 0 0 5px rgba(0, 242, 255, 0.5);
          border-bottom: 1px solid #b8860b;
          padding-bottom: 10px;
          letter-spacing: 1px;
        }

        .fft-scroll-text {
          flex: 1;
          overflow-y: auto;
          font-family: 'Lato', sans-serif;
          font-size: 1.1rem;
          line-height: 1.6;
          color: #e0e0e0;
          padding-right: 10px;
          scrollbar-width: none; 
          -ms-overflow-style: none; 
        }
        .fft-scroll-text::-webkit-scrollbar { 
          display: none; 
        }

        .fft-close-btn {
          position: absolute;
          top: -15px;
          right: -15px;
          width: 40px;
          height: 40px;
          background: #b8860b;
          color: #000;
          font-weight: bold;
          border: 2px solid #fff;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          font-family: sans-serif;
          box-shadow: 0 0 10px #000;
          transition: 0.2s;
        }
        .fft-close-btn:hover {
          background: #ffd700;
          transform: scale(1.1);
        }

        .levelup-global-overlay {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background: rgba(0,0,0,0.8);
            z-index: 200000;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .levelup-content {
            text-align: center;
            animation: zoomIn 0.5s ease-out;
        }

        .levelup-title {
            font-family: 'Cinzel', serif;
            font-size: 80px;
            font-weight: bold;
            color: #ffcc00;
            text-transform: uppercase;
            letter-spacing: 10px;
            margin: 0 0 30px 0;
            text-shadow: 
                3px 3px 0 #000,
                -1px -1px 0 #000,  
                1px -1px 0 #000,
                -1px 1px 0 #000,
                1px 1px 0 #000,
                0 0 20px #ffcc00,
                0 0 40px #ffcc00;
            animation: pulseText 1.5s infinite alternate;
        }

        .levelup-confirm-btn {
            background: linear-gradient(to bottom, #b8860b, #8a6e14);
            border: 2px solid #fff;
            color: #000;
            font-family: 'Cinzel', serif;
            font-size: 18px;
            font-weight: bold;
            padding: 10px 40px;
            cursor: pointer;
            box-shadow: 0 0 15px #ffcc00;
            transition: 0.2s;
            border-radius: 50px;
        }
        
        .levelup-confirm-btn:hover {
            transform: scale(1.1);
            background: #ffd700;
            color: #000;
            box-shadow: 0 0 30px #ffd700;
        }

        @keyframes zoomIn { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes pulseText { from { text-shadow: 0 0 20px #ffcc00; } to { text-shadow: 0 0 40px #ffcc00, 0 0 10px #fff; } }
        
        .guild-btn-float {
            top: auto !important;
            left: auto !important;
            transform: none !important;
            bottom: 30px !important;
            right: 110px !important; 
            z-index: 2000 !important; /* GARANTINDO QUE A GUILDA TAMBM NO FIQUE ATRS */
        }
      `})]}):c.jsx("div",{className:"loading-screen",children:"Nenhum personagem encontrado."})}const X5=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),c.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"18"}),c.jsx("line",{x1:"16",y1:"6",x2:"16",y2:"22"})]}),J5=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 7v10l10 5 10-5V7"}),c.jsx("path",{d:"M12 22V12"})]}),W5=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),c.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),c.jsx("polyline",{points:"21 15 16 10 5 21"})]}),Z5=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 2c-4 0-8 3-8 8 0 4 3 7 5 7.5V21h6v-3.5c2-.5 5-3.5 5-7.5 0-5-4-8-8-8z"}),c.jsx("path",{d:"M9 10h.01"}),c.jsx("path",{d:"M15 10h.01"}),c.jsx("path",{d:"M10 14h4"})]}),eO=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),tO=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 2a3 3 0 0 1 3 3c0 2-3 3-3 3s-3-1-3-3a3 3 0 0 1 3-3z"}),c.jsx("path",{d:"M15 9c1 1 2.5 2 2.5 4 0 2-2.5 4-2.5 4H9s-2.5-2-2.5-4c0-2 1.5-3 2.5-4"}),c.jsx("path",{d:"M9 17v1a3 3 0 0 0 6 0v-1"}),c.jsx("line",{x1:"7",y1:"22",x2:"17",y2:"22"})]}),nO=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M14.5 17.5L3 6V3h3l11.5 11.5"}),c.jsx("path",{d:"M13 19l6-6"}),c.jsx("path",{d:"M16 16l4 4"}),c.jsx("path",{d:"M19 21l2-2"})]}),aO=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),c.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]});function iO(){const i=ns(),[e,n]=A.useState(null),[s,o]=A.useState(!0),[u,f]=A.useState([]),[m,b]=A.useState([]),[g,v]=A.useState(null),[E,T]=A.useState(!1),[M,G]=A.useState(!1),[B,U]=A.useState(!1),[V,$]=A.useState(!1),[K,re]=A.useState(!1),[he,ae]=A.useState(!1),[w,C]=A.useState(null),[I,k]=A.useState({x:280,y:100}),[j,O]=A.useState(!1),[N,Ve]=A.useState({x:0,y:0}),[ye,ee]=A.useState({x:620,y:100}),[me,Re]=A.useState(!1),[De,Qe]=A.useState({x:0,y:0}),[z,se]=A.useState(null),[le,Q]=A.useState(null),[ie,ge]=A.useState({name:"",img:"",stars:1,difficultyQ:!1,hpCurrent:10,hpMax:10,mpCurrent:10,mpMax:10,xp:0,drops:"",tips:"",description:"",visibleBars:!1}),[Ee,He]=A.useState([]),[we,it]=A.useState("monsters"),[st,Ct]=A.useState("list"),[At,Xt]=A.useState([]),[Ut,Jt]=A.useState(!1),[Y,Ne]=A.useState(null),ve=A.useRef(0),Se=A.useRef(null);A.useEffect(()=>{Se.current=e},[e]);const[Ze,Le]=A.useState(!1);A.useEffect(()=>{const H=setTimeout(()=>{Le(!0)},2e3);return()=>clearTimeout(H)},[]),A.useEffect(()=>{let H=()=>{};const q=df(Vt,be=>{if(be){const $e=Nn(Rt(xe,"sessoes"),Na("mestreId","==",be.uid));H=Rn($e,mt=>{const Ye=mt.docs.map(bt=>({id:bt.id,...bt.data()})).find(bt=>{const Gt=new Date,En=new Date(bt.expiraEm);return Gt<=En});if(Ye&&(n(Ye),b(Ye.connected_players||[]),Ye.latest_roll)){const bt=Ye.latest_roll;bt.timestamp>ve.current&&Ne(Gt=>!Gt||Gt.timestamp!==bt.timestamp?bt:Gt)}o(!1)});const Ke=Nn(Rt(xe,"bestiary"),Na("mestreId","==",be.uid));Rn(Ke,mt=>He(mt.docs.map(jt=>({id:jt.id,...jt.data()}))))}else o(!1),i("/login")});return()=>{q(),H()}},[i]),A.useEffect(()=>{if(e?.id)return qe(je(xe,"sessoes",e.id),{dm_online:!0}).catch(console.error),()=>qe(je(xe,"sessoes",e.id),{dm_online:!1}).catch(console.error)},[e?.id]),A.useEffect(()=>{const H=Nn(Rt(xe,"characters")),q=Rn(H,be=>{const $e=be.docs.map(Ke=>({id:Ke.id,...Ke.data()}));if(Xt($e),e&&e.participantes){const Ke=$e.filter(mt=>e.participantes.includes(mt.name));f(Ke)}});return()=>q()},[e?.participantes]);const It=H=>{se(H),setTimeout(()=>se(null),3e3)},nt=async H=>{if(window.confirm("Excluir item permanentemente?"))try{await hi(je(xe,"bestiary",H))}catch(q){console.error(q)}},Zt=async()=>{try{const H=we==="objects"?"object":"monster";await Bs(Rt(xe,"bestiary"),{...ie,category:H,mestreId:Vt.currentUser.uid,createdAt:new Date().toISOString()}),Ct("list"),ge({name:"",img:"",stars:1,difficultyQ:!1,hpCurrent:10,hpMax:10,mpCurrent:10,mpMax:10,xp:0,drops:"",tips:"",description:"",visibleBars:!1})}catch(H){alert("Erro: "+H.message)}},de=async H=>{if(!e)return;const q=H.category==="object"?"object":"enemy",be={id:`${q}_${Date.now()}`,type:q,name:H.name,img:H.img,x:0,y:0,size:1,visible:!0,visibleBars:H.visibleBars,stats:{hp:{current:H.hpCurrent,max:H.hpMax},mp:{current:H.mpCurrent,max:H.mpMax}},details:{...H}};await qe(je(xe,"sessoes",e.id),{tokens:[...e.tokens||[],be]}),$(!1)},Ce=async H=>{if(!e)return;if(e.tokens?.find(be=>be.uid===H.uid))return alert("Jogador j est no mapa!");const q={id:`player_${H.uid}`,type:"player",uid:H.uid,name:H.name,img:H.character_sheet?.imgUrl||"",x:0,y:0,size:1,visible:!0,controlledBy:H.uid};await qe(je(xe,"sessoes",e.id),{tokens:[...e.tokens||[],q]}),re(!1)},Me=async H=>{const q=e.tokens.filter(be=>be.id!==H);await qe(je(xe,"sessoes",e.id),{tokens:q})},P=async(H,q)=>{const be=e.tokens.map($e=>$e.id===H.id?{...$e,...q}:$e);await qe(je(xe,"sessoes",e.id),{tokens:be})},_e=async(H,q,be)=>{if(H.type!=="enemy")return;const $e=e.tokens.map(Ke=>Ke.id===H.id?{...Ke,stats:{...Ke.stats,[q]:{...Ke.stats[q],current:Number(be)}}}:Ke);await qe(je(xe,"sessoes",e.id),{tokens:$e})},Ue=(H,q)=>{H.dataTransfer.setData("dragIndex",q)},Bt=async(H,q)=>{const be=H.dataTransfer.getData("dragIndex");if(be==="")return;const $e=[...e.tokens],[Ke]=$e.splice(be,1);$e.splice(q,0,Ke),await qe(je(xe,"sessoes",e.id),{tokens:$e})},vt=H=>{O(!0),Ve({x:H.clientX-I.x,y:H.clientY-I.y})},rt=H=>{Re(!0),Qe({x:H.clientX-ye.x,y:H.clientY-ye.y})},cn=H=>{j&&k({x:H.clientX-N.x,y:H.clientY-N.y}),me&&ee({x:H.clientX-De.x,y:H.clientY-De.y})},Pt=()=>{O(!1),Re(!1)},Ga=async()=>{if(!le||!e)return;const H=e.tokens.map(q=>{if(q.id===le.id){let be={...q};return le.stats&&(be.stats={hp:{...q.stats?.hp,current:le.stats.hp.current},mp:{...q.stats?.mp,current:le.stats.mp.current}}),be.imgX=le.imgX,be.imgY=le.imgY,be}return q});await qe(je(xe,"sessoes",e.id),{tokens:H}),Q(null)},Hn=(H,q)=>{if(!le)return;const be=le[H]!==void 0?le[H]:50;Q({...le,[H]:be+q})},$a=Ee.filter(H=>we==="monsters"?H.category!=="object":H.category==="object");return s||!Ze?c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",background:"radial-gradient(circle at center, #001a33 0%, #000000 100%)",color:"#ffcc00",fontFamily:"Cinzel, serif",zIndex:9999,position:"fixed",top:0,left:0},children:[c.jsx("img",{src:Df,alt:"Carregando...",style:{width:"100px",marginBottom:"20px"}}),c.jsx("p",{style:{fontSize:"18px",letterSpacing:"2px",textTransform:"uppercase",animation:"pulseText 2s infinite ease-in-out"},children:"Sintonizando ter..."}),c.jsx("style",{children:"@keyframes pulseText { 0% { opacity: 0.3; } 50% { opacity: 1; } 100% { opacity: 0.3; } }"})]}):c.jsxs("div",{className:"mestre-vtt-container",onMouseMove:cn,onMouseUp:Pt,children:[c.jsx("div",{className:"mestre-bg-layer",style:{backgroundImage:`url(${aw})`}}),c.jsxs("div",{className:"dm-players-sidebar",children:[c.jsx("h3",{className:"sidebar-title",children:"AVENTUREIROS"}),c.jsx("div",{className:"players-list-scroll",children:u.map(H=>{const q=m.includes(H.uid),be=H.character_sheet?.imgUrl;return c.jsxs("div",{className:`mini-player-card ${q?"online":"offline"}`,onClick:()=>v(H),title:"Ficha",children:[c.jsxs("div",{className:"mini-avatar",children:[be?c.jsx("div",{className:"avatar-img",style:{backgroundImage:`url(${be})`}}):c.jsx("div",{className:"avatar-placeholder",children:H.name.charAt(0)}),c.jsx("div",{className:`status-dot ${q?"green":"gray"}`})]}),c.jsxs("div",{className:"mini-info",children:[c.jsx("span",{className:"p-name",children:H.name}),c.jsxs("span",{className:"p-lvl",children:["LVL ",H.character_sheet?.basic_info?.level||1]})]})]},H.id)})})]}),c.jsxs("div",{className:"session-status-top",children:[c.jsx("div",{className:"status-indicator active"}),c.jsxs("div",{className:"status-info",children:[c.jsxs("h2",{children:["SESSO ATIVA: ",e.missaoNome]}),c.jsxs("p",{children:["Mestre Online  ",m.length," Jogadores Conectados"]})]})]}),c.jsx(rw,{sessaoData:e,isMaster:!0,showManager:E,onCloseManager:()=>T(!1),personagensData:u,onEditToken:H=>Q(JSON.parse(JSON.stringify(H))),highlightTokenId:z}),c.jsx(ow,{sessaoData:e,isMaster:!0,showManager:M,onCloseManager:()=>G(!1)}),c.jsx(lw,{sessaoData:e,isMaster:!0,showManager:B,onCloseManager:()=>U(!1)}),Y&&c.jsx(uw,{rollData:Y,onClose:()=>{ve.current=Y.timestamp,Ne(null)}}),Ut&&c.jsx(cw,{sessaoId:e.id,playerName:"MESTRE",onClose:()=>Jt(!1)}),he&&c.jsxs("div",{className:"combat-tracker-panel fade-in",style:{top:I.y,left:I.x,zIndex:1e3},children:[c.jsx("div",{className:"tracker-header",onMouseDown:vt,style:{cursor:"grab"},children:c.jsx("h3",{className:"tracker-title",children:"COMBATE"})}),c.jsxs("div",{className:"tracker-list",children:[e.tokens?.map((H,q)=>({...H,originalIndex:q})).filter(H=>H.type!=="object").map(H=>{let q=0,be=0,$e=0,Ke=0,mt=H.img;if(H.type==="player"){const Ye=u.find(bt=>bt.uid===H.uid);Ye&&(q=Ye.character_sheet?.status?.hp?.current||0,be=Ye.character_sheet?.status?.hp?.max||0,$e=Ye.character_sheet?.status?.mp?.current||0,Ke=Ye.character_sheet?.status?.mp?.max||0,Ye.character_sheet?.imgUrl&&(mt=Ye.character_sheet.imgUrl))}else q=H.stats.hp.current,be=H.stats.hp.max,$e=H.stats.mp.current,Ke=H.stats.mp.max;const jt=H.visible!==!1;return c.jsxs("div",{className:"tracker-item",draggable:!0,onDragStart:Ye=>Ue(Ye,H.originalIndex),onDragOver:Ye=>Ye.preventDefault(),onDrop:Ye=>Bt(Ye,H.originalIndex),children:[c.jsxs("div",{className:"t-col-img",children:[c.jsx("div",{className:"t-index",children:H.originalIndex+1}),c.jsx("div",{className:"t-img",style:{backgroundImage:`url(${mt})`,backgroundPosition:`${H.imgX||50}% ${H.imgY||50}%`,opacity:jt?1:.5}})]}),c.jsxs("div",{className:"t-col-info",children:[c.jsx("div",{className:"t-name",children:H.name}),c.jsxs("div",{className:"t-stats-row",children:[c.jsxs("div",{className:"t-stat hp",children:[c.jsx("label",{children:"HP"}),H.type==="enemy"?c.jsx("input",{type:"number",value:q,onChange:Ye=>_e(H,"hp",Ye.target.value)}):c.jsx("span",{children:q}),c.jsxs("small",{children:["/",be]})]}),c.jsxs("div",{className:"t-stat mp",children:[c.jsx("label",{children:"MP"}),H.type==="enemy"?c.jsx("input",{type:"number",value:$e,onChange:Ye=>_e(H,"mp",Ye.target.value)}):c.jsx("span",{children:$e}),c.jsxs("small",{children:["/",Ke]})]})]})]}),c.jsxs("div",{className:"t-col-actions",children:[c.jsxs("div",{className:"img-adj-grid",children:[c.jsx("button",{onClick:()=>P(H,{imgY:(H.imgY||50)-10}),children:""}),c.jsxs("div",{style:{display:"flex"},children:[c.jsx("button",{onClick:()=>P(H,{imgX:(H.imgX||50)-10}),children:""}),c.jsx("button",{onClick:()=>P(H,{imgX:(H.imgX||50)+10}),children:""})]}),c.jsx("button",{onClick:()=>P(H,{imgY:(H.imgY||50)+10}),children:""})]}),c.jsxs("div",{className:"act-btns",children:[c.jsx("button",{className:"btn-icon-sm",title:jt?"Ocultar":"Mostrar",onClick:()=>P(H,{visible:!jt}),style:{color:jt?"#ffcc00":"#666"},children:jt?"":""}),c.jsx("button",{className:"btn-icon-sm",title:"Destacar no Mapa",onClick:()=>It(H.id),children:""}),H.type==="enemy"&&c.jsx("button",{className:"btn-icon-sm",title:"Detalhes",onClick:()=>C({...H.details,img:H.img}),children:""}),c.jsx("button",{className:"btn-icon-sm delete",title:"Remover",onClick:()=>Me(H.id),children:""})]})]})]},H.id)}),e.tokens?.some(H=>H.type==="object")&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"tracker-divider",children:"OBJETOS"}),e.tokens?.map((H,q)=>({...H,originalIndex:q})).filter(H=>H.type==="object").map(H=>{const q=H.visible!==!1;return c.jsxs("div",{className:"tracker-item object-item",draggable:!0,onDragStart:be=>Ue(be,H.originalIndex),onDragOver:be=>be.preventDefault(),onDrop:be=>Bt(be,H.originalIndex),children:[c.jsxs("div",{className:"t-col-img",children:[c.jsx("div",{className:"t-index",children:H.originalIndex+1}),c.jsx("div",{className:"t-img",style:{backgroundImage:`url(${H.img})`,backgroundPosition:`${H.imgX||50}% ${H.imgY||50}%`,opacity:q?1:.5}})]}),c.jsx("div",{className:"t-col-info",children:c.jsxs("div",{className:"t-name",style:{color:"#ffcc00"},children:[H.name," ",c.jsx("small",{children:"(Obj)"})]})}),c.jsxs("div",{className:"t-col-actions",children:[c.jsxs("div",{className:"img-adj-grid",children:[c.jsx("button",{onClick:()=>P(H,{imgY:(H.imgY||50)-10}),children:""}),c.jsxs("div",{style:{display:"flex"},children:[c.jsx("button",{onClick:()=>P(H,{imgX:(H.imgX||50)-10}),children:""}),c.jsx("button",{onClick:()=>P(H,{imgX:(H.imgX||50)+10}),children:""})]}),c.jsx("button",{onClick:()=>P(H,{imgY:(H.imgY||50)+10}),children:""})]}),c.jsxs("div",{className:"act-btns",children:[c.jsx("button",{className:"btn-icon-sm",title:q?"Ocultar":"Mostrar",onClick:()=>P(H,{visible:!q}),style:{color:q?"#ffcc00":"#666"},children:q?"":""}),c.jsx("button",{className:"btn-icon-sm",title:"Destacar no Mapa",onClick:()=>It(H.id),children:""}),c.jsx("button",{className:"btn-icon-sm delete",title:"Remover",onClick:()=>Me(H.id),children:""})]})]})]},H.id)})]}),(!e.tokens||e.tokens.length===0)&&c.jsx("div",{className:"empty-tracker",children:"Mesa Vazia"})]})]}),w&&c.jsxs("div",{className:"monster-detail-card draggable-card fade-in",style:{position:"absolute",top:ye.y,left:ye.x,zIndex:1100},onClick:H=>H.stopPropagation(),children:[c.jsxs("div",{className:"md-header",onMouseDown:rt,style:{cursor:"grab"},children:[c.jsxs("div",{className:"md-title-row",children:[c.jsx("h2",{children:w.name}),c.jsxs("div",{className:"md-stars",children:[[...Array(w.stars||1)].map((H,q)=>c.jsx("span",{children:""},q)),w.difficultyQ&&c.jsx("span",{className:"md-boss-mark",children:"?"})]})]}),c.jsxs("div",{className:"md-sub",children:["XP: ",w.xp]})]}),c.jsxs("div",{className:"md-body",children:[c.jsx("div",{className:"md-img-col",children:c.jsx("div",{className:"md-portrait",style:{backgroundImage:`url(${w.img})`}})}),c.jsxs("div",{className:"md-info-col custom-scrollbar",children:[c.jsxs("div",{className:"md-block",children:[c.jsx("label",{children:"DESCRIO"}),c.jsx("p",{children:w.description||"Sem descrio."})]}),w.drops&&c.jsxs("div",{className:"md-block",children:[c.jsx("label",{children:"DROPS & ITENS"}),c.jsx("p",{children:w.drops})]}),w.tips&&c.jsxs("div",{className:"md-block tips",children:[c.jsx("label",{children:"DICAS DO SANCHEZ (GM)"}),c.jsx("p",{children:w.tips})]})]})]}),c.jsx("button",{className:"md-close-btn",onClick:()=>C(null),children:"FECHAR"})]}),c.jsxs("div",{className:"dm-tools-dock",children:[c.jsxs("div",{className:"tool-group",children:[c.jsx(Vg,{isMestre:!0,vttDock:!0}),c.jsx("div",{className:"tool-label",children:"BAZAR"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx(iw,{vttDock:!0}),c.jsx("div",{className:"tool-label",children:"FORJA"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx("button",{className:"tool-btn-placeholder",onClick:()=>T(!0),children:c.jsx(X5,{})}),c.jsx("div",{className:"tool-label",children:"TABLETOP"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx("button",{className:"tool-btn-placeholder",onClick:()=>ae(!he),title:"Rastreador de Combate",children:c.jsx(nO,{})}),c.jsx("div",{className:"tool-label",children:"COMBATE"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx("button",{className:"tool-btn-placeholder",onClick:()=>Jt(!0),children:c.jsx(J5,{})}),c.jsx("div",{className:"tool-label",children:"DADOS"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx("button",{className:"tool-btn-placeholder",onClick:()=>window.open("https://www.canva.com/design/DAGpzszHsc4/NcbQ19hsr4grzm9aotQFtw/edit?utm_content=DAGpzszHsc4&utm_campaign=designshare&utm_medium=link2&utm_source=sharebutton","_blank"),children:c.jsx(aO,{})}),c.jsx("div",{className:"tool-label",children:"LIVRO"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx("button",{className:"tool-btn-placeholder",onClick:()=>G(!0),children:c.jsx(W5,{})}),c.jsx("div",{className:"tool-label",children:"CENRIOS"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx("button",{className:"tool-btn-placeholder",onClick:()=>$(!0),children:c.jsx(Z5,{})}),c.jsx("div",{className:"tool-label",children:"BESTIRIO & OBJETOS"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx("button",{className:"tool-btn-placeholder",onClick:()=>U(!0),children:c.jsx(eO,{})}),c.jsx("div",{className:"tool-label",children:"NPCS"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx("button",{className:"tool-btn-placeholder",onClick:()=>re(!0),children:c.jsx(tO,{})}),c.jsx("div",{className:"tool-label",children:"JOGADORES"})]})]}),g&&c.jsx(Lg,{characterData:g,isMaster:!0,onClose:()=>v(null)}),V&&c.jsx("div",{className:"modal-overlay-custom",onClick:()=>$(!1),children:c.jsxs("div",{className:"modal-box-custom wide",onClick:H=>H.stopPropagation(),children:[c.jsxs("div",{className:"modal-header-c",children:[c.jsx("h3",{children:we==="monsters"?"BESTIRIO":"OBJETOS"}),c.jsxs("div",{className:"bestiary-tabs",children:[c.jsx("button",{className:we==="monsters"?"active":"",onClick:()=>{it("monsters"),Ct("list")},children:"MONSTROS"}),c.jsx("button",{className:we==="objects"?"active":"",onClick:()=>{it("objects"),Ct("list")},children:"OBJETOS"})]}),c.jsx("button",{className:"close-c",onClick:()=>$(!1),children:""})]}),st==="list"?c.jsxs("div",{className:"monster-list-view",children:[c.jsxs("button",{className:"btn-create-monster",onClick:()=>Ct("create"),children:["+ CRIAR NOVO ",we==="monsters"?"MONSTRO":"OBJETO"]}),c.jsx("div",{className:"bestiary-grid",children:$a.map(H=>c.jsxs("div",{className:"monster-card-db",children:[c.jsx("div",{className:"m-thumb",style:{backgroundImage:`url(${H.img})`}}),c.jsxs("div",{className:"m-info",children:[c.jsx("strong",{children:H.name}),H.category!=="object"&&c.jsxs("small",{children:["HP: ",H.hpMax]})]}),c.jsxs("div",{className:"m-actions",children:[c.jsx("button",{className:"btn-deploy",onClick:()=>de(H),children:"INSERIR"}),c.jsx("button",{className:"btn-delete",onClick:()=>nt(H.id),children:"EXCLUIR"})]})]},H.id))})]}):c.jsxs("div",{className:"monster-create-view",children:[c.jsxs("div",{className:"create-row",children:[c.jsxs("div",{className:"img-upload-box",children:[c.jsx("div",{className:"preview-img",style:{backgroundImage:`url(${ie.img})`}}),c.jsx("input",{placeholder:"Link Imagem...",value:ie.img,onChange:H=>ge({...ie,img:H.target.value})})]}),c.jsxs("div",{className:"details-inputs",children:[c.jsx("input",{className:"input-title",placeholder:"Nome",value:ie.name,onChange:H=>ge({...ie,name:H.target.value})}),we==="monsters"&&c.jsxs("div",{className:"stats-row-c",children:[c.jsxs("div",{children:[c.jsx("label",{children:"HP Max"}),c.jsx("input",{type:"number",value:ie.hpMax,onChange:H=>ge({...ie,hpMax:Number(H.target.value),hpCurrent:Number(H.target.value)})})]}),c.jsxs("div",{children:[c.jsx("label",{children:"MP Max"}),c.jsx("input",{type:"number",value:ie.mpMax,onChange:H=>ge({...ie,mpMax:Number(H.target.value),mpCurrent:Number(H.target.value)})})]})]}),c.jsxs("div",{className:"toggle-row",children:[c.jsx("input",{type:"checkbox",checked:ie.visibleBars,onChange:H=>ge({...ie,visibleBars:H.target.checked})}),c.jsx("label",{children:"Barras visveis?"})]})]})]}),c.jsxs("div",{className:"text-areas-row",style:{flexDirection:"column",height:"auto"},children:[c.jsx("textarea",{style:{height:"60px"},placeholder:"Descrio (Lore)...",value:ie.description,onChange:H=>ge({...ie,description:H.target.value})}),we==="monsters"&&c.jsxs(c.Fragment,{children:[c.jsx("textarea",{style:{height:"60px"},placeholder:"Drops (Use Enter para tpicos)",value:ie.drops,onChange:H=>ge({...ie,drops:H.target.value})}),c.jsx("textarea",{style:{height:"60px"},placeholder:"Dicas do Sanchez (Secreto)",value:ie.tips,onChange:H=>ge({...ie,tips:H.target.value})})]})]}),c.jsxs("div",{className:"actions-row-bottom",children:[c.jsx("button",{className:"btn-save-m",onClick:Zt,children:"SALVAR"}),c.jsx("button",{className:"btn-cancel-m",onClick:()=>Ct("list"),children:"VOLTAR"})]})]})]})}),K&&c.jsx("div",{className:"modal-overlay-custom",onClick:()=>re(!1),children:c.jsxs("div",{className:"modal-box-custom",onClick:H=>H.stopPropagation(),children:[c.jsxs("div",{className:"modal-header-c",children:[c.jsx("h3",{children:"INSERIR JOGADOR"}),c.jsx("button",{className:"close-c",onClick:()=>re(!1),children:""})]}),c.jsx("div",{className:"player-select-grid",children:At.map(H=>c.jsxs("div",{className:"char-select-card",onClick:()=>Ce(H),children:[c.jsx("div",{className:"c-avatar",style:{backgroundImage:`url(${H.character_sheet?.imgUrl})`}}),c.jsx("span",{children:H.name})]},H.id))})]})}),le&&c.jsx("div",{className:"modal-overlay-custom",onClick:()=>Q(null),children:c.jsxs("div",{className:"modal-box-custom refined-edit",onClick:H=>H.stopPropagation(),children:[c.jsxs("h3",{className:"modal-edit-title",children:["EDITAR: ",le.name]}),le.type!=="object"&&c.jsxs("div",{className:"refined-stats-container",children:[c.jsxs("div",{className:"refined-stat-row",children:[c.jsx("span",{className:"stat-label hp",children:"HP"}),c.jsx("button",{className:"btn-adj",onClick:()=>Q({...le,stats:{...le.stats,hp:{...le.stats.hp,current:le.stats.hp.current-1}}}),children:"-"}),c.jsxs("span",{className:"stat-value",children:[le.stats.hp.current," / ",le.stats.hp.max]}),c.jsx("button",{className:"btn-adj",onClick:()=>Q({...le,stats:{...le.stats,hp:{...le.stats.hp,current:le.stats.hp.current+1}}}),children:"+"})]}),c.jsxs("div",{className:"refined-stat-row",children:[c.jsx("span",{className:"stat-label mp",children:"MP"}),c.jsx("button",{className:"btn-adj",onClick:()=>Q({...le,stats:{...le.stats,mp:{...le.stats.mp,current:le.stats.mp.current-1}}}),children:"-"}),c.jsxs("span",{className:"stat-value",children:[le.stats.mp.current," / ",le.stats.mp.max]}),c.jsx("button",{className:"btn-adj",onClick:()=>Q({...le,stats:{...le.stats,mp:{...le.stats.mp,current:le.stats.mp.current+1}}}),children:"+"})]})]}),c.jsxs("div",{className:"refined-image-control",children:[c.jsx("label",{children:"AJUSTAR ROSTO (POSIO)"}),c.jsxs("div",{className:"d-pad-grid",children:[c.jsx("div",{}),c.jsx("button",{onClick:()=>Hn("imgY",-10),children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>Hn("imgX",-10),children:""}),c.jsx("div",{className:"center-dot"}),c.jsx("button",{onClick:()=>Hn("imgX",10),children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>Hn("imgY",10),children:""}),c.jsx("div",{})]})]}),c.jsx("button",{className:"btn-save-refined",onClick:Ga,children:"OK (SALVAR)"})]})}),c.jsx("style",{children:`
        .mestre-vtt-container { width: 100vw; height: 100vh; overflow: hidden; position: relative; background: #000; font-family: 'Cinzel', serif; color: #fff; }
        .mestre-bg-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.4; z-index: 0; }
        .dm-players-sidebar { position: absolute; top: 20px; left: 20px; width: 200px; background: rgba(0, 10, 20, 0.95); border: 2px solid #ffcc00; border-radius: 8px; padding: 10px; z-index: 50; max-height: 80vh; display: flex; flex-direction: column; }
        .sidebar-title { color: #ffcc00; font-size: 12px; border-bottom: 1px solid #444; padding-bottom: 5px; margin-bottom: 10px; text-align: center; }
        .players-list-scroll { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; }
        .mini-player-card { display: flex; align-items: center; padding: 5px; background: rgba(255,255,255,0.05); border: 1px solid #333; border-radius: 4px; cursor: pointer; }
        .mini-player-card.online { border-left: 3px solid #00f2ff; }
        .mini-avatar { position: relative; margin-right: 8px; }
        .avatar-img, .avatar-placeholder { width: 30px; height: 30px; border-radius: 50%; background-size: cover; border: 1px solid #fff; }
        .avatar-placeholder { background: #222; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .status-dot { width: 6px; height: 6px; border-radius: 50%; position: absolute; bottom: 0; right: 0; border: 1px solid #000; }
        .status-dot.green { background: #00f2ff; } .status-dot.gray { background: #666; }
        .p-name { font-size: 11px; font-weight: bold; display: block; }
        .p-lvl { font-size: 9px; color: #ffcc00; }

        .session-status-top { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); border: 1px solid #00f2ff; padding: 5px 20px; border-radius: 20px; display: flex; align-items: center; gap: 10px; z-index: 40; }
        .status-indicator { width: 10px; height: 10px; background: #00f2ff; border-radius: 50%; box-shadow: 0 0 10px #00f2ff; animation: pulse 2s infinite; }
        .status-info h2 { margin: 0; font-size: 14px; color: #fff; }
        .status-info p { margin: 0; font-size: 10px; color: #00f2ff; }

        /* COMBAT TRACKER */
        .combat-tracker-panel { position: absolute; width: 320px; max-height: 70vh; background: linear-gradient(180deg, #0d0d10 0%, #000 100%); border: 2px solid #b8860b; border-radius: 6px; display: flex; flex-direction: column; box-shadow: 0 0 25px rgba(0,0,0,0.9); }
        .tracker-header { background: #15100a; border-bottom: 2px solid #b8860b; padding: 10px; text-align: center; }
        .tracker-title { color: #ffcc00; margin: 0; font-family: 'Cinzel', serif; letter-spacing: 3px; font-size: 16px; text-shadow: 0 0 5px #ffcc00; }
        .tracker-divider { background: #1a1a1a; color: #ffcc00; font-size: 11px; font-weight: bold; text-align: center; padding: 4px; margin: 5px 0; border-top: 1px dashed #444; border-bottom: 1px dashed #444; letter-spacing: 1px; }
        .tracker-list { flex: 1; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 8px; }
        .tracker-item { display: flex; align-items: center; background: rgba(20, 20, 25, 0.9); border: 1px solid #444; border-radius: 4px; padding: 8px 5px; gap: 8px; transition: 0.2s; }
        .tracker-item.object-item { border-style: dashed; }
        .tracker-item:hover { border-color: #ffcc00; }
        .t-col-img { display: flex; flex-direction: column; align-items: center; width: 45px; flex-shrink: 0; }
        .t-index { color: #666; font-size: 10px; font-weight: bold; margin-bottom: 2px; }
        .t-img { width: 40px; height: 40px; border-radius: 50%; background-size: cover; border: 1px solid #777; box-shadow: 0 0 5px #000; }
        .t-col-info { flex: 1; display: flex; flex-direction: column; gap: 4px; overflow: hidden; }
        .t-name { font-size: 13px; font-weight: bold; color: #eec; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .t-stats-row { display: flex; gap: 5px; }
        .t-stat { display: flex; align-items: center; font-size: 11px; background: #080808; padding: 2px 5px; border-radius: 3px; border: 1px solid #333; }
        .t-stat label { margin-right: 4px; font-weight: bold; font-size: 9px; }
        .t-stat.hp label { color: #f44; } .t-stat.mp label { color: #00f2ff; }
        .t-stat input { width: 28px; background: transparent; border: none; color: #fff; text-align: center; padding: 0; font-size: 11px; font-weight: bold; }
        .t-stat span { color: #fff; font-weight: bold; }
        .t-stat small { color: #555; margin-left: 2px; font-size: 9px; }
        .t-col-actions { display: flex; gap: 6px; align-items: center; }
        .img-adj-grid { display: flex; flex-direction: column; align-items: center; gap: 1px; }
        .img-adj-grid button { width: 14px; height: 12px; font-size: 7px; padding: 0; line-height: 1; background: #222; border: 1px solid #555; color: #aaa; cursor: pointer; }
        .img-adj-grid button:hover { background: #ffcc00; color: #000; }
        .act-btns { display: flex; flex-direction: column; gap: 3px; }
        .btn-icon-sm { background: #222; border: 1px solid #555; color: #ccc; width: 22px; height: 22px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center; border-radius: 3px; }
        .btn-icon-sm:hover { border-color: #ffcc00; color: #fff; }
        .btn-icon-sm.delete:hover { background: #300; border-color: #f44; color: #f44; }
        .empty-tracker { text-align: center; padding: 30px; color: #666; font-style: italic; font-size: 12px; font-family: 'serif'; }

        /* MONSTER DETAIL DRAGGABLE WINDOW */
        .monster-detail-card { width: 500px; max-width: 95vw; background: #0d0d10 url('https://www.transparenttextures.com/patterns/dark-matter.png'); border: 2px solid #b8860b; box-shadow: 0 0 50px rgba(0,0,0,0.9), inset 0 0 100px rgba(0,0,0,0.8); border-radius: 8px; overflow: hidden; display: flex; flex-direction: column; }
        .draggable-card { box-shadow: 0 10px 40px rgba(0,0,0,0.9); }
        .md-header { background: linear-gradient(90deg, #15100a, #000); padding: 15px 20px; border-bottom: 1px solid #b8860b; cursor: grab; }
        .md-header:active { cursor: grabbing; }
        .md-title-row { display: flex; justify-content: space-between; align-items: center; }
        .md-title-row h2 { margin: 0; font-family: 'Cinzel', serif; color: #ffcc00; font-size: 20px; letter-spacing: 2px; }
        .md-stars { color: #ffd700; font-size: 14px; text-shadow: 0 0 5px #ffd700; }
        .md-boss-mark { color: #f44; font-weight: bold; margin-left: 5px; font-size: 16px; }
        .md-sub { font-size: 12px; color: #888; margin-top: 5px; font-style: italic; }
        .md-body { display: flex; padding: 20px; gap: 20px; min-height: 250px; }
        .md-img-col { width: 120px; flex-shrink: 0; }
        .md-portrait { width: 120px; height: 120px; border: 2px solid #444; border-radius: 4px; background-size: cover; background-position: center; box-shadow: 0 0 15px #000; }
        .md-info-col { flex: 1; overflow-y: auto; max-height: 400px; padding-right: 5px; }
        .md-block { margin-bottom: 15px; }
        .md-block label { display: block; color: #b8860b; font-size: 10px; font-weight: bold; border-bottom: 1px solid #333; margin-bottom: 5px; }
        .md-block p { margin: 0; font-size: 13px; color: #ccc; line-height: 1.4; white-space: pre-wrap; }
        .md-block.tips p { color: #00f2ff; font-style: italic; }
        .md-close-btn { width: 100%; padding: 15px; background: #111; color: #fff; border: none; border-top: 1px solid #b8860b; font-family: 'Cinzel', serif; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .md-close-btn:hover { background: #b8860b; color: #000; }

        /* DOCK COM Z-INDEX ALTO (2000) */
        .dm-tools-dock { position: absolute; right: 20px; bottom: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 2000; align-items: flex-end; }
        .tool-group { display: flex; align-items: center; gap: 10px; flex-direction: row-reverse; }
        .tool-label { background: rgba(0,0,0,0.8); padding: 4px 8px; border-radius: 4px; font-size: 10px; color: #ffcc00; opacity: 0; transition: 0.2s; pointer-events: none; transform: translateX(10px); }
        .tool-group:hover .tool-label { opacity: 1; transform: translateX(0); }
        .tool-btn-placeholder { width: 50px; height: 50px; border-radius: 50%; background: #111; border: 2px solid #555; color: #fff; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s; box-shadow: 0 0 10px #000; pointer-events: auto; }
        .tool-btn-placeholder:hover { border-color: #ffcc00; color: #ffcc00; transform: scale(1.1); }

        /* MODAIS GERAIS */
        .modal-overlay-custom { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .modal-box-custom { background: #080808; border: 2px solid #ffcc00; padding: 20px; border-radius: 8px; width: 500px; max-height: 90vh; overflow-y: auto; display: flex; flex-direction: column; }
        .modal-box-custom.wide { width: 800px; }
        .modal-header-c { display: flex; justify-content: space-between; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 20px; align-items: center; }
        .modal-header-c h3 { margin: 0; color: #ffcc00; }
        .close-c { background: none; border: none; color: #fff; font-size: 20px; cursor: pointer; }
        
        /* TABS DO BESTIRIO E OBJETOS */
        .bestiary-tabs { display: flex; gap: 15px; margin: 0 20px; }
        .bestiary-tabs button { background: transparent; border: none; color: #aaa; font-family: 'Cinzel', serif; font-size: 12px; cursor: pointer; padding-bottom: 5px; font-weight: bold; }
        .bestiary-tabs button.active { color: #ffcc00; border-bottom: 2px solid #ffcc00; }
        
        .monster-list-view { display: flex; flex-direction: column; gap: 15px; width: 100%; }
        .btn-create-monster { background: #222; border: 1px dashed #ffcc00; color: #ffcc00; padding: 15px; font-weight: bold; cursor: pointer; transition: 0.2s; text-align: center; width: 100%; }
        .btn-create-monster:hover { background: rgba(255, 204, 0, 0.1); }
        .bestiary-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 15px; width: 100%; }
        .monster-card-db { display: flex; background: rgba(255,255,255,0.05); border: 1px solid #333; padding: 10px; gap: 10px; align-items: center; }
        .m-thumb { width: 50px; height: 50px; background-size: cover; border-radius: 4px; border: 1px solid #555; flex-shrink: 0; }
        .m-info { flex: 1; display: flex; flex-direction: column; font-size: 12px; }
        .m-info strong { color: #fff; font-size: 14px; }
        .m-info small { color: #888; }
        .m-actions { display: flex; flex-direction: column; gap: 4px; }
        .btn-deploy { background: #00f2ff; color: #000; border: none; font-size: 10px; font-weight: bold; padding: 4px 8px; cursor: pointer; border-radius: 2px; }
        .btn-delete { background: #f44; color: #fff; border: none; font-size: 10px; font-weight: bold; padding: 4px 8px; cursor: pointer; border-radius: 2px; }
        
        .player-select-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 10px; }
        .char-select-card { background: rgba(255,255,255,0.05); border: 1px solid #333; padding: 10px; display: flex; align-items: center; gap: 10px; cursor: pointer; transition: 0.2s; border-radius: 4px; }
        .char-select-card:hover { border-color: #00f2ff; background: rgba(0, 242, 255, 0.1); }
        .c-avatar { width: 40px; height: 40px; border-radius: 50%; background-size: cover; border: 1px solid #fff; flex-shrink: 0; }

        /* REFINED EDIT MODAL */
        .modal-box-custom.refined-edit { width: 450px; padding: 30px; overflow: visible; background: #0d0d10; border: 2px solid #ffcc00; box-shadow: 0 0 50px rgba(255, 204, 0, 0.2); max-height: none; height: auto; }
        .modal-edit-title { text-align: center; color: #ffcc00; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0; letter-spacing: 1px; }
        .refined-stats-container { margin: 20px 0; display: flex; flex-direction: column; gap: 10px; }
        .refined-stat-row { display: flex; align-items: center; background: #1a1a1a; padding: 5px; border-radius: 4px; border: 1px solid #333; }
        .stat-label { width: 40px; font-weight: bold; font-size: 14px; text-align: center; }
        .stat-label.hp { color: #f44; } .stat-label.mp { color: #00f2ff; }
        .btn-adj { width: 30px; height: 30px; background: #333; color: #fff; border: 1px solid #555; cursor: pointer; font-weight: bold; transition: 0.2s; display: flex; align-items: center; justify-content: center; }
        .btn-adj:hover { background: #fff; color: #000; }
        .stat-value { flex: 1; text-align: center; font-size: 18px; font-weight: bold; letter-spacing: 1px; }
        .refined-image-control { text-align: center; margin: 20px 0; border-top: 1px solid #333; padding-top: 15px; }
        .refined-image-control label { color: #888; font-size: 10px; letter-spacing: 1px; margin-bottom: 10px; display: block; }
        .d-pad-grid { display: inline-grid; grid-template-columns: 30px 30px 30px; gap: 5px; justify-content: center; }
        .d-pad-grid button { width: 30px; height: 30px; background: #222; border: 1px solid #555; color: #ffcc00; cursor: pointer; font-size: 10px; display: flex; align-items: center; justify-content: center; }
        .d-pad-grid button:hover { background: #ffcc00; color: #000; }
        .btn-save-refined { width: 100%; padding: 15px; font-size: 14px; font-weight: bold; background: #ffcc00; color: #000; border: none; cursor: pointer; text-transform: uppercase; margin-top: 10px; transition: 0.2s; }
        .btn-save-refined:hover { background: #fff; box-shadow: 0 0 20px #ffcc00; }

        .monster-create-view .create-row { display: flex; gap: 15px; margin-bottom: 15px; }
        .img-upload-box { width: 120px; display: flex; flex-direction: column; gap: 5px; }
        .preview-img { width: 120px; height: 120px; background: #000; border: 1px solid #444; background-size: cover; }
        .details-inputs { flex: 1; display: flex; flex-direction: column; gap: 8px; }
        .input-title { width: 100%; background: #111; border: 1px solid #444; padding: 8px; color: #ffcc00; font-weight: bold; }
        .stats-row-c { display: flex; gap: 10px; }
        .stats-row-c div { flex: 1; }
        .stats-row-c input { width: 100%; background: #111; border: 1px solid #444; color: #fff; padding: 5px; text-align: center; }
        .actions-row-bottom { display: flex; gap: 10px; margin-top: 15px; }
        .btn-save-m { flex: 1; background: #ffcc00; color: #000; border: none; padding: 10px; font-weight: bold; cursor: pointer; }
        .btn-cancel-m { background: #333; color: #fff; border: none; padding: 10px; cursor: pointer; }
        
        .toggle-row { display: flex; align-items: center; gap: 10px; color: #aaa; font-size: 12px; margin-top: 5px; }
        .text-areas-row { display: flex; gap: 10px; }
        .text-areas-row textarea { background: #111; border: 1px solid #444; color: #ccc; padding: 10px; resize: none; margin-bottom: 5px; }

        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
      `})]})}const sO=({user:i,initializing:e,children:n})=>e?null:i&&i.email==="fffvtt10@gmail.com"?n:c.jsx(y1,{to:"/admin-login"});function rO(){const[i,e]=A.useState(!0),[n,s]=A.useState(null);return A.useEffect(()=>df(Vt,u=>{s(u),e(!1)}),[]),i?c.jsxs("div",{style:{height:"100vh",width:"100vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#000",overflow:"hidden"},children:[c.jsx("img",{src:Df,alt:"Loading...",style:{width:"100px",marginBottom:"20px",filter:"drop-shadow(0 0 10px #ffcc00)"}}),c.jsx("div",{style:{width:"200px",height:"4px",background:"#333",borderRadius:"2px",overflow:"hidden"},children:c.jsx("div",{className:"progress-bar"})}),c.jsx("p",{style:{marginTop:"10px"},children:"SINTONIZANDO TER..."}),c.jsx("style",{children:`
          .progress-bar { height: 100%; background: #ffcc00; width: 0%; box-shadow: 0 0 10px #ffcc00; animation: fillProgress 2s ease-in-out forwards; }
          p { color: #ffcc00; font-family: 'serif'; font-size: 10px; letter-spacing: 3px; animation: fadeText 1s infinite alternate; }
          @keyframes fillProgress { from { width: 0%; } to { width: 100%; } }
          @keyframes fadeText { from { opacity: 0.4; } to { opacity: 1; } }
        `})]}):c.jsxs(KS,{children:[c.jsx(di,{path:"/",element:c.jsx(v5,{})}),c.jsx(di,{path:"/login",element:c.jsx(E5,{})}),c.jsx(di,{path:"/mestre",element:c.jsx(k5,{})}),c.jsx(di,{path:"/mestre-vtt",element:c.jsx(iO,{})}),c.jsx(di,{path:"/create-character",element:c.jsx(z5,{})}),c.jsx(di,{path:"/jogador-vtt",element:c.jsx(K5,{})}),c.jsx(di,{path:"/admin-login",element:c.jsx(w5,{})}),c.jsx(di,{path:"/admin",element:c.jsx(sO,{user:n,initializing:i,children:c.jsx(A5,{})})}),c.jsx(di,{path:"*",element:c.jsx(y1,{to:"/"})})]})}WA.createRoot(document.getElementById("root")).render(c.jsx(FA.StrictMode,{children:c.jsx(xT,{children:c.jsx(rO,{})})}));
