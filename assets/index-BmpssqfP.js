(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function i_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Rp={exports:{}},sc={};var rx;function Uw(){if(rx)return sc;rx=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:f,ref:o!==void 0?o:null,props:u}}return sc.Fragment=e,sc.jsx=n,sc.jsxs=n,sc}var ox;function Bw(){return ox||(ox=1,Rp.exports=Uw()),Rp.exports}var c=Bw(),Cp={exports:{}},Ke={};var lx;function Hw(){if(lx)return Ke;lx=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function M(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,O={};function Q(V,ae,ge){this.props=V,this.context=ae,this.refs=O,this.updater=ge||B}Q.prototype.isReactComponent={},Q.prototype.setState=function(V,ae){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ae,"setState")},Q.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function G(){}G.prototype=Q.prototype;function W(V,ae,ge){this.props=V,this.context=ae,this.refs=O,this.updater=ge||B}var le=W.prototype=new G;le.constructor=W,L(le,Q.prototype),le.isPureReactComponent=!0;var he=Array.isArray;function pe(){}var I={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function k(V,ae,ge){var Ee=ge.ref;return{$$typeof:i,type:V,key:ae,ref:Ee!==void 0?Ee:null,props:ge}}function P(V,ae){return k(V.type,ae,V.props)}function j(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function R(V){var ae={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ge){return ae[ge]})}var S=/\/+/g;function Te(V,ae){return typeof V=="object"&&V!==null&&V.key!=null?R(""+V.key):ae.toString(36)}function ne(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(pe,pe):(V.status="pending",V.then(function(ae){V.status==="pending"&&(V.status="fulfilled",V.value=ae)},function(ae){V.status==="pending"&&(V.status="rejected",V.reason=ae)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function F(V,ae,ge,Ee,Se){var je=typeof V;(je==="undefined"||je==="boolean")&&(V=null);var De=!1;if(V===null)De=!0;else switch(je){case"bigint":case"string":case"number":De=!0;break;case"object":switch(V.$$typeof){case i:case e:De=!0;break;case v:return De=V._init,F(De(V._payload),ae,ge,Ee,Se)}}if(De)return Se=Se(V),De=Ee===""?"."+Te(V,0):Ee,he(Se)?(ge="",De!=null&&(ge=De.replace(S,"$&/")+"/"),F(Se,ae,ge,"",function(mt){return mt})):Se!=null&&(j(Se)&&(Se=P(Se,ge+(Se.key==null||V&&V.key===Se.key?"":(""+Se.key).replace(S,"$&/")+"/")+De)),ae.push(Se)),1;De=0;var gt=Ee===""?".":Ee+":";if(he(V))for(var Ne=0;Ne<V.length;Ne++)Ee=V[Ne],je=gt+Te(Ee,Ne),De+=F(Ee,ae,ge,je,Se);else if(Ne=M(V),typeof Ne=="function")for(V=Ne.call(V),Ne=0;!(Ee=V.next()).done;)Ee=Ee.value,je=gt+Te(Ee,Ne++),De+=F(Ee,ae,ge,je,Se);else if(je==="object"){if(typeof V.then=="function")return F(ne(V),ae,ge,Ee,Se);throw ae=String(V),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return De}function re(V,ae,ge){if(V==null)return V;var Ee=[],Se=0;return F(V,Ee,"","",function(je){return ae.call(ge,je,Se++)}),Ee}function ye(V){if(V._status===-1){var ae=V._result;ae=ae(),ae.then(function(ge){(V._status===0||V._status===-1)&&(V._status=1,V._result=ge)},function(ge){(V._status===0||V._status===-1)&&(V._status=2,V._result=ge)}),V._status===-1&&(V._status=0,V._result=ae)}if(V._status===1)return V._result.default;throw V._result}var Be=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Ue={map:re,forEach:function(V,ae,ge){re(V,function(){ae.apply(this,arguments)},ge)},count:function(V){var ae=0;return re(V,function(){ae++}),ae},toArray:function(V){return re(V,function(ae){return ae})||[]},only:function(V){if(!j(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ke.Activity=E,Ke.Children=Ue,Ke.Component=Q,Ke.Fragment=n,Ke.Profiler=o,Ke.PureComponent=W,Ke.StrictMode=s,Ke.Suspense=g,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(V){return I.H.useMemoCache(V)}},Ke.cache=function(V){return function(){return V.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(V,ae,ge){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var Ee=L({},V.props),Se=V.key;if(ae!=null)for(je in ae.key!==void 0&&(Se=""+ae.key),ae)!C.call(ae,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&ae.ref===void 0||(Ee[je]=ae[je]);var je=arguments.length-2;if(je===1)Ee.children=ge;else if(1<je){for(var De=Array(je),gt=0;gt<je;gt++)De[gt]=arguments[gt+2];Ee.children=De}return k(V.type,Se,Ee)},Ke.createContext=function(V){return V={$$typeof:f,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},Ke.createElement=function(V,ae,ge){var Ee,Se={},je=null;if(ae!=null)for(Ee in ae.key!==void 0&&(je=""+ae.key),ae)C.call(ae,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(Se[Ee]=ae[Ee]);var De=arguments.length-2;if(De===1)Se.children=ge;else if(1<De){for(var gt=Array(De),Ne=0;Ne<De;Ne++)gt[Ne]=arguments[Ne+2];Se.children=gt}if(V&&V.defaultProps)for(Ee in De=V.defaultProps,De)Se[Ee]===void 0&&(Se[Ee]=De[Ee]);return k(V,je,Se)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(V){return{$$typeof:m,render:V}},Ke.isValidElement=j,Ke.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:ye}},Ke.memo=function(V,ae){return{$$typeof:b,type:V,compare:ae===void 0?null:ae}},Ke.startTransition=function(V){var ae=I.T,ge={};I.T=ge;try{var Ee=V(),Se=I.S;Se!==null&&Se(ge,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(pe,Be)}catch(je){Be(je)}finally{ae!==null&&ge.types!==null&&(ae.types=ge.types),I.T=ae}},Ke.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ke.use=function(V){return I.H.use(V)},Ke.useActionState=function(V,ae,ge){return I.H.useActionState(V,ae,ge)},Ke.useCallback=function(V,ae){return I.H.useCallback(V,ae)},Ke.useContext=function(V){return I.H.useContext(V)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(V,ae){return I.H.useDeferredValue(V,ae)},Ke.useEffect=function(V,ae){return I.H.useEffect(V,ae)},Ke.useEffectEvent=function(V){return I.H.useEffectEvent(V)},Ke.useId=function(){return I.H.useId()},Ke.useImperativeHandle=function(V,ae,ge){return I.H.useImperativeHandle(V,ae,ge)},Ke.useInsertionEffect=function(V,ae){return I.H.useInsertionEffect(V,ae)},Ke.useLayoutEffect=function(V,ae){return I.H.useLayoutEffect(V,ae)},Ke.useMemo=function(V,ae){return I.H.useMemo(V,ae)},Ke.useOptimistic=function(V,ae){return I.H.useOptimistic(V,ae)},Ke.useReducer=function(V,ae,ge){return I.H.useReducer(V,ae,ge)},Ke.useRef=function(V){return I.H.useRef(V)},Ke.useState=function(V){return I.H.useState(V)},Ke.useSyncExternalStore=function(V,ae,ge){return I.H.useSyncExternalStore(V,ae,ge)},Ke.useTransition=function(){return I.H.useTransition()},Ke.version="19.2.4",Ke}var cx;function Nm(){return cx||(cx=1,Cp.exports=Hw()),Cp.exports}var w=Nm();const qw=i_(w);var Ip={exports:{}},rc={},jp={exports:{}},kp={};var ux;function Fw(){return ux||(ux=1,(function(i){function e(F,re){var ye=F.length;F.push(re);e:for(;0<ye;){var Be=ye-1>>>1,Ue=F[Be];if(0<o(Ue,re))F[Be]=re,F[ye]=Ue,ye=Be;else break e}}function n(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var re=F[0],ye=F.pop();if(ye!==re){F[0]=ye;e:for(var Be=0,Ue=F.length,V=Ue>>>1;Be<V;){var ae=2*(Be+1)-1,ge=F[ae],Ee=ae+1,Se=F[Ee];if(0>o(ge,ye))Ee<Ue&&0>o(Se,ge)?(F[Be]=Se,F[Ee]=ye,Be=Ee):(F[Be]=ge,F[ae]=ye,Be=ae);else if(Ee<Ue&&0>o(Se,ye))F[Be]=Se,F[Ee]=ye,Be=Ee;else break e}}return re}function o(F,re){var ye=F.sortIndex-re.sortIndex;return ye!==0?ye:F.id-re.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();i.unstable_now=function(){return f.now()-m}}var g=[],b=[],v=1,E=null,T=3,M=!1,B=!1,L=!1,O=!1,Q=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function le(F){for(var re=n(b);re!==null;){if(re.callback===null)s(b);else if(re.startTime<=F)s(b),re.sortIndex=re.expirationTime,e(g,re);else break;re=n(b)}}function he(F){if(L=!1,le(F),!B)if(n(g)!==null)B=!0,pe||(pe=!0,R());else{var re=n(b);re!==null&&ne(he,re.startTime-F)}}var pe=!1,I=-1,C=5,k=-1;function P(){return O?!0:!(i.unstable_now()-k<C)}function j(){if(O=!1,pe){var F=i.unstable_now();k=F;var re=!0;try{e:{B=!1,L&&(L=!1,G(I),I=-1),M=!0;var ye=T;try{t:{for(le(F),E=n(g);E!==null&&!(E.expirationTime>F&&P());){var Be=E.callback;if(typeof Be=="function"){E.callback=null,T=E.priorityLevel;var Ue=Be(E.expirationTime<=F);if(F=i.unstable_now(),typeof Ue=="function"){E.callback=Ue,le(F),re=!0;break t}E===n(g)&&s(g),le(F)}else s(g);E=n(g)}if(E!==null)re=!0;else{var V=n(b);V!==null&&ne(he,V.startTime-F),re=!1}}break e}finally{E=null,T=ye,M=!1}re=void 0}}finally{re?R():pe=!1}}}var R;if(typeof W=="function")R=function(){W(j)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,Te=S.port2;S.port1.onmessage=j,R=function(){Te.postMessage(null)}}else R=function(){Q(j,0)};function ne(F,re){I=Q(function(){F(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(F){F.callback=null},i.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<F?Math.floor(1e3/F):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(F){switch(T){case 1:case 2:case 3:var re=3;break;default:re=T}var ye=T;T=re;try{return F()}finally{T=ye}},i.unstable_requestPaint=function(){O=!0},i.unstable_runWithPriority=function(F,re){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ye=T;T=F;try{return re()}finally{T=ye}},i.unstable_scheduleCallback=function(F,re,ye){var Be=i.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Be+ye:Be):ye=Be,F){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=ye+Ue,F={id:v++,callback:re,priorityLevel:F,startTime:ye,expirationTime:Ue,sortIndex:-1},ye>Be?(F.sortIndex=ye,e(b,F),n(g)===null&&F===n(b)&&(L?(G(I),I=-1):L=!0,ne(he,ye-Be))):(F.sortIndex=Ue,e(g,F),B||M||(B=!0,pe||(pe=!0,R()))),F},i.unstable_shouldYield=P,i.unstable_wrapCallback=function(F){var re=T;return function(){var ye=T;T=re;try{return F.apply(this,arguments)}finally{T=ye}}}})(kp)),kp}var dx;function Gw(){return dx||(dx=1,jp.exports=Fw()),jp.exports}var Op={exports:{}},On={};var fx;function $w(){if(fx)return On;fx=1;var i=Nm();function e(g){var b="https://react.dev/errors/"+g;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)b+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,b,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:b,implementation:v}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,b){if(g==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return On.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,On.createPortal=function(g,b){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(e(299));return u(g,b,null,v)},On.flushSync=function(g){var b=f.T,v=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=b,s.p=v,s.d.f()}},On.preconnect=function(g,b){typeof g=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,s.d.C(g,b))},On.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},On.preinit=function(g,b){if(typeof g=="string"&&b&&typeof b.as=="string"){var v=b.as,E=m(v,b.crossOrigin),T=typeof b.integrity=="string"?b.integrity:void 0,M=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;v==="style"?s.d.S(g,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:M}):v==="script"&&s.d.X(g,{crossOrigin:E,integrity:T,fetchPriority:M,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},On.preinitModule=function(g,b){if(typeof g=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var v=m(b.as,b.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&s.d.M(g)},On.preload=function(g,b){if(typeof g=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var v=b.as,E=m(v,b.crossOrigin);s.d.L(g,v,{crossOrigin:E,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},On.preloadModule=function(g,b){if(typeof g=="string")if(b){var v=m(b.as,b.crossOrigin);s.d.m(g,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:v,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else s.d.m(g)},On.requestFormReset=function(g){s.d.r(g)},On.unstable_batchedUpdates=function(g,b){return g(b)},On.useFormState=function(g,b,v){return f.H.useFormState(g,b,v)},On.useFormStatus=function(){return f.H.useHostTransitionStatus()},On.version="19.2.4",On}var hx;function Yw(){if(hx)return Op.exports;hx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Op.exports=$w(),Op.exports}var px;function Kw(){if(px)return rc;px=1;var i=Gw(),e=Nm(),n=Yw();function s(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var a=t,r=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(r=a.return),t=a.return;while(t)}return a.tag===3?r:null}function f(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function m(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(s(188))}function b(t){var a=t.alternate;if(!a){if(a=u(t),a===null)throw Error(s(188));return a!==t?null:t}for(var r=t,l=a;;){var h=r.return;if(h===null)break;var p=h.alternate;if(p===null){if(l=h.return,l!==null){r=l;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===r)return g(h),t;if(p===l)return g(h),a;p=p.sibling}throw Error(s(188))}if(r.return!==l.return)r=h,l=p;else{for(var x=!1,A=h.child;A;){if(A===r){x=!0,r=h,l=p;break}if(A===l){x=!0,l=h,r=p;break}A=A.sibling}if(!x){for(A=p.child;A;){if(A===r){x=!0,r=p,l=h;break}if(A===l){x=!0,l=p,r=h;break}A=A.sibling}if(!x)throw Error(s(189))}}if(r.alternate!==l)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?t:a}function v(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=v(t),a!==null)return a;t=t.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),W=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function R(t){return t===null||typeof t!="object"?null:(t=j&&t[j]||t["@@iterator"],typeof t=="function"?t:null)}var S=Symbol.for("react.client.reference");function Te(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===S?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case L:return"Fragment";case Q:return"Profiler";case O:return"StrictMode";case he:return"Suspense";case pe:return"SuspenseList";case k:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case B:return"Portal";case W:return t.displayName||"Context";case G:return(t._context.displayName||"Context")+".Consumer";case le:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return a=t.displayName||null,a!==null?a:Te(t.type)||"Memo";case C:a=t._payload,t=t._init;try{return Te(t(a))}catch{}}return null}var ne=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Be=[],Ue=-1;function V(t){return{current:t}}function ae(t){0>Ue||(t.current=Be[Ue],Be[Ue]=null,Ue--)}function ge(t,a){Ue++,Be[Ue]=t.current,t.current=a}var Ee=V(null),Se=V(null),je=V(null),De=V(null);function gt(t,a){switch(ge(je,a),ge(Se,t),ge(Ee,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Cy(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Cy(a),t=Iy(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ae(Ee),ge(Ee,t)}function Ne(){ae(Ee),ae(Se),ae(je)}function mt(t){t.memoizedState!==null&&ge(De,t);var a=Ee.current,r=Iy(a,t.type);a!==r&&(ge(Se,t),ge(Ee,r))}function ct(t){Se.current===t&&(ae(Ee),ae(Se)),De.current===t&&(ae(De),tc._currentValue=ye)}var Xt,an;function Ft(t){if(Xt===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);Xt=a&&a[1]||"",an=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xt+t+an}var me=!1;function Ce(t,a){if(!t||me)return"";me=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ee){var X=ee}Reflect.construct(t,[],ce)}else{try{ce.call()}catch(ee){X=ee}t.call(ce.prototype)}}else{try{throw Error()}catch(ee){X=ee}(ce=t())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ee){if(ee&&X&&typeof ee.stack=="string")return[ee.stack,X.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),x=p[0],A=p[1];if(x&&A){var D=x.split(`
`),K=A.split(`
`);for(h=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;h<K.length&&!K[h].includes("DetermineComponentFrameRoot");)h++;if(l===D.length||h===K.length)for(l=D.length-1,h=K.length-1;1<=l&&0<=h&&D[l]!==K[h];)h--;for(;1<=l&&0<=h;l--,h--)if(D[l]!==K[h]){if(l!==1||h!==1)do if(l--,h--,0>h||D[l]!==K[h]){var ie=`
`+D[l].replace(" at new "," at ");return t.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",t.displayName)),ie}while(1<=l&&0<=h);break}}}finally{me=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Ft(r):""}function U(t,a){switch(t.tag){case 26:case 27:case 5:return Ft(t.type);case 16:return Ft("Lazy");case 13:return t.child!==a&&a!==null?Ft("Suspense Fallback"):Ft("Suspense");case 19:return Ft("SuspenseList");case 0:case 15:return Ce(t.type,!1);case 11:return Ce(t.type.render,!1);case 1:return Ce(t.type,!0);case 31:return Ft("Activity");default:return""}}function fe(t){try{var a="",r=null;do a+=U(t,r),r=t,t=t.return;while(t);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var de=Object.prototype.hasOwnProperty,be=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Me=i.unstable_shouldYield,It=i.unstable_requestPaint,et=i.unstable_now,Jt=i.unstable_getCurrentPriorityLevel,te=i.unstable_ImmediatePriority,qe=i.unstable_UserBlockingPriority,$e=i.unstable_NormalPriority,H=i.unstable_LowPriority,xe=i.unstable_IdlePriority,dt=i.log,Gt=i.unstable_setDisableYieldValue,ft=null,J=null;function Ye(t){if(typeof dt=="function"&&Gt(t),J&&typeof J.setStrictMode=="function")try{J.setStrictMode(ft,t)}catch{}}var We=Math.clz32?Math.clz32:rn,sn=Math.log,$t=Math.LN2;function rn(t){return t>>>=0,t===0?32:31-(sn(t)/$t|0)|0}var bt=256,ht=262144,He=4194304;function Ht(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Jn(t,a,r){var l=t.pendingLanes;if(l===0)return 0;var h=0,p=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~p,l!==0?h=Ht(l):(x&=A,x!==0?h=Ht(x):r||(r=A&~t,r!==0&&(h=Ht(r))))):(A=l&~p,A!==0?h=Ht(A):x!==0?h=Ht(x):r||(r=l&~t,r!==0&&(h=Ht(r)))),h===0?0:a!==0&&a!==h&&(a&p)===0&&(p=h&-h,r=a&-a,p>=r||p===32&&(r&4194048)!==0)?a:h}function Ta(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function kf(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qc(){var t=He;return He<<=1,(He&62914560)===0&&(He=4194304),t}function Ha(t){for(var a=[],r=0;31>r;r++)a.push(t);return a}function Ws(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Of(t,a,r,l,h,p){var x=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var A=t.entanglements,D=t.expirationTimes,K=t.hiddenUpdates;for(r=x&~r;0<r;){var ie=31-We(r),ce=1<<ie;A[ie]=0,D[ie]=-1;var X=K[ie];if(X!==null)for(K[ie]=null,ie=0;ie<X.length;ie++){var ee=X[ie];ee!==null&&(ee.lane&=-536870913)}r&=~ce}l!==0&&Zs(t,l,0),p!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=p&~(x&~a))}function Zs(t,a,r){t.pendingLanes|=a,t.suspendedLanes&=~a;var l=31-We(a);t.entangledLanes|=a,t.entanglements[l]=t.entanglements[l]|1073741824|r&261930}function rl(t,a){var r=t.entangledLanes|=a;for(t=t.entanglements;r;){var l=31-We(r),h=1<<l;h&a|t[l]&a&&(t[l]|=a),r&=~h}}function ol(t,a){var r=a&-a;return r=(r&42)!==0?1:er(r),(r&(t.suspendedLanes|a))!==0?0:r}function er(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function xi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Fc(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:Zy(t.type))}function Na(t,a){var r=re.p;try{return re.p=t,a()}finally{re.p=r}}var Ra=Math.random().toString(36).slice(2),on="__reactFiber$"+Ra,xn="__reactProps$"+Ra,qa="__reactContainer$"+Ra,qr="__reactEvents$"+Ra,Df="__reactListeners$"+Ra,Gc="__reactHandles$"+Ra,$c="__reactResources$"+Ra,Fa="__reactMarker$"+Ra;function Fr(t){delete t[on],delete t[xn],delete t[qr],delete t[Df],delete t[Gc]}function Ga(t){var a=t[on];if(a)return a;for(var r=t.parentNode;r;){if(a=r[qa]||r[on]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(t=Vy(t);t!==null;){if(r=t[on])return r;t=Vy(t)}return a}t=r,r=t.parentNode}return null}function da(t){if(t=t[on]||t[qa]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function Wn(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(s(33))}function $a(t){var a=t[$c];return a||(a=t[$c]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ln(t){t[Fa]=!0}var ll=new Set,cl={};function Ya(t,a){Ka(t,a),Ka(t+"Capture",a)}function Ka(t,a){for(cl[t]=a,t=0;t<a.length;t++)ll.add(a[t])}var ul=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dl={},fl={};function Yc(t){return de.call(fl,t)?!0:de.call(dl,t)?!1:ul.test(t)?fl[t]=!0:(dl[t]=!0,!1)}function Gr(t,a,r){if(Yc(a))if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+r)}}function Zn(t,a,r){if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+r)}}function cn(t,a,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(a,r,""+l)}}function vn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zi(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function hl(t,a,r){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,p=l.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return h.call(this)},set:function(x){r=""+x,p.call(this,x)}}),Object.defineProperty(t,a,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(x){r=""+x},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function At(t){if(!t._valueTracker){var a=Zi(t)?"checked":"value";t._valueTracker=hl(t,a,""+t[a])}}function tr(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var r=a.getValue(),l="";return t&&(l=Zi(t)?t.checked?"true":"false":t.value),t=l,t!==r?(a.setValue(t),!0):!1}function Qa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var nr=/[\n"\\]/g;function Un(t){return t.replace(nr,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function $r(t,a,r,l,h,p,x,A){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),a!=null?x==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+vn(a)):t.value!==""+vn(a)&&(t.value=""+vn(a)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),a!=null?pl(t,x,vn(a)):r!=null?pl(t,x,vn(r)):l!=null&&t.removeAttribute("value"),h==null&&p!=null&&(t.defaultChecked=!!p),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+vn(A):t.removeAttribute("name")}function Kc(t,a,r,l,h,p,x,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),a!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){At(t);return}r=r!=null?""+vn(r):"",a=a!=null?""+vn(a):r,A||a===t.value||(t.value=a),t.defaultValue=a}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),At(t)}function pl(t,a,r){a==="number"&&Qa(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function es(t,a,r,l){if(t=t.options,a){a={};for(var h=0;h<r.length;h++)a["$"+r[h]]=!0;for(r=0;r<t.length;r++)h=a.hasOwnProperty("$"+t[r].value),t[r].selected!==h&&(t[r].selected=h),h&&l&&(t[r].defaultSelected=!0)}else{for(r=""+vn(r),a=null,h=0;h<t.length;h++){if(t[h].value===r){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}a!==null||t[h].disabled||(a=t[h])}a!==null&&(a.selected=!0)}}function Qc(t,a,r){if(a!=null&&(a=""+vn(a),a!==t.value&&(t.value=a),r==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=r!=null?""+vn(r):""}function ts(t,a,r,l){if(a==null){if(l!=null){if(r!=null)throw Error(s(92));if(ne(l)){if(1<l.length)throw Error(s(93));l=l[0]}r=l}r==null&&(r=""),a=r}r=vn(a),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l),At(t)}function Bn(t,a){if(a){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=a;return}}t.textContent=a}var Xc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ml(t,a,r){var l=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":l?t.setProperty(a,r):typeof r!="number"||r===0||Xc.has(a)?a==="float"?t.cssFloat=r:t[a]=(""+r).trim():t[a]=r+"px"}function gl(t,a,r){if(a!=null&&typeof a!="object")throw Error(s(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in a)l=a[h],a.hasOwnProperty(h)&&r[h]!==l&&ml(t,h,l)}else for(var p in a)a.hasOwnProperty(p)&&ml(t,p,a[p])}function Yr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kr(t){return ns.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ca(){}var bl=null;function fa(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var as=null,Xa=null;function ar(t){var a=da(t);if(a&&(t=a.stateNode)){var r=t[xn]||null;e:switch(t=a.stateNode,a.type){case"input":if($r(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Un(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var l=r[a];if(l!==t&&l.form===t.form){var h=l[xn]||null;if(!h)throw Error(s(90));$r(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(a=0;a<r.length;a++)l=r[a],l.form===t.form&&tr(l)}break e;case"textarea":Qc(t,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&es(t,!!r.multiple,a,!1)}}}var Qr=!1;function is(t,a,r){if(Qr)return t(a,r);Qr=!0;try{var l=t(a);return l}finally{if(Qr=!1,(as!==null||Xa!==null)&&(Fu(),as&&(a=as,t=Xa,Xa=as=null,ar(a),t)))for(a=0;a<t.length;a++)ar(t[a])}}function Ia(t,a){var r=t.stateNode;if(r===null)return null;var l=r[xn]||null;if(l===null)return null;r=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(s(231,a,typeof r));return r}var ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ir=!1;if(ha)try{var Tt={};Object.defineProperty(Tt,"passive",{get:function(){ir=!0}}),window.addEventListener("test",Tt,Tt),window.removeEventListener("test",Tt,Tt)}catch{ir=!1}var Ja=null,yl=null,sr=null;function xl(){if(sr)return sr;var t,a=yl,r=a.length,l,h="value"in Ja?Ja.value:Ja.textContent,p=h.length;for(t=0;t<r&&a[t]===h[t];t++);var x=r-t;for(l=1;l<=x&&a[r-l]===h[p-l];l++);return sr=h.slice(t,1<l?1-l:void 0)}function rr(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function vi(){return!0}function ja(){return!1}function An(t){function a(r,l,h,p,x){this._reactName=r,this._targetInst=h,this.type=l,this.nativeEvent=p,this.target=x,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(r=t[A],this[A]=r?r(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?vi:ja,this.isPropagationStopped=ja,this}return E(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=vi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=vi)},persist:function(){},isPersistent:vi}),a}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wa=An(_i),ss=E({},_i,{view:0,detail:0}),vl=An(ss),rs,Xr,Za,Jr=E({},ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:os,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Za&&(Za&&t.type==="mousemove"?(rs=t.screenX-Za.screenX,Xr=t.screenY-Za.screenY):Xr=rs=0,Za=t),rs)},movementY:function(t){return"movementY"in t?t.movementY:Xr}}),_l=An(Jr),or=E({},Jr,{dataTransfer:0}),Wc=An(or),Zc=E({},ss,{relatedTarget:0}),lr=An(Zc),El=E({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),eu=An(El),Wr=E({},_i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tu=An(Wr),nu=E({},_i,{data:0}),ei=An(nu),au={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ru(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=su[t])?!!a[t]:!1}function os(){return ru}var zn=E({},ss,{key:function(t){if(t.key){var a=au[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=rr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:os,charCode:function(t){return t.type==="keypress"?rr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ou=An(zn),lu=E({},Jr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ei=An(lu),d=E({},ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:os}),y=An(d),_=E({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=An(_),$=E({},Jr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=An($),ve=E({},_i,{newState:0,oldState:0}),Xe=An(ve),Wt=[9,13,27,32],vt=ha&&"CompositionEvent"in window,zt=null;ha&&"documentMode"in document&&(zt=document.documentMode);var pa=ha&&"TextEvent"in window&&!zt,ti=ha&&(!vt||zt&&8<zt&&11>=zt),ka=" ",Oa=!1;function cr(t,a){switch(t){case"keyup":return Wt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var eo=!1;function uA(t,a){switch(t){case"compositionend":return Zr(a);case"keypress":return a.which!==32?null:(Oa=!0,ka);case"textInput":return t=a.data,t===ka&&Oa?null:t;default:return null}}function dA(t,a){if(eo)return t==="compositionend"||!vt&&cr(t,a)?(t=xl(),sr=yl=Ja=null,eo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ti&&a.locale!=="ko"?null:a.data;default:return null}}var fA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ug(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!fA[t.type]:a==="textarea"}function Bg(t,a,r,l){as?Xa?Xa.push(l):Xa=[l]:as=l,a=Ju(a,"onChange"),0<a.length&&(r=new Wa("onChange","change",null,r,l),t.push({event:r,listeners:a}))}var Al=null,wl=null;function hA(t){Ay(t,0)}function cu(t){var a=Wn(t);if(tr(a))return t}function Hg(t,a){if(t==="change")return a}var qg=!1;if(ha){var Mf;if(ha){var Pf="oninput"in document;if(!Pf){var Fg=document.createElement("div");Fg.setAttribute("oninput","return;"),Pf=typeof Fg.oninput=="function"}Mf=Pf}else Mf=!1;qg=Mf&&(!document.documentMode||9<document.documentMode)}function Gg(){Al&&(Al.detachEvent("onpropertychange",$g),wl=Al=null)}function $g(t){if(t.propertyName==="value"&&cu(wl)){var a=[];Bg(a,wl,t,fa(t)),is(hA,a)}}function pA(t,a,r){t==="focusin"?(Gg(),Al=a,wl=r,Al.attachEvent("onpropertychange",$g)):t==="focusout"&&Gg()}function mA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cu(wl)}function gA(t,a){if(t==="click")return cu(a)}function bA(t,a){if(t==="input"||t==="change")return cu(a)}function yA(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var ea=typeof Object.is=="function"?Object.is:yA;function Sl(t,a){if(ea(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var r=Object.keys(t),l=Object.keys(a);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var h=r[l];if(!de.call(a,h)||!ea(t[h],a[h]))return!1}return!0}function Yg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kg(t,a){var r=Yg(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=a&&l>=a)return{node:r,offset:a-t};t=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yg(r)}}function Qg(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Qg(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Xg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=Qa(t.document);a instanceof t.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)t=a.contentWindow;else break;a=Qa(t.document)}return a}function Vf(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var xA=ha&&"documentMode"in document&&11>=document.documentMode,to=null,zf=null,Tl=null,Lf=!1;function Jg(t,a,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Lf||to==null||to!==Qa(l)||(l=to,"selectionStart"in l&&Vf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Tl&&Sl(Tl,l)||(Tl=l,l=Ju(zf,"onSelect"),0<l.length&&(a=new Wa("onSelect","select",null,a,r),t.push({event:a,listeners:l}),a.target=to)))}function ur(t,a){var r={};return r[t.toLowerCase()]=a.toLowerCase(),r["Webkit"+t]="webkit"+a,r["Moz"+t]="moz"+a,r}var no={animationend:ur("Animation","AnimationEnd"),animationiteration:ur("Animation","AnimationIteration"),animationstart:ur("Animation","AnimationStart"),transitionrun:ur("Transition","TransitionRun"),transitionstart:ur("Transition","TransitionStart"),transitioncancel:ur("Transition","TransitionCancel"),transitionend:ur("Transition","TransitionEnd")},Uf={},Wg={};ha&&(Wg=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function dr(t){if(Uf[t])return Uf[t];if(!no[t])return t;var a=no[t],r;for(r in a)if(a.hasOwnProperty(r)&&r in Wg)return Uf[t]=a[r];return t}var Zg=dr("animationend"),e0=dr("animationiteration"),t0=dr("animationstart"),vA=dr("transitionrun"),_A=dr("transitionstart"),EA=dr("transitioncancel"),n0=dr("transitionend"),a0=new Map,Bf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bf.push("scrollEnd");function Da(t,a){a0.set(t,a),Ya(a,[t])}var uu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ma=[],ao=0,Hf=0;function du(){for(var t=ao,a=Hf=ao=0;a<t;){var r=ma[a];ma[a++]=null;var l=ma[a];ma[a++]=null;var h=ma[a];ma[a++]=null;var p=ma[a];if(ma[a++]=null,l!==null&&h!==null){var x=l.pending;x===null?h.next=h:(h.next=x.next,x.next=h),l.pending=h}p!==0&&i0(r,h,p)}}function fu(t,a,r,l){ma[ao++]=t,ma[ao++]=a,ma[ao++]=r,ma[ao++]=l,Hf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function qf(t,a,r,l){return fu(t,a,r,l),hu(t)}function fr(t,a){return fu(t,null,null,a),hu(t)}function i0(t,a,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var h=!1,p=t.return;p!==null;)p.childLanes|=r,l=p.alternate,l!==null&&(l.childLanes|=r),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(h=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,h&&a!==null&&(h=31-We(r),t=p.hiddenUpdates,l=t[h],l===null?t[h]=[a]:l.push(a),a.lane=r|536870912),p):null}function hu(t){if(50<Kl)throw Kl=0,Wh=null,Error(s(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var io={};function AA(t,a,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ta(t,a,r,l){return new AA(t,a,r,l)}function Ff(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ai(t,a){var r=t.alternate;return r===null?(r=ta(t.tag,a,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=a,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,a=t.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function s0(t,a){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,a=r.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function pu(t,a,r,l,h,p){var x=0;if(l=t,typeof t=="function")Ff(t)&&(x=1);else if(typeof t=="string")x=Rw(t,r,Ee.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case k:return t=ta(31,r,a,h),t.elementType=k,t.lanes=p,t;case L:return hr(r.children,h,p,a);case O:x=8,h|=24;break;case Q:return t=ta(12,r,a,h|2),t.elementType=Q,t.lanes=p,t;case he:return t=ta(13,r,a,h),t.elementType=he,t.lanes=p,t;case pe:return t=ta(19,r,a,h),t.elementType=pe,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case W:x=10;break e;case G:x=9;break e;case le:x=11;break e;case I:x=14;break e;case C:x=16,l=null;break e}x=29,r=Error(s(130,t===null?"null":typeof t,"")),l=null}return a=ta(x,r,a,h),a.elementType=t,a.type=l,a.lanes=p,a}function hr(t,a,r,l){return t=ta(7,t,l,a),t.lanes=r,t}function Gf(t,a,r){return t=ta(6,t,null,a),t.lanes=r,t}function r0(t){var a=ta(18,null,null,0);return a.stateNode=t,a}function $f(t,a,r){return a=ta(4,t.children!==null?t.children:[],t.key,a),a.lanes=r,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var o0=new WeakMap;function ga(t,a){if(typeof t=="object"&&t!==null){var r=o0.get(t);return r!==void 0?r:(a={value:t,source:a,stack:fe(a)},o0.set(t,a),a)}return{value:t,source:a,stack:fe(a)}}var so=[],ro=0,mu=null,Nl=0,ba=[],ya=0,ls=null,ni=1,ai="";function wi(t,a){so[ro++]=Nl,so[ro++]=mu,mu=t,Nl=a}function l0(t,a,r){ba[ya++]=ni,ba[ya++]=ai,ba[ya++]=ls,ls=t;var l=ni;t=ai;var h=32-We(l)-1;l&=~(1<<h),r+=1;var p=32-We(a)+h;if(30<p){var x=h-h%5;p=(l&(1<<x)-1).toString(32),l>>=x,h-=x,ni=1<<32-We(a)+h|r<<h|l,ai=p+t}else ni=1<<p|r<<h|l,ai=t}function Yf(t){t.return!==null&&(wi(t,1),l0(t,1,0))}function Kf(t){for(;t===mu;)mu=so[--ro],so[ro]=null,Nl=so[--ro],so[ro]=null;for(;t===ls;)ls=ba[--ya],ba[ya]=null,ai=ba[--ya],ba[ya]=null,ni=ba[--ya],ba[ya]=null}function c0(t,a){ba[ya++]=ni,ba[ya++]=ai,ba[ya++]=ls,ni=a.id,ai=a.overflow,ls=t}var wn=null,Mt=null,ut=!1,cs=null,xa=!1,Qf=Error(s(519));function us(t){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Rl(ga(a,t)),Qf}function u0(t){var a=t.stateNode,r=t.type,l=t.memoizedProps;switch(a[on]=t,a[xn]=l,r){case"dialog":at("cancel",a),at("close",a);break;case"iframe":case"object":case"embed":at("load",a);break;case"video":case"audio":for(r=0;r<Xl.length;r++)at(Xl[r],a);break;case"source":at("error",a);break;case"img":case"image":case"link":at("error",a),at("load",a);break;case"details":at("toggle",a);break;case"input":at("invalid",a),Kc(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":at("invalid",a);break;case"textarea":at("invalid",a),ts(a,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||l.suppressHydrationWarning===!0||Ny(a.textContent,r)?(l.popover!=null&&(at("beforetoggle",a),at("toggle",a)),l.onScroll!=null&&at("scroll",a),l.onScrollEnd!=null&&at("scrollend",a),l.onClick!=null&&(a.onclick=Ca),a=!0):a=!1,a||us(t,!0)}function d0(t){for(wn=t.return;wn;)switch(wn.tag){case 5:case 31:case 13:xa=!1;return;case 27:case 3:xa=!0;return;default:wn=wn.return}}function oo(t){if(t!==wn)return!1;if(!ut)return d0(t),ut=!0,!1;var a=t.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||hp(t.type,t.memoizedProps)),r=!r),r&&Mt&&us(t),d0(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Mt=Py(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));Mt=Py(t)}else a===27?(a=Mt,ws(t.type)?(t=yp,yp=null,Mt=t):Mt=a):Mt=wn?_a(t.stateNode.nextSibling):null;return!0}function pr(){Mt=wn=null,ut=!1}function Xf(){var t=cs;return t!==null&&(Gn===null?Gn=t:Gn.push.apply(Gn,t),cs=null),t}function Rl(t){cs===null?cs=[t]:cs.push(t)}var Jf=V(null),mr=null,Si=null;function ds(t,a,r){ge(Jf,a._currentValue),a._currentValue=r}function Ti(t){t._currentValue=Jf.current,ae(Jf)}function Wf(t,a,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===r)break;t=t.return}}function Zf(t,a,r,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var p=h.dependencies;if(p!==null){var x=h.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=h;for(var D=0;D<a.length;D++)if(A.context===a[D]){p.lanes|=r,A=p.alternate,A!==null&&(A.lanes|=r),Wf(p.return,r,t),l||(x=null);break e}p=A.next}}else if(h.tag===18){if(x=h.return,x===null)throw Error(s(341));x.lanes|=r,p=x.alternate,p!==null&&(p.lanes|=r),Wf(x,r,t),x=null}else x=h.child;if(x!==null)x.return=h;else for(x=h;x!==null;){if(x===t){x=null;break}if(h=x.sibling,h!==null){h.return=x.return,x=h;break}x=x.return}h=x}}function lo(t,a,r,l){t=null;for(var h=a,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var x=h.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var A=h.type;ea(h.pendingProps.value,x.value)||(t!==null?t.push(A):t=[A])}}else if(h===De.current){if(x=h.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(tc):t=[tc])}h=h.return}t!==null&&Zf(a,t,r,l),a.flags|=262144}function gu(t){for(t=t.firstContext;t!==null;){if(!ea(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function gr(t){mr=t,Si=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Sn(t){return f0(mr,t)}function bu(t,a){return mr===null&&gr(t),f0(t,a)}function f0(t,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},Si===null){if(t===null)throw Error(s(308));Si=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Si=Si.next=a;return r}var wA=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){a.aborted=!0,t.forEach(function(r){return r()})}},SA=i.unstable_scheduleCallback,TA=i.unstable_NormalPriority,un={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function eh(){return{controller:new wA,data:new Map,refCount:0}}function Cl(t){t.refCount--,t.refCount===0&&SA(TA,function(){t.controller.abort()})}var Il=null,th=0,co=0,uo=null;function NA(t,a){if(Il===null){var r=Il=[];th=0,co=ip(),uo={status:"pending",value:void 0,then:function(l){r.push(l)}}}return th++,a.then(h0,h0),a}function h0(){if(--th===0&&Il!==null){uo!==null&&(uo.status="fulfilled");var t=Il;Il=null,co=0,uo=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function RA(t,a){var r=[],l={status:"pending",value:null,reason:null,then:function(h){r.push(h)}};return t.then(function(){l.status="fulfilled",l.value=a;for(var h=0;h<r.length;h++)(0,r[h])(a)},function(h){for(l.status="rejected",l.reason=h,h=0;h<r.length;h++)(0,r[h])(void 0)}),l}var p0=F.S;F.S=function(t,a){Jb=et(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&NA(t,a),p0!==null&&p0(t,a)};var br=V(null);function nh(){var t=br.current;return t!==null?t:jt.pooledCache}function yu(t,a){a===null?ge(br,br.current):ge(br,a.pool)}function m0(){var t=nh();return t===null?null:{parent:un._currentValue,pool:t}}var fo=Error(s(460)),ah=Error(s(474)),xu=Error(s(542)),vu={then:function(){}};function g0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function b0(t,a,r){switch(r=t[r],r===void 0?t.push(a):r!==a&&(a.then(Ca,Ca),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,x0(t),t;default:if(typeof a.status=="string")a.then(Ca,Ca);else{if(t=jt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=a,t.status="pending",t.then(function(l){if(a.status==="pending"){var h=a;h.status="fulfilled",h.value=l}},function(l){if(a.status==="pending"){var h=a;h.status="rejected",h.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,x0(t),t}throw xr=a,fo}}function yr(t){try{var a=t._init;return a(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(xr=r,fo):r}}var xr=null;function y0(){if(xr===null)throw Error(s(459));var t=xr;return xr=null,t}function x0(t){if(t===fo||t===xu)throw Error(s(483))}var ho=null,jl=0;function _u(t){var a=jl;return jl+=1,ho===null&&(ho=[]),b0(ho,t,a)}function kl(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Eu(t,a){throw a.$$typeof===T?Error(s(525)):(t=Object.prototype.toString.call(a),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function v0(t){function a(q,z){if(t){var Y=q.deletions;Y===null?(q.deletions=[z],q.flags|=16):Y.push(z)}}function r(q,z){if(!t)return null;for(;z!==null;)a(q,z),z=z.sibling;return null}function l(q){for(var z=new Map;q!==null;)q.key!==null?z.set(q.key,q):z.set(q.index,q),q=q.sibling;return z}function h(q,z){return q=Ai(q,z),q.index=0,q.sibling=null,q}function p(q,z,Y){return q.index=Y,t?(Y=q.alternate,Y!==null?(Y=Y.index,Y<z?(q.flags|=67108866,z):Y):(q.flags|=67108866,z)):(q.flags|=1048576,z)}function x(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function A(q,z,Y,se){return z===null||z.tag!==6?(z=Gf(Y,q.mode,se),z.return=q,z):(z=h(z,Y),z.return=q,z)}function D(q,z,Y,se){var ke=Y.type;return ke===L?ie(q,z,Y.props.children,se,Y.key):z!==null&&(z.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===C&&yr(ke)===z.type)?(z=h(z,Y.props),kl(z,Y),z.return=q,z):(z=pu(Y.type,Y.key,Y.props,null,q.mode,se),kl(z,Y),z.return=q,z)}function K(q,z,Y,se){return z===null||z.tag!==4||z.stateNode.containerInfo!==Y.containerInfo||z.stateNode.implementation!==Y.implementation?(z=$f(Y,q.mode,se),z.return=q,z):(z=h(z,Y.children||[]),z.return=q,z)}function ie(q,z,Y,se,ke){return z===null||z.tag!==7?(z=hr(Y,q.mode,se,ke),z.return=q,z):(z=h(z,Y),z.return=q,z)}function ce(q,z,Y){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Gf(""+z,q.mode,Y),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case M:return Y=pu(z.type,z.key,z.props,null,q.mode,Y),kl(Y,z),Y.return=q,Y;case B:return z=$f(z,q.mode,Y),z.return=q,z;case C:return z=yr(z),ce(q,z,Y)}if(ne(z)||R(z))return z=hr(z,q.mode,Y,null),z.return=q,z;if(typeof z.then=="function")return ce(q,_u(z),Y);if(z.$$typeof===W)return ce(q,bu(q,z),Y);Eu(q,z)}return null}function X(q,z,Y,se){var ke=z!==null?z.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return ke!==null?null:A(q,z,""+Y,se);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case M:return Y.key===ke?D(q,z,Y,se):null;case B:return Y.key===ke?K(q,z,Y,se):null;case C:return Y=yr(Y),X(q,z,Y,se)}if(ne(Y)||R(Y))return ke!==null?null:ie(q,z,Y,se,null);if(typeof Y.then=="function")return X(q,z,_u(Y),se);if(Y.$$typeof===W)return X(q,z,bu(q,Y),se);Eu(q,Y)}return null}function ee(q,z,Y,se,ke){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return q=q.get(Y)||null,A(z,q,""+se,ke);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case M:return q=q.get(se.key===null?Y:se.key)||null,D(z,q,se,ke);case B:return q=q.get(se.key===null?Y:se.key)||null,K(z,q,se,ke);case C:return se=yr(se),ee(q,z,Y,se,ke)}if(ne(se)||R(se))return q=q.get(Y)||null,ie(z,q,se,ke,null);if(typeof se.then=="function")return ee(q,z,Y,_u(se),ke);if(se.$$typeof===W)return ee(q,z,Y,bu(z,se),ke);Eu(z,se)}return null}function Re(q,z,Y,se){for(var ke=null,yt=null,Ie=z,Ze=z=0,st=null;Ie!==null&&Ze<Y.length;Ze++){Ie.index>Ze?(st=Ie,Ie=null):st=Ie.sibling;var xt=X(q,Ie,Y[Ze],se);if(xt===null){Ie===null&&(Ie=st);break}t&&Ie&&xt.alternate===null&&a(q,Ie),z=p(xt,z,Ze),yt===null?ke=xt:yt.sibling=xt,yt=xt,Ie=st}if(Ze===Y.length)return r(q,Ie),ut&&wi(q,Ze),ke;if(Ie===null){for(;Ze<Y.length;Ze++)Ie=ce(q,Y[Ze],se),Ie!==null&&(z=p(Ie,z,Ze),yt===null?ke=Ie:yt.sibling=Ie,yt=Ie);return ut&&wi(q,Ze),ke}for(Ie=l(Ie);Ze<Y.length;Ze++)st=ee(Ie,q,Ze,Y[Ze],se),st!==null&&(t&&st.alternate!==null&&Ie.delete(st.key===null?Ze:st.key),z=p(st,z,Ze),yt===null?ke=st:yt.sibling=st,yt=st);return t&&Ie.forEach(function(Cs){return a(q,Cs)}),ut&&wi(q,Ze),ke}function Ve(q,z,Y,se){if(Y==null)throw Error(s(151));for(var ke=null,yt=null,Ie=z,Ze=z=0,st=null,xt=Y.next();Ie!==null&&!xt.done;Ze++,xt=Y.next()){Ie.index>Ze?(st=Ie,Ie=null):st=Ie.sibling;var Cs=X(q,Ie,xt.value,se);if(Cs===null){Ie===null&&(Ie=st);break}t&&Ie&&Cs.alternate===null&&a(q,Ie),z=p(Cs,z,Ze),yt===null?ke=Cs:yt.sibling=Cs,yt=Cs,Ie=st}if(xt.done)return r(q,Ie),ut&&wi(q,Ze),ke;if(Ie===null){for(;!xt.done;Ze++,xt=Y.next())xt=ce(q,xt.value,se),xt!==null&&(z=p(xt,z,Ze),yt===null?ke=xt:yt.sibling=xt,yt=xt);return ut&&wi(q,Ze),ke}for(Ie=l(Ie);!xt.done;Ze++,xt=Y.next())xt=ee(Ie,q,Ze,xt.value,se),xt!==null&&(t&&xt.alternate!==null&&Ie.delete(xt.key===null?Ze:xt.key),z=p(xt,z,Ze),yt===null?ke=xt:yt.sibling=xt,yt=xt);return t&&Ie.forEach(function(Lw){return a(q,Lw)}),ut&&wi(q,Ze),ke}function Ct(q,z,Y,se){if(typeof Y=="object"&&Y!==null&&Y.type===L&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case M:e:{for(var ke=Y.key;z!==null;){if(z.key===ke){if(ke=Y.type,ke===L){if(z.tag===7){r(q,z.sibling),se=h(z,Y.props.children),se.return=q,q=se;break e}}else if(z.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===C&&yr(ke)===z.type){r(q,z.sibling),se=h(z,Y.props),kl(se,Y),se.return=q,q=se;break e}r(q,z);break}else a(q,z);z=z.sibling}Y.type===L?(se=hr(Y.props.children,q.mode,se,Y.key),se.return=q,q=se):(se=pu(Y.type,Y.key,Y.props,null,q.mode,se),kl(se,Y),se.return=q,q=se)}return x(q);case B:e:{for(ke=Y.key;z!==null;){if(z.key===ke)if(z.tag===4&&z.stateNode.containerInfo===Y.containerInfo&&z.stateNode.implementation===Y.implementation){r(q,z.sibling),se=h(z,Y.children||[]),se.return=q,q=se;break e}else{r(q,z);break}else a(q,z);z=z.sibling}se=$f(Y,q.mode,se),se.return=q,q=se}return x(q);case C:return Y=yr(Y),Ct(q,z,Y,se)}if(ne(Y))return Re(q,z,Y,se);if(R(Y)){if(ke=R(Y),typeof ke!="function")throw Error(s(150));return Y=ke.call(Y),Ve(q,z,Y,se)}if(typeof Y.then=="function")return Ct(q,z,_u(Y),se);if(Y.$$typeof===W)return Ct(q,z,bu(q,Y),se);Eu(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,z!==null&&z.tag===6?(r(q,z.sibling),se=h(z,Y),se.return=q,q=se):(r(q,z),se=Gf(Y,q.mode,se),se.return=q,q=se),x(q)):r(q,z)}return function(q,z,Y,se){try{jl=0;var ke=Ct(q,z,Y,se);return ho=null,ke}catch(Ie){if(Ie===fo||Ie===xu)throw Ie;var yt=ta(29,Ie,null,q.mode);return yt.lanes=se,yt.return=q,yt}}}var vr=v0(!0),_0=v0(!1),fs=!1;function ih(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sh(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function hs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ps(t,a,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(_t&2)!==0){var h=l.pending;return h===null?a.next=a:(a.next=h.next,h.next=a),l.pending=a,a=hu(t),i0(t,null,r),a}return fu(t,l,a,r),hu(t)}function Ol(t,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var l=a.lanes;l&=t.pendingLanes,r|=l,a.lanes=r,rl(t,r)}}function rh(t,a){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var h=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var x={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?h=p=x:p=p.next=x,r=r.next}while(r!==null);p===null?h=p=a:p=p.next=a}else h=p=a;r={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=a:t.next=a,r.lastBaseUpdate=a}var oh=!1;function Dl(){if(oh){var t=uo;if(t!==null)throw t}}function Ml(t,a,r,l){oh=!1;var h=t.updateQueue;fs=!1;var p=h.firstBaseUpdate,x=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var D=A,K=D.next;D.next=null,x===null?p=K:x.next=K,x=D;var ie=t.alternate;ie!==null&&(ie=ie.updateQueue,A=ie.lastBaseUpdate,A!==x&&(A===null?ie.firstBaseUpdate=K:A.next=K,ie.lastBaseUpdate=D))}if(p!==null){var ce=h.baseState;x=0,ie=K=D=null,A=p;do{var X=A.lane&-536870913,ee=X!==A.lane;if(ee?(it&X)===X:(l&X)===X){X!==0&&X===co&&(oh=!0),ie!==null&&(ie=ie.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var Re=t,Ve=A;X=a;var Ct=r;switch(Ve.tag){case 1:if(Re=Ve.payload,typeof Re=="function"){ce=Re.call(Ct,ce,X);break e}ce=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ve.payload,X=typeof Re=="function"?Re.call(Ct,ce,X):Re,X==null)break e;ce=E({},ce,X);break e;case 2:fs=!0}}X=A.callback,X!==null&&(t.flags|=64,ee&&(t.flags|=8192),ee=h.callbacks,ee===null?h.callbacks=[X]:ee.push(X))}else ee={lane:X,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ie===null?(K=ie=ee,D=ce):ie=ie.next=ee,x|=X;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;ee=A,A=ee.next,ee.next=null,h.lastBaseUpdate=ee,h.shared.pending=null}}while(!0);ie===null&&(D=ce),h.baseState=D,h.firstBaseUpdate=K,h.lastBaseUpdate=ie,p===null&&(h.shared.lanes=0),xs|=x,t.lanes=x,t.memoizedState=ce}}function E0(t,a){if(typeof t!="function")throw Error(s(191,t));t.call(a)}function A0(t,a){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)E0(r[t],a)}var po=V(null),Au=V(0);function w0(t,a){t=Mi,ge(Au,t),ge(po,a),Mi=t|a.baseLanes}function lh(){ge(Au,Mi),ge(po,po.current)}function ch(){Mi=Au.current,ae(po),ae(Au)}var na=V(null),va=null;function ms(t){var a=t.alternate;ge(Zt,Zt.current&1),ge(na,t),va===null&&(a===null||po.current!==null||a.memoizedState!==null)&&(va=t)}function uh(t){ge(Zt,Zt.current),ge(na,t),va===null&&(va=t)}function S0(t){t.tag===22?(ge(Zt,Zt.current),ge(na,t),va===null&&(va=t)):gs()}function gs(){ge(Zt,Zt.current),ge(na,na.current)}function aa(t){ae(na),va===t&&(va=null),ae(Zt)}var Zt=V(0);function wu(t){for(var a=t;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||gp(r)||bp(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ni=0,Je=null,Nt=null,dn=null,Su=!1,mo=!1,_r=!1,Tu=0,Pl=0,go=null,CA=0;function Yt(){throw Error(s(321))}function dh(t,a){if(a===null)return!1;for(var r=0;r<a.length&&r<t.length;r++)if(!ea(t[r],a[r]))return!1;return!0}function fh(t,a,r,l,h,p){return Ni=p,Je=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,F.H=t===null||t.memoizedState===null?lb:Nh,_r=!1,p=r(l,h),_r=!1,mo&&(p=N0(a,r,l,h)),T0(t),p}function T0(t){F.H=Ll;var a=Nt!==null&&Nt.next!==null;if(Ni=0,dn=Nt=Je=null,Su=!1,Pl=0,go=null,a)throw Error(s(300));t===null||fn||(t=t.dependencies,t!==null&&gu(t)&&(fn=!0))}function N0(t,a,r,l){Je=t;var h=0;do{if(mo&&(go=null),Pl=0,mo=!1,25<=h)throw Error(s(301));if(h+=1,dn=Nt=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}F.H=cb,p=a(r,l)}while(mo);return p}function IA(){var t=F.H,a=t.useState()[0];return a=typeof a.then=="function"?Vl(a):a,t=t.useState()[0],(Nt!==null?Nt.memoizedState:null)!==t&&(Je.flags|=1024),a}function hh(){var t=Tu!==0;return Tu=0,t}function ph(t,a,r){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~r}function mh(t){if(Su){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Su=!1}Ni=0,dn=Nt=Je=null,mo=!1,Pl=Tu=0,go=null}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Je.memoizedState=dn=t:dn=dn.next=t,dn}function en(){if(Nt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var a=dn===null?Je.memoizedState:dn.next;if(a!==null)dn=a,Nt=t;else{if(t===null)throw Je.alternate===null?Error(s(467)):Error(s(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},dn===null?Je.memoizedState=dn=t:dn=dn.next=t}return dn}function Nu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vl(t){var a=Pl;return Pl+=1,go===null&&(go=[]),t=b0(go,t,a),a=Je,(dn===null?a.memoizedState:dn.next)===null&&(a=a.alternate,F.H=a===null||a.memoizedState===null?lb:Nh),t}function Ru(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Vl(t);if(t.$$typeof===W)return Sn(t)}throw Error(s(438,String(t)))}function gh(t){var a=null,r=Je.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var l=Je.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(h){return h.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=Nu(),Je.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(t),l=0;l<t;l++)r[l]=P;return a.index++,r}function Ri(t,a){return typeof a=="function"?a(t):a}function Cu(t){var a=en();return bh(a,Nt,t)}function bh(t,a,r){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var h=t.baseQueue,p=l.pending;if(p!==null){if(h!==null){var x=h.next;h.next=p.next,p.next=x}a.baseQueue=h=p,l.pending=null}if(p=t.baseState,h===null)t.memoizedState=p;else{a=h.next;var A=x=null,D=null,K=a,ie=!1;do{var ce=K.lane&-536870913;if(ce!==K.lane?(it&ce)===ce:(Ni&ce)===ce){var X=K.revertLane;if(X===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ce===co&&(ie=!0);else if((Ni&X)===X){K=K.next,X===co&&(ie=!0);continue}else ce={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},D===null?(A=D=ce,x=p):D=D.next=ce,Je.lanes|=X,xs|=X;ce=K.action,_r&&r(p,ce),p=K.hasEagerState?K.eagerState:r(p,ce)}else X={lane:ce,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},D===null?(A=D=X,x=p):D=D.next=X,Je.lanes|=ce,xs|=ce;K=K.next}while(K!==null&&K!==a);if(D===null?x=p:D.next=A,!ea(p,t.memoizedState)&&(fn=!0,ie&&(r=uo,r!==null)))throw r;t.memoizedState=p,t.baseState=x,t.baseQueue=D,l.lastRenderedState=p}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function yh(t){var a=en(),r=a.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=t;var l=r.dispatch,h=r.pending,p=a.memoizedState;if(h!==null){r.pending=null;var x=h=h.next;do p=t(p,x.action),x=x.next;while(x!==h);ea(p,a.memoizedState)||(fn=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),r.lastRenderedState=p}return[p,l]}function R0(t,a,r){var l=Je,h=en(),p=ut;if(p){if(r===void 0)throw Error(s(407));r=r()}else r=a();var x=!ea((Nt||h).memoizedState,r);if(x&&(h.memoizedState=r,fn=!0),h=h.queue,_h(j0.bind(null,l,h,t),[t]),h.getSnapshot!==a||x||dn!==null&&dn.memoizedState.tag&1){if(l.flags|=2048,bo(9,{destroy:void 0},I0.bind(null,l,h,r,a),null),jt===null)throw Error(s(349));p||(Ni&127)!==0||C0(l,a,r)}return r}function C0(t,a,r){t.flags|=16384,t={getSnapshot:a,value:r},a=Je.updateQueue,a===null?(a=Nu(),Je.updateQueue=a,a.stores=[t]):(r=a.stores,r===null?a.stores=[t]:r.push(t))}function I0(t,a,r,l){a.value=r,a.getSnapshot=l,k0(a)&&O0(t)}function j0(t,a,r){return r(function(){k0(a)&&O0(t)})}function k0(t){var a=t.getSnapshot;t=t.value;try{var r=a();return!ea(t,r)}catch{return!0}}function O0(t){var a=fr(t,2);a!==null&&$n(a,t,2)}function xh(t){var a=Ln();if(typeof t=="function"){var r=t;if(t=r(),_r){Ye(!0);try{r()}finally{Ye(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:t},a}function D0(t,a,r,l){return t.baseState=r,bh(t,Nt,typeof l=="function"?l:Ri)}function jA(t,a,r,l,h){if(ku(t))throw Error(s(485));if(t=a.action,t!==null){var p={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){p.listeners.push(x)}};F.T!==null?r(!0):p.isTransition=!1,l(p),r=a.pending,r===null?(p.next=a.pending=p,M0(a,p)):(p.next=r.next,a.pending=r.next=p)}}function M0(t,a){var r=a.action,l=a.payload,h=t.state;if(a.isTransition){var p=F.T,x={};F.T=x;try{var A=r(h,l),D=F.S;D!==null&&D(x,A),P0(t,a,A)}catch(K){vh(t,a,K)}finally{p!==null&&x.types!==null&&(p.types=x.types),F.T=p}}else try{p=r(h,l),P0(t,a,p)}catch(K){vh(t,a,K)}}function P0(t,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){V0(t,a,l)},function(l){return vh(t,a,l)}):V0(t,a,r)}function V0(t,a,r){a.status="fulfilled",a.value=r,z0(a),t.state=r,a=t.pending,a!==null&&(r=a.next,r===a?t.pending=null:(r=r.next,a.next=r,M0(t,r)))}function vh(t,a,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=r,z0(a),a=a.next;while(a!==l)}t.action=null}function z0(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function L0(t,a){return a}function U0(t,a){if(ut){var r=jt.formState;if(r!==null){e:{var l=Je;if(ut){if(Mt){t:{for(var h=Mt,p=xa;h.nodeType!==8;){if(!p){h=null;break t}if(h=_a(h.nextSibling),h===null){h=null;break t}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){Mt=_a(h.nextSibling),l=h.data==="F!";break e}}us(l)}l=!1}l&&(a=r[0])}}return r=Ln(),r.memoizedState=r.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:L0,lastRenderedState:a},r.queue=l,r=sb.bind(null,Je,l),l.dispatch=r,l=xh(!1),p=Th.bind(null,Je,!1,l.queue),l=Ln(),h={state:a,dispatch:null,action:t,pending:null},l.queue=h,r=jA.bind(null,Je,h,p,r),h.dispatch=r,l.memoizedState=t,[a,r,!1]}function B0(t){var a=en();return H0(a,Nt,t)}function H0(t,a,r){if(a=bh(t,a,L0)[0],t=Cu(Ri)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=Vl(a)}catch(x){throw x===fo?xu:x}else l=a;a=en();var h=a.queue,p=h.dispatch;return r!==a.memoizedState&&(Je.flags|=2048,bo(9,{destroy:void 0},kA.bind(null,h,r),null)),[l,p,t]}function kA(t,a){t.action=a}function q0(t){var a=en(),r=Nt;if(r!==null)return H0(a,r,t);en(),a=a.memoizedState,r=en();var l=r.queue.dispatch;return r.memoizedState=t,[a,l,!1]}function bo(t,a,r,l){return t={tag:t,create:r,deps:l,inst:a,next:null},a=Je.updateQueue,a===null&&(a=Nu(),Je.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,a.lastEffect=t),t}function F0(){return en().memoizedState}function Iu(t,a,r,l){var h=Ln();Je.flags|=t,h.memoizedState=bo(1|a,{destroy:void 0},r,l===void 0?null:l)}function ju(t,a,r,l){var h=en();l=l===void 0?null:l;var p=h.memoizedState.inst;Nt!==null&&l!==null&&dh(l,Nt.memoizedState.deps)?h.memoizedState=bo(a,p,r,l):(Je.flags|=t,h.memoizedState=bo(1|a,p,r,l))}function G0(t,a){Iu(8390656,8,t,a)}function _h(t,a){ju(2048,8,t,a)}function OA(t){Je.flags|=4;var a=Je.updateQueue;if(a===null)a=Nu(),Je.updateQueue=a,a.events=[t];else{var r=a.events;r===null?a.events=[t]:r.push(t)}}function $0(t){var a=en().memoizedState;return OA({ref:a,nextImpl:t}),function(){if((_t&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Y0(t,a){return ju(4,2,t,a)}function K0(t,a){return ju(4,4,t,a)}function Q0(t,a){if(typeof a=="function"){t=t();var r=a(t);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function X0(t,a,r){r=r!=null?r.concat([t]):null,ju(4,4,Q0.bind(null,a,t),r)}function Eh(){}function J0(t,a){var r=en();a=a===void 0?null:a;var l=r.memoizedState;return a!==null&&dh(a,l[1])?l[0]:(r.memoizedState=[t,a],t)}function W0(t,a){var r=en();a=a===void 0?null:a;var l=r.memoizedState;if(a!==null&&dh(a,l[1]))return l[0];if(l=t(),_r){Ye(!0);try{t()}finally{Ye(!1)}}return r.memoizedState=[l,a],l}function Ah(t,a,r){return r===void 0||(Ni&1073741824)!==0&&(it&261930)===0?t.memoizedState=a:(t.memoizedState=r,t=Zb(),Je.lanes|=t,xs|=t,r)}function Z0(t,a,r,l){return ea(r,a)?r:po.current!==null?(t=Ah(t,r,l),ea(t,a)||(fn=!0),t):(Ni&42)===0||(Ni&1073741824)!==0&&(it&261930)===0?(fn=!0,t.memoizedState=r):(t=Zb(),Je.lanes|=t,xs|=t,a)}function eb(t,a,r,l,h){var p=re.p;re.p=p!==0&&8>p?p:8;var x=F.T,A={};F.T=A,Th(t,!1,a,r);try{var D=h(),K=F.S;if(K!==null&&K(A,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ie=RA(D,l);zl(t,a,ie,ra(t))}else zl(t,a,l,ra(t))}catch(ce){zl(t,a,{then:function(){},status:"rejected",reason:ce},ra())}finally{re.p=p,x!==null&&A.types!==null&&(x.types=A.types),F.T=x}}function DA(){}function wh(t,a,r,l){if(t.tag!==5)throw Error(s(476));var h=tb(t).queue;eb(t,h,a,ye,r===null?DA:function(){return nb(t),r(l)})}function tb(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:ye},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:r},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function nb(t){var a=tb(t);a.next===null&&(a=t.alternate.memoizedState),zl(t,a.next.queue,{},ra())}function Sh(){return Sn(tc)}function ab(){return en().memoizedState}function ib(){return en().memoizedState}function MA(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var r=ra();t=hs(r);var l=ps(a,t,r);l!==null&&($n(l,a,r),Ol(l,a,r)),a={cache:eh()},t.payload=a;return}a=a.return}}function PA(t,a,r){var l=ra();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ku(t)?rb(a,r):(r=qf(t,a,r,l),r!==null&&($n(r,t,l),ob(r,a,l)))}function sb(t,a,r){var l=ra();zl(t,a,r,l)}function zl(t,a,r,l){var h={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(ku(t))rb(a,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var x=a.lastRenderedState,A=p(x,r);if(h.hasEagerState=!0,h.eagerState=A,ea(A,x))return fu(t,a,h,0),jt===null&&du(),!1}catch{}if(r=qf(t,a,h,l),r!==null)return $n(r,t,l),ob(r,a,l),!0}return!1}function Th(t,a,r,l){if(l={lane:2,revertLane:ip(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ku(t)){if(a)throw Error(s(479))}else a=qf(t,r,l,2),a!==null&&$n(a,t,2)}function ku(t){var a=t.alternate;return t===Je||a!==null&&a===Je}function rb(t,a){mo=Su=!0;var r=t.pending;r===null?a.next=a:(a.next=r.next,r.next=a),t.pending=a}function ob(t,a,r){if((r&4194048)!==0){var l=a.lanes;l&=t.pendingLanes,r|=l,a.lanes=r,rl(t,r)}}var Ll={readContext:Sn,use:Ru,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt};Ll.useEffectEvent=Yt;var lb={readContext:Sn,use:Ru,useCallback:function(t,a){return Ln().memoizedState=[t,a===void 0?null:a],t},useContext:Sn,useEffect:G0,useImperativeHandle:function(t,a,r){r=r!=null?r.concat([t]):null,Iu(4194308,4,Q0.bind(null,a,t),r)},useLayoutEffect:function(t,a){return Iu(4194308,4,t,a)},useInsertionEffect:function(t,a){Iu(4,2,t,a)},useMemo:function(t,a){var r=Ln();a=a===void 0?null:a;var l=t();if(_r){Ye(!0);try{t()}finally{Ye(!1)}}return r.memoizedState=[l,a],l},useReducer:function(t,a,r){var l=Ln();if(r!==void 0){var h=r(a);if(_r){Ye(!0);try{r(a)}finally{Ye(!1)}}}else h=a;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=PA.bind(null,Je,t),[l.memoizedState,t]},useRef:function(t){var a=Ln();return t={current:t},a.memoizedState=t},useState:function(t){t=xh(t);var a=t.queue,r=sb.bind(null,Je,a);return a.dispatch=r,[t.memoizedState,r]},useDebugValue:Eh,useDeferredValue:function(t,a){var r=Ln();return Ah(r,t,a)},useTransition:function(){var t=xh(!1);return t=eb.bind(null,Je,t.queue,!0,!1),Ln().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,r){var l=Je,h=Ln();if(ut){if(r===void 0)throw Error(s(407));r=r()}else{if(r=a(),jt===null)throw Error(s(349));(it&127)!==0||C0(l,a,r)}h.memoizedState=r;var p={value:r,getSnapshot:a};return h.queue=p,G0(j0.bind(null,l,p,t),[t]),l.flags|=2048,bo(9,{destroy:void 0},I0.bind(null,l,p,r,a),null),r},useId:function(){var t=Ln(),a=jt.identifierPrefix;if(ut){var r=ai,l=ni;r=(l&~(1<<32-We(l)-1)).toString(32)+r,a="_"+a+"R_"+r,r=Tu++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=CA++,a="_"+a+"r_"+r.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Sh,useFormState:U0,useActionState:U0,useOptimistic:function(t){var a=Ln();a.memoizedState=a.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=Th.bind(null,Je,!0,r),r.dispatch=a,[t,a]},useMemoCache:gh,useCacheRefresh:function(){return Ln().memoizedState=MA.bind(null,Je)},useEffectEvent:function(t){var a=Ln(),r={impl:t};return a.memoizedState=r,function(){if((_t&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},Nh={readContext:Sn,use:Ru,useCallback:J0,useContext:Sn,useEffect:_h,useImperativeHandle:X0,useInsertionEffect:Y0,useLayoutEffect:K0,useMemo:W0,useReducer:Cu,useRef:F0,useState:function(){return Cu(Ri)},useDebugValue:Eh,useDeferredValue:function(t,a){var r=en();return Z0(r,Nt.memoizedState,t,a)},useTransition:function(){var t=Cu(Ri)[0],a=en().memoizedState;return[typeof t=="boolean"?t:Vl(t),a]},useSyncExternalStore:R0,useId:ab,useHostTransitionStatus:Sh,useFormState:B0,useActionState:B0,useOptimistic:function(t,a){var r=en();return D0(r,Nt,t,a)},useMemoCache:gh,useCacheRefresh:ib};Nh.useEffectEvent=$0;var cb={readContext:Sn,use:Ru,useCallback:J0,useContext:Sn,useEffect:_h,useImperativeHandle:X0,useInsertionEffect:Y0,useLayoutEffect:K0,useMemo:W0,useReducer:yh,useRef:F0,useState:function(){return yh(Ri)},useDebugValue:Eh,useDeferredValue:function(t,a){var r=en();return Nt===null?Ah(r,t,a):Z0(r,Nt.memoizedState,t,a)},useTransition:function(){var t=yh(Ri)[0],a=en().memoizedState;return[typeof t=="boolean"?t:Vl(t),a]},useSyncExternalStore:R0,useId:ab,useHostTransitionStatus:Sh,useFormState:q0,useActionState:q0,useOptimistic:function(t,a){var r=en();return Nt!==null?D0(r,Nt,t,a):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:gh,useCacheRefresh:ib};cb.useEffectEvent=$0;function Rh(t,a,r,l){a=t.memoizedState,r=r(l,a),r=r==null?a:E({},a,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ch={enqueueSetState:function(t,a,r){t=t._reactInternals;var l=ra(),h=hs(l);h.payload=a,r!=null&&(h.callback=r),a=ps(t,h,l),a!==null&&($n(a,t,l),Ol(a,t,l))},enqueueReplaceState:function(t,a,r){t=t._reactInternals;var l=ra(),h=hs(l);h.tag=1,h.payload=a,r!=null&&(h.callback=r),a=ps(t,h,l),a!==null&&($n(a,t,l),Ol(a,t,l))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var r=ra(),l=hs(r);l.tag=2,a!=null&&(l.callback=a),a=ps(t,l,r),a!==null&&($n(a,t,r),Ol(a,t,r))}};function ub(t,a,r,l,h,p,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,x):a.prototype&&a.prototype.isPureReactComponent?!Sl(r,l)||!Sl(h,p):!0}function db(t,a,r,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,l),a.state!==t&&Ch.enqueueReplaceState(a,a.state,null)}function Er(t,a){var r=a;if("ref"in a){r={};for(var l in a)l!=="ref"&&(r[l]=a[l])}if(t=t.defaultProps){r===a&&(r=E({},r));for(var h in t)r[h]===void 0&&(r[h]=t[h])}return r}function fb(t){uu(t)}function hb(t){console.error(t)}function pb(t){uu(t)}function Ou(t,a){try{var r=t.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function mb(t,a,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Ih(t,a,r){return r=hs(r),r.tag=3,r.payload={element:null},r.callback=function(){Ou(t,a)},r}function gb(t){return t=hs(t),t.tag=3,t}function bb(t,a,r,l){var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var p=l.value;t.payload=function(){return h(p)},t.callback=function(){mb(a,r,l)}}var x=r.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){mb(a,r,l),typeof h!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function VA(t,a,r,l,h){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=r.alternate,a!==null&&lo(a,r,h,!0),r=na.current,r!==null){switch(r.tag){case 31:case 13:return va===null?Gu():r.alternate===null&&Kt===0&&(Kt=3),r.flags&=-257,r.flags|=65536,r.lanes=h,l===vu?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([l]):a.add(l),tp(t,l,h)),!1;case 22:return r.flags|=65536,l===vu?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([l]):r.add(l)),tp(t,l,h)),!1}throw Error(s(435,r.tag))}return tp(t,l,h),Gu(),!1}if(ut)return a=na.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=h,l!==Qf&&(t=Error(s(422),{cause:l}),Rl(ga(t,r)))):(l!==Qf&&(a=Error(s(423),{cause:l}),Rl(ga(a,r))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=ga(l,r),h=Ih(t.stateNode,l,h),rh(t,h),Kt!==4&&(Kt=2)),!1;var p=Error(s(520),{cause:l});if(p=ga(p,r),Yl===null?Yl=[p]:Yl.push(p),Kt!==4&&(Kt=2),a===null)return!0;l=ga(l,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,t=h&-h,r.lanes|=t,t=Ih(r.stateNode,l,t),rh(r,t),!1;case 1:if(a=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(vs===null||!vs.has(p))))return r.flags|=65536,h&=-h,r.lanes|=h,h=gb(h),bb(h,t,r,l),rh(r,h),!1}r=r.return}while(r!==null);return!1}var jh=Error(s(461)),fn=!1;function Tn(t,a,r,l){a.child=t===null?_0(a,null,r,l):vr(a,t.child,r,l)}function yb(t,a,r,l,h){r=r.render;var p=a.ref;if("ref"in l){var x={};for(var A in l)A!=="ref"&&(x[A]=l[A])}else x=l;return gr(a),l=fh(t,a,r,x,p,h),A=hh(),t!==null&&!fn?(ph(t,a,h),Ci(t,a,h)):(ut&&A&&Yf(a),a.flags|=1,Tn(t,a,l,h),a.child)}function xb(t,a,r,l,h){if(t===null){var p=r.type;return typeof p=="function"&&!Ff(p)&&p.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=p,vb(t,a,p,l,h)):(t=pu(r.type,null,l,a,a.mode,h),t.ref=a.ref,t.return=a,a.child=t)}if(p=t.child,!Lh(t,h)){var x=p.memoizedProps;if(r=r.compare,r=r!==null?r:Sl,r(x,l)&&t.ref===a.ref)return Ci(t,a,h)}return a.flags|=1,t=Ai(p,l),t.ref=a.ref,t.return=a,a.child=t}function vb(t,a,r,l,h){if(t!==null){var p=t.memoizedProps;if(Sl(p,l)&&t.ref===a.ref)if(fn=!1,a.pendingProps=l=p,Lh(t,h))(t.flags&131072)!==0&&(fn=!0);else return a.lanes=t.lanes,Ci(t,a,h)}return kh(t,a,r,l,h)}function _b(t,a,r,l){var h=l.children,p=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,t!==null){for(l=a.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~p}else l=0,a.child=null;return Eb(t,a,p,r,l)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&yu(a,p!==null?p.cachePool:null),p!==null?w0(a,p):lh(),S0(a);else return l=a.lanes=536870912,Eb(t,a,p!==null?p.baseLanes|r:r,r,l)}else p!==null?(yu(a,p.cachePool),w0(a,p),gs(),a.memoizedState=null):(t!==null&&yu(a,null),lh(),gs());return Tn(t,a,h,r),a.child}function Ul(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Eb(t,a,r,l,h){var p=nh();return p=p===null?null:{parent:un._currentValue,pool:p},a.memoizedState={baseLanes:r,cachePool:p},t!==null&&yu(a,null),lh(),S0(a),t!==null&&lo(t,a,l,!0),a.childLanes=h,null}function Du(t,a){return a=Pu({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function Ab(t,a,r){return vr(a,t.child,null,r),t=Du(a,a.pendingProps),t.flags|=2,aa(a),a.memoizedState=null,t}function zA(t,a,r){var l=a.pendingProps,h=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(ut){if(l.mode==="hidden")return t=Du(a,l),a.lanes=536870912,Ul(null,t);if(uh(a),(t=Mt)?(t=My(t,xa),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:ls!==null?{id:ni,overflow:ai}:null,retryLane:536870912,hydrationErrors:null},r=r0(t),r.return=a,a.child=r,wn=a,Mt=null)):t=null,t===null)throw us(a);return a.lanes=536870912,null}return Du(a,l)}var p=t.memoizedState;if(p!==null){var x=p.dehydrated;if(uh(a),h)if(a.flags&256)a.flags&=-257,a=Ab(t,a,r);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(s(558));else if(fn||lo(t,a,r,!1),h=(r&t.childLanes)!==0,fn||h){if(l=jt,l!==null&&(x=ol(l,r),x!==0&&x!==p.retryLane))throw p.retryLane=x,fr(t,x),$n(l,t,x),jh;Gu(),a=Ab(t,a,r)}else t=p.treeContext,Mt=_a(x.nextSibling),wn=a,ut=!0,cs=null,xa=!1,t!==null&&c0(a,t),a=Du(a,l),a.flags|=4096;return a}return t=Ai(t.child,{mode:l.mode,children:l.children}),t.ref=a.ref,a.child=t,t.return=a,t}function Mu(t,a){var r=a.ref;if(r===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(t===null||t.ref!==r)&&(a.flags|=4194816)}}function kh(t,a,r,l,h){return gr(a),r=fh(t,a,r,l,void 0,h),l=hh(),t!==null&&!fn?(ph(t,a,h),Ci(t,a,h)):(ut&&l&&Yf(a),a.flags|=1,Tn(t,a,r,h),a.child)}function wb(t,a,r,l,h,p){return gr(a),a.updateQueue=null,r=N0(a,l,r,h),T0(t),l=hh(),t!==null&&!fn?(ph(t,a,p),Ci(t,a,p)):(ut&&l&&Yf(a),a.flags|=1,Tn(t,a,r,p),a.child)}function Sb(t,a,r,l,h){if(gr(a),a.stateNode===null){var p=io,x=r.contextType;typeof x=="object"&&x!==null&&(p=Sn(x)),p=new r(l,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Ch,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=l,p.state=a.memoizedState,p.refs={},ih(a),x=r.contextType,p.context=typeof x=="object"&&x!==null?Sn(x):io,p.state=a.memoizedState,x=r.getDerivedStateFromProps,typeof x=="function"&&(Rh(a,r,x,l),p.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(x=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),x!==p.state&&Ch.enqueueReplaceState(p,p.state,null),Ml(a,l,p,h),Dl(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(t===null){p=a.stateNode;var A=a.memoizedProps,D=Er(r,A);p.props=D;var K=p.context,ie=r.contextType;x=io,typeof ie=="object"&&ie!==null&&(x=Sn(ie));var ce=r.getDerivedStateFromProps;ie=typeof ce=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,ie||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||K!==x)&&db(a,p,l,x),fs=!1;var X=a.memoizedState;p.state=X,Ml(a,l,p,h),Dl(),K=a.memoizedState,A||X!==K||fs?(typeof ce=="function"&&(Rh(a,r,ce,l),K=a.memoizedState),(D=fs||ub(a,r,D,l,X,K,x))?(ie||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=K),p.props=l,p.state=K,p.context=x,l=D):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{p=a.stateNode,sh(t,a),x=a.memoizedProps,ie=Er(r,x),p.props=ie,ce=a.pendingProps,X=p.context,K=r.contextType,D=io,typeof K=="object"&&K!==null&&(D=Sn(K)),A=r.getDerivedStateFromProps,(K=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(x!==ce||X!==D)&&db(a,p,l,D),fs=!1,X=a.memoizedState,p.state=X,Ml(a,l,p,h),Dl();var ee=a.memoizedState;x!==ce||X!==ee||fs||t!==null&&t.dependencies!==null&&gu(t.dependencies)?(typeof A=="function"&&(Rh(a,r,A,l),ee=a.memoizedState),(ie=fs||ub(a,r,ie,l,X,ee,D)||t!==null&&t.dependencies!==null&&gu(t.dependencies))?(K||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,ee,D),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,ee,D)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||x===t.memoizedProps&&X===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&X===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=ee),p.props=l,p.state=ee,p.context=D,l=ie):(typeof p.componentDidUpdate!="function"||x===t.memoizedProps&&X===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&X===t.memoizedState||(a.flags|=1024),l=!1)}return p=l,Mu(t,a),l=(a.flags&128)!==0,p||l?(p=a.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,t!==null&&l?(a.child=vr(a,t.child,null,h),a.child=vr(a,null,r,h)):Tn(t,a,r,h),a.memoizedState=p.state,t=a.child):t=Ci(t,a,h),t}function Tb(t,a,r,l){return pr(),a.flags|=256,Tn(t,a,r,l),a.child}var Oh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dh(t){return{baseLanes:t,cachePool:m0()}}function Mh(t,a,r){return t=t!==null?t.childLanes&~r:0,a&&(t|=sa),t}function Nb(t,a,r){var l=a.pendingProps,h=!1,p=(a.flags&128)!==0,x;if((x=p)||(x=t!==null&&t.memoizedState===null?!1:(Zt.current&2)!==0),x&&(h=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,t===null){if(ut){if(h?ms(a):gs(),(t=Mt)?(t=My(t,xa),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:ls!==null?{id:ni,overflow:ai}:null,retryLane:536870912,hydrationErrors:null},r=r0(t),r.return=a,a.child=r,wn=a,Mt=null)):t=null,t===null)throw us(a);return bp(t)?a.lanes=32:a.lanes=536870912,null}var A=l.children;return l=l.fallback,h?(gs(),h=a.mode,A=Pu({mode:"hidden",children:A},h),l=hr(l,h,r,null),A.return=a,l.return=a,A.sibling=l,a.child=A,l=a.child,l.memoizedState=Dh(r),l.childLanes=Mh(t,x,r),a.memoizedState=Oh,Ul(null,l)):(ms(a),Ph(a,A))}var D=t.memoizedState;if(D!==null&&(A=D.dehydrated,A!==null)){if(p)a.flags&256?(ms(a),a.flags&=-257,a=Vh(t,a,r)):a.memoizedState!==null?(gs(),a.child=t.child,a.flags|=128,a=null):(gs(),A=l.fallback,h=a.mode,l=Pu({mode:"visible",children:l.children},h),A=hr(A,h,r,null),A.flags|=2,l.return=a,A.return=a,l.sibling=A,a.child=l,vr(a,t.child,null,r),l=a.child,l.memoizedState=Dh(r),l.childLanes=Mh(t,x,r),a.memoizedState=Oh,a=Ul(null,l));else if(ms(a),bp(A)){if(x=A.nextSibling&&A.nextSibling.dataset,x)var K=x.dgst;x=K,l=Error(s(419)),l.stack="",l.digest=x,Rl({value:l,source:null,stack:null}),a=Vh(t,a,r)}else if(fn||lo(t,a,r,!1),x=(r&t.childLanes)!==0,fn||x){if(x=jt,x!==null&&(l=ol(x,r),l!==0&&l!==D.retryLane))throw D.retryLane=l,fr(t,l),$n(x,t,l),jh;gp(A)||Gu(),a=Vh(t,a,r)}else gp(A)?(a.flags|=192,a.child=t.child,a=null):(t=D.treeContext,Mt=_a(A.nextSibling),wn=a,ut=!0,cs=null,xa=!1,t!==null&&c0(a,t),a=Ph(a,l.children),a.flags|=4096);return a}return h?(gs(),A=l.fallback,h=a.mode,D=t.child,K=D.sibling,l=Ai(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,K!==null?A=Ai(K,A):(A=hr(A,h,r,null),A.flags|=2),A.return=a,l.return=a,l.sibling=A,a.child=l,Ul(null,l),l=a.child,A=t.child.memoizedState,A===null?A=Dh(r):(h=A.cachePool,h!==null?(D=un._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=m0(),A={baseLanes:A.baseLanes|r,cachePool:h}),l.memoizedState=A,l.childLanes=Mh(t,x,r),a.memoizedState=Oh,Ul(t.child,l)):(ms(a),r=t.child,t=r.sibling,r=Ai(r,{mode:"visible",children:l.children}),r.return=a,r.sibling=null,t!==null&&(x=a.deletions,x===null?(a.deletions=[t],a.flags|=16):x.push(t)),a.child=r,a.memoizedState=null,r)}function Ph(t,a){return a=Pu({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Pu(t,a){return t=ta(22,t,null,a),t.lanes=0,t}function Vh(t,a,r){return vr(a,t.child,null,r),t=Ph(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Rb(t,a,r){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),Wf(t.return,a,r)}function zh(t,a,r,l,h,p){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:h,treeForkCount:p}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=r,x.tailMode=h,x.treeForkCount=p)}function Cb(t,a,r){var l=a.pendingProps,h=l.revealOrder,p=l.tail;l=l.children;var x=Zt.current,A=(x&2)!==0;if(A?(x=x&1|2,a.flags|=128):x&=1,ge(Zt,x),Tn(t,a,l,r),l=ut?Nl:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rb(t,r,a);else if(t.tag===19)Rb(t,r,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(r=a.child,h=null;r!==null;)t=r.alternate,t!==null&&wu(t)===null&&(h=r),r=r.sibling;r=h,r===null?(h=a.child,a.child=null):(h=r.sibling,r.sibling=null),zh(a,!1,h,r,p,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,h=a.child,a.child=null;h!==null;){if(t=h.alternate,t!==null&&wu(t)===null){a.child=h;break}t=h.sibling,h.sibling=r,r=h,h=t}zh(a,!0,r,null,p,l);break;case"together":zh(a,!1,null,null,void 0,l);break;default:a.memoizedState=null}return a.child}function Ci(t,a,r){if(t!==null&&(a.dependencies=t.dependencies),xs|=a.lanes,(r&a.childLanes)===0)if(t!==null){if(lo(t,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(s(153));if(a.child!==null){for(t=a.child,r=Ai(t,t.pendingProps),a.child=r,r.return=a;t.sibling!==null;)t=t.sibling,r=r.sibling=Ai(t,t.pendingProps),r.return=a;r.sibling=null}return a.child}function Lh(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&gu(t)))}function LA(t,a,r){switch(a.tag){case 3:gt(a,a.stateNode.containerInfo),ds(a,un,t.memoizedState.cache),pr();break;case 27:case 5:mt(a);break;case 4:gt(a,a.stateNode.containerInfo);break;case 10:ds(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,uh(a),null;break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(ms(a),a.flags|=128,null):(r&a.child.childLanes)!==0?Nb(t,a,r):(ms(a),t=Ci(t,a,r),t!==null?t.sibling:null);ms(a);break;case 19:var h=(t.flags&128)!==0;if(l=(r&a.childLanes)!==0,l||(lo(t,a,r,!1),l=(r&a.childLanes)!==0),h){if(l)return Cb(t,a,r);a.flags|=128}if(h=a.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ge(Zt,Zt.current),l)break;return null;case 22:return a.lanes=0,_b(t,a,r,a.pendingProps);case 24:ds(a,un,t.memoizedState.cache)}return Ci(t,a,r)}function Ib(t,a,r){if(t!==null)if(t.memoizedProps!==a.pendingProps)fn=!0;else{if(!Lh(t,r)&&(a.flags&128)===0)return fn=!1,LA(t,a,r);fn=(t.flags&131072)!==0}else fn=!1,ut&&(a.flags&1048576)!==0&&l0(a,Nl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var l=a.pendingProps;if(t=yr(a.elementType),a.type=t,typeof t=="function")Ff(t)?(l=Er(t,l),a.tag=1,a=Sb(null,a,t,l,r)):(a.tag=0,a=kh(null,a,t,l,r));else{if(t!=null){var h=t.$$typeof;if(h===le){a.tag=11,a=yb(null,a,t,l,r);break e}else if(h===I){a.tag=14,a=xb(null,a,t,l,r);break e}}throw a=Te(t)||t,Error(s(306,a,""))}}return a;case 0:return kh(t,a,a.type,a.pendingProps,r);case 1:return l=a.type,h=Er(l,a.pendingProps),Sb(t,a,l,h,r);case 3:e:{if(gt(a,a.stateNode.containerInfo),t===null)throw Error(s(387));l=a.pendingProps;var p=a.memoizedState;h=p.element,sh(t,a),Ml(a,l,null,r);var x=a.memoizedState;if(l=x.cache,ds(a,un,l),l!==p.cache&&Zf(a,[un],r,!0),Dl(),l=x.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=Tb(t,a,l,r);break e}else if(l!==h){h=ga(Error(s(424)),a),Rl(h),a=Tb(t,a,l,r);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Mt=_a(t.firstChild),wn=a,ut=!0,cs=null,xa=!0,r=_0(a,null,l,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(pr(),l===h){a=Ci(t,a,r);break e}Tn(t,a,l,r)}a=a.child}return a;case 26:return Mu(t,a),t===null?(r=By(a.type,null,a.pendingProps,null))?a.memoizedState=r:ut||(r=a.type,t=a.pendingProps,l=Wu(je.current).createElement(r),l[on]=a,l[xn]=t,Nn(l,r,t),ln(l),a.stateNode=l):a.memoizedState=By(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return mt(a),t===null&&ut&&(l=a.stateNode=zy(a.type,a.pendingProps,je.current),wn=a,xa=!0,h=Mt,ws(a.type)?(yp=h,Mt=_a(l.firstChild)):Mt=h),Tn(t,a,a.pendingProps.children,r),Mu(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&ut&&((h=l=Mt)&&(l=mw(l,a.type,a.pendingProps,xa),l!==null?(a.stateNode=l,wn=a,Mt=_a(l.firstChild),xa=!1,h=!0):h=!1),h||us(a)),mt(a),h=a.type,p=a.pendingProps,x=t!==null?t.memoizedProps:null,l=p.children,hp(h,p)?l=null:x!==null&&hp(h,x)&&(a.flags|=32),a.memoizedState!==null&&(h=fh(t,a,IA,null,null,r),tc._currentValue=h),Mu(t,a),Tn(t,a,l,r),a.child;case 6:return t===null&&ut&&((t=r=Mt)&&(r=gw(r,a.pendingProps,xa),r!==null?(a.stateNode=r,wn=a,Mt=null,t=!0):t=!1),t||us(a)),null;case 13:return Nb(t,a,r);case 4:return gt(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=vr(a,null,l,r):Tn(t,a,l,r),a.child;case 11:return yb(t,a,a.type,a.pendingProps,r);case 7:return Tn(t,a,a.pendingProps,r),a.child;case 8:return Tn(t,a,a.pendingProps.children,r),a.child;case 12:return Tn(t,a,a.pendingProps.children,r),a.child;case 10:return l=a.pendingProps,ds(a,a.type,l.value),Tn(t,a,l.children,r),a.child;case 9:return h=a.type._context,l=a.pendingProps.children,gr(a),h=Sn(h),l=l(h),a.flags|=1,Tn(t,a,l,r),a.child;case 14:return xb(t,a,a.type,a.pendingProps,r);case 15:return vb(t,a,a.type,a.pendingProps,r);case 19:return Cb(t,a,r);case 31:return zA(t,a,r);case 22:return _b(t,a,r,a.pendingProps);case 24:return gr(a),l=Sn(un),t===null?(h=nh(),h===null&&(h=jt,p=eh(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=r),h=p),a.memoizedState={parent:l,cache:h},ih(a),ds(a,un,h)):((t.lanes&r)!==0&&(sh(t,a),Ml(a,null,null,r),Dl()),h=t.memoizedState,p=a.memoizedState,h.parent!==l?(h={parent:l,cache:l},a.memoizedState=h,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=h),ds(a,un,l)):(l=p.cache,ds(a,un,l),l!==h.cache&&Zf(a,[un],r,!0))),Tn(t,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function Ii(t){t.flags|=4}function Uh(t,a,r,l,h){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(ay())t.flags|=8192;else throw xr=vu,ah}else t.flags&=-16777217}function jb(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!$y(a))if(ay())t.flags|=8192;else throw xr=vu,ah}function Vu(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?qc():536870912,t.lanes|=a,_o|=a)}function Bl(t,a){if(!ut)switch(t.tailMode){case"hidden":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Pt(t){var a=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(a)for(var h=t.child;h!==null;)r|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)r|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=r,a}function UA(t,a,r){var l=a.pendingProps;switch(Kf(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(a),null;case 1:return Pt(a),null;case 3:return r=a.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ti(un),Ne(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(oo(a)?Ii(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Xf())),Pt(a),null;case 26:var h=a.type,p=a.memoizedState;return t===null?(Ii(a),p!==null?(Pt(a),jb(a,p)):(Pt(a),Uh(a,h,null,l,r))):p?p!==t.memoizedState?(Ii(a),Pt(a),jb(a,p)):(Pt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==l&&Ii(a),Pt(a),Uh(a,h,t,l,r)),null;case 27:if(ct(a),r=je.current,h=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&Ii(a);else{if(!l){if(a.stateNode===null)throw Error(s(166));return Pt(a),null}t=Ee.current,oo(a)?u0(a):(t=zy(h,l,r),a.stateNode=t,Ii(a))}return Pt(a),null;case 5:if(ct(a),h=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&Ii(a);else{if(!l){if(a.stateNode===null)throw Error(s(166));return Pt(a),null}if(p=Ee.current,oo(a))u0(a);else{var x=Wu(je.current);switch(p){case 1:p=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:p=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":p=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":p=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":p=x.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?x.createElement(h,{is:l.is}):x.createElement(h)}}p[on]=a,p[xn]=l;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)p.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=p;e:switch(Nn(p,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ii(a)}}return Pt(a),Uh(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,r),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==l&&Ii(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(s(166));if(t=je.current,oo(a)){if(t=a.stateNode,r=a.memoizedProps,l=null,h=wn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[on]=a,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||Ny(t.nodeValue,r)),t||us(a,!0)}else t=Wu(t).createTextNode(l),t[on]=a,a.stateNode=t}return Pt(a),null;case 31:if(r=a.memoizedState,t===null||t.memoizedState!==null){if(l=oo(a),r!==null){if(t===null){if(!l)throw Error(s(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[on]=a}else pr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pt(a),t=!1}else r=Xf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return a.flags&256?(aa(a),a):(aa(a),null);if((a.flags&128)!==0)throw Error(s(558))}return Pt(a),null;case 13:if(l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=oo(a),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=a.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[on]=a}else pr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Pt(a),h=!1}else h=Xf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return a.flags&256?(aa(a),a):(aa(a),null)}return aa(a),(a.flags&128)!==0?(a.lanes=r,a):(r=l!==null,t=t!==null&&t.memoizedState!==null,r&&(l=a.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==h&&(l.flags|=2048)),r!==t&&r&&(a.child.flags|=8192),Vu(a,a.updateQueue),Pt(a),null);case 4:return Ne(),t===null&&lp(a.stateNode.containerInfo),Pt(a),null;case 10:return Ti(a.type),Pt(a),null;case 19:if(ae(Zt),l=a.memoizedState,l===null)return Pt(a),null;if(h=(a.flags&128)!==0,p=l.rendering,p===null)if(h)Bl(l,!1);else{if(Kt!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(p=wu(t),p!==null){for(a.flags|=128,Bl(l,!1),t=p.updateQueue,a.updateQueue=t,Vu(a,t),a.subtreeFlags=0,t=r,r=a.child;r!==null;)s0(r,t),r=r.sibling;return ge(Zt,Zt.current&1|2),ut&&wi(a,l.treeForkCount),a.child}t=t.sibling}l.tail!==null&&et()>Hu&&(a.flags|=128,h=!0,Bl(l,!1),a.lanes=4194304)}else{if(!h)if(t=wu(p),t!==null){if(a.flags|=128,h=!0,t=t.updateQueue,a.updateQueue=t,Vu(a,t),Bl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!ut)return Pt(a),null}else 2*et()-l.renderingStartTime>Hu&&r!==536870912&&(a.flags|=128,h=!0,Bl(l,!1),a.lanes=4194304);l.isBackwards?(p.sibling=a.child,a.child=p):(t=l.last,t!==null?t.sibling=p:a.child=p,l.last=p)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=et(),t.sibling=null,r=Zt.current,ge(Zt,h?r&1|2:r&1),ut&&wi(a,l.treeForkCount),t):(Pt(a),null);case 22:case 23:return aa(a),ch(),l=a.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(r&536870912)!==0&&(a.flags&128)===0&&(Pt(a),a.subtreeFlags&6&&(a.flags|=8192)):Pt(a),r=a.updateQueue,r!==null&&Vu(a,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==r&&(a.flags|=2048),t!==null&&ae(br),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Ti(un),Pt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function BA(t,a){switch(Kf(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Ti(un),Ne(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return ct(a),null;case 31:if(a.memoizedState!==null){if(aa(a),a.alternate===null)throw Error(s(340));pr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(aa(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(s(340));pr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return ae(Zt),null;case 4:return Ne(),null;case 10:return Ti(a.type),null;case 22:case 23:return aa(a),ch(),t!==null&&ae(br),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Ti(un),null;case 25:return null;default:return null}}function kb(t,a){switch(Kf(a),a.tag){case 3:Ti(un),Ne();break;case 26:case 27:case 5:ct(a);break;case 4:Ne();break;case 31:a.memoizedState!==null&&aa(a);break;case 13:aa(a);break;case 19:ae(Zt);break;case 10:Ti(a.type);break;case 22:case 23:aa(a),ch(),t!==null&&ae(br);break;case 24:Ti(un)}}function Hl(t,a){try{var r=a.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var h=l.next;r=h;do{if((r.tag&t)===t){l=void 0;var p=r.create,x=r.inst;l=p(),x.destroy=l}r=r.next}while(r!==h)}}catch(A){St(a,a.return,A)}}function bs(t,a,r){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var p=h.next;l=p;do{if((l.tag&t)===t){var x=l.inst,A=x.destroy;if(A!==void 0){x.destroy=void 0,h=a;var D=r,K=A;try{K()}catch(ie){St(h,D,ie)}}}l=l.next}while(l!==p)}}catch(ie){St(a,a.return,ie)}}function Ob(t){var a=t.updateQueue;if(a!==null){var r=t.stateNode;try{A0(a,r)}catch(l){St(t,t.return,l)}}}function Db(t,a,r){r.props=Er(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){St(t,a,l)}}function ql(t,a){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(h){St(t,a,h)}}function ii(t,a){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(h){St(t,a,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(h){St(t,a,h)}else r.current=null}function Mb(t){var a=t.type,r=t.memoizedProps,l=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(h){St(t,t.return,h)}}function Bh(t,a,r){try{var l=t.stateNode;cw(l,t.type,r,a),l[xn]=a}catch(h){St(t,t.return,h)}}function Pb(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ws(t.type)||t.tag===4}function Hh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ws(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qh(t,a,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(t),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=Ca));else if(l!==4&&(l===27&&ws(t.type)&&(r=t.stateNode,a=null),t=t.child,t!==null))for(qh(t,a,r),t=t.sibling;t!==null;)qh(t,a,r),t=t.sibling}function zu(t,a,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?r.insertBefore(t,a):r.appendChild(t);else if(l!==4&&(l===27&&ws(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(zu(t,a,r),t=t.sibling;t!==null;)zu(t,a,r),t=t.sibling}function Vb(t){var a=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,h=a.attributes;h.length;)a.removeAttributeNode(h[0]);Nn(a,l,r),a[on]=t,a[xn]=r}catch(p){St(t,t.return,p)}}var ji=!1,hn=!1,Fh=!1,zb=typeof WeakSet=="function"?WeakSet:Set,_n=null;function HA(t,a){if(t=t.containerInfo,dp=sd,t=Xg(t),Vf(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var h=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var x=0,A=-1,D=-1,K=0,ie=0,ce=t,X=null;t:for(;;){for(var ee;ce!==r||h!==0&&ce.nodeType!==3||(A=x+h),ce!==p||l!==0&&ce.nodeType!==3||(D=x+l),ce.nodeType===3&&(x+=ce.nodeValue.length),(ee=ce.firstChild)!==null;)X=ce,ce=ee;for(;;){if(ce===t)break t;if(X===r&&++K===h&&(A=x),X===p&&++ie===l&&(D=x),(ee=ce.nextSibling)!==null)break;ce=X,X=ce.parentNode}ce=ee}r=A===-1||D===-1?null:{start:A,end:D}}else r=null}r=r||{start:0,end:0}}else r=null;for(fp={focusedElem:t,selectionRange:r},sd=!1,_n=a;_n!==null;)if(a=_n,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,_n=t;else for(;_n!==null;){switch(a=_n,p=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)h=t[r],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,r=a,h=p.memoizedProps,p=p.memoizedState,l=r.stateNode;try{var Re=Er(r.type,h);t=l.getSnapshotBeforeUpdate(Re,p),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ve){St(r,r.return,Ve)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,r=t.nodeType,r===9)mp(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":mp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=a.sibling,t!==null){t.return=a.return,_n=t;break}_n=a.return}}function Lb(t,a,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:Oi(t,r),l&4&&Hl(5,r);break;case 1:if(Oi(t,r),l&4)if(t=r.stateNode,a===null)try{t.componentDidMount()}catch(x){St(r,r.return,x)}else{var h=Er(r.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(h,a,t.__reactInternalSnapshotBeforeUpdate)}catch(x){St(r,r.return,x)}}l&64&&Ob(r),l&512&&ql(r,r.return);break;case 3:if(Oi(t,r),l&64&&(t=r.updateQueue,t!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{A0(t,a)}catch(x){St(r,r.return,x)}}break;case 27:a===null&&l&4&&Vb(r);case 26:case 5:Oi(t,r),a===null&&l&4&&Mb(r),l&512&&ql(r,r.return);break;case 12:Oi(t,r);break;case 31:Oi(t,r),l&4&&Hb(t,r);break;case 13:Oi(t,r),l&4&&qb(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=JA.bind(null,r),bw(t,r))));break;case 22:if(l=r.memoizedState!==null||ji,!l){a=a!==null&&a.memoizedState!==null||hn,h=ji;var p=hn;ji=l,(hn=a)&&!p?Di(t,r,(r.subtreeFlags&8772)!==0):Oi(t,r),ji=h,hn=p}break;case 30:break;default:Oi(t,r)}}function Ub(t){var a=t.alternate;a!==null&&(t.alternate=null,Ub(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Fr(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Lt=null,Hn=!1;function ki(t,a,r){for(r=r.child;r!==null;)Bb(t,a,r),r=r.sibling}function Bb(t,a,r){if(J&&typeof J.onCommitFiberUnmount=="function")try{J.onCommitFiberUnmount(ft,r)}catch{}switch(r.tag){case 26:hn||ii(r,a),ki(t,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:hn||ii(r,a);var l=Lt,h=Hn;ws(r.type)&&(Lt=r.stateNode,Hn=!1),ki(t,a,r),Wl(r.stateNode),Lt=l,Hn=h;break;case 5:hn||ii(r,a);case 6:if(l=Lt,h=Hn,Lt=null,ki(t,a,r),Lt=l,Hn=h,Lt!==null)if(Hn)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(r.stateNode)}catch(p){St(r,a,p)}else try{Lt.removeChild(r.stateNode)}catch(p){St(r,a,p)}break;case 18:Lt!==null&&(Hn?(t=Lt,Oy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Co(t)):Oy(Lt,r.stateNode));break;case 4:l=Lt,h=Hn,Lt=r.stateNode.containerInfo,Hn=!0,ki(t,a,r),Lt=l,Hn=h;break;case 0:case 11:case 14:case 15:bs(2,r,a),hn||bs(4,r,a),ki(t,a,r);break;case 1:hn||(ii(r,a),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Db(r,a,l)),ki(t,a,r);break;case 21:ki(t,a,r);break;case 22:hn=(l=hn)||r.memoizedState!==null,ki(t,a,r),hn=l;break;default:ki(t,a,r)}}function Hb(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Co(t)}catch(r){St(a,a.return,r)}}}function qb(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Co(t)}catch(r){St(a,a.return,r)}}function qA(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new zb),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new zb),a;default:throw Error(s(435,t.tag))}}function Lu(t,a){var r=qA(t);a.forEach(function(l){if(!r.has(l)){r.add(l);var h=WA.bind(null,t,l);l.then(h,h)}})}function qn(t,a){var r=a.deletions;if(r!==null)for(var l=0;l<r.length;l++){var h=r[l],p=t,x=a,A=x;e:for(;A!==null;){switch(A.tag){case 27:if(ws(A.type)){Lt=A.stateNode,Hn=!1;break e}break;case 5:Lt=A.stateNode,Hn=!1;break e;case 3:case 4:Lt=A.stateNode.containerInfo,Hn=!0;break e}A=A.return}if(Lt===null)throw Error(s(160));Bb(p,x,h),Lt=null,Hn=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Fb(a,t),a=a.sibling}var Ma=null;function Fb(t,a){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:qn(a,t),Fn(t),l&4&&(bs(3,t,t.return),Hl(3,t),bs(5,t,t.return));break;case 1:qn(a,t),Fn(t),l&512&&(hn||r===null||ii(r,r.return)),l&64&&ji&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var h=Ma;if(qn(a,t),Fn(t),l&512&&(hn||r===null||ii(r,r.return)),l&4){var p=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){e:{l=t.type,r=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":p=h.getElementsByTagName("title")[0],(!p||p[Fa]||p[on]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(l),h.head.insertBefore(p,h.querySelector("head > title"))),Nn(p,l,r),p[on]=t,ln(p),l=p;break e;case"link":var x=Fy("link","href",h).get(l+(r.href||""));if(x){for(var A=0;A<x.length;A++)if(p=x[A],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){x.splice(A,1);break t}}p=h.createElement(l),Nn(p,l,r),h.head.appendChild(p);break;case"meta":if(x=Fy("meta","content",h).get(l+(r.content||""))){for(A=0;A<x.length;A++)if(p=x[A],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){x.splice(A,1);break t}}p=h.createElement(l),Nn(p,l,r),h.head.appendChild(p);break;default:throw Error(s(468,l))}p[on]=t,ln(p),l=p}t.stateNode=l}else Gy(h,t.type,t.stateNode);else t.stateNode=qy(h,l,t.memoizedProps);else p!==l?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,l===null?Gy(h,t.type,t.stateNode):qy(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Bh(t,t.memoizedProps,r.memoizedProps)}break;case 27:qn(a,t),Fn(t),l&512&&(hn||r===null||ii(r,r.return)),r!==null&&l&4&&Bh(t,t.memoizedProps,r.memoizedProps);break;case 5:if(qn(a,t),Fn(t),l&512&&(hn||r===null||ii(r,r.return)),t.flags&32){h=t.stateNode;try{Bn(h,"")}catch(Re){St(t,t.return,Re)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Bh(t,h,r!==null?r.memoizedProps:h)),l&1024&&(Fh=!0);break;case 6:if(qn(a,t),Fn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(Re){St(t,t.return,Re)}}break;case 3:if(td=null,h=Ma,Ma=Zu(a.containerInfo),qn(a,t),Ma=h,Fn(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{Co(a.containerInfo)}catch(Re){St(t,t.return,Re)}Fh&&(Fh=!1,Gb(t));break;case 4:l=Ma,Ma=Zu(t.stateNode.containerInfo),qn(a,t),Fn(t),Ma=l;break;case 12:qn(a,t),Fn(t);break;case 31:qn(a,t),Fn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lu(t,l)));break;case 13:qn(a,t),Fn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Bu=et()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lu(t,l)));break;case 22:h=t.memoizedState!==null;var D=r!==null&&r.memoizedState!==null,K=ji,ie=hn;if(ji=K||h,hn=ie||D,qn(a,t),hn=ie,ji=K,Fn(t),l&8192)e:for(a=t.stateNode,a._visibility=h?a._visibility&-2:a._visibility|1,h&&(r===null||D||ji||hn||Ar(t)),r=null,a=t;;){if(a.tag===5||a.tag===26){if(r===null){D=r=a;try{if(p=D.stateNode,h)x=p.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{A=D.stateNode;var ce=D.memoizedProps.style,X=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;A.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Re){St(D,D.return,Re)}}}else if(a.tag===6){if(r===null){D=a;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(Re){St(D,D.return,Re)}}}else if(a.tag===18){if(r===null){D=a;try{var ee=D.stateNode;h?Dy(ee,!0):Dy(D.stateNode,!1)}catch(Re){St(D,D.return,Re)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Lu(t,r))));break;case 19:qn(a,t),Fn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Lu(t,l)));break;case 30:break;case 21:break;default:qn(a,t),Fn(t)}}function Fn(t){var a=t.flags;if(a&2){try{for(var r,l=t.return;l!==null;){if(Pb(l)){r=l;break}l=l.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var h=r.stateNode,p=Hh(t);zu(t,p,h);break;case 5:var x=r.stateNode;r.flags&32&&(Bn(x,""),r.flags&=-33);var A=Hh(t);zu(t,A,x);break;case 3:case 4:var D=r.stateNode.containerInfo,K=Hh(t);qh(t,K,D);break;default:throw Error(s(161))}}catch(ie){St(t,t.return,ie)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function Gb(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;Gb(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Oi(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Lb(t,a.alternate,a),a=a.sibling}function Ar(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:bs(4,a,a.return),Ar(a);break;case 1:ii(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&Db(a,a.return,r),Ar(a);break;case 27:Wl(a.stateNode);case 26:case 5:ii(a,a.return),Ar(a);break;case 22:a.memoizedState===null&&Ar(a);break;case 30:Ar(a);break;default:Ar(a)}t=t.sibling}}function Di(t,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,h=t,p=a,x=p.flags;switch(p.tag){case 0:case 11:case 15:Di(h,p,r),Hl(4,p);break;case 1:if(Di(h,p,r),l=p,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(K){St(l,l.return,K)}if(l=p,h=l.updateQueue,h!==null){var A=l.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)E0(D[h],A)}catch(K){St(l,l.return,K)}}r&&x&64&&Ob(p),ql(p,p.return);break;case 27:Vb(p);case 26:case 5:Di(h,p,r),r&&l===null&&x&4&&Mb(p),ql(p,p.return);break;case 12:Di(h,p,r);break;case 31:Di(h,p,r),r&&x&4&&Hb(h,p);break;case 13:Di(h,p,r),r&&x&4&&qb(h,p);break;case 22:p.memoizedState===null&&Di(h,p,r),ql(p,p.return);break;case 30:break;default:Di(h,p,r)}a=a.sibling}}function Gh(t,a){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Cl(r))}function $h(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Cl(t))}function Pa(t,a,r,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)$b(t,a,r,l),a=a.sibling}function $b(t,a,r,l){var h=a.flags;switch(a.tag){case 0:case 11:case 15:Pa(t,a,r,l),h&2048&&Hl(9,a);break;case 1:Pa(t,a,r,l);break;case 3:Pa(t,a,r,l),h&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Cl(t)));break;case 12:if(h&2048){Pa(t,a,r,l),t=a.stateNode;try{var p=a.memoizedProps,x=p.id,A=p.onPostCommit;typeof A=="function"&&A(x,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){St(a,a.return,D)}}else Pa(t,a,r,l);break;case 31:Pa(t,a,r,l);break;case 13:Pa(t,a,r,l);break;case 23:break;case 22:p=a.stateNode,x=a.alternate,a.memoizedState!==null?p._visibility&2?Pa(t,a,r,l):Fl(t,a):p._visibility&2?Pa(t,a,r,l):(p._visibility|=2,yo(t,a,r,l,(a.subtreeFlags&10256)!==0||!1)),h&2048&&Gh(x,a);break;case 24:Pa(t,a,r,l),h&2048&&$h(a.alternate,a);break;default:Pa(t,a,r,l)}}function yo(t,a,r,l,h){for(h=h&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=t,x=a,A=r,D=l,K=x.flags;switch(x.tag){case 0:case 11:case 15:yo(p,x,A,D,h),Hl(8,x);break;case 23:break;case 22:var ie=x.stateNode;x.memoizedState!==null?ie._visibility&2?yo(p,x,A,D,h):Fl(p,x):(ie._visibility|=2,yo(p,x,A,D,h)),h&&K&2048&&Gh(x.alternate,x);break;case 24:yo(p,x,A,D,h),h&&K&2048&&$h(x.alternate,x);break;default:yo(p,x,A,D,h)}a=a.sibling}}function Fl(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=t,l=a,h=l.flags;switch(l.tag){case 22:Fl(r,l),h&2048&&Gh(l.alternate,l);break;case 24:Fl(r,l),h&2048&&$h(l.alternate,l);break;default:Fl(r,l)}a=a.sibling}}var Gl=8192;function xo(t,a,r){if(t.subtreeFlags&Gl)for(t=t.child;t!==null;)Yb(t,a,r),t=t.sibling}function Yb(t,a,r){switch(t.tag){case 26:xo(t,a,r),t.flags&Gl&&t.memoizedState!==null&&Cw(r,Ma,t.memoizedState,t.memoizedProps);break;case 5:xo(t,a,r);break;case 3:case 4:var l=Ma;Ma=Zu(t.stateNode.containerInfo),xo(t,a,r),Ma=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Gl,Gl=16777216,xo(t,a,r),Gl=l):xo(t,a,r));break;default:xo(t,a,r)}}function Kb(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function $l(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var l=a[r];_n=l,Xb(l,t)}Kb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Qb(t),t=t.sibling}function Qb(t){switch(t.tag){case 0:case 11:case 15:$l(t),t.flags&2048&&bs(9,t,t.return);break;case 3:$l(t);break;case 12:$l(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Uu(t)):$l(t);break;default:$l(t)}}function Uu(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var l=a[r];_n=l,Xb(l,t)}Kb(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:bs(8,a,a.return),Uu(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,Uu(a));break;default:Uu(a)}t=t.sibling}}function Xb(t,a){for(;_n!==null;){var r=_n;switch(r.tag){case 0:case 11:case 15:bs(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Cl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,_n=l;else e:for(r=t;_n!==null;){l=_n;var h=l.sibling,p=l.return;if(Ub(l),l===r){_n=null;break e}if(h!==null){h.return=p,_n=h;break e}_n=p}}}var FA={getCacheForType:function(t){var a=Sn(un),r=a.data.get(t);return r===void 0&&(r=t(),a.data.set(t,r)),r},cacheSignal:function(){return Sn(un).controller.signal}},GA=typeof WeakMap=="function"?WeakMap:Map,_t=0,jt=null,nt=null,it=0,wt=0,ia=null,ys=!1,vo=!1,Yh=!1,Mi=0,Kt=0,xs=0,wr=0,Kh=0,sa=0,_o=0,Yl=null,Gn=null,Qh=!1,Bu=0,Jb=0,Hu=1/0,qu=null,vs=null,bn=0,_s=null,Eo=null,Pi=0,Xh=0,Jh=null,Wb=null,Kl=0,Wh=null;function ra(){return(_t&2)!==0&&it!==0?it&-it:F.T!==null?ip():Fc()}function Zb(){if(sa===0)if((it&536870912)===0||ut){var t=ht;ht<<=1,(ht&3932160)===0&&(ht=262144),sa=t}else sa=536870912;return t=na.current,t!==null&&(t.flags|=32),sa}function $n(t,a,r){(t===jt&&(wt===2||wt===9)||t.cancelPendingCommit!==null)&&(Ao(t,0),Es(t,it,sa,!1)),Ws(t,r),((_t&2)===0||t!==jt)&&(t===jt&&((_t&2)===0&&(wr|=r),Kt===4&&Es(t,it,sa,!1)),si(t))}function ey(t,a,r){if((_t&6)!==0)throw Error(s(327));var l=!r&&(a&127)===0&&(a&t.expiredLanes)===0||Ta(t,a),h=l?KA(t,a):ep(t,a,!0),p=l;do{if(h===0){vo&&!l&&Es(t,a,0,!1);break}else{if(r=t.current.alternate,p&&!$A(r)){h=ep(t,a,!1),p=!1;continue}if(h===2){if(p=a,t.errorRecoveryDisabledLanes&p)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var A=t;h=Yl;var D=A.current.memoizedState.isDehydrated;if(D&&(Ao(A,x).flags|=256),x=ep(A,x,!1),x!==2){if(Yh&&!D){A.errorRecoveryDisabledLanes|=p,wr|=p,h=4;break e}p=Gn,Gn=h,p!==null&&(Gn===null?Gn=p:Gn.push.apply(Gn,p))}h=x}if(p=!1,h!==2)continue}}if(h===1){Ao(t,0),Es(t,a,0,!0);break}e:{switch(l=t,p=h,p){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Es(l,a,sa,!ys);break e;case 2:Gn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(h=Bu+300-et(),10<h)){if(Es(l,a,sa,!ys),Jn(l,0,!0)!==0)break e;Pi=a,l.timeoutHandle=jy(ty.bind(null,l,r,Gn,qu,Qh,a,sa,wr,_o,ys,p,"Throttled",-0,0),h);break e}ty(l,r,Gn,qu,Qh,a,sa,wr,_o,ys,p,null,-0,0)}}break}while(!0);si(t)}function ty(t,a,r,l,h,p,x,A,D,K,ie,ce,X,ee){if(t.timeoutHandle=-1,ce=a.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ca},Yb(a,p,ce);var Re=(p&62914560)===p?Bu-et():(p&4194048)===p?Jb-et():0;if(Re=Iw(ce,Re),Re!==null){Pi=p,t.cancelPendingCommit=Re(cy.bind(null,t,a,p,r,l,h,x,A,D,ie,ce,null,X,ee)),Es(t,p,x,!K);return}}cy(t,a,p,r,l,h,x,A,D)}function $A(t){for(var a=t;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var h=r[l],p=h.getSnapshot;h=h.value;try{if(!ea(p(),h))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Es(t,a,r,l){a&=~Kh,a&=~wr,t.suspendedLanes|=a,t.pingedLanes&=~a,l&&(t.warmLanes|=a),l=t.expirationTimes;for(var h=a;0<h;){var p=31-We(h),x=1<<p;l[p]=-1,h&=~x}r!==0&&Zs(t,r,a)}function Fu(){return(_t&6)===0?(Ql(0),!1):!0}function Zh(){if(nt!==null){if(wt===0)var t=nt.return;else t=nt,Si=mr=null,mh(t),ho=null,jl=0,t=nt;for(;t!==null;)kb(t.alternate,t),t=t.return;nt=null}}function Ao(t,a){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,fw(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Pi=0,Zh(),jt=t,nt=r=Ai(t.current,null),it=a,wt=0,ia=null,ys=!1,vo=Ta(t,a),Yh=!1,_o=sa=Kh=wr=xs=Kt=0,Gn=Yl=null,Qh=!1,(a&8)!==0&&(a|=a&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=a;0<l;){var h=31-We(l),p=1<<h;a|=t[h],l&=~p}return Mi=a,du(),r}function ny(t,a){Je=null,F.H=Ll,a===fo||a===xu?(a=y0(),wt=3):a===ah?(a=y0(),wt=4):wt=a===jh?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ia=a,nt===null&&(Kt=1,Ou(t,ga(a,t.current)))}function ay(){var t=na.current;return t===null?!0:(it&4194048)===it?va===null:(it&62914560)===it||(it&536870912)!==0?t===va:!1}function iy(){var t=F.H;return F.H=Ll,t===null?Ll:t}function sy(){var t=F.A;return F.A=FA,t}function Gu(){Kt=4,ys||(it&4194048)!==it&&na.current!==null||(vo=!0),(xs&134217727)===0&&(wr&134217727)===0||jt===null||Es(jt,it,sa,!1)}function ep(t,a,r){var l=_t;_t|=2;var h=iy(),p=sy();(jt!==t||it!==a)&&(qu=null,Ao(t,a)),a=!1;var x=Kt;e:do try{if(wt!==0&&nt!==null){var A=nt,D=ia;switch(wt){case 8:Zh(),x=6;break e;case 3:case 2:case 9:case 6:na.current===null&&(a=!0);var K=wt;if(wt=0,ia=null,wo(t,A,D,K),r&&vo){x=0;break e}break;default:K=wt,wt=0,ia=null,wo(t,A,D,K)}}YA(),x=Kt;break}catch(ie){ny(t,ie)}while(!0);return a&&t.shellSuspendCounter++,Si=mr=null,_t=l,F.H=h,F.A=p,nt===null&&(jt=null,it=0,du()),x}function YA(){for(;nt!==null;)ry(nt)}function KA(t,a){var r=_t;_t|=2;var l=iy(),h=sy();jt!==t||it!==a?(qu=null,Hu=et()+500,Ao(t,a)):vo=Ta(t,a);e:do try{if(wt!==0&&nt!==null){a=nt;var p=ia;t:switch(wt){case 1:wt=0,ia=null,wo(t,a,p,1);break;case 2:case 9:if(g0(p)){wt=0,ia=null,oy(a);break}a=function(){wt!==2&&wt!==9||jt!==t||(wt=7),si(t)},p.then(a,a);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:g0(p)?(wt=0,ia=null,oy(a)):(wt=0,ia=null,wo(t,a,p,7));break;case 5:var x=null;switch(nt.tag){case 26:x=nt.memoizedState;case 5:case 27:var A=nt;if(x?$y(x):A.stateNode.complete){wt=0,ia=null;var D=A.sibling;if(D!==null)nt=D;else{var K=A.return;K!==null?(nt=K,$u(K)):nt=null}break t}}wt=0,ia=null,wo(t,a,p,5);break;case 6:wt=0,ia=null,wo(t,a,p,6);break;case 8:Zh(),Kt=6;break e;default:throw Error(s(462))}}QA();break}catch(ie){ny(t,ie)}while(!0);return Si=mr=null,F.H=l,F.A=h,_t=r,nt!==null?0:(jt=null,it=0,du(),Kt)}function QA(){for(;nt!==null&&!Me();)ry(nt)}function ry(t){var a=Ib(t.alternate,t,Mi);t.memoizedProps=t.pendingProps,a===null?$u(t):nt=a}function oy(t){var a=t,r=a.alternate;switch(a.tag){case 15:case 0:a=wb(r,a,a.pendingProps,a.type,void 0,it);break;case 11:a=wb(r,a,a.pendingProps,a.type.render,a.ref,it);break;case 5:mh(a);default:kb(r,a),a=nt=s0(a,Mi),a=Ib(r,a,Mi)}t.memoizedProps=t.pendingProps,a===null?$u(t):nt=a}function wo(t,a,r,l){Si=mr=null,mh(a),ho=null,jl=0;var h=a.return;try{if(VA(t,h,a,r,it)){Kt=1,Ou(t,ga(r,t.current)),nt=null;return}}catch(p){if(h!==null)throw nt=h,p;Kt=1,Ou(t,ga(r,t.current)),nt=null;return}a.flags&32768?(ut||l===1?t=!0:vo||(it&536870912)!==0?t=!1:(ys=t=!0,(l===2||l===9||l===3||l===6)&&(l=na.current,l!==null&&l.tag===13&&(l.flags|=16384))),ly(a,t)):$u(a)}function $u(t){var a=t;do{if((a.flags&32768)!==0){ly(a,ys);return}t=a.return;var r=UA(a.alternate,a,Mi);if(r!==null){nt=r;return}if(a=a.sibling,a!==null){nt=a;return}nt=a=t}while(a!==null);Kt===0&&(Kt=5)}function ly(t,a){do{var r=BA(t.alternate,t);if(r!==null){r.flags&=32767,nt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(t=t.sibling,t!==null)){nt=t;return}nt=t=r}while(t!==null);Kt=6,nt=null}function cy(t,a,r,l,h,p,x,A,D){t.cancelPendingCommit=null;do Yu();while(bn!==0);if((_t&6)!==0)throw Error(s(327));if(a!==null){if(a===t.current)throw Error(s(177));if(p=a.lanes|a.childLanes,p|=Hf,Of(t,r,p,x,A,D),t===jt&&(nt=jt=null,it=0),Eo=a,_s=t,Pi=r,Xh=p,Jh=h,Wb=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ZA($e,function(){return py(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=F.T,F.T=null,h=re.p,re.p=2,x=_t,_t|=4;try{HA(t,a,r)}finally{_t=x,re.p=h,F.T=l}}bn=1,uy(),dy(),fy()}}function uy(){if(bn===1){bn=0;var t=_s,a=Eo,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=F.T,F.T=null;var l=re.p;re.p=2;var h=_t;_t|=4;try{Fb(a,t);var p=fp,x=Xg(t.containerInfo),A=p.focusedElem,D=p.selectionRange;if(x!==A&&A&&A.ownerDocument&&Qg(A.ownerDocument.documentElement,A)){if(D!==null&&Vf(A)){var K=D.start,ie=D.end;if(ie===void 0&&(ie=K),"selectionStart"in A)A.selectionStart=K,A.selectionEnd=Math.min(ie,A.value.length);else{var ce=A.ownerDocument||document,X=ce&&ce.defaultView||window;if(X.getSelection){var ee=X.getSelection(),Re=A.textContent.length,Ve=Math.min(D.start,Re),Ct=D.end===void 0?Ve:Math.min(D.end,Re);!ee.extend&&Ve>Ct&&(x=Ct,Ct=Ve,Ve=x);var q=Kg(A,Ve),z=Kg(A,Ct);if(q&&z&&(ee.rangeCount!==1||ee.anchorNode!==q.node||ee.anchorOffset!==q.offset||ee.focusNode!==z.node||ee.focusOffset!==z.offset)){var Y=ce.createRange();Y.setStart(q.node,q.offset),ee.removeAllRanges(),Ve>Ct?(ee.addRange(Y),ee.extend(z.node,z.offset)):(Y.setEnd(z.node,z.offset),ee.addRange(Y))}}}}for(ce=[],ee=A;ee=ee.parentNode;)ee.nodeType===1&&ce.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ce.length;A++){var se=ce[A];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}sd=!!dp,fp=dp=null}finally{_t=h,re.p=l,F.T=r}}t.current=a,bn=2}}function dy(){if(bn===2){bn=0;var t=_s,a=Eo,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=F.T,F.T=null;var l=re.p;re.p=2;var h=_t;_t|=4;try{Lb(t,a.alternate,a)}finally{_t=h,re.p=l,F.T=r}}bn=3}}function fy(){if(bn===4||bn===3){bn=0,It();var t=_s,a=Eo,r=Pi,l=Wb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?bn=5:(bn=0,Eo=_s=null,hy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(vs=null),xi(r),a=a.stateNode,J&&typeof J.onCommitFiberRoot=="function")try{J.onCommitFiberRoot(ft,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=F.T,h=re.p,re.p=2,F.T=null;try{for(var p=t.onRecoverableError,x=0;x<l.length;x++){var A=l[x];p(A.value,{componentStack:A.stack})}}finally{F.T=a,re.p=h}}(Pi&3)!==0&&Yu(),si(t),h=t.pendingLanes,(r&261930)!==0&&(h&42)!==0?t===Wh?Kl++:(Kl=0,Wh=t):Kl=0,Ql(0)}}function hy(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Cl(a)))}function Yu(){return uy(),dy(),fy(),py()}function py(){if(bn!==5)return!1;var t=_s,a=Xh;Xh=0;var r=xi(Pi),l=F.T,h=re.p;try{re.p=32>r?32:r,F.T=null,r=Jh,Jh=null;var p=_s,x=Pi;if(bn=0,Eo=_s=null,Pi=0,(_t&6)!==0)throw Error(s(331));var A=_t;if(_t|=4,Qb(p.current),$b(p,p.current,x,r),_t=A,Ql(0,!1),J&&typeof J.onPostCommitFiberRoot=="function")try{J.onPostCommitFiberRoot(ft,p)}catch{}return!0}finally{re.p=h,F.T=l,hy(t,a)}}function my(t,a,r){a=ga(r,a),a=Ih(t.stateNode,a,2),t=ps(t,a,2),t!==null&&(Ws(t,2),si(t))}function St(t,a,r){if(t.tag===3)my(t,t,r);else for(;a!==null;){if(a.tag===3){my(a,t,r);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(vs===null||!vs.has(l))){t=ga(r,t),r=gb(2),l=ps(a,r,2),l!==null&&(bb(r,l,a,t),Ws(l,2),si(l));break}}a=a.return}}function tp(t,a,r){var l=t.pingCache;if(l===null){l=t.pingCache=new GA;var h=new Set;l.set(a,h)}else h=l.get(a),h===void 0&&(h=new Set,l.set(a,h));h.has(r)||(Yh=!0,h.add(r),t=XA.bind(null,t,a,r),a.then(t,t))}function XA(t,a,r){var l=t.pingCache;l!==null&&l.delete(a),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,jt===t&&(it&r)===r&&(Kt===4||Kt===3&&(it&62914560)===it&&300>et()-Bu?(_t&2)===0&&Ao(t,0):Kh|=r,_o===it&&(_o=0)),si(t)}function gy(t,a){a===0&&(a=qc()),t=fr(t,a),t!==null&&(Ws(t,a),si(t))}function JA(t){var a=t.memoizedState,r=0;a!==null&&(r=a.retryLane),gy(t,r)}function WA(t,a){var r=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(r=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(a),gy(t,r)}function ZA(t,a){return be(t,a)}var Ku=null,So=null,np=!1,Qu=!1,ap=!1,As=0;function si(t){t!==So&&t.next===null&&(So===null?Ku=So=t:So=So.next=t),Qu=!0,np||(np=!0,tw())}function Ql(t,a){if(!ap&&Qu){ap=!0;do for(var r=!1,l=Ku;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var p=0;else{var x=l.suspendedLanes,A=l.pingedLanes;p=(1<<31-We(42|t)+1)-1,p&=h&~(x&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,vy(l,p))}else p=it,p=Jn(l,l===jt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||Ta(l,p)||(r=!0,vy(l,p));l=l.next}while(r);ap=!1}}function ew(){by()}function by(){Qu=np=!1;var t=0;As!==0&&dw()&&(t=As);for(var a=et(),r=null,l=Ku;l!==null;){var h=l.next,p=yy(l,a);p===0?(l.next=null,r===null?Ku=h:r.next=h,h===null&&(So=r)):(r=l,(t!==0||(p&3)!==0)&&(Qu=!0)),l=h}bn!==0&&bn!==5||Ql(t),As!==0&&(As=0)}function yy(t,a){for(var r=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var x=31-We(p),A=1<<x,D=h[x];D===-1?((A&r)===0||(A&l)!==0)&&(h[x]=kf(A,a)):D<=a&&(t.expiredLanes|=A),p&=~A}if(a=jt,r=it,r=Jn(t,t===a?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===a&&(wt===2||wt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ge(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Ta(t,r)){if(a=r&-r,a===t.callbackPriority)return a;switch(l!==null&&Ge(l),xi(r)){case 2:case 8:r=qe;break;case 32:r=$e;break;case 268435456:r=xe;break;default:r=$e}return l=xy.bind(null,t),r=be(r,l),t.callbackPriority=a,t.callbackNode=r,a}return l!==null&&l!==null&&Ge(l),t.callbackPriority=2,t.callbackNode=null,2}function xy(t,a){if(bn!==0&&bn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Yu()&&t.callbackNode!==r)return null;var l=it;return l=Jn(t,t===jt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(ey(t,l,a),yy(t,et()),t.callbackNode!=null&&t.callbackNode===r?xy.bind(null,t):null)}function vy(t,a){if(Yu())return null;ey(t,a,!0)}function tw(){hw(function(){(_t&6)!==0?be(te,ew):by()})}function ip(){if(As===0){var t=co;t===0&&(t=bt,bt<<=1,(bt&261888)===0&&(bt=256)),As=t}return As}function _y(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Kr(""+t)}function Ey(t,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,t.id&&r.setAttribute("form",t.id),a.parentNode.insertBefore(r,a),t=new FormData(t),r.parentNode.removeChild(r),t}function nw(t,a,r,l,h){if(a==="submit"&&r&&r.stateNode===h){var p=_y((h[xn]||null).action),x=l.submitter;x&&(a=(a=x[xn]||null)?_y(a.formAction):x.getAttribute("formAction"),a!==null&&(p=a,x=null));var A=new Wa("action","action",null,l,h);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(As!==0){var D=x?Ey(h,x):new FormData(h);wh(r,{pending:!0,data:D,method:h.method,action:p},null,D)}}else typeof p=="function"&&(A.preventDefault(),D=x?Ey(h,x):new FormData(h),wh(r,{pending:!0,data:D,method:h.method,action:p},p,D))},currentTarget:h}]})}}for(var sp=0;sp<Bf.length;sp++){var rp=Bf[sp],aw=rp.toLowerCase(),iw=rp[0].toUpperCase()+rp.slice(1);Da(aw,"on"+iw)}Da(Zg,"onAnimationEnd"),Da(e0,"onAnimationIteration"),Da(t0,"onAnimationStart"),Da("dblclick","onDoubleClick"),Da("focusin","onFocus"),Da("focusout","onBlur"),Da(vA,"onTransitionRun"),Da(_A,"onTransitionStart"),Da(EA,"onTransitionCancel"),Da(n0,"onTransitionEnd"),Ka("onMouseEnter",["mouseout","mouseover"]),Ka("onMouseLeave",["mouseout","mouseover"]),Ka("onPointerEnter",["pointerout","pointerover"]),Ka("onPointerLeave",["pointerout","pointerover"]),Ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ya("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xl));function Ay(t,a){a=(a&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],h=l.event;l=l.listeners;e:{var p=void 0;if(a)for(var x=l.length-1;0<=x;x--){var A=l[x],D=A.instance,K=A.currentTarget;if(A=A.listener,D!==p&&h.isPropagationStopped())break e;p=A,h.currentTarget=K;try{p(h)}catch(ie){uu(ie)}h.currentTarget=null,p=D}else for(x=0;x<l.length;x++){if(A=l[x],D=A.instance,K=A.currentTarget,A=A.listener,D!==p&&h.isPropagationStopped())break e;p=A,h.currentTarget=K;try{p(h)}catch(ie){uu(ie)}h.currentTarget=null,p=D}}}}function at(t,a){var r=a[qr];r===void 0&&(r=a[qr]=new Set);var l=t+"__bubble";r.has(l)||(wy(a,t,2,!1),r.add(l))}function op(t,a,r){var l=0;a&&(l|=4),wy(r,t,l,a)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function lp(t){if(!t[Xu]){t[Xu]=!0,ll.forEach(function(r){r!=="selectionchange"&&(sw.has(r)||op(r,!1,t),op(r,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Xu]||(a[Xu]=!0,op("selectionchange",!1,a))}}function wy(t,a,r,l){switch(Zy(a)){case 2:var h=Ow;break;case 8:h=Dw;break;default:h=Ap}r=h.bind(null,a,r,t),h=void 0,!ir||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(a,r,{capture:!0,passive:h}):t.addEventListener(a,r,!0):h!==void 0?t.addEventListener(a,r,{passive:h}):t.addEventListener(a,r,!1)}function cp(t,a,r,l,h){var p=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var A=l.stateNode.containerInfo;if(A===h)break;if(x===4)for(x=l.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===h)return;x=x.return}for(;A!==null;){if(x=Ga(A),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){l=p=x;continue e}A=A.parentNode}}l=l.return}is(function(){var K=p,ie=fa(r),ce=[];e:{var X=a0.get(t);if(X!==void 0){var ee=Wa,Re=t;switch(t){case"keypress":if(rr(r)===0)break e;case"keydown":case"keyup":ee=ou;break;case"focusin":Re="focus",ee=lr;break;case"focusout":Re="blur",ee=lr;break;case"beforeblur":case"afterblur":ee=lr;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=_l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Wc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=y;break;case Zg:case e0:case t0:ee=eu;break;case n0:ee=N;break;case"scroll":case"scrollend":ee=vl;break;case"wheel":ee=Z;break;case"copy":case"cut":case"paste":ee=tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Ei;break;case"toggle":case"beforetoggle":ee=Xe}var Ve=(a&4)!==0,Ct=!Ve&&(t==="scroll"||t==="scrollend"),q=Ve?X!==null?X+"Capture":null:X;Ve=[];for(var z=K,Y;z!==null;){var se=z;if(Y=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||Y===null||q===null||(se=Ia(z,q),se!=null&&Ve.push(Jl(z,se,Y))),Ct)break;z=z.return}0<Ve.length&&(X=new ee(X,Re,null,r,ie),ce.push({event:X,listeners:Ve}))}}if((a&7)===0){e:{if(X=t==="mouseover"||t==="pointerover",ee=t==="mouseout"||t==="pointerout",X&&r!==bl&&(Re=r.relatedTarget||r.fromElement)&&(Ga(Re)||Re[qa]))break e;if((ee||X)&&(X=ie.window===ie?ie:(X=ie.ownerDocument)?X.defaultView||X.parentWindow:window,ee?(Re=r.relatedTarget||r.toElement,ee=K,Re=Re?Ga(Re):null,Re!==null&&(Ct=u(Re),Ve=Re.tag,Re!==Ct||Ve!==5&&Ve!==27&&Ve!==6)&&(Re=null)):(ee=null,Re=K),ee!==Re)){if(Ve=_l,se="onMouseLeave",q="onMouseEnter",z="mouse",(t==="pointerout"||t==="pointerover")&&(Ve=Ei,se="onPointerLeave",q="onPointerEnter",z="pointer"),Ct=ee==null?X:Wn(ee),Y=Re==null?X:Wn(Re),X=new Ve(se,z+"leave",ee,r,ie),X.target=Ct,X.relatedTarget=Y,se=null,Ga(ie)===K&&(Ve=new Ve(q,z+"enter",Re,r,ie),Ve.target=Y,Ve.relatedTarget=Ct,se=Ve),Ct=se,ee&&Re)t:{for(Ve=rw,q=ee,z=Re,Y=0,se=q;se;se=Ve(se))Y++;se=0;for(var ke=z;ke;ke=Ve(ke))se++;for(;0<Y-se;)q=Ve(q),Y--;for(;0<se-Y;)z=Ve(z),se--;for(;Y--;){if(q===z||z!==null&&q===z.alternate){Ve=q;break t}q=Ve(q),z=Ve(z)}Ve=null}else Ve=null;ee!==null&&Sy(ce,X,ee,Ve,!1),Re!==null&&Ct!==null&&Sy(ce,Ct,Re,Ve,!0)}}e:{if(X=K?Wn(K):window,ee=X.nodeName&&X.nodeName.toLowerCase(),ee==="select"||ee==="input"&&X.type==="file")var yt=Hg;else if(Ug(X))if(qg)yt=bA;else{yt=mA;var Ie=pA}else ee=X.nodeName,!ee||ee.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?K&&Yr(K.elementType)&&(yt=Hg):yt=gA;if(yt&&(yt=yt(t,K))){Bg(ce,yt,r,ie);break e}Ie&&Ie(t,X,K),t==="focusout"&&K&&X.type==="number"&&K.memoizedProps.value!=null&&pl(X,"number",X.value)}switch(Ie=K?Wn(K):window,t){case"focusin":(Ug(Ie)||Ie.contentEditable==="true")&&(to=Ie,zf=K,Tl=null);break;case"focusout":Tl=zf=to=null;break;case"mousedown":Lf=!0;break;case"contextmenu":case"mouseup":case"dragend":Lf=!1,Jg(ce,r,ie);break;case"selectionchange":if(xA)break;case"keydown":case"keyup":Jg(ce,r,ie)}var Ze;if(vt)e:{switch(t){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else eo?cr(t,r)&&(st="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(st="onCompositionStart");st&&(ti&&r.locale!=="ko"&&(eo||st!=="onCompositionStart"?st==="onCompositionEnd"&&eo&&(Ze=xl()):(Ja=ie,yl="value"in Ja?Ja.value:Ja.textContent,eo=!0)),Ie=Ju(K,st),0<Ie.length&&(st=new ei(st,t,null,r,ie),ce.push({event:st,listeners:Ie}),Ze?st.data=Ze:(Ze=Zr(r),Ze!==null&&(st.data=Ze)))),(Ze=pa?uA(t,r):dA(t,r))&&(st=Ju(K,"onBeforeInput"),0<st.length&&(Ie=new ei("onBeforeInput","beforeinput",null,r,ie),ce.push({event:Ie,listeners:st}),Ie.data=Ze)),nw(ce,t,K,r,ie)}Ay(ce,a)})}function Jl(t,a,r){return{instance:t,listener:a,currentTarget:r}}function Ju(t,a){for(var r=a+"Capture",l=[];t!==null;){var h=t,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=Ia(t,r),h!=null&&l.unshift(Jl(t,h,p)),h=Ia(t,a),h!=null&&l.push(Jl(t,h,p))),t.tag===3)return l;t=t.return}return[]}function rw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Sy(t,a,r,l,h){for(var p=a._reactName,x=[];r!==null&&r!==l;){var A=r,D=A.alternate,K=A.stateNode;if(A=A.tag,D!==null&&D===l)break;A!==5&&A!==26&&A!==27||K===null||(D=K,h?(K=Ia(r,p),K!=null&&x.unshift(Jl(r,K,D))):h||(K=Ia(r,p),K!=null&&x.push(Jl(r,K,D)))),r=r.return}x.length!==0&&t.push({event:a,listeners:x})}var ow=/\r\n?/g,lw=/\u0000|\uFFFD/g;function Ty(t){return(typeof t=="string"?t:""+t).replace(ow,`
`).replace(lw,"")}function Ny(t,a){return a=Ty(a),Ty(t)===a}function Rt(t,a,r,l,h,p){switch(r){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||Bn(t,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&Bn(t,""+l);break;case"className":Zn(t,"class",l);break;case"tabIndex":Zn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Zn(t,r,l);break;case"style":gl(t,l,p);break;case"data":if(a!=="object"){Zn(t,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=Kr(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(a!=="input"&&Rt(t,a,"name",h.name,h,null),Rt(t,a,"formEncType",h.formEncType,h,null),Rt(t,a,"formMethod",h.formMethod,h,null),Rt(t,a,"formTarget",h.formTarget,h,null)):(Rt(t,a,"encType",h.encType,h,null),Rt(t,a,"method",h.method,h,null),Rt(t,a,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=Kr(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=Ca);break;case"onScroll":l!=null&&at("scroll",t);break;case"onScrollEnd":l!=null&&at("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=Kr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":at("beforetoggle",t),at("toggle",t),Gr(t,"popover",l);break;case"xlinkActuate":cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":cn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":cn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":cn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":cn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Gr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Jc.get(r)||r,Gr(t,r,l))}}function up(t,a,r,l,h,p){switch(r){case"style":gl(t,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=r}}break;case"children":typeof l=="string"?Bn(t,l):(typeof l=="number"||typeof l=="bigint")&&Bn(t,""+l);break;case"onScroll":l!=null&&at("scroll",t);break;case"onScrollEnd":l!=null&&at("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ca);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cl.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(h=r.endsWith("Capture"),a=r.slice(2,h?r.length-7:void 0),p=t[xn]||null,p=p!=null?p[r]:null,typeof p=="function"&&t.removeEventListener(a,p,h),typeof l=="function")){typeof p!="function"&&p!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(a,l,h);break e}r in t?t[r]=l:l===!0?t.setAttribute(r,""):Gr(t,r,l)}}}function Nn(t,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",t),at("load",t);var l=!1,h=!1,p;for(p in r)if(r.hasOwnProperty(p)){var x=r[p];if(x!=null)switch(p){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Rt(t,a,p,x,r,null)}}h&&Rt(t,a,"srcSet",r.srcSet,r,null),l&&Rt(t,a,"src",r.src,r,null);return;case"input":at("invalid",t);var A=p=x=h=null,D=null,K=null;for(l in r)if(r.hasOwnProperty(l)){var ie=r[l];if(ie!=null)switch(l){case"name":h=ie;break;case"type":x=ie;break;case"checked":D=ie;break;case"defaultChecked":K=ie;break;case"value":p=ie;break;case"defaultValue":A=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,a));break;default:Rt(t,a,l,ie,r,null)}}Kc(t,p,A,D,K,x,h,!1);return;case"select":at("invalid",t),l=x=p=null;for(h in r)if(r.hasOwnProperty(h)&&(A=r[h],A!=null))switch(h){case"value":p=A;break;case"defaultValue":x=A;break;case"multiple":l=A;default:Rt(t,a,h,A,r,null)}a=p,r=x,t.multiple=!!l,a!=null?es(t,!!l,a,!1):r!=null&&es(t,!!l,r,!0);return;case"textarea":at("invalid",t),p=h=l=null;for(x in r)if(r.hasOwnProperty(x)&&(A=r[x],A!=null))switch(x){case"value":l=A;break;case"defaultValue":h=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:Rt(t,a,x,A,r,null)}ts(t,l,h,p);return;case"option":for(D in r)r.hasOwnProperty(D)&&(l=r[D],l!=null)&&(D==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":Rt(t,a,D,l,r,null));return;case"dialog":at("beforetoggle",t),at("toggle",t),at("cancel",t),at("close",t);break;case"iframe":case"object":at("load",t);break;case"video":case"audio":for(l=0;l<Xl.length;l++)at(Xl[l],t);break;case"image":at("error",t),at("load",t);break;case"details":at("toggle",t);break;case"embed":case"source":case"link":at("error",t),at("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in r)if(r.hasOwnProperty(K)&&(l=r[K],l!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:Rt(t,a,K,l,r,null)}return;default:if(Yr(a)){for(ie in r)r.hasOwnProperty(ie)&&(l=r[ie],l!==void 0&&up(t,a,ie,l,r,void 0));return}}for(A in r)r.hasOwnProperty(A)&&(l=r[A],l!=null&&Rt(t,a,A,l,r,null))}function cw(t,a,r,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,x=null,A=null,D=null,K=null,ie=null;for(ee in r){var ce=r[ee];if(r.hasOwnProperty(ee)&&ce!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":D=ce;default:l.hasOwnProperty(ee)||Rt(t,a,ee,null,l,ce)}}for(var X in l){var ee=l[X];if(ce=r[X],l.hasOwnProperty(X)&&(ee!=null||ce!=null))switch(X){case"type":p=ee;break;case"name":h=ee;break;case"checked":K=ee;break;case"defaultChecked":ie=ee;break;case"value":x=ee;break;case"defaultValue":A=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,a));break;default:ee!==ce&&Rt(t,a,X,ee,l,ce)}}$r(t,x,A,D,K,ie,p,h);return;case"select":ee=x=A=X=null;for(p in r)if(D=r[p],r.hasOwnProperty(p)&&D!=null)switch(p){case"value":break;case"multiple":ee=D;default:l.hasOwnProperty(p)||Rt(t,a,p,null,l,D)}for(h in l)if(p=l[h],D=r[h],l.hasOwnProperty(h)&&(p!=null||D!=null))switch(h){case"value":X=p;break;case"defaultValue":A=p;break;case"multiple":x=p;default:p!==D&&Rt(t,a,h,p,l,D)}a=A,r=x,l=ee,X!=null?es(t,!!r,X,!1):!!l!=!!r&&(a!=null?es(t,!!r,a,!0):es(t,!!r,r?[]:"",!1));return;case"textarea":ee=X=null;for(A in r)if(h=r[A],r.hasOwnProperty(A)&&h!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Rt(t,a,A,null,l,h)}for(x in l)if(h=l[x],p=r[x],l.hasOwnProperty(x)&&(h!=null||p!=null))switch(x){case"value":X=h;break;case"defaultValue":ee=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==p&&Rt(t,a,x,h,l,p)}Qc(t,X,ee);return;case"option":for(var Re in r)X=r[Re],r.hasOwnProperty(Re)&&X!=null&&!l.hasOwnProperty(Re)&&(Re==="selected"?t.selected=!1:Rt(t,a,Re,null,l,X));for(D in l)X=l[D],ee=r[D],l.hasOwnProperty(D)&&X!==ee&&(X!=null||ee!=null)&&(D==="selected"?t.selected=X&&typeof X!="function"&&typeof X!="symbol":Rt(t,a,D,X,l,ee));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in r)X=r[Ve],r.hasOwnProperty(Ve)&&X!=null&&!l.hasOwnProperty(Ve)&&Rt(t,a,Ve,null,l,X);for(K in l)if(X=l[K],ee=r[K],l.hasOwnProperty(K)&&X!==ee&&(X!=null||ee!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,a));break;default:Rt(t,a,K,X,l,ee)}return;default:if(Yr(a)){for(var Ct in r)X=r[Ct],r.hasOwnProperty(Ct)&&X!==void 0&&!l.hasOwnProperty(Ct)&&up(t,a,Ct,void 0,l,X);for(ie in l)X=l[ie],ee=r[ie],!l.hasOwnProperty(ie)||X===ee||X===void 0&&ee===void 0||up(t,a,ie,X,l,ee);return}}for(var q in r)X=r[q],r.hasOwnProperty(q)&&X!=null&&!l.hasOwnProperty(q)&&Rt(t,a,q,null,l,X);for(ce in l)X=l[ce],ee=r[ce],!l.hasOwnProperty(ce)||X===ee||X==null&&ee==null||Rt(t,a,ce,X,l,ee)}function Ry(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var h=r[l],p=h.transferSize,x=h.initiatorType,A=h.duration;if(p&&A&&Ry(x)){for(x=0,A=h.responseEnd,l+=1;l<r.length;l++){var D=r[l],K=D.startTime;if(K>A)break;var ie=D.transferSize,ce=D.initiatorType;ie&&Ry(ce)&&(D=D.responseEnd,x+=ie*(D<A?1:(A-K)/(D-K)))}if(--l,a+=8*(p+x)/(h.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var dp=null,fp=null;function Wu(t){return t.nodeType===9?t:t.ownerDocument}function Cy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Iy(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function hp(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var pp=null;function dw(){var t=window.event;return t&&t.type==="popstate"?t===pp?!1:(pp=t,!0):(pp=null,!1)}var jy=typeof setTimeout=="function"?setTimeout:void 0,fw=typeof clearTimeout=="function"?clearTimeout:void 0,ky=typeof Promise=="function"?Promise:void 0,hw=typeof queueMicrotask=="function"?queueMicrotask:typeof ky<"u"?function(t){return ky.resolve(null).then(t).catch(pw)}:jy;function pw(t){setTimeout(function(){throw t})}function ws(t){return t==="head"}function Oy(t,a){var r=a,l=0;do{var h=r.nextSibling;if(t.removeChild(r),h&&h.nodeType===8)if(r=h.data,r==="/$"||r==="/&"){if(l===0){t.removeChild(h),Co(a);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")Wl(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Wl(r);for(var p=r.firstChild;p;){var x=p.nextSibling,A=p.nodeName;p[Fa]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&p.rel.toLowerCase()==="stylesheet"||r.removeChild(p),p=x}}else r==="body"&&Wl(t.ownerDocument.body);r=h}while(r);Co(a)}function Dy(t,a){var r=t;t=0;do{var l=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=l}while(r)}function mp(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":mp(r),Fr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function mw(t,a,r,l){for(;t.nodeType===1;){var h=r;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Fa])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=_a(t.nextSibling),t===null)break}return null}function gw(t,a,r){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=_a(t.nextSibling),t===null))return null;return t}function My(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=_a(t.nextSibling),t===null))return null;return t}function gp(t){return t.data==="$?"||t.data==="$~"}function bp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function bw(t,a){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||r.readyState!=="loading")a();else{var l=function(){a(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function _a(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var yp=null;function Py(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(a===0)return _a(t.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}t=t.nextSibling}return null}function Vy(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return t;a--}else r!=="/$"&&r!=="/&"||a++}t=t.previousSibling}return null}function zy(t,a,r){switch(a=Wu(r),t){case"html":if(t=a.documentElement,!t)throw Error(s(452));return t;case"head":if(t=a.head,!t)throw Error(s(453));return t;case"body":if(t=a.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Wl(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Fr(t)}var Ea=new Map,Ly=new Set;function Zu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Vi=re.d;re.d={f:yw,r:xw,D:vw,C:_w,L:Ew,m:Aw,X:Sw,S:ww,M:Tw};function yw(){var t=Vi.f(),a=Fu();return t||a}function xw(t){var a=da(t);a!==null&&a.tag===5&&a.type==="form"?nb(a):Vi.r(t)}var To=typeof document>"u"?null:document;function Uy(t,a,r){var l=To;if(l&&typeof a=="string"&&a){var h=Un(a);h='link[rel="'+t+'"][href="'+h+'"]',typeof r=="string"&&(h+='[crossorigin="'+r+'"]'),Ly.has(h)||(Ly.add(h),t={rel:t,crossOrigin:r,href:a},l.querySelector(h)===null&&(a=l.createElement("link"),Nn(a,"link",t),ln(a),l.head.appendChild(a)))}}function vw(t){Vi.D(t),Uy("dns-prefetch",t,null)}function _w(t,a){Vi.C(t,a),Uy("preconnect",t,a)}function Ew(t,a,r){Vi.L(t,a,r);var l=To;if(l&&t&&a){var h='link[rel="preload"][as="'+Un(a)+'"]';a==="image"&&r&&r.imageSrcSet?(h+='[imagesrcset="'+Un(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(h+='[imagesizes="'+Un(r.imageSizes)+'"]')):h+='[href="'+Un(t)+'"]';var p=h;switch(a){case"style":p=No(t);break;case"script":p=Ro(t)}Ea.has(p)||(t=E({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:t,as:a},r),Ea.set(p,t),l.querySelector(h)!==null||a==="style"&&l.querySelector(Zl(p))||a==="script"&&l.querySelector(ec(p))||(a=l.createElement("link"),Nn(a,"link",t),ln(a),l.head.appendChild(a)))}}function Aw(t,a){Vi.m(t,a);var r=To;if(r&&t){var l=a&&typeof a.as=="string"?a.as:"script",h='link[rel="modulepreload"][as="'+Un(l)+'"][href="'+Un(t)+'"]',p=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Ro(t)}if(!Ea.has(p)&&(t=E({rel:"modulepreload",href:t},a),Ea.set(p,t),r.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(ec(p)))return}l=r.createElement("link"),Nn(l,"link",t),ln(l),r.head.appendChild(l)}}}function ww(t,a,r){Vi.S(t,a,r);var l=To;if(l&&t){var h=$a(l).hoistableStyles,p=No(t);a=a||"default";var x=h.get(p);if(!x){var A={loading:0,preload:null};if(x=l.querySelector(Zl(p)))A.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":a},r),(r=Ea.get(p))&&xp(t,r);var D=x=l.createElement("link");ln(D),Nn(D,"link",t),D._p=new Promise(function(K,ie){D.onload=K,D.onerror=ie}),D.addEventListener("load",function(){A.loading|=1}),D.addEventListener("error",function(){A.loading|=2}),A.loading|=4,ed(x,a,l)}x={type:"stylesheet",instance:x,count:1,state:A},h.set(p,x)}}}function Sw(t,a){Vi.X(t,a);var r=To;if(r&&t){var l=$a(r).hoistableScripts,h=Ro(t),p=l.get(h);p||(p=r.querySelector(ec(h)),p||(t=E({src:t,async:!0},a),(a=Ea.get(h))&&vp(t,a),p=r.createElement("script"),ln(p),Nn(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function Tw(t,a){Vi.M(t,a);var r=To;if(r&&t){var l=$a(r).hoistableScripts,h=Ro(t),p=l.get(h);p||(p=r.querySelector(ec(h)),p||(t=E({src:t,async:!0,type:"module"},a),(a=Ea.get(h))&&vp(t,a),p=r.createElement("script"),ln(p),Nn(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(h,p))}}function By(t,a,r,l){var h=(h=je.current)?Zu(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=No(r.href),r=$a(h).hoistableStyles,l=r.get(a),l||(l={type:"style",instance:null,count:0,state:null},r.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=No(r.href);var p=$a(h).hoistableStyles,x=p.get(t);if(x||(h=h.ownerDocument||h,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,x),(p=h.querySelector(Zl(t)))&&!p._p&&(x.instance=p,x.state.loading=5),Ea.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Ea.set(t,r),p||Nw(h,t,r,x.state))),a&&l===null)throw Error(s(528,""));return x}if(a&&l!==null)throw Error(s(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ro(r),r=$a(h).hoistableScripts,l=r.get(a),l||(l={type:"script",instance:null,count:0,state:null},r.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function No(t){return'href="'+Un(t)+'"'}function Zl(t){return'link[rel="stylesheet"]['+t+"]"}function Hy(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function Nw(t,a,r,l){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=t.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),Nn(a,"link",r),ln(a),t.head.appendChild(a))}function Ro(t){return'[src="'+Un(t)+'"]'}function ec(t){return"script[async]"+t}function qy(t,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var l=t.querySelector('style[data-href~="'+Un(r.href)+'"]');if(l)return a.instance=l,ln(l),l;var h=E({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ln(l),Nn(l,"style",h),ed(l,r.precedence,t),a.instance=l;case"stylesheet":h=No(r.href);var p=t.querySelector(Zl(h));if(p)return a.state.loading|=4,a.instance=p,ln(p),p;l=Hy(r),(h=Ea.get(h))&&xp(l,h),p=(t.ownerDocument||t).createElement("link"),ln(p);var x=p;return x._p=new Promise(function(A,D){x.onload=A,x.onerror=D}),Nn(p,"link",l),a.state.loading|=4,ed(p,r.precedence,t),a.instance=p;case"script":return p=Ro(r.src),(h=t.querySelector(ec(p)))?(a.instance=h,ln(h),h):(l=r,(h=Ea.get(p))&&(l=E({},r),vp(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),ln(h),Nn(h,"link",l),t.head.appendChild(h),a.instance=h);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,ed(l,r.precedence,t));return a.instance}function ed(t,a,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,p=h,x=0;x<l.length;x++){var A=l[x];if(A.dataset.precedence===a)p=A;else if(p!==h)break}p?p.parentNode.insertBefore(t,p.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(t,a.firstChild))}function xp(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function vp(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var td=null;function Fy(t,a,r){if(td===null){var l=new Map,h=td=new Map;h.set(r,l)}else h=td,l=h.get(r),l||(l=new Map,h.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),h=0;h<r.length;h++){var p=r[h];if(!(p[Fa]||p[on]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var x=p.getAttribute(a)||"";x=t+x;var A=l.get(x);A?A.push(p):l.set(x,[p])}}return l}function Gy(t,a,r){t=t.ownerDocument||t,t.head.insertBefore(r,a==="title"?t.querySelector("head > title"):null)}function Rw(t,a,r){if(r===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function $y(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Cw(t,a,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var h=No(l.href),p=a.querySelector(Zl(h));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=nd.bind(t),a.then(t,t)),r.state.loading|=4,r.instance=p,ln(p);return}p=a.ownerDocument||a,l=Hy(l),(h=Ea.get(h))&&xp(l,h),p=p.createElement("link"),ln(p);var x=p;x._p=new Promise(function(A,D){x.onload=A,x.onerror=D}),Nn(p,"link",l),r.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=nd.bind(t),a.addEventListener("load",r),a.addEventListener("error",r))}}var _p=0;function Iw(t,a){return t.stylesheets&&t.count===0&&id(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var l=setTimeout(function(){if(t.stylesheets&&id(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+a);0<t.imgBytes&&_p===0&&(_p=62500*uw());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&id(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>_p?50:800)+a);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function nd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)id(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ad=null;function id(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ad=new Map,a.forEach(jw,t),ad=null,nd.call(t))}function jw(t,a){if(!(a.state.loading&4)){var r=ad.get(t);if(r)var l=r.get(null);else{r=new Map,ad.set(t,r);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var x=h[p];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(r.set(x.dataset.precedence,x),l=x)}l&&r.set(null,l)}h=a.instance,x=h.getAttribute("data-precedence"),p=r.get(x)||l,p===l&&r.set(null,h),r.set(x,h),this.count++,l=nd.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),p?p.parentNode.insertBefore(h,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),a.state.loading|=4}}var tc={$$typeof:W,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function kw(t,a,r,l,h,p,x,A,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ha(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ha(0),this.hiddenUpdates=Ha(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Yy(t,a,r,l,h,p,x,A,D,K,ie,ce){return t=new kw(t,a,r,x,D,K,ie,ce,A),a=1,p===!0&&(a|=24),p=ta(3,null,null,a),t.current=p,p.stateNode=t,a=eh(),a.refCount++,t.pooledCache=a,a.refCount++,p.memoizedState={element:l,isDehydrated:r,cache:a},ih(p),t}function Ky(t){return t?(t=io,t):io}function Qy(t,a,r,l,h,p){h=Ky(h),l.context===null?l.context=h:l.pendingContext=h,l=hs(a),l.payload={element:r},p=p===void 0?null:p,p!==null&&(l.callback=p),r=ps(t,l,a),r!==null&&($n(r,t,a),Ol(r,t,a))}function Xy(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<a?r:a}}function Ep(t,a){Xy(t,a),(t=t.alternate)&&Xy(t,a)}function Jy(t){if(t.tag===13||t.tag===31){var a=fr(t,67108864);a!==null&&$n(a,t,67108864),Ep(t,67108864)}}function Wy(t){if(t.tag===13||t.tag===31){var a=ra();a=er(a);var r=fr(t,a);r!==null&&$n(r,t,a),Ep(t,a)}}var sd=!0;function Ow(t,a,r,l){var h=F.T;F.T=null;var p=re.p;try{re.p=2,Ap(t,a,r,l)}finally{re.p=p,F.T=h}}function Dw(t,a,r,l){var h=F.T;F.T=null;var p=re.p;try{re.p=8,Ap(t,a,r,l)}finally{re.p=p,F.T=h}}function Ap(t,a,r,l){if(sd){var h=wp(l);if(h===null)cp(t,a,l,rd,r),ex(t,l);else if(Pw(h,t,a,r,l))l.stopPropagation();else if(ex(t,l),a&4&&-1<Mw.indexOf(t)){for(;h!==null;){var p=da(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var x=Ht(p.pendingLanes);if(x!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;x;){var D=1<<31-We(x);A.entanglements[1]|=D,x&=~D}si(p),(_t&6)===0&&(Hu=et()+500,Ql(0))}}break;case 31:case 13:A=fr(p,2),A!==null&&$n(A,p,2),Fu(),Ep(p,2)}if(p=wp(l),p===null&&cp(t,a,l,rd,r),p===h)break;h=p}h!==null&&l.stopPropagation()}else cp(t,a,l,null,r)}}function wp(t){return t=fa(t),Sp(t)}var rd=null;function Sp(t){if(rd=null,t=Ga(t),t!==null){var a=u(t);if(a===null)t=null;else{var r=a.tag;if(r===13){if(t=f(a),t!==null)return t;t=null}else if(r===31){if(t=m(a),t!==null)return t;t=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return rd=t,null}function Zy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jt()){case te:return 2;case qe:return 8;case $e:case H:return 32;case xe:return 268435456;default:return 32}default:return 32}}var Tp=!1,Ss=null,Ts=null,Ns=null,nc=new Map,ac=new Map,Rs=[],Mw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ex(t,a){switch(t){case"focusin":case"focusout":Ss=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":Ns=null;break;case"pointerover":case"pointerout":nc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ac.delete(a.pointerId)}}function ic(t,a,r,l,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:a,domEventName:r,eventSystemFlags:l,nativeEvent:p,targetContainers:[h]},a!==null&&(a=da(a),a!==null&&Jy(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,h!==null&&a.indexOf(h)===-1&&a.push(h),t)}function Pw(t,a,r,l,h){switch(a){case"focusin":return Ss=ic(Ss,t,a,r,l,h),!0;case"dragenter":return Ts=ic(Ts,t,a,r,l,h),!0;case"mouseover":return Ns=ic(Ns,t,a,r,l,h),!0;case"pointerover":var p=h.pointerId;return nc.set(p,ic(nc.get(p)||null,t,a,r,l,h)),!0;case"gotpointercapture":return p=h.pointerId,ac.set(p,ic(ac.get(p)||null,t,a,r,l,h)),!0}return!1}function tx(t){var a=Ga(t.target);if(a!==null){var r=u(a);if(r!==null){if(a=r.tag,a===13){if(a=f(r),a!==null){t.blockedOn=a,Na(t.priority,function(){Wy(r)});return}}else if(a===31){if(a=m(r),a!==null){t.blockedOn=a,Na(t.priority,function(){Wy(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function od(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var r=wp(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);bl=l,r.target.dispatchEvent(l),bl=null}else return a=da(r),a!==null&&Jy(a),t.blockedOn=r,!1;a.shift()}return!0}function nx(t,a,r){od(t)&&r.delete(a)}function Vw(){Tp=!1,Ss!==null&&od(Ss)&&(Ss=null),Ts!==null&&od(Ts)&&(Ts=null),Ns!==null&&od(Ns)&&(Ns=null),nc.forEach(nx),ac.forEach(nx)}function ld(t,a){t.blockedOn===a&&(t.blockedOn=null,Tp||(Tp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vw)))}var cd=null;function ax(t){cd!==t&&(cd=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){cd===t&&(cd=null);for(var a=0;a<t.length;a+=3){var r=t[a],l=t[a+1],h=t[a+2];if(typeof l!="function"){if(Sp(l||r)===null)continue;break}var p=da(r);p!==null&&(t.splice(a,3),a-=3,wh(p,{pending:!0,data:h,method:r.method,action:l},l,h))}}))}function Co(t){function a(D){return ld(D,t)}Ss!==null&&ld(Ss,t),Ts!==null&&ld(Ts,t),Ns!==null&&ld(Ns,t),nc.forEach(a),ac.forEach(a);for(var r=0;r<Rs.length;r++){var l=Rs[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Rs.length&&(r=Rs[0],r.blockedOn===null);)tx(r),r.blockedOn===null&&Rs.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var h=r[l],p=r[l+1],x=h[xn]||null;if(typeof p=="function")x||ax(r);else if(x){var A=null;if(p&&p.hasAttribute("formAction")){if(h=p,x=p[xn]||null)A=x.formAction;else if(Sp(h)!==null)continue}else A=x.action;typeof A=="function"?r[l+1]=A:(r.splice(l,3),l-=3),ax(r)}}}function ix(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(x){return h=x})},focusReset:"manual",scroll:"manual"})}function a(){h!==null&&(h(),h=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),h!==null&&(h(),h=null)}}}function Np(t){this._internalRoot=t}ud.prototype.render=Np.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(s(409));var r=a.current,l=ra();Qy(r,l,t,a,null,null)},ud.prototype.unmount=Np.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Qy(t.current,2,null,t,null,null),Fu(),a[qa]=null}};function ud(t){this._internalRoot=t}ud.prototype.unstable_scheduleHydration=function(t){if(t){var a=Fc();t={blockedOn:null,target:t,priority:a};for(var r=0;r<Rs.length&&a!==0&&a<Rs[r].priority;r++);Rs.splice(r,0,t),r===0&&tx(t)}};var sx=e.version;if(sx!=="19.2.4")throw Error(s(527,sx,"19.2.4"));re.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=b(a),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var zw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dd.isDisabled&&dd.supportsFiber)try{ft=dd.inject(zw),J=dd}catch{}}return rc.createRoot=function(t,a){if(!o(t))throw Error(s(299));var r=!1,l="",h=fb,p=hb,x=pb;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Yy(t,1,!1,null,null,r,l,null,h,p,x,ix),t[qa]=a.current,lp(t),new Np(a)},rc.hydrateRoot=function(t,a,r){if(!o(t))throw Error(s(299));var l=!1,h="",p=fb,x=hb,A=pb,D=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(x=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.formState!==void 0&&(D=r.formState)),a=Yy(t,1,!0,a,r??null,l,h,D,p,x,A,ix),a.context=Ky(null),r=a.current,l=ra(),l=er(l),h=hs(l),h.callback=null,ps(r,h,l),r=l,a.current.lanes=r,Ws(a,r),si(a),t[qa]=a.current,lp(t),new ud(a)},rc.version="19.2.4",rc}var mx;function Qw(){if(mx)return Ip.exports;mx=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Ip.exports=Kw(),Ip.exports}var Xw=Qw();const Jw=i_(Xw);var gx="popstate";function Ww(i={}){function e(o,u){let{pathname:f="/",search:m="",hash:g=""}=Pr(o.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),Xp("",{pathname:f,search:m,hash:g},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let f=o.document.querySelector("base"),m="";if(f&&f.getAttribute("href")){let g=o.location.href,b=g.indexOf("#");m=b===-1?g:g.slice(0,b)}return m+"#"+(typeof u=="string"?u:_c(u))}function s(o,u){Sa(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return eS(e,n,s,i)}function Bt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Sa(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Zw(){return Math.random().toString(36).substring(2,10)}function bx(i,e){return{usr:i.state,key:i.key,idx:e}}function Xp(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Pr(e):e,state:n,key:e&&e.key||s||Zw()}}function _c({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Pr(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function eS(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,f=o.history,m="POP",g=null,b=v();b==null&&(b=0,f.replaceState({...f.state,idx:b},""));function v(){return(f.state||{idx:null}).idx}function E(){m="POP";let O=v(),Q=O==null?null:O-b;b=O,g&&g({action:m,location:L.location,delta:Q})}function T(O,Q){m="PUSH";let G=Xp(L.location,O,Q);n&&n(G,O),b=v()+1;let W=bx(G,b),le=L.createHref(G);try{f.pushState(W,"",le)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;o.location.assign(le)}u&&g&&g({action:m,location:L.location,delta:1})}function M(O,Q){m="REPLACE";let G=Xp(L.location,O,Q);n&&n(G,O),b=v();let W=bx(G,b),le=L.createHref(G);f.replaceState(W,"",le),u&&g&&g({action:m,location:L.location,delta:0})}function B(O){return tS(O)}let L={get action(){return m},get location(){return i(o,f)},listen(O){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(gx,E),g=O,()=>{o.removeEventListener(gx,E),g=null}},createHref(O){return e(o,O)},createURL:B,encodeLocation(O){let Q=B(O);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:T,replace:M,go(O){return f.go(O)}};return L}function tS(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Bt(n,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:_c(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function s_(i,e,n="/"){return nS(i,e,n,!1)}function nS(i,e,n,s){let o=typeof e=="string"?Pr(e):e,u=Fi(o.pathname||"/",n);if(u==null)return null;let f=r_(i);aS(f);let m=null;for(let g=0;m==null&&g<f.length;++g){let b=pS(u);m=fS(f[g],b,s)}return m}function r_(i,e=[],n=[],s="",o=!1){let u=(f,m,g=o,b)=>{let v={relativePath:b===void 0?f.path||"":b,caseSensitive:f.caseSensitive===!0,childrenIndex:m,route:f};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(s)&&g)return;Bt(v.relativePath.startsWith(s),`Absolute route path "${v.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(s.length)}let E=Bi([s,v.relativePath]),T=n.concat(v);f.children&&f.children.length>0&&(Bt(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),r_(f.children,e,T,E,g)),!(f.path==null&&!f.index)&&e.push({path:E,score:uS(E,f.index),routesMeta:T})};return i.forEach((f,m)=>{if(f.path===""||!f.path?.includes("?"))u(f,m);else for(let g of o_(f.path))u(f,m,!0,g)}),e}function o_(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let f=o_(s.join("/")),m=[];return m.push(...f.map(g=>g===""?u:[u,g].join("/"))),o&&m.push(...f),m.map(g=>i.startsWith("/")&&g===""?"/":g)}function aS(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:dS(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var iS=/^:[\w-]+$/,sS=3,rS=2,oS=1,lS=10,cS=-2,yx=i=>i==="*";function uS(i,e){let n=i.split("/"),s=n.length;return n.some(yx)&&(s+=cS),e&&(s+=rS),n.filter(o=>!yx(o)).reduce((o,u)=>o+(iS.test(u)?sS:u===""?oS:lS),s)}function dS(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function fS(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",f=[];for(let m=0;m<s.length;++m){let g=s[m],b=m===s.length-1,v=u==="/"?e:e.slice(u.length)||"/",E=Od({path:g.relativePath,caseSensitive:g.caseSensitive,end:b},v),T=g.route;if(!E&&b&&n&&!s[s.length-1].route.index&&(E=Od({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!E)return null;Object.assign(o,E.params),f.push({params:o,pathname:Bi([u,E.pathname]),pathnameBase:yS(Bi([u,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(u=Bi([u,E.pathnameBase]))}return f}function Od(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=hS(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((b,{paramName:v,isOptional:E},T)=>{if(v==="*"){let B=m[T]||"";f=u.slice(0,u.length-B.length).replace(/(.)\/+$/,"$1")}const M=m[T];return E&&!M?b[v]=void 0:b[v]=(M||"").replace(/%2F/g,"/"),b},{}),pathname:u,pathnameBase:f,pattern:i}}function hS(i,e=!1,n=!0){Sa(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,m,g)=>(s.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function pS(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sa(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Fi(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}var mS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function gS(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?Pr(i):i,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=xx(n.substring(1),"/"):u=xx(n,e)):u=e,{pathname:u,search:xS(s),hash:vS(o)}}function xx(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Dp(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bS(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rm(i){let e=bS(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Cm(i,e,n,s=!1){let o;typeof i=="string"?o=Pr(i):(o={...i},Bt(!o.pathname||!o.pathname.includes("?"),Dp("?","pathname","search",o)),Bt(!o.pathname||!o.pathname.includes("#"),Dp("#","pathname","hash",o)),Bt(!o.search||!o.search.includes("#"),Dp("#","search","hash",o)));let u=i===""||o.pathname==="",f=u?"/":o.pathname,m;if(f==null)m=n;else{let E=e.length-1;if(!s&&f.startsWith("..")){let T=f.split("/");for(;T[0]==="..";)T.shift(),E-=1;o.pathname=T.join("/")}m=E>=0?e[E]:"/"}let g=gS(o,m),b=f&&f!=="/"&&f.endsWith("/"),v=(u||f===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(b||v)&&(g.pathname+="/"),g}var Bi=i=>i.join("/").replace(/\/\/+/g,"/"),yS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),xS=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,vS=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,_S=class{constructor(i,e,n,s=!1){this.status=i,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function ES(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function AS(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var l_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function c_(i,e){let n=i;if(typeof n!="string"||!mS.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,o=!1;if(l_)try{let u=new URL(window.location.href),f=n.startsWith("//")?new URL(u.protocol+n):new URL(n),m=Fi(f.pathname,e);f.origin===u.origin&&m!=null?n=m+f.search+f.hash:o=!0}catch{Sa(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var u_=["POST","PUT","PATCH","DELETE"];new Set(u_);var wS=["GET",...u_];new Set(wS);var Jo=w.createContext(null);Jo.displayName="DataRouter";var nf=w.createContext(null);nf.displayName="DataRouterState";var SS=w.createContext(!1),d_=w.createContext({isTransitioning:!1});d_.displayName="ViewTransition";var TS=w.createContext(new Map);TS.displayName="Fetchers";var NS=w.createContext(null);NS.displayName="Await";var ua=w.createContext(null);ua.displayName="Navigation";var Ic=w.createContext(null);Ic.displayName="Location";var gi=w.createContext({outlet:null,matches:[],isDataRoute:!1});gi.displayName="Route";var Im=w.createContext(null);Im.displayName="RouteError";var f_="REACT_ROUTER_ERROR",RS="REDIRECT",CS="ROUTE_ERROR_RESPONSE";function IS(i){if(i.startsWith(`${f_}:${RS}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function jS(i){if(i.startsWith(`${f_}:${CS}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new _S(e.status,e.statusText,e.data)}catch{}}function kS(i,{relative:e}={}){Bt(Wo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=w.useContext(ua),{hash:o,pathname:u,search:f}=jc(i,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:Bi([n,u])),s.createHref({pathname:m,search:f,hash:o})}function Wo(){return w.useContext(Ic)!=null}function Ys(){return Bt(Wo(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Ic).location}var h_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function p_(i){w.useContext(ua).static||w.useLayoutEffect(i)}function Ji(){let{isDataRoute:i}=w.useContext(gi);return i?GS():OS()}function OS(){Bt(Wo(),"useNavigate() may be used only in the context of a <Router> component.");let i=w.useContext(Jo),{basename:e,navigator:n}=w.useContext(ua),{matches:s}=w.useContext(gi),{pathname:o}=Ys(),u=JSON.stringify(Rm(s)),f=w.useRef(!1);return p_(()=>{f.current=!0}),w.useCallback((g,b={})=>{if(Sa(f.current,h_),!f.current)return;if(typeof g=="number"){n.go(g);return}let v=Cm(g,JSON.parse(u),o,b.relative==="path");i==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Bi([e,v.pathname])),(b.replace?n.replace:n.push)(v,b.state,b)},[e,n,u,o,i])}w.createContext(null);function jc(i,{relative:e}={}){let{matches:n}=w.useContext(gi),{pathname:s}=Ys(),o=JSON.stringify(Rm(n));return w.useMemo(()=>Cm(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function DS(i,e){return m_(i,e)}function m_(i,e,n,s,o){Bt(Wo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=w.useContext(ua),{matches:f}=w.useContext(gi),m=f[f.length-1],g=m?m.params:{},b=m?m.pathname:"/",v=m?m.pathnameBase:"/",E=m&&m.route;{let G=E&&E.path||"";b_(b,!E||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let T=Ys(),M;if(e){let G=typeof e=="string"?Pr(e):e;Bt(v==="/"||G.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${G.pathname}" was given in the \`location\` prop.`),M=G}else M=T;let B=M.pathname||"/",L=B;if(v!=="/"){let G=v.replace(/^\//,"").split("/");L="/"+B.replace(/^\//,"").split("/").slice(G.length).join("/")}let O=s_(i,{pathname:L});Sa(E||O!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),Sa(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=LS(O&&O.map(G=>Object.assign({},G,{params:Object.assign({},g,G.params),pathname:Bi([v,u.encodeLocation?u.encodeLocation(G.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?v:Bi([v,u.encodeLocation?u.encodeLocation(G.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathnameBase])})),f,n,s,o);return e&&Q?w.createElement(Ic.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...M},navigationType:"POP"}},Q):Q}function MS(){let i=FS(),e=ES(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},f=null;return console.error("Error handled by React Router default ErrorBoundary:",i),f=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:u},"ErrorBoundary")," or"," ",w.createElement("code",{style:u},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:o},n):null,f)}var PS=w.createElement(MS,null),g_=class extends w.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const n=jS(i.digest);n&&(i=n)}let e=i!==void 0?w.createElement(gi.Provider,{value:this.props.routeContext},w.createElement(Im.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?w.createElement(VS,{error:i},e):e}};g_.contextType=SS;var Mp=new WeakMap;function VS({children:i,error:e}){let{basename:n}=w.useContext(ua);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=IS(e.digest);if(s){let o=Mp.get(e);if(o)throw o;let u=c_(s.location,n);if(l_&&!Mp.get(e))if(u.isExternal||s.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:s.replace}));throw Mp.set(e,f),f}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return i}function zS({routeContext:i,match:e,children:n}){let s=w.useContext(Jo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(gi.Provider,{value:i},n)}function LS(i,e=[],n=null,s=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let u=i,f=n?.errors;if(f!=null){let v=u.findIndex(E=>E.route.id&&f?.[E.route.id]!==void 0);Bt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,v+1))}let m=!1,g=-1;if(n)for(let v=0;v<u.length;v++){let E=u[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=v),E.route.id){let{loaderData:T,errors:M}=n,B=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!M||M[E.route.id]===void 0);if(E.route.lazy||B){m=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let b=n&&s?(v,E)=>{s(v,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:AS(n.matches),errorInfo:E})}:void 0;return u.reduceRight((v,E,T)=>{let M,B=!1,L=null,O=null;n&&(M=f&&E.route.id?f[E.route.id]:void 0,L=E.route.errorElement||PS,m&&(g<0&&T===0?(b_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),B=!0,O=null):g===T&&(B=!0,O=E.route.hydrateFallbackElement||null)));let Q=e.concat(u.slice(0,T+1)),G=()=>{let W;return M?W=L:B?W=O:E.route.Component?W=w.createElement(E.route.Component,null):E.route.element?W=E.route.element:W=v,w.createElement(zS,{match:E,routeContext:{outlet:v,matches:Q,isDataRoute:n!=null},children:W})};return n&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?w.createElement(g_,{location:n.location,revalidation:n.revalidation,component:L,error:M,children:G(),routeContext:{outlet:null,matches:Q,isDataRoute:!0},onError:b}):G()},null)}function jm(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function US(i){let e=w.useContext(Jo);return Bt(e,jm(i)),e}function BS(i){let e=w.useContext(nf);return Bt(e,jm(i)),e}function HS(i){let e=w.useContext(gi);return Bt(e,jm(i)),e}function km(i){let e=HS(i),n=e.matches[e.matches.length-1];return Bt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function qS(){return km("useRouteId")}function FS(){let i=w.useContext(Im),e=BS("useRouteError"),n=km("useRouteError");return i!==void 0?i:e.errors?.[n]}function GS(){let{router:i}=US("useNavigate"),e=km("useNavigate"),n=w.useRef(!1);return p_(()=>{n.current=!0}),w.useCallback(async(o,u={})=>{Sa(n.current,h_),n.current&&(typeof o=="number"?await i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var vx={};function b_(i,e,n){!e&&!vx[i]&&(vx[i]=!0,Sa(!1,n))}w.memo($S);function $S({routes:i,future:e,state:n,onError:s}){return m_(i,void 0,n,s,e)}function y_({to:i,replace:e,state:n,relative:s}){Bt(Wo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=w.useContext(ua);Sa(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=w.useContext(gi),{pathname:f}=Ys(),m=Ji(),g=Cm(i,Rm(u),f,s==="path"),b=JSON.stringify(g);return w.useEffect(()=>{m(JSON.parse(b),{replace:e,state:n,relative:s})},[m,b,s,e,n]),null}function ri(i){Bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function YS({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1,unstable_useTransitions:f}){Bt(!Wo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=i.replace(/^\/*/,"/"),g=w.useMemo(()=>({basename:m,navigator:o,static:u,unstable_useTransitions:f,future:{}}),[m,o,u,f]);typeof n=="string"&&(n=Pr(n));let{pathname:b="/",search:v="",hash:E="",state:T=null,key:M="default"}=n,B=w.useMemo(()=>{let L=Fi(b,m);return L==null?null:{location:{pathname:L,search:v,hash:E,state:T,key:M},navigationType:s}},[m,b,v,E,T,M,s]);return Sa(B!=null,`<Router basename="${m}"> is not able to match the URL "${b}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),B==null?null:w.createElement(ua.Provider,{value:g},w.createElement(Ic.Provider,{children:e,value:B}))}function KS({children:i,location:e}){return DS(Jp(i),e)}function Jp(i,e=[]){let n=[];return w.Children.forEach(i,(s,o)=>{if(!w.isValidElement(s))return;let u=[...e,o];if(s.type===w.Fragment){n.push.apply(n,Jp(s.props.children,u));return}Bt(s.type===ri,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Bt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let f={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(f.children=Jp(s.props.children,u)),n.push(f)}),n}var vd="get",_d="application/x-www-form-urlencoded";function af(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function QS(i){return af(i)&&i.tagName.toLowerCase()==="button"}function XS(i){return af(i)&&i.tagName.toLowerCase()==="form"}function JS(i){return af(i)&&i.tagName.toLowerCase()==="input"}function WS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function ZS(i,e){return i.button===0&&(!e||e==="_self")&&!WS(i)}var fd=null;function eT(){if(fd===null)try{new FormData(document.createElement("form"),0),fd=!1}catch{fd=!0}return fd}var tT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Pp(i){return i!=null&&!tT.has(i)?(Sa(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_d}"`),null):i}function nT(i,e){let n,s,o,u,f;if(XS(i)){let m=i.getAttribute("action");s=m?Fi(m,e):null,n=i.getAttribute("method")||vd,o=Pp(i.getAttribute("enctype"))||_d,u=new FormData(i)}else if(QS(i)||JS(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||m.getAttribute("action");if(s=g?Fi(g,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||vd,o=Pp(i.getAttribute("formenctype"))||Pp(m.getAttribute("enctype"))||_d,u=new FormData(m,i),!eT()){let{name:b,type:v,value:E}=i;if(v==="image"){let T=b?`${b}.`:"";u.append(`${T}x`,"0"),u.append(`${T}y`,"0")}else b&&u.append(b,E)}}else{if(af(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=vd,s=null,o=_d,f=i}return u&&o==="text/plain"&&(f=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Om(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function aT(i,e,n,s){let o=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${s}`:o.pathname=`${o.pathname}.${s}`:o.pathname==="/"?o.pathname=`_root.${s}`:e&&Fi(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${s}`,o}async function iT(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sT(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function rT(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await iT(u,n);return f.links?f.links():[]}return[]}));return uT(s.flat(1).filter(sT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function _x(i,e,n,s,o,u){let f=(g,b)=>n[b]?g.route.id!==n[b].route.id:!0,m=(g,b)=>n[b].pathname!==g.pathname||n[b].route.path?.endsWith("*")&&n[b].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,b)=>f(g,b)||m(g,b)):u==="data"?e.filter((g,b)=>{let v=s.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(f(g,b)||m(g,b))return!0;if(g.route.shouldRevalidate){let E=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function oT(i,e,{includeHydrateFallback:n}={}){return lT(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function lT(i){return[...new Set(i)]}function cT(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function uT(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(cT(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function x_(){let i=w.useContext(Jo);return Om(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function dT(){let i=w.useContext(nf);return Om(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Dm=w.createContext(void 0);Dm.displayName="FrameworkContext";function v_(){let i=w.useContext(Dm);return Om(i,"You must render this element inside a <HydratedRouter> element"),i}function fT(i,e){let n=w.useContext(Dm),[s,o]=w.useState(!1),[u,f]=w.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:b,onMouseLeave:v,onTouchStart:E}=e,T=w.useRef(null);w.useEffect(()=>{if(i==="render"&&f(!0),i==="viewport"){let L=Q=>{Q.forEach(G=>{f(G.isIntersecting)})},O=new IntersectionObserver(L,{threshold:.5});return T.current&&O.observe(T.current),()=>{O.disconnect()}}},[i]),w.useEffect(()=>{if(s){let L=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(L)}}},[s]);let M=()=>{o(!0)},B=()=>{o(!1),f(!1)};return n?i!=="intent"?[u,T,{}]:[u,T,{onFocus:oc(m,M),onBlur:oc(g,B),onMouseEnter:oc(b,M),onMouseLeave:oc(v,B),onTouchStart:oc(E,M)}]:[!1,T,{}]}function oc(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function hT({page:i,...e}){let{router:n}=x_(),s=w.useMemo(()=>s_(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?w.createElement(mT,{page:i,matches:s,...e}):null}function pT(i){let{manifest:e,routeModules:n}=v_(),[s,o]=w.useState([]);return w.useEffect(()=>{let u=!1;return rT(i,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[i,e,n]),s}function mT({page:i,matches:e,...n}){let s=Ys(),{future:o,manifest:u,routeModules:f}=v_(),{basename:m}=x_(),{loaderData:g,matches:b}=dT(),v=w.useMemo(()=>_x(i,e,b,u,s,"data"),[i,e,b,u,s]),E=w.useMemo(()=>_x(i,e,b,u,s,"assets"),[i,e,b,u,s]),T=w.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let L=new Set,O=!1;if(e.forEach(G=>{let W=u.routes[G.route.id];!W||!W.hasLoader||(!v.some(le=>le.route.id===G.route.id)&&G.route.id in g&&f[G.route.id]?.shouldRevalidate||W.hasClientLoader?O=!0:L.add(G.route.id))}),L.size===0)return[];let Q=aT(i,m,o.unstable_trailingSlashAwareDataRequests,"data");return O&&L.size>0&&Q.searchParams.set("_routes",e.filter(G=>L.has(G.route.id)).map(G=>G.route.id).join(",")),[Q.pathname+Q.search]},[m,o.unstable_trailingSlashAwareDataRequests,g,s,u,v,e,i,f]),M=w.useMemo(()=>oT(E,u),[E,u]),B=pT(E);return w.createElement(w.Fragment,null,T.map(L=>w.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...n})),M.map(L=>w.createElement("link",{key:L,rel:"modulepreload",href:L,...n})),B.map(({key:L,link:O})=>w.createElement("link",{key:L,nonce:n.nonce,...O,crossOrigin:O.crossOrigin??n.crossOrigin})))}function gT(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var bT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bT&&(window.__reactRouterVersion="7.13.0")}catch{}function yT({basename:i,children:e,unstable_useTransitions:n,window:s}){let o=w.useRef();o.current==null&&(o.current=Ww({window:s,v5Compat:!0}));let u=o.current,[f,m]=w.useState({action:u.action,location:u.location}),g=w.useCallback(b=>{n===!1?m(b):w.startTransition(()=>m(b))},[n]);return w.useLayoutEffect(()=>u.listen(g),[u,g]),w.createElement(YS,{basename:i,children:e,location:f.location,navigationType:f.action,navigator:u,unstable_useTransitions:n})}var __=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,E_=w.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:f,state:m,target:g,to:b,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:T,...M},B){let{basename:L,unstable_useTransitions:O}=w.useContext(ua),Q=typeof b=="string"&&__.test(b),G=c_(b,L);b=G.to;let W=kS(b,{relative:o}),[le,he,pe]=fT(s,M),I=ET(b,{replace:f,state:m,target:g,preventScrollReset:v,relative:o,viewTransition:E,unstable_defaultShouldRevalidate:T,unstable_useTransitions:O});function C(P){e&&e(P),P.defaultPrevented||I(P)}let k=w.createElement("a",{...M,...pe,href:G.absoluteURL||W,onClick:G.isExternal||u?e:C,ref:gT(B,he),target:g,"data-discover":!Q&&n==="render"?"true":void 0});return le&&!Q?w.createElement(w.Fragment,null,k,w.createElement(hT,{page:W})):k});E_.displayName="Link";var xT=w.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:f,viewTransition:m,children:g,...b},v){let E=jc(f,{relative:b.relative}),T=Ys(),M=w.useContext(nf),{navigator:B,basename:L}=w.useContext(ua),O=M!=null&&NT(E)&&m===!0,Q=B.encodeLocation?B.encodeLocation(E).pathname:E.pathname,G=T.pathname,W=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;n||(G=G.toLowerCase(),W=W?W.toLowerCase():null,Q=Q.toLowerCase()),W&&L&&(W=Fi(W,L)||W);const le=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let he=G===Q||!o&&G.startsWith(Q)&&G.charAt(le)==="/",pe=W!=null&&(W===Q||!o&&W.startsWith(Q)&&W.charAt(Q.length)==="/"),I={isActive:he,isPending:pe,isTransitioning:O},C=he?e:void 0,k;typeof s=="function"?k=s(I):k=[s,he?"active":null,pe?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let P=typeof u=="function"?u(I):u;return w.createElement(E_,{...b,"aria-current":C,className:k,ref:v,style:P,to:f,viewTransition:m},typeof g=="function"?g(I):g)});xT.displayName="NavLink";var vT=w.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:f=vd,action:m,onSubmit:g,relative:b,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:T,...M},B)=>{let{unstable_useTransitions:L}=w.useContext(ua),O=ST(),Q=TT(m,{relative:b}),G=f.toLowerCase()==="get"?"get":"post",W=typeof m=="string"&&__.test(m),le=he=>{if(g&&g(he),he.defaultPrevented)return;he.preventDefault();let pe=he.nativeEvent.submitter,I=pe?.getAttribute("formmethod")||f,C=()=>O(pe||he.currentTarget,{fetcherKey:e,method:I,navigate:n,replace:o,state:u,relative:b,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:T});L&&n!==!1?w.startTransition(()=>C()):C()};return w.createElement("form",{ref:B,method:G,action:Q,onSubmit:s?g:le,...M,"data-discover":!W&&i==="render"?"true":void 0})});vT.displayName="Form";function _T(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function A_(i){let e=w.useContext(Jo);return Bt(e,_T(i)),e}function ET(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:g}={}){let b=Ji(),v=Ys(),E=jc(i,{relative:u});return w.useCallback(T=>{if(ZS(T,e)){T.preventDefault();let M=n!==void 0?n:_c(v)===_c(E),B=()=>b(i,{replace:M,state:s,preventScrollReset:o,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:m});g?w.startTransition(()=>B()):B()}},[v,b,E,n,s,e,i,o,u,f,m,g])}var AT=0,wT=()=>`__${String(++AT)}__`;function ST(){let{router:i}=A_("useSubmit"),{basename:e}=w.useContext(ua),n=qS(),s=i.fetch,o=i.navigate;return w.useCallback(async(u,f={})=>{let{action:m,method:g,encType:b,formData:v,body:E}=nT(u,e);if(f.navigate===!1){let T=f.fetcherKey||wT();await s(T,n,f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:v,body:E,formMethod:f.method||g,formEncType:f.encType||b,flushSync:f.flushSync})}else await o(f.action||m,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:v,body:E,formMethod:f.method||g,formEncType:f.encType||b,replace:f.replace,state:f.state,fromRouteId:n,flushSync:f.flushSync,viewTransition:f.viewTransition})},[s,o,e,n])}function TT(i,{relative:e}={}){let{basename:n}=w.useContext(ua),s=w.useContext(gi);Bt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...jc(i||".",{relative:e})},f=Ys();if(i==null){u.search=f.search;let m=new URLSearchParams(u.search),g=m.getAll("index");if(g.some(v=>v==="")){m.delete("index"),g.filter(E=>E).forEach(E=>m.append("index",E));let v=m.toString();u.search=v?`?${v}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Bi([n,u.pathname])),_c(u)}function NT(i,{relative:e}={}){let n=w.useContext(d_);Bt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=A_("useViewTransitionState"),o=jc(i,{relative:e});if(!n.isTransitioning)return!1;let u=Fi(n.currentLocation.pathname,s)||n.currentLocation.pathname,f=Fi(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Od(o.pathname,f)!=null||Od(o.pathname,u)!=null}const RT=()=>{};var Ex={};const w_=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},CT=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],f=i[n++],m=i[n++],g=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=i[n++],f=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},S_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],f=o+1<i.length,m=f?i[o+1]:0,g=o+2<i.length,b=g?i[o+2]:0,v=u>>2,E=(u&3)<<4|m>>4;let T=(m&15)<<2|b>>6,M=b&63;g||(M=64,f||(T=64)),s.push(n[v],n[E],n[T],n[M])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(w_(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):CT(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const b=o<i.length?n[i.charAt(o)]:64;++o;const E=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||m==null||b==null||E==null)throw new IT;const T=u<<2|m>>4;if(s.push(T),b!==64){const M=m<<4&240|b>>2;if(s.push(M),E!==64){const B=b<<6&192|E;s.push(B)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class IT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jT=function(i){const e=w_(i);return S_.encodeByteArray(e,!0)},Dd=function(i){return jT(i).replace(/\./g,"")},T_=function(i){try{return S_.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const OT=()=>kT().__FIREBASE_DEFAULTS__,DT=()=>{if(typeof process>"u"||typeof Ex>"u")return;const i=Ex.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},MT=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&T_(i[1]);return e&&JSON.parse(e)},sf=()=>{try{return RT()||OT()||DT()||MT()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},N_=i=>sf()?.emulatorHosts?.[i],R_=i=>{const e=N_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},C_=()=>sf()?.config,I_=i=>sf()?.[`_${i}`];class PT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Vr(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Mm(i){return(await fetch(i,{credentials:"include"})).ok}function j_(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Dd(JSON.stringify(n)),Dd(JSON.stringify(f)),""].join(".")}const mc={};function VT(){const i={prod:[],emulator:[]};for(const e of Object.keys(mc))mc[e]?i.emulator.push(e):i.prod.push(e);return i}function zT(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Ax=!1;function Pm(i,e){if(typeof window>"u"||typeof document>"u"||!Vr(window.location.host)||mc[i]===e||mc[i]||Ax)return;mc[i]=e;function n(T){return`__firebase__banner__${T}`}const s="__firebase__banner",u=VT().prod.length>0;function f(){const T=document.getElementById(s);T&&T.remove()}function m(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,M){T.setAttribute("width","24"),T.setAttribute("id",M),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function b(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Ax=!0,f()},T}function v(T,M){T.setAttribute("id",M),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=zT(s),M=n("text"),B=document.getElementById(M)||document.createElement("span"),L=n("learnmore"),O=document.getElementById(L)||document.createElement("a"),Q=n("preprendIcon"),G=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const W=T.element;m(W),v(O,L);const le=b();g(G,Q),W.append(G,B,O,le),document.body.appendChild(W)}u?(B.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function Vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vn())}function UT(){const i=sf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HT(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function qT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FT(){const i=Vn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function GT(){return!UT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $T(){try{return typeof indexedDB=="object"}catch{return!1}}function YT(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const KT="FirebaseError";class bi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=KT,Object.setPrototypeOf(this,bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kc.prototype.create)}}class kc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?QT(u,s):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new bi(o,m,s)}}function QT(i,e){return i.replace(XT,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const XT=/\{\$([^}]+)}/g;function JT(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Gi(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],f=e[o];if(wx(u)&&wx(f)){if(!Gi(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function wx(i){return i!==null&&typeof i=="object"}function Oc(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function cc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function uc(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function WT(i,e){const n=new ZT(i,e);return n.subscribe.bind(n)}class ZT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");eN(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Vp),o.error===void 0&&(o.error=Vp),o.complete===void 0&&(o.complete=Vp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eN(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Vp(){}function nn(i){return i&&i._delegate?i._delegate:i}class Us{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Sr="[DEFAULT]";class tN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new PT;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aN(e))try{this.getOrInitializeService({instanceIdentifier:Sr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Sr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sr){return this.instances.has(e)}getOptions(e=Sr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:nN(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Sr){return this.component?this.component.multipleInstances?e:Sr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nN(i){return i===Sr?void 0:i}function aN(i){return i.instantiationMode==="EAGER"}class iN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var rt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(rt||(rt={}));const sN={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},rN=rt.INFO,oN={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},lN=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=oN[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vm{constructor(e){this.name=e,this._logLevel=rN,this._logHandler=lN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const cN=(i,e)=>e.some(n=>i instanceof n);let Sx,Tx;function uN(){return Sx||(Sx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dN(){return Tx||(Tx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const k_=new WeakMap,Wp=new WeakMap,O_=new WeakMap,zp=new WeakMap,zm=new WeakMap;function fN(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",f)},u=()=>{n(Ps(i.result)),o()},f=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&k_.set(n,i)}).catch(()=>{}),zm.set(e,i),e}function hN(i){if(Wp.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",f),i.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",f),i.addEventListener("abort",f)});Wp.set(i,e)}let Zp={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Wp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||O_.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ps(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function pN(i){Zp=i(Zp)}function mN(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Lp(this),e,...n);return O_.set(s,e.sort?e.sort():[e]),Ps(s)}:dN().includes(i)?function(...e){return i.apply(Lp(this),e),Ps(k_.get(this))}:function(...e){return Ps(i.apply(Lp(this),e))}}function gN(i){return typeof i=="function"?mN(i):(i instanceof IDBTransaction&&hN(i),cN(i,uN())?new Proxy(i,Zp):i)}function Ps(i){if(i instanceof IDBRequest)return fN(i);if(zp.has(i))return zp.get(i);const e=gN(i);return e!==i&&(zp.set(i,e),zm.set(e,i)),e}const Lp=i=>zm.get(i);function bN(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(i,e),m=Ps(f);return s&&f.addEventListener("upgradeneeded",g=>{s(Ps(f.result),g.oldVersion,g.newVersion,Ps(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),m}const yN=["get","getKey","getAll","getAllKeys","count"],xN=["put","add","delete","clear"],Up=new Map;function Nx(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Up.get(e))return Up.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=xN.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||yN.includes(n)))return;const u=async function(f,...m){const g=this.transaction(f,o?"readwrite":"readonly");let b=g.store;return s&&(b=b.index(m.shift())),(await Promise.all([b[n](...m),o&&g.done]))[0]};return Up.set(e,u),u}pN(i=>({...i,get:(e,n,s)=>Nx(e,n)||i.get(e,n,s),has:(e,n)=>!!Nx(e,n)||i.has(e,n)}));class vN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_N(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function _N(i){return i.getComponent()?.type==="VERSION"}const em="@firebase/app",Rx="0.14.7";const $i=new Vm("@firebase/app"),EN="@firebase/app-compat",AN="@firebase/analytics-compat",wN="@firebase/analytics",SN="@firebase/app-check-compat",TN="@firebase/app-check",NN="@firebase/auth",RN="@firebase/auth-compat",CN="@firebase/database",IN="@firebase/data-connect",jN="@firebase/database-compat",kN="@firebase/functions",ON="@firebase/functions-compat",DN="@firebase/installations",MN="@firebase/installations-compat",PN="@firebase/messaging",VN="@firebase/messaging-compat",zN="@firebase/performance",LN="@firebase/performance-compat",UN="@firebase/remote-config",BN="@firebase/remote-config-compat",HN="@firebase/storage",qN="@firebase/storage-compat",FN="@firebase/firestore",GN="@firebase/ai",$N="@firebase/firestore-compat",YN="firebase",KN="12.8.0";const tm="[DEFAULT]",QN={[em]:"fire-core",[EN]:"fire-core-compat",[wN]:"fire-analytics",[AN]:"fire-analytics-compat",[TN]:"fire-app-check",[SN]:"fire-app-check-compat",[NN]:"fire-auth",[RN]:"fire-auth-compat",[CN]:"fire-rtdb",[IN]:"fire-data-connect",[jN]:"fire-rtdb-compat",[kN]:"fire-fn",[ON]:"fire-fn-compat",[DN]:"fire-iid",[MN]:"fire-iid-compat",[PN]:"fire-fcm",[VN]:"fire-fcm-compat",[zN]:"fire-perf",[LN]:"fire-perf-compat",[UN]:"fire-rc",[BN]:"fire-rc-compat",[HN]:"fire-gcs",[qN]:"fire-gcs-compat",[FN]:"fire-fst",[$N]:"fire-fst-compat",[GN]:"fire-vertex","fire-js":"fire-js",[YN]:"fire-js-all"};const Bo=new Map,nm=new Map,am=new Map;function Cx(i,e){try{i.container.addComponent(e)}catch(n){$i.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Ir(i){const e=i.name;if(am.has(e))return $i.debug(`There were multiple attempts to register component ${e}.`),!1;am.set(e,i);for(const n of Bo.values())Cx(n,i);for(const n of nm.values())Cx(n,i);return!0}function rf(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function oa(i){return i==null?!1:i.settings!==void 0}const XN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vs=new kc("app","Firebase",XN);class JN{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vs.create("app-deleted",{appName:this._name})}}const zr=KN;function Lm(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:tm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Vs.create("bad-app-name",{appName:String(o)});if(n||(n=C_()),!n)throw Vs.create("no-options");const u=Bo.get(o);if(u){if(Gi(n,u.options)&&Gi(s,u.config))return u;throw Vs.create("duplicate-app",{appName:o})}const f=new iN(o);for(const g of am.values())f.addComponent(g);const m=new JN(n,s,f);return Bo.set(o,m),m}function Um(i=tm){const e=Bo.get(i);if(!e&&i===tm&&C_())return Lm();if(!e)throw Vs.create("no-app",{appName:i});return e}async function WN(i){let e=!1;const n=i.name;Bo.has(n)?(e=!0,Bo.delete(n)):nm.has(n)&&i.decRefCount()<=0&&(nm.delete(n),e=!0),e&&(await Promise.all(i.container.getProviders().map(s=>s.delete())),i.isDeleted=!0)}function li(i,e,n){let s=QN[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$i.warn(f.join(" "));return}Ir(new Us(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const ZN="firebase-heartbeat-database",e2=1,Ec="firebase-heartbeat-store";let Bp=null;function D_(){return Bp||(Bp=bN(ZN,e2,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Ec)}catch(n){console.warn(n)}}}}).catch(i=>{throw Vs.create("idb-open",{originalErrorMessage:i.message})})),Bp}async function t2(i){try{const n=(await D_()).transaction(Ec),s=await n.objectStore(Ec).get(M_(i));return await n.done,s}catch(e){if(e instanceof bi)$i.warn(e.message);else{const n=Vs.create("idb-get",{originalErrorMessage:e?.message});$i.warn(n.message)}}}async function Ix(i,e){try{const s=(await D_()).transaction(Ec,"readwrite");await s.objectStore(Ec).put(e,M_(i)),await s.done}catch(n){if(n instanceof bi)$i.warn(n.message);else{const s=Vs.create("idb-set",{originalErrorMessage:n?.message});$i.warn(s.message)}}}function M_(i){return`${i.name}!${i.options.appId}`}const n2=1024,a2=30;class i2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new r2(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>a2){const o=o2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){$i.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=jx(),{heartbeatsToSend:n,unsentEntries:s}=s2(this._heartbeatsCache.heartbeats),o=Dd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return $i.warn(e),""}}}function jx(){return new Date().toISOString().substring(0,10)}function s2(i,e=n2){const n=[];let s=i.slice();for(const o of i){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),kx(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),kx(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class r2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $T()?YT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await t2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ix(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Ix(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function kx(i){return Dd(JSON.stringify({version:2,heartbeats:i})).length}function o2(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function l2(i){Ir(new Us("platform-logger",e=>new vN(e),"PRIVATE")),Ir(new Us("heartbeat",e=>new i2(e),"PRIVATE")),li(em,Rx,i),li(em,Rx,"esm2020"),li("fire-js","")}l2("");var c2="firebase",u2="12.8.0";li(c2,u2,"app");function P_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const d2=P_,V_=new kc("auth","Firebase",P_());const Md=new Vm("@firebase/auth");function f2(i,...e){Md.logLevel<=rt.WARN&&Md.warn(`Auth (${zr}): ${i}`,...e)}function Ed(i,...e){Md.logLevel<=rt.ERROR&&Md.error(`Auth (${zr}): ${i}`,...e)}function Ua(i,...e){throw Bm(i,...e)}function ci(i,...e){return Bm(i,...e)}function z_(i,e,n){const s={...d2(),[e]:n};return new kc("auth","Firebase",s).create(e,{appName:i.name})}function Hi(i){return z_(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bm(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return V_.create(i,...e)}function ze(i,e,...n){if(!i)throw Bm(e,...n)}function Li(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Ed(e),new Error(e)}function Yi(i,e){i||Li(e)}function im(){return typeof self<"u"&&self.location?.href||""}function h2(){return Ox()==="http:"||Ox()==="https:"}function Ox(){return typeof self<"u"&&self.location?.protocol||null}function p2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(h2()||HT()||"connection"in navigator)?navigator.onLine:!0}function m2(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Dc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yi(n>e,"Short delay should be less than long delay!"),this.isMobile=LT()||qT()}get(){return p2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Hm(i,e){Yi(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class L_{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const g2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const b2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],y2=new Dc(3e4,6e4);function Ks(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Wi(i,e,n,s,o={}){return U_(i,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const m=Oc({key:i.config.apiKey,...f}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const b={method:e,headers:g,...u};return BT()||(b.referrerPolicy="no-referrer"),i.emulatorConfig&&Vr(i.emulatorConfig.host)&&(b.credentials="include"),L_.fetch()(await B_(i,i.config.apiHost,n,m),b)})}async function U_(i,e,n){i._canInitEmulator=!1;const s={...g2,...e};try{const o=new v2(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw hd(i,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[g,b]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw hd(i,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw hd(i,"email-already-in-use",f);if(g==="USER_DISABLED")throw hd(i,"user-disabled",f);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw z_(i,v,b);Ua(i,v)}}catch(o){if(o instanceof bi)throw o;Ua(i,"network-request-failed",{message:String(o)})}}async function Mc(i,e,n,s,o={}){const u=await Wi(i,e,n,s,o);return"mfaPendingCredential"in u&&Ua(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function B_(i,e,n,s){const o=`${e}${n}?${s}`,u=i,f=u.config.emulator?Hm(i.config,o):`${i.config.apiScheme}://${o}`;return b2.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function x2(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class v2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ci(this.auth,"network-request-failed")),y2.get())})}}function hd(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=ci(i,e,s);return o.customData._tokenResponse=n,o}function Dx(i){return i!==void 0&&i.enterprise!==void 0}class _2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return x2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function E2(i,e){return Wi(i,"GET","/v2/recaptchaConfig",Ks(i,e))}async function A2(i,e){return Wi(i,"POST","/v1/accounts:delete",e)}async function Pd(i,e){return Wi(i,"POST","/v1/accounts:lookup",e)}function gc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function w2(i,e=!1){const n=nn(i),s=await n.getIdToken(e),o=qm(s);ze(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:gc(Hp(o.auth_time)),issuedAtTime:gc(Hp(o.iat)),expirationTime:gc(Hp(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Hp(i){return Number(i)*1e3}function qm(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Ed("JWT malformed, contained fewer than 3 sections"),null;try{const o=T_(n);return o?JSON.parse(o):(Ed("Failed to decode base64 JWT payload"),null)}catch(o){return Ed("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Mx(i){const e=qm(i);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ho(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof bi&&S2(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function S2({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class T2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class sm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gc(this.lastLoginAt),this.creationTime=gc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Vd(i){const e=i.auth,n=await i.getIdToken(),s=await Ho(i,Pd(e,{idToken:n}));ze(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?H_(o.providerUserInfo):[],f=R2(i.providerData,u),m=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!f?.length,b=m?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new sm(o.createdAt,o.lastLoginAt),isAnonymous:b};Object.assign(i,v)}async function N2(i){const e=nn(i);await Vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function R2(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function H_(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function C2(i,e){const n=await U_(i,{},async()=>{const s=Oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,f=await B_(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return i.emulatorConfig&&Vr(i.emulatorConfig.host)&&(g.credentials="include"),L_.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function I2(i,e){return Wi(i,"POST","/v2/accounts:revokeToken",Ks(i,e))}class Mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const n=Mx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await C2(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new Mo;return s&&(ze(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(ze(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(ze(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mo,this.toJSON())}_performRefresh(){return Li("not implemented")}}function Is(i,e){ze(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Va{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new T2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new sm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ho(this,this.stsTokenManager.getToken(this.auth,e));return ze(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return w2(this,e)}reload(){return N2(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Va({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Vd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oa(this.auth.app))return Promise.reject(Hi(this.auth));const e=await this.getIdToken();return await Ho(this,A2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,b=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:M,providerData:B,stsTokenManager:L}=n;ze(E&&L,e,"internal-error");const O=Mo.fromJSON(this.name,L);ze(typeof E=="string",e,"internal-error"),Is(s,e.name),Is(o,e.name),ze(typeof T=="boolean",e,"internal-error"),ze(typeof M=="boolean",e,"internal-error"),Is(u,e.name),Is(f,e.name),Is(m,e.name),Is(g,e.name),Is(b,e.name),Is(v,e.name);const Q=new Va({uid:E,auth:e,email:o,emailVerified:T,displayName:s,isAnonymous:M,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:O,createdAt:b,lastLoginAt:v});return B&&Array.isArray(B)&&(Q.providerData=B.map(G=>({...G}))),g&&(Q._redirectEventId=g),Q}static async _fromIdTokenResponse(e,n,s=!1){const o=new Mo;o.updateFromServerResponse(n);const u=new Va({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Vd(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];ze(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?H_(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,m=new Mo;m.updateFromIdToken(s);const g=new Va({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new sm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,b),g}}const Px=new Map;function Ui(i){Yi(i instanceof Function,"Expected a class definition");let e=Px.get(i);return e?(Yi(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Px.set(i,e),e)}class q_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}q_.type="NONE";const Vx=q_;function Ad(i,e,n){return`firebase:${i}:${e}:${n}`}class Po{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Ad(this.userKey,o.apiKey,u),this.fullPersistenceKey=Ad("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Pd(this.auth,{idToken:e}).catch(()=>{});return n?Va._fromGetAccountInfoResponse(this.auth,n,e):null}return Va._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Po(Ui(Vx),e,s);const o=(await Promise.all(n.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let u=o[0]||Ui(Vx);const f=Ad(s,e.config.apiKey,e.name);let m=null;for(const b of n)try{const v=await b._get(f);if(v){let E;if(typeof v=="string"){const T=await Pd(e,{idToken:v}).catch(()=>{});if(!T)break;E=await Va._fromGetAccountInfoResponse(e,T,v)}else E=Va._fromJSON(e,v);b!==u&&(m=E),u=b;break}}catch{}const g=o.filter(b=>b._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Po(u,e,s):(u=g[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async b=>{if(b!==u)try{await b._remove(f)}catch{}})),new Po(u,e,s))}}function zx(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Y_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Q_(e))return"Blackberry";if(X_(e))return"Webos";if(G_(e))return"Safari";if((e.includes("chrome/")||$_(e))&&!e.includes("edge/"))return"Chrome";if(K_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function F_(i=Vn()){return/firefox\//i.test(i)}function G_(i=Vn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $_(i=Vn()){return/crios\//i.test(i)}function Y_(i=Vn()){return/iemobile/i.test(i)}function K_(i=Vn()){return/android/i.test(i)}function Q_(i=Vn()){return/blackberry/i.test(i)}function X_(i=Vn()){return/webos/i.test(i)}function Fm(i=Vn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function j2(i=Vn()){return Fm(i)&&!!window.navigator?.standalone}function k2(){return FT()&&document.documentMode===10}function J_(i=Vn()){return Fm(i)||K_(i)||X_(i)||Q_(i)||/windows phone/i.test(i)||Y_(i)}function W_(i,e=[]){let n;switch(i){case"Browser":n=zx(Vn());break;case"Worker":n=`${zx(Vn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zr}/${s}`}class O2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,m)=>{try{const g=e(u);f(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function D2(i,e={}){return Wi(i,"GET","/v2/passwordPolicy",Ks(i,e))}const M2=6;class P2{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??M2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class V2{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lx(this),this.idTokenSubscription=new Lx(this),this.beforeStateQueue=new O2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=V_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ui(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Po.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Pd(this,{idToken:e}),s=await Va._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(oa(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=m2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(oa(this.app))return Promise.reject(Hi(this));const n=e?nn(e):null;return n&&ze(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return oa(this.app)?Promise.reject(Hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return oa(this.app)?Promise.reject(Hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await D2(this),n=new P2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new kc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await I2(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ui(e)||this._popupRedirectResolver;ze(n,this,"argument-error"),this.redirectPersistenceManager=await Po.create(this,[Ui(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=W_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(oa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&f2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Lr(i){return nn(i)}class Lx{constructor(e){this.auth=e,this.observer=null,this.addObserver=WT(n=>this.observer=n)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let of={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function z2(i){of=i}function Z_(i){return of.loadJS(i)}function L2(){return of.recaptchaEnterpriseScript}function U2(){return of.gapiScript}function B2(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class H2{constructor(){this.enterprise=new q2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class q2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const F2="recaptcha-enterprise",e1="NO_RECAPTCHA";class G2{constructor(e){this.type=F2,this.auth=Lr(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{E2(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const b=new _2(g);return u.tenantId==null?u._agentRecaptchaConfig=b:u._tenantRecaptchaConfigs[u.tenantId]=b,f(b.siteKey)}}).catch(g=>{m(g)})})}function o(u,f,m){const g=window.grecaptcha;Dx(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(b=>{f(b)}).catch(()=>{f(e1)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new H2().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(m=>{if(!n&&Dx(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=L2();g.length!==0&&(g+=m),Z_(g).then(()=>{o(m,u,f)}).catch(b=>{f(b)})}}).catch(m=>{f(m)})})}}async function Ux(i,e,n,s=!1,o=!1){const u=new G2(i);let f;if(o)f=e1;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,b=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:b,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function rm(i,e,n,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Ux(i,e,n,n==="getOobCode");return s(i,u)}else return s(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Ux(i,e,n,n==="getOobCode");return s(i,f)}else return Promise.reject(u)})}function $2(i,e){const n=rf(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Gi(u,e??{}))return o;Ua(o,"already-initialized")}return n.initialize({options:e})}function Y2(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Ui);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function Gm(i,e,n){const s=Lr(i);ze(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!!n?.disableWarnings,u=t1(e),{host:f,port:m}=K2(e),g=m===null?"":`:${m}`,b={url:`${u}//${f}${g}/`},v=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){ze(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ze(Gi(b,s.config.emulator)&&Gi(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=b,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Vr(f)?(Mm(`${u}//${f}${g}`),Pm("Auth",!0)):o||Q2()}function t1(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function K2(i){const e=t1(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:Bx(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:Bx(f)}}}function Bx(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function Q2(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class $m{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Li("not implemented")}_getIdTokenResponse(e){return Li("not implemented")}_linkToIdToken(e,n){return Li("not implemented")}_getReauthenticationResolver(e){return Li("not implemented")}}async function X2(i,e){return Wi(i,"POST","/v1/accounts:update",e)}async function J2(i,e){return Wi(i,"POST","/v1/accounts:signUp",e)}async function W2(i,e){return Mc(i,"POST","/v1/accounts:signInWithPassword",Ks(i,e))}async function Z2(i,e){return Mc(i,"POST","/v1/accounts:signInWithEmailLink",Ks(i,e))}async function eR(i,e){return Mc(i,"POST","/v1/accounts:signInWithEmailLink",Ks(i,e))}class Ac extends $m{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Ac(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Ac(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rm(e,n,"signInWithPassword",W2);case"emailLink":return Z2(e,{email:this._email,oobCode:this._password});default:Ua(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rm(e,s,"signUpPassword",J2);case"emailLink":return eR(e,{idToken:n,email:this._email,oobCode:this._password});default:Ua(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Vo(i,e){return Mc(i,"POST","/v1/accounts:signInWithIdp",Ks(i,e))}const tR="http://localhost";class jr extends $m{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ua("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new jr(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Vo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Vo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vo(e,n)}buildRequest(){const e={requestUri:tR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Oc(n)}return e}}function nR(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aR(i){const e=cc(uc(i)).link,n=e?cc(uc(e)).deep_link_id:null,s=cc(uc(i)).deep_link_id;return(s?cc(uc(s)).link:null)||s||n||e||i}class Ym{constructor(e){const n=cc(uc(e)),s=n.apiKey??null,o=n.oobCode??null,u=nR(n.mode??null);ze(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=aR(e);try{return new Ym(n)}catch{return null}}}class Zo{constructor(){this.providerId=Zo.PROVIDER_ID}static credential(e,n){return Ac._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Ym.parseLink(n);return ze(s,"argument-error"),Ac._fromEmailAndCode(e,s.code,s.tenantId)}}Zo.PROVIDER_ID="password";Zo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class n1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Pc extends n1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class js extends Pc{constructor(){super("facebook.com")}static credential(e){return jr._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.FACEBOOK_SIGN_IN_METHOD="facebook.com";js.PROVIDER_ID="facebook.com";class ks extends Pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return jr._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return ks.credential(n,s)}catch{return null}}}ks.GOOGLE_SIGN_IN_METHOD="google.com";ks.PROVIDER_ID="google.com";class Os extends Pc{constructor(){super("github.com")}static credential(e){return jr._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Os.credential(e.oauthAccessToken)}catch{return null}}}Os.GITHUB_SIGN_IN_METHOD="github.com";Os.PROVIDER_ID="github.com";class Ds extends Pc{constructor(){super("twitter.com")}static credential(e,n){return jr._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ds.credential(n,s)}catch{return null}}}Ds.TWITTER_SIGN_IN_METHOD="twitter.com";Ds.PROVIDER_ID="twitter.com";async function iR(i,e){return Mc(i,"POST","/v1/accounts:signUp",Ks(i,e))}class kr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Va._fromIdTokenResponse(e,s,o),f=Hx(s);return new kr({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Hx(s);return new kr({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Hx(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class zd extends bi{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,zd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new zd(e,n,s,o)}}function a1(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?zd._fromErrorAndOperation(i,u,e,s):u})}async function sR(i,e,n=!1){const s=await Ho(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return kr._forOperation(i,"link",s)}async function rR(i,e,n=!1){const{auth:s}=i;if(oa(s.app))return Promise.reject(Hi(s));const o="reauthenticate";try{const u=await Ho(i,a1(s,o,e,i),n);ze(u.idToken,s,"internal-error");const f=qm(u.idToken);ze(f,s,"internal-error");const{sub:m}=f;return ze(i.uid===m,s,"user-mismatch"),kr._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Ua(s,"user-mismatch"),u}}async function i1(i,e,n=!1){if(oa(i.app))return Promise.reject(Hi(i));const s="signIn",o=await a1(i,s,e),u=await kr._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function oR(i,e){return i1(Lr(i),e)}async function s1(i){const e=Lr(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lR(i,e,n){if(oa(i.app))return Promise.reject(Hi(i));const s=Lr(i),f=await rm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&s1(i),g}),m=await kr._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(m.user),m}function r1(i,e,n){return oa(i.app)?Promise.reject(Hi(i)):oR(nn(i),Zo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&s1(i),s})}function cR(i,e){return uR(nn(i),null,e)}async function uR(i,e,n){const{auth:s}=i,u={idToken:await i.getIdToken(),returnSecureToken:!0};n&&(u.password=n);const f=await Ho(i,X2(s,u));await i._updateTokensIfNecessary(f,!0)}function dR(i,e,n,s){return nn(i).onIdTokenChanged(e,n,s)}function fR(i,e,n){return nn(i).beforeAuthStateChanged(e,n)}function lf(i,e,n,s){return nn(i).onAuthStateChanged(e,n,s)}function hR(i){return nn(i).signOut()}const Ld="__sak";class o1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ld,"1"),this.storage.removeItem(Ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const pR=1e3,mR=10;class l1 extends o1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=J_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);k2()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,mR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},pR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}l1.type="LOCAL";const gR=l1;class c1 extends o1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}c1.type="SESSION";const u1=c1;function bR(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class cf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new cf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(f).map(async b=>b(n.origin,u)),g=await bR(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}cf.receivers=[];function Km(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class yR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,g)=>{const b=Km("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===b)switch(T.data.status){case"ack":clearTimeout(v),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(T.data.response);break;default:clearTimeout(v),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:b,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function ui(){return window}function xR(i){ui().location.href=i}function d1(){return typeof ui().WorkerGlobalScope<"u"&&typeof ui().importScripts=="function"}async function vR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _R(){return navigator?.serviceWorker?.controller||null}function ER(){return d1()?self:null}const f1="firebaseLocalStorageDb",AR=1,Ud="firebaseLocalStorage",h1="fbase_key";class Vc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function uf(i,e){return i.transaction([Ud],e?"readwrite":"readonly").objectStore(Ud)}function wR(){const i=indexedDB.deleteDatabase(f1);return new Vc(i).toPromise()}function om(){const i=indexedDB.open(f1,AR);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Ud,{keyPath:h1})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Ud)?e(s):(s.close(),await wR(),e(await om()))})})}async function qx(i,e,n){const s=uf(i,!0).put({[h1]:e,value:n});return new Vc(s).toPromise()}async function SR(i,e){const n=uf(i,!1).get(e),s=await new Vc(n).toPromise();return s===void 0?null:s.value}function Fx(i,e){const n=uf(i,!0).delete(e);return new Vc(n).toPromise()}const TR=800,NR=3;class p1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await om(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>NR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return d1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cf._getInstance(ER()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await vR(),!this.activeServiceWorker)return;this.sender=new yR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_R()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await om();return await qx(e,Ld,"1"),await Fx(e,Ld),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>qx(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>SR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Fx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=uf(o,!1).getAll();return new Vc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}p1.type="LOCAL";const RR=p1;new Dc(3e4,6e4);function CR(i,e){return e?Ui(e):(ze(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Qm extends $m{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function IR(i){return i1(i.auth,new Qm(i),i.bypassAuthState)}function jR(i){const{auth:e,user:n}=i;return ze(n,e,"internal-error"),rR(n,new Qm(i),i.bypassAuthState)}async function kR(i){const{auth:e,user:n}=i;return ze(n,e,"internal-error"),sR(n,new Qm(i),i.bypassAuthState)}class m1{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IR;case"linkViaPopup":case"linkViaRedirect":return kR;case"reauthViaPopup":case"reauthViaRedirect":return jR;default:Ua(this.auth,"internal-error")}}resolve(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const OR=new Dc(2e3,1e4);class Do extends m1{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Do.currentPopupAction&&Do.currentPopupAction.cancel(),Do.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){Yi(this.filter.length===1,"Popup operations only handle one event");const e=Km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Do.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OR.get())};e()}}Do.currentPopupAction=null;const DR="pendingRedirect",wd=new Map;class MR extends m1{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=wd.get(this.auth._key());if(!e){try{const s=await PR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}wd.set(this.auth._key(),e)}return this.bypassAuthState||wd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PR(i,e){const n=LR(e),s=zR(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function VR(i,e){wd.set(i._key(),e)}function zR(i){return Ui(i._redirectPersistence)}function LR(i){return Ad(DR,i.config.apiKey,i.name)}async function UR(i,e,n=!1){if(oa(i.app))return Promise.reject(Hi(i));const s=Lr(i),o=CR(s,e),f=await new MR(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}const BR=600*1e3;class HR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!g1(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ci(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gx(e))}saveEventToCache(e){this.cachedEventUids.add(Gx(e)),this.lastProcessedEventTime=Date.now()}}function Gx(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function g1({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function qR(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return g1(i);default:return!1}}async function FR(i,e={}){return Wi(i,"GET","/v1/projects",e)}const GR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$R=/^https?/;async function YR(i){if(i.config.emulator)return;const{authorizedDomains:e}=await FR(i);for(const n of e)try{if(KR(n))return}catch{}Ua(i,"unauthorized-domain")}function KR(i){const e=im(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const f=new URL(i);return f.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!$R.test(n))return!1;if(GR.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const QR=new Dc(3e4,6e4);function $x(){const i=ui().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function XR(i){return new Promise((e,n)=>{function s(){$x(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$x(),n(ci(i,"network-request-failed"))},timeout:QR.get()})}if(ui().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ui().gapi?.load)s();else{const o=B2("iframefcb");return ui()[o]=()=>{gapi.load?s():n(ci(i,"network-request-failed"))},Z_(`${U2()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Sd=null,e})}let Sd=null;function JR(i){return Sd=Sd||XR(i),Sd}const WR=new Dc(5e3,15e3),ZR="__/auth/iframe",eC="emulator/auth/iframe",tC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aC(i){const e=i.config;ze(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Hm(e,eC):`https://${i.config.authDomain}/${ZR}`,s={apiKey:e.apiKey,appName:i.name,v:zr},o=nC.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Oc(s).slice(1)}`}async function iC(i){const e=await JR(i),n=ui().gapi;return ze(n,i,"internal-error"),e.open({where:document.body,url:aC(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tC,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=ci(i,"network-request-failed"),m=ui().setTimeout(()=>{u(f)},WR.get());function g(){ui().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{u(f)})}))}const sC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rC=500,oC=600,lC="_blank",cC="http://localhost";class Yx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uC(i,e,n,s=rC,o=oC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...sC,width:s.toString(),height:o.toString(),top:u,left:f},b=Vn().toLowerCase();n&&(m=$_(b)?lC:n),F_(b)&&(e=e||cC,g.scrollbars="yes");const v=Object.entries(g).reduce((T,[M,B])=>`${T}${M}=${B},`,"");if(j2(b)&&m!=="_self")return dC(e||"",m),new Yx(null);const E=window.open(e||"",m,v);ze(E,i,"popup-blocked");try{E.focus()}catch{}return new Yx(E)}function dC(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const fC="__/auth/handler",hC="emulator/auth/handler",pC=encodeURIComponent("fac");async function Kx(i,e,n,s,o,u){ze(i.config.authDomain,i,"auth-domain-config-required"),ze(i.config.apiKey,i,"invalid-api-key");const f={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:zr,eventId:o};if(e instanceof n1){e.setDefaultLanguage(i.languageCode),f.providerId=e.providerId||"",JT(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))f[v]=E}if(e instanceof Pc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(f.scopes=v.join(","))}i.tenantId&&(f.tid=i.tenantId);const m=f;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const g=await i._getAppCheckToken(),b=g?`#${pC}=${encodeURIComponent(g)}`:"";return`${mC(i)}?${Oc(m).slice(1)}${b}`}function mC({config:i}){return i.emulator?Hm(i,hC):`https://${i.authDomain}/${fC}`}const qp="webStorageSupport";class gC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=u1,this._completeRedirectFn=UR,this._overrideRedirectResult=VR}async _openPopup(e,n,s,o){Yi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Kx(e,n,s,im(),o);return uC(e,u,Km())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await Kx(e,n,s,im(),o);return xR(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Yi(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await iC(e),s=new HR(e);return n.register("authEvent",o=>(ze(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qp,{type:qp},o=>{const u=o?.[0]?.[qp];u!==void 0&&n(!!u),Ua(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=YR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return J_()||G_()||Fm()}}const bC=gC;var Qx="@firebase/auth",Xx="1.12.0";class yC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vC(i){Ir(new Us("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=s.options;ze(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W_(i)},b=new V2(s,o,u,g);return Y2(b,n),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ir(new Us("auth-internal",e=>{const n=Lr(e.getProvider("auth").getImmediate());return(s=>new yC(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(Qx,Xx,xC(i)),li(Qx,Xx,"esm2020")}const _C=300,EC=I_("authIdTokenMaxAge")||_C;let Jx=null;const AC=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>EC)return;const o=n?.token;Jx!==o&&(Jx=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function b1(i=Um()){const e=rf(i,"auth");if(e.isInitialized())return e.getImmediate();const n=$2(i,{popupRedirectResolver:bC,persistence:[RR,gR,u1]}),s=I_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=AC(u.toString());fR(n,f,()=>f(n.currentUser)),dR(n,m=>f(m))}}const o=N_("auth");return o&&Gm(n,`http://${o}`),n}function wC(){return document.getElementsByTagName("head")?.[0]??document}z2({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=ci("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",wC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vC("Browser");var Wx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var zs,y1;(function(){var i;function e(I,C){function k(){}k.prototype=C.prototype,I.F=C.prototype,I.prototype=new k,I.prototype.constructor=I,I.D=function(P,j,R){for(var S=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)S[Te-2]=arguments[Te];return C.prototype[j].apply(P,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,C,k){k||(k=0);const P=Array(16);if(typeof C=="string")for(var j=0;j<16;++j)P[j]=C.charCodeAt(k++)|C.charCodeAt(k++)<<8|C.charCodeAt(k++)<<16|C.charCodeAt(k++)<<24;else for(j=0;j<16;++j)P[j]=C[k++]|C[k++]<<8|C[k++]<<16|C[k++]<<24;C=I.g[0],k=I.g[1],j=I.g[2];let R=I.g[3],S;S=C+(R^k&(j^R))+P[0]+3614090360&4294967295,C=k+(S<<7&4294967295|S>>>25),S=R+(j^C&(k^j))+P[1]+3905402710&4294967295,R=C+(S<<12&4294967295|S>>>20),S=j+(k^R&(C^k))+P[2]+606105819&4294967295,j=R+(S<<17&4294967295|S>>>15),S=k+(C^j&(R^C))+P[3]+3250441966&4294967295,k=j+(S<<22&4294967295|S>>>10),S=C+(R^k&(j^R))+P[4]+4118548399&4294967295,C=k+(S<<7&4294967295|S>>>25),S=R+(j^C&(k^j))+P[5]+1200080426&4294967295,R=C+(S<<12&4294967295|S>>>20),S=j+(k^R&(C^k))+P[6]+2821735955&4294967295,j=R+(S<<17&4294967295|S>>>15),S=k+(C^j&(R^C))+P[7]+4249261313&4294967295,k=j+(S<<22&4294967295|S>>>10),S=C+(R^k&(j^R))+P[8]+1770035416&4294967295,C=k+(S<<7&4294967295|S>>>25),S=R+(j^C&(k^j))+P[9]+2336552879&4294967295,R=C+(S<<12&4294967295|S>>>20),S=j+(k^R&(C^k))+P[10]+4294925233&4294967295,j=R+(S<<17&4294967295|S>>>15),S=k+(C^j&(R^C))+P[11]+2304563134&4294967295,k=j+(S<<22&4294967295|S>>>10),S=C+(R^k&(j^R))+P[12]+1804603682&4294967295,C=k+(S<<7&4294967295|S>>>25),S=R+(j^C&(k^j))+P[13]+4254626195&4294967295,R=C+(S<<12&4294967295|S>>>20),S=j+(k^R&(C^k))+P[14]+2792965006&4294967295,j=R+(S<<17&4294967295|S>>>15),S=k+(C^j&(R^C))+P[15]+1236535329&4294967295,k=j+(S<<22&4294967295|S>>>10),S=C+(j^R&(k^j))+P[1]+4129170786&4294967295,C=k+(S<<5&4294967295|S>>>27),S=R+(k^j&(C^k))+P[6]+3225465664&4294967295,R=C+(S<<9&4294967295|S>>>23),S=j+(C^k&(R^C))+P[11]+643717713&4294967295,j=R+(S<<14&4294967295|S>>>18),S=k+(R^C&(j^R))+P[0]+3921069994&4294967295,k=j+(S<<20&4294967295|S>>>12),S=C+(j^R&(k^j))+P[5]+3593408605&4294967295,C=k+(S<<5&4294967295|S>>>27),S=R+(k^j&(C^k))+P[10]+38016083&4294967295,R=C+(S<<9&4294967295|S>>>23),S=j+(C^k&(R^C))+P[15]+3634488961&4294967295,j=R+(S<<14&4294967295|S>>>18),S=k+(R^C&(j^R))+P[4]+3889429448&4294967295,k=j+(S<<20&4294967295|S>>>12),S=C+(j^R&(k^j))+P[9]+568446438&4294967295,C=k+(S<<5&4294967295|S>>>27),S=R+(k^j&(C^k))+P[14]+3275163606&4294967295,R=C+(S<<9&4294967295|S>>>23),S=j+(C^k&(R^C))+P[3]+4107603335&4294967295,j=R+(S<<14&4294967295|S>>>18),S=k+(R^C&(j^R))+P[8]+1163531501&4294967295,k=j+(S<<20&4294967295|S>>>12),S=C+(j^R&(k^j))+P[13]+2850285829&4294967295,C=k+(S<<5&4294967295|S>>>27),S=R+(k^j&(C^k))+P[2]+4243563512&4294967295,R=C+(S<<9&4294967295|S>>>23),S=j+(C^k&(R^C))+P[7]+1735328473&4294967295,j=R+(S<<14&4294967295|S>>>18),S=k+(R^C&(j^R))+P[12]+2368359562&4294967295,k=j+(S<<20&4294967295|S>>>12),S=C+(k^j^R)+P[5]+4294588738&4294967295,C=k+(S<<4&4294967295|S>>>28),S=R+(C^k^j)+P[8]+2272392833&4294967295,R=C+(S<<11&4294967295|S>>>21),S=j+(R^C^k)+P[11]+1839030562&4294967295,j=R+(S<<16&4294967295|S>>>16),S=k+(j^R^C)+P[14]+4259657740&4294967295,k=j+(S<<23&4294967295|S>>>9),S=C+(k^j^R)+P[1]+2763975236&4294967295,C=k+(S<<4&4294967295|S>>>28),S=R+(C^k^j)+P[4]+1272893353&4294967295,R=C+(S<<11&4294967295|S>>>21),S=j+(R^C^k)+P[7]+4139469664&4294967295,j=R+(S<<16&4294967295|S>>>16),S=k+(j^R^C)+P[10]+3200236656&4294967295,k=j+(S<<23&4294967295|S>>>9),S=C+(k^j^R)+P[13]+681279174&4294967295,C=k+(S<<4&4294967295|S>>>28),S=R+(C^k^j)+P[0]+3936430074&4294967295,R=C+(S<<11&4294967295|S>>>21),S=j+(R^C^k)+P[3]+3572445317&4294967295,j=R+(S<<16&4294967295|S>>>16),S=k+(j^R^C)+P[6]+76029189&4294967295,k=j+(S<<23&4294967295|S>>>9),S=C+(k^j^R)+P[9]+3654602809&4294967295,C=k+(S<<4&4294967295|S>>>28),S=R+(C^k^j)+P[12]+3873151461&4294967295,R=C+(S<<11&4294967295|S>>>21),S=j+(R^C^k)+P[15]+530742520&4294967295,j=R+(S<<16&4294967295|S>>>16),S=k+(j^R^C)+P[2]+3299628645&4294967295,k=j+(S<<23&4294967295|S>>>9),S=C+(j^(k|~R))+P[0]+4096336452&4294967295,C=k+(S<<6&4294967295|S>>>26),S=R+(k^(C|~j))+P[7]+1126891415&4294967295,R=C+(S<<10&4294967295|S>>>22),S=j+(C^(R|~k))+P[14]+2878612391&4294967295,j=R+(S<<15&4294967295|S>>>17),S=k+(R^(j|~C))+P[5]+4237533241&4294967295,k=j+(S<<21&4294967295|S>>>11),S=C+(j^(k|~R))+P[12]+1700485571&4294967295,C=k+(S<<6&4294967295|S>>>26),S=R+(k^(C|~j))+P[3]+2399980690&4294967295,R=C+(S<<10&4294967295|S>>>22),S=j+(C^(R|~k))+P[10]+4293915773&4294967295,j=R+(S<<15&4294967295|S>>>17),S=k+(R^(j|~C))+P[1]+2240044497&4294967295,k=j+(S<<21&4294967295|S>>>11),S=C+(j^(k|~R))+P[8]+1873313359&4294967295,C=k+(S<<6&4294967295|S>>>26),S=R+(k^(C|~j))+P[15]+4264355552&4294967295,R=C+(S<<10&4294967295|S>>>22),S=j+(C^(R|~k))+P[6]+2734768916&4294967295,j=R+(S<<15&4294967295|S>>>17),S=k+(R^(j|~C))+P[13]+1309151649&4294967295,k=j+(S<<21&4294967295|S>>>11),S=C+(j^(k|~R))+P[4]+4149444226&4294967295,C=k+(S<<6&4294967295|S>>>26),S=R+(k^(C|~j))+P[11]+3174756917&4294967295,R=C+(S<<10&4294967295|S>>>22),S=j+(C^(R|~k))+P[2]+718787259&4294967295,j=R+(S<<15&4294967295|S>>>17),S=k+(R^(j|~C))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+C&4294967295,I.g[1]=I.g[1]+(j+(S<<21&4294967295|S>>>11))&4294967295,I.g[2]=I.g[2]+j&4294967295,I.g[3]=I.g[3]+R&4294967295}s.prototype.v=function(I,C){C===void 0&&(C=I.length);const k=C-this.blockSize,P=this.C;let j=this.h,R=0;for(;R<C;){if(j==0)for(;R<=k;)o(this,I,R),R+=this.blockSize;if(typeof I=="string"){for(;R<C;)if(P[j++]=I.charCodeAt(R++),j==this.blockSize){o(this,P),j=0;break}}else for(;R<C;)if(P[j++]=I[R++],j==this.blockSize){o(this,P),j=0;break}}this.h=j,this.o+=C},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var C=1;C<I.length-8;++C)I[C]=0;C=this.o*8;for(var k=I.length-8;k<I.length;++k)I[k]=C&255,C/=256;for(this.v(I),I=Array(16),C=0,k=0;k<4;++k)for(let P=0;P<32;P+=8)I[C++]=this.g[k]>>>P&255;return I};function u(I,C){var k=m;return Object.prototype.hasOwnProperty.call(k,I)?k[I]:k[I]=C(I)}function f(I,C){this.h=C;const k=[];let P=!0;for(let j=I.length-1;j>=0;j--){const R=I[j]|0;P&&R==C||(k[j]=R,P=!1)}this.g=k}var m={};function g(I){return-128<=I&&I<128?u(I,function(C){return new f([C|0],C<0?-1:0)}):new f([I|0],I<0?-1:0)}function b(I){if(isNaN(I)||!isFinite(I))return E;if(I<0)return O(b(-I));const C=[];let k=1;for(let P=0;I>=k;P++)C[P]=I/k|0,k*=4294967296;return new f(C,0)}function v(I,C){if(I.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(I.charAt(0)=="-")return O(v(I.substring(1),C));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=b(Math.pow(C,8));let P=E;for(let R=0;R<I.length;R+=8){var j=Math.min(8,I.length-R);const S=parseInt(I.substring(R,R+j),C);j<8?(j=b(Math.pow(C,j)),P=P.j(j).add(b(S))):(P=P.j(k),P=P.add(b(S)))}return P}var E=g(0),T=g(1),M=g(16777216);i=f.prototype,i.m=function(){if(L(this))return-O(this).m();let I=0,C=1;for(let k=0;k<this.g.length;k++){const P=this.i(k);I+=(P>=0?P:4294967296+P)*C,C*=4294967296}return I},i.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(B(this))return"0";if(L(this))return"-"+O(this).toString(I);const C=b(Math.pow(I,6));var k=this;let P="";for(;;){const j=le(k,C).g;k=Q(k,j.j(C));let R=((k.g.length>0?k.g[0]:k.h)>>>0).toString(I);if(k=j,B(k))return R+P;for(;R.length<6;)R="0"+R;P=R+P}},i.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function B(I){if(I.h!=0)return!1;for(let C=0;C<I.g.length;C++)if(I.g[C]!=0)return!1;return!0}function L(I){return I.h==-1}i.l=function(I){return I=Q(this,I),L(I)?-1:B(I)?0:1};function O(I){const C=I.g.length,k=[];for(let P=0;P<C;P++)k[P]=~I.g[P];return new f(k,~I.h).add(T)}i.abs=function(){return L(this)?O(this):this},i.add=function(I){const C=Math.max(this.g.length,I.g.length),k=[];let P=0;for(let j=0;j<=C;j++){let R=P+(this.i(j)&65535)+(I.i(j)&65535),S=(R>>>16)+(this.i(j)>>>16)+(I.i(j)>>>16);P=S>>>16,R&=65535,S&=65535,k[j]=S<<16|R}return new f(k,k[k.length-1]&-2147483648?-1:0)};function Q(I,C){return I.add(O(C))}i.j=function(I){if(B(this)||B(I))return E;if(L(this))return L(I)?O(this).j(O(I)):O(O(this).j(I));if(L(I))return O(this.j(O(I)));if(this.l(M)<0&&I.l(M)<0)return b(this.m()*I.m());const C=this.g.length+I.g.length,k=[];for(var P=0;P<2*C;P++)k[P]=0;for(P=0;P<this.g.length;P++)for(let j=0;j<I.g.length;j++){const R=this.i(P)>>>16,S=this.i(P)&65535,Te=I.i(j)>>>16,ne=I.i(j)&65535;k[2*P+2*j]+=S*ne,G(k,2*P+2*j),k[2*P+2*j+1]+=R*ne,G(k,2*P+2*j+1),k[2*P+2*j+1]+=S*Te,G(k,2*P+2*j+1),k[2*P+2*j+2]+=R*Te,G(k,2*P+2*j+2)}for(I=0;I<C;I++)k[I]=k[2*I+1]<<16|k[2*I];for(I=C;I<2*C;I++)k[I]=0;return new f(k,0)};function G(I,C){for(;(I[C]&65535)!=I[C];)I[C+1]+=I[C]>>>16,I[C]&=65535,C++}function W(I,C){this.g=I,this.h=C}function le(I,C){if(B(C))throw Error("division by zero");if(B(I))return new W(E,E);if(L(I))return C=le(O(I),C),new W(O(C.g),O(C.h));if(L(C))return C=le(I,O(C)),new W(O(C.g),C.h);if(I.g.length>30){if(L(I)||L(C))throw Error("slowDivide_ only works with positive integers.");for(var k=T,P=C;P.l(I)<=0;)k=he(k),P=he(P);var j=pe(k,1),R=pe(P,1);for(P=pe(P,2),k=pe(k,2);!B(P);){var S=R.add(P);S.l(I)<=0&&(j=j.add(k),R=S),P=pe(P,1),k=pe(k,1)}return C=Q(I,j.j(C)),new W(j,C)}for(j=E;I.l(C)>=0;){for(k=Math.max(1,Math.floor(I.m()/C.m())),P=Math.ceil(Math.log(k)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),R=b(k),S=R.j(C);L(S)||S.l(I)>0;)k-=P,R=b(k),S=R.j(C);B(R)&&(R=T),j=j.add(R),I=Q(I,S)}return new W(j,I)}i.B=function(I){return le(this,I).h},i.and=function(I){const C=Math.max(this.g.length,I.g.length),k=[];for(let P=0;P<C;P++)k[P]=this.i(P)&I.i(P);return new f(k,this.h&I.h)},i.or=function(I){const C=Math.max(this.g.length,I.g.length),k=[];for(let P=0;P<C;P++)k[P]=this.i(P)|I.i(P);return new f(k,this.h|I.h)},i.xor=function(I){const C=Math.max(this.g.length,I.g.length),k=[];for(let P=0;P<C;P++)k[P]=this.i(P)^I.i(P);return new f(k,this.h^I.h)};function he(I){const C=I.g.length+1,k=[];for(let P=0;P<C;P++)k[P]=I.i(P)<<1|I.i(P-1)>>>31;return new f(k,I.h)}function pe(I,C){const k=C>>5;C%=32;const P=I.g.length-k,j=[];for(let R=0;R<P;R++)j[R]=C>0?I.i(R+k)>>>C|I.i(R+k+1)<<32-C:I.i(R+k);return new f(j,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,y1=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=b,f.fromString=v,zs=f}).apply(typeof Wx<"u"?Wx:typeof self<"u"?self:typeof window<"u"?window:{});var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var x1,dc,v1,Td,lm,_1,E1,A1;(function(){var i,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof pd=="object"&&pd];for(var y=0;y<d.length;++y){var _=d[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(d,y){if(y)e:{var _=s;d=d.split(".");for(var N=0;N<d.length-1;N++){var $=d[N];if(!($ in _))break e;_=_[$]}d=d[d.length-1],N=_[d],y=y(N),y!=N&&y!=null&&e(_,d,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(y){var _=[],N;for(N in y)Object.prototype.hasOwnProperty.call(y,N)&&_.push([N,y[N]]);return _}});var u=u||{},f=this||self;function m(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function g(d,y,_){return d.call.apply(d.bind,arguments)}function b(d,y,_){return b=g,b.apply(null,arguments)}function v(d,y){var _=Array.prototype.slice.call(arguments,1);return function(){var N=_.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function E(d,y){function _(){}_.prototype=y.prototype,d.Z=y.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(N,$,Z){for(var ve=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)ve[Xe-2]=arguments[Xe];return y.prototype[$].apply(N,ve)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function M(d){const y=d.length;if(y>0){const _=Array(y);for(let N=0;N<y;N++)_[N]=d[N];return _}return[]}function B(d,y){for(let N=1;N<arguments.length;N++){const $=arguments[N];var _=typeof $;if(_=_!="object"?_:$?Array.isArray($)?"array":_:"null",_=="array"||_=="object"&&typeof $.length=="number"){_=d.length||0;const Z=$.length||0;d.length=_+Z;for(let ve=0;ve<Z;ve++)d[_+ve]=$[ve]}else d.push($)}}class L{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function O(d){f.setTimeout(()=>{throw d},0)}function Q(){var d=I;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class G{constructor(){this.h=this.g=null}add(y,_){const N=W.get();N.set(y,_),this.h?this.h.next=N:this.g=N,this.h=N}}var W=new L(()=>new le,d=>d.reset());class le{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let he,pe=!1,I=new G,C=()=>{const d=Promise.resolve(void 0);he=()=>{d.then(k)}};function k(){for(var d;d=Q();){try{d.h.call(d.g)}catch(_){O(_)}var y=W;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}pe=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};f.addEventListener("test",_,y),f.removeEventListener("test",_,y)}catch{}return d})();function S(d){return/^[\s\xa0]*$/.test(d)}function Te(d,y){j.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}E(Te,j),Te.prototype.init=function(d,y){const _=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(_=="mouseover"?y=d.fromElement:_=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ne="closure_listenable_"+(Math.random()*1e6|0),F=0;function re(d,y,_,N,$){this.listener=d,this.proxy=null,this.src=y,this.type=_,this.capture=!!N,this.ha=$,this.key=++F,this.da=this.fa=!1}function ye(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Be(d,y,_){for(const N in d)y.call(_,d[N],N,d)}function Ue(d,y){for(const _ in d)y.call(void 0,d[_],_,d)}function V(d){const y={};for(const _ in d)y[_]=d[_];return y}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(d,y){let _,N;for(let $=1;$<arguments.length;$++){N=arguments[$];for(_ in N)d[_]=N[_];for(let Z=0;Z<ae.length;Z++)_=ae[Z],Object.prototype.hasOwnProperty.call(N,_)&&(d[_]=N[_])}}function Ee(d){this.src=d,this.g={},this.h=0}Ee.prototype.add=function(d,y,_,N,$){const Z=d.toString();d=this.g[Z],d||(d=this.g[Z]=[],this.h++);const ve=je(d,y,N,$);return ve>-1?(y=d[ve],_||(y.fa=!1)):(y=new re(y,this.src,Z,!!N,$),y.fa=_,d.push(y)),y};function Se(d,y){const _=y.type;if(_ in d.g){var N=d.g[_],$=Array.prototype.indexOf.call(N,y,void 0),Z;(Z=$>=0)&&Array.prototype.splice.call(N,$,1),Z&&(ye(y),d.g[_].length==0&&(delete d.g[_],d.h--))}}function je(d,y,_,N){for(let $=0;$<d.length;++$){const Z=d[$];if(!Z.da&&Z.listener==y&&Z.capture==!!_&&Z.ha==N)return $}return-1}var De="closure_lm_"+(Math.random()*1e6|0),gt={};function Ne(d,y,_,N,$){if(Array.isArray(y)){for(let Z=0;Z<y.length;Z++)Ne(d,y[Z],_,N,$);return null}return _=fe(_),d&&d[ne]?d.J(y,_,m(N)?!!N.capture:!1,$):mt(d,y,_,!1,N,$)}function mt(d,y,_,N,$,Z){if(!y)throw Error("Invalid event type");const ve=m($)?!!$.capture:!!$;let Xe=Ce(d);if(Xe||(d[De]=Xe=new Ee(d)),_=Xe.add(y,_,N,ve,Z),_.proxy)return _;if(N=ct(),_.proxy=N,N.src=d,N.listener=_,d.addEventListener)R||($=ve),$===void 0&&($=!1),d.addEventListener(y.toString(),N,$);else if(d.attachEvent)d.attachEvent(Ft(y.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ct(){function d(_){return y.call(d.src,d.listener,_)}const y=me;return d}function Xt(d,y,_,N,$){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)Xt(d,y[Z],_,N,$);else N=m(N)?!!N.capture:!!N,_=fe(_),d&&d[ne]?(d=d.i,Z=String(y).toString(),Z in d.g&&(y=d.g[Z],_=je(y,_,N,$),_>-1&&(ye(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete d.g[Z],d.h--)))):d&&(d=Ce(d))&&(y=d.g[y.toString()],d=-1,y&&(d=je(y,_,N,$)),(_=d>-1?y[d]:null)&&an(_))}function an(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[ne])Se(y.i,d);else{var _=d.type,N=d.proxy;y.removeEventListener?y.removeEventListener(_,N,d.capture):y.detachEvent?y.detachEvent(Ft(_),N):y.addListener&&y.removeListener&&y.removeListener(N),(_=Ce(y))?(Se(_,d),_.h==0&&(_.src=null,y[De]=null)):ye(d)}}}function Ft(d){return d in gt?gt[d]:gt[d]="on"+d}function me(d,y){if(d.da)d=!0;else{y=new Te(y,this);const _=d.listener,N=d.ha||d.src;d.fa&&an(d),d=_.call(N,y)}return d}function Ce(d){return d=d[De],d instanceof Ee?d:null}var U="__closure_events_fn_"+(Math.random()*1e9>>>0);function fe(d){return typeof d=="function"?d:(d[U]||(d[U]=function(y){return d.handleEvent(y)}),d[U])}function de(){P.call(this),this.i=new Ee(this),this.M=this,this.G=null}E(de,P),de.prototype[ne]=!0,de.prototype.removeEventListener=function(d,y,_,N){Xt(this,d,y,_,N)};function be(d,y){var _,N=d.G;if(N)for(_=[];N;N=N.G)_.push(N);if(d=d.M,N=y.type||y,typeof y=="string")y=new j(y,d);else if(y instanceof j)y.target=y.target||d;else{var $=y;y=new j(N,d),ge(y,$)}$=!0;let Z,ve;if(_)for(ve=_.length-1;ve>=0;ve--)Z=y.g=_[ve],$=Ge(Z,N,!0,y)&&$;if(Z=y.g=d,$=Ge(Z,N,!0,y)&&$,$=Ge(Z,N,!1,y)&&$,_)for(ve=0;ve<_.length;ve++)Z=y.g=_[ve],$=Ge(Z,N,!1,y)&&$}de.prototype.N=function(){if(de.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const _=d.g[y];for(let N=0;N<_.length;N++)ye(_[N]);delete d.g[y],d.h--}}this.G=null},de.prototype.J=function(d,y,_,N){return this.i.add(String(d),y,!1,_,N)},de.prototype.K=function(d,y,_,N){return this.i.add(String(d),y,!0,_,N)};function Ge(d,y,_,N){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let $=!0;for(let Z=0;Z<y.length;++Z){const ve=y[Z];if(ve&&!ve.da&&ve.capture==_){const Xe=ve.listener,Wt=ve.ha||ve.src;ve.fa&&Se(d.i,ve),$=Xe.call(Wt,N)!==!1&&$}}return $&&!N.defaultPrevented}function Me(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=b(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:f.setTimeout(d,y||0)}function It(d){d.g=Me(()=>{d.g=null,d.i&&(d.i=!1,It(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class et extends P{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:It(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jt(d){P.call(this),this.h=d,this.g={}}E(Jt,P);var te=[];function qe(d){Be(d.g,function(y,_){this.g.hasOwnProperty(_)&&an(y)},d),d.g={}}Jt.prototype.N=function(){Jt.Z.N.call(this),qe(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $e=f.JSON.stringify,H=f.JSON.parse,xe=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function dt(){}function Gt(){}var ft={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function J(){j.call(this,"d")}E(J,j);function Ye(){j.call(this,"c")}E(Ye,j);var We={},sn=null;function $t(){return sn=sn||new de}We.Ia="serverreachability";function rn(d){j.call(this,We.Ia,d)}E(rn,j);function bt(d){const y=$t();be(y,new rn(y))}We.STAT_EVENT="statevent";function ht(d,y){j.call(this,We.STAT_EVENT,d),this.stat=y}E(ht,j);function He(d){const y=$t();be(y,new ht(y,d))}We.Ja="timingevent";function Ht(d,y){j.call(this,We.Ja,d),this.size=y}E(Ht,j);function Jn(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},y)}function Ta(){this.g=!0}Ta.prototype.ua=function(){this.g=!1};function kf(d,y,_,N,$,Z){d.info(function(){if(d.g)if(Z){var ve="",Xe=Z.split("&");for(let vt=0;vt<Xe.length;vt++){var Wt=Xe[vt].split("=");if(Wt.length>1){const zt=Wt[0];Wt=Wt[1];const pa=zt.split("_");ve=pa.length>=2&&pa[1]=="type"?ve+(zt+"="+Wt+"&"):ve+(zt+"=redacted&")}}}else ve=null;else ve=Z;return"XMLHTTP REQ ("+N+") [attempt "+$+"]: "+y+`
`+_+`
`+ve})}function qc(d,y,_,N,$,Z,ve){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+$+"]: "+y+`
`+_+`
`+Z+" "+ve})}function Ha(d,y,_,N){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Of(d,_)+(N?" "+N:"")})}function Ws(d,y){d.info(function(){return"TIMEOUT: "+y})}Ta.prototype.info=function(){};function Of(d,y){if(!d.g)return y;if(!y)return null;try{const Z=JSON.parse(y);if(Z){for(d=0;d<Z.length;d++)if(Array.isArray(Z[d])){var _=Z[d];if(!(_.length<2)){var N=_[1];if(Array.isArray(N)&&!(N.length<1)){var $=N[0];if($!="noop"&&$!="stop"&&$!="close")for(let ve=1;ve<N.length;ve++)N[ve]=""}}}}return $e(Z)}catch{return y}}var Zs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},rl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ol;function er(){}E(er,dt),er.prototype.g=function(){return new XMLHttpRequest},ol=new er;function xi(d){return encodeURIComponent(String(d))}function Fc(d){var y=1;d=d.split(":");const _=[];for(;y>0&&d.length;)_.push(d.shift()),y--;return d.length&&_.push(d.join(":")),_}function Na(d,y,_,N){this.j=d,this.i=y,this.l=_,this.S=N||1,this.V=new Jt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ra}function Ra(){this.i=null,this.g="",this.h=!1}var on={},xn={};function qa(d,y,_){d.M=1,d.A=tr(cn(y)),d.u=_,d.R=!0,qr(d,null)}function qr(d,y){d.F=Date.now(),Fa(d),d.B=cn(d.A);var _=d.B,N=d.S;Array.isArray(N)||(N=[String(N)]),Yr(_.i,"t",N),d.C=0,_=d.j.L,d.h=new Ra,d.g=su(d.j,_?y:null,!d.u),d.P>0&&(d.O=new et(b(d.Y,d,d.g),d.P)),y=d.V,_=d.g,N=d.ba;var $="readystatechange";Array.isArray($)||($&&(te[0]=$.toString()),$=te);for(let Z=0;Z<$.length;Z++){const ve=Ne(_,$[Z],N||y.handleEvent,!1,y.h||y);if(!ve)break;y.g[ve.key]=ve}y=d.J?V(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),bt(),kf(d.i,d.v,d.B,d.l,d.S,d.u)}Na.prototype.ba=function(d){d=d.target;const y=this.O;y&&ja(d)==3?y.j():this.Y(d)},Na.prototype.Y=function(d){try{if(d==this.g)e:{const Xe=ja(this.g),Wt=this.g.ya(),vt=this.g.ca();if(!(Xe<3)&&(Xe!=3||this.g&&(this.h.h||this.g.la()||An(this.g)))){this.K||Xe!=4||Wt==7||(Wt==8||vt<=0?bt(3):bt(2)),Ga(this);var y=this.g.ca();this.X=y;var _=Df(this);if(this.o=y==200,qc(this.i,this.v,this.B,this.l,this.S,Xe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var N,$=this.g;if((N=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(N)){var Z=N;break t}}Z=null}if(d=Z)Ha(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$a(this,d);else{this.o=!1,this.m=3,He(12),Wn(this),da(this);break e}}if(this.R){d=!0;let zt;for(;!this.K&&this.C<_.length;)if(zt=$c(this,_),zt==xn){Xe==4&&(this.m=4,He(14),d=!1),Ha(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==on){this.m=4,He(15),Ha(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else Ha(this.i,this.l,zt,null),$a(this,zt);if(Gc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||_.length!=0||this.h.h||(this.m=1,He(16),d=!1),this.o=this.o&&d,!d)Ha(this.i,this.l,_,"[Invalid Chunked Response]"),Wn(this),da(this);else if(_.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),El(ve),ve.P=!0,He(11))}}else Ha(this.i,this.l,_,null),$a(this,_);Xe==4&&Wn(this),this.o&&!this.K&&(Xe==4?tu(this.j,this):(this.o=!1,Fa(this)))}else _i(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,He(12)):(this.m=0,He(13)),Wn(this),da(this)}}}catch{}};function Df(d){if(!Gc(d))return d.g.la();const y=An(d.g);if(y==="")return"";let _="";const N=y.length,$=ja(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Wn(d),da(d),"";d.h.i=new f.TextDecoder}for(let Z=0;Z<N;Z++)d.h.h=!0,_+=d.h.i.decode(y[Z],{stream:!($&&Z==N-1)});return y.length=0,d.h.g+=_,d.C=0,d.h.g}function Gc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function $c(d,y){var _=d.C,N=y.indexOf(`
`,_);return N==-1?xn:(_=Number(y.substring(_,N)),isNaN(_)?on:(N+=1,N+_>y.length?xn:(y=y.slice(N,N+_),d.C=N+_,y)))}Na.prototype.cancel=function(){this.K=!0,Wn(this)};function Fa(d){d.T=Date.now()+d.H,Fr(d,d.H)}function Fr(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Jn(b(d.aa,d),y)}function Ga(d){d.D&&(f.clearTimeout(d.D),d.D=null)}Na.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ws(this.i,this.B),this.M!=2&&(bt(),He(17)),Wn(this),this.m=2,da(this)):Fr(this,this.T-d)};function da(d){d.j.I==0||d.K||tu(d.j,d)}function Wn(d){Ga(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,qe(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function $a(d,y){try{var _=d.j;if(_.I!=0&&(_.g==d||Ka(_.h,d))){if(!d.L&&Ka(_.h,d)&&_.I==3){try{var N=_.Ba.g.parse(y)}catch{N=null}if(Array.isArray(N)&&N.length==3){var $=N;if($[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)Wr(_),rs(_);else break e;lr(_),He(18)}}else _.xa=$[1],0<_.xa-_.K&&$[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Jn(b(_.Va,_),6e3));Ya(_.h)<=1&&_.ta&&(_.ta=void 0)}else ei(_,11)}else if((d.L||_.g==d)&&Wr(_),!S(y))for($=_.Ba.g.parse(y),y=0;y<$.length;y++){let vt=$[y];const zt=vt[0];if(!(zt<=_.K))if(_.K=zt,vt=vt[1],_.I==2)if(vt[0]=="c"){_.M=vt[1],_.ba=vt[2];const pa=vt[3];pa!=null&&(_.ka=pa,_.j.info("VER="+_.ka));const ti=vt[4];ti!=null&&(_.za=ti,_.j.info("SVER="+_.za));const ka=vt[5];ka!=null&&typeof ka=="number"&&ka>0&&(N=1.5*ka,_.O=N,_.j.info("backChannelRequestTimeoutMs_="+N)),N=_;const Oa=d.g;if(Oa){const cr=Oa.g?Oa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cr){var Z=N.h;Z.g||cr.indexOf("spdy")==-1&&cr.indexOf("quic")==-1&&cr.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(ul(Z,Z.h),Z.h=null))}if(N.G){const Zr=Oa.g?Oa.g.getResponseHeader("X-HTTP-Session-Id"):null;Zr&&(N.wa=Zr,At(N.J,N.G,Zr))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),N=_;var ve=d;if(N.na=iu(N,N.L?N.ba:null,N.W),ve.L){dl(N.h,ve);var Xe=ve,Wt=N.O;Wt&&(Xe.H=Wt),Xe.D&&(Ga(Xe),Fa(Xe)),N.g=ve}else Zc(N);_.i.length>0&&Za(_)}else vt[0]!="stop"&&vt[0]!="close"||ei(_,7);else _.I==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?ei(_,7):vl(_):vt[0]!="noop"&&_.l&&_.l.qa(vt),_.A=0)}}bt(4)}catch{}}var ln=class{constructor(d,y){this.g=d,this.map=y}};function ll(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ya(d){return d.h?1:d.g?d.g.size:0}function Ka(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function ul(d,y){d.g?d.g.add(y):d.h=y}function dl(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}ll.prototype.cancel=function(){if(this.i=fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function fl(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const _ of d.g.values())y=y.concat(_.G);return y}return M(d.i)}var Yc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gr(d,y){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const N=d[_].indexOf("=");let $,Z=null;N>=0?($=d[_].substring(0,N),Z=d[_].substring(N+1)):$=d[_],y($,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function Zn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof Zn?(this.l=d.l,vn(this,d.j),this.o=d.o,this.g=d.g,Zi(this,d.u),this.h=d.h,hl(this,Jc(d.i)),this.m=d.m):d&&(y=String(d).match(Yc))?(this.l=!1,vn(this,y[1]||"",!0),this.o=Qa(y[2]||""),this.g=Qa(y[3]||"",!0),Zi(this,y[4]),this.h=Qa(y[5]||"",!0),hl(this,y[6]||"",!0),this.m=Qa(y[7]||"")):(this.l=!1,this.i=new ts(null,this.l))}Zn.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(nr(y,$r,!0),":");var _=this.g;return(_||y=="file")&&(d.push("//"),(y=this.o)&&d.push(nr(y,$r,!0),"@"),d.push(xi(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(nr(_,_.charAt(0)=="/"?pl:Kc,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",nr(_,Qc)),d.join("")},Zn.prototype.resolve=function(d){const y=cn(this);let _=!!d.j;_?vn(y,d.j):_=!!d.o,_?y.o=d.o:_=!!d.g,_?y.g=d.g:_=d.u!=null;var N=d.h;if(_)Zi(y,d.u);else if(_=!!d.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var $=y.h.lastIndexOf("/");$!=-1&&(N=y.h.slice(0,$+1)+N)}if($=N,$==".."||$==".")N="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){N=$.lastIndexOf("/",0)==0,$=$.split("/");const Z=[];for(let ve=0;ve<$.length;){const Xe=$[ve++];Xe=="."?N&&ve==$.length&&Z.push(""):Xe==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),N&&ve==$.length&&Z.push("")):(Z.push(Xe),N=!0)}N=Z.join("/")}else N=$}return _?y.h=N:_=d.i.toString()!=="",_?hl(y,Jc(d.i)):_=!!d.m,_&&(y.m=d.m),y};function cn(d){return new Zn(d)}function vn(d,y,_){d.j=_?Qa(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Zi(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function hl(d,y,_){y instanceof ts?(d.i=y,Kr(d.i,d.l)):(_||(y=nr(y,es)),d.i=new ts(y,d.l))}function At(d,y,_){d.i.set(y,_)}function tr(d){return At(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Qa(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function nr(d,y,_){return typeof d=="string"?(d=encodeURI(d).replace(y,Un),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Un(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var $r=/[#\/\?@]/g,Kc=/[#\?:]/g,pl=/[#\?]/g,es=/[#\?@]/g,Qc=/#/g;function ts(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Bn(d){d.g||(d.g=new Map,d.h=0,d.i&&Gr(d.i,function(y,_){d.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}i=ts.prototype,i.add=function(d,y){Bn(this),this.i=null,d=ns(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(y),this.h+=1,this};function Xc(d,y){Bn(d),y=ns(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function ml(d,y){return Bn(d),y=ns(d,y),d.g.has(y)}i.forEach=function(d,y){Bn(this),this.g.forEach(function(_,N){_.forEach(function($){d.call(y,$,N,this)},this)},this)};function gl(d,y){Bn(d);let _=[];if(typeof y=="string")ml(d,y)&&(_=_.concat(d.g.get(ns(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)_=_.concat(d[y]);return _}i.set=function(d,y){return Bn(this),this.i=null,d=ns(this,d),ml(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},i.get=function(d,y){return d?(d=gl(this,d),d.length>0?String(d[0]):y):y};function Yr(d,y,_){Xc(d,y),_.length>0&&(d.i=null,d.g.set(ns(d,y),M(_)),d.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let N=0;N<y.length;N++){var _=y[N];const $=xi(_);_=gl(this,_);for(let Z=0;Z<_.length;Z++){let ve=$;_[Z]!==""&&(ve+="="+xi(_[Z])),d.push(ve)}}return this.i=d.join("&")};function Jc(d){const y=new ts;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function ns(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function Kr(d,y){y&&!d.j&&(Bn(d),d.i=null,d.g.forEach(function(_,N){const $=N.toLowerCase();N!=$&&(Xc(this,N),Yr(this,$,_))},d)),d.j=y}function Ca(d,y){const _=new Ta;if(f.Image){const N=new Image;N.onload=v(fa,_,"TestLoadImage: loaded",!0,y,N),N.onerror=v(fa,_,"TestLoadImage: error",!1,y,N),N.onabort=v(fa,_,"TestLoadImage: abort",!1,y,N),N.ontimeout=v(fa,_,"TestLoadImage: timeout",!1,y,N),f.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else y(!1)}function bl(d,y){const _=new Ta,N=new AbortController,$=setTimeout(()=>{N.abort(),fa(_,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:N.signal}).then(Z=>{clearTimeout($),Z.ok?fa(_,"TestPingServer: ok",!0,y):fa(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),fa(_,"TestPingServer: error",!1,y)})}function fa(d,y,_,N,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),N(_)}catch{}}function as(){this.g=new xe}function Xa(d){this.i=d.Sb||null,this.h=d.ab||!1}E(Xa,dt),Xa.prototype.g=function(){return new ar(this.i,this.h)};function ar(d,y){de.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(ar,de),i=ar.prototype,i.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,Ia(this)},i.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||f).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,is(this)),this.readyState=0},i.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ia(this)),this.g&&(this.readyState=3,Ia(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Qr(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Qr(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}i.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?is(this):Ia(this),this.readyState==3&&Qr(this)}},i.Oa=function(d){this.g&&(this.response=this.responseText=d,is(this))},i.Na=function(d){this.g&&(this.response=d,is(this))},i.ga=function(){this.g&&is(this)};function is(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Ia(d)}i.setRequestHeader=function(d,y){this.A.append(d,y)},i.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=y.next();return d.join(`\r
`)};function Ia(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ar.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ha(d){let y="";return Be(d,function(_,N){y+=N,y+=":",y+=_,y+=`\r
`}),y}function ir(d,y,_){e:{for(N in _){var N=!1;break e}N=!0}N||(_=ha(_),typeof d=="string"?_!=null&&xi(_):At(d,y,_))}function Tt(d){de.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Tt,de);var Ja=/^https?$/i,yl=["POST","PUT"];i=Tt.prototype,i.Fa=function(d){this.H=d},i.ea=function(d,y,_,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ol.g(),this.g.onreadystatechange=T(b(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(Z){sr(this,Z);return}if(d=_||"",_=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var $ in N)_.set($,N[$]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const Z of N.keys())_.set(Z,N.get(Z));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(_.keys()).find(Z=>Z.toLowerCase()=="content-type"),$=f.FormData&&d instanceof f.FormData,!(Array.prototype.indexOf.call(yl,y,void 0)>=0)||N||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,ve]of _)this.g.setRequestHeader(Z,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Z){sr(this,Z)}};function sr(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,xl(d),vi(d)}function xl(d){d.A||(d.A=!0,be(d,"complete"),be(d,"error"))}i.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,be(this,"complete"),be(this,"abort"),vi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vi(this,!0)),Tt.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?rr(this):this.Xa())},i.Xa=function(){rr(this)};function rr(d){if(d.h&&typeof u<"u"){if(d.v&&ja(d)==4)setTimeout(d.Ca.bind(d),0);else if(be(d,"readystatechange"),ja(d)==4){d.h=!1;try{const Z=d.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var N;if(N=Z===0){let ve=String(d.D).match(Yc)[1]||null;!ve&&f.self&&f.self.location&&(ve=f.self.location.protocol.slice(0,-1)),N=!Ja.test(ve?ve.toLowerCase():"")}_=N}if(_)be(d,"complete"),be(d,"success");else{d.o=6;try{var $=ja(d)>2?d.g.statusText:""}catch{$=""}d.l=$+" ["+d.ca()+"]",xl(d)}}finally{vi(d)}}}}function vi(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,y||be(d,"ready");try{_.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ja(d){return d.g?d.g.readyState:0}i.ca=function(){try{return ja(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),H(y)}};function An(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function _i(d){const y={};d=(d.g&&ja(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(S(d[N]))continue;var _=Fc(d[N]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Z=y[$]||[];y[$]=Z,Z.push(_)}Ue(y,function(N){return N.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wa(d,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||y}function ss(d){this.za=0,this.i=[],this.j=new Ta,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Wa("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Wa("baseRetryDelayMs",5e3,d),this.Za=Wa("retryDelaySeedMs",1e4,d),this.Ta=Wa("forwardChannelMaxRetries",2,d),this.va=Wa("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new ll(d&&d.concurrentRequestLimit),this.Ba=new as,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=ss.prototype,i.ka=8,i.I=1,i.connect=function(d,y,_,N){He(0),this.W=d,this.H=y||{},_&&N!==void 0&&(this.H.OSID=_,this.H.OAID=N),this.F=this.X,this.J=iu(this,null,this.W),Za(this)};function vl(d){if(Xr(d),d.I==3){var y=d.V++,_=cn(d.J);if(At(_,"SID",d.M),At(_,"RID",y),At(_,"TYPE","terminate"),or(d,_),y=new Na(d,d.j,y),y.M=2,y.A=tr(cn(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&f.Image&&(new Image().src=y.A,_=!0),_||(y.g=su(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Fa(y)}au(d)}function rs(d){d.g&&(El(d),d.g.cancel(),d.g=null)}function Xr(d){rs(d),d.v&&(f.clearTimeout(d.v),d.v=null),Wr(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&f.clearTimeout(d.m),d.m=null)}function Za(d){if(!cl(d.h)&&!d.m){d.m=!0;var y=d.Ea;he||C(),pe||(he(),pe=!0),I.add(y,d),d.D=0}}function Jr(d,y){return Ya(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Jn(b(d.Ea,d,y),nu(d,d.D)),d.D++,!0)}i.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const $=new Na(this,this.j,d);let Z=this.o;if(this.U&&(Z?(Z=V(Z),ge(Z,this.U)):Z=this.U),this.u!==null||this.R||($.J=Z,Z=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var N=this.i[_];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(y+=N,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Wc(this,$,y),_=cn(this.J),At(_,"RID",d),At(_,"CVER",22),this.G&&At(_,"X-HTTP-Session-Id",this.G),or(this,_),Z&&(this.R?y="headers="+xi(ha(Z))+"&"+y:this.u&&ir(_,this.u,Z)),ul(this.h,$),this.Ra&&At(_,"TYPE","init"),this.S?(At(_,"$req",y),At(_,"SID","null"),$.U=!0,qa($,_,null)):qa($,_,y),this.I=2}}else this.I==3&&(d?_l(this,d):this.i.length==0||cl(this.h)||_l(this))};function _l(d,y){var _;y?_=y.l:_=d.V++;const N=cn(d.J);At(N,"SID",d.M),At(N,"RID",_),At(N,"AID",d.K),or(d,N),d.u&&d.o&&ir(N,d.u,d.o),_=new Na(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),y&&(d.i=y.G.concat(d.i)),y=Wc(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),ul(d.h,_),qa(_,N,y)}function or(d,y){d.H&&Be(d.H,function(_,N){At(y,N,_)}),d.l&&Be({},function(_,N){At(y,N,_)})}function Wc(d,y,_){_=Math.min(d.i.length,_);const N=d.l?b(d.l.Ka,d.l,d):null;e:{var $=d.i;let Xe=-1;for(;;){const Wt=["count="+_];Xe==-1?_>0?(Xe=$[0].g,Wt.push("ofs="+Xe)):Xe=0:Wt.push("ofs="+Xe);let vt=!0;for(let zt=0;zt<_;zt++){var Z=$[zt].g;const pa=$[zt].map;if(Z-=Xe,Z<0)Xe=Math.max(0,$[zt].g-100),vt=!1;else try{Z="req"+Z+"_"||"";try{var ve=pa instanceof Map?pa:Object.entries(pa);for(const[ti,ka]of ve){let Oa=ka;m(ka)&&(Oa=$e(ka)),Wt.push(Z+ti+"="+encodeURIComponent(Oa))}}catch(ti){throw Wt.push(Z+"type="+encodeURIComponent("_badmap")),ti}}catch{N&&N(pa)}}if(vt){ve=Wt.join("&");break e}}ve=void 0}return d=d.i.splice(0,_),y.G=d,ve}function Zc(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;he||C(),pe||(he(),pe=!0),I.add(y,d),d.A=0}}function lr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Jn(b(d.Da,d),nu(d,d.A)),d.A++,!0)}i.Da=function(){if(this.v=null,eu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Jn(b(this.Wa,this),d)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,He(10),rs(this),eu(this))};function El(d){d.B!=null&&(f.clearTimeout(d.B),d.B=null)}function eu(d){d.g=new Na(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=cn(d.na);At(y,"RID","rpc"),At(y,"SID",d.M),At(y,"AID",d.K),At(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&At(y,"TO",d.ia),At(y,"TYPE","xmlhttp"),or(d,y),d.u&&d.o&&ir(y,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=tr(cn(y)),_.u=null,_.R=!0,qr(_,d)}i.Va=function(){this.C!=null&&(this.C=null,rs(this),lr(this),He(19))};function Wr(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function tu(d,y){var _=null;if(d.g==y){Wr(d),El(d),d.g=null;var N=2}else if(Ka(d.h,y))_=y.G,dl(d.h,y),N=1;else return;if(d.I!=0){if(y.o)if(N==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var $=d.D;N=$t(),be(N,new Ht(N,_)),Za(d)}else Zc(d);else if($=y.m,$==3||$==0&&y.X>0||!(N==1&&Jr(d,y)||N==2&&lr(d)))switch(_&&_.length>0&&(y=d.h,y.i=y.i.concat(_)),$){case 1:ei(d,5);break;case 4:ei(d,10);break;case 3:ei(d,6);break;default:ei(d,2)}}}function nu(d,y){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*y}function ei(d,y){if(d.j.info("Error code "+y),y==2){var _=b(d.bb,d),N=d.Ua;const $=!N;N=new Zn(N||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||vn(N,"https"),tr(N),$?Ca(N.toString(),_):bl(N.toString(),_)}else He(2);d.I=0,d.l&&d.l.pa(y),au(d),Xr(d)}i.bb=function(d){d?(this.j.info("Successfully pinged google.com"),He(2)):(this.j.info("Failed to ping google.com"),He(1))};function au(d){if(d.I=0,d.ja=[],d.l){const y=fl(d.h);(y.length!=0||d.i.length!=0)&&(B(d.ja,y),B(d.ja,d.i),d.h.i.length=0,M(d.i),d.i.length=0),d.l.oa()}}function iu(d,y,_){var N=_ instanceof Zn?cn(_):new Zn(_);if(N.g!="")y&&(N.g=y+"."+N.g),Zi(N,N.u);else{var $=f.location;N=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;const Z=new Zn(null);N&&vn(Z,N),y&&(Z.g=y),$&&Zi(Z,$),_&&(Z.h=_),N=Z}return _=d.G,y=d.wa,_&&y&&At(N,_,y),At(N,"VER",d.ka),or(d,N),N}function su(d,y,_){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new Tt(new Xa({ab:_})):new Tt(d.ma),y.Fa(d.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ru(){}i=ru.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function os(){}os.prototype.g=function(d,y){return new zn(d,y)};function zn(d,y){de.call(this),this.g=new ss(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!S(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!S(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Ei(this)}E(zn,de),zn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},zn.prototype.close=function(){vl(this.g)},zn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=$e(d),d=_);y.i.push(new ln(y.Ya++,d)),y.I==3&&Za(y)},zn.prototype.N=function(){this.g.l=null,delete this.j,vl(this.g),delete this.g,zn.Z.N.call(this)};function ou(d){J.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const _ in y){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}E(ou,J);function lu(){Ye.call(this),this.status=1}E(lu,Ye);function Ei(d){this.g=d}E(Ei,ru),Ei.prototype.ra=function(){be(this.g,"a")},Ei.prototype.qa=function(d){be(this.g,new ou(d))},Ei.prototype.pa=function(d){be(this.g,new lu)},Ei.prototype.oa=function(){be(this.g,"b")},os.prototype.createWebChannel=os.prototype.g,zn.prototype.send=zn.prototype.o,zn.prototype.open=zn.prototype.m,zn.prototype.close=zn.prototype.close,A1=function(){return new os},E1=function(){return $t()},_1=We,lm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Zs.NO_ERROR=0,Zs.TIMEOUT=8,Zs.HTTP_ERROR=6,Td=Zs,rl.COMPLETE="complete",v1=rl,Gt.EventType=ft,ft.OPEN="a",ft.CLOSE="b",ft.ERROR="c",ft.MESSAGE="d",de.prototype.listen=de.prototype.J,dc=Gt,Tt.prototype.listenOnce=Tt.prototype.K,Tt.prototype.getLastError=Tt.prototype.Ha,Tt.prototype.getLastErrorCode=Tt.prototype.ya,Tt.prototype.getStatus=Tt.prototype.ca,Tt.prototype.getResponseJson=Tt.prototype.La,Tt.prototype.getResponseText=Tt.prototype.la,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Fa,x1=Tt}).apply(typeof pd<"u"?pd:typeof self<"u"?self:typeof window<"u"?window:{});class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");let el="12.8.0";function SC(i){el=i}const Or=new Vm("@firebase/firestore");function Io(){return Or.logLevel}function we(i,...e){if(Or.logLevel<=rt.DEBUG){const n=e.map(Xm);Or.debug(`Firestore (${el}): ${i}`,...n)}}function Ki(i,...e){if(Or.logLevel<=rt.ERROR){const n=e.map(Xm);Or.error(`Firestore (${el}): ${i}`,...n)}}function qo(i,...e){if(Or.logLevel<=rt.WARN){const n=e.map(Xm);Or.warn(`Firestore (${el}): ${i}`,...n)}}function Xm(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function Le(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,w1(i,s,n)}function w1(i,e,n){let s=`FIRESTORE (${el}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ki(s),new Error(s)}function Et(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||w1(e,o,s)}function Qe(i,e){return i}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends bi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class S1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Mn.UNAUTHENTICATED)))}shutdown(){}}class NC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class RC{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Et(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new qi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new qi,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new qi)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Et(typeof s.accessToken=="string",31837,{l:s}),new S1(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string",2055,{h:e}),new Mn(e)}}class CC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class IC{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new CC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Zx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,oa(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Et(this.o===void 0,3512);const s=u=>{u.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,we("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Zx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Zx(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function kC(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Jm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=kC(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function ot(i,e){return i<e?-1:i>e?1:0}function cm(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return Fp(o)===Fp(u)?ot(o,u):Fp(o)?1:-1}return ot(i.length,e.length)}const OC=55296,DC=57343;function Fp(i){const e=i.charCodeAt(0);return e>=OC&&e<=DC}function Fo(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const ev="__name__";class oi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Le(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Le(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return oi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof oi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=oi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return ot(e.length,n.length)}static compareSegments(e,n){const s=oi.isNumericId(e),o=oi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?oi.extractNumericId(e).compare(oi.extractNumericId(n)):cm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zs.fromString(e.substring(4,e.length-2))}}class Dt extends oi{construct(e,n,s){return new Dt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new Ae(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new Dt(n)}static emptyPath(){return new Dt([])}}const MC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cn extends oi{construct(e,n,s){return new Cn(e,n,s)}static isValidIdentifier(e){return MC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ev}static keyField(){return new Cn([ev])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new Ae(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new Ae(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ae(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(s+=m,o++):(u(),o++)}if(u(),f)throw new Ae(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cn(n)}static emptyPath(){return new Cn([])}}class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(Dt.fromString(e))}static fromName(e){return new Oe(Dt.fromString(e).popFirst(5))}static empty(){return new Oe(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new Dt(e.slice()))}}function T1(i,e,n){if(!n)throw new Ae(oe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function PC(i,e,n,s){if(e===!0&&s===!0)throw new Ae(oe.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function tv(i){if(!Oe.isDocumentKey(i))throw new Ae(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function nv(i){if(Oe.isDocumentKey(i))throw new Ae(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function N1(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function df(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Le(12329,{type:typeof i})}function Xn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ae(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=df(i);throw new Ae(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function gn(i,e){const n={typeString:i};return e&&(n.value=e),n}function zc(i,e){if(!N1(i))throw new Ae(oe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const f=i[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new Ae(oe.INVALID_ARGUMENT,n);return!0}const av=-62135596800,iv=1e6;class Vt{static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*iv);return new Vt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ae(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<av)throw new Ae(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iv}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zc(e,Vt._jsonSchema))return new Vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-av;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Vt._jsonSchemaVersion="firestore/timestamp/1.0",Vt._jsonSchema={type:gn("string",Vt._jsonSchemaVersion),seconds:gn("number"),nanoseconds:gn("number")};class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new Vt(0,0))}static max(){return new Fe(new Vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const wc=-1;function VC(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Fe.fromTimestamp(s===1e9?new Vt(n+1,0):new Vt(n,s));return new Bs(o,Oe.empty(),e)}function zC(i){return new Bs(i.readTime,i.key,wc)}class Bs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Bs(Fe.min(),Oe.empty(),wc)}static max(){return new Bs(Fe.max(),Oe.empty(),wc)}}function LC(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Oe.comparator(i.documentKey,e.documentKey),n!==0?n:ot(i.largestBatchId,e.largestBatchId))}const UC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function tl(i){if(i.code!==oe.FAILED_PRECONDITION||i.message!==UC)throw i;we("LocalStore","Unexpectedly lost primary lease")}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ue(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ue?n:ue.resolve(n)}catch(n){return ue.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ue.reject(n)}static resolve(e){return new ue(((n,s)=>{n(e)}))}static reject(e){return new ue(((n,s)=>{s(e)}))}static waitFor(e){return new ue(((n,s)=>{let o=0,u=0,f=!1;e.forEach((m=>{++o,m.next((()=>{++u,f&&u===o&&n()}),(g=>s(g)))})),f=!0,u===o&&n()}))}static or(e){let n=ue.resolve(!1);for(const s of e)n=n.next((o=>o?ue.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ue(((s,o)=>{const u=e.length,f=new Array(u);let m=0;for(let g=0;g<u;g++){const b=g;n(e[b]).next((v=>{f[b]=v,++m,m===u&&s(f)}),(v=>o(v)))}}))}static doWhile(e,n){return new ue(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function HC(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nl(i){return i.name==="IndexedDbTransactionError"}class ff{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ff.ce=-1;const Wm=-1;function hf(i){return i==null}function Bd(i){return i===0&&1/i==-1/0}function qC(i){return typeof i=="number"&&Number.isInteger(i)&&!Bd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const R1="";function FC(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=sv(e)),e=GC(i.get(n),e);return sv(e)}function GC(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case R1:n+="";break;default:n+=u}}return n}function sv(i){return i+R1+""}function rv(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Qs(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function C1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class qt{constructor(e,n){this.comparator=e,this.root=n||Rn.EMPTY}insert(e,n){return new qt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(e){return new qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Rn.RED,this.left=o??Rn.EMPTY,this.right=u??Rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Rn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Rn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Rn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(e){this.comparator=e,this.data=new qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ov(this.data.getIterator())}getIteratorFrom(e){return new ov(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new yn(this.comparator);return n.data=e,n}}class ov{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class la{constructor(e){this.fields=e,e.sort(Cn.comparator)}static empty(){return new la([])}unionWith(e){let n=new yn(Cn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new la(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class I1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new I1("Invalid base64 string: "+u):u}})(e);return new kn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new kn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const $C=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hs(i){if(Et(!!i,39018),typeof i=="string"){let e=0;const n=$C.exec(i);if(Et(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:tn(i.seconds),nanos:tn(i.nanos)}}function tn(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function qs(i){return typeof i=="string"?kn.fromBase64String(i):kn.fromUint8Array(i)}const j1="server_timestamp",k1="__type__",O1="__previous_value__",D1="__local_write_time__";function Zm(i){return(i?.mapValue?.fields||{})[k1]?.stringValue===j1}function pf(i){const e=i.mapValue.fields[O1];return Zm(e)?pf(e):e}function Sc(i){const e=Hs(i.mapValue.fields[D1].timestampValue);return new Vt(e.seconds,e.nanos)}class YC{constructor(e,n,s,o,u,f,m,g,b,v,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=b,this.isUsingEmulator=v,this.apiKey=E}}const Hd="(default)";class Tc{constructor(e,n){this.projectId=e,this.database=n||Hd}static empty(){return new Tc("","")}get isDefaultDatabase(){return this.database===Hd}isEqual(e){return e instanceof Tc&&e.projectId===this.projectId&&e.database===this.database}}function KC(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ae(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tc(i.options.projectId,e)}const M1="__type__",QC="__max__",gd={mapValue:{}},P1="__vector__",qd="value";function Fs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Zm(i)?4:JC(i)?9007199254740991:XC(i)?10:11:Le(28295,{value:i})}function pi(i,e){if(i===e)return!0;const n=Fs(i);if(n!==Fs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Sc(i).isEqual(Sc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Hs(o.timestampValue),m=Hs(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return qs(o.bytesValue).isEqual(qs(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return tn(o.geoPointValue.latitude)===tn(u.geoPointValue.latitude)&&tn(o.geoPointValue.longitude)===tn(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return tn(o.integerValue)===tn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=tn(o.doubleValue),m=tn(u.doubleValue);return f===m?Bd(f)===Bd(m):isNaN(f)&&isNaN(m)}return!1})(i,e);case 9:return Fo(i.arrayValue.values||[],e.arrayValue.values||[],pi);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(rv(f)!==rv(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!pi(f[g],m[g])))return!1;return!0})(i,e);default:return Le(52216,{left:i})}}function Nc(i,e){return(i.values||[]).find((n=>pi(n,e)))!==void 0}function Go(i,e){if(i===e)return 0;const n=Fs(i),s=Fs(e);if(n!==s)return ot(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(i.booleanValue,e.booleanValue);case 2:return(function(u,f){const m=tn(u.integerValue||u.doubleValue),g=tn(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return lv(i.timestampValue,e.timestampValue);case 4:return lv(Sc(i),Sc(e));case 5:return cm(i.stringValue,e.stringValue);case 6:return(function(u,f){const m=qs(u),g=qs(f);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(u,f){const m=u.split("/"),g=f.split("/");for(let b=0;b<m.length&&b<g.length;b++){const v=ot(m[b],g[b]);if(v!==0)return v}return ot(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,f){const m=ot(tn(u.latitude),tn(f.latitude));return m!==0?m:ot(tn(u.longitude),tn(f.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return cv(i.arrayValue,e.arrayValue);case 10:return(function(u,f){const m=u.fields||{},g=f.fields||{},b=m[qd]?.arrayValue,v=g[qd]?.arrayValue,E=ot(b?.values?.length||0,v?.values?.length||0);return E!==0?E:cv(b,v)})(i.mapValue,e.mapValue);case 11:return(function(u,f){if(u===gd.mapValue&&f===gd.mapValue)return 0;if(u===gd.mapValue)return 1;if(f===gd.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),b=f.fields||{},v=Object.keys(b);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const T=cm(g[E],v[E]);if(T!==0)return T;const M=Go(m[g[E]],b[v[E]]);if(M!==0)return M}return ot(g.length,v.length)})(i.mapValue,e.mapValue);default:throw Le(23264,{he:n})}}function lv(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return ot(i,e);const n=Hs(i),s=Hs(e),o=ot(n.seconds,s.seconds);return o!==0?o:ot(n.nanos,s.nanos)}function cv(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Go(n[o],s[o]);if(u)return u}return ot(n.length,s.length)}function $o(i){return um(i)}function um(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=Hs(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return qs(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Oe.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=um(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${um(n.fields[f])}`;return o+"}"})(i.mapValue):Le(61005,{value:i})}function Nd(i){switch(Fs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pf(i);return e?16+Nd(e):16;case 5:return 2*i.stringValue.length;case 6:return qs(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Nd(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Qs(s.fields,((u,f)=>{o+=u.length+Nd(f)})),o})(i.mapValue);default:throw Le(13486,{value:i})}}function uv(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function dm(i){return!!i&&"integerValue"in i}function eg(i){return!!i&&"arrayValue"in i}function dv(i){return!!i&&"nullValue"in i}function fv(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Rd(i){return!!i&&"mapValue"in i}function XC(i){return(i?.mapValue?.fields||{})[M1]?.stringValue===P1}function bc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Qs(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=bc(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bc(i.arrayValue.values[n]);return e}return{...i}}function JC(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===QC}class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Rd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bc(n)}setAll(e){let n=Cn.emptyPath(),s={},o=[];e.forEach(((f,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}f?s[m.lastSegment()]=bc(f):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Rd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Rd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Qs(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Kn(bc(this.value))}}function V1(i){const e=[];return Qs(i.fields,((n,s)=>{const o=new Cn([n]);if(Rd(s)){const u=V1(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new la(e)}class Pn{constructor(e,n,s,o,u,f,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new Pn(e,0,Fe.min(),Fe.min(),Fe.min(),Kn.empty(),0)}static newFoundDocument(e,n,s,o){return new Pn(e,1,n,Fe.min(),s,o,0)}static newNoDocument(e,n){return new Pn(e,2,n,Fe.min(),Fe.min(),Kn.empty(),0)}static newUnknownDocument(e,n){return new Pn(e,3,n,Fe.min(),Fe.min(),Kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fd{constructor(e,n){this.position=e,this.inclusive=n}}function hv(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],f=i.position[o];if(u.field.isKeyField()?s=Oe.comparator(Oe.fromName(f.referenceValue),n.key):s=Go(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function pv(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!pi(i.position[n],e.position[n]))return!1;return!0}class Rc{constructor(e,n="asc"){this.field=e,this.dir=n}}function WC(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class z1{}class mn extends z1{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new eI(e,n,s):n==="array-contains"?new aI(e,s):n==="in"?new iI(e,s):n==="not-in"?new sI(e,s):n==="array-contains-any"?new rI(e,s):new mn(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new tI(e,s):new nI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Go(n,this.value)):n!==null&&Fs(this.value)===Fs(n)&&this.matchesComparison(Go(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ba extends z1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ba(e,n)}matches(e){return L1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function L1(i){return i.op==="and"}function U1(i){return ZC(i)&&L1(i)}function ZC(i){for(const e of i.filters)if(e instanceof Ba)return!1;return!0}function fm(i){if(i instanceof mn)return i.field.canonicalString()+i.op.toString()+$o(i.value);if(U1(i))return i.filters.map((e=>fm(e))).join(",");{const e=i.filters.map((n=>fm(n))).join(",");return`${i.op}(${e})`}}function B1(i,e){return i instanceof mn?(function(s,o){return o instanceof mn&&s.op===o.op&&s.field.isEqual(o.field)&&pi(s.value,o.value)})(i,e):i instanceof Ba?(function(s,o){return o instanceof Ba&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,m)=>u&&B1(f,o.filters[m])),!0):!1})(i,e):void Le(19439)}function H1(i){return i instanceof mn?(function(n){return`${n.field.canonicalString()} ${n.op} ${$o(n.value)}`})(i):i instanceof Ba?(function(n){return n.op.toString()+" {"+n.getFilters().map(H1).join(" ,")+"}"})(i):"Filter"}class eI extends mn{constructor(e,n,s){super(e,n,s),this.key=Oe.fromName(s.referenceValue)}matches(e){const n=Oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class tI extends mn{constructor(e,n){super(e,"in",n),this.keys=q1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class nI extends mn{constructor(e,n){super(e,"not-in",n),this.keys=q1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function q1(i,e){return(e.arrayValue?.values||[]).map((n=>Oe.fromName(n.referenceValue)))}class aI extends mn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return eg(n)&&Nc(n.arrayValue,this.value)}}class iI extends mn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Nc(this.value.arrayValue,n)}}class sI extends mn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Nc(this.value.arrayValue,n)}}class rI extends mn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Nc(this.value.arrayValue,s)))}}class oI{constructor(e,n=null,s=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function mv(i,e=null,n=[],s=[],o=null,u=null,f=null){return new oI(i,e,n,s,o,u,f)}function tg(i){const e=Qe(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>fm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),hf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>$o(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>$o(s))).join(",")),e.Te=n}return e.Te}function ng(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!WC(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!B1(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!pv(i.startAt,e.startAt)&&pv(i.endAt,e.endAt)}function hm(i){return Oe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class al{constructor(e,n=null,s=[],o=[],u=null,f="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function lI(i,e,n,s,o,u,f,m){return new al(i,e,n,s,o,u,f,m)}function mf(i){return new al(i)}function gv(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function cI(i){return Oe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function F1(i){return i.collectionGroup!==null}function yc(i){const e=Qe(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new yn(Cn.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((b=>{b.isInequality()&&(m=m.add(b.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Rc(u,s))})),n.has(Cn.keyField().canonicalString())||e.Ie.push(new Rc(Cn.keyField(),s))}return e.Ie}function di(i){const e=Qe(i);return e.Ee||(e.Ee=uI(e,yc(i))),e.Ee}function uI(i,e){if(i.limitType==="F")return mv(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Rc(o.field,u)}));const n=i.endAt?new Fd(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Fd(i.startAt.position,i.startAt.inclusive):null;return mv(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function pm(i,e){const n=i.filters.concat([e]);return new al(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function dI(i,e){const n=i.explicitOrderBy.concat([e]);return new al(i.path,i.collectionGroup,n,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function mm(i,e,n){return new al(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function gf(i,e){return ng(di(i),di(e))&&i.limitType===e.limitType}function G1(i){return`${tg(di(i))}|lt:${i.limitType}`}function jo(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>H1(o))).join(", ")}]`),hf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>$o(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>$o(o))).join(",")),`Target(${s})`})(di(i))}; limitType=${i.limitType})`}function bf(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Oe.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of yc(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(f,m,g){const b=hv(f,m,g);return f.inclusive?b<=0:b<0})(s.startAt,yc(s),o)||s.endAt&&!(function(f,m,g){const b=hv(f,m,g);return f.inclusive?b>=0:b>0})(s.endAt,yc(s),o))})(i,e)}function fI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function $1(i){return(e,n)=>{let s=!1;for(const o of yc(i)){const u=hI(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function hI(i,e,n){const s=i.field.isKeyField()?Oe.comparator(e.key,n.key):(function(u,f,m){const g=f.data.field(u),b=m.data.field(u);return g!==null&&b!==null?Go(g,b):Le(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Le(19790,{direction:i.dir})}}class Ur{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Qs(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return C1(this.inner)}size(){return this.innerSize}}const pI=new qt(Oe.comparator);function Qi(){return pI}const Y1=new qt(Oe.comparator);function fc(...i){let e=Y1;for(const n of i)e=e.insert(n.key,n);return e}function K1(i){let e=Y1;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Tr(){return xc()}function Q1(){return xc()}function xc(){return new Ur((i=>i.toString()),((i,e)=>i.isEqual(e)))}const mI=new qt(Oe.comparator),gI=new yn(Oe.comparator);function lt(...i){let e=gI;for(const n of i)e=e.add(n);return e}const bI=new yn(ot);function yI(){return bI}function ag(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function X1(i){return{integerValue:""+i}}function xI(i,e){return qC(e)?X1(e):ag(i,e)}class yf{constructor(){this._=void 0}}function vI(i,e,n){return i instanceof Cc?(function(o,u){const f={fields:{[k1]:{stringValue:j1},[D1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Zm(u)&&(u=pf(u)),u&&(f.fields[O1]=u),{mapValue:f}})(n,e):i instanceof Yo?W1(i,e):i instanceof Ko?Z1(i,e):(function(o,u){const f=J1(o,u),m=bv(f)+bv(o.Ae);return dm(f)&&dm(o.Ae)?X1(m):ag(o.serializer,m)})(i,e)}function _I(i,e,n){return i instanceof Yo?W1(i,e):i instanceof Ko?Z1(i,e):n}function J1(i,e){return i instanceof Gd?(function(s){return dm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Cc extends yf{}class Yo extends yf{constructor(e){super(),this.elements=e}}function W1(i,e){const n=eE(e);for(const s of i.elements)n.some((o=>pi(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Ko extends yf{constructor(e){super(),this.elements=e}}function Z1(i,e){let n=eE(e);for(const s of i.elements)n=n.filter((o=>!pi(o,s)));return{arrayValue:{values:n}}}class Gd extends yf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function bv(i){return tn(i.integerValue||i.doubleValue)}function eE(i){return eg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class ig{constructor(e,n){this.field=e,this.transform=n}}function EI(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Yo&&o instanceof Yo||s instanceof Ko&&o instanceof Ko?Fo(s.elements,o.elements,pi):s instanceof Gd&&o instanceof Gd?pi(s.Ae,o.Ae):s instanceof Cc&&o instanceof Cc})(i.transform,e.transform)}class AI{constructor(e,n){this.version=e,this.transformResults=n}}class wa{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wa}static exists(e){return new wa(void 0,e)}static updateTime(e){return new wa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class xf{}function tE(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new sg(i.key,wa.none()):new Lc(i.key,i.data,wa.none());{const n=i.data,s=Kn.empty();let o=new yn(Cn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new Xs(i.key,s,new la(o.toArray()),wa.none())}}function wI(i,e,n){i instanceof Lc?(function(o,u,f){const m=o.value.clone(),g=xv(o.fieldTransforms,u,f.transformResults);m.setAll(g),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(i,e,n):i instanceof Xs?(function(o,u,f){if(!Cd(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=xv(o.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(nE(o)),g.setAll(m),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(i,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function vc(i,e,n,s){return i instanceof Lc?(function(u,f,m,g){if(!Cd(u.precondition,f))return m;const b=u.value.clone(),v=vv(u.fieldTransforms,g,f);return b.setAll(v),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),null})(i,e,n,s):i instanceof Xs?(function(u,f,m,g){if(!Cd(u.precondition,f))return m;const b=vv(u.fieldTransforms,g,f),v=f.data;return v.setAll(nE(u)),v.setAll(b),f.convertToFoundDocument(f.version,v).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((E=>E.field)))})(i,e,n,s):(function(u,f,m){return Cd(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m})(i,e,n)}function SI(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=J1(s.transform,o||null);u!=null&&(n===null&&(n=Kn.empty()),n.set(s.field,u))}return n||null}function yv(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Fo(s,o,((u,f)=>EI(u,f)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Lc extends xf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Xs extends xf{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function nE(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function xv(i,e,n){const s=new Map;Et(i.length===n.length,32656,{Ve:n.length,de:i.length});for(let o=0;o<n.length;o++){const u=i[o],f=u.transform,m=e.data.field(u.field);s.set(u.field,_I(f,m,n[o]))}return s}function vv(i,e,n){const s=new Map;for(const o of i){const u=o.transform,f=n.data.field(o.field);s.set(o.field,vI(u,f,e))}return s}class sg extends xf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TI extends xf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class NI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&wI(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=vc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=vc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Q1();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const g=tE(f,m);g!==null&&s.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(Fe.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),lt())}isEqual(e){return this.batchId===e.batchId&&Fo(this.mutations,e.mutations,((n,s)=>yv(n,s)))&&Fo(this.baseMutations,e.baseMutations,((n,s)=>yv(n,s)))}}class rg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Et(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return mI})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new rg(e,n,s,o)}}class RI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class CI{constructor(e,n){this.count=e,this.unchangedNames=n}}var pn,pt;function II(i){switch(i){case oe.OK:return Le(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Le(15467,{code:i})}}function aE(i){if(i===void 0)return Ki("GRPC error has no .code"),oe.UNKNOWN;switch(i){case pn.OK:return oe.OK;case pn.CANCELLED:return oe.CANCELLED;case pn.UNKNOWN:return oe.UNKNOWN;case pn.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case pn.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case pn.INTERNAL:return oe.INTERNAL;case pn.UNAVAILABLE:return oe.UNAVAILABLE;case pn.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case pn.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case pn.NOT_FOUND:return oe.NOT_FOUND;case pn.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case pn.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case pn.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case pn.ABORTED:return oe.ABORTED;case pn.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case pn.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case pn.DATA_LOSS:return oe.DATA_LOSS;default:return Le(39323,{code:i})}}(pt=pn||(pn={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";function jI(){return new TextEncoder}const kI=new zs([4294967295,4294967295],0);function _v(i){const e=jI().encode(i),n=new y1;return n.update(e),new Uint8Array(n.digest())}function Ev(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new zs([n,s],0),new zs([o,u],0)]}class og{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new hc(`Invalid padding: ${n}`);if(s<0)throw new hc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new hc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new hc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=zs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(zs.fromNumber(s)));return o.compare(kI)===1&&(o=new zs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=_v(e),[s,o]=Ev(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new og(u,o,n);return s.forEach((m=>f.insert(m))),f}insert(e){if(this.ge===0)return;const n=_v(e),[s,o]=Ev(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.be(f)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class hc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Uc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new vf(Fe.min(),o,new qt(ot),Qi(),lt())}}class Uc{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Uc(s,n,lt(),lt(),lt())}}class Id{constructor(e,n,s,o){this.Se=e,this.removedTargetIds=n,this.key=s,this.De=o}}class iE{constructor(e,n){this.targetId=e,this.Ce=n}}class sE{constructor(e,n,s=kn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Av{constructor(){this.ve=0,this.Fe=wv(),this.Me=kn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=lt(),n=lt(),s=lt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Le(38017,{changeType:u})}})),new Uc(this.Me,this.xe,e,n,s)}Ke(){this.Oe=!1,this.Fe=wv()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Et(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class OI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qi(),this.He=bd(),this.Je=bd(),this.Ze=new qt(ot)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(hm(u))if(s===0){const f=new Oe(u.path);this.et(n,f,Pn.newNoDocument(f,Fe.min()))}else Et(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const m=this.ut(e),g=m?this.ct(m,e,f):1;if(g!==0){this.it(n);const b=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,b)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=qs(s).toUint8Array()}catch(g){if(g instanceof I1)return qo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new og(f,o,u)}catch(g){return qo(g instanceof hc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const m=this.ot(f);if(m){if(u.current&&hm(m.target)){const g=new Oe(m.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,Pn.newNoDocument(g,e))}u.Be&&(n.set(f,u.ke()),u.Ke())}}));let s=lt();this.Je.forEach(((u,f)=>{let m=!0;f.forEachWhile((g=>{const b=this.ot(g);return!b||b.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new vf(e,n,this.Ze,this.je,s);return this.je=Qi(),this.He=bd(),this.Je=bd(),this.Ze=new qt(ot),o}Ye(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,s),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Av,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new yn(ot),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new yn(ot),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||we("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Av),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function bd(){return new qt(Oe.comparator)}function wv(){return new qt(Oe.comparator)}const DI={asc:"ASCENDING",desc:"DESCENDING"},MI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PI={and:"AND",or:"OR"};class VI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gm(i,e){return i.useProto3Json||hf(e)?e:{value:e}}function $d(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rE(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function zI(i,e){return $d(i,e.toTimestamp())}function fi(i){return Et(!!i,49232),Fe.fromTimestamp((function(n){const s=Hs(n);return new Vt(s.seconds,s.nanos)})(i))}function lg(i,e){return bm(i,e).canonicalString()}function bm(i,e){const n=(function(o){return new Dt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function oE(i){const e=Dt.fromString(i);return Et(fE(e),10190,{key:e.toString()}),e}function ym(i,e){return lg(i.databaseId,e.path)}function Gp(i,e){const n=oE(e);if(n.get(1)!==i.databaseId.projectId)throw new Ae(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ae(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Oe(cE(n))}function lE(i,e){return lg(i.databaseId,e)}function LI(i){const e=oE(i);return e.length===4?Dt.emptyPath():cE(e)}function xm(i){return new Dt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function cE(i){return Et(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function Sv(i,e,n){return{name:ym(i,e),fields:n.value.mapValue.fields}}function UI(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(b){return b==="NO_CHANGE"?0:b==="ADD"?1:b==="REMOVE"?2:b==="CURRENT"?3:b==="RESET"?4:Le(39313,{state:b})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(b,v){return b.useProto3Json?(Et(v===void 0||typeof v=="string",58123),kn.fromBase64String(v||"")):(Et(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),kn.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&(function(b){const v=b.code===void 0?oe.UNKNOWN:aE(b.code);return new Ae(v,b.message||"")})(f);n=new sE(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Gp(i,s.document.name),u=fi(s.document.updateTime),f=s.document.createTime?fi(s.document.createTime):Fe.min(),m=new Kn({mapValue:{fields:s.document.fields}}),g=Pn.newFoundDocument(o,u,f,m),b=s.targetIds||[],v=s.removedTargetIds||[];n=new Id(b,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Gp(i,s.document),u=s.readTime?fi(s.readTime):Fe.min(),f=Pn.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Id([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Gp(i,s.document),u=s.removedTargetIds||[];n=new Id([],u,o,null)}else{if(!("filter"in e))return Le(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new CI(o,u),m=s.targetId;n=new iE(m,f)}}return n}function BI(i,e){let n;if(e instanceof Lc)n={update:Sv(i,e.key,e.value)};else if(e instanceof sg)n={delete:ym(i,e.key)};else if(e instanceof Xs)n={update:Sv(i,e.key,e.data),updateMask:XI(e.fieldMask)};else{if(!(e instanceof TI))return Le(16599,{dt:e.type});n={verify:ym(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const m=f.transform;if(m instanceof Cc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Yo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ko)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Gd)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Le(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:zI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Le(27497)})(i,e.precondition)),n}function HI(i,e){return i&&i.length>0?(Et(e!==void 0,14353),i.map((n=>(function(o,u){let f=o.updateTime?fi(o.updateTime):fi(u);return f.isEqual(Fe.min())&&(f=fi(u)),new AI(f,o.transformResults||[])})(n,e)))):[]}function qI(i,e){return{documents:[lE(i,e.path)]}}function FI(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=lE(i,o);const u=(function(b){if(b.length!==0)return dE(Ba.create(b,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(b){if(b.length!==0)return b.map((v=>(function(T){return{field:ko(T.field),direction:YI(T.dir)}})(v)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=gm(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(b){return{before:b.inclusive,values:b.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(b){return{before:!b.inclusive,values:b.position}})(e.endAt)),{ft:n,parent:o}}function GI(i){let e=LI(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Et(s===1,65062);const v=n.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let u=[];n.where&&(u=(function(E){const T=uE(E);return T instanceof Ba&&U1(T)?T.getFilters():[T]})(n.where));let f=[];n.orderBy&&(f=(function(E){return E.map((T=>(function(B){return new Rc(Oo(B.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(T)))})(n.orderBy));let m=null;n.limit&&(m=(function(E){let T;return T=typeof E=="object"?E.value:E,hf(T)?null:T})(n.limit));let g=null;n.startAt&&(g=(function(E){const T=!!E.before,M=E.values||[];return new Fd(M,T)})(n.startAt));let b=null;return n.endAt&&(b=(function(E){const T=!E.before,M=E.values||[];return new Fd(M,T)})(n.endAt)),lI(e,o,f,u,m,"F",g,b)}function $I(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uE(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Oo(n.unaryFilter.field);return mn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Oo(n.unaryFilter.field);return mn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Oo(n.unaryFilter.field);return mn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Oo(n.unaryFilter.field);return mn.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(i):i.fieldFilter!==void 0?(function(n){return mn.create(Oo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Ba.create(n.compositeFilter.filters.map((s=>uE(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(n.compositeFilter.op))})(i):Le(30097,{filter:i})}function YI(i){return DI[i]}function KI(i){return MI[i]}function QI(i){return PI[i]}function ko(i){return{fieldPath:i.canonicalString()}}function Oo(i){return Cn.fromServerFormat(i.fieldPath)}function dE(i){return i instanceof mn?(function(n){if(n.op==="=="){if(fv(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NAN"}};if(dv(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fv(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NOT_NAN"}};if(dv(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(n.field),op:KI(n.op),value:n.value}}})(i):i instanceof Ba?(function(n){const s=n.getFilters().map((o=>dE(o)));return s.length===1?s[0]:{compositeFilter:{op:QI(n.op),filters:s}}})(i):Le(54877,{filter:i})}function XI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function fE(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function hE(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class Ms{constructor(e,n,s,o,u=Fe.min(),f=Fe.min(),m=kn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class JI{constructor(e){this.yt=e}}function WI(i){const e=GI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?mm(e,e.limit,"L"):e}class ZI{constructor(){this.Sn=new ej}addToCollectionParentIndex(e,n){return this.Sn.add(n),ue.resolve()}getCollectionParents(e,n){return ue.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return ue.resolve()}deleteFieldIndex(e,n){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,n){return ue.resolve()}getDocumentsMatchingTarget(e,n){return ue.resolve(null)}getIndexType(e,n){return ue.resolve(0)}getFieldIndexes(e,n){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,n){return ue.resolve(Bs.min())}getMinOffsetFromCollectionGroup(e,n){return ue.resolve(Bs.min())}updateCollectionGroup(e,n,s){return ue.resolve()}updateIndexEntries(e,n){return ue.resolve()}}class ej{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new yn(Dt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new yn(Dt.comparator)).toArray()}}const Tv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pE=41943040;class Yn{static withCacheSize(e){return new Yn(e,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(pE,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);class Qo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Qo(0)}static ar(){return new Qo(-1)}}const Nv="LruGarbageCollector",tj=1048576;function Rv([i,e],[n,s]){const o=ot(i,n);return o===0?ot(e,s):o}class nj{constructor(e){this.Pr=e,this.buffer=new yn(Rv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Rv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class aj{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){we(Nv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){nl(n)?we(Nv,"Ignoring IndexedDB error during garbage collection: ",n):await tl(n)}await this.Ar(3e5)}))}}class ij{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ue.resolve(ff.ce);const s=new nj(n);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(Tv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tv):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let s,o,u,f,m,g,b;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,f=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,m=Date.now(),this.removeTargets(e,s,n)))).next((E=>(u=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(b=Date.now(),Io()<=rt.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-v}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(b-g)+`ms
Total Duration: ${b-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:E}))))}}function sj(i,e){return new ij(i,e)}class rj{constructor(){this.changes=new Ur((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ue.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class oj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class lj{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&vc(s.mutation,o,la.empty(),Vt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,lt()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=lt()){const o=Tr();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=fc();return u.forEach(((m,g)=>{f=f.insert(m,g.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=Tr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,lt())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,m)=>{n.set(f,m)}))}))}computeViews(e,n,s,o){let u=Qi();const f=xc(),m=(function(){return xc()})();return n.forEach(((g,b)=>{const v=s.get(b.key);o.has(b.key)&&(v===void 0||v.mutation instanceof Xs)?u=u.insert(b.key,b):v!==void 0?(f.set(b.key,v.mutation.getFieldMask()),vc(v.mutation,b,v.mutation.getFieldMask(),Vt.now())):f.set(b.key,la.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((b,v)=>f.set(b,v))),n.forEach(((b,v)=>m.set(b,new oj(v,f.get(b)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=xc();let o=new qt(((f,m)=>f-m)),u=lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const m of f)m.keys().forEach((g=>{const b=n.get(g);if(b===null)return;let v=s.get(g)||la.empty();v=m.applyToLocalView(b,v),s.set(g,v);const E=(o.get(m.batchId)||lt()).add(g);o=o.insert(m.batchId,E)}))})).next((()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),b=g.key,v=g.value,E=Q1();v.forEach((T=>{if(!u.has(T)){const M=tE(n.get(T),s.get(T));M!==null&&E.set(T,M),u=u.add(T)}})),f.push(this.documentOverlayCache.saveOverlays(e,b,E))}return ue.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return cI(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):F1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ue.resolve(Tr());let m=wc,g=u;return f.next((b=>ue.forEach(b,((v,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),u.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{g=g.insert(v,T)}))))).next((()=>this.populateOverlays(e,b,u))).next((()=>this.computeViews(e,g,b,lt()))).next((v=>({batchId:m,changes:K1(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Oe(n)).next((s=>{let o=fc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=fc();return this.indexManager.getCollectionParents(e,u).next((m=>ue.forEach(m,(g=>{const b=(function(E,T){return new al(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,b,s,o).next((v=>{v.forEach(((E,T)=>{f=f.insert(E,T)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((g,b)=>{const v=b.getKey();f.get(v)===null&&(f=f.insert(v,Pn.newInvalidDocument(v)))}));let m=fc();return f.forEach(((g,b)=>{const v=u.get(g);v!==void 0&&vc(v.mutation,b,la.empty(),Vt.now()),bf(n,b)&&(m=m.insert(g,b))})),m}))}}class cj{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return ue.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:fi(o.createTime)}})(n)),ue.resolve()}getNamedQuery(e,n){return ue.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:WI(o.bundledQuery),readTime:fi(o.readTime)}})(n)),ue.resolve()}}class uj{constructor(){this.overlays=new qt(Oe.comparator),this.Lr=new Map}getOverlay(e,n){return ue.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Tr();return ue.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.bt(e,n,u)})),ue.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(s)),ue.resolve()}getOverlaysForCollection(e,n,s){const o=Tr(),u=n.length+1,f=new Oe(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,b=g.getKey();if(!n.isPrefixOf(b.path))break;b.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return ue.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new qt(((b,v)=>b-v));const f=this.overlays.getIterator();for(;f.hasNext();){const b=f.getNext().value;if(b.getKey().getCollectionGroup()===n&&b.largestBatchId>s){let v=u.get(b.largestBatchId);v===null&&(v=Tr(),u=u.insert(b.largestBatchId,v)),v.set(b.getKey(),b)}}const m=Tr(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((b,v)=>m.set(b,v))),!(m.size()>=o)););return ue.resolve(m)}bt(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new RI(n,s));let u=this.Lr.get(n);u===void 0&&(u=lt(),this.Lr.set(n,u)),this.Lr.set(n,u.add(s.key))}}class dj{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ue.resolve()}}class cg{constructor(){this.kr=new yn(En.Kr),this.qr=new yn(En.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const s=new En(e,n);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Wr(new En(e,n))}Qr(e,n){e.forEach((s=>this.removeReference(s,n)))}Gr(e){const n=new Oe(new Dt([])),s=new En(n,e),o=new En(n,e+1),u=[];return this.qr.forEachInRange([s,o],(f=>{this.Wr(f),u.push(f.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Oe(new Dt([])),s=new En(n,e),o=new En(n,e+1);let u=lt();return this.qr.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new En(e,0),s=this.kr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class En{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Oe.comparator(e.key,n.key)||ot(e.Hr,n.Hr)}static Ur(e,n){return ot(e.Hr,n.Hr)||Oe.comparator(e.key,n.key)}}class fj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new yn(En.Kr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new NI(u,n,s,o);this.mutationQueue.push(f);for(const m of o)this.Jr=this.Jr.add(new En(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ue.resolve(f)}lookupMutationBatch(e,n){return ue.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Xr(s),u=o<0?0:o;return ue.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?Wm:this.Yn-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new En(n,0),o=new En(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([s,o],(f=>{const m=this.Zr(f.Hr);u.push(m)})),ue.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new yn(ot);return n.forEach((o=>{const u=new En(o,0),f=new En(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,f],(m=>{s=s.add(m.Hr)}))})),ue.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Oe.isDocumentKey(u)||(u=u.child(""));const f=new En(new Oe(u),0);let m=new yn(ot);return this.Jr.forEachWhile((g=>{const b=g.key.path;return!!s.isPrefixOf(b)&&(b.length===o&&(m=m.add(g.Hr)),!0)}),f),ue.resolve(this.Yr(m))}Yr(e){const n=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Et(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return ue.forEach(n.mutations,(o=>{const u=new En(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,n){const s=new En(n,0),o=this.Jr.firstAfterOrEqual(s);return ue.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class hj{constructor(e){this.ti=e,this.docs=(function(){return new qt(Oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ti(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ue.resolve(s?s.document.mutableCopy():Pn.newInvalidDocument(n))}getEntries(e,n){let s=Qi();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Pn.newInvalidDocument(o))})),ue.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Qi();const f=n.path,m=new Oe(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:b,value:{document:v}}=g.getNext();if(!f.isPrefixOf(b.path))break;b.path.length>f.length+1||LC(zC(v),s)<=0||(o.has(v.key)||bf(n,v))&&(u=u.insert(v.key,v.mutableCopy()))}return ue.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Le(9500)}ni(e,n){return ue.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new pj(this)}getSize(e){return ue.resolve(this.size)}}class pj extends rj{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),ue.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class mj{constructor(e){this.persistence=e,this.ri=new Ur((n=>tg(n)),ng),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.ii=0,this.si=new cg,this.targetCount=0,this.oi=Qo._r()}forEachTarget(e,n){return this.ri.forEach(((s,o)=>n(o))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ii&&(this.ii=n),ue.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Qo(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,ue.resolve()}updateTargetData(e,n){return this.lr(n),ue.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.ri.forEach(((f,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.ri.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ue.waitFor(u).next((()=>o))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,n){const s=this.ri.get(n)||null;return ue.resolve(s)}addMatchingKeys(e,n,s){return this.si.$r(n,s),ue.resolve()}removeMatchingKeys(e,n,s){this.si.Qr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),ue.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),ue.resolve()}getMatchingKeysForTargetId(e,n){const s=this.si.jr(n);return ue.resolve(s)}containsKey(e,n){return ue.resolve(this.si.containsKey(n))}}class mE{constructor(e,n){this._i={},this.overlays={},this.ai=new ff(0),this.ui=!1,this.ui=!0,this.ci=new dj,this.referenceDelegate=e(this),this.li=new mj(this),this.indexManager=new ZI,this.remoteDocumentCache=(function(o){return new hj(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new JI(n),this.Pi=new cj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this._i[e.toKey()];return s||(s=new fj(n,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,s){we("MemoryPersistence","Starting transaction:",e);const o=new gj(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return ue.or(Object.values(this._i).map((s=>()=>s.containsKey(e,n))))}}class gj extends BC{constructor(e){super(),this.currentSequenceNumber=e}}class ug{constructor(e){this.persistence=e,this.Ri=new cg,this.Ai=null}static Vi(e){return new ug(e)}get di(){if(this.Ai)return this.Ai;throw Le(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.di.delete(s.toString()),ue.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.di.add(s.toString()),ue.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),ue.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.di,(s=>{const o=Oe.fromPath(s);return this.mi(e,o).next((u=>{u||n.removeEntry(o,Fe.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return ue.or([()=>ue.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Yd{constructor(e,n){this.persistence=e,this.fi=new Ur((s=>FC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=sj(this,n)}static Vi(e,n){return new Yd(e,n)}Ti(){}Ii(e){return ue.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}pr(e){let n=0;return this.mr(e,(s=>{n++})).next((()=>n))}mr(e,n){return ue.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((u=>u?ue.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(f=>this.wr(e,f,n).next((m=>{m||(s++,u.removeEntry(f,Fe.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),ue.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),ue.resolve()}removeReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),ue.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Nd(e.data.value)),n}wr(e,n,s){return ue.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return ue.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class dg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Ts=s,this.Is=o}static Es(e,n){let s=lt(),o=lt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new dg(e,n.fromCache,s,o)}}class bj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class yj{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return GT()?8:HC(Vn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.gs(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ps(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new bj;return this.ys(e,n,f).next((m=>{if(u.result=m,this.As)return this.ws(e,n,f,m.size)}))})).next((()=>u.result))}ws(e,n,s,o){return s.documentReadCount<this.Vs?(Io()<=rt.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",jo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ue.resolve()):(Io()<=rt.DEBUG&&we("QueryEngine","Query:",jo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(Io()<=rt.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",jo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,di(n))):ue.resolve())}gs(e,n){if(gv(n))return ue.resolve(null);let s=di(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=mm(n,null,"F"),s=di(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=lt(...u);return this.fs.getDocuments(e,f).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const b=this.bs(n,m);return this.Ss(n,b,f,g.readTime)?this.gs(e,mm(n,null,"F")):this.Ds(e,b,n,g)}))))})))))}ps(e,n,s,o){return gv(n)||o.isEqual(Fe.min())?ue.resolve(null):this.fs.getDocuments(e,s).next((u=>{const f=this.bs(n,u);return this.Ss(n,f,s,o)?ue.resolve(null):(Io()<=rt.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),jo(n)),this.Ds(e,f,n,VC(o,wc)).next((m=>m)))}))}bs(e,n){let s=new yn($1(e));return n.forEach(((o,u)=>{bf(e,u)&&(s=s.add(u))})),s}Ss(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,s){return Io()<=rt.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",jo(n)),this.fs.getDocumentsMatchingQuery(e,n,Bs.min(),s)}Ds(e,n,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const fg="LocalStore",xj=3e8;class vj{constructor(e,n,s,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new qt(ot),this.Fs=new Ur((u=>tg(u)),ng),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lj(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function _j(i,e,n,s){return new vj(i,e,n,s)}async function gE(i,e){const n=Qe(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],m=[];let g=lt();for(const b of o){f.push(b.batchId);for(const v of b.mutations)g=g.add(v.key)}for(const b of u){m.push(b.batchId);for(const v of b.mutations)g=g.add(v.key)}return n.localDocuments.getDocuments(s,g).next((b=>({Ns:b,removedBatchIds:f,addedBatchIds:m})))}))}))}function Ej(i,e){const n=Qe(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(m,g,b,v){const E=b.batch,T=E.keys();let M=ue.resolve();return T.forEach((B=>{M=M.next((()=>v.getEntry(g,B))).next((L=>{const O=b.docVersions.get(B);Et(O!==null,48541),L.version.compareTo(O)<0&&(E.applyToRemoteDocument(L,b),L.isValidDocument()&&(L.setReadTime(b.commitVersion),v.addEntry(L)))}))})),M.next((()=>m.mutationQueue.removeMutationBatch(g,E)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=lt();for(let b=0;b<m.mutationResults.length;++b)m.mutationResults[b].transformResults.length>0&&(g=g.add(m.batch.mutations[b].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function bE(i){const e=Qe(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function Aj(i,e){const n=Qe(i),s=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const m=[];e.targetChanges.forEach(((v,E)=>{const T=o.get(E);if(!T)return;m.push(n.li.removeMatchingKeys(u,v.removedDocuments,E).next((()=>n.li.addMatchingKeys(u,v.addedDocuments,E))));let M=T.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(E)!==null?M=M.withResumeToken(kn.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):v.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(v.resumeToken,s)),o=o.insert(E,M),(function(L,O,Q){return L.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=xj?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(T,M,v)&&m.push(n.li.updateTargetData(u,M))}));let g=Qi(),b=lt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,v))})),m.push(wj(u,f,e.documentUpdates).next((v=>{g=v.Bs,b=v.Ls}))),!s.isEqual(Fe.min())){const v=n.li.getLastRemoteSnapshotVersion(u).next((E=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(v)}return ue.waitFor(m).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,b))).next((()=>g))})).then((u=>(n.vs=o,u)))}function wj(i,e,n){let s=lt(),o=lt();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let f=Qi();return n.forEach(((m,g)=>{const b=u.get(m);g.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Fe.min())?(e.removeEntry(m,g.readTime),f=f.insert(m,g)):!b.isValidDocument()||g.version.compareTo(b.version)>0||g.version.compareTo(b.version)===0&&b.hasPendingWrites?(e.addEntry(g),f=f.insert(m,g)):we(fg,"Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",g.version)})),{Bs:f,Ls:o}}))}function Sj(i,e){const n=Qe(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Wm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Tj(i,e){const n=Qe(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.li.getTargetData(s,e).next((u=>u?(o=u,ue.resolve(o)):n.li.allocateTargetId(s).next((f=>(o=new Ms(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(s.targetId,s),n.Fs.set(e,s.targetId)),s}))}async function vm(i,e,n){const s=Qe(i),o=s.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!nl(f))throw f;we(fg,`Failed to update sequence numbers for target ${e}: ${f}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function Cv(i,e,n){const s=Qe(i);let o=Fe.min(),u=lt();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,b,v){const E=Qe(g),T=E.Fs.get(v);return T!==void 0?ue.resolve(E.vs.get(T)):E.li.getTargetData(b,v)})(s,f,di(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(f,m.targetId).next((g=>{u=g}))})).next((()=>s.Cs.getDocumentsMatchingQuery(f,e,n?o:Fe.min(),n?u:lt()))).next((m=>(Nj(s,fI(e),m),{documents:m,ks:u})))))}function Nj(i,e,n){let s=i.Ms.get(e)||Fe.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Ms.set(e,s)}class Iv{constructor(){this.activeTargetIds=yI()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rj{constructor(){this.vo=new Iv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,s){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Iv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Cj{Mo(e){}shutdown(){}}const jv="ConnectivityMonitor";class kv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){we(jv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){we(jv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let yd=null;function _m(){return yd===null?yd=(function(){return 268435456+Math.round(2147483648*Math.random())})():yd++,"0x"+yd.toString(16)}const $p="RestConnection",Ij={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class jj{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===Hd?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,n,s,o,u){const f=_m(),m=this.Qo(e,n.toUriEncodedString());we($p,`Sending RPC '${e}' ${f}:`,m,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,u);const{host:b}=new URL(m),v=Vr(b);return this.zo(e,m,g,s,v).then((E=>(we($p,`Received RPC '${e}' ${f}: `,E),E)),(E=>{throw qo($p,`RPC '${e}' ${f} failed with error: `,E,"url: ",m,"request:",s),E}))}jo(e,n,s,o,u,f){return this.Wo(e,n,s,o,u)}Go(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+el})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const s=Ij[e];let o=`${this.qo}/v1/${n}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class kj{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Dn="WebChannelConnection",lc=(i,e,n)=>{i.listen(e,(s=>{try{n(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class zo extends jj{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!zo.c_){const e=E1();lc(e,_1.STAT_EVENT,(n=>{n.stat===lm.PROXY?we(Dn,"STAT_EVENT: detected buffering proxy"):n.stat===lm.NOPROXY&&we(Dn,"STAT_EVENT: detected no buffering proxy")})),zo.c_=!0}}zo(e,n,s,o,u){const f=_m();return new Promise(((m,g)=>{const b=new x1;b.setWithCredentials(!0),b.listenOnce(v1.COMPLETE,(()=>{try{switch(b.getLastErrorCode()){case Td.NO_ERROR:const E=b.getResponseJson();we(Dn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(E)),m(E);break;case Td.TIMEOUT:we(Dn,`RPC '${e}' ${f} timed out`),g(new Ae(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Td.HTTP_ERROR:const T=b.getStatus();if(we(Dn,`RPC '${e}' ${f} failed with status:`,T,"response text:",b.getResponseText()),T>0){let M=b.getResponseJson();Array.isArray(M)&&(M=M[0]);const B=M?.error;if(B&&B.status&&B.message){const L=(function(Q){const G=Q.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(G)>=0?G:oe.UNKNOWN})(B.status);g(new Ae(L,B.message))}else g(new Ae(oe.UNKNOWN,"Server responded with status "+b.getStatus()))}else g(new Ae(oe.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:f,h_:b.getLastErrorCode(),P_:b.getLastError()})}}finally{we(Dn,`RPC '${e}' ${f} completed.`)}}));const v=JSON.stringify(o);we(Dn,`RPC '${e}' ${f} sending request:`,o),b.send(n,"POST",v,s,15)}))}T_(e,n,s){const o=_m(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,n,s),m.encodeInitMessageHeaders=!0;const b=u.join("");we(Dn,`Creating RPC '${e}' stream ${o}: ${b}`,m);const v=f.createWebChannel(b,m);this.I_(v);let E=!1,T=!1;const M=new kj({Ho:B=>{T?we(Dn,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(E||(we(Dn,`Opening RPC '${e}' stream ${o} transport.`),v.open(),E=!0),we(Dn,`RPC '${e}' stream ${o} sending:`,B),v.send(B))},Jo:()=>v.close()});return lc(v,dc.EventType.OPEN,(()=>{T||(we(Dn,`RPC '${e}' stream ${o} transport opened.`),M.i_())})),lc(v,dc.EventType.CLOSE,(()=>{T||(T=!0,we(Dn,`RPC '${e}' stream ${o} transport closed`),M.o_(),this.E_(v))})),lc(v,dc.EventType.ERROR,(B=>{T||(T=!0,qo(Dn,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),M.o_(new Ae(oe.UNAVAILABLE,"The operation could not be completed")))})),lc(v,dc.EventType.MESSAGE,(B=>{if(!T){const L=B.data[0];Et(!!L,16349);const O=L,Q=O?.error||O[0]?.error;if(Q){we(Dn,`RPC '${e}' stream ${o} received error:`,Q);const G=Q.status;let W=(function(pe){const I=pn[pe];if(I!==void 0)return aE(I)})(G),le=Q.message;W===void 0&&(W=oe.INTERNAL,le="Unknown error status: "+G+" with message "+Q.message),T=!0,M.o_(new Ae(W,le)),v.close()}else we(Dn,`RPC '${e}' stream ${o} received:`,L),M.__(L)}})),zo.u_(),setTimeout((()=>{M.s_()}),0),M}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,s){super.Go(e,n,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return A1()}}function Oj(i){return new zo(i)}function Yp(){return typeof document<"u"?document:null}function _f(i){return new VI(i,!0)}zo.c_=!1;class yE{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=s,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&we("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Ov="PersistentStream";class xE{constructor(e,n,s,o,u,f,m,g){this.Ci=e,this.b_=s,this.S_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(Ki(n.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new Ae(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(Ov,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(we(Ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Dj extends xE{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=UI(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Fe.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Fe.min():f.readTime?fi(f.readTime):Fe.min()})(e);return this.listener.J_(n,s)}Z_(e){const n={};n.database=xm(this.serializer),n.addTarget=(function(u,f){let m;const g=f.target;if(m=hm(g)?{documents:qI(u,g)}:{query:FI(u,g).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=rE(u,f.resumeToken);const b=gm(u,f.expectedCount);b!==null&&(m.expectedCount=b)}else if(f.snapshotVersion.compareTo(Fe.min())>0){m.readTime=$d(u,f.snapshotVersion.toTimestamp());const b=gm(u,f.expectedCount);b!==null&&(m.expectedCount=b)}return m})(this.serializer,e);const s=$I(this.serializer,e);s&&(n.labels=s),this.K_(n)}X_(e){const n={};n.database=xm(this.serializer),n.removeTarget=e,this.K_(n)}}class Mj extends xE{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=HI(e.writeResults,e.commitTime),s=fi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=xm(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>BI(this.serializer,s)))};this.K_(n)}}class Pj{}class Vj extends Pj{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ae(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Wo(e,bm(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(oe.UNKNOWN,u.toString())}))}jo(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,m])=>this.connection.jo(e,bm(n,s),o,f,m,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Ae(oe.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function zj(i,e,n,s){return new Vj(i,e,n,s)}class Lj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ki(n),this.aa=!1):we("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Dr="RemoteStore";class Uj{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((f=>{s.enqueueAndForget((async()=>{Br(this)&&(we(Dr,"Restarting streams for network reachability change."),await(async function(g){const b=Qe(g);b.Ea.add(4),await Bc(b),b.Va.set("Unknown"),b.Ea.delete(4),await Ef(b)})(this))}))})),this.Va=new Lj(s,o)}}async function Ef(i){if(Br(i))for(const e of i.Ra)await e(!0)}async function Bc(i){for(const e of i.Ra)await e(!1)}function vE(i,e){const n=Qe(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),gg(n)?mg(n):il(n).O_()&&pg(n,e))}function hg(i,e){const n=Qe(i),s=il(n);n.Ia.delete(e),s.O_()&&_E(n,e),n.Ia.size===0&&(s.O_()?s.L_():Br(n)&&n.Va.set("Unknown"))}function pg(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}il(i).Z_(e)}function _E(i,e){i.da.$e(e),il(i).X_(e)}function mg(i){i.da=new OI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),il(i).start(),i.Va.ua()}function gg(i){return Br(i)&&!il(i).x_()&&i.Ia.size>0}function Br(i){return Qe(i).Ea.size===0}function EE(i){i.da=void 0}async function Bj(i){i.Va.set("Online")}async function Hj(i){i.Ia.forEach(((e,n)=>{pg(i,e)}))}async function qj(i,e){EE(i),gg(i)?(i.Va.ha(e),mg(i)):i.Va.set("Unknown")}async function Fj(i,e,n){if(i.Va.set("Online"),e instanceof sE&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.da.removeTarget(m))})(i,e)}catch(s){we(Dr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Kd(i,s)}else if(e instanceof Id?i.da.Xe(e):e instanceof iE?i.da.st(e):i.da.tt(e),!n.isEqual(Fe.min()))try{const s=await bE(i.localStore);n.compareTo(s)>=0&&await(function(u,f){const m=u.da.Tt(f);return m.targetChanges.forEach(((g,b)=>{if(g.resumeToken.approximateByteSize()>0){const v=u.Ia.get(b);v&&u.Ia.set(b,v.withResumeToken(g.resumeToken,f))}})),m.targetMismatches.forEach(((g,b)=>{const v=u.Ia.get(g);if(!v)return;u.Ia.set(g,v.withResumeToken(kn.EMPTY_BYTE_STRING,v.snapshotVersion)),_E(u,g);const E=new Ms(v.target,g,b,v.sequenceNumber);pg(u,E)})),u.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){we(Dr,"Failed to raise snapshot:",s),await Kd(i,s)}}async function Kd(i,e,n){if(!nl(e))throw e;i.Ea.add(1),await Bc(i),i.Va.set("Offline"),n||(n=()=>bE(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{we(Dr,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await Ef(i)}))}function AE(i,e){return e().catch((n=>Kd(i,n,e)))}async function Af(i){const e=Qe(i),n=Gs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Wm;for(;Gj(e);)try{const o=await Sj(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,$j(e,o)}catch(o){await Kd(e,o)}wE(e)&&SE(e)}function Gj(i){return Br(i)&&i.Ta.length<10}function $j(i,e){i.Ta.push(e);const n=Gs(i);n.O_()&&n.Y_&&n.ea(e.mutations)}function wE(i){return Br(i)&&!Gs(i).x_()&&i.Ta.length>0}function SE(i){Gs(i).start()}async function Yj(i){Gs(i).ra()}async function Kj(i){const e=Gs(i);for(const n of i.Ta)e.ea(n.mutations)}async function Qj(i,e,n){const s=i.Ta.shift(),o=rg.from(s,e,n);await AE(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Af(i)}async function Xj(i,e){e&&Gs(i).Y_&&await(async function(s,o){if((function(f){return II(f)&&f!==oe.ABORTED})(o.code)){const u=s.Ta.shift();Gs(s).B_(),await AE(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Af(s)}})(i,e),wE(i)&&SE(i)}async function Dv(i,e){const n=Qe(i);n.asyncQueue.verifyOperationInProgress(),we(Dr,"RemoteStore received new credentials");const s=Br(n);n.Ea.add(3),await Bc(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ef(n)}async function Jj(i,e){const n=Qe(i);e?(n.Ea.delete(2),await Ef(n)):e||(n.Ea.add(2),await Bc(n),n.Va.set("Unknown"))}function il(i){return i.ma||(i.ma=(function(n,s,o){const u=Qe(n);return u.sa(),new Dj(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Zo:Bj.bind(null,i),Yo:Hj.bind(null,i),t_:qj.bind(null,i),J_:Fj.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),gg(i)?mg(i):i.Va.set("Unknown")):(await i.ma.stop(),EE(i))}))),i.ma}function Gs(i){return i.fa||(i.fa=(function(n,s,o){const u=Qe(n);return u.sa(),new Mj(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Yj.bind(null,i),t_:Xj.bind(null,i),ta:Kj.bind(null,i),na:Qj.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await Af(i)):(await i.fa.stop(),i.Ta.length>0&&(we(Dr,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class bg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,m=new bg(e,n,f,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yg(i,e){if(Ki("AsyncQueue",`${e}: ${i}`),nl(i))return new Ae(oe.UNAVAILABLE,`${e}: ${i}`);throw i}class Lo{static emptySet(e){return new Lo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Oe.comparator(n.key,s.key):(n,s)=>Oe.comparator(n.key,s.key),this.keyedMap=fc(),this.sortedSet=new qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Lo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Lo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class Mv{constructor(){this.ga=new qt(Oe.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Le(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Xo{constructor(e,n,s,o,u,f,m,g,b){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=b}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((m=>{f.push({type:0,doc:m})})),new Xo(e,n,Lo.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class Wj{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Zj{constructor(){this.queries=Pv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Qe(n),u=o.queries;o.queries=Pv(),u.forEach(((f,m)=>{for(const g of m.ba)g.onError(s)}))})(this,new Ae(oe.ABORTED,"Firestore shutting down"))}}function Pv(){return new Ur((i=>G1(i)),gf)}async function xg(i,e){const n=Qe(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(s=2):(u=new Wj,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=yg(f,`Initialization of query '${jo(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&_g(n)}async function vg(i,e){const n=Qe(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.ba.indexOf(e);f>=0&&(u.ba.splice(f,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function ek(i,e){const n=Qe(i);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.ba)m.Fa(o)&&(s=!0);f.wa=o}}s&&_g(n)}function tk(i,e,n){const s=Qe(i),o=s.queries.get(e);if(o)for(const u of o.ba)u.onError(n);s.queries.delete(e)}function _g(i){i.Ca.forEach((e=>{e.next()}))}var Em,Vv;(Vv=Em||(Em={})).Ma="default",Vv.Cache="cache";class Eg{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Xo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Em.Cache}}class TE{constructor(e){this.key=e}}class NE{constructor(e){this.key=e}}class nk{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=lt(),this.mutatedKeys=lt(),this.eu=$1(e),this.tu=new Lo(this.eu)}get nu(){return this.Za}ru(e,n){const s=n?n.iu:new Mv,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,b=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const T=o.get(v),M=bf(this.query,E)?E:null,B=!!T&&this.mutatedKeys.has(T.key),L=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let O=!1;T&&M?T.data.isEqual(M.data)?B!==L&&(s.track({type:3,doc:M}),O=!0):this.su(T,M)||(s.track({type:2,doc:M}),O=!0,(g&&this.eu(M,g)>0||b&&this.eu(M,b)<0)&&(m=!0)):!T&&M?(s.track({type:0,doc:M}),O=!0):T&&!M&&(s.track({type:1,doc:T}),O=!0,(g||b)&&(m=!0)),O&&(M?(f=f.add(M),u=L?u.add(v):u.delete(v)):(f=f.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const v=this.query.limitType==="F"?f.last():f.first();f=f.delete(v.key),u=u.delete(v.key),s.track({type:1,doc:v})}return{tu:f,iu:s,Ss:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((v,E)=>(function(M,B){const L=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Vt:O})}};return L(M)-L(B)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,b=g!==this.Xa;return this.Xa=g,f.length!==0||b?{snapshot:new Xo(this.query,e.tu,u,f,e.mutatedKeys,g===0,b,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Mv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=lt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const n=[];return e.forEach((s=>{this.Ya.has(s)||n.push(new NE(s))})),this.Ya.forEach((s=>{e.has(s)||n.push(new TE(s))})),n}cu(e){this.Za=e.ks,this.Ya=lt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Xo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ag="SyncEngine";class ak{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class ik{constructor(e){this.key=e,this.hu=!1}}class sk{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ur((m=>G1(m)),gf),this.Iu=new Map,this.Eu=new Set,this.Ru=new qt(Oe.comparator),this.Au=new Map,this.Vu=new cg,this.du={},this.mu=new Map,this.fu=Qo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rk(i,e,n=!0){const s=OE(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await RE(s,e,n,!0),o}async function ok(i,e){const n=OE(i);await RE(n,e,!0,!1)}async function RE(i,e,n,s){const o=await Tj(i.localStore,di(e)),u=o.targetId,f=i.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await lk(i,e,u,f==="current",o.resumeToken)),i.isPrimaryClient&&n&&vE(i.remoteStore,o),m}async function lk(i,e,n,s,o){i.pu=(E,T,M)=>(async function(L,O,Q,G){let W=O.view.ru(Q);W.Ss&&(W=await Cv(L.localStore,O.query,!1).then((({documents:I})=>O.view.ru(I,W))));const le=G&&G.targetChanges.get(O.targetId),he=G&&G.targetMismatches.get(O.targetId)!=null,pe=O.view.applyChanges(W,L.isPrimaryClient,le,he);return Lv(L,O.targetId,pe.au),pe.snapshot})(i,E,T,M);const u=await Cv(i.localStore,e,!0),f=new nk(e,u.ks),m=f.ru(u.documents),g=Uc.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),b=f.applyChanges(m,i.isPrimaryClient,g);Lv(i,n,b.au);const v=new ak(e,n,f);return i.Tu.set(e,v),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),b.snapshot}async function ck(i,e,n){const s=Qe(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!gf(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await vm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&hg(s.remoteStore,o.targetId),Am(s,o.targetId)})).catch(tl)):(Am(s,o.targetId),await vm(s.localStore,o.targetId,!0))}async function uk(i,e){const n=Qe(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),hg(n.remoteStore,s.targetId))}async function dk(i,e,n){const s=yk(i);try{const o=await(function(f,m){const g=Qe(f),b=Vt.now(),v=m.reduce(((M,B)=>M.add(B.key)),lt());let E,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let B=Qi(),L=lt();return g.xs.getEntries(M,v).next((O=>{B=O,B.forEach(((Q,G)=>{G.isValidDocument()||(L=L.add(Q))}))})).next((()=>g.localDocuments.getOverlayedDocuments(M,B))).next((O=>{E=O;const Q=[];for(const G of m){const W=SI(G,E.get(G.key).overlayedDocument);W!=null&&Q.push(new Xs(G.key,W,V1(W.value.mapValue),wa.exists(!0)))}return g.mutationQueue.addMutationBatch(M,b,Q,m)})).next((O=>{T=O;const Q=O.applyToLocalDocumentSet(E,L);return g.documentOverlayCache.saveOverlays(M,O.batchId,Q)}))})).then((()=>({batchId:T.batchId,changes:K1(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,m,g){let b=f.du[f.currentUser.toKey()];b||(b=new qt(ot)),b=b.insert(m,g),f.du[f.currentUser.toKey()]=b})(s,o.batchId,n),await Hc(s,o.changes),await Af(s.remoteStore)}catch(o){const u=yg(o,"Failed to persist write");n.reject(u)}}async function CE(i,e){const n=Qe(i);try{const s=await Aj(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(Et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Et(f.hu,14607):o.removedDocuments.size>0&&(Et(f.hu,42227),f.hu=!1))})),await Hc(n,s,e)}catch(s){await tl(s)}}function zv(i,e,n){const s=Qe(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(f,m){const g=Qe(f);g.onlineState=m;let b=!1;g.queries.forEach(((v,E)=>{for(const T of E.ba)T.va(m)&&(b=!0)})),b&&_g(g)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function fk(i,e,n){const s=Qe(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new qt(Oe.comparator);f=f.insert(u,Pn.newNoDocument(u,Fe.min()));const m=lt().add(u),g=new vf(Fe.min(),new Map,new qt(ot),f,m);await CE(s,g),s.Ru=s.Ru.remove(u),s.Au.delete(e),wg(s)}else await vm(s.localStore,e,!1).then((()=>Am(s,e,n))).catch(tl)}async function hk(i,e){const n=Qe(i),s=e.batch.batchId;try{const o=await Ej(n.localStore,e);jE(n,s,null),IE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Hc(n,o)}catch(o){await tl(o)}}async function pk(i,e,n){const s=Qe(i);try{const o=await(function(f,m){const g=Qe(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(b=>{let v;return g.mutationQueue.lookupMutationBatch(b,m).next((E=>(Et(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(b,E)))).next((()=>g.mutationQueue.performConsistencyCheck(b))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(b,v,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(b,v))).next((()=>g.localDocuments.getDocuments(b,v)))}))})(s.localStore,e);jE(s,e,n),IE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Hc(s,o)}catch(o){await tl(o)}}function IE(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function jE(i,e,n){const s=Qe(i);let o=s.du[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function Am(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((s=>{i.Vu.containsKey(s)||kE(i,s)}))}function kE(i,e){i.Eu.delete(e.path.canonicalString());const n=i.Ru.get(e);n!==null&&(hg(i.remoteStore,n),i.Ru=i.Ru.remove(e),i.Au.delete(n),wg(i))}function Lv(i,e,n){for(const s of n)s instanceof TE?(i.Vu.addReference(s.key,e),mk(i,s)):s instanceof NE?(we(Ag,"Document no longer in limbo: "+s.key),i.Vu.removeReference(s.key,e),i.Vu.containsKey(s.key)||kE(i,s.key)):Le(19791,{wu:s})}function mk(i,e){const n=e.key,s=n.path.canonicalString();i.Ru.get(n)||i.Eu.has(s)||(we(Ag,"New document in limbo: "+n),i.Eu.add(s),wg(i))}function wg(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Oe(Dt.fromString(e)),s=i.fu.next();i.Au.set(s,new ik(n)),i.Ru=i.Ru.insert(n,s),vE(i.remoteStore,new Ms(di(mf(n.path)),s,"TargetPurposeLimboResolution",ff.ce))}}async function Hc(i,e,n){const s=Qe(i),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{f.push(s.pu(g,e,n).then((b=>{if((b||n)&&s.isPrimaryClient){const v=b?!b.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(b){o.push(b);const v=dg.Es(g.targetId,b);u.push(v)}})))})),await Promise.all(f),s.Pu.J_(o),await(async function(g,b){const v=Qe(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(b,(T=>ue.forEach(T.Ts,(M=>v.persistence.referenceDelegate.addReference(E,T.targetId,M))).next((()=>ue.forEach(T.Is,(M=>v.persistence.referenceDelegate.removeReference(E,T.targetId,M)))))))))}catch(E){if(!nl(E))throw E;we(fg,"Failed to update sequence numbers: "+E)}for(const E of b){const T=E.targetId;if(!E.fromCache){const M=v.vs.get(T),B=M.snapshotVersion,L=M.withLastLimboFreeSnapshotVersion(B);v.vs=v.vs.insert(T,L)}}})(s.localStore,u))}async function gk(i,e){const n=Qe(i);if(!n.currentUser.isEqual(e)){we(Ag,"User change. New user:",e.toKey());const s=await gE(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new Ae(oe.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Hc(n,s.Ns)}}function bk(i,e){const n=Qe(i),s=n.Au.get(e);if(s&&s.hu)return lt().add(s.key);{let o=lt();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function OE(i){const e=Qe(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=CE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fk.bind(null,e),e.Pu.J_=ek.bind(null,e.eventManager),e.Pu.yu=tk.bind(null,e.eventManager),e}function yk(i){const e=Qe(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pk.bind(null,e),e}class Qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_f(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return _j(this.persistence,new yj,e.initialUser,this.serializer)}Cu(e){return new mE(ug.Vi,this.serializer)}Du(e){return new Rj}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qd.provider={build:()=>new Qd};class xk extends Qd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Et(this.persistence.referenceDelegate instanceof Yd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new aj(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new mE((s=>Yd.Vi(s,n)),this.serializer)}}class wm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>zv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=gk.bind(null,this.syncEngine),await Jj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Zj})()}createDatastore(e){const n=_f(e.databaseInfo.databaseId),s=Oj(e.databaseInfo);return zj(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,m){return new Uj(s,o,u,f,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>zv(this.syncEngine,n,0)),(function(){return kv.v()?new kv:new Cj})())}createSyncEngine(e,n){return(function(o,u,f,m,g,b,v){const E=new sk(o,u,f,m,g,b);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Qe(n);we(Dr,"RemoteStore shutting down."),s.Ea.add(5),await Bc(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}wm.provider={build:()=>new wm};class Sg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const $s="FirestoreClient";class vk{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this._databaseInfo=o,this.user=Mn.UNAUTHENTICATED,this.clientId=Jm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{we($s,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(we($s,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=yg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Kp(i,e){i.asyncQueue.verifyOperationInProgress(),we($s,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await gE(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function Uv(i,e){i.asyncQueue.verifyOperationInProgress();const n=await _k(i);we($s,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>Dv(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>Dv(e.remoteStore,o))),i._onlineComponents=e}async function _k(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){we($s,"Using user provided OfflineComponentProvider");try{await Kp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===oe.FAILED_PRECONDITION||o.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;qo("Error using user provided cache. Falling back to memory cache: "+n),await Kp(i,new Qd)}}else we($s,"Using default OfflineComponentProvider"),await Kp(i,new xk(void 0));return i._offlineComponents}async function DE(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(we($s,"Using user provided OnlineComponentProvider"),await Uv(i,i._uninitializedComponentsProvider._online)):(we($s,"Using default OnlineComponentProvider"),await Uv(i,new wm))),i._onlineComponents}function Ek(i){return DE(i).then((e=>e.syncEngine))}async function Xd(i){const e=await DE(i),n=e.eventManager;return n.onListen=rk.bind(null,e.syncEngine),n.onUnlisten=ck.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ok.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uk.bind(null,e.syncEngine),n}function Ak(i,e,n,s){const o=new Sg(s),u=new Eg(e,o,n);return i.asyncQueue.enqueueAndForget((async()=>xg(await Xd(i),u))),()=>{o.Nu(),i.asyncQueue.enqueueAndForget((async()=>vg(await Xd(i),u)))}}function wk(i,e,n={}){const s=new qi;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,g,b){const v=new Sg({next:T=>{v.Nu(),f.enqueueAndForget((()=>vg(u,E)));const M=T.docs.has(m);!M&&T.fromCache?b.reject(new Ae(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&T.fromCache&&g&&g.source==="server"?b.reject(new Ae(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(T)},error:T=>b.reject(T)}),E=new Eg(mf(m.path),v,{includeMetadataChanges:!0,Ka:!0});return xg(u,E)})(await Xd(i),i.asyncQueue,e,n,s))),s.promise}function Sk(i,e,n={}){const s=new qi;return i.asyncQueue.enqueueAndForget((async()=>(function(u,f,m,g,b){const v=new Sg({next:T=>{v.Nu(),f.enqueueAndForget((()=>vg(u,E))),T.fromCache&&g.source==="server"?b.reject(new Ae(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(T)},error:T=>b.reject(T)}),E=new Eg(m,v,{includeMetadataChanges:!0,Ka:!0});return xg(u,E)})(await Xd(i),i.asyncQueue,e,n,s))),s.promise}function Tk(i,e){const n=new qi;return i.asyncQueue.enqueueAndForget((async()=>dk(await Ek(i),e,n))),n.promise}function ME(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const Nk="ComponentProvider",Bv=new Map;function Rk(i,e,n,s,o){return new YC(i,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,ME(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}const PE="firestore.googleapis.com",Hv=!0;class qv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PE,this.ssl=Hv}else this.host=e.host,this.ssl=e.ssl??Hv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tj)throw new Ae(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ME(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ae(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ae(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ae(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new TC;switch(s.type){case"firstParty":return new IC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ae(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Bv.get(n);s&&(we(Nk,"Removing Datastore"),Bv.delete(n),s.terminate())})(this),Promise.resolve()}}function VE(i,e,n,s={}){i=Xn(i,wf);const o=Vr(e),u=i._getSettings(),f={...u,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(Mm(`https://${m}`),Pm("Firestore",!0)),u.host!==PE&&u.host!==m&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:s};if(!Gi(g,f)&&(i._setSettings(g),s.mockUserToken)){let b,v;if(typeof s.mockUserToken=="string")b=s.mockUserToken,v=Mn.MOCK_USER;else{b=j_(s.mockUserToken,i._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new Ae(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Mn(E)}i._authCredentials=new NC(new S1(b,v))}}class Js{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Js(this.firestore,e,this._query)}}class Qt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}toJSON(){return{type:Qt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(zc(n,Qt._jsonSchema))return new Qt(e,s||null,new Oe(Dt.fromString(n.referencePath)))}}Qt._jsonSchemaVersion="firestore/documentReference/1.0",Qt._jsonSchema={type:gn("string",Qt._jsonSchemaVersion),referencePath:gn("string")};class Ls extends Js{constructor(e,n,s){super(e,n,mf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new Oe(e))}withConverter(e){return new Ls(this.firestore,e,this._path)}}function kt(i,e,...n){if(i=nn(i),T1("collection","path",e),i instanceof wf){const s=Dt.fromString(e,...n);return nv(s),new Ls(i,null,s)}{if(!(i instanceof Qt||i instanceof Ls))throw new Ae(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Dt.fromString(e,...n));return nv(s),new Ls(i.firestore,null,s)}}function Pe(i,e,...n){if(i=nn(i),arguments.length===1&&(e=Jm.newId()),T1("doc","path",e),i instanceof wf){const s=Dt.fromString(e,...n);return tv(s),new Qt(i,null,new Oe(s))}{if(!(i instanceof Qt||i instanceof Ls))throw new Ae(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Dt.fromString(e,...n));return tv(s),new Qt(i.firestore,i instanceof Ls?i.converter:null,new Oe(s))}}const Fv="AsyncQueue";class Gv{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yE(this,"async_queue_retry"),this._c=()=>{const s=Yp();s&&we(Fv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Yp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Yp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new qi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!nl(e))throw e;we(Fv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ki("INTERNAL UNHANDLED ERROR: ",$v(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=bg.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Le(47125,{Pc:$v(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function $v(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Xi extends wf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new Gv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gv(e),this._firestoreClient=void 0,await e}}}function Ck(i,e){const n=typeof i=="object"?i:Um(),s=typeof i=="string"?i:Hd,o=rf(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=R_("firestore");u&&VE(o,...u)}return o}function Sf(i){if(i._terminated)throw new Ae(oe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||Ik(i),i._firestoreClient}function Ik(i){const e=i._freezeSettings(),n=Rk(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new vk(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class Aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Aa(kn.fromBase64String(e))}catch(n){throw new Ae(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Aa(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Aa._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zc(e,Aa._jsonSchema))return Aa.fromBase64String(e.bytes)}}Aa._jsonSchemaVersion="firestore/bytes/1.0",Aa._jsonSchema={type:gn("string",Aa._jsonSchemaVersion),bytes:gn("string")};class Tg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ae(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class sl{constructor(e){this._methodName=e}}class hi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ae(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ae(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hi._jsonSchemaVersion}}static fromJSON(e){if(zc(e,hi._jsonSchema))return new hi(e.latitude,e.longitude)}}hi._jsonSchemaVersion="firestore/geoPoint/1.0",hi._jsonSchema={type:gn("string",hi._jsonSchemaVersion),latitude:gn("number"),longitude:gn("number")};class La{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:La._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zc(e,La._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new La(e.vectorValues);throw new Ae(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}La._jsonSchemaVersion="firestore/vectorValue/1.0",La._jsonSchema={type:gn("string",La._jsonSchemaVersion),vectorValues:gn("object")};const jk=/^__.*__$/;class kk{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lc(e,this.data,n,this.fieldTransforms)}}class zE{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Xs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LE(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{dataSource:i})}}class Tf{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Tf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Jd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(LE(this.dataSource)&&jk.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Ok{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||_f(e)}createContext(e,n,s,o=!1){return new Tf({dataSource:e,methodName:n,targetDoc:s,path:Cn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nf(i){const e=i._freezeSettings(),n=_f(i._databaseId);return new Ok(i._databaseId,!!e.ignoreUndefinedProperties,n)}function UE(i,e,n,s,o,u={}){const f=i.createContext(u.merge||u.mergeFields?2:0,e,n,o);Ig("Data must be an object, but it was:",f,s);const m=HE(s,f);let g,b;if(u.merge)g=new la(f.fieldMask),b=f.fieldTransforms;else if(u.mergeFields){const v=[];for(const E of u.mergeFields){const T=Mr(e,E,n);if(!f.contains(T))throw new Ae(oe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);GE(v,T)||v.push(T)}g=new la(v),b=f.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,b=f.fieldTransforms;return new kk(new Kn(m),g,b)}class Rf extends sl{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rf}}function BE(i,e,n){return new Tf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:i._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ng extends sl{_toFieldTransform(e){return new ig(e.path,new Cc)}isEqual(e){return e instanceof Ng}}class Rg extends sl{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=BE(this,e,!0),s=this.Ac.map((u=>Hr(u,n))),o=new Yo(s);return new ig(e.path,o)}isEqual(e){return e instanceof Rg&&Gi(this.Ac,e.Ac)}}class Cg extends sl{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=BE(this,e,!0),s=this.Ac.map((u=>Hr(u,n))),o=new Ko(s);return new ig(e.path,o)}isEqual(e){return e instanceof Cg&&Gi(this.Ac,e.Ac)}}function Dk(i,e,n,s){const o=i.createContext(1,e,n);Ig("Data must be an object, but it was:",o,s);const u=[],f=Kn.empty();Qs(s,((g,b)=>{const v=FE(e,g,n);b=nn(b);const E=o.childContextForFieldPath(v);if(b instanceof Rf)u.push(v);else{const T=Hr(b,E);T!=null&&(u.push(v),f.set(v,T))}}));const m=new la(u);return new zE(f,m,o.fieldTransforms)}function Mk(i,e,n,s,o,u){const f=i.createContext(1,e,n),m=[Mr(e,s,n)],g=[o];if(u.length%2!=0)throw new Ae(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)m.push(Mr(e,u[T])),g.push(u[T+1]);const b=[],v=Kn.empty();for(let T=m.length-1;T>=0;--T)if(!GE(b,m[T])){const M=m[T];let B=g[T];B=nn(B);const L=f.childContextForFieldPath(M);if(B instanceof Rf)b.push(M);else{const O=Hr(B,L);O!=null&&(b.push(M),v.set(M,O))}}const E=new la(b);return new zE(v,E,f.fieldTransforms)}function Pk(i,e,n,s=!1){return Hr(n,i.createContext(s?4:3,e))}function Hr(i,e){if(qE(i=nn(i)))return Ig("Unsupported field value:",e,i),HE(i,e);if(i instanceof sl)return(function(s,o){if(!LE(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const m of s){let g=Hr(m,o.childContextForArray(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=nn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return xI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Vt.fromDate(s);return{timestampValue:$d(o.serializer,u)}}if(s instanceof Vt){const u=new Vt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:$d(o.serializer,u)}}if(s instanceof hi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Aa)return{bytesValue:rE(o.serializer,s._byteString)};if(s instanceof Qt){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.createError(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:lg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof La)return(function(f,m){const g=f instanceof La?f.toArray():f;return{mapValue:{fields:{[M1]:{stringValue:P1},[qd]:{arrayValue:{values:g.map((v=>{if(typeof v!="number")throw m.createError("VectorValues must only contain numeric values.");return ag(m.serializer,v)}))}}}}}})(s,o);if(hE(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${df(s)}`)})(i,e)}function HE(i,e){const n={};return C1(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qs(i,((s,o)=>{const u=Hr(o,e.childContextForField(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function qE(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Vt||i instanceof hi||i instanceof Aa||i instanceof Qt||i instanceof sl||i instanceof La||hE(i))}function Ig(i,e,n){if(!qE(n)||!N1(n)){const s=df(n);throw s==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+s)}}function Mr(i,e,n){if((e=nn(e))instanceof Tg)return e._internalPath;if(typeof e=="string")return FE(i,e);throw Jd("Field path arguments must be of type string or ",i,!1,void 0,n)}const Vk=new RegExp("[~\\*/\\[\\]]");function FE(i,e,n){if(e.search(Vk)>=0)throw Jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Tg(...e.split("."))._internalPath}catch{throw Jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Jd(i,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${s}`),f&&(g+=` in document ${o}`),g+=")"),new Ae(oe.INVALID_ARGUMENT,m+i+g)}function GE(i,e){return i.some((n=>n.isEqual(e)))}class zk{convertValue(e,n="none"){switch(Fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Qs(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[qd].arrayValue?.values?.map((s=>tn(s.doubleValue)));return new La(n)}convertGeoPoint(e){return new hi(tn(e.latitude),tn(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=pf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Sc(e));default:return null}}convertTimestamp(e){const n=Hs(e);return new Vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Dt.fromString(e);Et(fE(s),9688,{name:e});const o=new Tc(s.get(1),s.get(3)),u=new Oe(s.popFirst(5));return o.isEqual(n)||Ki(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class jg extends zk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,n)}}function Qn(){return new Ng("serverTimestamp")}function Wd(...i){return new Rg("arrayUnion",i)}function Zd(...i){return new Cg("arrayRemove",i)}const Yv="@firebase/firestore",Kv="4.10.0";function Qv(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class $E{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Lk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Mr("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Lk extends $E{data(){return super.data()}}function YE(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Ae(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kg{}class KE extends kg{}function In(i,e,...n){let s=[];e instanceof kg&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((g=>g instanceof Og)).length,m=u.filter((g=>g instanceof Cf)).length;if(f>1||f>0&&m>0)throw new Ae(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Cf extends KE{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Cf(e,n,s)}_apply(e){const n=this._parse(e);return QE(e._query,n),new Js(e.firestore,e.converter,pm(e._query,n))}_parse(e){const n=Nf(e.firestore);return(function(u,f,m,g,b,v,E){let T;if(b.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Ae(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Jv(E,v);const B=[];for(const L of E)B.push(Xv(g,u,L));T={arrayValue:{values:B}}}else T=Xv(g,u,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Jv(E,v),T=Pk(m,f,E,v==="in"||v==="not-in");return mn.create(b,v,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ca(i,e,n){const s=e,o=Mr("where",i);return Cf._create(o,s,n)}class Og extends kg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Og(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Ba.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const m=u.getFlattenedFilters();for(const g of m)QE(f,g),f=pm(f,g)})(e._query,n),new Js(e.firestore,e.converter,pm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Dg extends KE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Dg(e,n)}_apply(e){const n=(function(o,u,f){if(o.startAt!==null)throw new Ae(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new Ae(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rc(u,f)})(e._query,this._field,this._direction);return new Js(e.firestore,e.converter,dI(e._query,n))}}function Uo(i,e="asc"){const n=e,s=Mr("orderBy",i);return Dg._create(s,n)}function Xv(i,e,n){if(typeof(n=nn(n))=="string"){if(n==="")throw new Ae(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!F1(e)&&n.indexOf("/")!==-1)throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Dt.fromString(n));if(!Oe.isDocumentKey(s))throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return uv(i,new Oe(s))}if(n instanceof Qt)return uv(i,n._key);throw new Ae(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${df(n)}.`)}function Jv(i,e){if(!Array.isArray(i)||i.length===0)throw new Ae(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QE(i,e){const n=(function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ae(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function XE(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class pc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rr extends $E{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Mr("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Rr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Rr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Rr._jsonSchema={type:gn("string",Rr._jsonSchemaVersion),bundleSource:gn("string","DocumentSnapshot"),bundleName:gn("string"),bundle:gn("string")};class jd extends Rr{data(e={}){return super.data(e)}}class Cr{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new pc(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new jd(this._firestore,this._userDataWriter,s.key,s,new pc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ae(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((m=>{const g=new jd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new pc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new jd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new pc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,v=-1;return m.type!==0&&(b=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),v=f.indexOf(m.doc.key)),{type:Uk(m.type),doc:g,oldIndex:b,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Cr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Uk(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:i})}}Cr._jsonSchemaVersion="firestore/querySnapshot/1.0",Cr._jsonSchema={type:gn("string",Cr._jsonSchemaVersion),bundleSource:gn("string","QuerySnapshot"),bundleName:gn("string"),bundle:gn("string")};function kd(i){i=Xn(i,Qt);const e=Xn(i.firestore,Xi),n=Sf(e);return wk(n,i._key).then((s=>JE(e,i,s)))}function Sm(i){i=Xn(i,Js);const e=Xn(i.firestore,Xi),n=Sf(e),s=new jg(e);return YE(i._query),Sk(n,i._query).then((o=>new Cr(e,s,i,o)))}function Mg(i,e,n){i=Xn(i,Qt);const s=Xn(i.firestore,Xi),o=XE(i.converter,e,n),u=Nf(s);return If(s,[UE(u,"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,wa.none())])}function tt(i,e,n,...s){i=Xn(i,Qt);const o=Xn(i.firestore,Xi),u=Nf(o);let f;return f=typeof(e=nn(e))=="string"||e instanceof Tg?Mk(u,"updateDoc",i._key,e,n,s):Dk(u,"updateDoc",i._key,e),If(o,[f.toMutation(i._key,wa.exists(!0))])}function zi(i){return If(Xn(i.firestore,Xi),[new sg(i._key,wa.none())])}function Nr(i,e){const n=Xn(i.firestore,Xi),s=Pe(i),o=XE(i.converter,e),u=Nf(i.firestore);return If(n,[UE(u,"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,wa.exists(!1))]).then((()=>s))}function jn(i,...e){i=nn(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Qv(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Qv(e[s])){const b=e[s];e[s]=b.next?.bind(b),e[s+1]=b.error?.bind(b),e[s+2]=b.complete?.bind(b)}let u,f,m;if(i instanceof Qt)f=Xn(i.firestore,Xi),m=mf(i._key.path),u={next:b=>{e[s]&&e[s](JE(f,i,b))},error:e[s+1],complete:e[s+2]};else{const b=Xn(i,Js);f=Xn(b.firestore,Xi),m=b._query;const v=new jg(f);u={next:E=>{e[s]&&e[s](new Cr(f,v,b,E))},error:e[s+1],complete:e[s+2]},YE(i._query)}const g=Sf(f);return Ak(g,m,o,u)}function If(i,e){const n=Sf(i);return Tk(n,e)}function JE(i,e,n){const s=n.docs.get(e._key),o=new jg(i);return new Rr(i,o,e._key,s,new pc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){SC(zr),Ir(new Us("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),m=new Xi(new RC(s.getProvider("auth-internal")),new jC(f,s.getProvider("app-check-internal")),KC(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),li(Yv,Kv,e),li(Yv,Kv,"esm2020")})();const WE="firebasestorage.googleapis.com",Bk="storageBucket",Hk=120*1e3,qk=600*1e3;class yi extends bi{constructor(e,n,s=0){super(Qp(e),`Firebase Storage: ${n} (${Qp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mi;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mi||(mi={}));function Qp(i){return"storage/"+i}function Fk(){const i="An unknown error occurred, please check the error payload for server response.";return new yi(mi.UNKNOWN,i)}function Gk(){return new yi(mi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function $k(){return new yi(mi.CANCELED,"User canceled the upload/download.")}function Yk(i){return new yi(mi.INVALID_URL,"Invalid URL '"+i+"'.")}function Kk(i){return new yi(mi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function Wv(i){return new yi(mi.INVALID_ARGUMENT,i)}function ZE(){return new yi(mi.APP_DELETED,"The Firebase app was deleted.")}function Qk(i){return new yi(mi.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class za{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=za.makeFromUrl(e,n)}catch{return new za(e,"")}if(s.path==="")return s;throw Kk(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(le){le.path.charAt(le.path.length-1)==="/"&&(le.path_=le.path_.slice(0,-1))}const f="(/(.*))?$",m=new RegExp("^gs://"+o+f,"i"),g={bucket:1,path:3};function b(le){le.path_=decodeURIComponent(le.path)}const v="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",M=new RegExp(`^https?://${E}/${v}/b/${o}/o${T}`,"i"),B={bucket:1,path:3},L=n===WE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,O="([^?#]*)",Q=new RegExp(`^https?://${L}/${o}/${O}`,"i"),W=[{regex:m,indices:g,postModify:u},{regex:M,indices:B,postModify:b},{regex:Q,indices:{bucket:1,path:2},postModify:b}];for(let le=0;le<W.length;le++){const he=W[le],pe=he.regex.exec(e);if(pe){const I=pe[he.indices.bucket];let C=pe[he.indices.path];C||(C=""),s=new za(I,C),he.postModify(s);break}}if(s==null)throw Yk(e);return s}}class Xk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Jk(i,e,n){let s=1,o=null,u=null,f=!1,m=0;function g(){return m===2}let b=!1;function v(...O){b||(b=!0,e.apply(null,O))}function E(O){o=setTimeout(()=>{o=null,i(M,g())},O)}function T(){u&&clearTimeout(u)}function M(O,...Q){if(b){T();return}if(O){T(),v.call(null,O,...Q);return}if(g()||f){T(),v.call(null,O,...Q);return}s<64&&(s*=2);let W;m===1?(m=2,W=0):W=(s+Math.random())*1e3,E(W)}let B=!1;function L(O){B||(B=!0,T(),!b&&(o!==null?(O||(m=2),clearTimeout(o),E(0)):O||(m=1)))}return E(0),u=setTimeout(()=>{f=!0,L(!0)},n),L}function Wk(i){i(!1)}function Zk(i){return i!==void 0}function Zv(i,e,n,s){if(s<e)throw Wv(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>n)throw Wv(`Invalid value for '${i}'. Expected ${n} or less.`)}function e5(i){const e=encodeURIComponent;let n="?";for(const s in i)if(i.hasOwnProperty(s)){const o=e(s)+"="+e(i[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var ef;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(ef||(ef={}));function t5(i,e){const n=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,u=e.indexOf(i)!==-1;return n||o||u}class n5{constructor(e,n,s,o,u,f,m,g,b,v,E,T=!0,M=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=f,this.callback_=m,this.errorCallback_=g,this.timeout_=b,this.progressCallback_=v,this.connectionFactory_=E,this.retry=T,this.isUsingEmulator=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,L)=>{this.resolve_=B,this.reject_=L,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new xd(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const f=m=>{const g=m.loaded,b=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,b)};this.progressCallback_!==null&&u.addUploadProgressListener(f),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(f),this.pendingConnection_=null;const m=u.getErrorCode()===ef.NO_ERROR,g=u.getStatus();if(!m||t5(g,this.additionalRetryCodes_)&&this.retry){const v=u.getErrorCode()===ef.ABORT;s(!1,new xd(!1,null,v));return}const b=this.successCodes_.indexOf(g)!==-1;s(!0,new xd(b,u))})},n=(s,o)=>{const u=this.resolve_,f=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());Zk(g)?u(g):u()}catch(g){f(g)}else if(m!==null){const g=Fk();g.serverResponse=m.getErrorText(),this.errorCallback_?f(this.errorCallback_(m,g)):f(g)}else if(o.canceled){const g=this.appDelete_?ZE():$k();f(g)}else{const g=Gk();f(g)}};this.canceled_?n(!1,new xd(!1,null,!0)):this.backoffId_=Jk(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Wk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xd{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function a5(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function i5(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function s5(i,e){e&&(i["X-Firebase-GMPID"]=e)}function r5(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function o5(i,e,n,s,o,u,f=!0,m=!1){const g=e5(i.urlParams),b=i.url+g,v=Object.assign({},i.headers);return s5(v,e),a5(v,n),i5(v,u),r5(v,s),new n5(b,i.method,v,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,f,m)}function l5(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function c5(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}class tf{constructor(e,n){this._service=e,n instanceof za?this._location=n:this._location=za.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new tf(e,n)}get root(){const e=new za(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return c5(this._location.path)}get storage(){return this._service}get parent(){const e=l5(this._location.path);if(e===null)return null;const n=new za(this._location.bucket,e);return new tf(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Qk(e)}}function e_(i,e){const n=e?.[Bk];return n==null?null:za.makeFromBucketSpec(n,i)}function u5(i,e,n,s={}){i.host=`${e}:${n}`;const o=Vr(e);o&&(Mm(`https://${i.host}/b`),Pm("Storage",!0)),i._isUsingEmulator=!0,i._protocol=o?"https":"http";const{mockUserToken:u}=s;u&&(i._overrideAuthToken=typeof u=="string"?u:j_(u,i.app.options.projectId))}class d5{constructor(e,n,s,o,u,f=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=f,this._bucket=null,this._host=WE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Hk,this._maxUploadRetryTime=qk,this._requests=new Set,o!=null?this._bucket=za.makeFromBucketSpec(o,this._host):this._bucket=e_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=za.makeFromBucketSpec(this._url,e):this._bucket=e_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Zv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Zv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(oa(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new tf(this,e)}_makeRequest(e,n,s,o,u=!0){if(this._deleted)return new Xk(ZE());{const f=o5(e,this._appId,s,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const t_="@firebase/storage",n_="0.14.0";const eA="storage";function f5(i=Um(),e){i=nn(i);const s=rf(i,eA).getImmediate({identifier:e}),o=R_("storage");return o&&tA(s,...o),s}function tA(i,e,n,s={}){u5(i,e,n,s)}function h5(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new d5(n,s,o,e,zr)}function p5(){Ir(new Us(eA,h5,"PUBLIC").setMultipleInstances(!0)),li(t_,n_,""),li(t_,n_,"esm2020")}p5();const nA={apiKey:"AIzaSyB3p9kAAb0TJXvJMKzUS6pummdlkbzlt6I",authDomain:"fft12l.firebaseapp.com",projectId:"fft12l",storageBucket:"fft12l.firebasestorage.app",messagingSenderId:"459190857682",appId:"1:459190857682:web:d857f4bf1fa2e5ec11220b"},Pg=Lm(nA),Ot=b1(Pg),_e=Ck(Pg),m5=f5(Pg);(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&(console.log(" MODO DEV: Conectando aos Emuladores do Firebase..."),Gm(Ot,"http://127.0.0.1:9099",{disableWarnings:!0}),VE(_e,"127.0.0.1",8080),tA(m5,"127.0.0.1",9199));const g5=(i,e)=>r1(Ot,i,e),jf="/assets/chocobo-loading-CZsGc2ZM.gif",b5="/assets/musica-tema-78rqvj_H.mp3",y5="/assets/fundo-rpg-BXz1tR4K.jpg",Ut=new Audio(b5);Ut.loop=!0;Ut.volume=.2;function x5(){const i=Ji(),e=()=>{Ut.volume=.2,Ut.play().then(()=>{console.log("ter musical sintonizado.")}).catch(n=>{console.log("Aguardando interao: ",n)}),i("/login")};return c.jsxs("div",{className:"landing-container",onClick:e,children:[c.jsxs("div",{className:"content",children:[c.jsx("h1",{className:"game-title",children:"FINAL FANTASY"}),c.jsx("h2",{className:"sub-title",children:"12 Libertao"}),c.jsx("div",{className:"press-start",children:"PRESS START"})]}),c.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .landing-container {
          height: 100vh; width: 100vw; display: flex; align-items: center; justify-content: center;
          background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url(${y5}) no-repeat center center;
          background-size: cover; cursor: pointer; position: fixed; top: 0; left: 0; z-index: 1000;
        }
        .content { text-align: center; animation: fadeInSuave 4s ease-in-out; }
        .game-title { font-size: clamp(30px, 8vw, 60px); letter-spacing: 8px; color: #fff; text-shadow: 3px 3px 5px #000, 0 0 20px rgba(0, 242, 255, 0.5); font-family: 'serif'; }
        .sub-title { font-size: clamp(14px, 4vw, 24px); color: #ffcc00; margin-top: 10px; text-shadow: 1px 1px 3px #000; font-family: 'serif'; }
        .press-start { margin-top: 80px; font-size: 20px; color: #fff; letter-spacing: 5px; text-shadow: 0 0 10px #00f2ff; animation: blink 1.5s infinite; font-family: 'sans-serif'; }
        @keyframes blink { 0%, 100% { opacity: 0; } 50% { opacity: 1; } }
        @keyframes fadeInSuave { from { opacity: 0; filter: blur(15px); transform: scale(0.9); } to { opacity: 1; filter: blur(0); transform: scale(1); } }
      `}})]})}const Vg="/assets/video-fundo-B5LPnOg0.mp4",v5="/assets/botao-admin-T-iaDg61.png";function _5(){const i=Ji(),[e,n]=w.useState(null),[s,o]=w.useState(""),[u,f]=w.useState(""),[m,g]=w.useState("");w.useEffect(()=>{Ut.volume=.2,Ut.paused&&Ut.play().catch(T=>console.log("Autoplay bloqueado:",T))},[]);const b=()=>{Ut.pause(),Ut.currentTime=0},v=async T=>{T.preventDefault(),g("");try{const B=(await g5(s,u)).user,L=Pe(_e,"users",B.uid),O=await kd(L);if(O.exists()){const Q=O.data();if(e==="master"&&Q.role!=="mestre"){g("ACESSO NEGADO: VOC NO  UM MESTRE.");return}if(b(),Q.role==="mestre")i("/mestre");else{const G=Pe(_e,"characters",B.uid);(await kd(G)).exists()?i("/jogador-vtt"):i("/create-character")}}else{const Q=Pe(_e,"characters",B.uid),G=await kd(Q);b(),G.exists()?i("/jogador-vtt"):i("/create-character")}}catch(M){console.error(M),g("FALHA NA CONEXO COM O TER.")}},E=()=>{i("/admin-login")};return c.jsxs("div",{className:"login-container",children:[c.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",className:"background-video",children:c.jsx("source",{src:Vg,type:"video/mp4"})}),c.jsx("div",{className:"content-overlay",children:e?c.jsxs("form",{className:"login-panel fade-in",onSubmit:v,children:[c.jsx("button",{type:"button",className:"ff-back",onClick:()=>n(null),children:" RETORNAR"}),c.jsx("h3",{className:"ff-subtitle",children:e==="master"?"NARRADOR":"JOGADOR"}),c.jsxs("div",{className:"ff-input-group",children:[c.jsx("input",{type:"email",placeholder:"E-MAIL",value:s,onChange:T=>o(T.target.value),required:!0}),c.jsx("input",{type:"password",placeholder:"SENHA",value:u,onChange:T=>f(T.target.value),required:!0})]}),m&&c.jsx("p",{className:"ff-error",children:m}),c.jsx("button",{type:"submit",className:"ff-submit",children:"ENTRAR"})]}):c.jsxs("div",{className:"selection-screen fade-in",children:[c.jsx("h2",{className:"ff-title",children:"ESCOLHA SUA JORNADA"}),c.jsxs("div",{className:"ff-button-group",children:[c.jsx("button",{className:"ff-btn",onClick:()=>n("player"),children:"JOGADOR"}),c.jsx("button",{className:"ff-btn",onClick:()=>n("master"),children:"NARRADOR"})]})]})}),c.jsx("button",{className:"admin-portal-btn",onClick:E,title:"Acesso ao Admin",children:c.jsx("img",{src:v5,alt:"Portal Admin"})}),c.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .login-container { height: 100vh; width: 100vw; background: #000; display: flex; align-items: center; justify-content: center; overflow: hidden; position: relative; }
        .background-video { position: absolute; top: 50%; left: 50%; min-width: 100%; min-height: 100%; width: auto; height: auto; z-index: 1; transform: translate(-50%, -50%); object-fit: cover; animation: quickLoopFade 0.5s ease-in-out; }
        @keyframes quickLoopFade { 0% { opacity: 0; } 100% { opacity: 1; } }
        .content-overlay { position: relative; z-index: 10; display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.4); }
        .ff-title { color: #fff; font-size: 32px; letter-spacing: 8px; margin-bottom: 40px; text-shadow: 0 0 15px rgba(255, 255, 255, 0.5); text-align: center; font-family: 'serif'; }
        .ff-subtitle { color: #ffcc00; letter-spacing: 4px; margin-bottom: 30px; text-align: center; }
        .ff-button-group { display: flex; flex-direction: column; gap: 20px; align-items: center; }
        .ff-btn { background: rgba(0, 0, 30, 0.6); border: 1px solid rgba(255, 255, 255, 0.6); color: #fff; padding: 15px 50px; letter-spacing: 3px; cursor: pointer; transition: 0.4s; width: 280px; backdrop-filter: blur(5px); font-weight: bold; }
        .ff-submit { background: rgba(0, 0, 30, 0.6); border: 1px solid rgba(255, 255, 255, 0.6); color: #fff; padding: 15px 0; letter-spacing: 3px; cursor: pointer; transition: 0.4s; width: 326px; backdrop-filter: blur(5px); font-weight: bold; margin: 0 auto; display: block; }
        .ff-btn:hover, .ff-submit:hover { background: #fff; color: #000; box-shadow: 0 0 20px #fff; }
        .ff-input-group input { display: block; width: 300px; padding: 12px; margin: 0 auto 20px auto; background: rgba(0, 0, 0, 0.7); border: 1px solid #444; color: #fff; text-align: center; letter-spacing: 2px; outline: none; }
        .ff-input-group input:focus { border-color: #ffcc00; }
        .ff-back { background: none; border: none; color: #ffcc00; cursor: pointer; margin-bottom: 15px; display: block; font-weight: bold; }
        .ff-error { color: #ff4444; font-size: 12px; margin-bottom: 15px; text-shadow: 0 0 5px #000; text-align: center; }
        .admin-portal-btn { position: absolute; bottom: 30px; right: 30px; z-index: 100; background: none; border: none; cursor: pointer; width: 70px; transition: 0.5s; filter: drop-shadow(0 0 8px rgba(0, 242, 255, 0.6)); }
        .admin-portal-btn img { width: 100%; height: auto; }
        .admin-portal-btn:hover { transform: scale(1.2) rotate(-5deg); filter: drop-shadow(0 0 15px #00f2ff); }
        .fade-in { animation: fadeInFF 2s ease-out forwards; }
        @keyframes fadeInFF { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
      `}})]})}function E5(){const[i,e]=w.useState(""),[n,s]=w.useState(""),[o,u]=w.useState(""),f=Ji();w.useEffect(()=>{Ut.volume=.2,Ut.paused&&Ut.play().catch(()=>{})},[]);const m=async g=>{if(g.preventDefault(),u(""),i!==void 0){u("VOC NO TEM PERMISSO DE NARRADOR.");return}try{await r1(Ot,i,n),Ut.pause(),Ut.currentTime=0,f("/admin")}catch(v){console.error(v),u("SENHA INCORRETA OU FALHA NA CONEXO.")}};return c.jsxs("div",{className:"login-container",children:[c.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"background-video",children:c.jsx("source",{src:Vg,type:"video/mp4"})}),c.jsx("div",{className:"content-overlay",children:c.jsxs("form",{className:"login-panel fade-in",onSubmit:m,children:[c.jsx("button",{type:"button",className:"ff-back",onClick:()=>f("/"),children:" RETORNAR"}),c.jsx("h3",{className:"ff-subtitle",children:"PORTAL DO ADMINISTRADOR"}),c.jsxs("div",{className:"ff-input-group",children:[c.jsx("input",{type:"email",placeholder:"E-MAIL",value:i,onChange:g=>e(g.target.value),required:!0}),c.jsx("input",{type:"password",placeholder:"CHAVE DE ACESSO",value:n,onChange:g=>s(g.target.value),required:!0})]}),o&&c.jsx("p",{className:"ff-error",style:{color:"#ff4444",fontSize:"12px",marginBottom:"10px"},children:o}),c.jsx("button",{type:"submit",className:"ff-submit",children:"DESBLOQUEAR"})]})}),c.jsx("style",{children:`
        .login-container { height: 100vh; width: 100vw; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; background: #000; }
        .background-video { position: absolute; top: 50%; left: 50%; min-width: 100%; min-height: 100%; transform: translate(-50%, -50%); object-fit: cover; z-index: 1; }
        .content-overlay { position: absolute; top: 0; left: 0; z-index: 10; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.6); }
        .login-panel { background: rgba(0, 0, 30, 0.85); padding: 40px; border: 1px solid #00f2ff; backdrop-filter: blur(15px); text-align: center; box-shadow: 0 0 30px rgba(0, 242, 255, 0.3); width: 350px; }
        .ff-subtitle { color: #ffcc00; letter-spacing: 4px; margin-bottom: 25px; font-weight: bold; }
        .ff-input-group input { display: block; width: 100%; padding: 12px; margin: 10px 0; background: rgba(0,0,0,0.8); border: 1px solid #444; color: #fff; text-align: center; outline: none; box-sizing: border-box; }
        .ff-input-group input:focus { border-color: #00f2ff; box-shadow: 0 0 10px rgba(0, 242, 255, 0.2); }
        .ff-submit { background: transparent; border: 1px solid #fff; color: #fff; padding: 12px 40px; cursor: pointer; transition: 0.3s; width: 100%; letter-spacing: 2px; margin-top: 10px; }
        .ff-submit:hover { background: #fff; color: #000; box-shadow: 0 0 15px #fff; }
        .ff-back { background: none; border: none; color: #ffcc00; cursor: pointer; margin-bottom: 20px; font-size: 12px; }
        .fade-in { animation: fadeInFF 1.5s ease-out; }
        @keyframes fadeInFF { from { opacity: 0; } to { opacity: 1; } }
      `})]})}function A5(){const[i,e]=w.useState([]),[n,s]=w.useState([]),[o,u]=w.useState(""),[f,m]=w.useState(""),[g,b]=w.useState("jogador"),[v,E]=w.useState(""),[T,M]=w.useState(!1);w.useEffect(()=>{Ut&&Ut.pause()},[]),w.useEffect(()=>{B()},[]);const B=async()=>{try{const he=(await Sm(kt(_e,"users"))).docs.map(C=>({id:C.id,...C.data()})).filter(C=>C.email!=="fffvtt10@gmail.com"),I=(await Sm(kt(_e,"characters"))).docs.map(C=>({id:C.id,...C.data()}));e(he),s(I)}catch(le){console.error("Erro ao carregar dados do ter: ",le)}},L=async le=>{if(le.preventDefault(),!o||!f)return alert("Preencha todos os campos!");M(!0);let he=null;try{he=Lm(nA,"SecondaryApp");const pe=b1(he);window.location.hostname==="localhost"&&Gm(pe,"http://127.0.0.1:9099");const C=(await lR(pe,o,f)).user;await Mg(Pe(_e,"users",C.uid),{email:o,role:g,uid:C.uid,active:!0,createdAt:Qn()}),await hR(pe),alert(`Usurio ${o} invocado com sucesso!`),u(""),m(""),B()}catch(pe){console.error(pe),alert("Erro ao invocar usurio: "+pe.message)}finally{he&&await WN(he),M(!1)}},O=async(le,he)=>{if(window.confirm(`Deseja banir permanentemente ${he} do ter?`))try{await zi(Pe(_e,"users",le)),await zi(Pe(_e,"characters",le)),alert("Conta e personagem banidos com sucesso."),B()}catch(pe){alert("Erro ao banir usurio: "+pe.message)}},Q=async le=>{if(window.confirm("Tem certeza que deseja apagar APENAS o personagem deste usurio? Ele ter que criar outro."))try{await zi(Pe(_e,"characters",le)),alert("Personagem deletado. O usurio continua ativo."),B()}catch(he){alert("Erro ao deletar personagem: "+he.message)}},G=le=>{const he=n.find(pe=>pe.uid===le);return he||null},W=async()=>{if(v.length<6)return alert("A senha deve ter no mnimo 6 caracteres.");try{await cR(Ot.currentUser,v),alert("Sua chave de mestre foi alterada!"),E("")}catch{alert("Erro ao trocar senha. Tente fazer login novamente.")}};return c.jsxs("div",{className:"admin-container",children:[c.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"background-video-admin",children:c.jsx("source",{src:Vg,type:"video/mp4"})}),c.jsxs("div",{className:"admin-overlay",children:[c.jsx("h1",{className:"admin-title",children:"PAINEL DO ADMINISTRADOR"}),c.jsxs("div",{className:"admin-grid",children:[c.jsxs("div",{className:"admin-card",children:[c.jsx("h3",{children:"INVOCAR NOVO JOGADOR"}),c.jsxs("form",{onSubmit:L,children:[c.jsx("input",{placeholder:"E-mail Arcano",type:"email",value:o,onChange:le=>u(le.target.value),required:!0}),c.jsx("input",{placeholder:"Palavra-Passe",type:"text",value:f,onChange:le=>m(le.target.value),required:!0}),c.jsxs("select",{value:g,onChange:le=>b(le.target.value),children:[c.jsx("option",{value:"jogador",children:"Jogador"}),c.jsx("option",{value:"mestre",children:"Mestre"})]}),c.jsx("button",{type:"submit",disabled:T,className:"btn-summon",children:T?"INVOCANDO...":"CRIAR ACESSO"})]})]}),c.jsxs("div",{className:"admin-card scroll-card",children:[c.jsxs("h3",{children:["ALMAS REGISTRADAS (",i.length,")"]}),c.jsx("div",{className:"list-container",children:i.map(le=>{const he=G(le.id);return c.jsxs("div",{className:"list-item",children:[c.jsxs("div",{className:"item-info",children:[c.jsx("span",{className:"item-main",children:le.email}),c.jsx("span",{className:`badge ${le.role}`,children:le.role.toUpperCase()}),he&&c.jsxs("span",{style:{fontSize:"10px",color:"#ffcc00",marginTop:"2px"},children:[" ",he.name]})]}),c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[c.jsx("button",{className:"btn-ban",onClick:()=>O(le.id,le.email),children:"BANIR"}),he&&c.jsx("button",{className:"btn-ban",style:{borderColor:"#f80",color:"#f80"},onClick:()=>Q(le.id),children:"DEL CHAR"})]})]},le.id)})})]}),c.jsxs("div",{className:"admin-card",children:[c.jsx("h3",{children:"MINHA CHAVE MESTRA"}),c.jsx("input",{type:"password",placeholder:"Nova Senha",value:v,onChange:le=>E(le.target.value)}),c.jsx("button",{className:"btn-summon",style:{background:"#333",border:"1px solid #fff"},onClick:W,children:"ATUALIZAR"})]})]})]}),c.jsx("style",{children:`
        .admin-container { width: 100vw; height: 100vh; overflow: hidden; position: relative; font-family: 'Cinzel', serif; color: #fff; background: #000; }
        .background-video-admin { position: absolute; top: 50%; left: 50%; width: 100%; height: 100%; object-fit: cover; transform: translate(-50%, -50%); opacity: 0.4; pointer-events: none; }
        .admin-overlay { position: relative; z-index: 10; padding: 40px; display: flex; flex-direction: column; height: 100%; }
        .admin-title { color: #ffcc00; text-align: center; font-size: 32px; letter-spacing: 5px; margin-bottom: 30px; text-shadow: 0 0 10px #ffcc00; }
        .admin-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 30px; height: 100%; }
        .admin-card { background: rgba(0, 10, 20, 0.9); border: 1px solid #ffcc00; border-radius: 8px; padding: 20px; display: flex; flex-direction: column; backdrop-filter: blur(10px); }
        .admin-card h3 { color: #00f2ff; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0; font-size: 16px; letter-spacing: 2px; }
        .scroll-card .list-container { overflow-y: auto; flex: 1; padding-right: 5px; }
        .scroll-card .list-container::-webkit-scrollbar { width: 5px; }
        .scroll-card .list-container::-webkit-scrollbar-thumb { background: #333; }
        
        input, select { background: #000; border: 1px solid #444; color: #fff; padding: 12px; width: 100%; margin-bottom: 15px; font-family: 'serif'; outline: none; }
        input:focus, select:focus { border-color: #ffcc00; }
        
        .btn-summon { width: 100%; background: #ffcc00; color: #000; border: none; padding: 12px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-summon:hover:not(:disabled) { background: #fff; box-shadow: 0 0 15px #fff; }
        .btn-summon:disabled { background: #333; color: #666; cursor: not-allowed; }

        .list-item { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); padding: 10px; margin-bottom: 8px; border-radius: 4px; border: 1px solid transparent; }
        .list-item:hover { border-color: #00f2ff; }
        .item-info { display: flex; flex-direction: column; }
        .item-main { font-weight: bold; color: #eee; font-size: 14px; }
        .item-sub { font-size: 10px; color: #aaa; }
        
        .badge { font-size: 10px; padding: 2px 6px; border-radius: 4px; font-weight: bold; color: #000; text-transform: uppercase; margin-right: 5px; }
        .badge.jogador { background: #00f2ff; }
        .badge.mestre { background: #ffcc00; }
        
        .btn-ban { background: transparent; border: 1px solid #f44; color: #f44; font-size: 10px; padding: 4px 8px; cursor: pointer; }
        .btn-ban:hover { background: #f44; color: #fff; }
      `})]})}const aA="/assets/fundo-mestre-OTxRyTTC.jpg",Tm="/assets/sanchez-1nilABmc.jpeg",w5="/assets/bazar-DZ7p321B.png";function zg({isMestre:i,playerData:e,vttDock:n}){const[s,o]=w.useState(!1),[u,f]=w.useState([]),[m,g]=w.useState([]),[b,v]=w.useState(""),[E,T]=w.useState(null),[M,B]=w.useState(""),[L,O]=w.useState({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""});w.useEffect(()=>{if(!s)return;const R=In(kt(_e,"game_items"),ca("status","==","bazar"),Uo("updatedAt","desc")),S=jn(R,Te=>{f(Te.docs.map(ne=>({id:ne.id,...ne.data()})))});return()=>S()},[s]),w.useEffect(()=>{if(!s||!i)return;const R=In(kt(_e,"game_items"),ca("status","==","vault"),Uo("nome","asc")),S=jn(R,Te=>{const ne=Te.docs.map(F=>({id:F.id,...F.data()})).filter(F=>!F.ownerId);g(ne)});return()=>S()},[s,i]);const Q=R=>{const S=R.target.value;if(B(S),!S)return;const Te=m.find(ne=>ne.id===S);Te&&O({...L,nome:Te.nome,descricao:Te.descricao,imagem:Te.imagem,valorGil:"",valorReal:""})},G=async R=>{if(R.preventDefault(),!L.nome||!L.valorGil)return alert("Preencha nome e valor em Gil!");try{const S={...L,updatedAt:Qn()};E?(await tt(Pe(_e,"game_items",E),S),T(null)):M?(await tt(Pe(_e,"game_items",M),{...S,status:"bazar"}),B("")):await Nr(kt(_e,"game_items"),{...S,status:"bazar",ownerId:null,createdAt:Qn()}),O({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""})}catch{alert("Erro ao salvar item no Bazar.")}},W=async R=>{window.confirm("Remover do mercado? O item voltar para a Forja.")&&await tt(Pe(_e,"game_items",R),{status:"vault",updatedAt:Qn()})},le=async R=>{if(!Ot.currentUser)return alert("Voc precisa estar logado.");const S=e?.character_sheet?.inventory?.gil||0,Te=Number(R.valorGil);if(S<Te)return alert(`Saldo insuficiente! Voc tem ${S} Gil, mas o item custa ${Te} Gil.`);if(window.confirm(`Comprar "${R.nome}" por ${R.valorGil} Gil?`))try{const F=S-Te,re=Pe(_e,"characters",Ot.currentUser.uid),ye=JSON.parse(JSON.stringify(e.character_sheet));ye.inventory.gil=F,await Mg(re,{character_sheet:ye},{merge:!0}),await tt(Pe(_e,"game_items",R.id),{status:"requested",ownerId:Ot.currentUser.uid,buyerName:e.name,updatedAt:Qn()}),alert(`Solicitao enviada! O Mestre aprovar a entrega em breve. Saldo restante: ${F} Gil.`)}catch(F){console.error("Erro na compra:",F),alert("Erro na transao. Verifique o console.")}},[he,pe]=w.useState([]);w.useEffect(()=>{if(!i||!s)return;const R=In(kt(_e,"game_items"),ca("status","==","requested")),S=jn(R,Te=>{pe(Te.docs.map(ne=>({id:ne.id,...ne.data()})))});return()=>S()},[i,s]);const I=async R=>{try{await tt(Pe(_e,"game_items",R.id),{status:"vault",ownerId:R.ownerId,buyerName:R.buyerName,updatedAt:Qn()}),alert(`Venda aprovada! O item "${R.nome}" foi enviado para o Cofre Pessoal de ${R.buyerName}.`)}catch{alert("Erro ao aprovar.")}},C=R=>{T(R.id),B(""),O(R)},k=()=>{T(null),B(""),O({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""})},P=u.filter(R=>R.nome.toLowerCase().includes(b.toLowerCase())),j=R=>R&&R.startsWith("http")?`url(${R})`:"url('https://via.placeholder.com/150?text=Item')";return c.jsxs(c.Fragment,{children:[c.jsx("button",{className:`bazar-trigger-btn ${n?"vtt-dock-style":""}`,onClick:()=>o(!0),title:"Abrir Bazar",children:c.jsx("img",{src:w5,alt:"Bazar",onError:R=>{R.target.style.display="none",R.target.parentNode.innerText="BAZAR"}})}),s&&c.jsx("div",{className:"bazar-overlay-flex",onClick:()=>o(!1),children:c.jsxs("div",{className:"bazar-modal-centered",onClick:R=>R.stopPropagation(),children:[c.jsxs("div",{className:"bazar-header",children:[c.jsx("h2",{children:"BAZAR GENRICA"}),c.jsx("button",{className:"close-btn",onClick:()=>o(!1),children:""})]}),i&&c.jsxs("div",{className:"mestre-panel",children:[he.length>0&&c.jsxs("div",{className:"requests-box",children:[c.jsxs("h4",{children:["PEDIDOS DE COMPRA (",he.length,")"]}),he.map(R=>c.jsxs("div",{className:"request-row",children:[c.jsxs("span",{children:[c.jsx("strong",{children:R.buyerName})," quer comprar ",c.jsx("strong",{children:R.nome})," (",R.valorGil," G)"]}),c.jsx("button",{className:"btn-approve",onClick:()=>I(R),children:"APROVAR ENTREGA"})]},R.id))]}),c.jsxs("form",{onSubmit:G,className:"bazar-form",children:[!E&&c.jsx("div",{className:"row",style:{marginBottom:"10px"},children:c.jsxs("select",{className:"bazar-input",onChange:Q,value:M,children:[c.jsx("option",{value:"",children:" Selecionar Item do Cofre (Forja)..."}),m.map(R=>c.jsx("option",{value:R.id,children:R.nome},R.id))]})}),c.jsxs("div",{className:"row",children:[c.jsx("input",{placeholder:"Nome do Item",value:L.nome,onChange:R=>O({...L,nome:R.target.value}),className:"bazar-input",readOnly:!!M&&!E}),c.jsx("input",{placeholder:"Link Imagem",value:L.imagem,onChange:R=>O({...L,imagem:R.target.value}),className:"bazar-input"})]}),c.jsxs("div",{className:"row",children:[c.jsx("input",{placeholder:"Valor Gil",type:"number",value:L.valorGil,onChange:R=>O({...L,valorGil:R.target.value}),className:"bazar-input",required:!0}),c.jsx("input",{placeholder:"Valor Real (R$)",type:"number",value:L.valorReal,onChange:R=>O({...L,valorReal:R.target.value}),className:"bazar-input"})]}),c.jsx("textarea",{placeholder:"Descrio do item...",value:L.descricao,onChange:R=>O({...L,descricao:R.target.value}),className:"bazar-input area"}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"submit",className:"btn-save",children:E?"SALVAR ALTERAES":M?"COLOCAR  VENDA":"CRIAR E VENDER"}),(E||M)&&c.jsx("button",{type:"button",onClick:k,className:"btn-cancel",children:"CANCELAR"})]})]})]}),c.jsx("div",{className:"search-bar-container",children:c.jsx("input",{type:"text",placeholder:" Procurar mercadoria...",value:b,onChange:R=>v(R.target.value),className:"search-input"})}),c.jsxs("div",{className:"bazar-grid",children:[P.map(R=>c.jsxs("div",{className:"bazar-item-card",children:[c.jsx("div",{className:"item-img",style:{backgroundImage:j(R.imagem)}}),c.jsxs("div",{className:"item-info",children:[c.jsx("h4",{children:R.nome}),c.jsx("p",{className:"desc",children:R.descricao}),c.jsxs("div",{className:"prices",children:[c.jsxs("span",{className:"price-tag gil",children:[" ",R.valorGil," G"]}),R.valorReal&&c.jsxs("span",{className:"price-tag real",children:[" R$ ",R.valorReal]})]})]}),c.jsx("div",{className:"item-actions",children:i?c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"btn-icon edit",onClick:()=>C(R),title:"Editar Preo",children:""}),c.jsx("button",{className:"btn-icon delete",onClick:()=>W(R.id),title:"Devolver para a Forja",children:""})]}):c.jsx("button",{className:"btn-buy",onClick:()=>le(R),children:"COMPRAR"})})]},R.id)),P.length===0&&c.jsx("p",{className:"empty-msg",children:"Nenhum item  venda no momento."})]})]})}),c.jsx("style",{children:`
        /* ESTILO PADRO (FIXO) */
        .bazar-trigger-btn { position: fixed; bottom: 30px; right: 30px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #ffcc00; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; }
        .bazar-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 25px #ffcc00; }
        .bazar-trigger-btn img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }

        /* ESTILO QUANDO NO DOCK DO VTT (SOBRESCREVE O FIXO) */
        .bazar-trigger-btn.vtt-dock-style {
            position: relative; 
            bottom: auto; 
            right: auto; 
            width: 50px; 
            height: 50px; 
            margin: 0; 
            z-index: auto;
            border: 2px solid #555;
            background: #111;
            box-shadow: 0 0 10px #000;
        }
        .bazar-trigger-btn.vtt-dock-style:hover {
            border-color: #ffcc00;
            color: #ffcc00;
            transform: scale(1.1);
        }

        .bazar-overlay-flex { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 100000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .bazar-modal-centered { width: 800px; max-width: 95vw; height: 750px; max-height: 90vh; background: #0d0d15; border: 1px solid #ffcc00; display: flex; flex-direction: column; box-shadow: 0 0 50px rgba(0,0,0,0.8); border-radius: 8px; overflow: hidden; }
        .bazar-header { background: linear-gradient(90deg, #1a1a1a, #000); padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #ffcc00; }
        .bazar-header h2 { margin: 0; color: #ffcc00; font-family: serif; letter-spacing: 2px; text-shadow: 0 0 10px #ffcc00; font-size: 24px; }
        .close-btn { background: transparent; border: none; color: #fff; font-size: 30px; cursor: pointer; }
        .mestre-panel { background: rgba(255, 204, 0, 0.05); padding: 15px; border-bottom: 1px solid #333; }
        .requests-box { background: rgba(0, 242, 255, 0.1); border: 1px solid #00f2ff; padding: 10px; margin-bottom: 15px; border-radius: 4px; }
        .requests-box h4 { color: #00f2ff; margin: 0 0 10px 0; font-size: 12px; }
        .request-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; font-size: 12px; color: #fff; }
        .btn-approve { background: #00f2ff; color: #000; border: none; padding: 5px 10px; font-weight: bold; cursor: pointer; border-radius: 3px; }
        .bazar-form { display: flex; flex-direction: column; gap: 10px; }
        .bazar-form .row { display: flex; gap: 10px; }
        .bazar-input { background: #000; border: 1px solid #444; color: #fff; padding: 10px; flex: 1; outline: none; font-family: serif; }
        .bazar-input.area { height: 60px; resize: none; }
        .form-actions { display: flex; gap: 10px; }
        .btn-save { flex: 1; background: #ffcc00; border: none; padding: 10px; font-weight: bold; cursor: pointer; color: #000; }
        .btn-cancel { background: #333; color: #fff; border: 1px solid #555; padding: 10px; cursor: pointer; }
        .search-bar-container { padding: 15px; background: #000; border-bottom: 1px solid #333; }
        .search-input { width: 100%; background: #111; border: 1px solid #444; color: #fff; padding: 12px; border-radius: 20px; text-align: center; outline: none; font-size: 16px; }
        .bazar-grid { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; scrollbar-width: none; -ms-overflow-style: none; }
        .bazar-grid::-webkit-scrollbar { display: none; }
        .bazar-item-card { background: linear-gradient(90deg, rgba(20,20,30,0.9), rgba(0,0,0,0.8)); border: 1px solid #444; display: flex; align-items: center; padding: 10px; border-radius: 4px; transition: 0.2s; }
        .bazar-item-card:hover { border-color: #00f2ff; box-shadow: 0 0 15px rgba(0, 242, 255, 0.1); }
        .item-img { width: 80px; height: 80px; background-size: cover; background-position: center; border: 1px solid #666; margin-right: 15px; border-radius: 4px; background-color: #000; }
        .item-info { flex: 1; }
        .item-info h4 { margin: 0 0 5px 0; color: #fff; font-size: 18px; letter-spacing: 1px; }
        .item-info .desc { margin: 0 0 10px 0; color: #aaa; font-size: 12px; font-style: italic; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .prices { display: flex; gap: 10px; }
        .price-tag { padding: 4px 8px; border-radius: 3px; font-weight: bold; font-size: 12px; }
        .price-tag.gil { background: rgba(255,255,0,0.1); color: #ffcc00; border: 1px solid #ffcc00; }
        .price-tag.real { background: rgba(0, 242, 255, 0.1); color: #00f2ff; border: 1px solid #00f2ff; }
        .item-actions { display: flex; gap: 8px; align-items: center; margin-left: 15px; }
        .btn-buy { background: #00f2ff; color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; clip-path: polygon(10% 0, 100% 0, 100% 70%, 90% 100%, 0 100%, 0 30%); transition: 0.2s; }
        .btn-buy:hover { background: #fff; box-shadow: 0 0 15px #00f2ff; }
        .btn-icon { background: transparent; border: 1px solid #444; color: #fff; padding: 8px; cursor: pointer; border-radius: 4px; font-size: 16px; }
        .btn-icon:hover { background: #fff; color: #000; }
        .btn-icon.delete:hover { background: #f44; border-color: #f44; color: #fff; }
        .empty-msg { text-align: center; color: #666; margin-top: 50px; font-style: italic; }
      `})]})}const S5="/assets/forja-Dr7AylP_.png";function iA({vttDock:i}){const[e,n]=w.useState(!1),[s,o]=w.useState([]),[u,f]=w.useState(""),[m,g]=w.useState(null),[b,v]=w.useState({nome:"",descricao:"",imagem:""});w.useEffect(()=>{if(!e)return;const O=In(kt(_e,"game_items"),ca("status","==","vault"),Uo("createdAt","desc")),Q=jn(O,G=>{o(G.docs.map(W=>({id:W.id,...W.data()})))});return()=>Q()},[e]);const E=async O=>{if(O.preventDefault(),!b.nome)return alert("O item precisa de um nome!");try{const Q={...b,updatedAt:Qn()};m?(await tt(Pe(_e,"game_items",m),Q),g(null)):await Nr(kt(_e,"game_items"),{...Q,status:"vault",ownerId:null,valorGil:0,createdAt:Qn()}),v({nome:"",descricao:"",imagem:""})}catch(Q){alert("Erro ao forjar item."),console.error(Q)}},T=async O=>{window.confirm("ATENO: Isso destruir o item permanentemente. Deseja continuar?")&&await zi(Pe(_e,"game_items",O))},M=O=>{g(O.id),v(O)},B=()=>{g(null),v({nome:"",descricao:"",imagem:""})},L=s.filter(O=>O.nome.toLowerCase().includes(u.toLowerCase()));return c.jsxs(c.Fragment,{children:[c.jsx("button",{className:`forja-trigger-btn ${i?"vtt-dock-style":""}`,onClick:()=>n(!0),title:"Abrir Forja",children:c.jsx("img",{src:S5,alt:"Forja",onError:O=>{O.target.style.display="none",O.target.parentNode.innerText="FORJA"}})}),e&&c.jsx("div",{className:"forja-overlay",onClick:()=>n(!1),children:c.jsxs("div",{className:"forja-modal",onClick:O=>O.stopPropagation(),children:[c.jsxs("div",{className:"forja-header",children:[c.jsx("h2",{children:"A FORJA ANTIGA"}),c.jsx("button",{className:"close-btn",onClick:()=>n(!1),children:""})]}),c.jsxs("div",{className:"mestre-panel-forja",children:[c.jsx("h4",{style:{color:"#f44",margin:"0 0 10px 0"},children:"FORJAR NOVO ARTEFATO"}),c.jsxs("form",{onSubmit:E,className:"forja-form",children:[c.jsxs("div",{className:"row",children:[c.jsx("input",{placeholder:"Nome do Artefato",value:b.nome,onChange:O=>v({...b,nome:O.target.value}),className:"forja-input"}),c.jsx("input",{placeholder:"URL da Imagem (Imgur)",value:b.imagem,onChange:O=>v({...b,imagem:O.target.value}),className:"forja-input"})]}),c.jsx("textarea",{placeholder:"Descrio detalhada e lore do item...",value:b.descricao,onChange:O=>v({...b,descricao:O.target.value}),className:"forja-input area"}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"submit",className:"btn-forjar",children:m?"REFUNDIR (SALVAR)":"FORJAR ITEM"}),m&&c.jsx("button",{type:"button",onClick:B,className:"btn-cancel",children:"CANCELAR"})]})]})]}),c.jsx("div",{className:"search-bar-container-forja",children:c.jsx("input",{type:"text",placeholder:" Buscar nos arquivos da forja...",value:u,onChange:O=>f(O.target.value),className:"search-input-forja"})}),c.jsxs("div",{className:"forja-grid",children:[L.map(O=>c.jsxs("div",{className:"forja-item-card",children:[c.jsx("div",{className:"item-img",style:{backgroundImage:`url(${O.imagem||"https://via.placeholder.com/150?text=?"})`}}),c.jsxs("div",{className:"item-info",children:[c.jsx("h4",{children:O.nome}),O.ownerId&&c.jsxs("div",{className:"owner-tag",children:["COMPRADO POR: ",O.buyerName||"Jogador"]}),c.jsx("p",{className:"desc",children:O.descricao}),c.jsxs("small",{style:{color:"#666"},children:["Status: ",O.ownerId?"Cofre Pessoal":"Cofre Global"]})]}),c.jsxs("div",{className:"item-actions",children:[c.jsx("button",{className:"btn-icon edit",onClick:()=>M(O),title:"Editar",children:""}),c.jsx("button",{className:"btn-icon delete",onClick:()=>T(O.id),title:"Destruir",children:""})]})]},O.id)),L.length===0&&c.jsx("p",{className:"empty-msg",children:"A forja est fria. Nenhum item no cofre."})]})]})}),c.jsx("style",{children:`
        /* ESTILO PADRO (FIXO) */
        .forja-trigger-btn { position: fixed; bottom: 30px; right: 110px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #f44; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; color: #f44; font-weight: bold; font-size: 10px; }
        .forja-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 20px #f44; }
        .forja-trigger-btn img { width: 80%; height: 80%; object-fit: contain; }

        /* ESTILO QUANDO NO DOCK DO VTT (SOBRESCREVE O FIXO) */
        .forja-trigger-btn.vtt-dock-style {
            position: relative; 
            bottom: auto; 
            right: auto; 
            width: 50px; 
            height: 50px; 
            margin: 0; 
            z-index: auto;
            border: 2px solid #555;
            background: #111;
            box-shadow: 0 0 10px #000;
        }
        .forja-trigger-btn.vtt-dock-style:hover {
            border-color: #ffcc00;
            color: #ffcc00;
            transform: scale(1.1);
        }

        .forja-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 100000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .forja-modal { width: 800px; max-height: 90vh; background: #150a0a; border: 1px solid #f44; display: flex; flex-direction: column; box-shadow: 0 0 50px rgba(255, 68, 68, 0.2); border-radius: 8px; overflow: hidden; }
        .forja-header { background: linear-gradient(90deg, #2a0e0e, #000); padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #f44; }
        .forja-header h2 { margin: 0; color: #f44; font-family: serif; letter-spacing: 2px; text-shadow: 0 0 10px #f44; font-size: 24px; }
        .close-btn { background: transparent; border: none; color: #fff; font-size: 30px; cursor: pointer; }
        .mestre-panel-forja { background: rgba(255, 68, 68, 0.05); padding: 20px; border-bottom: 1px solid #333; }
        .forja-form { display: flex; flex-direction: column; gap: 10px; }
        .forja-form .row { display: flex; gap: 10px; }
        .forja-input { background: #000; border: 1px solid #522; color: #fff; padding: 10px; flex: 1; outline: none; font-family: serif; }
        .forja-input:focus { border-color: #f44; }
        .forja-input.area { height: 80px; resize: none; }
        .btn-forjar { flex: 1; background: #f44; border: none; padding: 12px; font-weight: bold; cursor: pointer; color: #fff; text-transform: uppercase; letter-spacing: 1px; }
        .btn-forjar:hover { background: #d00; box-shadow: 0 0 10px #d00; }
        .btn-cancel { background: #333; color: #fff; border: 1px solid #555; padding: 10px; cursor: pointer; }
        .search-bar-container-forja { padding: 15px; background: #000; border-bottom: 1px solid #333; }
        .search-input-forja { width: 100%; background: #111; border: 1px solid #522; color: #fff; padding: 12px; border-radius: 20px; text-align: center; outline: none; font-size: 16px; }
        .forja-grid { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; scrollbar-width: none; -ms-overflow-style: none; }
        .forja-grid::-webkit-scrollbar { display: none; }
        .forja-item-card { background: linear-gradient(90deg, rgba(40,10,10,0.9), rgba(0,0,0,0.8)); border: 1px solid #522; display: flex; align-items: center; padding: 10px; border-radius: 4px; transition: 0.2s; }
        .forja-item-card:hover { border-color: #f44; }
        .item-img { width: 70px; height: 70px; background-size: cover; background-position: center; border: 1px solid #633; margin-right: 15px; border-radius: 4px; background-color: #000; }
        .item-info { flex: 1; }
        .item-info h4 { margin: 0 0 5px 0; color: #fff; font-size: 18px; }
        .item-info .desc { margin: 0; color: #aaa; font-size: 12px; font-style: italic; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .owner-tag { background: #00f2ff; color: #000; font-size: 10px; font-weight: bold; padding: 2px 6px; border-radius: 4px; display: inline-block; margin-bottom: 4px; }
        .item-actions { display: flex; gap: 8px; margin-left: 15px; }
        .btn-icon { background: transparent; border: 1px solid #444; color: #fff; padding: 8px; cursor: pointer; border-radius: 4px; }
        .btn-icon:hover { background: #fff; color: #000; }
        .btn-icon.delete:hover { background: #f44; border-color: #f44; color: #fff; }
        .empty-msg { text-align: center; color: #666; margin-top: 50px; font-style: italic; }
      `})]})}const T5=["h-Basica.png","h-avanada.png","h-lendaria.png","h-magica.png","h-mestre.png","h-passiva.png","h-reacao.png","h-secreta.png"],N5=({isOpen:i,onClose:e,onSave:n,label:s})=>{const[o,u]=w.useState("");return i?c.jsx("div",{className:"img-modal-overlay",onClick:e,children:c.jsxs("div",{className:"img-modal-content",onClick:f=>f.stopPropagation(),children:[c.jsxs("h3",{children:["ALTERAR IMAGEM: ",s.toUpperCase()]}),c.jsx("input",{placeholder:"Cole o link da imagem (Imgur, Discord, etc)...",value:o,onChange:f=>u(f.target.value),autoFocus:!0}),c.jsxs("div",{className:"img-modal-actions",children:[c.jsx("button",{onClick:()=>{n(o),e()},className:"btn-confirm",children:"CONFIRMAR"}),c.jsx("button",{onClick:e,className:"btn-cancel",children:"CANCELAR"})]})]})}):null};function Lg({characterData:i,isMaster:e,onClose:n}){const[s,o]=w.useState(i.character_sheet||{}),[u,f]=w.useState("geral"),[m,g]=w.useState(!1),[b,v]=w.useState(!1),[E,T]=w.useState(!1),[M,B]=w.useState(""),[L,O]=w.useState(null),[Q,G]=w.useState(!1),[W,le]=w.useState([]),[he,pe]=w.useState(null),[I,C]=w.useState(null),[k,P]=w.useState(null),[j,R]=w.useState(null),[S,Te]=w.useState(null);w.useRef(s.basic_info?.level),w.useEffect(()=>{if(i&&i.character_sheet){const U=i.character_sheet;U.job_system.passives||(U.job_system.passives=[]),U.job_system.reactions||(U.job_system.reactions=[]),o(U)}},[i]);const ne=(U,fe)=>{if(!e)return;const de=JSON.parse(JSON.stringify(s)),be=U.split(".");let Ge=de;for(let Me=0;Me<be.length-1;Me++)Ge[be[Me]]||(Ge[be[Me]]={}),Ge=Ge[be[Me]];Ge[be[be.length-1]]=fe,o(de),v(!0)},F=async()=>{try{const U=Pe(_e,"characters",i.uid||i.id);await tt(U,{character_sheet:s}),v(!1)}catch(U){console.error("Erro ao salvar:",U),alert("Erro ao salvar ficha.")}},re=(U,fe)=>{e&&(B(U),O(()=>fe),T(!0))},ye=(U,fe,de,be)=>{e&&(P({skill:fe,index:be}),R(de),U.dataTransfer.effectAllowed="move")},Be=U=>{U.preventDefault()},Ue=(U,fe,de)=>{if(U.preventDefault(),!k||!e||j!==fe)return;const be=JSON.parse(JSON.stringify(s)),Me=((et,Jt)=>Jt==="primary"?et.job_system.primary_class.skills:Jt==="secondary"?et.job_system.secondary_class.skills:Jt==="passives"?et.job_system.passives:Jt==="reactions"?et.job_system.reactions:[])(be,j),[It]=Me.splice(k.index,1);Me.splice(de,0,It),o(be),v(!0),P(null),R(null)},V=U=>{const fe=()=>"_"+Math.random().toString(36).substr(2,9),de=JSON.parse(JSON.stringify(s)),be={id:fe(),name:"",cost:"",effect:"",xp:{current:0,max:100},master:!1,icon:"h-Basica.png"};U==="primary"?de.job_system.primary_class.skills.push(be):U==="secondary"?de.job_system.secondary_class.skills.push(be):U==="passives"?(de.job_system.passives||(de.job_system.passives=[]),de.job_system.passives.push(be)):U==="reactions"&&(de.job_system.reactions||(de.job_system.reactions=[]),de.job_system.reactions.push(be)),o(de),v(!0)},ae=(U,fe)=>{if(!window.confirm("Remover este slot de habilidade?"))return;const de=JSON.parse(JSON.stringify(s));U==="primary"?de.job_system.primary_class.skills.splice(fe,1):U==="secondary"?de.job_system.secondary_class.skills.splice(fe,1):U==="passives"?de.job_system.passives.splice(fe,1):U==="reactions"&&de.job_system.reactions.splice(fe,1),o(de),v(!0)},ge=(U,fe)=>{const de=JSON.parse(JSON.stringify(s));let be;U==="primary"?be=de.job_system.primary_class.skills[fe]:U==="secondary"?be=de.job_system.secondary_class.skills[fe]:U==="passives"?be=de.job_system.passives[fe]:U==="reactions"&&(be=de.job_system.reactions[fe]),be.master=!0,be.xp.current=be.xp.max,o(de),v(!0)},Ee=U=>{if(!S)return;const{listType:fe,skillIndex:de}=S;let be="";fe==="primary"?be=`job_system.primary_class.skills.${de}.icon`:fe==="secondary"?be=`job_system.secondary_class.skills.${de}.icon`:fe==="passives"?be=`job_system.passives.${de}.icon`:fe==="reactions"&&(be=`job_system.reactions.${de}.icon`),ne(be,U),Te(null)},Se=async U=>{if(!e)return;pe(U);const fe=In(kt(_e,"game_items"),ca("status","==","vault")),Ge=(await Sm(fe)).docs.map(Me=>({id:Me.id,...Me.data()})).filter(Me=>!Me.ownerId||Me.ownerId===(i.uid||i.id));le(Ge),G(!0)},je=async U=>{const fe=JSON.parse(JSON.stringify(s));fe.equipment.slots[he]={item_id:U.id,item_name:U.nome,item_img:U.imagem,description:U.descricao,effect:""},o(fe),v(!0);const de=Pe(_e,"game_items",U.id);await tt(de,{status:"equipped",ownerId:i.uid||i.id,slotIndex:he,updatedAt:Qn()}),G(!1)},De=async U=>{if(!e)return;const fe=s.equipment.slots[U];if(fe.item_id&&window.confirm("Isso devolver o item para a Forja (Cofre). Confirmar?")){const be=Pe(_e,"game_items",fe.item_id);await tt(be,{status:"vault",slotIndex:null,updatedAt:Qn()})}const de=JSON.parse(JSON.stringify(s));de.equipment.slots[U]={item_name:"",item_img:"",effect:""},o(de),v(!0)},gt=async()=>{e&&(g(!0),setTimeout(async()=>{g(!1);const U=s.basic_info.level||1,fe=Math.floor(s.basic_info.experience.max*1.5),de=JSON.parse(JSON.stringify(s));de.basic_info.level=U+1,de.basic_info.experience.current=0,de.basic_info.experience.max=fe,o(de);const be=Pe(_e,"characters",i.uid||i.id);await tt(be,{character_sheet:de})},4e3))},Ne=["FOR","INT","SOR","CAR","VEL","CONS"],mt=100,ct=85,Xt=125,an=(U,fe,de)=>{const be=Math.PI*2*fe/de-Math.PI/2,Ge=Xt+ct*(U/mt)*Math.cos(be),Me=Xt+ct*(U/mt)*Math.sin(be);return{x:Ge,y:Me}},Ft=Ne.map((U,fe)=>{const de=s.attributes?.[U]?.value||0,{x:be,y:Ge}=an(de,fe,Ne.length);return`${be},${Ge}`}).join(" "),me=U=>U&&U.length>5?{backgroundImage:`url(${U})`}:{backgroundColor:"#111",border:"1px solid #333"},Ce=(U,fe,de=!1)=>{const be={primary:s.job_system?.primary_class?.name||"Classe Primria",secondary:s.job_system?.secondary_class?.name||"Classe Secundria",passives:"Passivas",reactions:"Reaes"}[U],Ge={primary:"job_system.primary_class.skills",secondary:"job_system.secondary_class.skills",passives:"job_system.passives",reactions:"job_system.reactions"}[U];return c.jsxs("div",{className:`skills-col ${de?"compact-col":""}`,children:[c.jsxs("h3",{className:`class-header ${U==="secondary"?"secondary":""} ${de?"compact-header":""}`,children:[U==="primary"||U==="secondary"?e?c.jsx("input",{className:"class-name-input",value:be,onChange:Me=>ne(`job_system.${U}_class.name`,Me.target.value)}):be:c.jsx("span",{children:be}),e&&c.jsx("button",{className:"btn-add-skill-slot",onClick:()=>V(U),children:"+"})]}),c.jsx("div",{className:"skills-list",children:(fe||[]).map((Me,It)=>c.jsxs("div",{className:`skill-card ${U==="secondary"?"secondary":""} ${de?"compact-card":""} ${Me.master?"mastered":""}`,draggable:e,onDragStart:et=>ye(et,Me,U,It),onDragOver:Be,onDrop:et=>Ue(et,U,It),children:[c.jsxs("div",{className:"skill-top",children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",flex:1},children:[Me.master&&c.jsx("span",{className:"star-icon pulsing",children:""}),e?c.jsx("input",{placeholder:"Nome",value:Me.name,onChange:et=>ne(`${Ge}.${It}.name`,et.target.value),className:"skill-name-in"}):c.jsx("strong",{className:"skill-name",children:Me.name||"Slot Vazio"})]}),c.jsx("div",{className:`skill-type-icon ${e?"clickable":""}`,onClick:()=>e&&Te({listType:U,skillIndex:It}),title:e?"Mudar Tipo":"",children:c.jsx("img",{src:`/simbolos/${Me.icon||"h-Basica.png"}`,alt:"Tipo"})}),e&&c.jsx("button",{className:"btn-x-red-small",onClick:()=>ae(U,It),children:""})]}),e?c.jsx("textarea",{placeholder:"Efeito...",value:Me.effect,onChange:et=>ne(`${Ge}.${It}.effect`,et.target.value),className:"skill-desc-in"}):c.jsx("p",{className:"skill-desc",children:Me.effect}),c.jsxs("div",{className:"skill-xp-box",children:[c.jsxs("div",{className:"xp-labels",children:[c.jsx("span",{children:"XP"}),e?c.jsxs("div",{style:{display:"flex"},children:[c.jsx("input",{className:"xp-tiny",value:Me.xp?.current||0,onChange:et=>ne(`${Ge}.${It}.xp.current`,Number(et.target.value))})," /",c.jsx("input",{className:"xp-tiny",value:Me.xp?.max||100,onChange:et=>ne(`${Ge}.${It}.xp.max`,Number(et.target.value))})]}):c.jsxs("span",{children:[Me.xp?.current||0," / ",Me.xp?.max||100]})]}),c.jsx("div",{className:`skill-track ${Me.master?"grayed":""}`,children:c.jsx("div",{className:"skill-fill",style:{width:`${Math.min((Me.xp?.current||0)/(Me.xp?.max||100)*100,100)}%`}})}),e&&!Me.master&&Me.xp?.current>=Me.xp?.max&&c.jsx("button",{className:"btn-masterize",onClick:()=>ge(U,It),children:"MASTERIZAR"})]})]},Me.id))})]})};return c.jsxs("div",{className:"ficha-overlay-fixed",children:[c.jsx(N5,{isOpen:E,onClose:()=>T(!1),onSave:L,label:M}),e&&b&&c.jsx("button",{className:"save-fab glowing",onClick:F,title:"Salvar Alteraes",children:""}),c.jsxs("div",{className:"ficha-container fade-in",children:[c.jsx("button",{className:"close-btn-ficha",onClick:n,children:""}),c.jsxs("div",{className:"ficha-header",children:[c.jsxs("div",{className:"header-left-group",children:[c.jsxs("div",{className:"guild-insignia-box",children:[c.jsx("span",{className:"header-label-top",children:"SIGNO"}),c.jsx("div",{className:`insignia-display ${e?"clickable":""}`,style:me(s.basic_info.guild_insignia),onClick:()=>re("Signo",U=>ne("basic_info.guild_insignia",U))})]}),c.jsxs("div",{className:"guild-item-box",children:[c.jsx("span",{className:"header-label-top",children:"RAA"}),c.jsx("div",{className:`special-display ${e?"clickable":""}`,style:me(s.basic_info.special_image),onClick:()=>re("Raa",U=>ne("basic_info.special_image",U))})]})]}),c.jsxs("div",{className:"header-info",children:[c.jsx("h1",{className:"responsive-title",children:s.basic_info.character_name}),c.jsxs("span",{className:"sub-header",children:[s.basic_info.race," // ",i.class]}),c.jsxs("div",{className:"xp-container",children:[c.jsxs("div",{className:"lvl-box",children:[c.jsx("small",{children:"LVL"}),e?c.jsx("input",{className:"lvl-input",type:"number",value:s.basic_info.level,onChange:U=>ne("basic_info.level",Number(U.target.value))}):c.jsx("span",{children:s.basic_info.level})]}),c.jsxs("div",{className:"xp-bar-box",children:[c.jsxs("div",{className:"xp-text",children:["XP ",e?c.jsx("input",{className:"xp-mini-input",value:s.basic_info.experience.current,onChange:U=>ne("basic_info.experience.current",Number(U.target.value))}):s.basic_info.experience.current," / ",e?c.jsx("input",{className:"xp-mini-input",value:s.basic_info.experience.max,onChange:U=>ne("basic_info.experience.max",Number(U.target.value))}):s.basic_info.experience.max]}),c.jsx("div",{className:"xp-track",children:c.jsx("div",{className:"xp-fill",style:{width:`${Math.min(s.basic_info.experience.current/s.basic_info.experience.max*100,100)}%`}})})]}),e&&s.basic_info.experience.current>=s.basic_info.experience.max&&c.jsx("button",{className:"btn-levelup glowing",onClick:gt,children:" UP"})]})]}),c.jsxs("div",{className:"header-right-group",children:[c.jsxs("div",{className:"guild-item-box hidemobile",children:[c.jsx("span",{className:"header-label-top",children:"CLASSE 1"}),c.jsx("div",{className:`special-display ${e?"clickable":""}`,style:me(s.basic_info.class1_image),onClick:()=>re("Classe 1",U=>ne("basic_info.class1_image",U))})]}),c.jsxs("div",{className:"guild-item-box hidemobile",children:[c.jsx("span",{className:"header-label-top",children:"CLASSE 2"}),c.jsx("div",{className:`special-display ${e?"clickable":""}`,style:me(s.basic_info.class2_image),onClick:()=>re("Classe 2",U=>ne("basic_info.class2_image",U))})]}),c.jsxs("div",{className:"guild-item-box",children:[c.jsx("span",{className:"header-label-top",children:"RANK"}),c.jsx("div",{className:`rank-display ${e?"clickable":""}`,style:me(s.basic_info.guild_rank_image),onClick:()=>re("Rank",U=>ne("basic_info.guild_rank_image",U))})]})]})]}),c.jsxs("div",{className:"ficha-tabs",children:[c.jsx("button",{className:`tab-btn ${u==="geral"?"active":""}`,onClick:()=>f("geral"),children:"VISO GERAL"}),c.jsx("button",{className:`tab-btn ${u==="habilidades"?"active":""}`,onClick:()=>f("habilidades"),children:"GRIMRIO"})]}),c.jsx("div",{className:"ficha-body",children:u==="geral"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"col-attributes",children:[c.jsx("h3",{className:"section-title",children:"ATRIBUTOS"}),c.jsx("div",{className:"radar-wrapper",children:c.jsxs("svg",{width:"250",height:"250",viewBox:"0 0 250 250",className:"radar-svg",children:[[20,40,60,80,100].map(U=>c.jsx("polygon",{points:Ne.map((fe,de)=>{const{x:be,y:Ge}=an(U,de,6);return`${be},${Ge}`}).join(" "),fill:"none",stroke:"#333",strokeWidth:"1"},U)),c.jsx("polygon",{points:Ft,fill:"rgba(0, 242, 255, 0.2)",stroke:"#00f2ff",strokeWidth:"2"}),Ne.map((U,fe)=>{const{x:de,y:be}=an(120,fe,6),Ge=s.attributes?.[U]?.value||0;return c.jsx("foreignObject",{x:de-20,y:be-15,width:"40",height:"30",children:c.jsxs("div",{className:"stat-box-chart",children:[c.jsx("span",{className:"sb-label",children:U}),e?c.jsx("input",{className:"sb-input",value:Ge,onChange:Me=>ne(`attributes.${U}.value`,Number(Me.target.value))}):c.jsx("span",{className:"sb-val",children:Ge})]})},U)})]})}),c.jsxs("div",{className:"secondary-stats",children:[c.jsxs("div",{className:"stat-row",children:[c.jsx("label",{children:"HP"}),c.jsxs("div",{className:"stat-bars-inputs",children:[e?c.jsx("input",{value:s.status.hp.current,onChange:U=>ne("status.hp.current",Number(U.target.value))}):c.jsx("span",{children:s.status.hp.current}),"/",e?c.jsx("input",{value:s.status.hp.max,onChange:U=>ne("status.hp.max",Number(U.target.value))}):c.jsx("span",{children:s.status.hp.max})]})]}),c.jsxs("div",{className:"stat-row",children:[c.jsx("label",{children:"MP"}),c.jsxs("div",{className:"stat-bars-inputs mp",children:[e?c.jsx("input",{value:s.status.mp.current,onChange:U=>ne("status.mp.current",Number(U.target.value))}):c.jsx("span",{children:s.status.mp.current}),"/",e?c.jsx("input",{value:s.status.mp.max,onChange:U=>ne("status.mp.max",Number(U.target.value))}):c.jsx("span",{children:s.status.mp.max})]})]}),c.jsxs("div",{className:"stat-row-simple",children:[c.jsxs("div",{className:"s-box",children:[c.jsx("img",{src:"/simbolos/ARM.png",alt:"ARM",className:"stat-icon-img"}),e?c.jsx("input",{value:s.status.arm.value,onChange:U=>ne("status.arm.value",Number(U.target.value))}):c.jsx("span",{children:s.status.arm.value})]}),c.jsxs("div",{className:"s-box",children:[c.jsx("img",{src:"/simbolos/RES.png",alt:"RES",className:"stat-icon-img"}),e?c.jsx("input",{value:s.status.res.value,onChange:U=>ne("status.res.value",Number(U.target.value))}):c.jsx("span",{children:s.status.res.value})]}),c.jsxs("div",{className:"s-box",children:[c.jsx("img",{src:"/simbolos/MOV.png",alt:"MOV",className:"stat-icon-img"}),e?c.jsx("input",{value:s.status.mov?.value||3,onChange:U=>ne("status.mov.value",Number(U.target.value))}):c.jsx("span",{children:s.status.mov?.value||3})]})]})]})]}),c.jsxs("div",{className:"col-center-equip",children:[c.jsx("div",{className:`char-image-frame ${e?"clickable":""}`,onClick:()=>re("Personagem",U=>ne("imgUrl",U)),children:c.jsx("div",{className:"image-display",style:me(s.imgUrl)})}),c.jsx("div",{className:"equip-slots-overlay",children:[{id:0,label:"CABEA",style:{top:"-30px",left:"50%",transform:"translateX(-50%)"}},{id:1,label:"ACESS. 2",style:{top:"80px",right:"-15px"}},{id:2,label:"MO DIR.",style:{bottom:"120px",right:"-15px"}},{id:3,label:"MO ESQ.",style:{bottom:"120px",left:"-15px"}},{id:4,label:"ACESS. 1",style:{top:"80px",left:"-15px"}},{id:5,label:"CORPO",style:{bottom:"-20px",left:"60px"}},{id:6,label:"PS",style:{bottom:"-20px",right:"60px"}}].map((U,fe)=>c.jsxs("div",{className:"equip-slot",style:U.style,children:[c.jsx("div",{className:"slot-label",children:U.label}),c.jsxs("div",{className:"slot-square",children:[!s.equipment?.slots?.[fe]?.item_img&&e&&c.jsx("button",{className:"btn-plus-item",onClick:()=>Se(fe),children:"+"}),s.equipment?.slots?.[fe]?.item_img?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"item-bg",style:me(s.equipment.slots[fe].item_img)}),c.jsx("button",{className:"btn-eye-item",onClick:()=>C(s.equipment.slots[fe]),children:""}),e&&c.jsx("button",{className:"btn-return-forge",title:"Devolver",onClick:()=>De(fe),children:""})]}):!e&&c.jsx("span",{className:"empty-text",children:"Vazio"})]})]},fe))})]}),c.jsxs("div",{className:"col-inventory",children:[c.jsx("h3",{className:"section-title",children:"BOLSA & GIL"}),c.jsxs("div",{className:"gil-display",children:[c.jsx("span",{className:"coin-icon",children:""}),e?c.jsx("input",{type:"number",className:"gil-input-master",value:s.inventory.gil,onChange:U=>ne("inventory.gil",Number(U.target.value))}):c.jsx("span",{className:"gil-amount",children:s.inventory.gil}),c.jsx("span",{className:"currency",children:"GIL"})]}),c.jsxs("div",{className:"items-list",children:[c.jsx("h4",{children:"MOCHILA"}),c.jsxs("div",{className:"items-scroll",children:[(s.inventory.items||[]).map((U,fe)=>c.jsx("div",{className:"inv-row",children:e?c.jsxs(c.Fragment,{children:[c.jsx("input",{className:"inv-name",value:U.name,onChange:de=>ne(`inventory.items.${fe}.name`,de.target.value)}),c.jsx("input",{className:"inv-qtd",type:"number",value:U.quantity,onChange:de=>ne(`inventory.items.${fe}.quantity`,Number(de.target.value))}),c.jsx("button",{className:"btn-x-red",onClick:()=>{const de=s.inventory.items.filter((be,Ge)=>Ge!==fe);ne("inventory.items",de)},children:""})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"i-name",children:U.name||"Slot Vazio"}),c.jsxs("span",{className:"i-qtd",children:["x",U.quantity||0]})]})},fe)),e&&c.jsx("button",{className:"add-item-btn",onClick:()=>ne("inventory.items",[...s.inventory.items||[],{name:"Novo Item",quantity:1}]),children:"+ Slot"})]})]})]})]}):c.jsxs("div",{className:"skills-tab-content",children:[Ce("primary",s.job_system.primary_class.skills),Ce("secondary",s.job_system.secondary_class.skills),c.jsxs("div",{className:"skills-col extra-col",children:[Ce("passives",s.job_system.passives||[],!0),Ce("reactions",s.job_system.reactions||[],!0),c.jsxs("div",{className:"extra-abilities-box",children:[c.jsxs("div",{className:"bonus-row",children:[c.jsx("label",{children:"BNUS DE CLASSE"}),e?c.jsx("textarea",{value:s.job_system?.class_bonus?.value,onChange:U=>ne("job_system.class_bonus.value",U.target.value),className:"bonus-area"}):c.jsx("p",{className:"bonus-area-read",children:s.job_system?.class_bonus?.value||"Nenhum"})]}),c.jsxs("div",{className:"bonus-row",style:{marginTop:"15px"},children:[c.jsx("label",{children:"TTULO"}),e?c.jsx("input",{className:"ab-input",style:{background:"rgba(0,0,0,0.5)",padding:"5px",width:"100%",border:"1px solid #444",borderRadius:"4px"},value:s.basic_info?.custom_title||"",onChange:U=>ne("basic_info.custom_title",U.target.value)}):c.jsx("p",{style:{background:"rgba(0,0,0,0.5)",padding:"8px",borderRadius:"4px",fontSize:"12px",color:"#ffcc00",fontWeight:"bold",margin:0},children:s.basic_info?.custom_title||"Sem Ttulo"})]})]})]})]})}),S&&c.jsx("div",{className:"item-selector-overlay",onClick:()=>Te(null),children:c.jsxs("div",{className:"item-selector-box",onClick:U=>U.stopPropagation(),style:{height:"auto",maxHeight:"400px"},children:[c.jsx("h3",{children:"ESCOLHA O TIPO"}),c.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"10px",padding:"10px"},children:T5.map(U=>c.jsx("div",{style:{cursor:"pointer",border:"1px solid #333",padding:"5px",borderRadius:"4px",textAlign:"center",background:"#fff"},onClick:()=>Ee(U),children:c.jsx("img",{src:`/simbolos/${U}`,alt:U,style:{width:"40px",height:"auto"}})},U))}),c.jsx("button",{className:"btn-cancel-modal",onClick:()=>Te(null),children:"CANCELAR"})]})}),Q&&c.jsx("div",{className:"item-selector-overlay",onClick:()=>G(!1),children:c.jsxs("div",{className:"item-selector-box",onClick:U=>U.stopPropagation(),children:[c.jsx("h3",{children:"EQUIPAR DO COFRE"}),c.jsxs("div",{className:"forge-list-scroll",children:[W.length===0&&c.jsx("p",{className:"empty-text",children:"Nenhum item disponvel na Forja."}),W.map(U=>c.jsxs("div",{className:"forge-item-row",onClick:()=>je(U),children:[c.jsx("div",{className:"forge-thumb",style:me(U.imagem)}),c.jsxs("div",{children:[c.jsx("strong",{children:U.nome}),U.ownerId&&c.jsx("small",{style:{color:"#0f0"},children:" (Seu Item)"}),c.jsxs("p",{children:[U.descricao.substring(0,40),"..."]})]})]},U.id))]}),c.jsx("button",{className:"btn-cancel-modal",onClick:()=>G(!1),children:"CANCELAR"})]})}),I&&c.jsx("div",{className:"item-selector-overlay",onClick:()=>C(null),children:c.jsxs("div",{className:"item-details-box",onClick:U=>U.stopPropagation(),children:[c.jsx("div",{className:"detail-img-large",style:me(I.item_img)}),c.jsx("h3",{children:I.item_name}),c.jsx("p",{className:"details-desc",children:I.description||"Sem descrio"}),c.jsxs("p",{className:"details-effect",children:["Efeito: ",I.effect||"Nenhum"]}),c.jsx("button",{className:"btn-cancel-modal",onClick:()=>C(null),children:"FECHAR"})]})}),m&&c.jsx("div",{className:"level-up-overlay",children:c.jsx("h1",{className:"levelup-text",children:"LEVEL UP!"})})]}),c.jsx("style",{children:`
        /* GERAL */
        .ficha-overlay-fixed { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.95); z-index: 200000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(8px); overflow-y: auto; }
        .ficha-container { width: 1200px; height: 850px; max-width: 95vw; max-height: 98vh; background: #050a10; border: 2px solid #ffcc00; display: flex; flex-direction: column; position: relative; box-shadow: 0 0 50px rgba(255, 204, 0, 0.2); border-radius: 8px; overflow: hidden; font-family: 'Cinzel', serif; color: #fff; }
        .close-btn-ficha { position: absolute; top: 10px; right: 15px; background: transparent; border: none; color: #f44; font-size: 24px; cursor: pointer; z-index: 200; font-weight: bold; }
        .save-fab { position: absolute; bottom: 30px; right: 30px; width: 60px; height: 60px; border-radius: 50%; background: #222; border: 2px solid #444; color: #fff; font-size: 30px; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 300; transition: 0.3s; box-shadow: 0 0 15px #000; }
        .save-fab:hover { background: #00f2ff; border-color: #fff; color: #000; box-shadow: 0 0 30px #00f2ff; }
        .save-fab.glowing { animation: pulseSave 1.5s infinite; border-color: #00f2ff; color: #00f2ff; }
        @keyframes pulseSave { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        /* HEADER */
        .ficha-header { padding: 25px 30px 10px 30px; background: linear-gradient(90deg, #101020, #000); border-bottom: 2px solid #333; display: flex; justify-content: space-between; align-items: center; height: 140px; position: relative; flex-shrink: 0; }
        .guild-insignia-box, .guild-rank-box, .guild-item-box { display: flex; flex-direction: column; align-items: center; width: 80px; position: relative; padding-top: 10px; }
        .header-left-group, .header-right-group { display: flex; gap: 20px; align-items: flex-end; }
        .header-label-top { font-size: 10px; color: #ffcc00; font-weight: bold; letter-spacing: 1px; margin-bottom: 2px; }
        .insignia-display, .rank-display, .special-display { width: 70px; height: 70px; background-size: contain; background-repeat: no-repeat; background-position: center; border: 1px solid #333; border-radius: 50%; background-color: #000; position: relative; transition: 0.2s; }
        .special-display { border-radius: 12px; }
        .clickable:hover { cursor: pointer; border-color: #ffcc00; box-shadow: 0 0 10px #ffcc00; }
        .header-info { flex: 1; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; min-width: 0; }
        .header-info h1 { margin: 0; color: #ffcc00; font-size: 36px; letter-spacing: 4px; text-shadow: 0 0 10px rgba(255,204,0,0.3); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%; }
        .sub-header { color: #00f2ff; font-size: 14px; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 15px; }
        .xp-container { display: flex; align-items: center; gap: 15px; width: 60%; margin-top: -5px; }
        .lvl-box { display: flex; flex-direction: column; align-items: center; background: #222; border: 1px solid #ffcc00; padding: 5px 12px; border-radius: 4px; box-shadow: 0 0 10px rgba(255,204,0,0.2); }
        .lvl-box small { font-size: 8px; color: #ffcc00; }
        .lvl-box span { font-size: 24px; font-weight: bold; line-height: 1; }
        .lvl-input { width: 40px; background: transparent; border: none; color: #fff; font-size: 24px; font-weight: bold; text-align: center; }
        .xp-bar-box { flex: 1; display: flex; flex-direction: column; }
        .xp-text { text-align: right; font-size: 10px; color: #aaa; margin-bottom: 2px; }
        .xp-mini-input { background: #111; border: none; color: #fff; width: 30px; text-align: center; font-size: 10px; }
        .xp-track { width: 100%; height: 8px; background: #111; border: 1px solid #444; border-radius: 4px; overflow: hidden; }
        .xp-fill { height: 100%; background: linear-gradient(90deg, #00f2ff, #0088ff); transition: width 0.5s; }
        .btn-levelup { background: linear-gradient(to bottom, #ffcc00, #ff8800); border: 2px solid #fff; color: #000; font-weight: bold; padding: 5px 15px; cursor: pointer; border-radius: 20px; animation: glow 1s infinite alternate; font-family: 'Cinzel', serif; font-size: 10px; }
        @keyframes glow { from { box-shadow: 0 0 10px #ffcc00; } to { box-shadow: 0 0 30px #ffcc00; transform: scale(1.05); } }
        .ficha-tabs { display: flex; background: #111; border-bottom: 1px solid #333; margin-top: 0; flex-shrink: 0; }
        .tab-btn { flex: 1; background: transparent; border: none; padding: 15px; color: #666; font-family: 'Cinzel', serif; font-size: 16px; cursor: pointer; transition: 0.3s; border-bottom: 3px solid transparent; }
        .tab-btn:hover { color: #fff; background: rgba(255,255,255,0.05); }
        .tab-btn.active { color: #ffcc00; border-bottom: 3px solid #ffcc00; background: rgba(255, 204, 0, 0.05); }
        .ficha-body { flex: 1; display: flex; padding: 30px 20px; gap: 20px; overflow: hidden; position: relative; }
        
        /* SCROLLBAR ESTILOSA (WEBKIT) */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #050a10; 
            border-left: 1px solid #333;
        }
        ::-webkit-scrollbar-thumb {
            background: #444; 
            border-radius: 4px;
            border: 1px solid #222;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #ffcc00;
            border-color: #fff;
        }

        /* Aplicando especificamente */
        .skills-list, .bonus-area, .skills-col.extra-col, .forge-list-scroll, .items-scroll {
            scrollbar-width: thin; 
            scrollbar-color: #ffcc00 #050a10; 
        }

        /* ESTILOS DE HABILIDADES */
        .skills-tab-content { display: flex; width: 100%; height: 100%; gap: 20px; }
        .skills-col { flex: 1; display: flex; flex-direction: column; background: rgba(0,0,0,0.3); border: 1px solid #333; padding: 10px; border-radius: 4px; overflow: hidden; min-width: 0; }
        .class-header { color: #00f2ff; font-size: 16px; border-bottom: 2px solid #00f2ff; padding-bottom: 5px; margin-bottom: 10px; text-transform: uppercase; display: flex; justify-content: space-between; align-items: center; }
        .class-header.secondary { color: #aaa; border-color: #666; }
        .class-name-input { background: transparent; border: none; color: inherit; font-size: inherit; font-weight: bold; width: 80%; }
        .btn-add-skill-slot { background: transparent; border: 1px solid #555; color: #fff; width: 20px; height: 20px; cursor: pointer; font-size: 14px; line-height: 1; }
        
        /* CORRIGIDO SCROLL DA LISTA */
        .skills-list { 
            flex: 1; 
            overflow-y: auto; 
            display: flex; 
            flex-direction: column; 
            gap: 8px; 
            padding-right: 5px; 
        }
        
        .skill-card { background: rgba(0, 30, 60, 0.4); border: 1px solid #005577; padding: 8px; border-radius: 4px; cursor: grab; transition: 0.2s; position: relative; }
        .skill-card.secondary { background: rgba(30, 30, 30, 0.4); border-color: #444; }
        .skill-card:active { cursor: grabbing; border-color: #ffcc00; }
        .skill-card.mastered { border-color: #ffd700; background: rgba(50, 40, 0, 0.4); }
        .skill-top { display: flex; justify-content: space-between; margin-bottom: 5px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; align-items: flex-start; }
        .skill-name { color: #ffcc00; font-size: 13px; }
        .skill-desc { font-size: 11px; color: #ccc; line-height: 1.3; margin: 0 0 5px 0; }
        .skill-name-in { flex: 1; font-weight: bold; color: #ffcc00; background: transparent; border: none; font-size: 12px; }
        .skill-desc-in { width: 100%; background: transparent; border: none; color: #ccc; font-size: 11px; resize: none; font-family: sans-serif; height: 30px; }
        .skill-type-icon { width: 30px; height: 30px; margin-left: 5px; background: #fff; padding: 2px; border-radius: 4px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .skill-type-icon img { width: 100%; height: 100%; object-fit: contain; }
        .skill-xp-box { margin-top: 5px; background: rgba(0,0,0,0.3); padding: 4px; border-radius: 3px; }
        .xp-labels { display: flex; justify-content: space-between; font-size: 9px; color: #888; margin-bottom: 2px; }
        .xp-tiny { background: transparent; border: none; color: #aaa; width: 20px; text-align: center; font-size: 9px; }
        .skill-track { width: 100%; height: 5px; background: #222; border-radius: 2px; overflow: hidden; }
        .skill-track.grayed .skill-fill { background: #888; }
        .skill-fill { height: 100%; background: #00f2ff; transition: width 0.3s; }
        .btn-masterize { width: 100%; margin-top: 4px; background: linear-gradient(to right, #d4af37, #b8860b); border: none; color: #000; font-size: 9px; font-weight: bold; cursor: pointer; padding: 2px; border-radius: 2px; }
        .star-icon { color: #ffd700; font-size: 14px; margin-right: 5px; text-shadow: 0 0 5px #ffd700; }
        .pulsing { animation: pulseStar 1.5s infinite; }
        @keyframes pulseStar { 0% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.3); opacity: 1; } 100% { transform: scale(1); opacity: 0.8; } }
        .btn-x-red-small { color: #f44; background: none; border: none; font-weight: bold; cursor: pointer; font-size: 12px; margin-left: 5px; }

        /* ESTILOS COMPACTOS (PASSIVA/REAO) */
        .compact-col { background: transparent; border: none; padding: 0; margin-bottom: 10px; flex: none; }
        .compact-header { font-size: 12px; border-color: #555; color: #aaa; margin-bottom: 5px; padding-bottom: 2px; }
        .compact-card { padding: 4px; margin-bottom: 5px; border-color: #333; background: rgba(20,20,20,0.5); }
        .compact-card .skill-name { font-size: 11px; }
        .compact-card .skill-type-icon { width: 20px; height: 20px; }
        .compact-card .skill-desc { font-size: 10px; margin-bottom: 2px; }
        .compact-card .skill-track { height: 3px; }

        /* COLUNA EXTRA COM SCROLL FUNCIONAL */
        .skills-col.extra-col { 
            flex: 0.8; 
            overflow-y: auto; 
            padding-right: 5px;
        }
        .skills-col.extra-col .skills-list {
            overflow-y: visible;
            flex: none;
        }

        /* OUTRAS COLUNAS */
        .col-attributes { width: 300px; display: flex; flex-direction: column; align-items: center; border-right: 1px solid #333; padding-right: 20px; flex-shrink: 0; }
        .col-center-equip { flex: 1; position: relative; display: flex; justify-content: center; align-items: center; }
        .col-inventory { width: 280px; border-left: 1px solid #333; padding-left: 20px; display: flex; flex-direction: column; flex-shrink: 0; }
        .section-title { color: #aaa; font-size: 14px; border-bottom: 1px solid #00f2ff; width: 100%; text-align: center; margin-bottom: 15px; padding-bottom: 5px; }
        .radar-wrapper { position: relative; margin-bottom: 20px; width: 100%; display: flex; justify-content: center; }
        .stat-box-chart { background: #000; border: 1px solid #ffcc00; width: 40px; height: 30px; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 4px; box-shadow: 0 0 5px #000; }
        .sb-label { font-size: 8px; color: #aaa; }
        .sb-val { font-size: 12px; font-weight: bold; color: #fff; }
        .sb-input { width: 100%; height: 100%; background: transparent; border: none; color: #ffcc00; text-align: center; font-weight: bold; padding: 0; font-size: 12px; }
        .secondary-stats { width: 100%; }
        .stat-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
        .stat-row label { font-weight: bold; color: #ffcc00; width: 30px; }
        .stat-bars-inputs { flex: 1; background: rgba(255,0,0,0.1); border: 1px solid #522; padding: 5px; display: flex; align-items: center; justify-content: center; gap: 5px; color: #fff; border-radius: 4px; }
        .stat-bars-inputs.mp { background: rgba(0,0,255,0.1); border-color: #225; }
        .stat-bars-inputs input { background: transparent; border: none; color: #fff; width: 40px; text-align: center; font-family: 'serif'; font-weight: bold; }
        .stat-row-simple { display: flex; justify-content: space-between; gap: 10px; margin-top: 15px; }
        .s-box { flex: 1; background: #111; border: 1px solid #444; padding: 10px; text-align: center; border-radius: 4px; display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .s-box label { display: block; font-size: 10px; color: #888; margin-bottom: 5px; }
        .s-box input { background: transparent; border: none; color: #fff; text-align: center; font-size: 18px; width: 100%; font-weight: bold; }
        .s-box span { font-size: 18px; font-weight: bold; }
        .stat-icon-img { width: 30px; height: 30px; object-fit: contain; }
        .char-image-frame { width: 300px; height: 450px; border: 2px solid #333; position: relative; background: #000; border-radius: 150px; overflow: hidden; box-shadow: inset 0 0 50px #000; margin-top: -20px; z-index: 1; transition: 0.2s; }
        .char-image-frame.clickable:hover { border-color: #ffcc00; cursor: pointer; }
        .image-display { width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.8; }
        .equip-slots-overlay { position: absolute; width: 300px; height: 450px; left: 50%; top: 50%; transform: translate(-50%, -50%); pointer-events: none; z-index: 2; margin-top: -10px; }
        .equip-slot { position: absolute; width: 80px; display: flex; flex-direction: column; align-items: center; pointer-events: auto; }
        .slot-label { font-size: 9px; color: #00f2ff; text-shadow: 0 0 2px #000; margin-bottom: 2px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        .slot-square { width: 60px; height: 60px; background: rgba(0, 10, 30, 0.9); border: 1px solid #ffcc00; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 15px rgba(0,0,0,0.8); position: relative; overflow: hidden; border-radius: 4px; }
        .item-bg { width: 100%; height: 100%; background-size: cover; background-position: center; position: absolute; top: 0; left: 0; }
        .empty-text { font-size: 9px; color: #666; text-align: center; line-height: 1; padding: 2px; }
        .btn-plus-item { background: transparent; color: #ffcc00; font-size: 24px; border: none; cursor: pointer; font-weight: bold; }
        .btn-eye-item { position: absolute; bottom: 2px; right: 2px; font-size: 10px; background: rgba(0,0,0,0.8); color: #fff; border: none; border-radius: 3px; cursor: pointer; padding: 2px 4px; z-index: 5; }
        .btn-return-forge { position: absolute; top: 2px; left: 2px; font-size: 10px; background: rgba(200, 0, 0, 0.8); color: #fff; border: none; border-radius: 3px; cursor: pointer; padding: 2px 4px; z-index: 5; }
        .gil-display { background: linear-gradient(90deg, rgba(255,204,0,0.1), transparent); border: 1px solid #ffcc00; padding: 15px; border-radius: 4px; display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .coin-icon { font-size: 20px; }
        .gil-amount { font-size: 24px; font-weight: bold; color: #fff; flex: 1; text-align: right; }
        .gil-input-master { background: transparent; border: none; color: #fff; font-size: 24px; font-weight: bold; width: 100%; text-align: right; outline: none; }
        input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        .currency { font-size: 10px; color: #ffcc00; font-weight: bold; }
        .items-list { flex: 1; display: flex; flex-direction: column; }
        .items-list h4 { color: #888; font-size: 12px; border-bottom: 1px solid #444; padding-bottom: 5px; margin-bottom: 10px; }
        .items-scroll { flex: 1; overflow-y: auto; padding-right: 5px; }
        .inv-row { display: flex; justify-content: space-between; border-bottom: 1px solid #222; padding: 8px 0; font-size: 12px; align-items: center; }
        .inv-name { background: transparent; border: none; color: #ddd; flex: 1; font-family: 'serif'; }
        .inv-qtd { background: transparent; border: none; color: #00f2ff; width: 40px; text-align: right; font-weight: bold; }
        .btn-x-red { color: #f44; background: none; border: none; cursor: pointer; font-weight: bold; margin-left: 5px; }
        .i-name { color: #ddd; }
        .i-qtd { color: #00f2ff; font-weight: bold; }
        .add-item-btn { width: 100%; background: #222; border: 1px dashed #555; color: #888; padding: 5px; cursor: pointer; margin-top: 10px; font-size: 10px; }
        .img-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 300000; display: flex; align-items: center; justify-content: center; }
        .img-modal-content { background: #111; border: 1px solid #ffcc00; padding: 25px; width: 400px; border-radius: 8px; text-align: center; box-shadow: 0 0 30px rgba(255,204,0,0.2); }
        .img-modal-content h3 { color: #ffcc00; margin-top: 0; font-family: 'Cinzel', serif; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 20px; }
        .img-modal-content input { width: 100%; padding: 12px; background: #000; border: 1px solid #444; color: #fff; margin-bottom: 20px; outline: none; border-radius: 4px; }
        .img-modal-content input:focus { border-color: #00f2ff; }
        .img-modal-actions { display: flex; gap: 15px; justify-content: center; }
        .btn-confirm { background: #00f2ff; color: #000; padding: 10px 25px; border: none; cursor: pointer; font-weight: bold; border-radius: 4px; transition: 0.2s; }
        .btn-confirm:hover { background: #fff; box-shadow: 0 0 15px #00f2ff; }
        .btn-cancel { background: #333; color: #fff; padding: 10px 25px; border: none; cursor: pointer; border-radius: 4px; }
        .btn-cancel:hover { background: #444; }
        .item-selector-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 300000; display: flex; align-items: center; justify-content: center; }
        .item-selector-box { width: 400px; height: 500px; background: #111; border: 1px solid #ffcc00; padding: 20px; display: flex; flex-direction: column; border-radius: 8px; }
        .item-selector-box h3 { color: #ffcc00; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0; }
        .forge-list-scroll { flex: 1; overflow-y: auto; margin-bottom: 15px; }
        .forge-item-row { display: flex; align-items: center; padding: 10px; border-bottom: 1px solid #333; cursor: pointer; }
        .forge-item-row:hover { background: rgba(255,255,255,0.1); }
        .forge-item-row img { width: 40px; height: 40px; border: 1px solid #555; margin-right: 10px; }
        .forge-thumb { width: 40px; height: 40px; border: 1px solid #555; margin-right: 10px; background-size: cover; background-position: center; }
        .forge-item-row strong { color: #00f2ff; display: block; font-size: 12px; }
        .forge-item-row p { font-size: 10px; color: #aaa; margin: 0; }
        .btn-cancel-modal { width: 100%; padding: 10px; background: #333; color: #fff; border: none; cursor: pointer; }
        .item-details-box { width: 300px; background: #000; border: 1px solid #00f2ff; padding: 20px; text-align: center; border-radius: 8px; }
        .item-details-box img { width: 80px; height: 80px; border: 1px solid #fff; margin-bottom: 10px; }
        .detail-img-large { width: 80px; height: 80px; border: 1px solid #fff; margin: 0 auto 10px auto; background-size: cover; background-position: center; }
        .item-details-box h3 { color: #00f2ff; margin: 0 0 10px 0; }
        .details-desc { font-size: 12px; color: #ccc; margin-bottom: 10px; font-style: italic; }
        .details-effect { font-size: 12px; color: #ffcc00; font-weight: bold; margin-bottom: 20px; }
        .extra-abilities-box { margin-top: 20px; border-top: 2px solid #444; padding-top: 15px; }
        .bonus-row { margin-top: 10px; }
        .bonus-row label { font-size: 10px; color: #00f2ff; display: block; margin-bottom: 5px; font-weight: bold; }
        .bonus-row p { font-size: 12px; color: #ddd; font-style: italic; background: rgba(0,0,0,0.5); padding: 8px; border-radius: 4px; }
        
        /* CAIXA DE BNUS DE CLASSE MAIOR */
        .bonus-area { 
            width: 100%; 
            height: 120px; 
            background: rgba(0,0,0,0.5); 
            border: 1px solid #444; 
            color: #ddd; 
            font-size: 12px; 
            padding: 5px; 
            resize: vertical; 
        }
        .bonus-area-read {
            min-height: 40px;
            max-height: 120px;
            overflow-y: auto;
        }

        .ab-input { background: transparent; border: none; color: #fff; font-weight: bold; flex: 1; font-size: 12px; }
        
        /* --- LEVEL UP STYLE (FFT) --- */
        .level-up-overlay { 
            position: fixed; /* Mudei para FIXED para ignorar o scroll do modal */
            top: 0; 
            left: 0; 
            width: 100vw; 
            height: 100vh; 
            background: rgba(0,0,0,0.7); 
            z-index: 999999; /* Z-index bem alto para ficar acima de tudo */
            display: flex; 
            align-items: center; 
            justify-content: center; 
            pointer-events: none; 
            animation: fadeOverlay 4s forwards;
        }

        .levelup-text { 
            font-family: 'Cinzel', serif;
            font-size: 100px; 
            font-weight: bold;
            color: #ffcc00; 
            text-transform: uppercase;
            letter-spacing: 10px;
            /* Shadow estilo FFT: Borda preta dura + Brilho dourado */
            text-shadow: 
                3px 3px 0 #000,
                -1px -1px 0 #000,  
                1px -1px 0 #000,
                -1px 1px 0 #000,
                1px 1px 0 #000,
                0 0 20px #ffcc00,
                0 0 40px #ffcc00;
            animation: fftFloatUp 4s ease-out forwards;
        }

        @keyframes fftFloatUp {
            0% { opacity: 0; transform: translateY(50px) scale(0.5); }
            10% { opacity: 1; transform: translateY(0) scale(1.2); }
            20% { transform: translateY(0) scale(1); }
            80% { opacity: 1; transform: translateY(-20px); }
            100% { opacity: 0; transform: translateY(-50px); }
        }

        @keyframes fadeOverlay { 0% { opacity: 1; } 80% { opacity: 1; } 100% { opacity: 0; } }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

        /* --- RESPONSIVIDADE --- */
        
        /* TABLET & NOTEBOOK MENOR (max-width: 1024px) */
        @media (max-width: 1024px) {
            .ficha-container { width: 100%; height: 100%; max-height: none; border-radius: 0; border: none; overflow-y: auto; }
            .ficha-header { height: auto; flex-wrap: wrap; padding-bottom: 20px; }
            .header-info h1 { font-size: 24px; }
            .ficha-body { flex-direction: column; overflow-y: visible; padding-bottom: 80px; }
            
            /* Na viso geral, alinha itens ao centro e remove larguras fixas */
            .col-attributes, .col-inventory { width: 100%; border: none; padding: 0; margin-bottom: 20px; }
            .col-attributes { border-bottom: 1px solid #333; padding-bottom: 20px; }
            .col-center-equip { order: -1; margin-bottom: 30px; transform: scale(0.9); }
            
            /* Em Habilidades, empilha colunas */
            .skills-tab-content { flex-direction: column; }
            .skills-col { overflow: visible; }
        }

        /* CELULAR (max-width: 768px) */
        @media (max-width: 768px) {
            /* 1. O CONTAINER PRINCIPAL VIRA UMA JANELA ROLVEL GRANDE */
            .ficha-container { 
                width: 95% !important; 
                height: 90vh !important; /* Ocupa quase toda a tela */
                max-height: none !important; 
                overflow-y: auto !important; /* Scroll aqui, na janela toda */
                margin: 20px auto; /* Centraliza */
                display: block; /* Garante que os elementos desam */
            }

            .ficha-header { justify-content: center; flex-direction: column; gap: 10px; }
            .header-left-group, .header-right-group { gap: 10px; }
            .header-info { width: 100%; order: -1; margin-bottom: 15px; }
            .xp-container { width: 90%; }
            .hidemobile { display: none; } 
            
            .col-center-equip { transform: scale(0.85); margin-top: -30px; margin-bottom: 10px; }
            .radar-wrapper { display: none; }
            
            .stat-row-simple { gap: 5px; }
            .s-box input { font-size: 14px; }
            
            /* 2. LIBERA O TAMANHO DAS LISTAS DE HABILIDADES/PASSIVAS */
            .skills-list, .skills-col, .box-passivas { 
                max-height: none !important; /* Remove o limite de altura */
                height: auto !important;     /* Cresce conforme o texto */
                overflow: visible !important; /* Tira o scroll interno ruim */
                flex-shrink: 0; /* Impede que o flexbox esmague a caixa */
                padding-bottom: 20px;
            }
            
            .save-fab { bottom: 20px; right: 20px; width: 50px; height: 50px; font-size: 24px; }
            
            .levelup-text { font-size: 50px; } /* Ajuste de fonte no mobile */
        }
      `})]})}const R5="/assets/ficha-icon-Ds6_MepT.png",C5=({onClose:i,isMaster:e,disponibilidades:n,sessoes:s,onAddSlot:o,onUpdateSession:u,onDeleteSlot:f})=>{const[m,g]=w.useState(new Date),[b,v]=w.useState(null),[E,T]=w.useState(null),[M,B]=w.useState("20:00"),L=(R,S)=>new Date(R,S+1,0).getDate(),O=(R,S)=>new Date(R,S,1).getDay(),Q=m.getFullYear(),G=m.getMonth(),W=L(Q,G),le=O(Q,G),he=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],pe=()=>g(new Date(Q,G-1,1)),I=()=>g(new Date(Q,G+1,1)),C=[...n.map(R=>({...R,type:"slot",dateObj:new Date(R.start)})),...s.map(R=>({...R,type:"session",dateObj:new Date(R.dataInicio)}))],k=()=>{const R=[];for(let S=0;S<le;S++)R.push(c.jsx("div",{className:"cal-day empty"},`empty-${S}`));for(let S=1;S<=W;S++){`${Q}${String(G+1).padStart(2,"0")}${String(S).padStart(2,"0")}`;const Te=C.filter(ne=>{const F=ne.dateObj;return F.getDate()===S&&F.getMonth()===G&&F.getFullYear()===Q});R.push(c.jsxs("div",{className:`cal-day ${b===S?"selected":""}`,onClick:()=>e&&v(S),children:[c.jsx("span",{className:"cal-day-number",children:S}),c.jsx("div",{className:"cal-events-list",children:Te.map((ne,F)=>c.jsxs("div",{className:`cal-event-pill ${ne.type}`,onClick:re=>{re.stopPropagation(),T(ne)},title:ne.type==="session"?ne.missaoNome:"Disponvel",children:[ne.dateObj.getHours(),":",String(ne.dateObj.getMinutes()).padStart(2,"0")," ",ne.type==="session"?"":""]},F))})]},S))}return R},P=()=>{if(!b)return;const R=new Date(Q,G,b),[S,Te]=M.split(":");R.setHours(S,Te),o(R.toISOString()),v(null)},j=R=>{E&&E.type==="session"&&(u(E.id,R),T(null))};return c.jsxs("div",{className:"ff-modal-overlay-fixed",style:{zIndex:1e4},children:[c.jsxs("div",{className:"ff-modal-calendar ff-card",children:[c.jsxs("div",{className:"cal-header",children:[c.jsx("button",{onClick:pe,children:""}),c.jsxs("h2",{children:[he[G]," ",Q]}),c.jsx("button",{onClick:I,children:""}),c.jsx("button",{className:"btn-close-cal",onClick:i,children:"FECHAR"})]}),c.jsxs("div",{className:"cal-grid-header",children:[c.jsx("div",{children:"DOM"}),c.jsx("div",{children:"SEG"}),c.jsx("div",{children:"TER"}),c.jsx("div",{children:"QUA"}),c.jsx("div",{children:"QUI"}),c.jsx("div",{children:"SEX"}),c.jsx("div",{children:"SB"})]}),c.jsx("div",{className:"cal-grid-body",children:k()}),b&&e&&c.jsx("div",{className:"mini-modal-overlay",children:c.jsxs("div",{className:"mini-modal",children:[c.jsx("h4",{children:"Marcar Disponibilidade"}),c.jsxs("p",{children:["Dia ",b," de ",he[G]]}),c.jsx("label",{children:"Horrio de Incio:"}),c.jsx("input",{type:"time",value:M,onChange:R=>B(R.target.value),className:"ff-input-dark"}),c.jsxs("div",{className:"row-btns",children:[c.jsx("button",{className:"btn-cyan",onClick:P,children:"CRIAR"}),c.jsx("button",{className:"btn-red",onClick:()=>v(null),children:"CANCELAR"})]})]})}),E&&c.jsx("div",{className:"mini-modal-overlay",children:c.jsxs("div",{className:"mini-modal detail",children:[E.type==="session"?c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{color:"#f44"},children:" SESSO AGENDADA"}),c.jsx("h3",{children:E.missaoNome}),c.jsxs("p",{children:[c.jsx("strong",{children:"Horrio Atual:"})," ",new Date(E.dataInicio).toLocaleString()]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Mestre:"})," ",E.mestreNome||"Voc"]}),c.jsxs("div",{className:"detail-players",children:[c.jsx("strong",{children:"Jogadores:"}),E.participantes?.join(", ")||"Nenhum"]}),e&&c.jsxs("div",{className:"edit-time-box",children:[c.jsx("label",{children:"Alterar Horrio:"}),c.jsx("input",{type:"datetime-local",className:"ff-input-dark",onChange:R=>j(R.target.value)}),c.jsx("small",{children:"Selecione para mudar imediatamente."})]})]}):c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{color:"#0f0"},children:" DISPONIBILIDADE"}),c.jsxs("p",{children:[c.jsx("strong",{children:"Data:"})," ",new Date(E.start).toLocaleString()]}),c.jsx("p",{children:"Horrio reservado para futuras sesses."}),e&&c.jsx("button",{className:"btn-red",onClick:()=>{f(E.id),T(null)},children:"REMOVER DISPONIBILIDADE"})]}),c.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"10px",width:"100%"},onClick:()=>T(null),children:"FECHAR"})]})})]}),c.jsx("style",{children:`
        .ff-modal-calendar { width: 90vw; height: 90vh; background: #0f172a; border: 2px solid #fbbf24; display: flex; flex-direction: column; padding: 20px; box-shadow: 0 0 50px #000; }
        .cal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; font-size: 1.5rem; color: #fbbf24; }
        .cal-header button { background: transparent; border: 1px solid #fbbf24; color: #fbbf24; cursor: pointer; padding: 5px 15px; font-weight: bold; }
        .btn-close-cal { background: #f44 !important; border-color: #f44 !important; color: #fff !important; }
        
        .cal-grid-header { display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; color: #94a3b8; font-weight: bold; margin-bottom: 10px; }
        .cal-grid-body { display: grid; grid-template-columns: repeat(7, 1fr); grid-auto-rows: 1fr; gap: 5px; flex: 1; overflow-y: auto; }
        
        .cal-day { background: #1e293b; border: 1px solid #334155; padding: 5px; min-height: 100px; position: relative; cursor: pointer; transition: 0.2s; display: flex; flex-direction: column; }
        .cal-day:hover { background: #334155; }
        .cal-day.empty { background: transparent; border: none; cursor: default; }
        .cal-day.selected { border-color: #00f2ff; background: rgba(0, 242, 255, 0.1); }
        .cal-day-number { font-weight: bold; color: #64748b; font-size: 0.9rem; align-self: flex-end; }
        
        .cal-events-list { display: flex; flex-direction: column; gap: 3px; margin-top: 5px; }
        .cal-event-pill { font-size: 0.75rem; padding: 2px 4px; border-radius: 3px; cursor: pointer; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .cal-event-pill.session { background: #7f1d1d; color: #fca5a5; border: 1px solid #f87171; }
        .cal-event-pill.slot { background: #064e3b; color: #6ee7b7; border: 1px solid #34d399; }

        .mini-modal-overlay { position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; z-index: 20; }
        .mini-modal { background: #020617; border: 1px solid #fbbf24; padding: 20px; width: 300px; border-radius: 8px; box-shadow: 0 0 20px #000; }
        .mini-modal.detail { width: 400px; }
        .mini-modal h4 { color: #fbbf24; margin: 0 0 10px 0; }
        .row-btns { display: flex; gap: 10px; margin-top: 15px; }
        .edit-time-box { margin-top: 15px; border-top: 1px solid #333; padding-top: 10px; }
      `})]})},a_=({expiry:i})=>{const[e,n]=w.useState("");return w.useEffect(()=>{const s=setInterval(()=>{const o=new Date().getTime(),u=new Date(i).getTime()-o;if(u<0)n("EXPIRADA"),clearInterval(s);else{const f=Math.floor(u/864e5),m=Math.floor(u%(1e3*60*60*24)/(1e3*60*60)),g=Math.floor(u%(1e3*60*60)/(1e3*60));n(`${f}d ${m}h ${g}m`)}},1e3);return()=>clearInterval(s)},[i]),c.jsxs("span",{className:"mission-timer",children:[" ",e]})},I5=i=>i?{__html:i.replace(/\*(.*?)\*/g,"<strong>$1</strong>").replace(/_(.*?)_/g,"<em>$1</em>").replace(/\n/g,"<br />")}:{__html:""};function j5(){const i=Ji(),[e,n]=w.useState(null),[s,o]=w.useState([]),[u,f]=w.useState([]),[m,g]=w.useState([]),[b,v]=w.useState([]),[E,T]=w.useState([]),[M,B]=w.useState(!0),[L,O]=w.useState(!1),[Q,G]=w.useState(!1),[W,le]=w.useState(!1),[he,pe]=w.useState(!1),[I,C]=w.useState(!1),[k,P]=w.useState(!1),[j,R]=w.useState(null),[S,Te]=w.useState(null),[ne,F]=w.useState(null),[re,ye]=w.useState(null),[Be,Ue]=w.useState(null),[V,ae]=w.useState(""),[ge,Ee]=w.useState(""),[Se,je]=w.useState([]),[De,gt]=w.useState([]),[Ne,mt]=w.useState({nome:"",local:"",contratante:"",descricaoMissao:"",objetivosMissao:"",requisitos:"",grupo:"",recompensa:"",rank:"E",imagem:"",duracao:"",gilRecompensa:""}),[ct,Xt]=w.useState({missaoId:"",selectedSlotId:"",mapas:[],cenarios:[],monstros:[],npcs:[],jogadores:[]}),[an,Ft]=w.useState(""),[me,Ce]=w.useState("mapas"),[U,fe]=w.useState(()=>localStorage.getItem("mestreAssinatura")||"Narrador");w.useEffect(()=>{localStorage.setItem("mestreAssinatura",U)},[U]),w.useEffect(()=>{const H=setTimeout(()=>{O(!0)},2e3);return()=>clearTimeout(H)},[]),w.useEffect(()=>{Ut&&Ut.pause();const H=lf(Ot,xe=>{if(xe){n(xe);const dt=In(kt(_e,"missoes"),ca("mestreId","==",xe.uid),Uo("createdAt","desc")),Gt=In(kt(_e,"resenhas"),ca("mestreId","==",xe.uid),Uo("createdAt","desc")),ft=In(kt(_e,"sessoes"),ca("mestreId","==",xe.uid),Uo("dataInicio","asc")),J=In(kt(_e,"disponibilidades"),ca("mestreId","==",xe.uid)),Ye=In(kt(_e,"characters")),We=jn(dt,ht=>o(ht.docs.map(He=>({id:He.id,...He.data()})))),sn=jn(Gt,ht=>f(ht.docs.map(He=>({id:He.id,...He.data()})))),$t=jn(ft,ht=>g(ht.docs.map(He=>({id:He.id,...He.data()})))),rn=jn(J,ht=>T(ht.docs.map(He=>({id:He.id,...He.data()})))),bt=jn(Ye,ht=>{v(ht.docs.map(He=>({id:He.id,...He.data()}))),B(!1)});return()=>{We(),sn(),$t(),bt(),rn()}}else B(!1),i("/login")});return()=>H()},[i]),w.useEffect(()=>{if(j){const H=b.find(xe=>xe.id===j.id);H&&R(H)}},[b]);const de=async H=>{if(H.preventDefault(),!!e)try{const xe=(Ne.duracao.match(/(\d+)w/)||[0,0])[1]*6048e5+(Ne.duracao.match(/(\d+)d/)||[0,0])[1]*864e5+(Ne.duracao.match(/(\d+)h/)||[0,0])[1]*36e5;await Nr(kt(_e,"missoes"),{...Ne,mestreNome:U,mestreId:e.uid,createdAt:Qn(),expiraEm:new Date(Date.now()+(xe||36e5)).toISOString()}),G(!1),mt({nome:"",local:"",contratante:"",descricaoMissao:"",objetivosMissao:"",requisitos:"",grupo:"",recompensa:"",rank:"E",imagem:"",duracao:"",gilRecompensa:""})}catch(xe){alert("Erro ao forjar cartaz: "+xe.message)}},be=async()=>{if(!ge||!V||!e)return alert("Preencha ttulo e contedo!");try{const H=new Date;H.setDate(H.getDate()+7),await Nr(kt(_e,"resenhas"),{titulo:ge,conteudo:V,mestre:U,mestreId:e.uid,destinatarios:Se,createdAt:Qn(),expiraEm:H.toISOString()}),le(!1),ae(""),Ee(""),je([])}catch{alert("Erro ao publicar.")}},Ge=async(H,xe)=>{if(window.confirm(`Remover ${xe.nome} da misso?`)){const dt=Pe(_e,"missoes",H);await tt(dt,{candidatos:Zd(xe)})}},Me=()=>{an&&(Xt(H=>({...H,[me]:[...H[me],an]})),Ft(""))},It=(H,xe)=>{Xt(dt=>({...dt,[H]:dt[H].filter((Gt,ft)=>ft!==xe)}))},et=async H=>{if(e)try{await Nr(kt(_e,"disponibilidades"),{mestreId:e.uid,start:H,status:"free"}),alert("Disponibilidade criada!")}catch(xe){alert("Erro ao criar slot: "+xe.message)}},Jt=async H=>{if(window.confirm("Remover esta disponibilidade?"))try{await zi(Pe(_e,"disponibilidades",H))}catch(xe){alert("Erro ao remover: "+xe.message)}},te=async(H,xe)=>{if(xe)try{const dt=new Date(xe),Gt=new Date(dt.getTime()+1440*60*1e3);await tt(Pe(_e,"sessoes",H),{dataInicio:xe,expiraEm:Gt.toISOString()}),alert("Horrio da sesso atualizado!")}catch(dt){alert("Erro ao atualizar horrio: "+dt.message)}},qe=async H=>{if(H.preventDefault(),!ct.missaoId||!ct.selectedSlotId||!e)return alert("Selecione a misso e um horrio disponvel!");try{const xe=E.find(J=>J.id===ct.selectedSlotId);if(!xe)return alert("Horrio invlido ou j ocupado.");const dt=s.find(J=>J.id===ct.missaoId),Gt=new Date(xe.start),ft=new Date(Gt.getTime()+1440*60*1e3);await Nr(kt(_e,"sessoes"),{missaoId:ct.missaoId,missaoNome:dt?dt.nome:"Misso Desconhecida",mestreId:e.uid,dataInicio:xe.start,expiraEm:ft.toISOString(),participantes:De,mapas:ct.mapas,cenarios:ct.cenarios,monstros:ct.monstros,npcs:ct.npcs,jogadores:ct.jogadores,connected_players:[],dm_online:!1,createdAt:Qn()}),await zi(Pe(_e,"disponibilidades",ct.selectedSlotId)),pe(!1),Xt({missaoId:"",selectedSlotId:"",maps:[],cenarios:[],monstros:[],npcs:[],jogadores:[]}),gt([]),alert("Sesso agendada com sucesso!")}catch(xe){alert("Erro ao criar sesso: "+xe.message)}},$e=H=>{i("/mestre-vtt")};return M||!L?c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",background:"radial-gradient(circle at center, #001a33 0%, #000000 100%)",color:"#ffcc00",fontFamily:"Cinzel, serif",zIndex:9999,position:"fixed",top:0,left:0},children:[c.jsx("img",{src:jf,alt:"Carregando...",style:{width:"120px",marginBottom:"20px"}}),c.jsx("p",{style:{fontSize:"18px",letterSpacing:"4px",textTransform:"uppercase",animation:"pulseText 2s infinite ease-in-out"},children:"Sintonizando ter..."}),c.jsx("style",{children:`
          @keyframes pulseText { 
            0% { opacity: 0.4; transform: scale(0.98); } 
            50% { opacity: 1; transform: scale(1.02); } 
            100% { opacity: 0.4; transform: scale(0.98); } 
          }
        `})]}):c.jsxs("div",{className:"mestre-container",children:[c.jsx("div",{className:"mestre-bg-image-full",style:{backgroundImage:`url(${aA})`}}),c.jsxs("div",{className:"mestre-content",children:[c.jsxs("div",{className:"top-bar-flex",children:[c.jsx("h1",{className:"ff-title",children:"HUB DO NARRADOR"}),c.jsxs("div",{className:"mestre-identity-box ff-card fade-in",children:[c.jsx("label",{children:"ASSINATURA DO MESTRE:"}),c.jsx("input",{type:"text",value:U,onChange:H=>fe(H.target.value)})]})]}),c.jsxs("div",{className:"mestre-grid",children:[c.jsxs("div",{className:"ff-card board-column",children:[c.jsxs("div",{className:"card-header no-border",children:[c.jsx("h3",{children:"QUADRO DE MISSES"}),c.jsxs("button",{className:"ff-add-btn",onClick:()=>G(!0),children:[c.jsx("span",{children:"+"})," ADICIONAR CARTAZ"]})]}),c.jsx("div",{className:"mission-scroll",children:s.map(H=>{const xe=parseInt(H.grupo)||0,dt=H.candidatos?H.candidatos.length:0,Gt=xe>0?dt/xe*100:0,ft=dt>=xe&&xe>0;return c.jsxs("div",{className:`mission-poster rank-${H.rank}`,children:[c.jsx("div",{className:"poster-rank-label-fixed",children:H.rank}),c.jsxs("span",{className:"mestre-tag",children:["Narrador: ",H.mestreNome]}),c.jsx("h4",{children:H.nome}),c.jsxs("p",{className:"gil-recompensa",children:[" Recompensa: ",H.gilRecompensa," Gil"]}),c.jsxs("div",{className:"vagas-container",children:[c.jsxs("div",{className:"vagas-labels",children:[c.jsx("span",{children:"JOGADORES:"}),c.jsxs("span",{style:{color:ft?"#f44":"#0f0"},children:[dt," / ",xe]})]}),c.jsx("div",{className:"vagas-track",children:c.jsx("div",{className:"vagas-fill",style:{width:`${Gt}%`,background:ft?"#f44":"#00f2ff"}})})]}),H.candidatos&&H.candidatos.length>0&&c.jsxs("div",{className:"candidates-mini-box",children:[c.jsx("strong",{children:"Candidatos:"}),H.candidatos.map(J=>c.jsxs("div",{className:"cand-row-master",children:[c.jsxs("span",{style:{color:J.isLeader?"#ffcc00":"#ccc"},children:[J.isLeader&&""," ",J.nome," (",J.classe,")"]}),c.jsx("button",{className:"btn-kick-x",title:"Remover Jogador",onClick:()=>Ge(H.id,J),children:""})]},J.uid))]}),c.jsx(a_,{expiry:H.expiraEm}),c.jsxs("div",{className:"poster-actions",children:[c.jsx("button",{className:"btn-cyan",onClick:()=>ye(H.imagem),children:"CARTAZ"}),c.jsx("button",{className:"btn-cyan",onClick:()=>Te(H),children:"DETALHES"}),c.jsx("button",{className:"btn-red",onClick:()=>zi(Pe(_e,"missoes",H.id)),children:"EXCLUIR"})]})]},H.id)})})]}),c.jsxs("div",{className:"ff-card sanchez-card board-column",children:[c.jsxs("div",{className:"sanchez-header-top no-border",children:[c.jsx("h3",{children:"RESENHA DO SANCHES"}),c.jsx("button",{className:"ff-add-btn-gold-small",onClick:()=>le(!0),children:"+ CRIAR NOVA RESENHA"})]}),c.jsx("div",{className:"mission-scroll",children:u.map(H=>c.jsxs("div",{className:"resenha-item-card",children:[c.jsx("h4",{children:H.titulo}),c.jsx(a_,{expiry:H.expiraEm}),c.jsxs("div",{className:"poster-actions",children:[c.jsx("button",{className:"btn-cyan",onClick:()=>F(H),children:"VISUALIZAR"}),c.jsx("button",{className:"btn-red",onClick:()=>zi(Pe(_e,"resenhas",H.id)),children:"EXCLUIR"})]})]},H.id))})]}),c.jsxs("div",{className:"ff-card board-column",children:[c.jsxs("div",{className:"card-header no-border",style:{display:"flex",gap:"5px"},children:[c.jsx("h3",{children:"SESSES DE JOGO"}),c.jsxs("div",{style:{display:"flex",gap:"5px"},children:[c.jsx("button",{className:"ff-add-btn small-btn",onClick:()=>C(!0),children:" AGENDA"}),c.jsx("button",{className:"ff-add-btn small-btn",onClick:()=>pe(!0),children:"+ SESSO"})]})]}),c.jsx("div",{className:"mission-scroll",children:m.length===0?c.jsx("div",{className:"empty-instancia",children:"NENHUMA INSTNCIA ATIVA"}):m.map(H=>c.jsxs("div",{className:"sessao-card",children:[c.jsx("div",{className:"sessao-status",children:" AO VIVO / AGENDADA"}),c.jsx("h4",{className:"sessao-title",children:H.missaoNome}),c.jsxs("div",{className:"sessao-info",children:[c.jsxs("span",{children:[" ",new Date(H.dataInicio).toLocaleString()]}),c.jsxs("span",{className:"sessao-players",children:[" ",H.participantes?.length||0," Jogadores"]})]}),c.jsxs("div",{className:"sessao-assets-count",children:[" ",(H.mapas?.length||0)+(H.cenarios?.length||0)," Imagens"]}),c.jsxs("div",{className:"poster-actions",style:{marginTop:"15px"},children:[c.jsx("button",{className:"btn-cyan",onClick:()=>Ue(H),children:" MEMBROS"}),c.jsx("button",{className:"btn-play-vtt",onClick:()=>$e(),children:" ACESSAR VTT"}),c.jsx("button",{className:"btn-red",onClick:()=>zi(Pe(_e,"sessoes",H.id)),children:"CANCELAR"})]})]},H.id))})]})]})]}),c.jsx("button",{className:"fichas-trigger-btn",onClick:()=>P(!0),title:"Acessar Fichas",children:c.jsx("img",{src:R5,alt:"Fichas"})}),c.jsx(zg,{isMestre:!0}),c.jsx(iA,{}),I&&c.jsx(C5,{onClose:()=>C(!1),isMaster:!0,disponibilidades:E,sessoes:m,onAddSlot:et,onUpdateSession:te,onDeleteSlot:Jt}),k&&c.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>P(!1),children:c.jsxs("div",{className:"ff-modal-scrollable ff-card fichas-modal-container",onClick:H=>H.stopPropagation(),children:[c.jsx("h3",{className:"modal-title-ff",children:"PERSONAGENS REGISTRADOS"}),c.jsx("div",{className:"fichas-grid-large",children:b.map(H=>c.jsxs("div",{className:"ficha-list-item",children:[c.jsxs("div",{className:"ficha-row-name",children:[c.jsx("strong",{children:H.name}),c.jsxs("small",{children:[H.race," // ",H.class]})]}),c.jsx("button",{className:"btn-cyan",onClick:()=>{R(H),P(!1)},children:"ABRIR FICHA "})]},H.id))}),c.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"20px"},onClick:()=>P(!1),children:"FECHAR"})]})}),j&&c.jsx(Lg,{characterData:j,isMaster:!0,onClose:()=>R(null)}),Q&&c.jsx("div",{className:"ff-modal-overlay-fixed",children:c.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[c.jsx("h3",{className:"modal-title-ff",children:"NOVA MISSO"}),c.jsxs("form",{onSubmit:de,children:[c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"NOME DA MISSO"}),c.jsx("input",{placeholder:"Ttulo...",value:Ne.nome,onChange:H=>mt({...Ne,nome:H.target.value}),required:!0})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"LOCAL"}),c.jsx("input",{placeholder:"Onde ocorre...",value:Ne.local,onChange:H=>mt({...Ne,local:H.target.value})})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"CONTRATANTE"}),c.jsx("input",{placeholder:"Quem paga...",value:Ne.contratante,onChange:H=>mt({...Ne,contratante:H.target.value})})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"DESCRIO DA MISSO"}),c.jsx("textarea",{className:"tall-area-dark",placeholder:"Detalhes da histria e contexto...",value:Ne.descricaoMissao,onChange:H=>mt({...Ne,descricaoMissao:H.target.value})})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"OBJETIVOS DA MISSO"}),c.jsx("textarea",{className:"tall-area-dark",placeholder:"O que deve ser feito passo a passo...",value:Ne.objetivosMissao,onChange:H=>mt({...Ne,objetivosMissao:H.target.value})})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"REQUISITOS DA MISSO"}),c.jsx("textarea",{className:"tall-area-dark",placeholder:"O que  necessrio para aceitar...",value:Ne.requisitos,onChange:H=>mt({...Ne,requisitos:H.target.value})})]}),c.jsxs("div",{className:"row-double-ff",children:[c.jsxs("div",{className:"field-group",children:[c.jsx("label",{children:"GRUPO MXIMO"}),c.jsx("input",{placeholder:"Ex: 4",value:Ne.grupo,onChange:H=>mt({...Ne,grupo:H.target.value})})]}),c.jsxs("div",{className:"field-group",children:[c.jsx("label",{children:"RANK"}),c.jsx("select",{value:Ne.rank,onChange:H=>mt({...Ne,rank:H.target.value}),children:["E","D","C","B","A","S","SS","SC"].map(H=>c.jsxs("option",{value:H,children:["RANK ",H]},H))})]})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"RECOMPENSAS EXTRAS"}),c.jsx("textarea",{className:"tall-area-dark",placeholder:"Itens, especiarias...",value:Ne.recompensa,onChange:H=>mt({...Ne,recompensa:H.target.value})})]}),c.jsxs("div",{className:"row-double-ff",children:[c.jsxs("div",{className:"field-group",children:[c.jsx("label",{children:"GIL"}),c.jsx("input",{type:"text",className:"gil-input",placeholder:"Ex: 5000",value:Ne.gilRecompensa,onChange:H=>mt({...Ne,gilRecompensa:H.target.value.replace(/\D/g,"")})})]}),c.jsxs("div",{className:"field-group",children:[c.jsx("label",{children:"DURAO"}),c.jsx("input",{placeholder:"Ex: 1d 10h",value:Ne.duracao,onChange:H=>mt({...Ne,duracao:H.target.value}),required:!0})]})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"IMAGEM"}),c.jsx("input",{placeholder:"Link Imgur...",value:Ne.imagem,onChange:H=>mt({...Ne,imagem:H.target.value})})]}),c.jsxs("div",{className:"btn-group-ff",children:[c.jsx("button",{type:"submit",className:"btn-forjar-main",children:"FORJAR MISSO"}),c.jsx("button",{type:"button",className:"btn-cancelar-main",onClick:()=>G(!1),children:"FECHAR"})]})]})]})}),W&&c.jsx("div",{className:"ff-modal-overlay-fixed",children:c.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[c.jsx("h3",{className:"modal-title-ff",children:"ESCREVER CRNICA"}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"TTULO"}),c.jsx("input",{className:"ff-modal-input-dark",value:ge,onChange:H=>Ee(H.target.value)})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"CORPO"}),c.jsx("textarea",{className:"tall-area-ff-dark",value:V,onChange:H=>ae(H.target.value)})]}),c.jsxs("div",{className:"player-selector-box-fixed",children:[c.jsx("label",{children:"DESTINATRIOS:"}),c.jsx("div",{className:"destinatarios-grid-fixed",children:b.map(H=>c.jsxs("label",{className:"chip-label-ff",children:[c.jsx("input",{type:"checkbox",checked:Se.includes(H.name),onChange:()=>Se.includes(H.name)?je(Se.filter(xe=>xe!==H.name)):je([...Se,H.name])})," ",H.name]},H.id))})]}),c.jsxs("div",{className:"btn-group-ff",children:[c.jsx("button",{className:"btn-forjar-main",onClick:be,children:"PUBLICAR"}),c.jsx("button",{className:"btn-cancelar-main",onClick:()=>le(!1),children:"FECHAR"})]})]})}),he&&c.jsx("div",{className:"ff-modal-overlay-fixed",children:c.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[c.jsx("h3",{className:"modal-title-ff",children:"CRIAR NOVA SESSO"}),c.jsxs("form",{onSubmit:qe,children:[c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"SELECIONAR MISSO"}),c.jsxs("select",{className:"ff-select-dark",value:ct.missaoId,onChange:H=>Xt({...ct,missaoId:H.target.value}),required:!0,children:[c.jsx("option",{value:"",children:"-- Escolha --"}),s.map(H=>c.jsxs("option",{value:H.id,children:[H.nome," (Rank ",H.rank,")"]},H.id))]})]}),c.jsxs("div",{className:"modal-input-group",children:[c.jsx("label",{children:"HORRIO DISPONVEL (DA AGENDA)"}),c.jsxs("select",{className:"ff-select-dark",value:ct.selectedSlotId,onChange:H=>Xt({...ct,selectedSlotId:H.target.value}),required:!0,children:[c.jsx("option",{value:"",children:"-- Selecione um Horrio --"}),E.filter(H=>new Date(H.start)>new Date).sort((H,xe)=>new Date(H.start)-new Date(xe.start)).map(H=>c.jsx("option",{value:H.id,children:new Date(H.start).toLocaleString()},H.id))]}),c.jsx("small",{style:{color:"#666",fontStyle:"italic"},children:"*Crie horrios no boto AGENDA se a lista estiver vazia."})]}),c.jsxs("div",{className:"player-selector-box-fixed",children:[c.jsx("label",{children:"JOGADORES:"}),c.jsx("div",{className:"destinatarios-grid-fixed",children:b.map(H=>c.jsxs("label",{className:"chip-label-ff",children:[c.jsx("input",{type:"checkbox",checked:De.includes(H.name),onChange:()=>De.includes(H.name)?gt(De.filter(xe=>xe!==H.name)):gt([...De,H.name])})," ",H.name," (",H.class,")"]},H.id))})]}),c.jsxs("div",{className:"upload-section-box",children:[c.jsx("h4",{className:"upload-section-title",children:"IMPORTAR IMAGENS"}),c.jsxs("div",{className:"link-import-row",children:[c.jsx("input",{className:"ff-input-dark",placeholder:"Link da imagem...",value:an,onChange:H=>Ft(H.target.value)}),c.jsxs("select",{className:"ff-select-dark small-select",value:me,onChange:H=>Ce(H.target.value),children:[c.jsx("option",{value:"mapas",children:"Tabletop"}),c.jsx("option",{value:"cenarios",children:"Cenrio"}),c.jsx("option",{value:"npcs",children:"NPCs"})]}),c.jsx("button",{type:"button",className:"btn-cyan",onClick:Me,children:"+"})]}),c.jsxs("div",{className:"assets-lists",children:[ct.mapas.map((H,xe)=>c.jsxs("div",{className:"asset-item",children:[c.jsxs("span",{className:"truncate-link",children:["[TABLETOP] ",H]}),c.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>It("mapas",xe),children:""})]},`map-${xe}`)),ct.cenarios.map((H,xe)=>c.jsxs("div",{className:"asset-item",children:[c.jsxs("span",{className:"truncate-link",children:["[CENRIO] ",H]}),c.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>It("cenarios",xe),children:""})]},`cen-${xe}`)),ct.npcs.map((H,xe)=>c.jsxs("div",{className:"asset-item",children:[c.jsxs("span",{className:"truncate-link",children:["[NPC] ",H]}),c.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>It("npcs",xe),children:""})]},`npc-${xe}`))]})]}),c.jsxs("div",{className:"btn-group-ff",children:[c.jsx("button",{type:"submit",className:"btn-forjar-main",children:"AGENDAR"}),c.jsx("button",{type:"button",className:"btn-cancelar-main",onClick:()=>pe(!1),children:"CANCELAR"})]})]})]})}),Be&&c.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>Ue(null),children:c.jsxs("div",{className:"ff-modal-scrollable ff-card",onClick:H=>H.stopPropagation(),style:{height:"auto",maxHeight:"500px"},children:[c.jsx("h3",{className:"modal-title-ff",children:"MEMBROS ALOCADOS"}),c.jsx("div",{className:"destinatarios-grid-fixed",children:Be.participantes?.map((H,xe)=>c.jsxs("div",{className:"chip-label-ff",style:{cursor:"default",color:"#fff",borderColor:"#00f2ff"},children:[" ",H]},xe))}),c.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"20px",width:"100%"},onClick:()=>Ue(null),children:"FECHAR"})]})}),S&&c.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>Te(null),children:c.jsxs("div",{className:"ff-modal ff-card detail-view-main",onClick:H=>H.stopPropagation(),children:[c.jsxs("div",{className:"detail-header-modern",children:[c.jsx("div",{className:`detail-rank-badge rank-${S.rank}`,children:S.rank}),c.jsxs("div",{className:"detail-title-col",children:[c.jsx("h2",{children:S.nome}),c.jsxs("span",{className:"detail-narrator",children:["Narrador: ",S.mestreNome]})]})]}),c.jsxs("div",{className:"detail-body-grid",children:[c.jsxs("div",{className:"detail-info-row",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:" LOCAL"}),c.jsx("span",{children:S.local||"Desconhecido"})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("label",{children:" CONTRATANTE"}),c.jsx("span",{children:S.contratante||"Annimo"})]})]}),c.jsxs("div",{className:"detail-section",children:[c.jsx("label",{className:"section-label",children:"VAGAS"}),c.jsxs("div",{style:{background:"#111",padding:"10px",borderRadius:"4px"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",color:"#aaa",marginBottom:"5px"},children:[c.jsx("span",{children:"STATUS DO GRUPO"}),c.jsxs("span",{children:[S.candidatos?S.candidatos.length:0," / ",S.grupo||"?"]})]}),c.jsx("div",{style:{width:"100%",height:"6px",background:"#333",borderRadius:"3px"},children:c.jsx("div",{style:{width:`${Math.min((S.candidatos?.length||0)/(parseInt(S.grupo)||1)*100,100)}%`,height:"100%",background:S.candidatos?.length>=parseInt(S.grupo)?"#f44":"#00f2ff"}})})]})]}),c.jsxs("div",{className:"detail-section",children:[c.jsx("label",{className:"section-label",children:" DESCRIO"}),c.jsx("p",{className:"section-text",children:S.descricaoMissao})]}),c.jsxs("div",{className:"detail-section",children:[c.jsx("label",{className:"section-label",children:" OBJETIVOS"}),c.jsx("p",{className:"section-text",children:S.objetivosMissao})]}),c.jsxs("div",{className:"detail-section",children:[c.jsx("label",{className:"section-label",children:" REQUISITOS"}),c.jsx("p",{className:"section-text",children:S.requisitos})]}),c.jsxs("div",{className:"detail-section reward-section",children:[c.jsx("label",{className:"section-label",children:" RECOMPENSAS"}),c.jsxs("div",{className:"reward-content-box",children:[c.jsxs("div",{className:"gil-display-row",children:[c.jsx("span",{className:"gil-icon",children:""})," ",c.jsxs("span",{className:"gil-value",children:[S.gilRecompensa||0," GIL"]})]}),S.recompensa&&c.jsx("div",{className:"extra-rewards-list",children:S.recompensa.split(`
`).map((H,xe)=>c.jsxs("div",{className:"reward-item",children:[" ",H]},xe))})]})]})]}),c.jsx("button",{className:"ff-final-close-btn",onClick:()=>Te(null),children:"FECHAR RELATRIO"})]})}),re&&c.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>ye(null),children:c.jsxs("div",{className:"lightbox-wrap",children:[c.jsx("button",{className:"close-lightbox",onClick:()=>ye(null),children:""}),c.jsx("img",{src:re,alt:"Cartaz",className:"cartaz-full-view"})]})}),ne&&c.jsx("div",{className:"fft-modal-overlay",onClick:()=>F(null),children:c.jsxs("div",{className:"fft-dialog-box",onClick:H=>H.stopPropagation(),children:[c.jsxs("div",{className:"fft-portrait-section",children:[c.jsx("div",{className:"fft-portrait-frame",children:c.jsx("img",{src:Tm,alt:"Sanchez"})}),c.jsx("div",{className:"fft-name-plate",children:"SANCHEZ"})]}),c.jsxs("div",{className:"fft-content-section",children:[c.jsx("h2",{className:"fft-title",children:ne.titulo}),c.jsx("div",{className:"fft-scroll-text",dangerouslySetInnerHTML:I5(ne.conteudo)})]}),c.jsx("button",{className:"fft-close-btn",onClick:()=>F(null),children:"X"})]})}),c.jsx("style",{children:`
        /* --- ESTILOS PRINCIPAIS MESTRE --- */
        .mestre-container { width: 100vw; height: 100vh; overflow: hidden; position: relative; background: #020617; font-family: 'Cinzel', serif; color: #e2e8f0; }
        .mestre-bg-image-full { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.3; z-index: 0; animation: slowPan 60s infinite alternate; }
        @keyframes slowPan { from { transform: scale(1.0); } to { transform: scale(1.1); } }
        
        .mestre-content { position: relative; z-index: 10; height: 100%; display: flex; flex-direction: column; padding: 20px; box-sizing: border-box; }
        .top-bar-flex { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .ff-title { font-size: 2rem; color: #fbbf24; text-shadow: 0 0 10px rgba(251, 191, 36, 0.5); letter-spacing: 4px; margin: 0; }
        .mestre-identity-box { padding: 10px 20px; display: flex; align-items: center; gap: 10px; background: rgba(0,0,0,0.6); border: 1px solid #fbbf24; border-radius: 4px; }
        .mestre-identity-box label { font-size: 0.8rem; color: #fbbf24; font-weight: bold; }
        .mestre-identity-box input { background: transparent; border: none; border-bottom: 1px solid #555; color: #fff; font-family: 'Cinzel', serif; text-align: center; width: 150px; }
        
        .mestre-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; flex: 1; min-height: 0; }
        .board-column { display: flex; flex-direction: column; height: 100%; background: rgba(15, 23, 42, 0.85); border: 1px solid #334155; border-radius: 8px; overflow: hidden; backdrop-filter: blur(5px); box-shadow: 0 4px 6px rgba(0,0,0,0.3); }
        .card-header { padding: 15px; border-bottom: 1px solid #334155; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.3); }
        .card-header h3 { margin: 0; color: #e2e8f0; font-size: 1rem; letter-spacing: 2px; }
        .no-border { border-bottom: none !important; }
        
        .mission-scroll { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 15px; scrollbar-width: thin; scrollbar-color: #fbbf24 #0f172a; }
        .mission-scroll::-webkit-scrollbar { width: 6px; }
        .mission-scroll::-webkit-scrollbar-thumb { background: #fbbf24; border-radius: 3px; }
        
        /* CARD MISSO */
        .mission-poster { background: #1e293b; border: 1px solid #334155; padding: 15px; border-radius: 4px; position: relative; transition: transform 0.2s; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .mission-poster:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.3); border-color: #fbbf24; }
        .mission-poster h4 { margin: 25px 0 5px 0; color: #fbbf24; font-size: 1.1rem; text-transform: uppercase; }
        .poster-rank-label-fixed { position: absolute; top: 10px; right: 10px; font-weight: 900; font-size: 1.5rem; opacity: 0.3; color: #fff; }
        .mestre-tag { font-size: 0.7rem; color: #94a3b8; display: block; margin-bottom: 5px; }
        .gil-recompensa { font-size: 0.9rem; color: #fcd34d; font-weight: bold; margin-bottom: 10px; }
        
        .vagas-container { background: #0f172a; padding: 8px; border-radius: 4px; margin-bottom: 10px; border: 1px solid #334155; }
        .vagas-labels { display: flex; justify-content: space-between; font-size: 0.7rem; color: #cbd5e1; margin-bottom: 4px; }
        .vagas-track { height: 6px; background: #334155; border-radius: 3px; overflow: hidden; }
        .vagas-fill { height: 100%; transition: width 0.3s ease; }
        
        .candidates-mini-box { background: rgba(0,0,0,0.3); padding: 8px; border-radius: 4px; margin-bottom: 10px; font-size: 0.75rem; }
        .cand-row-master { display: flex; justify-content: space-between; align-items: center; margin-top: 4px; padding-bottom: 2px; border-bottom: 1px dashed #334155; }
        .btn-kick-x { background: transparent; border: none; color: #ef4444; cursor: pointer; font-weight: bold; font-size: 14px; }
        .btn-kick-x:hover { color: #f87171; }
        
        .mission-timer { display: block; text-align: center; font-size: 0.8rem; color: #94a3b8; margin: 10px 0; font-weight: bold; }
        
        .poster-actions { display: flex; gap: 5px; justify-content: space-between; }
        .btn-cyan { flex: 1; padding: 6px; font-size: 0.7rem; background: transparent; border: 1px solid #00f2ff; color: #00f2ff; cursor: pointer; transition: 0.2s; font-weight: bold; }
        .btn-cyan:hover { background: rgba(0, 242, 255, 0.1); }
        .btn-red { flex: 1; padding: 6px; font-size: 0.7rem; background: transparent; border: 1px solid #ef4444; color: #ef4444; cursor: pointer; transition: 0.2s; font-weight: bold; }
        .btn-red:hover { background: rgba(239, 68, 68, 0.1); }
        
        /* SANCHES */
        .sanchez-card { border-color: #00f2ff; }
        .sanchez-header-top { padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #00f2ff; background: rgba(0, 242, 255, 0.05); }
        .sanchez-header-top h3 { color: #00f2ff; text-shadow: 0 0 5px rgba(0, 242, 255, 0.5); }
        .resenha-item-card { background: #0f172a; border: 1px solid #334155; padding: 15px; border-radius: 4px; border-left: 3px solid #00f2ff; }
        .resenha-item-card h4 { margin: 0 0 10px 0; color: #e2e8f0; font-size: 1rem; }
        
        /* SESSES */
        .sessao-card { background: #1e293b; border: 1px solid #fbbf24; padding: 15px; border-radius: 4px; position: relative; }
        .sessao-status { position: absolute; top: -10px; left: 10px; background: #fbbf24; color: #000; font-size: 0.6rem; font-weight: bold; padding: 2px 6px; border-radius: 2px; }
        .sessao-title { margin: 10px 0 5px 0; color: #fff; font-size: 1.1rem; }
        .sessao-info { font-size: 0.8rem; color: #94a3b8; display: flex; flex-direction: column; gap: 2px; }
        .sessao-assets-count { font-size: 0.75rem; color: #cbd5e1; margin-top: 5px; font-style: italic; }
        .btn-play-vtt { background: #fbbf24; color: #000; border: none; padding: 8px; font-weight: bold; cursor: pointer; flex: 2; transition: 0.2s; }
        .btn-play-vtt:hover { background: #f59e0b; box-shadow: 0 0 10px rgba(251, 191, 36, 0.4); }
        .empty-instancia { text-align: center; color: #475569; padding: 20px; font-style: italic; border: 2px dashed #334155; border-radius: 8px; }

        /* MODAIS GERAIS */
        .ff-modal-overlay-fixed { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 9999; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .ff-modal-scrollable { background: #0f172a; border: 1px solid #fbbf24; width: 600px; max-width: 95vw; max-height: 90vh; overflow-y: auto; padding: 25px; border-radius: 8px; box-shadow: 0 0 30px rgba(0,0,0,0.8); }
        
        /* NOVO: CLASSE ESPECFICA PARA MODAL DE FICHAS MAIOR */
        .fichas-modal-container { width: 900px; max-width: 95vw; }
        .fichas-grid-large { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; max-height: 60vh; overflow-y: auto; background: #020617; padding: 15px; border: 1px solid #334155; border-radius: 4px; }

        .modal-title-ff { color: #fbbf24; text-align: center; border-bottom: 1px solid #334155; padding-bottom: 15px; margin-bottom: 20px; letter-spacing: 2px; font-size: 1.5rem; }
        .modal-input-group { margin-bottom: 15px; }
        .modal-input-group label { display: block; color: #94a3b8; font-size: 0.8rem; margin-bottom: 5px; font-weight: bold; }
        .modal-input-group input, .modal-input-group textarea, .modal-input-group select { width: 100%; background: #1e293b; border: 1px solid #334155; color: #fff; padding: 10px; font-family: 'Lato', sans-serif; border-radius: 4px; outline: none; }
        .modal-input-group input:focus, .modal-input-group textarea:focus { border-color: #fbbf24; }
        .tall-area-dark { min-height: 100px; resize: vertical; }
        .row-double-ff { display: flex; gap: 15px; margin-bottom: 15px; }
        .field-group { flex: 1; }
        .field-group input, .field-group select { width: 100%; padding: 10px; background: #1e293b; border: 1px solid #334155; color: #fff; border-radius: 4px; }
        
        .btn-group-ff { display: flex; gap: 10px; margin-top: 20px; }
        .btn-forjar-main { flex: 1; background: #fbbf24; color: #000; border: none; padding: 12px; font-weight: bold; cursor: pointer; transition: 0.2s; font-family: 'Cinzel', serif; letter-spacing: 1px; }
        .btn-forjar-main:hover { background: #f59e0b; }
        .btn-cancelar-main { flex: 1; background: transparent; color: #94a3b8; border: 1px solid #334155; padding: 12px; font-weight: bold; cursor: pointer; transition: 0.2s; font-family: 'Cinzel', serif; }
        .btn-cancelar-main:hover { border-color: #fff; color: #fff; }

        .ff-add-btn { background: transparent; border: 1px dashed #fbbf24; color: #fbbf24; padding: 5px 15px; cursor: pointer; font-size: 0.8rem; font-weight: bold; transition: 0.2s; }
        .ff-add-btn:hover { background: rgba(251, 191, 36, 0.1); }
        .ff-add-btn-gold-small { background: transparent; border: 1px dashed #00f2ff; color: #00f2ff; padding: 5px 10px; cursor: pointer; font-size: 0.7rem; font-weight: bold; }
        .ff-add-btn-gold-small:hover { background: rgba(0, 242, 255, 0.1); }

        /* UPLOAD SECTION (SESSO) */
        .upload-section-box { border: 1px solid #334155; padding: 15px; border-radius: 4px; margin-top: 20px; background: rgba(0,0,0,0.2); }
        .upload-section-title { font-size: 0.9rem; color: #fbbf24; margin-bottom: 10px; text-transform: uppercase; border-bottom: 1px solid #334155; padding-bottom: 5px; }
        .link-import-row { display: flex; gap: 10px; margin-bottom: 10px; }
        .ff-input-dark { flex: 1; background: #1e293b; border: 1px solid #334155; color: #fff; padding: 8px; border-radius: 4px; outline: none; }
        .ff-select-dark { background: #1e293b; border: 1px solid #334155; color: #fff; padding: 8px; border-radius: 4px; outline: none; }
        .small-select { width: 120px; }
        .assets-lists { display: flex; flex-direction: column; gap: 5px; max-height: 150px; overflow-y: auto; }
        .asset-item { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); padding: 5px 10px; border-radius: 4px; font-size: 0.8rem; color: #ccc; }
        .truncate-link { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 90%; }
        .btn-remove-x { background: transparent; border: none; color: #f44; cursor: pointer; font-weight: bold; }

        /* SELEO DE JOGADORES */
        .player-selector-box-fixed { margin: 15px 0; }
        .destinatarios-grid-fixed { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; max-height: 150px; overflow-y: auto; background: #020617; padding: 10px; border: 1px solid #334155; border-radius: 4px; }
        .chip-label-ff { display: flex; align-items: center; gap: 8px; font-size: 0.8rem; color: #94a3b8; cursor: pointer; padding: 5px; border: 1px solid transparent; border-radius: 4px; transition: 0.2s; }
        .chip-label-ff:hover { background: rgba(255,255,255,0.05); }
        .chip-label-ff input { width: auto; margin: 0; }

        /* --- FINAL FANTASY TACTICS MODAL STYLE --- */
        .fft-modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 10000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        
        .fft-dialog-box {
          position: relative;
          width: 800px;
          max-width: 95vw;
          height: 450px;
          background: linear-gradient(180deg, #001a4d 0%, #000022 100%);
          border: 4px solid #b8860b;
          border-radius: 8px;
          box-shadow: 0 0 30px rgba(0,0,0,0.8), inset 0 0 50px rgba(0,0,0,0.5);
          display: flex;
          align-items: flex-start;
          padding: 30px;
          gap: 20px;
          color: #fff;
          font-family: 'Cinzel', serif;
        }

        .fft-portrait-section {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 10px;
          width: 150px;
          flex-shrink: 0;
        }

        .fft-portrait-frame {
          width: 140px;
          height: 180px;
          border: 3px solid #b8860b;
          background: #000;
          overflow: hidden;
          box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        .fft-portrait-frame img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .fft-name-plate {
          width: 100%;
          background: linear-gradient(90deg, #b8860b, #8a6e14);
          color: #000;
          text-align: center;
          font-weight: bold;
          padding: 5px 0;
          font-size: 0.9rem;
          border: 1px solid #ffd700;
          box-shadow: 0 2px 5px rgba(0,0,0,0.5);
          letter-spacing: 1px;
        }

        .fft-content-section {
          flex: 1;
          height: 100%;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        }

        .fft-title {
          margin: 0 0 15px 0;
          font-size: 1.8rem;
          color: #00f2ff;
          text-shadow: 0 0 5px rgba(0, 242, 255, 0.5);
          border-bottom: 1px solid #b8860b;
          padding-bottom: 10px;
          letter-spacing: 1px;
        }

        .fft-scroll-text {
          flex: 1;
          overflow-y: auto;
          font-family: 'Lato', sans-serif;
          font-size: 1.1rem;
          line-height: 1.6;
          color: #e0e0e0;
          padding-right: 10px;
          /* Barra invisvel mas funcional */
          scrollbar-width: none; /* Firefox */
          -ms-overflow-style: none;  /* IE 10+ */
        }
        .fft-scroll-text::-webkit-scrollbar { 
          display: none; /* Chrome/Safari */
        }

        .fft-close-btn {
          position: absolute;
          top: -15px;
          right: -15px;
          width: 40px;
          height: 40px;
          background: #b8860b;
          color: #000;
          font-weight: bold;
          border: 2px solid #fff;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          font-family: sans-serif;
          box-shadow: 0 0 10px #000;
          transition: 0.2s;
        }
        .fft-close-btn:hover {
          background: #ffd700;
          transform: scale(1.1);
        }

        /* DETALHES MISSO (MODERN DARK) */
        .detail-view-main { width: 800px; height: 600px; display: flex; flex-direction: column; overflow: hidden; background: #0f172a; border: 2px solid #fbbf24; border-radius: 8px; }
        .detail-header-modern { background: linear-gradient(90deg, #1e293b, #0f172a); padding: 20px; border-bottom: 1px solid #334155; display: flex; gap: 20px; align-items: center; }
        .detail-rank-badge { font-size: 3rem; font-weight: 900; color: rgba(255,255,255,0.1); text-shadow: 0 0 20px rgba(251, 191, 36, 0.5); }
        .detail-rank-badge.rank-S, .detail-rank-badge.rank-SS { color: #fbbf24; opacity: 1; }
        .detail-title-col h2 { margin: 0; font-size: 2rem; color: #f1f5f9; letter-spacing: 2px; }
        .detail-narrator { color: #00f2ff; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }
        .detail-body-grid { flex: 1; overflow-y: auto; padding: 30px; display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .detail-info-row { grid-column: 1 / -1; display: flex; gap: 40px; border-bottom: 1px solid #334155; padding-bottom: 20px; }
        .info-item label { color: #fbbf24; font-size: 0.7rem; font-weight: bold; display: block; margin-bottom: 5px; }
        .info-item span { color: #fff; font-size: 1.1rem; }
        .detail-section { margin-bottom: 10px; }
        .section-label { display: block; color: #94a3b8; font-size: 0.75rem; font-weight: bold; margin-bottom: 8px; border-left: 3px solid #fbbf24; padding-left: 8px; }
        .section-text { color: #cbd5e1; line-height: 1.6; font-size: 0.95rem; white-space: pre-wrap; }
        .reward-section { grid-column: 1 / -1; background: rgba(251, 191, 36, 0.05); padding: 15px; border: 1px solid rgba(251, 191, 36, 0.2); border-radius: 6px; }
        .reward-content-box { display: flex; justify-content: space-between; align-items: center; }
        .gil-display-row { font-size: 1.5rem; font-weight: bold; color: #fff; display: flex; align-items: center; gap: 10px; }
        .gil-value { color: #fcd34d; }
        .extra-rewards-list { text-align: right; color: #fbbf24; font-size: 0.9rem; font-style: italic; }
        .ff-final-close-btn { width: 100%; padding: 20px; background: #020617; color: #fff; border: none; border-top: 1px solid #334155; font-family: 'Cinzel', serif; font-weight: bold; cursor: pointer; transition: 0.2s; letter-spacing: 2px; }
        .ff-final-close-btn:hover { background: #fbbf24; color: #000; }

        /* LIGHTBOX */
        .lightbox-wrap { position: relative; max-width: 90vw; max-height: 90vh; }
        .cartaz-full-view { max-width: 100%; max-height: 90vh; border: 3px solid #ffcc00; box-shadow: 0 0 50px #000; }
        .close-lightbox { position: absolute; top: -40px; right: -40px; background: transparent; border: none; color: #fff; font-size: 40px; cursor: pointer; }
        
        /* BOTO FLUTUANTE DE FICHAS */
        .fichas-trigger-btn { position: fixed; bottom: 30px; right: 190px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #00f2ff; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; }
        .fichas-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 25px #00f2ff; }
        .fichas-trigger-btn img { width: 70%; height: 70%; object-fit: contain; }

        /* LISTA DE FICHAS */
        .ficha-list-item { display: flex; justify-content: space-between; align-items: center; background: #1e293b; padding: 15px; border-radius: 4px; margin-bottom: 10px; border: 1px solid #334155; }
        .ficha-row-name strong { display: block; color: #fff; font-size: 1.1rem; }
        .ficha-row-name small { color: #94a3b8; }
        .btn-cyan { padding: 8px 15px; font-size: 0.8rem; }
      `})]})}const k5=[{id:"humes",name:"Humes",image:"races/humes.png",description:"Os Humes so a raa mais comum e predominante em Ivalice. Adaptveis, curiosos e persistentes, habitam desde as grandes capitais at vilarejos fronteirios. Sua origem  antiga e pouco documentada, mas acredita-se que foram os primeiros a construir grandes cidades e fundar os cls atuais.",characteristics:"Sua maior qualidade  a versatilidade. No se destacam naturalmente em nenhum atributo especfico, mas aprendem qualquer funo rapidamente, prosperando em qualquer lugar que chamem de lar.",racial_bonus:{value:5,detail:"5 pontos extras para distribuir livremente entre os atributos durante a criao de personagem."},base_classes:["Soldado","Mago Branco","Qumico"]},{id:"viera",name:"Viera",image:"races/viera.png",description:"Uma raa graciosa e enigmtica, marcada por longas orelhas e aparncia esguia. Vivem em florestas profundas, isoladas do mundo exterior e conectadas aos espritos da natureza. A sociedade  matriarcal.",characteristics:"Conhecidas por sentidos aguados, velocidade impressionante e habilidades mgicas refinadas. Os machos so raros e exilados ao atingirem a maturidade.",racial_bonus:{female:{VEL:3,INT:2},male_exiled:{"pontos-livres":5}},base_classes:{female:["Arqueira","Esgrimista","Curandeira"],male:["Exilado"]}},{id:"moogles",name:"Moogles",image:"races/moogles.png",description:"Pequenos, adorveis e envoltos em mistrio. Possuem corpos peludos, antenas com pompons flutuantes e pequenas asas de morcego. No possuem gnero definido.",characteristics:"Extremamente inteligentes e obcecados por tecnologia e invenes, misturando cincia com feitiaria. Carregam um estranho 'magnetismo da sorte'.",racial_bonus:{SOR:5},base_classes:["Animista","Engenheiro"]},{id:"bangaa",name:"Bangaa",image:"races/bangaa.png",description:"Guerreiros reptilianos robustos, com pele escamosa e traos que lembram drages antigos. So temidos pela fora bruta e respeitados pela honra em combate.",characteristics:"Sua origem remonta a tempos ancestrais e acredita-se que possuam sangue dracnico. Valorizam a lealdade, a disciplina fsica e o dever.",racial_bonus:{FOR:3,CONS:2},base_classes:["Monge","Guerreiro"]},{id:"grias",name:"Grias",image:"races/grias.png",description:"Guerreiras aladas, exclusivamente femininas, nascidas para dominar os cus. Possuem corpos atlticos, chifres, caudas e asas fortes.",characteristics:"Mestres da caa alada e emboscadas areas. Usam a altura como vantagem ttica e seus ataques de mergulho so devastadores.",racial_bonus:{VEL:2},passive_ability:{name:"Imunidade a Dano de Queda",effect:"No sofrem dano ao cair de qualquer altura nem de impactos ascendentes."},base_classes:["Raptora","Rastreadora"]},{id:"elvaan",name:"Elvaan",image:"races/elvaan.png",description:"Originrios de Valendia, so guerreiros altos, nobres e disciplinados, com orelhas alongadas. Simbolizam tradio e justia em Ivalice.",characteristics:"Treinados desde a infncia no manejo de lminas e estilos de combate ancestrais. Desprezam truques e valorizam o confronto direto.",racial_bonus:{FOR:2},passive_ability:{name:"Domnio de Reao",effect:"Aprendem habilidades de reao com o dobro de rapidez."},base_classes:["Soldado","Espadachim"]},{id:"mithra",name:"Mithra",image:"races/mithra.png",description:"Raa com traos felinos, gil e astuta. Compartilham uma origem ancestral com as Viera, mas se espalharam por matas tropicais e runas.",characteristics:"Especialistas em furtividade, espionagem e ladronagem. Possuem forte senso de honra ligado  astcia.",racial_bonus:{VEL:2},passive_ability:{name:"Bnus de Camuflagem",effect:"Recebem vantagem em testes de furtividade, infiltrao e disfarce."},base_classes:["Ladra","Espreitadora"]},{id:"nu_mou",name:"Nu Mou",image:"races/nu-mou.png",description:"Pequenos em estatura, com aparncia canina e pelagem espessa, mas imensos em conhecimento. So magos natos que vivem sculos acumulando sabedoria.",characteristics:"Frequentemente ocupam cargos de conselheiros. Possuem empatia natural com a vida selvagem, comunicando-se com monstros e animais.",racial_bonus:{INT:3,CAR:2},base_classes:["Mago Branco","Adestrador"]},{id:"hypello",name:"Hypello",image:"races/hypello.png",description:"Raa anfbia dos pntanos de Kerwon. Possuem grande estatura, corpos robustos e pele azulada ou esverdeada.",characteristics:"Herbalistas por excelncia, mestres em usar plantas para curas ou venenos. Sua maior fora  a vitalidade e a empatia.",racial_bonus:{CONS:5},base_classes:["Escudeiro","Curandeiro"]},{id:"umbros",name:"Umbros",image:"races/umbros.png",description:"Seres de pele negra e marcas brilhantes que reagem  lua. Descendentes dos seres tocados pelas Pedras Zodiacais.",characteristics:"Alta resistncia  corrupo e aptido mgica. Vistos como orculos ou andarilhos que carregam segredos esquecidos.",racial_bonus:{INT:2},passive_ability:{name:"Modo Luar",effect:"Sob luz direta da lua visvel, causam o dobro de dano final com qualquer magia."},base_classes:["Mago Negro","Ocultista"]}],O5={races:k5},D5=JSON.parse(`[{"id":"soldado","name":"Soldado","type":"Bsica","role":"Tanque / Suporte de status","description":"Guerreiros de linha de frente, treinados para resistir aos maiores impactos do campo de batalha e desestabilizar o inimigo com habilidades tticas conhecidas como 'Pausas'.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Primeiro Socorro","description":"Trata os prprios ferimentos, restaurando 25% do HP.","cost":"N/A","type":"HB"},{"name":"Quebra de Poder","description":"Reduz a FOR do alvo pela metade, por trs turnos.","cost":"N/A","type":"HB"},{"name":"Quebra Magia","description":"Reduz a INT do alvo pela metade, por trs turnos.","cost":"N/A","type":"HB"},{"name":"Quebra de Mana","description":"Reduz a MP do alvo pela metade por trs turnos.","cost":"N/A","type":"HB"},{"name":"Provocar","description":"Inflige FURIA a um alvo.","cost":"N/A","type":"HB"},{"name":"Shieldbearer","description":"Permite ao usurio equipar escudos, mesmo fora da classe Soldado.","cost":"N/A","type":"Passiva"}]},{"id":"mago_branco","name":"Mago Branco","type":"Bsica","role":"Suporte / Cura / Anti-morto-vivo","description":"Especialistas em suporte mgico, sua principal funo  manter o grupo de p com curas poderosas, proteo espiritual e magias de ressuscitao.","bonus_class":{"MP":5},"requirements":[],"abilities":[{"name":"Cure","description":"Cura magicamente os ferimentos do alvo. Restaura 10% do PV e causa dano a mortos-vivos.","cost":"8 MP","type":"Magia"},{"name":"Cura","description":"Restaura magicamente 25% de HP. Causa dano a mortos-vivos.","cost":"18 MP","type":"Magia"},{"name":"Curaga","description":"Restaura magicamente 75% de HP. Causa dano a mortos-vivos.","cost":"32 MP","type":"Magia"},{"name":"Esuna","description":"Remove magicamente os efeitos negativos do alvo.","cost":"10 MP","type":"Magia"},{"name":"Arise","description":"Revive magicamente o alvo, removendo o KO. Causa dano a mortos-vivos.","cost":"40 MP","type":"Magia"},{"name":"Turbo MP","description":"Os feitios custam o dobro de seus MP normais, e do o dobro de dano.","cost":"N/A","type":"Passiva"}]},{"id":"quimico","name":"Qumico","type":"Bsica","role":"Suporte / Manipulador de Itens","description":"Mestres do preparo e uso ttico de poes. Utilizam conhecimentos alqumicos para curar aliados e enfraquecer inimigos.","bonus_class":{"SOR":2,"CAR":3},"requirements":[],"abilities":[{"name":"Preparar Poo","description":"Cria uma poo bsica durante o turno.","cost":"N/A","type":"HB"},{"name":"Arremessar Poo","description":"Permite arremessar qualquer poo equipada em um aliado ou inimigo a at 3 quadrados.","cost":"N/A","type":"HB"},{"name":"Frasco Instvel","description":"Arremessa uma mistura explosiva improvisada que causa dano de elemento aleatrio.","cost":"N/A","type":"HB"},{"name":"Reao em Cadeia","description":"Permite usar duas poes diferentes ao mesmo tempo.","cost":"N/A","type":"HB"},{"name":"Reciclagem Alqumica","description":"Recupera uma poo gasta no combate.","cost":"N/A","type":"HB"},{"name":"Inventrio Estendido","description":"Bolsa exclusiva para poes que no ocupa espao no inventrio padro (at 8 poes).","cost":"N/A","type":"Passiva"}]},{"id":"arqueira","name":"Arqueira","type":"Bsica","role":"Atiradora / Controle de Campo","description":"Especialistas em combate  distncia, treinadas para derrubar inimigos com preciso e neutralizar alvos.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Foco","description":"Aumenta drasticamente a preciso e dobra o dano final do ataque.","cost":"N/A","type":"HB"},{"name":"Acerto na Perna","description":"Causa IMOBILIZAO, impedindo movimentos por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Acerto na Mo","description":"Causa DESARME por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Mira Precisa","description":"Adiciona o atributo SORTE ao dano final do ataque.","cost":"N/A","type":"HB"},{"name":"Apago","description":"Causa CEGUEIRA, reduzindo severamente a chance de acerto do alvo por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Concentrao","description":"Aumenta a chance de acerto em todos os disparos de longa distncia.","cost":"N/A","type":"Passiva"}]},{"id":"esgrimista","name":"Esgrimista","type":"Bsica","role":"Duelista / Assassina de preciso","description":"Combatentes graciosas e letais, treinadas no uso refinado da rapieira.","bonus_class":{"VEL":3,"FOR":2},"requirements":[],"abilities":[{"name":"Picada Venenosa","description":"Causa dano e aplica VENENO ao alvo.","cost":"N/A","type":"HB"},{"name":"Voo da Andorinha","description":"Ataca todos os inimigos ao redor, podendo derrub-los.","cost":"N/A","type":"HB"},{"name":"Golpe Perfurante","description":"Estocada que atravessa o primeiro alvo e atinge um segundo atrs dele.","cost":"N/A","type":"HB"},{"name":"Golpe de Mana","description":"Causa dano e reduz o MP do inimigo.","cost":"N/A","type":"HB"},{"name":"Xeque-mate","description":"Inflige CONDENAO (morte aps 3 turnos).","cost":"N/A","type":"HB"},{"name":"Passos Leves","description":"Pode atravessar reas de gua rasa sem perder mobilidade.","cost":"N/A","type":"Passiva"}]},{"id":"curandeira","name":"Curandeira","type":"Bsica","role":"Suporte / Cura Natural","description":"Guardis da vida e das florestas, conectadas  energia da natureza para curar e proteger.","bonus_class":{"HP":3,"MP":2},"requirements":[],"abilities":[{"name":"Folha Serena","description":"Cura um aliado em 10 de HP.","cost":"8 MP","type":"Magia"},{"name":"Broto Purificador","description":"Remove um status negativo de um aliado.","cost":"18 MP","type":"Magia"},{"name":"Conexo Natural","description":"25% do dano recebido pelo aliado  transferido para a Curandeira por 3 turnos.","cost":"20 MP","type":"Magia"},{"name":"Vinhas Enlaantes","description":"Prende at 3 inimigos, impedindo movimento por 2 turnos.","cost":"24 MP","type":"Magia"},{"name":"Nvoa Vigorosa","description":"Cura leve em todos os aliados prximos (rea 3 blocos).","cost":"35 MP","type":"Magia"},{"name":"Refrigrio da Floresta","description":"30% de chance de conceder Resistncia Natural (+5 ARM ou +5 RES) ao curar.","cost":"N/A","type":"Passiva"}]},{"id":"exilado","name":"Exilado","type":"Bsica","role":"Lutador Adaptvel / Sobrevivente","description":"Viera masculinos banidos que aprenderam a sobreviver por conta prpria, adaptando-se a qualquer arma.","bonus_class":{"Livre":5},"requirements":[],"abilities":[{"name":"Tiro Preciso","description":"Disparo com preciso perfeita (usa SOR).","cost":"N/A","type":"HB (Arco)"},{"name":"Golpe Silencioso","description":"Causa DANO CRTICO automtico se o alvo estiver de costas.","cost":"N/A","type":"HB (Adaga)"},{"name":"Finta Desarmante","description":"Reduz o ATAQUE do inimigo por 2 turnos.","cost":"N/A","type":"HB (Espada)"},{"name":"Ruptura Selvagem","description":"Ignora a DEFESA do inimigo e causa dano elevado.","cost":"N/A","type":"HB (Espado)"},{"name":"Primeiros Socorros","description":"Cura 20% do HP a si mesmo ou aliado.","cost":"N/A","type":"HB"},{"name":"Adaptao de Combate","description":"Pode trocar a arma equipada 1 vez por turno sem custo de ao.","cost":"N/A","type":"Passiva"}]},{"id":"guerreiro","name":"Guerreiro","type":"Bsica","role":"Linha de Frente / Espancador","description":"Muralhas de msculo treinados para esmagar o inimigo com pura fora fsica.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Primeiro Socorro","description":"Trata os prprios ferimentos, restaurando 20% do HP.","cost":"N/A","type":"HB"},{"name":"Poder de Rend","description":"Reduz o ATAQUE do alvo.","cost":"N/A","type":"HB"},{"name":"Rend Magick","description":"Reduz a MAGIA do alvo.","cost":"N/A","type":"HB"},{"name":"Batida Corporal","description":"Investida causando dano FOR+CONS, volta 40% do dano a si mesmo.","cost":"N/A","type":"HB"},{"name":"Grito de Guerra","description":"Imobiliza o inimigo por 2 turnos e pode causar medo.","cost":"N/A","type":"HB"},{"name":"Monkey Grip","description":"Permite empunhar armas de duas mos com uma mo s.","cost":"N/A","type":"Passiva"}]},{"id":"monge","name":"Monge","type":"Bsica","role":"Linha de Frente / Espancador","description":"Lutadores que usam o ki e seus prprios corpos como armas letais.","bonus_class":{"FOR":3,"CONS":2},"requirements":[],"abilities":[{"name":"Onda Giratria","description":"Ataque giratrio que atinge todos ao redor em 1 bloco.","cost":"N/A","type":"HB"},{"name":"Pulso de Ar","description":"Soco com ki que causa dano e empurra o alvo 2 blocos.","cost":"N/A","type":"HB"},{"name":"Pulso de Terra","description":"Dano terrestre em linha reta (at 3 blocos).","cost":"N/A","type":"HB"},{"name":"Exploso de Ki","description":"Dano em rea de 2 blocos ao redor do monge.","cost":"N/A","type":"HB"},{"name":"Meditao","description":"Restaura 20% de HP e remove status negativos.","cost":"N/A","type":"HB"},{"name":"Reflexo","description":"50% de chance de desviar de ataques bsicos fsicos.","cost":"N/A","type":"Reao"}]},{"id":"animista","name":"Animista","type":"Bsica","role":"Suporte / Manipulador de Status","description":"Moogles que usam instrumentos e talentos imprevisveis para causar efeitos absurdos no campo.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"L Fofa","description":"Garante status 'Proteo' e 'Shell' por 3 turnos.","cost":"8 MP","type":"Magia"},{"name":"Erva de Gato","description":"Aplica 'BERSERK' no inimigo.","cost":"8 MP","type":"HB"},{"name":"Canto do Sapo","description":"Transforma o alvo em SAPO por 2 turnos.","cost":"22 MP","type":"Magia"},{"name":"Cozinhar","description":"Restaura 50% do HP do Alvo.","cost":"22 MP","type":"HB"},{"name":"Conte Ovelhinhas","description":"Faz todos os inimigos em pequena rea adormecerem.","cost":"15 MP","type":"Magia"},{"name":"Abanar o Rabo","description":"20% de chance de ENCANTAR o atacante quando alvejado.","cost":"N/A","type":"Reao"}]},{"id":"engenheiro","name":"Engenheiro","type":"Bsica","role":"Suporte Aleatrio / Caos Tecnolgico","description":"Gnios insanos que usam aparatos e mecanismos imprevisveis.","bonus_class":{"SOR":3,"INT":2},"requirements":[],"abilities":[{"name":"Box Vermelha","description":"Lana 'Haste' em uma unidade aleatria.","cost":"8 MP","type":"HB"},{"name":"Kit Azul","description":"Lana 'Dissipar' ao colidir com alvo aleatrio.","cost":"8 MP","type":"HB"},{"name":"Chaves Negras","description":"Aplica 'Condenao' em quem for atingido.","cost":"20 MP","type":"HB"},{"name":"Bateria Dourada","description":"Restaura 50% HP em uma unidade aleatria.","cost":"16 MP","type":"HB"},{"name":"Borrifador Verde","description":"Aplica VENENO em uma unidade aleatria na rea.","cost":"8 MP","type":"HB"},{"name":"Ajuste Rpido","description":"Permite reutilizar habilidade que falhou no turno seguinte sem custo de MP.","cost":"N/A","type":"Passiva"}]},{"id":"raptora","name":"Raptora","type":"Bsica","role":"Lutadora de Linha de Frente / Alta Mobilidade","description":"Guerreiras aladas que usam velocidade e instintos aguados para ataques rpidos.","bonus_class":{"FOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Ciclone","description":"Causa dano de vento em rea pequena.","cost":"N/A","type":"HB"},{"name":"Poder de Rend","description":"Reduz o ATAQUE do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Rend Magick","description":"Reduz a MAGIA do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Rend MP","description":"Diminui MP do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Redemoinho","description":"Lminas de vento causam dano e CONFUSO.","cost":"N/A","type":"HB"},{"name":"Salvaguarda","description":"Impede que a arma seja roubada ou destruda.","cost":"N/A","type":"Passiva"}]},{"id":"rastreadora","name":"Rastreadora","type":"Bsica","role":"Caadora / Suporte de Rastreio e Preciso","description":"Mestres da observao que leem o terreno e perseguem presas.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Sonic Boom","description":"Dano sonoro impossvel de desviar.","cost":"N/A","type":"HB"},{"name":"Expulsar","description":"Fora um monstro a fugir do combate.","cost":"N/A","type":"HB"},{"name":"Rastrear","description":"Marca um Monstro como 'presa', causando DANO DOBRADO.","cost":"N/A","type":"HB"},{"name":"Investigar","description":"Revela todas as informaes do alvo.","cost":"N/A","type":"HB"},{"name":"ltimo Tiro","description":"Alto dano com chance de infligir CONDENAO.","cost":"N/A","type":"HB"},{"name":"Sobrevivente","description":"Recebe REGEN quando estiver com 20% de HP ou menos.","cost":"N/A","type":"Passiva"}]},{"id":"espadachim","name":"Espadachim","type":"Bsica","role":"Lutador Verstil / Duelo & Tcnica","description":"Guerreiros disciplinados que combinam preciso fsica e poder mgico na lmina.","bonus_class":{"FOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Corte Cruzado","description":"Dano em rea frontal (arco) em at 3 inimigos.","cost":"N/A","type":"HB"},{"name":"Olhos no Duelo","description":"+25% de dano se enfrentar apenas um inimigo.","cost":"N/A","type":"HB"},{"name":"Corte Etreo","description":"Golpe mgico  distncia (FOR+INT).","cost":"10 MP","type":"HB"},{"name":"Passo Veloz","description":"Move-se para trs do inimigo com +50% de chance de crtico.","cost":"N/A","type":"HB"},{"name":"Trifria","description":"Combo de 3 ataques com chance de Sangramento.","cost":"N/A","type":"HB"},{"name":"Corte Reflexivo","description":"30% de chance de aparar projteis fsicos.","cost":"N/A","type":"Reao"}]},{"id":"ladra","name":"Ladra","type":"Bsica","role":"Furtividade / Roubo","description":"Mestras do furto e agilidade que roubam itens e gil em combate.","bonus_class":{"SOR":3,"CAR":2},"requirements":[],"abilities":[{"name":"Roubar Gil","description":"Tenta roubar dinheiro.","cost":"N/A","type":"HB"},{"name":"Roubar Item","description":"Tenta roubar um item.","cost":"N/A","type":"HB"},{"name":"Roubar Equipamento","description":"Tenta roubar o Equipamento do alvo.","cost":"N/A","type":"HB"},{"name":"Destrancar","description":"Pode destrancar portas ou bas.","cost":"N/A","type":"HB"},{"name":"Golpe Furtivo","description":"Dobro de dano se estiver Escondida.","cost":"N/A","type":"HB"},{"name":"Instinto Possessivo","description":"Evita roubo e tenta roubar a arma do ladro.","cost":"N/A","type":"Reao"}]},{"id":"espreitadora","name":"Espreitadora","type":"Bsica","role":"Furtividade / Infiltrao","description":"Especialistas em camuflagem e eliminao silenciosa.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Ataque Surpresa","description":"Crtico automtico se fora do campo de viso.","cost":"N/A","type":"HB"},{"name":"Rpida e Escondida","description":"Velocidade dobrada quando camuflada.","cost":"N/A","type":"Passiva"},{"name":"Manto Noturno","description":"Aumenta chance de camuflagem  noite.","cost":"N/A","type":"Passiva"},{"name":"Silncio","description":"Aplica Silncio por 3 turnos (apenas camuflada).","cost":"N/A","type":"HB"},{"name":"Derrubada Mortal","description":"Elimina instantaneamente alvo pelas costas (apenas camuflada).","cost":"N/A","type":"HB"},{"name":"Morte Silenciosa","description":"50% de chance de permanecer camuflada aps eliminar alvo.","cost":"N/A","type":"Passiva"}]},{"id":"adestrador","name":"Adestrador","type":"Bsica","role":"Controle de Criaturas / Suporte Ttico","description":"Especialistas em lidar com a vida selvagem, controlando monstros temporariamente.","bonus_class":{"CAR":5},"requirements":[],"abilities":[{"name":"Adestrar","description":"Controla um monstro por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Bater ou Correr","description":"Recebe Haste quando HP chega a 10%.","cost":"N/A","type":"Reao"}]},{"id":"escudeiro","name":"Escudeiro","type":"Bsica","role":"Defensor / Suporte com Itens","description":"Pilares de defesa que protegem aliados e usam itens de suporte.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Postura de Defesa","description":"Reduz pela metade o dano recebido at o prximo turno.","cost":"N/A","type":"HB"},{"name":"Apoio Vital","description":"Usa at 2 poes para curar aliados adjacentes.","cost":"N/A","type":"HB"},{"name":"Eu te Protejo!","description":"Salta no aliado que tomar dano e absorve o golpe.","cost":"N/A","type":"Reao"},{"name":"Lanamento Cuidadoso","description":"Arremessa item a at 3 blocos.","cost":"N/A","type":"HB"},{"name":"Grito Protetor","description":"Provoca inimigos forando ataque ao Escudeiro.","cost":"N/A","type":"HB"},{"name":"Reao Instintiva","description":"Usa poo automaticamente ao sofrer golpe com HP baixo.","cost":"N/A","type":"Reao"}]},{"id":"mago_negro","name":"Mago Negro","type":"Bsica","role":"Ofensivo Mgico / Controle Elemental","description":"Conjuradores que dominam a magia elemental destrutiva.","bonus_class":{"INT":3,"MP":2},"requirements":[],"abilities":[{"name":"Fire","description":"Esfera de fogo em rea (alvo + 1 casa cada lado).","cost":"10 MP","type":"Magia"},{"name":"Blizzard","description":"Fragmento congelante perfurante.","cost":"10 MP","type":"Magia"},{"name":"Thunder","description":"Raio direto sobre inimigo e adjacentes.","cost":"10 MP","type":"Magia"},{"name":"Aero","description":"Turbilho de vento em rea.","cost":"10 MP","type":"Magia"},{"name":"Telecinese","description":"Move objeto/unidade at 5 blocos.","cost":"10 MP","type":"Magia"},{"name":"Absorver Mana","description":"Absorve 20% do dano mgico recebido como Mana.","cost":"N/A","type":"Reao"}]},{"id":"ocultista","name":"Ocultista","type":"Bsica","role":"Mago das Sombras / Maldies","description":"Estudiosos do proibido que manipulam trevas e maldies.","bonus_class":{"MP":3,"INT":2},"requirements":[],"abilities":[{"name":"Escurido","description":"Dano mgico de trevas em rea.","cost":"10 MP","type":"Magia"},{"name":"Ritual da Condenao","description":"Aplica CONDENAO no alvo.","cost":"15 MP","type":"Magia"},{"name":"Barreira do Silncio","description":"Aplica SILNCIO no alvo.","cost":"15 MP","type":"Magia"},{"name":"Vu Cego","description":"Aplica CEGUEIRA no alvo.","cost":"15 MP","type":"Magia"},{"name":"Avada Mortis","description":"Tenta aplicar morte instantnea.","cost":"30 MP","type":"Magia"},{"name":"Olhar do Abismo","description":"Aumenta INT aps concluir maldio.","cost":"N/A","type":"Passiva"}]},{"id":"quimico_avancado","name":"Qumico Avanado","type":"Avanada","role":"Suporte / Manipulador de Itens","description":"Evoluo do Qumico, usa reaes elementares e poes ofensivas em rea.","bonus_class":{"SOR":4,"CAR":2},"requirements":["3 Habilidades Mestre em Qumico","+30 SOR"],"abilities":[{"name":"Criar Poo Avanada","description":"Cria poes de qualidade superior.","cost":"N/A","type":"HB"},{"name":"Arremesso Rpido","description":"Arremessa at 3 poes em um movimento.","cost":"N/A","type":"HB"},{"name":"Frasco Venenoso","description":"Libera veneno em rea.","cost":"N/A","type":"HB"},{"name":"Frasco Milagroso","description":"Remove todos status negativos.","cost":"N/A","type":"HB"},{"name":"Dose Grande","description":"Aumenta rea de efeito da poo.","cost":"N/A","type":"HB"},{"name":"Pr-Preparo","description":"Inicia combate com 2 poes prontas.","cost":"N/A","type":"Passiva"}]},{"id":"clerigo","name":"Clrigo","type":"Avanada","role":"Curandeiro de Linha de Frente","description":"Elo entre fora e f, luta na frente enquanto cura aliados.","bonus_class":{"CONS":4,"MANA":2},"requirements":["1 Habilidade Mestre em Soldado","2 Habilidades Mestre em Mago Branco","+20 FOR"],"abilities":[{"name":"Julgamento Divino","description":"Dano sagrado (FOR+Luz).","cost":"20 MP","type":"Magia"},{"name":"Palavras de F","description":"Concede Barreira e Shell.","cost":"15 MP","type":"Magia"},{"name":"Espurgar","description":"Expulsa monstros espirituais.","cost":"25 MP","type":"Magia"},{"name":"Martelo Giratrio","description":"Dano em rea ao redor (CONS+FOR+Luz).","cost":"30 MP","type":"HB"},{"name":"Ruptura Divina","description":"Exploso triangular de luz.","cost":"50 MP","type":"HB"},{"name":"Estou com Voc","description":"Cura auto 10% de aliado adjacente por turno.","cost":"N/A","type":"Passiva"}]},{"id":"alquimista","name":"Alquimista","type":"Avanada","role":"Suporte / Manipulador de Campo","description":"Molda o mundo convertendo solo e energia em poder.","bonus_class":{"INT":4,"MANA":2},"requirements":["2 Habilidades Mestre em Mago Branco","1 Habilidade Mestre em Qumico","+30 INT"],"abilities":[{"name":"Pilar de Pedra","description":"Pilar de rocha atinge inimigo (INT+Terra).","cost":"20 MP","type":"Magia"},{"name":"Canho de Pedra","description":"Projtil de rocha distante.","cost":"20 MP","type":"Magia"},{"name":"Correntes de Solo","description":"Imobiliza inimigo.","cost":"17 MP","type":"Magia"},{"name":"Transmutao Peridica","description":"Altera elemento natural de rea/objeto.","cost":"30 MP","type":"Magia"},{"name":"Golem de Pedra","description":"Cria golem controlvel.","cost":"50 MP","type":"Magia"},{"name":"Muro","description":"Bloqueia ataque com muro de pedra.","cost":"N/A","type":"Reao"}]},{"id":"duelista","name":"Duelista","type":"Avanada","role":"Lutador de Elite / Combate Singular","description":"pice do domnio da espada, focado em preciso e duelos.","bonus_class":{"FOR":4,"VEL":2},"requirements":["3 Habilidades Mestre em Espadachim","+30 FOR","+20 VEL"],"abilities":[{"name":"BackStep","description":"Salta 2 blocos para esquiva.","cost":"N/A","type":"HB"},{"name":"Eu Contra Voc","description":"+50% dano em alvo nico.","cost":"N/A","type":"HB"},{"name":"Chuva de Lminas","description":"Trs cortes de ar consecutivos.","cost":"N/A","type":"HB"},{"name":"Postura de Batalha","description":"Aumenta ataque fsico em 50%.","cost":"N/A","type":"HB"},{"name":"Grande Slash","description":"Golpe que percorre o campo todo.","cost":"N/A","type":"HB"},{"name":"Defesa Contnua","description":"Desvia golpe se FOR > inimigo.","cost":"N/A","type":"Reao"}]},{"id":"iluminista","name":"Iluminista","type":"Avanada","role":"Mago Supremo / Controlador Elemental Global","description":"Concentra energia para ataques globais ou curas totais.","bonus_class":{"INT":5,"MANA":5},"requirements":["5 Habilidades Mestre em Mago Branco","5 Habilidades Mestre em Mago Negro"],"abilities":[{"name":"Piromancia","description":"Dano global de Fogo aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Aquamancia","description":"Dano global de gua aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Raiomancia","description":"Dano global de Trovo aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Whitemancia","description":"Cura global 50% HP aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Tretamancia","description":"Plasma linear de ponta a ponta.","cost":"50 MP","type":"Magia"},{"name":"Ritual Seguro","description":"Ativa Barreira/Veloz ao ser alvejado conjurando.","cost":"N/A","type":"Reao"}]},{"id":"oppenheir","name":"Oppenheir","type":"Avanada","role":"Mestre Qumico / Manipulador da Destruio","description":"Alquimia levada ao limite de exploses e reaes em cadeia.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Qumico","5 Habilidades Mestre em Qumico Avanado"],"abilities":[{"name":"Reao Altrusta","description":"Exploso de cura e remoo de status.","cost":"N/A","type":"HB"},{"name":"Nuvem Txica","description":"Veneno em rea e reduz preciso.","cost":"N/A","type":"HB"},{"name":"Ignis Vitae","description":"Chamas conscientes perseguidoras.","cost":"N/A","type":"HB"},{"name":"Fragmento Celular","description":"Microexploso de dano massivo.","cost":"N/A","type":"HB"},{"name":"Bomba Atmica","description":"Exploso que elimina todos no campo (exceto cobertura).","cost":"N/A","type":"HB"},{"name":"Entropia Perfeita","description":"Chance de remover penalidades ao explodir.","cost":"N/A","type":"Passiva"}]},{"id":"eremita","name":"Eremita","type":"Avanada","role":"Tanque / Protetor Espiritual","description":"Sacerdote de batalha que converte dano em sacrifcio e proteo.","bonus_class":{"CONS":10},"requirements":["5 Habilidades Mestre em Clrigo","+100 CONS"],"abilities":[{"name":"F ao Meu Redor","description":"Aura cura 50% HP aliados prximos.","cost":"N/A","type":"HB"},{"name":"F do Sol","description":"Raio solar expurga mortos-vivos e queima.","cost":"N/A","type":"HB"},{"name":"F da Lua","description":"Cura 100% HP aliados prximos.","cost":"N/A","type":"HB"},{"name":"F do Ferro","description":"Concede Shell+ e Barreira+.","cost":"N/A","type":"HB"},{"name":"F do Brbaro","description":"Provoca inimigos e soma CONS ao dano.","cost":"N/A","type":"HB"},{"name":"Aquele que Me Protege","description":"Converte 20% do dano recebido em cura.","cost":"N/A","type":"Passiva"}]},{"id":"arquidenio","name":"Arquidnio","type":"Avanada","role":"Suporte / Manipulador de Probabilidades","description":"Mago matemtico que manipula valores e estatsticas de combate.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Alquimista","+100 INT"],"abilities":[{"name":"O Dobro","description":"Dobra qualquer valor por 1 turno.","cost":"50 MP","type":"Magia"},{"name":"Pela Metade","description":"Divide qualquer valor por 2.","cost":"50 MP","type":"Magia"},{"name":"100%","description":"Garante acerto absoluto.","cost":"70 MP","type":"Magia"},{"name":"0%","description":"Anula valor ou chance a 0.","cost":"70 MP","type":"Magia"},{"name":"Septania","description":"Multiplica valor por 7x.","cost":"100 MP","type":"Magia"},{"name":"Lgica Perfeita","description":"Resultado natural 20 uma vez por batalha.","cost":"N/A","type":"Passiva"}]},{"id":"samurai","name":"Samurai","type":"Avanada","role":"Ofensivo / Especialista em Duelo","description":"Guerreiro disciplinado que une velocidade e fora em cortes perfeitos.","bonus_class":{"FOR":5,"VEL":5},"requirements":["5 Habilidades Mestre em Espadachim","5 Habilidades Mestre em Duelista"],"abilities":[{"name":"Saque Rpido","description":"Duplica FOR e VEL por 1 turno.","cost":"N/A","type":"HB"},{"name":"Furaco da Folha","description":"Tornado de cortes em linha reta.","cost":"N/A","type":"HB"},{"name":"Olhos de Falco","description":"Soma FOR + SOR contra alvo.","cost":"N/A","type":"HB"},{"name":"Corte do Drago","description":"Golpe instantneo. 20 natural elimina alvo.","cost":"N/A","type":"HB"},{"name":"Cu Limpo","description":"Corte vertical colossal aps preparao.","cost":"N/A","type":"HB"},{"name":"Empunhadura Dupla","description":"Pode empunhar duas armas.","cost":"N/A","type":"Passiva"}]},{"id":"gladiador","name":"Gladiador","type":"Avanada","role":"Linha de Frente / Controle e Fora Bruta","description":"Colosso de arena que luta por glria e brutalidade.","bonus_class":{"FOR":4,"CONS":2},"requirements":["2 Habilidades Mestre em Guerreiro","+30 FOR"],"abilities":[{"name":"Grito Selvagem","description":"Aumenta FOR e provoca inimigos.","cost":"N/A","type":"HB"},{"name":"Investida de Escudo","description":"Dano de impacto com escudo.","cost":"N/A","type":"HB"},{"name":"Espancamento","description":"5 golpes consecutivos, pode imobilizar.","cost":"N/A","type":"HB"},{"name":"Espada Flamejante","description":"Causa Queimadura com ataques fsicos.","cost":"N/A","type":"HB"},{"name":"Postura de Luta","description":"Evita ataques e contra-ataca.","cost":"N/A","type":"HB"},{"name":"Escudeiro","description":"Pode usar escudos em qualquer classe.","cost":"N/A","type":"Passiva"}]},{"id":"artista_marcial","name":"Artista Marcial","type":"Avanada","role":"Linha de Frente / Especialista em Combos","description":"Especialista em golpes precisos e canalizao de fora vital.","bonus_class":{"VEL":4,"CONS":2},"requirements":["2 Habilidades Mestre em Monge","+30 VEL"],"abilities":[{"name":"Combo do Tigre","description":"3 golpes, dano aumenta a cada acerto.","cost":"N/A","type":"HB"},{"name":"Golpe Serpenteante","description":"Aproximao em zigue-zague e crtico.","cost":"N/A","type":"HB"},{"name":"Palma Sagrada","description":"Golpe de dano puro que ignora armadura.","cost":"N/A","type":"HB"},{"name":"Passo do Vento","description":"Teleporte curto e ataque surpresa.","cost":"N/A","type":"HB"},{"name":"Punhos do Drago","description":"5 golpes simultneos com chance de atordoar.","cost":"N/A","type":"HB"},{"name":"Esprito Indomvel","description":"Ganha FOR e VEL quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"lanceiro","name":"Lanceiro","type":"Avanada","role":"Ofensivo / Alcance e Preciso","description":"Predador de longo alcance com lanas.","bonus_class":{"VEL":4,"SOR":2},"requirements":["2 Habilidades Mestre em Guerreiro","+30 VEL"],"abilities":[{"name":"Ponta Longa","description":"Estende alcance para 4 blocos.","cost":"N/A","type":"HB"},{"name":"Dardo de Javali","description":"Arremessa a lana perfurando linha reta.","cost":"N/A","type":"HB"},{"name":"Jump","description":"Salta e cai sobre inimigo com dano alto.","cost":"N/A","type":"HB"},{"name":"Barreira de Cabo","description":"Empurra inimigos adjacentes.","cost":"N/A","type":"HB"},{"name":"Ponta Perfurante","description":"Golpe linear que perfura alvos.","cost":"N/A","type":"HB"},{"name":"Rpido como uma Lana","description":"Converte VEL em dano quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"lutador_de_rua","name":"Lutador de Rua","type":"Avanada","role":"Ofensivo / Anti-Honra","description":"Brigo desonesto que usa fora bruta e truques sujos.","bonus_class":{"Livre":6},"requirements":["2 Habilidades Mestre em Monge","1 Habilidade Mestre em outra classe"],"abilities":[{"name":"Vou te Arrebentar!","description":"+20% dano contra alvo marcado.","cost":"N/A","type":"HB"},{"name":"Lariat de Msculos","description":"Golpe de brao com chance de Atordoar.","cost":"N/A","type":"HB"},{"name":"Soco na Costela","description":"Finta e golpe crtico preciso.","cost":"N/A","type":"HB"},{"name":"Rasteira Malandra","description":"Aplica Imobilizado.","cost":"N/A","type":"HB"},{"name":"Sequncia de Raiva","description":"5 ataques e entra em Fria.","cost":"N/A","type":"HB"},{"name":"Covarde","description":"Dobra VEL para fugir quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"vinking","name":"Vinking","type":"Avanada","role":"Brbaro Mstico","description":"Guerreiro ancestral guiado por troves e fria divina.","bonus_class":{"FOR":4,"CONS":2},"requirements":["3 Habilidades Mestre em Gladiador","+50 FOR","+50 CONS"],"abilities":[{"name":"Marchar de Heimdall","description":"Dobra VEL prpria e de aliados.","cost":"N/A","type":"HB"},{"name":"Trovo de Thor","description":"Raio cai a distncia.","cost":"N/A","type":"HB"},{"name":"Confronto de Tyr","description":"Dobra FOR por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Ma de Iduna","description":"Recupera 80% HP e remove status.","cost":"N/A","type":"HB"},{"name":"Por Odin!","description":"Aumenta todos atributos por 1 turno.","cost":"N/A","type":"HB"},{"name":"At Valhalla","description":"Converte CONS em FOR quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"templario","name":"Templrio","type":"Avanada","role":"Mobilidade Extrema / Linha de Frente","description":"Soldado perfeito que domina o campo com lana e velocidade.","bonus_class":{"VEL":4,"CONS":2},"requirements":["3 Habilidades Mestre em Lanceiro","+50 VEL","+50 FOR"],"abilities":[{"name":"Salto Rpido","description":"Teleporte para qualquer parte do mapa.","cost":"N/A","type":"HB"},{"name":"Avano Perfurante","description":"Avano linear perfurante.","cost":"N/A","type":"HB"},{"name":"Dardos Perfurantes","description":"5 ataques em sequncia.","cost":"N/A","type":"HB"},{"name":"Lana Flamejante","description":"Adiciona Fogo aos ataques.","cost":"N/A","type":"HB"},{"name":"Dardo do Drago","description":"Arremesso perfurante em linha reta.","cost":"N/A","type":"HB"},{"name":"Lana Giratria","description":"Evita ataques  distncia.","cost":"N/A","type":"Reao"}]},{"id":"mestre_artes_marciais","name":"Mestre das Artes Marciais","type":"Avanada","role":"Duelista / Manipulador de Ki","description":"Harmonia total entre corpo e Ki.","bonus_class":{"CONS":4,"Livre":2},"requirements":["5 Habilidades Mestre em Monge","5 Habilidades Mestre em Artista Marcial"],"abilities":[{"name":"Dana do Carvalho Vermelho","description":"Combo de 5 golpes de vento.","cost":"N/A","type":"HB"},{"name":"Palma do Drago","description":"Ondas de ar  distncia.","cost":"N/A","type":"HB"},{"name":"Teken","description":"Dobra ARM e RES por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Dana do Sabugueiro Marrom","description":"Reduz ARM do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Dana do Esprito Branco","description":"Clone dobra aes por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Intuio de Ki","description":"Imune a surpresas.","cost":"N/A","type":"Passiva"}]},{"id":"brutamontes","name":"Brutamontes","type":"Avanada","role":"Tanque Ofensivo","description":"Muralha do submundo que protege e esmaga.","bonus_class":{"CAR":4,"SOR":2},"requirements":["5 Habilidades Mestre em Lutador de Rua","100 FOR"],"abilities":[{"name":"No Vai Passar","description":"Bloqueia avano inimigo e dobra defesa.","cost":"N/A","type":"HB"},{"name":"Lariat Duplo","description":"Arrasta inimigos adjacentes.","cost":"N/A","type":"HB"},{"name":"Emboscada","description":"Recupera HP e contra-ataca quem aproximar.","cost":"N/A","type":"HB"},{"name":"Pose do Brutamontes","description":"Salto esmagador com onda de choque.","cost":"N/A","type":"HB"},{"name":"Manda-Chuva","description":"Buffa aliados e debuffa inimigos em rea.","cost":"N/A","type":"HB"},{"name":"Fraco Demais","description":"Nega dano menor que sua FOR.","cost":"N/A","type":"Passiva"}]},{"id":"cavaleiro_dragao","name":"Cavaleiro Drago","type":"Avanada","role":"Caador de Drages / Ofensivo Elemental","description":"Guerreiros que usam poderes de drago.","bonus_class":{"CONS":5,"BonusDanoDragao":"20%"},"requirements":["Eliminar um Drago"],"abilities":[{"name":"Bafo do Drago Vermelho","description":"Fogo em rea triangular.","cost":"N/A","type":"HB"},{"name":"Garras do Drago Ciano","description":"Golpe de gelo com avano.","cost":"N/A","type":"HB"},{"name":"Salto do Drago Amarelo","description":"Salto eltrico (1 turno no ar).","cost":"N/A","type":"HB"},{"name":"Beno do Drago Azul","description":"Cura 50% HP.","cost":"N/A","type":"HB"},{"name":"Energia do Drago Branco","description":"Raio de luz linear.","cost":"N/A","type":"HB"},{"name":"Aura de Drago","description":"Monstros fracos sentem medo.","cost":"N/A","type":"Passiva"}]},{"id":"dragonslayer","name":"Dragonslayer","type":"Avanada","role":"Anti-Drago / Executador","description":"Arma final contra drages, capaz de subjugar feras colossais.","bonus_class":{"FOR":6,"BonusDanoDragao":"60%"},"requirements":["5 Habilidades Mestre em Cavaleiro Drago"],"abilities":[{"name":"Sopro do Drago Esmeralda","description":"Nuvem txica em rea.","cost":"N/A","type":"HB"},{"name":"Rasante do Drago Prateado","description":"Rasante de vento linear mapa todo.","cost":"N/A","type":"HB"},{"name":"Escamas do Drago Ouro","description":"Dobra ARM e RES.","cost":"N/A","type":"HB"},{"name":"Tremor do Drago de Bronze","description":"Estacas de pedra e tremor.","cost":"N/A","type":"HB"},{"name":"Ameaa do Drago Negro","description":"Miasma negra aplica Condenao.","cost":"N/A","type":"HB"},{"name":"Escamas Elementais","description":"Absorve dano elemental convertendo em CONS.","cost":"N/A","type":"Passiva"}]},{"id":"xama","name":"Xam","type":"Avanada","role":"Debuff / Manipulador de Caos","description":"Lida com foras ocultas e ancestrais dos pntanos.","bonus_class":{"MANA":3,"CONS":2},"requirements":["2 Habilidades Mestre em Curandeiro","+30 MANA"],"abilities":[{"name":"Xabala Cegaris","description":"Cega alvo por 5 turnos.","cost":"15 MP","type":"Magia"},{"name":"Ziriki Sileci","description":"Silencia alvo por 5 turnos.","cost":"15 MP","type":"Magia"},{"name":"Urucubaca","description":"Aplica Envenenamento.","cost":"20 MP","type":"Magia"},{"name":"Ianhamaj","description":"Imobiliza alvo por 5 turnos.","cost":"20 MP","type":"Magia"},{"name":"Zakarinhad","description":"Aplica Condenao.","cost":"30 MP","type":"Magia"},{"name":"Oshala","description":"Imune a status negativos.","cost":"N/A","type":"Passiva"}]},{"id":"monge_do_pantano","name":"Monge do Pntano","type":"Avanada","role":"Lutador de Terreno / Porradeiro","description":"Canaliza a densidade do pntano em golpes pesados.","bonus_class":{"CONS":3,"FOR":2},"requirements":["1 Habilidade Mestre em Curandeiro","1 Habilidade Mestre em Escudeiro","+20 FOR"],"abilities":[{"name":"Soco do Pntano","description":"Golpe aqutico carregado.","cost":"N/A","type":"HB"},{"name":"Barrigada","description":"Esmaga e empurra.","cost":"N/A","type":"HB"},{"name":"Vu do Pntano","description":"Dobra RES por 3 turnos.","cost":"N/A","type":"HB"},{"name":"Abrao do Pntano","description":"Agarro esmagador.","cost":"N/A","type":"HB"},{"name":"Boxe do Pntano","description":"3 golpes consecutivos pantanosos.","cost":"N/A","type":"HB"},{"name":"gua Est Comigo","description":"Dobra dano em terreno de gua.","cost":"N/A","type":"Passiva"}]},{"id":"glutao","name":"Gluto","type":"Avanada","role":"Tank / Absorvedor de Dano","description":"Foras da natureza famintas e indestrutveis.","bonus_class":{"CONS":5},"requirements":["1 Habilidade Mestre em Curandeiro","1 Habilidade Mestre em Escudeiro","+20 CONS"],"abilities":[{"name":"Investida do Sapo","description":"Atropela em linha reta.","cost":"N/A","type":"HB"},{"name":"Descanso do Sapo","description":"Cura e dobra defesa (imvel).","cost":"N/A","type":"HB"},{"name":"Arroto do Sapo","description":"Dano de impacto sonoro.","cost":"N/A","type":"HB"},{"name":"Pulo do Sapo","description":"Esmaga alvo com peso.","cost":"N/A","type":"HB"},{"name":"Vou Te Comer","description":"Devora inimigo com 25% HP ou menos.","cost":"N/A","type":"HB"},{"name":"Boca Sempre Mexendo","description":"Recupera 10% HP se no agir.","cost":"N/A","type":"Passiva"}]},{"id":"protetor","name":"Protetor","type":"Avanada","role":"Tank / Guardio de Campo","description":"Muralhas vivas dedicadas a proteger aliados.","bonus_class":{"CONS":5},"requirements":["2 Habilidades Mestre em Escudeiro","+30 CONS"],"abilities":[{"name":"Eu Tanko, Voc Mata","description":"Absorve 80% do dano de aliado e buffa FOR dele.","cost":"N/A","type":"HB"},{"name":"Investida do Escudo","description":"Corre com escudo e atordoa.","cost":"N/A","type":"HB"},{"name":"Reflexo do Escudo","description":"Escudo ricocheteia em inimigos.","cost":"N/A","type":"HB"},{"name":"Sapo Protetor","description":"Compartilha defesa com aliados ao redor.","cost":"N/A","type":"HB"},{"name":"Escudo de Proteo Areo","description":"Anula prximo dano em aliado.","cost":"N/A","type":"HB"},{"name":"Socorros Rpidos","description":"Salta para tomar golpe por aliado.","cost":"N/A","type":"Reao"}]},{"id":"pai_do_pantano","name":"Pai do Pntano","type":"Avanada","role":"Mago de Terreno / Controle","description":"Tornou-se um com o pntano, controlando razes e mars.","bonus_class":{"MANA":6},"requirements":["5 Habilidades Mestre em Xam","5 Habilidades Mestre em Curandeiro"],"abilities":[{"name":"Razes do Sabugueiro de Ihoa","description":"Imobiliza inimigos em rea.","cost":"50 MP","type":"Magia"},{"name":"Pico dos Pinheiros","description":"Pinheiros empalam inimigos.","cost":"50 MP","type":"Magia"},{"name":"Gota de Orvalho","description":"Cura 100% HP e remove status (rea).","cost":"50 MP","type":"Magia"},{"name":"Primavera Serena","description":"Dobra INT e RES de aliados.","cost":"40 MP","type":"Magia"},{"name":"Mar do Mangue","description":"Empurra inimigos, remove buffs e cura aliados (global).","cost":"100 MP","type":"Magia"},{"name":"Floresta Viva","description":"Razes prendem inimigos engajados.","cost":"N/A","type":"Passiva"}]},{"id":"sabio_do_pantano","name":"Sbio do Pntano","type":"Avanada","role":"Controle de gua / Contra-Golpe","description":"Domina a energia viva do pntano com constituio colossal.","bonus_class":{"CONS":6},"requirements":["5 Habilidades Mestre em Monge do Pntano","+100 CONS"],"abilities":[{"name":"Punho do Pntano","description":"Ataques ganham elemento gua.","cost":"N/A","type":"Passiva"},{"name":"Serpente do Pntano","description":"Ataque linear de gua.","cost":"N/A","type":"HB"},{"name":"AquaReflete","description":"Esfera de gua empurra alvo.","cost":"N/A","type":"HB"},{"name":"Pantanogan","description":"Esfera de gua empurra alvo.","cost":"N/A","type":"HB"},{"name":"Bola de Canho","description":"Projtil vivo de dano massivo.","cost":"N/A","type":"HB"},{"name":"Contra-Corpo","description":"Contra-ataca fsico e empurra.","cost":"N/A","type":"Reao"}]},{"id":"burgues_do_pantano","name":"Burgus do Pntano","type":"Avanada","role":"Tanque / Controle","description":"Suprema ganncia, usa corpo colossal e autoridade.","bonus_class":{"CONS":6},"requirements":["5 Habilidades Mestre em Gluto","+100 CONS"],"abilities":[{"name":"Imposto do Pntano","description":"Rouba 20% HP do alvo e remove buff.","cost":"N/A","type":"HB"},{"name":"Barriga Monrquica","description":"Dobra defesa e bloqueia passagem.","cost":"N/A","type":"HB"},{"name":"Banquete Exclusivo","description":"Cura 100% HP e ganha Fria.","cost":"N/A","type":"HB"},{"name":"Tesouro do Pntano","description":"Exploso de cofre.","cost":"N/A","type":"HB"},{"name":"Decreto de Propriedade","description":"Debuffa inimigos e buffa aliados em rea.","cost":"N/A","type":"HB"},{"name":"Soberania do Pntano","description":"Cura ao aproximar inimigo e aplica Lentido.","cost":"N/A","type":"Passiva"}]},{"id":"guardiao_do_pantano","name":"Guardio do Pntano","type":"Avanada","role":"Tanque / Suporte Supremo","description":"Monlito vivo que ergue muralhas de escudos.","bonus_class":{"CONS":10},"requirements":["5 Habilidades Mestre em Escudeiro","5 Habilidades Mestre em Protetor"],"abilities":[{"name":"Priso de Escudo","description":"Prende alvo em 4 escudos.","cost":"N/A","type":"HB"},{"name":"Dobro de Escudo","description":"Dobra qualquer escudo em jogo.","cost":"N/A","type":"HB"},{"name":"Grande Escudo","description":"Protege rea enorme atrs dele.","cost":"N/A","type":"HB"},{"name":"Escudo Revitalizador","description":"Cura 100% HP rea.","cost":"N/A","type":"HB"},{"name":"Proteo em Grande Escala","description":"Anula prximo dano em TODOS aliados.","cost":"N/A","type":"HB"},{"name":"Proteo Mgica","description":"Usa habilidade de proteo em aliado alvejado.","cost":"N/A","type":"Reao"}]},{"id":"cantor_das_mares","name":"Cantor das Mars","type":"Avanada","role":"Suporte / Buffer Musical","description":"Bardos que usam melodias espirituais.","bonus_class":{"CAR":5},"requirements":["+50 CAR"],"abilities":[{"name":"Cantar","description":"Executa msica do repertrio (efeitos variados).","cost":"N/A","type":"HB"},{"name":"Palco Improvisado","description":"Dobro de efeito se estiver em terreno elevado.","cost":"N/A","type":"Passiva"}]},{"id":"astro_do_pantano","name":"Astro do Pntano","type":"Avanada","role":"Suporte Musical / Manipulador de Moral","description":"cone musical que move multides.","bonus_class":{"CAR":10},"requirements":["Ttulo musical com Cantor das Mars"],"abilities":[{"name":"Mashup","description":"Combina duas msicas simultneas.","cost":"N/A","type":"HB"},{"name":"Charme Musical","description":"Enfeitia atacante.","cost":"N/A","type":"Reao"}]},{"id":"sutileira","name":"Sutileira","type":"Avanada","role":"Roubo de Elite / Suporte Social","description":"Ladras de alta classe, elegantes e imperceptveis.","bonus_class":{"CAR":3,"SOR":2},"requirements":["2 Habilidades Mestre em Ladra","+20 SOR"],"abilities":[{"name":"Roubar Arma Principal","description":"Furta a arma equipada do alvo.","cost":"N/A","type":"HB"},{"name":"Roubar Acessrios","description":"Furta anis/colares.","cost":"N/A","type":"HB"},{"name":"Roubar Item de Luxo","description":"Furta item mais raro.","cost":"N/A","type":"HB"},{"name":"Detectar Armadilhas","description":"Percebe armadilhas em raio de 5 blocos.","cost":"N/A","type":"HB"},{"name":"Famme Fatale","description":"Encanta alvo e pode aplicar Condenao.","cost":"N/A","type":"HB"},{"name":"Mestre dos Assaltos","description":"No ativa armadilhas.","cost":"N/A","type":"Passiva"}]},{"id":"rastreadora_avancada","name":"Rastreadora (Avanada)","type":"Avanada","role":"Dano / Furtividade / Controle","description":"Felinas letais que unem furtividade com caa predatria.","bonus_class":{"SOR":3,"VEL":2},"requirements":["2 Habilidades Mestre em Espreitadora","+20 VEL"],"abilities":[{"name":"Cheiro do Medo","description":"Dobra MOV na direo do alvo.","cost":"N/A","type":"HB"},{"name":"Detectar Fraqueza","description":"Prximo ataque soma SOR ao dano.","cost":"N/A","type":"HB"},{"name":"Colocar Armadilhas","description":"Instala armadilha no campo.","cost":"N/A","type":"HB"},{"name":"Salto da Morte","description":"Ataque de cima com bnus de SOR.","cost":"N/A","type":"HB"},{"name":"Morte em Sequncia","description":"Golpe linear em todos no trajeto.","cost":"N/A","type":"HB"},{"name":"Contra Ataque","description":"Contra-ataca fsico adjacente.","cost":"N/A","type":"Reao"}]},{"id":"kunoichi","name":"Kunoichi","type":"Avanada","role":"Ninjutsu / Controle Elemental","description":"Assassinas discretas que usam iluses e ninjutsu.","bonus_class":{"INT":3,"SOR":2},"requirements":["2 Habilidades Mestre em Ladra","2 Habilidades Mestre em Espreitadora"],"abilities":[{"name":"Arremesso de Kunai","description":"Kunai amplificada com INT.","cost":"N/A","type":"HB"},{"name":"Bomba de Fumaa","description":"Fica camuflada instantaneamente.","cost":"N/A","type":"HB"},{"name":"Genjutsu","description":"Iluso causa Confuso.","cost":"25 MP","type":"Magia"},{"name":"Suiton","description":"Vrtice de gua (INT+gua).","cost":"30 MP","type":"Magia"},{"name":"Doton","description":"Pilar de terra (INT+Terra).","cost":"30 MP","type":"Magia"},{"name":"Clone das Sombras","description":"Clone repete ninjutsu.","cost":"N/A","type":"Passiva"}]},{"id":"chefona","name":"Chefona","type":"Avanada","role":"DPS / Suporte Criminoso","description":"Mandachuva do crime que usa pistolas e capangas.","bonus_class":{"SOR":6},"requirements":["5 Habilidades Mestre em Ladra","5 Habilidades Mestre em Sutileira","+100 SOR"],"abilities":[{"name":"Paredo","description":"Saraivada de balas em alvo.","cost":"N/A","type":"HB"},{"name":"Tiroteio","description":"Tiros em rea ao redor.","cost":"N/A","type":"HB"},{"name":"Estragar o Velrio","description":"Tiro na cabea (morte instantnea) se camuflada.","cost":"N/A","type":"HB"},{"name":"Bora Rapaziada","description":"Buffa MOV e VEL de aliados.","cost":"N/A","type":"HB"},{"name":"Meus Capangas","description":"Invoca 2 capangas.","cost":"N/A","type":"HB"},{"name":"Dois Ferros","description":"Pode usar duas armas de fogo.","cost":"N/A","type":"Passiva"}]},{"id":"assassina","name":"Assassina","type":"Avanada","role":"Eliminadora de Alvos","description":"Lenda das sombras, elimina alvos silenciosamente.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Espreitadora","5 Habilidades Mestre em Rastreadora","+100 SOR"],"abilities":[{"name":"Lmina de Veneno","description":"Ataques causam Envenenamento.","cost":"N/A","type":"HB"},{"name":"Sombras Caminhantes","description":"Teleporte via sombras.","cost":"N/A","type":"HB"},{"name":"Tendes Frgeis","description":"Aplica Imobilizado.","cost":"N/A","type":"HB"},{"name":"Instinto Assassino","description":"Causa Medo em alvos com <20% HP.","cost":"N/A","type":"Passiva"},{"name":"Frenesi das Sombras","description":"Fria de sombra, dobra VEL.","cost":"N/A","type":"HB"},{"name":"Minha Garrucha","description":"Finaliza alvo com <15% HP.","cost":"N/A","type":"Reao"}]},{"id":"jounin","name":"Jounin","type":"Avanada","role":"Mestre Elemental / Ttico","description":"Elite ninja que domina ninjutsu avanado.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Kunoichi","+100 INT"],"abilities":[{"name":"Futon","description":"5 lminas de ar em alvos diversos.","cost":"50 MP","type":"Magia"},{"name":"Raiton","description":"5 troves em alvos diversos.","cost":"50 MP","type":"Magia"},{"name":"Katon","description":"Esfera de fogo linear larga.","cost":"50 MP","type":"Magia"},{"name":"Embuir Arma","description":"Infunde arma com elemento.","cost":"30 MP","type":"Magia"},{"name":"Invocao","description":"Invoca animal ninja (D20).","cost":"N/A","type":"HB"},{"name":"Substituio","description":"Troca com tronco ao ser alvejada.","cost":"N/A","type":"Reao"}]},{"id":"dancarina","name":"Danarina","type":"Avanada","role":"Performer Mstica","description":"Transforma o campo em palco com performances mgicas.","bonus_class":{"CAR":5},"requirements":["+50 CAR"],"abilities":[{"name":"Danar","description":"Executa performance ligada ao equipamento.","cost":"N/A","type":"HB"},{"name":"Pirueta Defensiva","description":"Chance de esquivar de ataque fsico.","cost":"N/A","type":"Reao"}]},{"id":"odalisca_de_batalha","name":"Odalisca de Batalha","type":"Avanada","role":"Suporte Supremo / DPS Elegante","description":"Danarina de elite com armas exticas e danas agressivas.","bonus_class":{"CAR":10},"requirements":["4 Performances de Danarina"],"abilities":[{"name":"Swicth","description":"Troca equipamento de dana sem gastar ao.","cost":"N/A","type":"HB"},{"name":"Mestre da Dana","description":"Equipa dois instrumentos simultneos.","cost":"N/A","type":"Passiva"}]},{"id":"cavaleira_alada","name":"Cavaleira Alada","type":"Avanada","role":"Duelista Area","description":"Elite militar do cu, mergulha com velocidade devastadora.","bonus_class":{"FOR":3,"VEL":2},"requirements":["3 Habilidades Mestre em Raptora","+30 FOR"],"abilities":[{"name":"Por Glria","description":"Buffa FOR de aliados.","cost":"N/A","type":"HB"},{"name":"Redemoinho de Lmina","description":"Corte circular de vento.","cost":"N/A","type":"HB"},{"name":"Brisa da Guerra","description":"Ataques ganham lmina de vento extra.","cost":"N/A","type":"HB"},{"name":"Slash de Vento","description":"Lmina de ar  distncia.","cost":"N/A","type":"HB"},{"name":"Suplex Aero","description":"Agarra e arremessa inimigo do cu.","cost":"N/A","type":"HB"},{"name":"Escudo Meu","description":"Pode usar escudos.","cost":"N/A","type":"Passiva"}]},{"id":"cacadora_alada","name":"Caadora Alada","type":"Avanada","role":"DPS / Rastreio","description":"Predadora do cu com viso aguada e arco.","bonus_class":{"VEL":3,"SOR":2},"requirements":["3 Habilidades Mestre em Ranged","+30 VEL"],"abilities":[{"name":"Animal Guia","description":"Invoca esprito animal companheiro.","cost":"N/A","type":"HB"},{"name":"Camuflagem","description":"Entra em camuflagem.","cost":"N/A","type":"HB"},{"name":"Saraivada Area","description":"Chuva de flechas em rea.","cost":"N/A","type":"HB"},{"name":"Colocar Armadilhas","description":"Posiciona armadilha.","cost":"N/A","type":"HB"},{"name":"Tiro Avanado","description":"Flecha colossal linear (Arco Grande).","cost":"N/A","type":"HB"},{"name":"Tiro Duplo","description":"Dispara duas flechas por ataque.","cost":"N/A","type":"Passiva"}]},{"id":"terrana","name":"Terrana","type":"Avanada","role":"Lutadora Arcana / Terra","description":"Devotada  fora bruta da terra, usa martelos e magia.","bonus_class":{"INT":3,"MANA":2},"requirements":["1 Habilidade Mestre em Raptora","1 Habilidade Mestre em Ranged","+30 INT"],"abilities":[{"name":"Me Terra","description":"Cura em rea ao bater martelo.","cost":"20 MP","type":"Magia"},{"name":"Fissura Terrana","description":"Cria fissura no solo.","cost":"30 MP","type":"Magia"},{"name":"A Terra Sobre Mim","description":"Armadura de rocha (dobra AMR/RES).","cost":"20 MP","type":"Magia"},{"name":"Pilar do Martelo","description":"Ataque  distncia com pilar.","cost":"40 MP","type":"Magia"},{"name":"Terremoto Aero","description":"Impacto ssmico ao saltar.","cost":"50 MP","type":"Magia"},{"name":"Vibrao do Solo","description":"Detecta inimigos no solo.","cost":"N/A","type":"Passiva"}]},{"id":"devastadora","name":"Devastadora","type":"Avanada","role":"Dano Areo / Linha de Frente","description":"Especialista em combate areo com espades colossais.","bonus_class":{"FOR":4,"VEL":2},"requirements":["5 Habilidades Mestre em Raptora","5 Habilidades Mestre em Cavaleira Alada","+100 FOR"],"abilities":[{"name":"Ventania do Espado","description":"Empurra alvos com vento.","cost":"N/A","type":"HB"},{"name":"Arrasante Cortante","description":"Corte em alta velocidade.","cost":"N/A","type":"HB"},{"name":"Furaco de Lminas","description":"Tornado de lminas em rea.","cost":"N/A","type":"HB"},{"name":"Rpida e Veloz","description":"Dobra VEL.","cost":"N/A","type":"HB"},{"name":"Corte da Montanha","description":"Corte colossal de vento.","cost":"N/A","type":"HB"},{"name":"Contra-ataque do Vento","description":"Rebate fsico e empurra.","cost":"N/A","type":"Reao"}]},{"id":"atiradora_dos_ceus","name":"Atiradora dos Cus","type":"Avanada","role":"DPS Area","description":"Caadora suprema que domina territrios do ar.","bonus_class":{"VEL":4,"SOR":2},"requirements":["5 Habilidades Mestre em Ranged","5 Habilidades Mestre em Caadora Alada","+100 VEL"],"abilities":[{"name":"Ataque Areo","description":"Disparo vertical preciso.","cost":"N/A","type":"HB"},{"name":"Reposicionamento Areo","description":"Voo rpido e ataque.","cost":"N/A","type":"HB"},{"name":"Bombardeio Areo","description":"Atinge inimigos no trajeto de voo.","cost":"N/A","type":"HB"},{"name":"Alvo Marcado","description":"Marca alvo adicionando SOR ao dano.","cost":"N/A","type":"HB"},{"name":"Alvos Certeiros","description":"Tiros perfeitos em 5 alvos.","cost":"N/A","type":"HB"},{"name":"Minha Flecha  Melhor","description":"Desvia de projtil e contra-ataca.","cost":"N/A","type":"Reao"}]},{"id":"geomancer","name":"Geomancer","type":"Avanada","role":"Maga Elemental / Joias","description":"Maga que desperta poder oculto de joias antigas.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Terrana","+100 INT"],"abilities":[{"name":"Ressonncia","description":"Disparo elemental da joia.","cost":"30 MP","type":"Magia"},{"name":"Jia Equipada","description":"Engata joia na arma (dano elemental).","cost":"N/A","type":"HB"},{"name":"Joia Astral","description":"Buff poderoso da joia.","cost":"30 MP","type":"Magia"},{"name":"Sacrifcio da Jia","description":"Destri joia para duplicar efeito.","cost":"40 MP","type":"Magia"},{"name":"Triplo Gen","description":"Feixe combinado de 3 joias.","cost":"70 MP","type":"Magia"},{"name":"Joalheira","description":"Troca de joias sem gastar ao.","cost":"N/A","type":"Passiva"}]},{"id":"demon","name":"Demon","type":"Avanada","role":"Ameaa / Controle","description":"Guerreiras marcadas pela morte, brutais e imprevisveis.","bonus_class":{"Livre":5},"requirements":["Voltar da morte 10 vezes"],"abilities":[{"name":"Rugido do Demnio","description":"Aplica Medo em rea.","cost":"N/A","type":"HB"},{"name":"Vampirismo","description":"Rouba HP do alvo.","cost":"N/A","type":"HB"},{"name":"Consumir Arma","description":"Destri arma para ganhar status.","cost":"N/A","type":"HB"},{"name":"Embuir Demon","description":"Infunde arma com escurido.","cost":"N/A","type":"HB"},{"name":"Demon Ark","description":"Aplica Medo/Condenao/Morte.","cost":"N/A","type":"HB"},{"name":"Mestre de Armas","description":"Equipa arma instantaneamente.","cost":"N/A","type":"Passiva"}]},{"id":"lord_demon","name":"Lord Demon","type":"Avanada","role":"Senhora da Morte","description":"pice da linhagem demonaca, comanda almas.","bonus_class":{"Livre":10},"requirements":["5 Habilidades Mestre em Demon","Colher 100 almas"],"abilities":[{"name":"Dark Esfera","description":"Absorve alma de inimigos com Medo.","cost":"N/A","type":"HB"},{"name":"Colheita","description":"Suga alma de alvo com Medo (Morte).","cost":"N/A","type":"HB"},{"name":"Aura da Lord","description":"Dobra RES e fora Medo.","cost":"N/A","type":"HB"},{"name":"Dark Arma","description":"Lana armas sacrificadas.","cost":"N/A","type":"HB"},{"name":"ltimo Rugido","description":"Medo global e morte em quem j tem.","cost":"N/A","type":"HB"},{"name":"Tenha Medo de Mim","description":"Chance de aplicar Medo ao receber dano.","cost":"N/A","type":"Reao"}]},{"id":"magos_elementais","name":"Magos Elementais","type":"Avanada","role":"DPS Mgico de rea","description":"Umbros que transformam magia em cataclismos.","bonus_class":{"INT":3,"MANA":2},"requirements":["3 Habilidades Mestre em Mago Negro","+30 INT"],"abilities":[{"name":"Fire+","description":"Exploso de fogo grande rea.","cost":"20 MP","type":"Magia"},{"name":"Blizzard+","description":"Estilhaos de gelo grande rea.","cost":"20 MP","type":"Magia"},{"name":"Thunder+","description":"Trovo colossal em rea.","cost":"20 MP","type":"Magia"},{"name":"Maremoto","description":"Onda empurra inimigos.","cost":"40 MP","type":"Magia"},{"name":"Trifsico","description":"Combina 3 elementos em exploso.","cost":"50 MP","type":"Magia"},{"name":"Manto Refletor","description":"Reflete magia com 50% dano.","cost":"N/A","type":"Reao"}]},{"id":"arcanistas","name":"Arcanistas","type":"Avanada","role":"Maldies / Invocador","description":"Preservam artes proibidas e invocam demnios.","bonus_class":{"MANA":3,"INT":2},"requirements":["3 Habilidades Mestre em Ocultista","+50 MANA"],"abilities":[{"name":"Escurido+","description":"Exploso de trevas.","cost":"25 MP","type":"Magia"},{"name":"Cruz Mana","description":"Drena Mana.","cost":"30 MP","type":"Magia"},{"name":"Sentidus Mortis","description":"Remove sentidos (Silncio/Cegueira).","cost":"40 MP","type":"Magia"},{"name":"Petrificatis","description":"Petrifica alvo.","cost":"40 MP","type":"Magia"},{"name":"Invocar Demnio Menor","description":"Invoca demnio (D20).","cost":"50 MP","type":"Magia"},{"name":"Pacto","description":"Dobra VEL e RES com demnio ativo.","cost":"N/A","type":"Passiva"}]},{"id":"malandro","name":"Malandro","type":"Avanada","role":"Suporte Social / Manipulao","description":"Usa lbia e cartas para manipular o campo.","bonus_class":{"CAR":3,"SOR":2},"requirements":["+20 CAR"],"abilities":[{"name":"Fala Positiva","description":"Dobra atributo de alvo.","cost":"N/A","type":"HB"},{"name":"Fala Negativa","description":"Reduz atributo pela metade.","cost":"N/A","type":"HB"},{"name":"Carta Voadora","description":"Carta ricocheteia em alvos.","cost":"N/A","type":"HB"},{"name":"Carta Marcada","description":"Dobra dano recebido pelo alvo.","cost":"N/A","type":"HB"},{"name":"Malabarismo de Cartas","description":"Impede movimentos em rea.","cost":"N/A","type":"HB"},{"name":"Fala Mansa","description":"Chance de convencer atacante a desistir.","cost":"N/A","type":"Reao"}]},{"id":"arquimagos","name":"Arquimagos","type":"Avanada","role":"DPS Mgico Supremo","description":"Moldam elementos, invocando meteoros e tempestades.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Mago Negro","5 Habilidades Mestre em Mago Elemental","+100 INT"],"abilities":[{"name":"Meteoro","description":"Destruio massiva em rea.","cost":"100 MP","type":"Magia"},{"name":"Vrtex de Fogo","description":"Vrtex que queima rea por turnos.","cost":"50 MP","type":"Magia"},{"name":"Chuva de Raios","description":"Atinge inimigos aleatrios por turnos.","cost":"50 MP","type":"Magia"},{"name":"Nevasca Afiada","description":"Estalactites aleatrias por turnos.","cost":"50 MP","type":"Magia"},{"name":"Super Lua","description":"Lua cura aliados e permanece.","cost":"80 MP","type":"Magia"},{"name":"OVER LUNA","description":"Ignora RES sob efeito da Lua.","cost":"N/A","type":"Passiva"}]},{"id":"necromago","name":"Necromago","type":"Avanada","role":"Controle Absoluto / Necromancia","description":"Traz mortos e usa rituais profanos.","bonus_class":{"MANA":10},"requirements":["5 Habilidades Mestre em Ocultista","5 Habilidades Mestre em Arcanista","+100 INT"],"abilities":[{"name":"Necromancia","description":"Controla alma cada.","cost":"70 MP","type":"Magia"},{"name":"Mortis Dorner","description":"Tenta Morte Instantnea.","cost":"40 MP","type":"Magia"},{"name":"Redoma Sentis","description":"Cega e Silencia rea ao redor.","cost":"50 MP","type":"Magia"},{"name":"Invocar Demnio Superior","description":"Invoca demnio brutal (D20).","cost":"90 MP","type":"Magia"},{"name":"Buraco Negro","description":"Remove todos do campo.","cost":"200 MP","type":"Magia"},{"name":"Toque da Morte","description":"Chance de Condenao ao ser atacado.","cost":"N/A","type":"Reao"}]},{"id":"king_street","name":"King Street","type":"Avanada","role":"Controle Mental / Dominao Social","description":"Rei das ruas que controla vontades com a voz.","bonus_class":{"CAR":10},"requirements":["5 Habilidades Mestre em Malandro","+100 CAR"],"abilities":[{"name":"Corra!","description":"Impulsiona mobilidade de alvo.","cost":"N/A","type":"HB"},{"name":"Beleza Sedutora","description":"Encanta alvos em rea.","cost":"N/A","type":"HB"},{"name":"Ajoelhe-se","description":"Obriga inimigos a se ajoelharem.","cost":"N/A","type":"HB"},{"name":" Sua Vez de Novo","description":"Concede ao extra a aliado.","cost":"N/A","type":"HB"},{"name":"Charme do Malandro","description":"Transforma inimigo em aliado.","cost":"N/A","type":"HB"},{"name":"Estrondo Vocal","description":"Atinge todos atributos do alvo.","cost":"N/A","type":"Passiva"}]},{"id":"apostador","name":"Apostador","type":"Avanada","role":"Manipulador de Probabilidades","description":"Usa baralho especial para efeitos aleatrios poderosos.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Malandro","+100 SOR"],"abilities":[{"name":"Escolha uma Carta","description":"Puxa carta (D80) com efeito contnuo.","cost":"N/A","type":"HB"},{"name":"Valete Rpido","description":"Dobra status fsicos (Carta Valete).","cost":"N/A","type":"HB"},{"name":"Dama Salvadora","description":"Cura e remove status (Carta Dama).","cost":"N/A","type":"HB"},{"name":"Rei do Poder","description":"Exploso em rea (Carta Rei).","cost":"N/A","type":"HB"},{"name":"s da Sorte","description":"Puxa todas cartas (Carta s).","cost":"N/A","type":"HB"},{"name":"Carta na Manga","description":"Troca carta guardada instantaneamente.","cost":"N/A","type":"Passiva"}]},{"id":"shadow_hunters","name":"Shadow Hunters","type":"Avanada","role":"Invocador Sombrio","description":"Extrai sombras de mortos para lutar.","bonus_class":{"Livre":10},"requirements":["Chegar a 1 HP em batalha 100 vezes"],"abilities":[{"name":"Erga-se","description":"Extrai sombra de cadver como soldado.","cost":"N/A","type":"HB"},{"name":"Sombra Salvadora","description":"Sombra absorve dano fatal.","cost":"N/A","type":"Reao"}]},{"id":"monarca_das_sombras","name":"Monarca das Sombras","type":"Avanada","role":"Exrcito Vivo","description":"Comanda exrcito sombrio sozinho.","bonus_class":{"Livre":10},"requirements":["Possuir 4 sombras no nvel 10"],"abilities":[{"name":"Troca de Sombra","description":"Troca de lugar com sombra.","cost":"N/A","type":"HB"},{"name":"Retorno das Sombras","description":"Cura ao perder sombra.","cost":"N/A","type":"Passiva"}]}]`),M5={classes:D5},P5=()=>{const i=Ji(),e=w.useRef(null),[n,s]=w.useState("carousel"),[o,u]=w.useState(0),[f,m]=w.useState(null),[g,b]=w.useState("female"),[v,E]=w.useState(null),[T,M]=w.useState(!1),[B,L]=w.useState(""),[O,Q]=w.useState(!1),G=O5.races;w.useEffect(()=>{Ut&&(Ut.pause(),Ut.currentTime=0)},[]),w.useEffect(()=>{(async()=>{if(Ot.currentUser)try{const R=Pe(_e,"characters",Ot.currentUser.uid);(await kd(R)).exists()&&(console.log("Personagem j existe. Redirecionando..."),i("/jogador-vtt"))}catch(R){console.error("Erro ao verificar personagem:",R)}})()},[i]),w.useEffect(()=>{document.querySelectorAll("audio, video").forEach(S=>{if(!(S.tagName==="VIDEO"&&S.classList.contains("background-video")))try{S.pause(),S.currentTime=0}catch{}})},[]),w.useEffect(()=>{if(n==="carousel"&&e.current){const R=window.innerWidth/2-130,S=o*300-R+130;e.current.scrollTo({left:S,behavior:"smooth"})}},[o,n]);const W=j=>{e.current&&(e.current.scrollLeft+=j.deltaY*4)},le=j=>{if(!j)return"Nenhum";const R={value:"Valor",detail:"Detalhes",details:"Detalhes",free_points:"Pontos Livres",female:"Feminino",male:"Masculino",male_exiled:"Masculino (Exilado)"};return typeof j=="object"?Object.entries(j).map(([S,Te],ne)=>{if(S==="type")return null;const F=R[S]||S.toUpperCase().replace(/_/g," ");let re=Te;return typeof Te=="object"&&(re=JSON.stringify(Te).replace(/["{}]/g,"").replace(/:/g,": ").replace(/,/g,", ")),c.jsxs("div",{className:"mb-1",children:[c.jsxs("span",{className:"text-gray-400 font-bold",children:[F,":"]})," ",c.jsx("span",{className:"text-gray-200",children:re})]},ne)}):j},he=()=>f?typeof f.base_classes=="object"&&!Array.isArray(f.base_classes)?f.id==="viera"?g==="female"?f.base_classes.female:f.base_classes.male||f.base_classes.male_exiled:[]:f.base_classes||[]:[],pe=j=>M5.classes.find(R=>R.name===j),I=()=>{m(G[o]),E(null),s("details")},C=()=>{s("carousel"),E(null)},k=async()=>{if(!(!B.trim()||!Ot.currentUser||O)){Q(!0);try{const j={basic_info:{character_name:B,race:f.name,level:1,experience:{current:0,max:100},guild_insignia:"",special_image:"",guild_rank_image:""},attributes:{FOR:{value:10},INT:{value:10},SOR:{value:10},CAR:{value:10},VEL:{value:10},CONS:{value:10}},status:{hp:{current:20,max:20},mp:{current:10,max:10},arm:{value:0},res:{value:0},mov:{value:3}},inventory:{gil:500,items:[]},equipment:{slots:[{},{},{},{},{},{},{}]},job_system:{primary_class:{name:v,skills:[]},secondary_class:{name:"Nenhuma",skills:[]},reaction_ability:{name:""},passive_ability:{name:""},class_bonus:{value:""}}};await Mg(Pe(_e,"characters",Ot.currentUser.uid),{uid:Ot.currentUser.uid,email:Ot.currentUser.email,name:B,race:f.name,class:v,gender:g,createdAt:Qn(),character_sheet:j}),i("/jogador-vtt")}catch(j){console.error("Erro ao salvar personagem:",j),alert("Falha ao invocar personagem."),Q(!1)}}},P=G[o];return c.jsxs("div",{className:"relative w-full h-screen overflow-hidden",children:[c.jsx("style",{children:`
        @keyframes scaleIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        .rpg-modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0, 0, 0, 0.85); backdrop-filter: blur(8px); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .rpg-modal-box { position: relative; width: 500px; max-width: 90%; background: #1a120b; border: 2px solid #b45309; box-shadow: 0 0 50px rgba(234, 179, 8, 0.4); padding: 6px; border-radius: 8px; animation: scaleIn 0.3s ease-out forwards; }
        .rpg-modal-inner { background: linear-gradient(to bottom, #f3e6d5, #e7cba8); border: 1px solid #78350f; padding: 40px 20px; border-radius: 4px; text-align: center; display: flex; flex-direction: column; align-items: center; gap: 20px; }
        .rpg-modal-title { font-family: 'Cinzel', serif; font-size: 32px; color: #78350f; font-weight: bold; text-transform: uppercase; text-shadow: 0px 1px 0px rgba(255,255,255,0.6); margin-bottom: 5px; }
        .rpg-modal-subtitle { font-family: 'Cinzel', serif; font-size: 14px; color: #92400e; font-style: italic; border-top: 1px solid rgba(146, 64, 14, 0.3); padding-top: 10px; width: 100%; }
        .rpg-input { width: 100%; padding: 12px; background: #fff8ed; border: 2px solid #854d0e; font-family: 'Cinzel', serif; font-size: 18px; color: #451a03; outline: none; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); border-radius: 4px; }
        .rpg-input:focus { border-color: #d97706; background: #ffffff; }
        .rpg-btn-go { background: linear-gradient(to bottom, #fcd34d, #d97706); border: 1px solid #92400e; padding: 10px 30px; font-family: 'Cinzel', serif; font-weight: bold; font-size: 18px; color: #451a03; text-transform: uppercase; cursor: pointer; border-radius: 4px; box-shadow: 0 4px 0 #92400e; transition: transform 0.1s; }
        .rpg-btn-go:active { transform: translateY(4px); box-shadow: 0 0 0 #92400e; }
        .rpg-btn-go:disabled { filter: grayscale(1); opacity: 0.6; cursor: not-allowed; }
        .rpg-close-btn { position: absolute; top: 10px; right: 15px; background: none; border: none; font-size: 20px; color: #92400e; cursor: pointer; font-weight: bold; }
        .rpg-close-btn:hover { color: #ff0000; }
        .corner { position: absolute; width: 20px; height: 20px; border-color: #fcd34d; border-style: solid; }
        .tl { top: -2px; left: -2px; border-width: 3px 0 0 3px; }
        .tr { top: -2px; right: -2px; border-width: 3px 3px 0 0; }
        .bl { bottom: -2px; left: -2px; border-width: 0 0 3px 3px; }
        .br { bottom: -2px; right: -2px; border-width: 0 3px 3px 0; }
      `}),c.jsxs("div",{className:"ether-container",children:[c.jsx("div",{className:"ether-vortex"}),c.jsx("div",{className:"ether-particles"})]}),c.jsxs("header",{className:"absolute top-0 w-full p-6 z-50 flex justify-between items-center bg-gradient-to-b from-black/90 to-transparent",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"rpg-title text-3xl",children:"Gnese da Alma"}),c.jsx("p",{className:"rpg-subtitle-styled mt-2",children:n==="carousel"?"Determine sua Linhagem Ancestral":`${f?.name} // Customizao`})]}),n==="details"&&c.jsxs("button",{onClick:C,className:"nav-back-btn",children:[c.jsx("span",{children:""})," Seleo"]})]}),n==="carousel"&&c.jsxs("div",{className:"w-full h-full flex flex-col justify-center animate-[fadeIn_1s]",children:[c.jsx("div",{className:"text-center mb-4 z-10",children:c.jsx("h2",{className:"rpg-title text-5xl text-yellow-500 drop-shadow-lg",children:P.name})}),c.jsx("div",{ref:e,onWheel:W,className:"carousel-viewport",children:G.map((j,R)=>c.jsxs("div",{onClick:()=>u(R),className:`race-card-frame ${R===o?"active":""}`,children:[c.jsx("img",{src:j.image,alt:j.name}),c.jsx("div",{className:"card-label",children:j.name})]},j.id))}),c.jsx("div",{className:"text-center mt-10 z-10",children:c.jsxs("button",{onClick:I,className:"confirm-btn w-64 mx-auto",children:["Escolher ",P.name]})})]}),n==="details"&&f&&c.jsxs("div",{className:"details-grid",children:[c.jsx("div",{className:"char-portrait-container",children:c.jsx("img",{src:f.image,alt:f.name,className:"char-portrait"})}),c.jsxs("div",{className:"info-scroll-area custom-scrollbar",children:[c.jsxs("div",{className:"glass-panel mt-8 border-l-4 border-yellow-600",children:[c.jsx("h3",{className:"section-header !border-none !mb-2 text-yellow-500",children:"Descrio"}),c.jsxs("p",{className:"description-text",children:['"',f.description,'"']}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] uppercase text-blue-400 font-bold",children:"Caractersticas"}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.characteristics})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] uppercase text-green-400 font-bold",children:"Bnus Racial"}),c.jsx("div",{className:"text-xs text-gray-300 font-mono mt-1",children:le(f.racial_bonus)})]})]})]}),c.jsxs("div",{className:"glass-panel flex flex-col gap-2",children:[c.jsx("span",{className:"text-xs text-gray-400 uppercase font-bold tracking-widest",children:"Gnero"}),c.jsxs("div",{className:"flex w-full",children:[c.jsx("div",{onClick:()=>{b("female"),E(null)},className:`gender-option ${g==="female"?"active":""}`,children:"Feminino"}),c.jsx("div",{onClick:()=>{b("male"),E(null)},className:`gender-option ${g==="male"?"active":""}`,children:"Masculino"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"rpg-title text-xl mb-4 text-white",children:"Vocao"}),c.jsx("div",{className:"class-selector-grid",children:he().map(j=>{const R=pe(j);return c.jsxs("div",{onClick:()=>E(j),className:`class-btn ${v===j?"selected":""}`,children:[c.jsx("span",{className:"class-btn-title",children:j}),c.jsx("span",{className:"class-btn-role",children:R?.role||"Bsico"})]},j)})}),v&&(()=>{const j=pe(v);return j?c.jsxs("div",{className:"class-detail-container",children:[c.jsxs("div",{className:"cd-header",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"cd-title rpg-title",children:j.name}),c.jsxs("div",{className:"cd-meta text-blue-400",children:[j.type," // ",j.role]})]}),c.jsxs("div",{className:"cd-req",children:[c.jsx("span",{className:"cd-req-label",children:"Requisitos"}),c.jsx("div",{className:"cd-req-val",children:j.requirements?.length?j.requirements.join(", "):"Nenhum"})]})]}),c.jsxs("div",{className:"cd-desc",children:['"',j.description,'"']}),c.jsxs("div",{className:"cd-bonus-box",children:[c.jsx("span",{className:"text-xs uppercase font-bold text-blue-300",children:"Bnus de Classe"}),c.jsx("span",{className:"font-mono text-sm text-white",children:le(j.bonus_class)})]}),c.jsxs("div",{children:[c.jsx("h5",{className:"text-xs uppercase text-yellow-500 font-bold mb-3 tracking-wider border-b border-white/10 pb-1 inline-block",children:"Habilidades Iniciais"}),c.jsx("div",{className:"cd-abilities-grid",children:j.abilities?.map((R,S)=>c.jsxs("div",{className:"cd-ability-card",children:[c.jsxs("div",{className:"cd-ab-header",children:[c.jsx("span",{className:"cd-ab-name",children:R.name}),c.jsx("span",{className:"cd-ab-cost",children:R.cost})]}),c.jsx("p",{className:"cd-ab-desc",children:R.description})]},S))})]})]}):c.jsx("div",{className:"p-4 text-center",children:"Carregando..."})})()]}),c.jsx("div",{className:"mt-8 mb-10",children:c.jsx("button",{disabled:!v,onClick:()=>M(!0),className:"confirm-btn",children:v?"Finalizar Criao":"Selecione uma Vocao"})})]})]}),T&&c.jsx("div",{className:"rpg-modal-overlay",children:c.jsxs("div",{className:"rpg-modal-box",children:[c.jsx("div",{className:"corner tl"}),c.jsx("div",{className:"corner tr"}),c.jsx("div",{className:"corner bl"}),c.jsx("div",{className:"corner br"}),c.jsxs("div",{className:"rpg-modal-inner",children:[c.jsxs("div",{className:"w-full",children:[c.jsx("h3",{className:"rpg-modal-title",children:"Identidade"}),c.jsx("p",{className:"rpg-modal-subtitle",children:"Como a histria o conhecer?"})]}),c.jsxs("div",{className:"w-full flex gap-2",children:[c.jsx("input",{type:"text",value:B,onChange:j=>L(j.target.value),placeholder:"Nome do Aventureiro",className:"rpg-input",autoFocus:!0}),c.jsx("button",{onClick:k,disabled:!B.trim()||O,className:"rpg-btn-go",children:O?"...":"GO"})]}),c.jsx("button",{className:"rpg-close-btn",onClick:()=>M(!1),children:""})]})]})})]})},V5="/assets/fundo-jogador-nsWQkznx.jpg",z5="/assets/level-up-BOEM_DXL.mp3",L5=i=>{if(!i)return"#ffffff";let e=0;for(let s=0;s<i.length;s++)e=i.charCodeAt(s)+((e<<5)-e);const n=(e&16777215).toString(16).toUpperCase();return"#"+"00000".substring(0,6-n.length)+n},U5=({ping:i})=>c.jsxs("div",{className:`ping-marker ${i.isMaster?"master-ping":""}`,style:{left:i.x,top:i.y,"--ping-color":i.color},children:[c.jsx("div",{className:"ping-center",style:{backgroundColor:i.color}}),c.jsx("div",{className:"ping-ripple",style:{borderColor:i.color}}),i.isMaster&&c.jsx("div",{className:"ping-ripple delay",style:{borderColor:i.color}})]}),B5=({token:i,gridSize:e,isMaster:n,onUpdate:s,onMouseDown:o,charData:u})=>{const[f,m]=w.useState(""),g=w.useRef(i.stats?.hp?.current);w.useEffect(()=>{let B;i.type==="player"&&u?B=u.character_sheet?.status?.hp?.current:i.type==="enemy"&&i.stats&&(B=i.stats.hp.current);const L=g.current;if(L!==void 0&&B!==void 0&&B!==L){B<L?m("flash-damage"):B>L&&m("flash-heal");const O=setTimeout(()=>m(""),1e3);return()=>clearTimeout(O)}g.current=B},[i.stats?.hp?.current,u?.character_sheet?.status?.hp?.current]);const b=e*(i.size||1);let v=i.img;i.type==="player"&&u&&u.character_sheet?.imgUrl&&(v=u.character_sheet.imgUrl);const E=i.imgX!==void 0?i.imgX:50,T=i.imgY!==void 0?i.imgY:50,M=i.visible!==!1;return!n&&!M?null:c.jsxs("div",{className:`vtt-token ${i.type} ${f} ${M?"":"ghost-token"}`,style:{width:b,height:b,left:i.x*e,top:i.y*e,cursor:n||i.type==="player"&&i.controlledBy==="me"?"grab":"default",zIndex:n?100:50},onMouseDown:B=>o(B,i),children:[c.jsx("div",{className:"token-inner",style:{backgroundImage:`url(${v})`,backgroundPosition:`${E}% ${T}%`}}),n&&c.jsxs("div",{className:"token-sizer",children:[c.jsx("button",{onMouseDown:B=>{B.stopPropagation(),s("resize",i,-1)},children:"-"}),c.jsx("button",{onMouseDown:B=>{B.stopPropagation(),s("resize",i,1)},children:"+"})]}),c.jsx("div",{className:"token-name",children:i.name})]})};function sA({sessaoData:i,isMaster:e,showManager:n,onCloseManager:s,currentUserUid:o,personagensData:u}){const[f,m]=w.useState(null),[g,b]=w.useState(!1),[v,E]=w.useState([]),[T,M]=w.useState([]),[B,L]=w.useState([]),[O,Q]=w.useState(""),[G,W]=w.useState(null),[le,he]=w.useState(i?.grid_cols||25),[pe,I]=w.useState(0),[C,k]=w.useState(null),[P,j]=w.useState({x:0,y:0}),[R,S]=w.useState("cursor"),[Te,ne]=w.useState(!1),[F,re]=w.useState(null),[ye,Be]=w.useState(null),Ue=w.useRef(null),V=w.useRef(null);w.useEffect(()=>{if(i&&(m(i.active_map||null),i.grid_cols&&i.grid_cols!==le&&he(i.grid_cols),i.tokens?E(i.tokens):E([]),i.pings?M(i.pings):M([]),e)){const me=i.mapas||[],Ce=i.saved_maps||[],U=me.map((fe,de)=>{const be=Ce.find(Ge=>Ge.url===fe);return be||{id:`temp_${de}`,name:`Mapa Importado ${de+1}`,url:fe,isTemp:!0}});L(U)}},[i,e]),w.useEffect(()=>{if(!e)return;const me=setInterval(()=>{if(!T||T.length===0)return;const Ce=Date.now(),U=T.filter(fe=>Ce-fe.createdAt>3e3);if(U.length>0){const fe=Pe(_e,"sessoes",i.id);U.forEach(async de=>{try{await tt(fe,{pings:Zd(de)})}catch(be){console.log("Erro ao limpar ping",be)}})}},1e3);return()=>clearInterval(me)},[T,e,i?.id]);const ae=()=>{if(Ue.current){const me=Ue.current.offsetWidth;if(le>0){const Ce=me/le;I(Ce)}}};w.useEffect(()=>(ae(),window.addEventListener("resize",ae),()=>window.removeEventListener("resize",ae)),[f,le]);const ge=me=>{if(!Ue.current)return{x:0,y:0};const Ce=Ue.current.getBoundingClientRect();return{x:me.clientX-Ce.left,y:me.clientY-Ce.top}},Ee=async me=>{if(!f)return;const Ce=ge(me),U={id:Date.now().toString()+Math.random(),x:Ce.x,y:Ce.y,color:e?"#ffd700":L5(o),isMaster:!!e,createdAt:Date.now(),uid:o||"anon"};try{await tt(Pe(_e,"sessoes",i.id),{pings:Wd(U)})}catch(fe){console.error("Erro ao criar ping:",fe)}},Se=(me,Ce)=>{if(R==="ruler"||R==="ping")return;const U=Ce.type==="player"&&Ce.uid===o;if(!e&&!U)return;me.stopPropagation(),me.preventDefault();const fe=me.currentTarget.getBoundingClientRect();j({x:me.clientX-fe.left,y:me.clientY-fe.top}),k({...Ce,tempX:Ce.x*pe,tempY:Ce.y*pe})},je=me=>{if(Te&&Be(ge(me)),C){const Ce=Ue.current.getBoundingClientRect();let U=me.clientX-Ce.left-P.x,fe=me.clientY-Ce.top-P.y;const de=C.size||1,be=Ce.width-pe*de,Ge=Ce.height-pe*de;k(Me=>({...Me,tempX:Math.max(0,Math.min(U,be)),tempY:Math.max(0,Math.min(fe,Ge))}))}},De=async()=>{if(Te&&(ne(!1),re(null),Be(null)),C){const me=Math.round(C.tempX/pe),Ce=Math.round(C.tempY/pe),U=v.map(fe=>fe.id===C.id?{...fe,x:me,y:Ce}:fe);E(U),k(null);try{await tt(Pe(_e,"sessoes",i.id),{tokens:U})}catch(fe){console.error("Erro ao mover token",fe)}}},gt=async(me,Ce,U)=>{if(!e)return;let fe=[...v];const de=fe.findIndex(be=>be.id===Ce.id);if(de!==-1&&me==="resize"){let be=(fe[de].size||1)+U;be<1&&(be=1),be>4&&(be=4),fe[de].size=be,E(fe),await tt(Pe(_e,"sessoes",i.id),{tokens:fe})}},Ne=me=>{if(R==="ping"){me.preventDefault(),Ee(me);return}if(R==="ruler"||me.button===2){me.preventDefault(),ne(!0);const Ce=ge(me);re(Ce),Be(Ce)}},mt=async me=>{if(!e)return;const Ce=Math.max(1,Math.min(100,Number(me)));he(Ce),await tt(Pe(_e,"sessoes",i.id),{grid_cols:Ce})},ct=()=>{if(!F||!ye||!pe)return"0m";const me=Math.abs(F.x-ye.x),Ce=Math.abs(F.y-ye.y),fe=Math.sqrt(me*me+Ce*Ce)/pe;return`${(fe*1.5).toFixed(1)}m (${fe.toFixed(1)} qd)`},Xt=async me=>{const Ce={id:me.id.toString().startsWith("temp")?Date.now().toString():me.id,name:O||me.name,url:me.url},U=Pe(_e,"sessoes",i.id);me.isTemp||await tt(U,{saved_maps:Zd(me)}),await tt(U,{saved_maps:Wd(Ce)}),W(null),Q("")},an=async me=>{await tt(Pe(_e,"sessoes",i.id),{active_map:me}),s&&s(),b(!1)},Ft=async()=>{window.confirm("Fechar o mapa para todos?")&&await tt(Pe(_e,"sessoes",i.id),{active_map:null})};return!f&&!e&&!n?null:c.jsxs(c.Fragment,{children:[f&&c.jsxs("div",{className:`tabletop-wrapper ${g?"minimized":""}`,children:[c.jsxs("div",{className:"tt-header",children:[c.jsxs("span",{className:"tt-title",children:[" ",f.name]}),!g&&c.jsxs("div",{className:"tt-toolbar",children:[c.jsx("button",{className:`tool-btn ${R==="cursor"?"active":""}`,onClick:()=>S("cursor"),title:"Mover",children:""}),c.jsx("button",{className:`tool-btn ${R==="ruler"?"active":""}`,onClick:()=>S("ruler"),title:"Rgua",children:""}),c.jsx("button",{className:`tool-btn ${R==="ping"?"active":""}`,onClick:()=>S("ping"),title:"Ping",children:""}),e&&c.jsxs("div",{className:"grid-control-box",children:[c.jsx("span",{className:"grid-label",children:"GRID"}),c.jsxs("div",{className:"grid-input-wrapper",children:[c.jsx("button",{className:"grid-btn-mini",onClick:()=>mt(le-1),children:"-"}),c.jsx("input",{type:"number",className:"grid-number-display",value:le,onChange:me=>mt(me.target.value)}),c.jsx("button",{className:"grid-btn-mini",onClick:()=>mt(le+1),children:"+"})]})]})]}),c.jsxs("div",{className:"tt-controls",children:[c.jsx("button",{onClick:()=>b(!g),children:g?"":""}),e&&c.jsx("button",{className:"close-x",onClick:Ft,children:""})]})]}),!g&&c.jsx("div",{className:"tt-viewport",children:c.jsxs("div",{className:"map-layer-container",ref:Ue,onMouseDown:Ne,onMouseMove:je,onMouseUp:De,onMouseLeave:De,onContextMenu:me=>me.preventDefault(),style:{cursor:R==="ruler"?"crosshair":R==="ping"?"copy":"default"},children:[c.jsx("img",{ref:V,src:f.url,alt:"Map",className:"map-img-element"}),c.jsx("div",{className:"pings-layer",children:T.map(me=>c.jsx(U5,{ping:me},me.id))}),pe>0&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"grid-layer",style:{backgroundSize:`${pe}px ${pe}px`,backgroundImage:"linear-gradient(to right, rgba(255,255,255,0.2) 1px, transparent 1px), linear-gradient(to bottom, rgba(255,255,255,0.2) 1px, transparent 1px)"}}),c.jsxs("div",{className:"tokens-layer",children:[v.map(me=>C&&C.id===me.id?null:c.jsx(B5,{token:me,gridSize:pe,isMaster:e,onUpdate:gt,onMouseDown:Se,charData:me.type==="player"?u.find(Ce=>Ce.uid===me.uid):null},me.id)),C&&c.jsx("div",{className:`vtt-token ${C.type} dragging`,style:{width:pe*(C.size||1),height:pe*(C.size||1),left:C.tempX,top:C.tempY,cursor:"grabbing",zIndex:1e3},children:c.jsx("div",{className:"token-inner",style:{backgroundImage:`url(${C.img})`,backgroundPosition:`${C.imgX||50}% ${C.imgY||50}%`}})})]})]}),Te&&F&&ye&&c.jsxs("div",{className:"ruler-overlay",children:[c.jsxs("svg",{width:"100%",height:"100%",children:[c.jsx("line",{x1:F.x,y1:F.y,x2:ye.x,y2:ye.y,stroke:"#ffcc00",strokeWidth:"3",strokeDasharray:"10,5",filter:"drop-shadow(0px 0px 2px black)"}),c.jsx("circle",{cx:F.x,cy:F.y,r:"4",fill:"#ffcc00",stroke:"black"}),c.jsx("circle",{cx:ye.x,cy:ye.y,r:"4",fill:"#ffcc00",stroke:"black"})]}),c.jsx("div",{className:"ruler-tag",style:{left:ye.x+15,top:ye.y+15},children:ct()})]})]})})]}),e&&n&&c.jsx("div",{className:"manager-overlay",onClick:s,children:c.jsxs("div",{className:"manager-box",onClick:me=>me.stopPropagation(),children:[c.jsx("h3",{className:"manager-title",children:"SALA DE CARTOGRAFIA"}),c.jsx("div",{className:"manager-list",children:B.map((me,Ce)=>c.jsxs("div",{className:"manager-item",children:[c.jsx("img",{src:me.url,className:"thumb-preview",alt:"thumb"}),G===me.id?c.jsx("input",{className:"manager-name-input",value:O,onChange:U=>Q(U.target.value),placeholder:"Nome",autoFocus:!0}):c.jsx("span",{className:"map-name-span",children:me.name}),G===me.id?c.jsx("button",{className:"btn-action-sm btn-save-name",onClick:()=>Xt(me),children:"SALVAR"}):c.jsx("button",{className:"btn-action-sm",onClick:()=>{W(me.id),Q(me.name)},children:"RENOMEAR"}),c.jsx("button",{className:"btn-action-sm btn-activate",onClick:()=>an(me),children:"ABRIR"})]},Ce))}),c.jsx("button",{className:"btn-cancelar-main",onClick:s,children:"FECHAR"})]})}),c.jsx("style",{children:`
            .tabletop-wrapper { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90vw; height: 85vh; background: #0b0b0b; border: 2px solid #ffcc00; z-index: 1000; display: flex; flex-direction: column; box-shadow: 0 0 100px rgba(0,0,0,0.9); border-radius: 8px; }
            .tabletop-wrapper.minimized { width: 400px; height: 45px; top: 96%; left: 50%; border-color: #444; border-radius: 10px 10px 0 0; }
            .tt-header { height: 45px; background: #1a1a1a; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; padding: 0 15px; }
            .tt-title { color: #ffcc00; font-weight: bold; letter-spacing: 1px; font-size: 14px; }
            .tt-toolbar { display: flex; gap: 15px; align-items: center; background: #000; padding: 4px 15px; border-radius: 20px; border: 1px solid #333; }
            .tool-btn { background: none; border: none; font-size: 18px; cursor: pointer; opacity: 0.5; }
            .tool-btn.active { opacity: 1; border-bottom: 2px solid #00f2ff; }
            .tt-controls button { background: none; border: none; color: #aaa; cursor: pointer; margin-left: 10px; }
            .tt-viewport { flex: 1; background: #050505; overflow: hidden; display: flex; align-items: center; justify-content: center; position: relative; }
            .grid-control-box { display: flex; align-items: center; gap: 8px; border-left: 1px solid #444; padding-left: 12px; margin-left: 5px; }
            .grid-label { font-size: 10px; color: #888; font-weight: bold; }
            .grid-input-wrapper { display: flex; align-items: center; background: #222; border: 1px solid #444; border-radius: 4px; }
            .grid-btn-mini { background: #333; color: #fff; border: none; width: 20px; cursor: pointer; }
            .grid-number-display { width: 30px; background: #222; border: none; color: #ffcc00; text-align: center; font-size: 12px; outline: none; }
            
            .map-layer-container { position: relative; box-shadow: 0 0 30px #000; user-select: none; }
            .map-img-element { display: block; max-width: 100%; max-height: 80vh; object-fit: contain; pointer-events: none; }
            .grid-layer, .tokens-layer, .pings-layer, .ruler-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
            .grid-layer { pointer-events: none; z-index: 2; opacity: 0.6; }
            .tokens-layer { z-index: 5; }
            .pings-layer { z-index: 20; pointer-events: none; }
            .ruler-overlay { z-index: 10; pointer-events: none; }
            .ruler-tag { position: absolute; background: rgba(0,0,0,0.9); color: #ffcc00; border: 1px solid #ffcc00; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; pointer-events: none; z-index: 20; }

            /* --- ESTILOS DE PING (CORRIGIDO) --- */
            .ping-marker {
                position: absolute;
                width: 0; height: 0;
                transform: translate(-50%, -50%);
                pointer-events: none;
                z-index: 20;
            }
            .ping-center {
                position: absolute;
                left: -6px; top: -6px;
                width: 12px; height: 12px;
                border-radius: 50%;
                box-shadow: 0 0 10px var(--ping-color);
                animation: pingPop 0.3s ease-out;
            }
            .ping-ripple {
                position: absolute;
                left: -25px; top: -25px;
                width: 50px; height: 50px;
                border-radius: 50%;
                border: 3px solid;
                opacity: 0;
                box-shadow: 0 0 5px var(--ping-color);
                animation: pingRipple 1.5s ease-out infinite;
            }
            .ping-ripple.delay { animation-delay: 0.5s; }
            
            /* Estilo especfico do Mestre */
            .ping-marker.master-ping .ping-center {
                width: 16px; height: 16px; left: -8px; top: -8px;
                box-shadow: 0 0 20px #ffd700, 0 0 40px #ffd700;
                background-color: #ffd700 !important;
            }
            .ping-marker.master-ping .ping-ripple {
                border-color: #ffd700 !important;
                border-width: 4px;
                animation-duration: 1s;
                width: 60px; height: 60px; left: -30px; top: -30px;
            }

            @keyframes pingPop { 
                0% { transform: scale(0); opacity: 0; } 
                80% { transform: scale(1.2); opacity: 1; }
                100% { transform: scale(1); opacity: 1; } 
            }
            @keyframes pingRipple {
                0% { transform: scale(0.2); opacity: 1; border-width: 3px; }
                100% { transform: scale(2.0); opacity: 0; border-width: 0px; }
            }

            .vtt-token { position: absolute; border-radius: 50%; box-shadow: 0 0 10px #000; z-index: 10; overflow: visible; }
            .vtt-token.dragging { z-index: 100; transition: none; box-shadow: 0 10px 20px rgba(0,0,0,0.8); transform: scale(1.05); }
            .vtt-token.enemy { border: 2px solid #f44; }
            .vtt-token.player { border: 2px solid #00f2ff; }
            
            .vtt-token.ghost-token { opacity: 0.5; filter: grayscale(100%); border-style: dashed; }

            .token-inner { width: 100%; height: 100%; border-radius: 50%; background-size: cover; pointer-events: none; background-repeat: no-repeat; }
            .token-name { position: absolute; bottom: -15px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); color: #fff; font-size: 10px; padding: 2px 5px; border-radius: 4px; white-space: nowrap; pointer-events: none; opacity: 0; transition: 0.2s; z-index: 15; text-shadow: 0 0 3px #000; }
            .vtt-token:hover .token-name { opacity: 1; }
            
            .token-sizer { position: absolute; top: -10px; right: -20px; display: flex; flex-direction: column; opacity: 0; transition: 0.2s; gap: 2px; }
            .vtt-token:hover .token-sizer { opacity: 1; }
            .token-sizer button { width: 15px; height: 15px; background: #000; color: #fff; border: 1px solid #555; border-radius: 50%; font-size: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
            .token-sizer button:hover { border-color: #ffcc00; color: #ffcc00; }

            .flash-damage { animation: flashRed 0.5s; }
            .flash-heal { animation: flashGreen 0.5s; }
            @keyframes flashRed { 0% { box-shadow: 0 0 0 #f00; } 50% { box-shadow: 0 0 20px #f00; border-color: #f00; } 100% { box-shadow: 0 0 0 #000; } }
            @keyframes flashGreen { 0% { box-shadow: 0 0 0 #0f0; } 50% { box-shadow: 0 0 20px #0f0; border-color: #0f0; } 100% { box-shadow: 0 0 0 #000; } }

            .manager-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index: 10000; display:flex; align-items:center; justify-content:center; }
            .manager-box { width: 700px; max-height: 85vh; background: #080808; border: 2px solid #00f2ff; padding: 25px; display:flex; flex-direction:column; border-radius: 8px; }
            .manager-title { color: #00f2ff; border-bottom: 1px solid #00f2ff; padding-bottom: 15px; margin: 0; }
            .manager-list { overflow-y: auto; flex: 1; margin-top: 20px; border: 1px solid #333; background: #000; }
            .manager-item { display: flex; align-items: center; padding: 15px; border-bottom: 1px solid #333; gap: 15px; }
            .thumb-preview { width: 80px; height: 50px; object-fit: cover; border: 1px solid #555; }
            .manager-name-input { flex: 1; background: #111; border: 1px solid #444; color: #fff; padding: 8px; }
            .map-name-span { flex: 1; color: #fff; font-size: 14px; }
            .btn-action-sm { padding: 8px 15px; font-size: 11px; cursor: pointer; border: 1px solid #555; background: transparent; color: #ccc; }
            .btn-activate { border-color: #00f2ff; color: #00f2ff; margin-left: 10px; }
            .btn-save-name { color: #0f0; border-color: #0f0; }
            .btn-cancelar-main { width: 100%; background: #000; color: #fff; border: 1px solid #fff; padding: 14px; cursor: pointer; margin-top: 20px; }
        `})]})}function rA({sessaoData:i,isMaster:e,showManager:n,onCloseManager:s}){const[o,u]=w.useState(null),[f,m]=w.useState(!1),[g,b]=w.useState([]),[v,E]=w.useState(""),[T,M]=w.useState(null);w.useEffect(()=>{if(i&&(u(i.active_scenery||null),e)){const O=i.cenarios||[];b(O)}},[i,e]),w.useEffect(()=>{o&&m(!1)},[o?.url]);const B=async()=>{if(!T)return;const Q={url:T,name:v||"Ambiente",timestamp:Date.now()};try{const G=Pe(_e,"sessoes",i.id);await tt(G,{active_scenery:Q}),s&&s(),E(""),M(null)}catch(G){console.error("Erro ao projetar cenrio:",G)}},L=async()=>{if(window.confirm("Fechar o cenrio para todos?"))try{const O=Pe(_e,"sessoes",i.id);await tt(O,{active_scenery:null})}catch(O){console.error(O)}};return!o&&!n?null:c.jsxs(c.Fragment,{children:[o&&c.jsxs("div",{className:`scenery-layer ${f?"minimized":"immersive"}`,children:[!f&&c.jsxs("div",{className:"scenery-viewport",children:[c.jsx("div",{className:"vignette-mask"}),c.jsx("img",{src:o.url,alt:"Cenrio",className:"scenery-img"}),c.jsx("div",{className:"scenery-title-overlay",children:c.jsx("h2",{children:o.name})})]}),c.jsxs("div",{className:"scenery-hud",children:[f&&c.jsxs("span",{className:"mini-label",children:[" ",o.name]}),c.jsxs("div",{className:"scenery-actions",children:[c.jsx("button",{className:"btn-scenery-toggle",onClick:()=>m(!f),title:f?"Maximizar Cenrio":"Minimizar",children:f?"":""}),e&&c.jsx("button",{className:"btn-scenery-close",onClick:L,title:"Encerrar Projeo",children:""})]})]})]}),e&&n&&c.jsx("div",{className:"scenery-manager-overlay",onClick:s,children:c.jsxs("div",{className:"scenery-manager-box",onClick:O=>O.stopPropagation(),children:[c.jsx("h3",{className:"manager-title",children:"PROJETOR DE AMBIENTES"}),c.jsxs("div",{className:"scenery-grid",children:[g.length===0&&c.jsx("p",{className:"empty-txt",children:"Nenhuma imagem de cenrio carregada na sesso."}),g.map((O,Q)=>c.jsx("div",{className:`scenery-thumb ${T===O?"selected":""}`,onClick:()=>M(O),children:c.jsx("img",{src:O,alt:`Opo ${Q}`})},Q))]}),c.jsxs("div",{className:"scenery-input-row",children:[c.jsx("input",{type:"text",placeholder:"Nome do Local (Ex: Runas Antigas)",value:v,onChange:O=>E(O.target.value)}),c.jsx("button",{className:"btn-project",onClick:B,disabled:!T,children:"PROJETAR"})]}),c.jsx("button",{className:"btn-close-manager",onClick:s,children:"CANCELAR"})]})}),c.jsx("style",{children:`
        /* --- ESTILO IMERSIVO --- */
        .scenery-layer {
            position: fixed;
            transition: all 0.8s cubic-bezier(0.2, 2, 0.2, 1);
            overflow: hidden;
            /* Z-INDEX EXTREMAMENTE ALTO PARA COBRIR TUDO (Bazar, Fichas, etc) */
            z-index: 200000; 
        }

        .scenery-layer.immersive {
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            animation: fadeInDeep 4s ease-out;
        }

        .scenery-layer.minimized {
            top: 0; /* Cola no teto */
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 40px;
            background: rgba(0,0,0,0.9);
            border: 1px solid #ffcc00;
            border-top: none;
            border-radius: 0 0 15px 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 200001;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }

        @keyframes fadeInDeep { from { opacity: 0; filter: blur(10px); } to { opacity: 1; filter: blur(0); } }

        .scenery-viewport {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .scenery-img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Garante que cubra a tela toda sem bordas internas */
            /* Efeito Ken Burns lento e suave */
            animation: kenBurns 80s infinite alternate ease-in-out;
            opacity: 0.9; /* Levemente escuro para o texto brilhar */
        }

        @keyframes kenBurns { from { transform: scale(1.0); } to { transform: scale(1.15); } }

        /* VIGNETTE CINEMATOGRFICA (OVAL) */
        .vignette-mask {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 2;
            /* Gradiente ELPTICO: Comea transparente no centro e escurece forte nas bordas */
            background: radial-gradient(
                ellipse at center, 
                rgba(0,0,0,0) 30%, 
                rgba(0,0,0,0.3) 60%, 
                rgba(0,0,0,0.8) 85%, 
                #000 100%
            );
            /* Adiciona uma sombra interna extra para garantir bordas pretas */
            box-shadow: inset 0 0 150px #000;
        }

        .scenery-title-overlay {
            position: absolute;
            top: 80px; /* Um pouco mais para baixo para no colar no topo */
            width: 100%;
            text-align: center;
            z-index: 5;
            pointer-events: none;
        }

        .scenery-title-overlay h2 {
            font-family: 'Cinzel', serif;
            font-size: 4.5rem;
            color: #ffcc00;
            text-transform: uppercase;
            letter-spacing: 15px;
            /* Sombra profunda para destacar no fundo */
            text-shadow: 0 10px 30px #000, 0 0 50px rgba(255, 204, 0, 0.2);
            margin: 0;
            opacity: 0;
            /* ANIMAO DE SEQUNCIA: Entra -> Espera -> Sai */
            animation: cinematicTitleSequence 8s ease-in-out 0.5s forwards;
        }

        @keyframes cinematicTitleSequence { 
            0% { 
                opacity: 0; 
                transform: translateY(30px) scale(0.9); 
                letter-spacing: 30px; 
            } 
            20% { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
                letter-spacing: 15px; 
            }
            80% { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
                letter-spacing: 15px; 
            }
            100% { 
                opacity: 0; 
                transform: translateY(-20px) scale(1.05); 
                letter-spacing: 30px; /* Volta a espalhar ao sair */
            } 
        }

        /* HUD DE CONTROLE */
        .scenery-hud {
            position: absolute;
            top: 0; left: 0; width: 100%;
            padding: 20px;
            display: flex;
            justify-content: flex-end; /* Botes na direita */
            align-items: flex-start;
            z-index: 10;
            opacity: 0; /* Invisvel por padro */
            transition: opacity 0.3s;
        }
        
        /* Aparece ao passar o mouse ou se estiver minimizado */
        .scenery-layer:hover .scenery-hud, .scenery-layer.minimized .scenery-hud {
            opacity: 1;
        }
        
        .scenery-layer.minimized .scenery-hud {
            position: relative;
            padding: 0 15px;
            align-items: center;
            justify-content: space-between; /* Espalha texto e botes no modo mini */
            width: 100%;
        }

        .scenery-actions {
            display: flex;
            gap: 15px;
        }

        .btn-scenery-toggle, .btn-scenery-close {
            background: rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.3);
            color: #fff;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.3s;
            pointer-events: auto;
            backdrop-filter: blur(5px);
        }
        .btn-scenery-toggle:hover { background: #fff; color: #000; transform: scale(1.1); }
        .btn-scenery-close { border-color: rgba(255, 68, 68, 0.5); color: #f44; }
        .btn-scenery-close:hover { background: #f44; color: #fff; transform: scale(1.1); }

        .mini-label {
            color: #ffcc00;
            font-family: 'Cinzel', serif;
            font-weight: bold;
            font-size: 14px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-right: 10px;
            text-shadow: 0 0 10px rgba(255,204,0,0.5);
        }

        /* --- GERENCIADOR (MODAL) --- */
        .scenery-manager-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 200002; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .scenery-manager-box { width: 700px; background: #080808; border: 2px solid #ffcc00; padding: 30px; border-radius: 8px; box-shadow: 0 0 80px rgba(255, 204, 0, 0.15); }
        .manager-title { color: #ffcc00; font-family: 'Cinzel', serif; margin: 0 0 25px 0; text-align: center; border-bottom: 1px solid #333; padding-bottom: 15px; letter-spacing: 3px; font-size: 24px; }
        
        .scenery-grid { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 20px; 
            max-height: 50vh; overflow-y: auto; margin-bottom: 25px; padding: 10px;
            background: #000; border: 1px solid #222; border-radius: 4px;
        }
        .scenery-thumb { height: 100px; border: 2px solid #333; border-radius: 6px; overflow: hidden; cursor: pointer; opacity: 0.6; transition: 0.3s; position: relative; }
        .scenery-thumb:hover { opacity: 1; transform: scale(1.05); border-color: #777; }
        .scenery-thumb.selected { border-color: #ffcc00; opacity: 1; box-shadow: 0 0 20px rgba(255,204,0,0.3); transform: scale(1.05); }
        .scenery-thumb img { width: 100%; height: 100%; object-fit: cover; }
        
        .scenery-input-row { display: flex; gap: 15px; margin-bottom: 20px; }
        .scenery-input-row input { flex: 1; background: #111; border: 1px solid #444; color: #fff; padding: 15px; font-family: 'Cinzel', serif; outline: none; font-size: 16px; border-radius: 4px; }
        .scenery-input-row input:focus { border-color: #ffcc00; box-shadow: 0 0 10px rgba(255,204,0,0.1); }
        
        .btn-project { background: linear-gradient(45deg, #ffcc00, #d4a000); color: #000; border: none; padding: 0 35px; font-weight: bold; cursor: pointer; font-family: 'Cinzel', serif; font-size: 16px; border-radius: 4px; }
        .btn-project:hover:not(:disabled) { filter: brightness(1.2); box-shadow: 0 0 25px rgba(255,204,0,0.4); }
        .btn-project:disabled { opacity: 0.5; cursor: not-allowed; background: #444; }
        
        .btn-close-manager { width: 100%; background: transparent; border: 1px solid #555; color: #aaa; padding: 12px; cursor: pointer; transition: 0.2s; font-family: sans-serif; letter-spacing: 2px; font-size: 12px; }
        .btn-close-manager:hover { border-color: #fff; color: #fff; background: rgba(255,255,255,0.05); }
        .empty-txt { color: #666; text-align: center; grid-column: 1 / -1; padding: 30px; font-style: italic; }
      `})]})}function oA({sessaoData:i,isMaster:e,showManager:n,onCloseManager:s}){const[o,u]=w.useState(null),[f,m]=w.useState([]),[g,b]=w.useState(""),[v,E]=w.useState(null);w.useEffect(()=>{if(i&&(u(i.active_npc||null),e)){const L=i.npcs||[];m(L)}},[i,e]);const T=async L=>{if(!v&&!o)return;let O;v?O={url:v,name:g||"Desconhecido",visible:L,timestamp:Date.now()}:o&&(O={...o,visible:L});try{const Q=Pe(_e,"sessoes",i.id);await tt(Q,{active_npc:O}),v&&(E(null),b(""))}catch(Q){console.error("Erro ao atualizar NPC:",Q)}},M=async()=>{if(window.confirm("Remover NPC da cena?"))try{const L=Pe(_e,"sessoes",i.id);await tt(L,{active_npc:null})}catch(L){console.error(L)}},B=()=>{if(!o)return null;const L=o.visible;return c.jsx("div",{className:`npc-overlay-container ${L?"slide-in":"slide-out"}`,children:c.jsxs("div",{className:"npc-content-wrapper",children:[c.jsxs("div",{className:"npc-image-box",children:[c.jsx("img",{src:o.url,alt:"NPC",className:"npc-img"}),c.jsx("div",{className:"npc-fade-bottom"})]}),c.jsxs("div",{className:"npc-title-container",children:[c.jsx("div",{className:"npc-title-line"}),c.jsx("h3",{className:"npc-title-text",children:o.name})]})]})})};return c.jsxs(c.Fragment,{children:[B(),e&&n&&c.jsx("div",{className:"npc-manager-overlay",onClick:s,children:c.jsxs("div",{className:"npc-manager-box",onClick:L=>L.stopPropagation(),children:[c.jsxs("div",{className:"npc-manager-header",children:[c.jsx("h3",{children:"CONVOCAO DE NPCS"}),c.jsx("button",{className:"close-x",onClick:s,children:""})]}),c.jsxs("div",{className:"npc-grid-list",children:[f.length===0&&c.jsx("p",{className:"empty-msg",children:"Nenhum NPC cadastrado na sesso."}),f.map((L,O)=>c.jsx("div",{className:`npc-thumb ${v===L?"selected":""}`,onClick:()=>{E(L),b("")},children:c.jsx("img",{src:L,alt:"NPC Thumb"})},O))]}),c.jsxs("div",{className:"npc-controls-row",children:[c.jsx("input",{type:"text",placeholder:"Nome (Ex: Lorde das Sombras)",value:g,onChange:L=>b(L.target.value)}),c.jsxs("div",{className:"btn-group",children:[c.jsx("button",{className:"btn-npc-action visible",onClick:()=>T(!0),children:"ENTRAR"}),c.jsx("button",{className:"btn-npc-action hidden",onClick:()=>T(!1),children:"PREPARAR"})]})]}),o&&!v&&c.jsxs("div",{className:"current-npc-controls",children:[c.jsxs("h4",{children:["EM CENA: ",c.jsx("span",{style:{color:"#fff"},children:o.name})]}),c.jsxs("div",{className:"active-actions",children:[c.jsx("button",{className:`toggle-btn ${o.visible?"is-on":"is-off"}`,onClick:()=>T(!o.visible),children:o.visible?"OCULTAR (SAIR)":"REVELAR (ENTRAR)"}),c.jsx("button",{className:"remove-btn",onClick:M,children:"REMOVER"})]})]})]})}),c.jsx("style",{children:`
        /* --- CAMADA DO NPC --- */
        .npc-overlay-container {
            position: fixed;
            top: 50%;
            /* Z-INDEX SUPERIOR AO CENRIO */
            z-index: 210000; 
            width: 33vw; /* 1/3 da tela */
            height: 90vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            
            /* Transies cinematogrficas */
            transition: left 1.5s cubic-bezier(0.22, 1, 0.36, 1), 
                        transform 1.5s cubic-bezier(0.22, 1, 0.36, 1), 
                        opacity 1.5s ease;
        }

        /* SAINDO (Esquerda) */
        .npc-overlay-container.slide-out {
            left: -40%; 
            transform: translate(-100%, -50%);
            opacity: 0;
        }

        /* ENTRANDO (Centro) */
        .npc-overlay-container.slide-in {
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 1;
        }

        .npc-content-wrapper {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            /* Animao de respirao/flutuao */
            animation: breatheNPC 8s ease-in-out infinite;
        }

        @keyframes breatheNPC {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        /* IMAGEM DO NPC (SEM BORDAS, S PNG) */
        .npc-image-box {
            position: relative;
            width: 100%;
            display: flex;
            justify-content: center;
            /* Mscara suave para as bordas no ficarem duras */
            -webkit-mask-image: radial-gradient(ellipse at center, black 70%, transparent 100%);
            mask-image: radial-gradient(ellipse at center, black 70%, transparent 100%);
        }

        .npc-img {
            width: 100%;
            height: auto;
            max-height: 75vh;
            object-fit: contain;
            filter: drop-shadow(0 0 20px rgba(0,0,0,0.8));
        }

        /* FADE INFERIOR (Opcional, para misturar ps com o ttulo) */
        .npc-fade-bottom {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20%;
            background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.0) 100%);
        }

        /* --- TTULO DARK FANTASY (LINHA NO MEIO) --- */
        .npc-title-container {
            position: relative;
            width: 120%; /* Um pouco maior que a imagem */
            text-align: center;
            margin-top: -30px; /* Sobe um pouco para sobrepor a base da imagem */
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .npc-title-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #ffcc00, transparent);
            box-shadow: 0 0 10px #ffcc00;
            z-index: 1;
        }

        .npc-title-text {
            font-family: 'Cinzel', serif;
            font-size: 42px;
            color: #ffcc00;
            text-transform: uppercase;
            letter-spacing: 4px;
            margin: 0;
            padding: 0 20px;
            position: relative;
            z-index: 2;
            
            /* Sombra pesada para simular contorno e cortar a linha visualmente */
            text-shadow: 
                3px 3px 0 #000,
                -1px -1px 0 #000,  
                1px -1px 0 #000,
                -1px 1px 0 #000,
                1px 1px 0 #000,
                0 0 20px rgba(0,0,0,0.8);
        }

        /* --- GERENCIADOR (CANTO SUPERIOR DIREITO) --- */
        .npc-manager-overlay { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100vw; 
            height: 100vh; 
            background: rgba(0,0,0,0.0); /* Fundo transparente para ver o NPC */
            z-index: 200020; 
            display: flex; 
            align-items: flex-start; /* Alinha no topo */
            justify-content: flex-end; /* Alinha na direita */
            padding: 80px 30px; /* Espaamento da borda */
            pointer-events: none; /* Permite clicar atravs do overlay vazio */
        }

        .npc-manager-box { 
            width: 400px; /* Mais compacto */
            background: rgba(10, 10, 10, 0.95); 
            border: 1px solid #ffcc00; 
            padding: 20px; 
            border-radius: 4px; 
            box-shadow: 0 0 30px rgba(0,0,0,0.8);
            pointer-events: auto; /* Reativa cliques na caixa */
            backdrop-filter: blur(10px);
        }

        .npc-manager-header { display: flex; justify-content: space-between; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 15px; }
        .npc-manager-header h3 { color: #ffcc00; margin: 0; font-family: 'Cinzel', serif; font-size: 16px; }
        .close-x { background: none; border: none; color: #fff; font-size: 18px; cursor: pointer; }

        .npc-grid-list { 
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; 
            max-height: 30vh; overflow-y: auto; margin-bottom: 15px; padding: 5px; 
            background: rgba(0,0,0,0.5); border: 1px solid #333;
        }
        .npc-thumb { height: 80px; border: 1px solid #444; cursor: pointer; opacity: 0.6; transition: 0.2s; overflow: hidden; border-radius: 4px; }
        .npc-thumb:hover { opacity: 1; border-color: #fff; }
        .npc-thumb.selected { border-color: #ffcc00; opacity: 1; box-shadow: 0 0 10px rgba(255, 204, 0, 0.2); }
        .npc-thumb img { width: 100%; height: 100%; object-fit: cover; }

        .npc-controls-row { display: flex; gap: 8px; flex-direction: column; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #333; }
        .npc-controls-row input { background: #000; border: 1px solid #444; color: #fff; padding: 8px; font-family: 'Cinzel', serif; outline: none; font-size: 14px; }
        .npc-controls-row input:focus { border-color: #ffcc00; }
        
        .btn-group { display: flex; gap: 5px; }
        .btn-npc-action { flex: 1; padding: 8px; font-weight: bold; cursor: pointer; border: none; font-family: 'Cinzel', serif; transition: 0.2s; font-size: 12px; }
        .btn-npc-action.visible { background: #ffcc00; color: #000; }
        .btn-npc-action.visible:hover { background: #fff; }
        .btn-npc-action.hidden { background: #222; color: #aaa; border: 1px solid #444; }
        .btn-npc-action.hidden:hover { border-color: #fff; color: #fff; }

        .current-npc-controls { background: rgba(255, 204, 0, 0.05); padding: 10px; border: 1px solid #ffcc00; border-radius: 4px; }
        .current-npc-controls h4 { margin: 0 0 8px 0; color: #ffcc00; font-size: 12px; }
        .active-actions { display: flex; gap: 5px; }
        .toggle-btn { flex: 2; padding: 8px; font-weight: bold; cursor: pointer; border: none; transition: 0.3s; font-size: 11px; }
        .toggle-btn.is-on { background: #0f0; color: #000; box-shadow: 0 0 5px #0f0; }
        .toggle-btn.is-off { background: #f44; color: #fff; }
        .remove-btn { flex: 1; background: transparent; border: 1px solid #f44; color: #f44; cursor: pointer; font-size: 11px; font-weight: bold; }
        .remove-btn:hover { background: #f44; color: #fff; }
        .empty-msg { color: #666; text-align: center; padding: 15px; font-style: italic; font-size: 12px; }
      `})]})}const H5=[{type:"d4",sides:4,label:"D4"},{type:"d6",sides:6,label:"D6"},{type:"d8",sides:8,label:"D8"},{type:"d10",sides:10,label:"D10"},{type:"d12",sides:12,label:"D12"},{type:"d20",sides:20,label:"D20"},{type:"d100",sides:100,label:"D100"}],lA=({sessaoId:i,playerName:e,onClose:n})=>{const[s,o]=w.useState({d4:0,d6:0,d8:0,d10:0,d12:0,d20:0,d100:0}),[u,f]=w.useState(""),[m,g]=w.useState(!1),b=(E,T)=>{o(M=>({...M,[E]:Math.max(0,M[E]+T)}))},v=async()=>{if(Object.values(s).reduce((Q,G)=>Q+G,0)===0)return alert("Selecione pelo menos um dado!");g(!0),n();let T=0,M=[];Object.keys(s).forEach(Q=>{const G=s[Q],W=parseInt(Q.substring(1));for(let le=0;le<G;le++){const he=Math.floor(Math.random()*W)+1;T+=he,M.push({die:Q,value:he})}});let B=0;if(u){const Q=u.replace(/\s/g,"");B=parseInt(Q),isNaN(B)&&(B=0)}const L=T+B,O={playerName:e,rolls:M,modifier:B,total:L,timestamp:Date.now()};try{const Q=Pe(_e,"sessoes",i);await tt(Q,{latest_roll:O})}catch(Q){console.error("Erro ao rolar dados:",Q)}};return c.jsxs("div",{className:"dice-modal-overlay",children:[c.jsxs("div",{className:"dice-selector-box",children:[c.jsxs("div",{className:"ds-header",children:[c.jsx("h3",{children:"CAIXA DE DADOS"}),c.jsx("button",{className:"ds-close-btn",onClick:n,children:""})]}),c.jsx("div",{className:"ds-grid",children:H5.map(E=>c.jsxs("div",{className:"die-control",children:[c.jsx("span",{className:"die-label",children:E.label}),c.jsxs("div",{className:"die-actions",children:[c.jsx("button",{onClick:()=>b(E.type,-1),children:"-"}),c.jsx("span",{className:`die-count ${s[E.type]>0?"active":""}`,children:s[E.type]}),c.jsx("button",{onClick:()=>b(E.type,1),children:"+"})]})]},E.type))}),c.jsxs("div",{className:"ds-footer",children:[c.jsxs("div",{className:"mod-input-group",children:[c.jsx("label",{children:"MODIFICADOR"}),c.jsx("input",{type:"text",placeholder:"+0",value:u,onChange:E=>f(E.target.value)})]}),c.jsx("button",{className:"btn-roll-final",onClick:v,disabled:m,children:m?"...":"ROLAR DADOS"})]})]}),c.jsx("style",{children:`
         .dice-modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.6); z-index: 20000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(2px); }
         /* AUMENTADO A LARGURA PARA 400px PARA CABER O BOTO */
         .dice-selector-box { background: #0d0d15; border: 2px solid #ffcc00; padding: 25px; border-radius: 8px; width: 400px; box-shadow: 0 0 30px rgba(255, 204, 0, 0.2); box-sizing: border-box; }
         .ds-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px; }
         .ds-header h3 { margin: 0; color: #ffcc00; font-family: 'Cinzel', serif; }
         .ds-close-btn { background: none; border: none; color: #fff; font-size: 20px; cursor: pointer; }
         
         .ds-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 25px; }
         .die-control { background: rgba(255,255,255,0.05); padding: 8px 12px; border-radius: 4px; display: flex; justify-content: space-between; align-items: center; }
         .die-label { color: #00f2ff; font-weight: bold; font-family: sans-serif; font-size: 14px; }
         .die-actions { display: flex; align-items: center; gap: 8px; }
         .die-actions button { background: #333; border: 1px solid #555; color: #fff; width: 24px; height: 24px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
         .die-actions button:hover { background: #ffcc00; color: #000; border-color: #ffcc00; }
         .die-count { width: 20px; text-align: center; font-weight: bold; color: #555; }
         .die-count.active { color: #fff; text-shadow: 0 0 5px #fff; }

         /* AJUSTE DO FOOTER PARA O BOTO NO SAIR */
         .ds-footer { display: flex; gap: 15px; align-items: flex-end; width: 100%; }
         .mod-input-group { width: 100px; display: flex; flex-direction: column; }
         .mod-input-group label { font-size: 10px; color: #aaa; margin-bottom: 4px; font-weight: bold; }
         .mod-input-group input { width: 100%; background: #000; border: 1px solid #444; color: #fff; padding: 10px; border-radius: 4px; text-align: center; font-weight: bold; font-size: 16px; outline: none; box-sizing: border-box; }
         .mod-input-group input:focus { border-color: #ffcc00; }
         
         .btn-roll-final { flex: 1; background: linear-gradient(45deg, #ffcc00, #d4a000); border: none; padding: 0 20px; color: #000; font-weight: bold; border-radius: 4px; cursor: pointer; font-family: 'Cinzel', serif; font-size: 16px; height: 44px; display: flex; align-items: center; justify-content: center; white-space: nowrap; }
         .btn-roll-final:hover { filter: brightness(1.2); box-shadow: 0 0 15px #ffcc00; }
         .btn-roll-final:disabled { opacity: 0.5; cursor: not-allowed; }
       `})]})},cA=({rollData:i,onClose:e})=>i?c.jsxs("div",{className:"dice-result-overlay",children:[c.jsxs("div",{className:"dice-result-content fade-in-scale",children:[c.jsxs("div",{className:"dr-title",children:[c.jsx("span",{className:"dr-player-name",children:i.playerName}),c.jsx("span",{className:"dr-action",children:"ROLOU OS DADOS"})]}),c.jsx("div",{className:"dr-dice-list",children:i.rolls.map((n,s)=>c.jsxs("div",{className:`dr-die die-${n.die}`,children:[c.jsx("span",{className:"die-icon-bg",children:""}),c.jsx("span",{className:"die-val",children:n.value}),c.jsx("span",{className:"die-type",children:n.die})]},s))}),c.jsxs("div",{className:"dr-calculation",children:[c.jsxs("span",{className:"calc-label",children:["SOMA: ",i.rolls.reduce((n,s)=>n+s.value,0)]}),c.jsxs("span",{className:"calc-mod",children:["MOD: ",i.modifier>=0?`+${i.modifier}`:i.modifier]})]}),c.jsxs("div",{className:"dr-total",children:[c.jsx("span",{className:"total-label",children:"RESULTADO"}),c.jsx("span",{className:"total-value",children:i.total})]}),c.jsx("button",{className:"dr-close-btn",onClick:e,children:"FECHAR"})]}),c.jsx("style",{children:`
         .dice-result-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 19000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
         .dice-result-content { text-align: center; color: #fff; max-width: 80%; }
         .fade-in-scale { animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
         @keyframes popIn { 0% { opacity: 0; transform: scale(0.5); } 100% { opacity: 1; transform: scale(1); } }
         
         .dr-title { margin-bottom: 30px; }
         .dr-player-name { display: block; font-size: 32px; color: #ffcc00; font-family: 'Cinzel', serif; font-weight: bold; text-shadow: 0 0 10px #ffcc00; }
         .dr-action { font-size: 14px; color: #aaa; letter-spacing: 2px; }

         .dr-dice-list { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-bottom: 30px; }
         .dr-die { position: relative; width: 80px; height: 80px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
         .die-icon-bg { font-size: 80px; position: absolute; color: rgba(255,255,255,0.1); z-index: 0; }
         .die-val { font-size: 36px; font-weight: bold; color: #fff; z-index: 1; text-shadow: 0 2px 4px #000; }
         .die-type { font-size: 12px; color: #00f2ff; z-index: 1; margin-top: -5px; text-transform: uppercase; font-weight: bold; }
         
         .die-d20 .die-val { color: #ffcc00; } /* Destaque pro D20 */

         .dr-calculation { font-family: monospace; color: #aaa; font-size: 18px; margin-bottom: 10px; display: flex; gap: 20px; justify-content: center; }
         
         .dr-total { margin-bottom: 30px; background: linear-gradient(90deg, transparent, rgba(255,204,0,0.2), transparent); padding: 10px; }
         .total-label { display: block; font-size: 14px; color: #ffcc00; letter-spacing: 3px; margin-bottom: 5px; }
         .total-value { font-size: 64px; font-weight: bold; color: #fff; line-height: 1; text-shadow: 0 0 20px #ffcc00; }

         .dr-close-btn { background: transparent; border: 2px solid #555; color: #aaa; padding: 10px 40px; cursor: pointer; border-radius: 30px; font-weight: bold; transition: 0.3s; pointer-events: auto; }
         .dr-close-btn:hover { border-color: #ffcc00; color: #ffcc00; background: rgba(255,255,255,0.1); }
       `})]}):null,q5=({onClose:i,disponibilidades:e,sessoes:n})=>{const[s,o]=w.useState(new Date),[u,f]=w.useState(null),m=(G,W)=>new Date(G,W+1,0).getDate(),g=(G,W)=>new Date(G,W,1).getDay(),b=s.getFullYear(),v=s.getMonth(),E=m(b,v),T=g(b,v),M=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],B=()=>o(new Date(b,v-1,1)),L=()=>o(new Date(b,v+1,1)),O=[...e.map(G=>({...G,type:"slot",dateObj:new Date(G.start)})),...n.map(G=>({...G,type:"session",dateObj:new Date(G.dataInicio)}))],Q=()=>{const G=[];for(let W=0;W<T;W++)G.push(c.jsx("div",{className:"cal-day empty"},`empty-${W}`));for(let W=1;W<=E;W++){const le=O.filter(he=>{const pe=he.dateObj;return pe.getDate()===W&&pe.getMonth()===v&&pe.getFullYear()===b});G.push(c.jsxs("div",{className:"cal-day",children:[c.jsx("span",{className:"cal-day-number",children:W}),c.jsx("div",{className:"cal-events-list",children:le.map((he,pe)=>c.jsxs("div",{className:`cal-event-pill ${he.type}`,onClick:I=>{I.stopPropagation(),f(he)},title:he.type==="session"?he.missaoNome:"Disponvel",children:[he.dateObj.getHours(),":",String(he.dateObj.getMinutes()).padStart(2,"0")," ",he.type==="session"?"":""]},pe))})]},W))}return G};return c.jsxs("div",{className:"ff-modal-overlay-calendar",children:[c.jsxs("div",{className:"ff-modal-calendar ff-card",children:[c.jsxs("div",{className:"cal-header",children:[c.jsx("button",{onClick:B,children:""}),c.jsxs("h2",{children:[M[v]," ",b]}),c.jsx("button",{onClick:L,children:""}),c.jsx("button",{className:"btn-close-cal",onClick:i,children:"FECHAR"})]}),c.jsxs("div",{className:"cal-grid-header",children:[c.jsx("div",{children:"DOM"}),c.jsx("div",{children:"SEG"}),c.jsx("div",{children:"TER"}),c.jsx("div",{children:"QUA"}),c.jsx("div",{children:"QUI"}),c.jsx("div",{children:"SEX"}),c.jsx("div",{children:"SB"})]}),c.jsx("div",{className:"cal-grid-body",children:Q()}),u&&c.jsx("div",{className:"mini-modal-overlay",children:c.jsxs("div",{className:"mini-modal detail",children:[u.type==="session"?c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{color:"#f44"},children:" SESSO AGENDADA"}),c.jsx("h3",{children:u.missaoNome}),c.jsxs("p",{children:[c.jsx("strong",{children:"Horrio:"})," ",new Date(u.dataInicio).toLocaleString()]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Narrador:"})," ",u.mestreNome]}),c.jsxs("div",{className:"detail-players",children:[c.jsx("strong",{children:"Jogadores:"}),u.participantes?.join(", ")||"Nenhum"]})]}):c.jsxs(c.Fragment,{children:[c.jsx("h4",{style:{color:"#0f0"},children:" HORRIO DISPONVEL"}),c.jsxs("p",{children:[c.jsx("strong",{children:"Data:"})," ",new Date(u.start).toLocaleString()]}),c.jsx("p",{children:"O Mestre est livre neste horrio."})]}),c.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"10px",width:"100%"},onClick:()=>f(null),children:"FECHAR"})]})})]}),c.jsx("style",{children:`
        .ff-modal-calendar { width: 90vw; height: 90vh; background: #0f172a; border: 2px solid #fbbf24; display: flex; flex-direction: column; padding: 20px; box-shadow: 0 0 50px #000; }
        .cal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; font-size: 1.5rem; color: #fbbf24; }
        .cal-header button { background: transparent; border: 1px solid #fbbf24; color: #fbbf24; cursor: pointer; padding: 5px 15px; font-weight: bold; }
        .btn-close-cal { background: #f44 !important; border-color: #f44 !important; color: #fff !important; }
        .cal-grid-header { display: grid; grid-template-columns: repeat(7, 1fr); text-align: center; color: #94a3b8; font-weight: bold; margin-bottom: 10px; }
        .cal-grid-body { display: grid; grid-template-columns: repeat(7, 1fr); grid-auto-rows: 1fr; gap: 5px; flex: 1; overflow-y: auto; }
        .cal-day { background: #1e293b; border: 1px solid #334155; padding: 5px; min-height: 100px; position: relative; display: flex; flex-direction: column; }
        .cal-day.empty { background: transparent; border: none; }
        .cal-day-number { font-weight: bold; color: #64748b; font-size: 0.9rem; align-self: flex-end; }
        .cal-events-list { display: flex; flex-direction: column; gap: 3px; margin-top: 5px; }
        .cal-event-pill { font-size: 0.75rem; padding: 2px 4px; border-radius: 3px; cursor: pointer; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .cal-event-pill.session { background: #7f1d1d; color: #fca5a5; border: 1px solid #f87171; }
        .cal-event-pill.slot { background: #064e3b; color: #6ee7b7; border: 1px solid #34d399; }
        .mini-modal-overlay { position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; z-index: 20; }
        .mini-modal { background: #020617; border: 1px solid #fbbf24; padding: 20px; width: 300px; border-radius: 8px; box-shadow: 0 0 20px #000; }
        .mini-modal.detail { width: 400px; }
        .mini-modal h4 { color: #fbbf24; margin: 0 0 10px 0; }
        
        /* CORREO DO Z-INDEX DO CALENDRIO */
        .ff-modal-overlay-calendar { 
          position: fixed; 
          top: 0; 
          left: 0; 
          width: 100vw; 
          height: 100vh; 
          background: rgba(0,0,0,0.95); 
          z-index: 99999; /* Z-INDEX ALTSSIMO PARA SOBREPOR TUDO */
          display: flex; 
          align-items: center; 
          justify-content: center; 
          backdrop-filter: blur(5px); 
        }
      `})]})},F5=({targetDate:i})=>{const[e,n]=w.useState("");return w.useEffect(()=>{const s=()=>{const u=new Date().getTime(),f=new Date(i).getTime()-u;if(f<0)n("AGORA");else{const m=Math.floor(f/864e5),g=Math.floor(f%(1e3*60*60*24)/(1e3*60*60)),b=Math.floor(f%(1e3*60*60)/(1e3*60)),v=Math.floor(f%(1e3*60)/1e3);n(`${m}d ${g}h ${b}m ${v}s`)}};s();const o=setInterval(s,1e3);return()=>clearInterval(o)},[i]),c.jsx("span",{className:"countdown-text",children:e})},G5=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M14.5 17.5L3 6V3h3l11.5 11.5"}),c.jsx("path",{d:"M13 19l6-6"}),c.jsx("path",{d:"M16 16l4 4"}),c.jsx("path",{d:"M19 21l2-2"})]}),$5=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),c.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),Y5=i=>i?{__html:i.replace(/\*(.*?)\*/g,"<strong>$1</strong>").replace(/_(.*?)_/g,"<em>$1</em>").replace(/\n/g,"<br />")}:{__html:""};function K5(){const i=Ji(),[e,n]=w.useState(null),[s,o]=w.useState(!0),[u,f]=w.useState([]),[m,g]=w.useState([]),[b,v]=w.useState([]),[E,T]=w.useState([]),[M,B]=w.useState(!1),[L,O]=w.useState(new Date),[Q,G]=w.useState(!1),[W,le]=w.useState(null),[he,pe]=w.useState(null),[I,C]=w.useState([]),[k,P]=w.useState(!1),[j,R]=w.useState(null),[S,Te]=w.useState(null),[ne,F]=w.useState(null),[re,ye]=w.useState(!1),[Be,Ue]=w.useState(!1),[V,ae]=w.useState([]),[ge,Ee]=w.useState(!1),[Se,je]=w.useState(null),[De,gt]=w.useState({x:280,y:100}),[Ne,mt]=w.useState(!1),[ct,Xt]=w.useState({x:0,y:0}),[an,Ft]=w.useState(!1),[me,Ce]=w.useState(null),U=w.useRef(0),[fe,de]=w.useState(0),[be,Ge]=w.useState(!1),Me=w.useRef(null),It=w.useRef(new Audio(z5)),[et,Jt]=w.useState(!1);w.useEffect(()=>{Ut&&(Ut.pause(),Ut.currentTime=0)},[]),w.useEffect(()=>{It.current.volume=.2;const J=setInterval(()=>O(new Date),1e3);return()=>clearInterval(J)},[]),w.useEffect(()=>{const J=[],Ye=[];m.forEach(We=>{const sn=new Date(We.dataInicio),$t=new Date(We.expiraEm);L>=sn&&L<=$t?J.push(We):L<sn&&Ye.push(We)}),v(J),T(Ye)},[L,m]),w.useEffect(()=>{const J=setTimeout(()=>{Jt(!0)},2e3);return()=>clearTimeout(J)},[]),w.useEffect(()=>{let J=()=>{},Ye=()=>{},We=()=>{};const sn=lf(Ot,$t=>{if($t){const rn=Pe(_e,"characters",$t.uid);J=jn(rn,He=>{if(He.exists()){const Ht=He.data(),Jn=Ht.character_sheet?.basic_info?.level||1;Me.current!==null&&Jn>Me.current&&(Ge(!0),It.current.currentTime=0,It.current.play().catch(console.error)),Me.current=Jn,n(Ht),o(!1)}else o(!1)});const bt=In(kt(_e,"missoes")),ht=In(kt(_e,"disponibilidades"));Ye=jn(bt,He=>f(He.docs.map(Ht=>({id:Ht.id,...Ht.data()})))),We=jn(ht,He=>ae(He.docs.map(Ht=>({id:Ht.id,...Ht.data()}))))}else o(!1),i("/login")});return()=>{sn(),J(),Ye(),We()}},[i]),w.useEffect(()=>{if(!e)return;const J=In(kt(_e,"sessoes"),ca("participantes","array-contains",e.name)),Ye=jn(J,$t=>{const rn=$t.docs.map(bt=>({id:bt.id,...bt.data()}));if(g(rn),ne){const bt=rn.find(ht=>ht.id===ne.id);if(bt){if(F(bt),bt.latest_roll){const He=bt.latest_roll;He.timestamp>U.current&&Ce(Ht=>!Ht||Ht.timestamp!==He.timestamp?He:Ht)}const ht=bt.connected_players?.includes(Ot.currentUser?.uid);Te(ht?"connected":"waiting")}}}),We=In(kt(_e,"resenhas"),ca("destinatarios","array-contains",e.name)),sn=jn(We,$t=>{const rn=$t.docs.map(ht=>({id:ht.id,...ht.data()})).filter(ht=>new Date(ht.expiraEm)>new Date);C(rn);const bt=parseInt(localStorage.getItem("sanchez_last_read_count")||"0");rn.length>bt?de(rn.length-bt):de(0)});return()=>{Ye(),sn()}},[e,ne?.id]),w.useEffect(()=>{if(!ne||!Ot.currentUser)return;const J=Pe(_e,"sessoes",ne.id),Ye=Ot.currentUser.uid;tt(J,{connected_players:Wd(Ye)}).catch(console.error);const We=()=>{};return window.addEventListener("beforeunload",We),()=>{window.removeEventListener("beforeunload",We),tt(J,{connected_players:Zd(Ye)}).catch(console.error)}},[ne?.id]);const te=()=>{Ge(!1),It.current.pause()},qe=async J=>{if(!e)return;if(J.candidatos?.some(sn=>sn.uid===Ot.currentUser.uid))return alert("J candidatado!");const Ye=!J.candidatos||J.candidatos.length===0,We={uid:Ot.currentUser.uid,nome:e.name,classe:e.class,isLeader:Ye,dataCandidatura:new Date().toISOString()};try{await tt(Pe(_e,"missoes",J.id),{candidatos:Wd(We)}),alert(Ye?"Voc  o LDER DO GRUPO!":"Candidatura realizada!")}catch(sn){console.error(sn),alert("Erro ao candidatar.")}},$e=J=>{F(J),B(!0),Te(new Date>=new Date(J.dataInicio)?"connected":"waiting")},H=()=>{P(!0),localStorage.setItem("sanchez_last_read_count",I.length.toString()),de(0)},xe=()=>{window.open("https://www.canva.com/design/DAGpzszHsc4/NcbQ19hsr4grzm9aotQFtw/edit?utm_content=DAGpzszHsc4&utm_campaign=designshare&utm_medium=link2&utm_source=sharebutton","_blank")},dt=J=>{mt(!0),Xt({x:J.clientX-De.x,y:J.clientY-De.y})},Gt=J=>{Ne&&gt({x:J.clientX-ct.x,y:J.clientY-ct.y})},ft=()=>{mt(!1)};return s||!et?c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",background:"radial-gradient(circle at center, #001a33 0%, #000000 100%)",color:"#ffcc00",fontFamily:"Cinzel, serif",zIndex:9999,position:"fixed",top:0,left:0},children:[c.jsx("img",{src:jf,alt:"Carregando...",style:{width:"100px",marginBottom:"20px"}}),c.jsx("p",{style:{fontSize:"18px",letterSpacing:"2px",textTransform:"uppercase",animation:"pulseText 2s infinite ease-in-out"},children:"Sintonizando ter..."}),c.jsx("style",{children:`
          @keyframes pulseText { 
            0% { opacity: 0.3; } 
            50% { opacity: 1; } 
            100% { opacity: 0.3; } 
          }
        `})]}):e?c.jsxs("div",{className:"jogador-container",onMouseMove:Gt,onMouseUp:ft,children:[c.jsx("div",{className:"background-layer",style:{backgroundImage:`url(${V5})`}}),c.jsxs("div",{className:"content-layer",children:[c.jsxs("div",{className:"char-hud clickable-hud",onClick:()=>ye(!0),title:"Abrir Ficha",children:[c.jsx("div",{className:"char-avatar",children:c.jsx("div",{className:"avatar-circle",children:c.jsx("span",{className:"hud-level",children:e.character_sheet?.basic_info?.level||1})})}),c.jsxs("div",{className:"char-info",children:[c.jsx("h2",{className:"char-name",children:e.name}),c.jsxs("span",{className:"char-meta",children:[e.race," // ",e.class]})]})]}),ne&&ne.active_map&&c.jsx(sA,{sessaoData:ne,isMaster:!1,currentUserUid:Ot.currentUser?.uid,personagensData:[e]}),c.jsx(rA,{sessaoData:ne,isMaster:!1}),c.jsx(oA,{sessaoData:ne,isMaster:!1}),me&&c.jsx(cA,{rollData:me,onClose:()=>{U.current=me.timestamp,Ce(null)}}),an&&ne&&c.jsx(lA,{sessaoId:ne.id,playerName:e.name,onClose:()=>Ft(!1)}),ge&&ne&&c.jsxs("div",{className:"combat-tracker-panel player-view fade-in",style:{top:De.y,left:De.x,zIndex:1e3},children:[c.jsx("div",{className:"tracker-header",onMouseDown:dt,style:{cursor:"grab"},children:c.jsx("h3",{className:"tracker-title",children:"COMBATE"})}),c.jsxs("div",{className:"tracker-list",children:[ne.tokens?.map((J,Ye)=>{if(!(J.visible!==!1))return null;let sn=J.img;J.uid===Ot.currentUser.uid&&e.character_sheet?.imgUrl&&(sn=e.character_sheet.imgUrl);let $t="?",rn="?",bt="?",ht="?";return J.uid===Ot.currentUser.uid?($t=e.character_sheet?.status?.hp?.current,bt=e.character_sheet?.status?.hp?.max,rn=e.character_sheet?.status?.mp?.current,ht=e.character_sheet?.status?.mp?.max):(J.type==="enemy"||J.visibleBars)&&($t=J.stats?.hp?.current,bt=J.stats?.hp?.max,rn=J.stats?.mp?.current,ht=J.stats?.mp?.max),c.jsxs("div",{className:"tracker-item readonly",children:[c.jsxs("div",{className:"t-col-img",children:[c.jsx("div",{className:"t-index",children:Ye+1}),c.jsx("div",{className:"t-img",style:{backgroundImage:`url(${sn})`,backgroundPosition:`${J.imgX||50}% ${J.imgY||50}%`}})]}),c.jsxs("div",{className:"t-col-info",children:[c.jsx("div",{className:"t-name",children:J.name}),c.jsxs("div",{className:"t-stats-row",children:[c.jsxs("div",{className:"t-stat hp",children:[c.jsx("label",{children:"HP"}),c.jsx("span",{children:$t}),bt!=="?"&&c.jsxs("small",{children:["/",bt]})]}),c.jsxs("div",{className:"t-stat mp",children:[c.jsx("label",{children:"MP"}),c.jsx("span",{children:rn}),ht!=="?"&&c.jsxs("small",{children:["/",ht]})]})]})]}),J.type==="enemy"&&c.jsx("div",{className:"t-col-actions",children:c.jsx("button",{className:"btn-icon-sm",title:"Detalhes",onClick:()=>je({...J.details,img:J.img}),children:""})})]},J.id)}),(!ne.tokens||ne.tokens.length===0)&&c.jsx("div",{className:"empty-tracker",children:"Mesa Vazia"})]})]}),Se&&c.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>je(null),children:c.jsxs("div",{className:"monster-detail-card",onClick:J=>J.stopPropagation(),children:[c.jsxs("div",{className:"md-header",children:[c.jsxs("div",{className:"md-title-row",children:[c.jsx("h2",{children:Se.name}),c.jsxs("div",{className:"md-stars",children:[[...Array(Se.stars||1)].map((J,Ye)=>c.jsx("span",{children:""},Ye)),Se.difficultyQ&&c.jsx("span",{className:"md-boss-mark",children:"?"})]})]}),c.jsx("div",{className:"md-sub",children:"Nvel de Ameaa"})]}),c.jsxs("div",{className:"md-body",children:[c.jsx("div",{className:"md-img-col",children:c.jsx("div",{className:"md-portrait",style:{backgroundImage:`url(${Se.img})`}})}),c.jsxs("div",{className:"md-info-col custom-scrollbar",children:[c.jsxs("div",{className:"md-block",children:[c.jsx("label",{children:"DESCRIO"}),c.jsx("p",{children:Se.description||"Sem dados disponveis."})]}),Se.drops&&c.jsxs("div",{className:"md-block",children:[c.jsx("label",{children:"DROPS CONHECIDOS"}),c.jsx("p",{children:Se.drops})]})]})]}),c.jsx("button",{className:"md-close-btn",onClick:()=>je(null),children:"FECHAR"})]})}),be&&c.jsx("div",{className:"levelup-global-overlay",children:c.jsxs("div",{className:"levelup-content",children:[c.jsx("h1",{className:"levelup-title",children:"LEVEL UP!"}),c.jsx("button",{className:"levelup-confirm-btn",onClick:te,children:"CONFIRMAR"})]})}),E.length>0&&b.length===0&&!M&&c.jsxs("div",{className:"upcoming-sessions-banner",children:[c.jsx("h3",{children:"A SESSO VAI COMEAR EM BREVE"}),E.map(J=>c.jsxs("div",{className:"countdown-row",children:[c.jsx("span",{className:"sessao-nome-future",children:J.missaoNome}),c.jsx(F5,{targetDate:J.dataInicio})]},J.id))]}),b.length>0&&!M&&c.jsxs("div",{className:"active-sessions-banner fade-in",children:[c.jsx("h3",{children:"SESSO EM ANDAMENTO!"}),b.map(J=>c.jsxs("div",{className:"session-entry-row",children:[c.jsx("span",{className:"sessao-nome-active",children:J.missaoNome}),c.jsx("button",{className:"btn-enter-session",onClick:()=>$e(J),children:"ENTRAR AGORA"})]},J.id))]}),S&&ne&&c.jsxs("div",{className:`vtt-status-widget ${S}`,children:[c.jsx("div",{className:"status-indicator"}),c.jsx("div",{className:"status-text",children:S==="waiting"?c.jsxs(c.Fragment,{children:[c.jsx("h4",{children:"AGUARDANDO"}),c.jsx("small",{children:"Conectado..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("h4",{children:"ONLINE"}),c.jsx("small",{children:"Na Mesa"})]})})]}),c.jsx("button",{className:"floating-mission-btn",onClick:()=>G(!0),title:"Misses",children:""}),c.jsx("button",{className:"floating-calendar-btn",onClick:()=>Ue(!0),title:"Agenda",children:""}),S==="connected"&&c.jsx("button",{className:"floating-combat-btn",onClick:()=>Ee(!ge),title:"Ver Combate",children:c.jsx(G5,{})}),S==="connected"&&c.jsx("button",{className:"floating-dice-btn",onClick:()=>Ft(!0),title:"Rolar Dados",children:""}),I.length>0&&c.jsxs("button",{className:"floating-sanchez-btn",onClick:H,title:"Resenhas",children:[c.jsx("div",{className:"sanchez-icon-face",style:{backgroundImage:`url(${Tm})`}}),fe>0&&c.jsx("span",{className:"notification-badge",children:fe})]}),c.jsx("button",{className:"floating-book-btn",onClick:xe,title:"Livro do Jogo",children:c.jsx($5,{})}),c.jsx(zg,{isMestre:!1,playerData:e}),Be&&c.jsx(q5,{onClose:()=>Ue(!1),disponibilidades:V,sessoes:m}),Q&&c.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>G(!1),children:c.jsxs("div",{className:"ff-modal-compact ff-card",onClick:J=>J.stopPropagation(),children:[c.jsxs("div",{className:"modal-header-compact",children:[c.jsx("h3",{className:"modal-title-ff",children:"QUADRO DE CONTRATOS"}),c.jsx("button",{className:"btn-close-x",onClick:()=>G(!1),children:""})]}),c.jsx("div",{className:"missions-grid-compact",children:u.map(J=>c.jsxs("div",{className:`mission-card-compact rank-${J.rank}`,children:[c.jsx("div",{className:"mc-left",children:c.jsx("span",{className:"mc-rank",children:J.rank})}),c.jsxs("div",{className:"mc-center",children:[c.jsx("h4",{className:"mc-title",children:J.nome}),c.jsxs("span",{className:"mc-reward",children:[" ",J.gilRecompensa," Gil"]})]}),c.jsxs("div",{className:"mc-right",children:[c.jsx("button",{className:"btn-details-mini",onClick:()=>le(J),children:"Ver Detalhes"}),c.jsx("button",{className:"btn-accept-mini",onClick:()=>qe(J),children:"ACEITAR"})]})]},J.id))})]})}),W&&c.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>le(null),style:{zIndex:1e5},children:c.jsxs("div",{className:"ff-modal-details-wide ff-card",onClick:J=>J.stopPropagation(),children:[c.jsxs("div",{className:"detail-wide-header",children:[c.jsx("div",{className:"dw-rank-badge",children:W.rank}),c.jsxs("div",{className:"dw-title-box",children:[c.jsx("h2",{children:W.nome}),c.jsxs("span",{className:"dw-narrator",children:["Narrador: ",W.mestreNome]})]}),c.jsxs("div",{className:"dw-vagas-box",children:[c.jsxs("span",{className:"dw-vagas-label",children:["Grupo: ",W.candidatos?W.candidatos.length:0," / ",W.grupo||"?"]}),c.jsx("div",{className:"dw-vagas-bar",children:c.jsx("div",{style:{width:`${Math.min((W.candidatos?.length||0)/(parseInt(W.grupo)||1)*100,100)}%`}})})]})]}),c.jsxs("div",{className:"detail-wide-body",children:[c.jsxs("div",{className:"dw-col-left",children:[c.jsxs("div",{className:"dw-info-item",children:[c.jsx("label",{children:" LOCAL"}),c.jsx("span",{children:W.local||"Desconhecido"})]}),c.jsxs("div",{className:"dw-info-item",children:[c.jsx("label",{children:" CONTRATANTE"}),c.jsx("span",{children:W.contratante||"Annimo"})]}),c.jsxs("div",{className:"dw-reward-box",children:[c.jsx("label",{children:"RECOMPENSAS"}),c.jsxs("div",{className:"dw-gil-row",children:[c.jsx("span",{className:"gil-icon",children:""})," ",c.jsxs("span",{className:"gil-val",children:[W.gilRecompensa," GIL"]})]}),W.recompensa&&c.jsx("div",{className:"dw-extra-rewards",children:W.recompensa.split(`
`).map((J,Ye)=>c.jsxs("div",{className:"reward-item",children:[" ",J]},Ye))})]}),c.jsxs("div",{className:"dw-candidates-box",children:[c.jsx("label",{children:"AVENTUREIROS INSCRITOS"}),c.jsx("div",{className:"dw-cand-list",children:W.candidatos&&W.candidatos.length>0?W.candidatos.map((J,Ye)=>c.jsxs("div",{className:"dw-cand-item",style:{color:J.isLeader?"#ffcc00":"#ccc"},children:[J.isLeader?"":""," ",J.nome]},Ye)):c.jsx("span",{style:{fontSize:"11px",color:"#666"},children:"Seja o primeiro!"})})]}),W.imagem&&c.jsx("button",{className:"btn-cartaz-full",onClick:()=>pe(W.imagem),children:" VER CARTAZ"})]}),c.jsxs("div",{className:"dw-col-right custom-scrollbar",children:[c.jsxs("div",{className:"dw-text-block",children:[c.jsx("label",{children:" DESCRIO"}),c.jsx("p",{children:W.descricaoMissao})]}),c.jsxs("div",{className:"dw-text-block",children:[c.jsx("label",{children:" OBJETIVOS"}),c.jsx("p",{children:W.objetivosMissao})]}),c.jsxs("div",{className:"dw-text-block",children:[c.jsx("label",{children:" REQUISITOS"}),c.jsx("p",{children:W.requisitos})]})]})]}),c.jsx("button",{className:"dw-close-btn",onClick:()=>le(null),children:"FECHAR"})]})}),he&&c.jsx("div",{className:"ff-modal-overlay-flex",style:{zIndex:100001},onClick:()=>pe(null),children:c.jsxs("div",{className:"lightbox-wrap",children:[c.jsx("button",{className:"close-lightbox",onClick:()=>pe(null),children:""}),c.jsx("img",{src:he,alt:"Cartaz",className:"cartaz-full-view"})]})}),k&&c.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>P(!1),children:c.jsxs("div",{className:"ff-modal-content ff-card",onClick:J=>J.stopPropagation(),children:[c.jsxs("div",{className:"modal-header-row",children:[c.jsx("h3",{className:"modal-title-ff",children:"RESENHAS"}),c.jsx("button",{className:"btn-close-x",onClick:()=>P(!1),children:""})]}),c.jsx("div",{className:"resenhas-list-container",children:I.map(J=>c.jsx("div",{className:"resenha-row-player",onClick:()=>{R(J),P(!1)},children:c.jsx("h4",{children:J.titulo})},J.id))})]})}),j&&c.jsx("div",{className:"fft-modal-overlay",onClick:()=>R(null),children:c.jsxs("div",{className:"fft-dialog-box",onClick:J=>J.stopPropagation(),children:[c.jsxs("div",{className:"fft-portrait-section",children:[c.jsx("div",{className:"fft-portrait-frame",children:c.jsx("img",{src:Tm,alt:"Sanchez"})}),c.jsx("div",{className:"fft-name-plate",children:"SANCHEZ"})]}),c.jsxs("div",{className:"fft-content-section",children:[c.jsx("h2",{className:"fft-title",children:j.titulo}),c.jsx("div",{className:"fft-scroll-text",dangerouslySetInnerHTML:Y5(j.conteudo)})]}),c.jsx("button",{className:"fft-close-btn",onClick:()=>R(null),children:"X"})]})}),re&&e&&c.jsx(Lg,{characterData:e,isMaster:!1,onClose:()=>ye(!1)})]}),c.jsx("style",{children:`
        /* CSS IGUAL AO ANTERIOR + NOVOS */
        .jogador-container { position: relative; width: 100vw; height: 100vh; overflow: hidden; background: #000; font-family: 'Cinzel', serif; color: white; }
        .background-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; z-index: 0; }
        .content-layer { position: relative; z-index: 10; width: 100%; height: 100%; }
        
        .char-hud { position: absolute; top: 20px; left: 20px; display: flex; align-items: center; gap: 15px; background: rgba(0,0,0,0.8); padding: 15px 25px; border-radius: 50px; border: 1px solid #ffcc00; z-index: 50; cursor: pointer; }
        .avatar-circle { width: 60px; height: 60px; background: #222; border-radius: 50%; border: 2px solid #fff; display: flex; align-items: center; justify-content: center; }
        .hud-level { font-size: 28px; font-weight: bold; color: #ffcc00; }
        .char-info h2 { margin: 0; font-size: 20px; color: #ffcc00; text-shadow: 0 0 10px rgba(255, 204, 0, 0.5); }
        .char-meta { font-size: 12px; color: #00f2ff; }
        
        /* BOTES FLUTUANTES EMPILHADOS */
        .floating-mission-btn { position: fixed; bottom: 30px; left: 15px; width: 50px; height: 50px; border-radius: 50%; border: 2px solid #ffcc00; background: #000; color: #fff; font-size: 24px; cursor: pointer; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-mission-btn:hover { transform: scale(1.1); box-shadow: 0 0 15px #ffcc00; }

        .floating-dice-btn { position: fixed; bottom: 90px; left: 18px; width: 45px; height: 45px; border-radius: 50%; border: 2px solid #fff; background: #111; color: #fff; font-size: 20px; cursor: pointer; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-dice-btn:hover { border-color: #ffcc00; transform: scale(1.1); box-shadow: 0 0 15px #ffcc00; }
        
        .floating-combat-btn { position: fixed; bottom: 150px; left: 18px; width: 45px; height: 45px; border-radius: 50%; border: 2px solid #f44; background: #111; color: #f44; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-combat-btn:hover { border-color: #fff; color: #fff; transform: scale(1.1); box-shadow: 0 0 15px #f44; }

        .floating-sanchez-btn { position: fixed; bottom: 210px; left: 15px; width: 50px; height: 50px; border-radius: 50%; border: 2px solid #00f2ff; background: #000; cursor: pointer; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-sanchez-btn:hover { transform: scale(1.1); box-shadow: 0 0 15px #00f2ff; }

        .floating-book-btn { position: fixed; bottom: 270px; left: 15px; width: 50px; height: 50px; border-radius: 50%; border: 2px solid #fff; background: #000; color: #fff; cursor: pointer; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-book-btn:hover { transform: scale(1.1); box-shadow: 0 0 15px #fff; border-color: #ffcc00; color: #ffcc00; }

        /* NOVO BOTO AGENDA */
        .floating-calendar-btn { position: fixed; bottom: 330px; left: 15px; width: 50px; height: 50px; border-radius: 50%; border: 2px solid #22c55e; background: #000; color: #22c55e; cursor: pointer; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; font-size: 24px; }
        .floating-calendar-btn:hover { transform: scale(1.1); box-shadow: 0 0 15px #22c55e; color: #fff; border-color: #fff; }

        .sanchez-icon-face { width: 100%; height: 100%; border-radius: 50%; background-size: cover; opacity: 0.8; }
        .floating-sanchez-btn:hover .sanchez-icon-face { opacity: 1; }
        .notification-badge { position: absolute; top: -2px; right: -2px; background: #f00; color: #fff; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; border: 1px solid #fff; font-weight: bold; font-size: 10px; z-index: 1000; box-shadow: 0 0 5px #000; }
        
        /* TRACKER VISUAL PLAYER */
        .combat-tracker-panel { 
            position: absolute; 
            width: 300px; 
            max-height: 70vh; 
            background: linear-gradient(180deg, #0d0d10 0%, #000 100%);
            border: 2px solid #b8860b; 
            border-radius: 6px; 
            z-index: 55; 
            display: flex; flex-direction: column; 
            box-shadow: 0 0 25px rgba(0,0,0,0.9);
        }
        .tracker-header { background: #15100a; border-bottom: 2px solid #b8860b; padding: 10px; text-align: center; }
        .tracker-title { color: #ffcc00; margin: 0; font-family: 'Cinzel', serif; letter-spacing: 3px; font-size: 16px; text-shadow: 0 0 5px #ffcc00; }
        .tracker-list { flex: 1; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 8px; }
        
        .tracker-item { display: flex; align-items: center; background: rgba(20, 20, 25, 0.9); border: 1px solid #444; border-radius: 4px; padding: 8px 5px; gap: 8px; transition: 0.2s; }
        .tracker-item:hover { border-color: #ffcc00; }
        .t-col-img { display: flex; flex-direction: column; align-items: center; width: 45px; flex-shrink: 0; }
        .t-index { color: #666; font-size: 10px; font-weight: bold; margin-bottom: 2px; }
        .t-img { width: 40px; height: 40px; border-radius: 50%; background-size: cover; border: 1px solid #777; box-shadow: 0 0 5px #000; }
        .t-col-info { flex: 1; display: flex; flex-direction: column; gap: 4px; overflow: hidden; }
        .t-name { font-size: 13px; font-weight: bold; color: #eec; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .t-stats-row { display: flex; gap: 5px; }
        .t-stat { display: flex; align-items: center; font-size: 11px; background: #080808; padding: 2px 5px; border-radius: 3px; border: 1px solid #333; }
        .t-stat label { margin-right: 4px; font-weight: bold; font-size: 9px; }
        .t-stat.hp label { color: #f44; } .t-stat.mp label { color: #00f2ff; }
        .t-stat span { color: #fff; font-weight: bold; }
        .t-stat small { color: #555; margin-left: 2px; font-size: 9px; }
        .t-col-actions { display: flex; gap: 6px; align-items: center; margin-left: auto; }
        .btn-icon-sm { background: #222; border: 1px solid #555; color: #ccc; width: 22px; height: 22px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center; border-radius: 3px; }
        .btn-icon-sm:hover { border-color: #ffcc00; color: #fff; }
        .empty-tracker { text-align: center; padding: 30px; color: #666; font-style: italic; font-size: 12px; font-family: 'serif'; }

        /* MONSTER DETAIL MODAL DARK FANTASY */
        .monster-detail-card { 
            width: 500px; max-width: 95vw;
            background: #0d0d10 url('https://www.transparenttextures.com/patterns/dark-matter.png');
            border: 2px solid #b8860b;
            box-shadow: 0 0 50px rgba(0,0,0,0.9), inset 0 0 100px rgba(0,0,0,0.8);
            border-radius: 8px; overflow: hidden; display: flex; flex-direction: column;
        }
        .md-header { background: linear-gradient(90deg, #15100a, #000); padding: 15px 20px; border-bottom: 1px solid #b8860b; }
        .md-title-row { display: flex; justify-content: space-between; align-items: center; }
        .md-title-row h2 { margin: 0; font-family: 'Cinzel', serif; color: #ffcc00; font-size: 20px; letter-spacing: 2px; }
        .md-stars { color: #ffd700; font-size: 14px; text-shadow: 0 0 5px #ffd700; }
        .md-boss-mark { color: #f44; font-weight: bold; margin-left: 5px; font-size: 16px; }
        .md-sub { font-size: 12px; color: #888; margin-top: 5px; font-style: italic; }
        .md-body { display: flex; padding: 20px; gap: 20px; min-height: 250px; }
        .md-img-col { width: 120px; flex-shrink: 0; }
        .md-portrait { width: 120px; height: 120px; border: 2px solid #444; border-radius: 4px; background-size: cover; background-position: center; box-shadow: 0 0 15px #000; }
        .md-info-col { flex: 1; overflow-y: auto; max-height: 400px; padding-right: 5px; }
        .md-block { margin-bottom: 15px; }
        .md-block label { display: block; color: #b8860b; font-size: 10px; font-weight: bold; border-bottom: 1px solid #333; margin-bottom: 5px; }
        .md-block p { margin: 0; font-size: 13px; color: #ccc; line-height: 1.4; white-space: pre-wrap; }
        .md-close-btn { width: 100%; padding: 15px; background: #111; color: #fff; border: none; border-top: 1px solid #b8860b; font-family: 'Cinzel', serif; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .md-close-btn:hover { background: #b8860b; color: #000; }

        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        /* OUTROS ESTILOS (Sesso, VTT Widget, etc) */
        .vtt-status-widget { position: fixed; top: 20px; right: 20px; background: rgba(0,0,0,0.9); border: 2px solid; padding: 15px; border-radius: 8px; display: flex; align-items: center; gap: 15px; z-index: 90; width: 200px; }
        .vtt-status-widget.waiting { border-color: #ffcc00; }
        .vtt-status-widget.connected { border-color: #0f0; }
        .status-indicator { width: 15px; height: 15px; border-radius: 50%; background: #fff; }
        .waiting .status-indicator { background: #ffcc00; }
        .connected .status-indicator { background: #0f0; }
        .status-text h4 { margin: 0; font-size: 14px; color: #fff; }
        .status-text small { font-size: 11px; color: #ccc; }
        
        .upcoming-sessions-banner { position: absolute; top: 150px; left: 50%; transform: translateX(-50%); background: rgba(13, 13, 21, 0.95); border: 2px solid #ffcc00; padding: 30px 50px; border-radius: 8px; text-align: center; z-index: 80; min-width: 400px; }
        .upcoming-sessions-banner h3 { color: #ffcc00; margin: 0 0 15px 0; font-size: 20px; letter-spacing: 2px; }
        .countdown-row { display: flex; justify-content: space-between; align-items: center; gap: 20px; margin-top: 10px; }
        .sessao-nome-future { font-size: 16px; color: #fff; text-transform: uppercase; }
        .countdown-text { color: #00f2ff; font-family: monospace; font-size: 24px; font-weight: bold; }

        .active-sessions-banner { position: absolute; top: 150px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, rgba(20, 0, 0, 0.95), rgba(0,0,0,0.95)); border: 2px solid #f44; padding: 30px 50px; border-radius: 12px; text-align: center; z-index: 80; min-width: 450px; animation: pulseBanner 2s infinite; }
        @keyframes pulseBanner { 0% { box-shadow: 0 0 20px rgba(255,0,0,0.2); } 50% { box-shadow: 0 0 50px rgba(255,0,0,0.5); } 100% { box-shadow: 0 0 20px rgba(255,0,0,0.2); } }
        .session-entry-row { display: flex; justify-content: space-between; align-items: center; gap: 30px; }
        .sessao-nome-active { font-size: 18px; color: #fff; font-weight: bold; text-transform: uppercase; }
        .btn-enter-session { background: #f00; color: #fff; border: none; padding: 12px 30px; cursor: pointer; font-weight: bold; font-size: 16px; border-radius: 4px; }
        
        .ff-modal-overlay-flex { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 99999; display: flex; align-items: center; justify-content: center; }
        .ff-modal-content { width: 600px; background: #0d0d15; border: 2px solid #ffcc00; padding: 25px; border-radius: 8px; }
        .modal-header-row { display: flex; justify-content: space-between; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 15px; }
        .modal-title-ff { color: #ffcc00; margin: 0; }
        .btn-close-x { background: none; border: none; color: #fff; font-size: 24px; cursor: pointer; }
        
        .ff-modal-compact { width: 650px; background: #050505; border: 2px solid #ffcc00; padding: 20px; border-radius: 8px; max-height: 80vh; display: flex; flex-direction: column; }
        .modal-header-compact { display: flex; justify-content: space-between; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px; align-items: center; }
        .missions-grid-compact { overflow-y: auto; padding-right: 5px; display: grid; grid-template-columns: 1fr; gap: 10px; }
        .mission-card-compact { display: flex; background: rgba(255,255,255,0.05); border: 1px solid #333; border-radius: 4px; padding: 10px; align-items: center; transition: 0.2s; }
        .mission-card-compact:hover { border-color: #ffcc00; background: rgba(255,204,0,0.05); }
        .mc-left { width: 50px; display: flex; justify-content: center; font-size: 24px; font-weight: bold; color: #444; }
        .mc-center { flex: 1; padding: 0 15px; }
        .mc-title { margin: 0; font-size: 16px; color: #fff; text-transform: uppercase; }
        .mc-reward { font-size: 12px; color: #ffcc00; }
        .mc-right { display: flex; gap: 10px; }
        .btn-details-mini { background: transparent; border: 1px solid #00f2ff; color: #00f2ff; padding: 5px 10px; font-size: 10px; cursor: pointer; text-transform: uppercase; }
        .btn-accept-mini { background: #00f2ff; color: #000; border: none; padding: 5px 15px; font-size: 10px; font-weight: bold; cursor: pointer; }

        .ff-modal-details-wide { width: 800px; height: 500px; background: #000814; border: 2px solid #ffcc00; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 0 50px #000; border-radius: 6px; }
        .detail-wide-header { height: 70px; background: linear-gradient(90deg, #111, #000); border-bottom: 1px solid #333; display: flex; align-items: center; padding: 0 20px; gap: 20px; }
        .dw-rank-badge { font-size: 36px; font-weight: bold; color: #333; text-shadow: -1px -1px 0 #ffcc00; }
        .dw-title-box h2 { margin: 0; color: #fff; font-size: 22px; text-transform: uppercase; letter-spacing: 1px; }
        .dw-narrator { font-size: 11px; color: #00f2ff; text-transform: uppercase; }
        .dw-vagas-box { flex: 1; display: flex; flex-direction: column; align-items: flex-end; justify-content: center; }
        .dw-vagas-label { font-size: 10px; color: #888; margin-bottom: 3px; }
        .dw-vagas-bar { width: 120px; height: 4px; background: #222; border-radius: 2px; overflow: hidden; }
        .dw-vagas-bar div { height: 100%; background: #0f0; transition: width 0.3s; }
        .detail-wide-body { flex: 1; display: flex; overflow: hidden; }
        .dw-col-left { width: 300px; background: rgba(255,255,255,0.02); border-right: 1px solid #333; padding: 20px; display: flex; flex-direction: column; gap: 20px; overflow-y: auto; }
        .dw-info-item label { display: block; font-size: 10px; color: #ffcc00; font-weight: bold; margin-bottom: 3px; }
        .dw-info-item span { font-size: 13px; color: #fff; }
        .dw-reward-box { background: rgba(255,204,0,0.05); padding: 15px; border: 1px solid rgba(255,204,0,0.1); border-radius: 4px; }
        .dw-reward-box label { display: block; font-size: 10px; color: #ffcc00; font-weight: bold; border-bottom: 1px solid rgba(255,204,0,0.2); padding-bottom: 5px; margin-bottom: 8px; }
        .dw-gil-row { display: flex; align-items: center; gap: 8px; font-size: 16px; color: #fff; font-weight: bold; }
        .dw-extra-rewards { margin-top: 10px; display: flex; flex-direction: column; gap: 4px; }
        .reward-pill { font-size: 11px; color: #ccc; font-style: italic; }
        .dw-candidates-box label { font-size: 10px; color: #666; font-weight: bold; display: block; margin-bottom: 8px; }
        .dw-cand-list { display: flex; flex-direction: column; gap: 5px; }
        .dw-cand-item { font-size: 12px; }
        .btn-cartaz-full { width: 100%; background: #000; border: 1px solid #00f2ff; color: #00f2ff; padding: 10px; font-size: 11px; font-weight: bold; cursor: pointer; margin-top: auto; }
        .btn-cartaz-full:hover { background: #00f2ff; color: #000; }
        .dw-col-right { flex: 1; padding: 25px; overflow-y: auto; }
        .dw-text-block { margin-bottom: 20px; }
        .dw-text-block label { color: #ffcc00; font-size: 11px; font-weight: bold; border-bottom: 1px solid #333; display: block; padding-bottom: 5px; margin-bottom: 8px; }
        .dw-text-block p { color: #ddd; font-size: 14px; line-height: 1.5; white-space: pre-wrap; margin: 0; }
        .dw-close-btn { width: 100%; background: #111; border: none; border-top: 1px solid #333; color: #fff; padding: 12px; cursor: pointer; font-weight: bold; font-size: 12px; }
        .dw-close-btn:hover { background: #222; color: #ffcc00; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #444; border-radius: 3px; }
        .lightbox-wrap { position: relative; max-width: 90vw; max-height: 90vh; display: flex; align-items: center; justify-content: center; }
        .cartaz-full-view { max-width: 100%; max-height: 90vh; border: 3px solid #ffcc00; box-shadow: 0 0 50px #000; }
        .close-lightbox { position: absolute; top: -40px; right: -40px; background: transparent; border: none; color: #fff; font-size: 40px; cursor: pointer; }
        .btn-cyan { border: 1px solid #00f2ff; color: #00f2ff; padding: 10px 15px; background: transparent; cursor: pointer; font-size: 12px; font-weight: bold; transition: 0.2s; text-transform: uppercase; }
        .btn-cyan:hover { background: rgba(0, 242, 255, 0.1); box-shadow: 0 0 10px rgba(0, 242, 255, 0.2); }

        /* --- FINAL FANTASY TACTICS MODAL STYLE --- */
        .fft-modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 10000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        
        .fft-dialog-box {
          position: relative;
          width: 800px;
          max-width: 95vw;
          height: 450px;
          background: linear-gradient(180deg, #001a4d 0%, #000022 100%);
          border: 4px solid #b8860b;
          border-radius: 8px;
          box-shadow: 0 0 30px rgba(0,0,0,0.8), inset 0 0 50px rgba(0,0,0,0.5);
          display: flex;
          align-items: flex-start;
          padding: 30px;
          gap: 20px;
          color: #fff;
          font-family: 'Cinzel', serif;
        }

        .fft-portrait-section {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 10px;
          width: 150px;
          flex-shrink: 0;
        }

        .fft-portrait-frame {
          width: 140px;
          height: 180px;
          border: 3px solid #b8860b;
          background: #000;
          overflow: hidden;
          box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }
        .fft-portrait-frame img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .fft-name-plate {
          width: 100%;
          background: linear-gradient(90deg, #b8860b, #8a6e14);
          color: #000;
          text-align: center;
          font-weight: bold;
          padding: 5px 0;
          font-size: 0.9rem;
          border: 1px solid #ffd700;
          box-shadow: 0 2px 5px rgba(0,0,0,0.5);
          letter-spacing: 1px;
        }

        .fft-content-section {
          flex: 1;
          height: 100%;
          display: flex;
          flex-direction: column;
          overflow: hidden;
        }

        .fft-title {
          margin: 0 0 15px 0;
          font-size: 1.8rem;
          color: #00f2ff;
          text-shadow: 0 0 5px rgba(0, 242, 255, 0.5);
          border-bottom: 1px solid #b8860b;
          padding-bottom: 10px;
          letter-spacing: 1px;
        }

        .fft-scroll-text {
          flex: 1;
          overflow-y: auto;
          font-family: 'Lato', sans-serif;
          font-size: 1.1rem;
          line-height: 1.6;
          color: #e0e0e0;
          padding-right: 10px;
          /* Barra invisvel mas funcional */
          scrollbar-width: none; /* Firefox */
          -ms-overflow-style: none;  /* IE 10+ */
        }
        .fft-scroll-text::-webkit-scrollbar { 
          display: none; /* Chrome/Safari */
        }

        .fft-close-btn {
          position: absolute;
          top: -15px;
          right: -15px;
          width: 40px;
          height: 40px;
          background: #b8860b;
          color: #000;
          font-weight: bold;
          border: 2px solid #fff;
          border-radius: 50%;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          font-family: sans-serif;
          box-shadow: 0 0 10px #000;
          transition: 0.2s;
        }
        .fft-close-btn:hover {
          background: #ffd700;
          transform: scale(1.1);
        }

        /* --- LEVEL UP STYLE (FFT) PARA O JOGADOR --- */
        .levelup-global-overlay {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background: rgba(0,0,0,0.8);
            z-index: 200000;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }

        .levelup-content {
            text-align: center;
            animation: zoomIn 0.5s ease-out;
        }

        .levelup-title {
            font-family: 'Cinzel', serif;
            font-size: 80px;
            font-weight: bold;
            color: #ffcc00;
            text-transform: uppercase;
            letter-spacing: 10px;
            margin: 0 0 30px 0;
            text-shadow: 
                3px 3px 0 #000,
                -1px -1px 0 #000,  
                1px -1px 0 #000,
                -1px 1px 0 #000,
                1px 1px 0 #000,
                0 0 20px #ffcc00,
                0 0 40px #ffcc00;
            animation: pulseText 1.5s infinite alternate;
        }

        .levelup-confirm-btn {
            background: linear-gradient(to bottom, #b8860b, #8a6e14);
            border: 2px solid #fff;
            color: #000;
            font-family: 'Cinzel', serif;
            font-size: 18px;
            font-weight: bold;
            padding: 10px 40px;
            cursor: pointer;
            box-shadow: 0 0 15px #ffcc00;
            transition: 0.2s;
            border-radius: 50px;
        }
        
        .levelup-confirm-btn:hover {
            transform: scale(1.1);
            background: #ffd700;
            color: #000;
            box-shadow: 0 0 30px #ffd700;
        }

        @keyframes zoomIn { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes pulseText { from { text-shadow: 0 0 20px #ffcc00; } to { text-shadow: 0 0 40px #ffcc00, 0 0 10px #fff; } }
      `})]}):c.jsx("div",{className:"loading-screen",children:"Nenhum personagem encontrado."})}const Q5=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),c.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"18"}),c.jsx("line",{x1:"16",y1:"6",x2:"16",y2:"22"})]}),X5=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 7v10l10 5 10-5V7"}),c.jsx("path",{d:"M12 22V12"})]}),J5=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),c.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),c.jsx("polyline",{points:"21 15 16 10 5 21"})]}),W5=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 2c-4 0-8 3-8 8 0 4 3 7 5 7.5V21h6v-3.5c2-.5 5-3.5 5-7.5 0-5-4-8-8-8z"}),c.jsx("path",{d:"M9 10h.01"}),c.jsx("path",{d:"M15 10h.01"}),c.jsx("path",{d:"M10 14h4"})]}),Z5=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),c.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),eO=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 2a3 3 0 0 1 3 3c0 2-3 3-3 3s-3-1-3-3a3 3 0 0 1 3-3z"}),c.jsx("path",{d:"M15 9c1 1 2.5 2 2.5 4 0 2-2.5 4-2.5 4H9s-2.5-2-2.5-4c0-2 1.5-3 2.5-4"}),c.jsx("path",{d:"M9 17v1a3 3 0 0 0 6 0v-1"}),c.jsx("line",{x1:"7",y1:"22",x2:"17",y2:"22"})]}),tO=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M14.5 17.5L3 6V3h3l11.5 11.5"}),c.jsx("path",{d:"M13 19l6-6"}),c.jsx("path",{d:"M16 16l4 4"}),c.jsx("path",{d:"M19 21l2-2"})]}),nO=()=>c.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),c.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]});function aO(){const i=Ji(),[e,n]=w.useState(null),[s,o]=w.useState(!0),[u,f]=w.useState([]),[m,g]=w.useState([]),[b,v]=w.useState(null),[E,T]=w.useState(!1),[M,B]=w.useState(!1),[L,O]=w.useState(!1),[Q,G]=w.useState(!1),[W,le]=w.useState(!1),[he,pe]=w.useState(!1),[I,C]=w.useState(null),[k,P]=w.useState({x:280,y:100}),[j,R]=w.useState(!1),[S,Te]=w.useState({x:0,y:0}),[ne,F]=w.useState(null),[re,ye]=w.useState({name:"",img:"",stars:1,difficultyQ:!1,hpCurrent:10,hpMax:10,mpCurrent:10,mpMax:10,xp:0,drops:"",tips:"",description:"",visibleBars:!1}),[Be,Ue]=w.useState([]),[V,ae]=w.useState("list"),[ge,Ee]=w.useState([]),[Se,je]=w.useState(!1),[De,gt]=w.useState(null),Ne=w.useRef(0),mt=w.useRef(null);w.useEffect(()=>{mt.current=e},[e]),w.useEffect(()=>{const te=setTimeout(()=>{Xt(!0)},2e3);return()=>clearTimeout(te)},[]);const[ct,Xt]=w.useState(!1);w.useEffect(()=>{let te=()=>{};const qe=lf(Ot,$e=>{if($e){const H=In(kt(_e,"sessoes"),ca("mestreId","==",$e.uid));te=jn(H,dt=>{const ft=dt.docs.map(J=>({id:J.id,...J.data()})).find(J=>{const Ye=new Date,We=new Date(J.expiraEm);return Ye<=We});if(ft&&(n(ft),g(ft.connected_players||[]),ft.latest_roll)){const J=ft.latest_roll;J.timestamp>Ne.current&&gt(Ye=>!Ye||Ye.timestamp!==J.timestamp?J:Ye)}o(!1)});const xe=In(kt(_e,"bestiary"),ca("mestreId","==",$e.uid));jn(xe,dt=>Ue(dt.docs.map(Gt=>({id:Gt.id,...Gt.data()}))))}else o(!1),i("/login")});return()=>{qe(),te()}},[i]),w.useEffect(()=>{if(e?.id)return tt(Pe(_e,"sessoes",e.id),{dm_online:!0}).catch(console.error),()=>tt(Pe(_e,"sessoes",e.id),{dm_online:!1}).catch(console.error)},[e?.id]),w.useEffect(()=>{const te=In(kt(_e,"characters")),qe=jn(te,$e=>{const H=$e.docs.map(xe=>({id:xe.id,...xe.data()}));if(Ee(H),e&&e.participantes){const xe=H.filter(dt=>e.participantes.includes(dt.name));f(xe)}});return()=>qe()},[e?.participantes]);const an=async()=>{try{await Nr(kt(_e,"bestiary"),{...re,mestreId:Ot.currentUser.uid,createdAt:new Date().toISOString()}),ae("list"),ye({name:"",img:"",stars:1,difficultyQ:!1,hpCurrent:10,hpMax:10,mpCurrent:10,mpMax:10,xp:0,drops:"",tips:"",description:"",visibleBars:!1})}catch(te){alert("Erro: "+te.message)}},Ft=async te=>{if(!e)return;const qe={id:`enemy_${Date.now()}`,type:"enemy",name:te.name,img:te.img,x:0,y:0,size:1,visible:!0,visibleBars:te.visibleBars,stats:{hp:{current:te.hpCurrent,max:te.hpMax},mp:{current:te.mpCurrent,max:te.mpMax}},details:{...te}};await tt(Pe(_e,"sessoes",e.id),{tokens:[...e.tokens||[],qe]}),G(!1)},me=async te=>{if(!e)return;if(e.tokens?.find($e=>$e.uid===te.uid))return alert("Jogador j est no mapa!");const qe={id:`player_${te.uid}`,type:"player",uid:te.uid,name:te.name,img:te.character_sheet?.imgUrl||"",x:0,y:0,size:1,visible:!0,controlledBy:te.uid};await tt(Pe(_e,"sessoes",e.id),{tokens:[...e.tokens||[],qe]}),le(!1)},Ce=async te=>{const qe=e.tokens.filter($e=>$e.id!==te);await tt(Pe(_e,"sessoes",e.id),{tokens:qe})},U=async(te,qe)=>{const $e=e.tokens.map(H=>H.id===te.id?{...H,...qe}:H);await tt(Pe(_e,"sessoes",e.id),{tokens:$e})},fe=async(te,qe,$e)=>{if(te.type!=="enemy")return;const H=e.tokens.map(xe=>xe.id===te.id?{...xe,stats:{...xe.stats,[qe]:{...xe.stats[qe],current:Number($e)}}}:xe);await tt(Pe(_e,"sessoes",e.id),{tokens:H})},de=(te,qe)=>{te.dataTransfer.setData("dragIndex",qe)},be=async(te,qe)=>{const $e=te.dataTransfer.getData("dragIndex");if($e==="")return;const H=[...e.tokens],[xe]=H.splice($e,1);H.splice(qe,0,xe),await tt(Pe(_e,"sessoes",e.id),{tokens:H})},Ge=te=>{R(!0),Te({x:te.clientX-k.x,y:te.clientY-k.y})},Me=te=>{j&&P({x:te.clientX-S.x,y:te.clientY-S.y})},It=()=>{R(!1)},et=async()=>{if(!ne||!e)return;const te=e.tokens.map(qe=>{if(qe.id===ne.id){let $e={...qe};return ne.stats&&($e.stats={hp:{...qe.stats?.hp,current:ne.stats.hp.current},mp:{...qe.stats?.mp,current:ne.stats.mp.current}}),$e.imgX=ne.imgX,$e.imgY=ne.imgY,$e}return qe});await tt(Pe(_e,"sessoes",e.id),{tokens:te}),F(null)},Jt=(te,qe)=>{if(!ne)return;const $e=ne[te]!==void 0?ne[te]:50;F({...ne,[te]:$e+qe})};return s||!ct?c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw",background:"radial-gradient(circle at center, #001a33 0%, #000000 100%)",color:"#ffcc00",fontFamily:"Cinzel, serif",zIndex:9999,position:"fixed",top:0,left:0},children:[c.jsx("img",{src:jf,alt:"Carregando...",style:{width:"100px",marginBottom:"20px"}}),c.jsx("p",{style:{fontSize:"18px",letterSpacing:"2px",textTransform:"uppercase",animation:"pulseText 2s infinite ease-in-out"},children:"Sintonizando ter..."}),c.jsx("style",{children:`
          @keyframes pulseText { 
            0% { opacity: 0.3; } 
            50% { opacity: 1; } 
            100% { opacity: 0.3; } 
          }
        `})]}):c.jsxs("div",{className:"mestre-vtt-container",onMouseMove:Me,onMouseUp:It,children:[c.jsx("div",{className:"mestre-bg-layer",style:{backgroundImage:`url(${aA})`}}),c.jsxs("div",{className:"dm-players-sidebar",children:[c.jsx("h3",{className:"sidebar-title",children:"AVENTUREIROS"}),c.jsx("div",{className:"players-list-scroll",children:u.map(te=>{const qe=m.includes(te.uid),$e=te.character_sheet?.imgUrl;return c.jsxs("div",{className:`mini-player-card ${qe?"online":"offline"}`,onClick:()=>v(te),title:"Ficha",children:[c.jsxs("div",{className:"mini-avatar",children:[$e?c.jsx("div",{className:"avatar-img",style:{backgroundImage:`url(${$e})`}}):c.jsx("div",{className:"avatar-placeholder",children:te.name.charAt(0)}),c.jsx("div",{className:`status-dot ${qe?"green":"gray"}`})]}),c.jsxs("div",{className:"mini-info",children:[c.jsx("span",{className:"p-name",children:te.name}),c.jsxs("span",{className:"p-lvl",children:["LVL ",te.character_sheet?.basic_info?.level||1]})]})]},te.id)})})]}),c.jsxs("div",{className:"session-status-top",children:[c.jsx("div",{className:"status-indicator active"}),c.jsxs("div",{className:"status-info",children:[c.jsxs("h2",{children:["SESSO ATIVA: ",e.missaoNome]}),c.jsxs("p",{children:["Mestre Online  ",m.length," Jogadores Conectados"]})]})]}),c.jsx(sA,{sessaoData:e,isMaster:!0,showManager:E,onCloseManager:()=>T(!1),personagensData:u,onEditToken:te=>F(JSON.parse(JSON.stringify(te)))}),c.jsx(rA,{sessaoData:e,isMaster:!0,showManager:M,onCloseManager:()=>B(!1)}),c.jsx(oA,{sessaoData:e,isMaster:!0,showManager:L,onCloseManager:()=>O(!1)}),De&&c.jsx(cA,{rollData:De,onClose:()=>{Ne.current=De.timestamp,gt(null)}}),Se&&c.jsx(lA,{sessaoId:e.id,playerName:"MESTRE",onClose:()=>je(!1)}),he&&c.jsxs("div",{className:"combat-tracker-panel fade-in",style:{top:k.y,left:k.x,zIndex:1e3},children:[c.jsx("div",{className:"tracker-header",onMouseDown:Ge,style:{cursor:"grab"},children:c.jsx("h3",{className:"tracker-title",children:"COMBATE"})}),c.jsxs("div",{className:"tracker-list",children:[e.tokens?.map((te,qe)=>{let $e=0,H=0,xe=0,dt=0,Gt=te.img;if(te.type==="player"){const J=u.find(Ye=>Ye.uid===te.uid);J&&($e=J.character_sheet?.status?.hp?.current||0,H=J.character_sheet?.status?.hp?.max||0,xe=J.character_sheet?.status?.mp?.current||0,dt=J.character_sheet?.status?.mp?.max||0,J.character_sheet?.imgUrl&&(Gt=J.character_sheet.imgUrl))}else $e=te.stats.hp.current,H=te.stats.hp.max,xe=te.stats.mp.current,dt=te.stats.mp.max;const ft=te.visible!==!1;return c.jsxs("div",{className:"tracker-item",draggable:!0,onDragStart:J=>de(J,qe),onDragOver:J=>J.preventDefault(),onDrop:J=>be(J,qe),children:[c.jsxs("div",{className:"t-col-img",children:[c.jsx("div",{className:"t-index",children:qe+1}),c.jsx("div",{className:"t-img",style:{backgroundImage:`url(${Gt})`,backgroundPosition:`${te.imgX||50}% ${te.imgY||50}%`,opacity:ft?1:.5}})]}),c.jsxs("div",{className:"t-col-info",children:[c.jsx("div",{className:"t-name",children:te.name}),c.jsxs("div",{className:"t-stats-row",children:[c.jsxs("div",{className:"t-stat hp",children:[c.jsx("label",{children:"HP"}),te.type==="enemy"?c.jsx("input",{type:"number",value:$e,onChange:J=>fe(te,"hp",J.target.value)}):c.jsx("span",{children:$e}),c.jsxs("small",{children:["/",H]})]}),c.jsxs("div",{className:"t-stat mp",children:[c.jsx("label",{children:"MP"}),te.type==="enemy"?c.jsx("input",{type:"number",value:xe,onChange:J=>fe(te,"mp",J.target.value)}):c.jsx("span",{children:xe}),c.jsxs("small",{children:["/",dt]})]})]})]}),c.jsxs("div",{className:"t-col-actions",children:[c.jsxs("div",{className:"img-adj-grid",children:[c.jsx("button",{onClick:()=>U(te,{imgY:(te.imgY||50)-10}),children:""}),c.jsxs("div",{style:{display:"flex"},children:[c.jsx("button",{onClick:()=>U(te,{imgX:(te.imgX||50)-10}),children:""}),c.jsx("button",{onClick:()=>U(te,{imgX:(te.imgX||50)+10}),children:""})]}),c.jsx("button",{onClick:()=>U(te,{imgY:(te.imgY||50)+10}),children:""})]}),c.jsxs("div",{className:"act-btns",children:[c.jsx("button",{className:"btn-icon-sm",title:ft?"Ocultar":"Mostrar",onClick:()=>U(te,{visible:!ft}),style:{color:ft?"#ffcc00":"#666"},children:ft?"":""}),te.type==="enemy"&&c.jsx("button",{className:"btn-icon-sm",title:"Detalhes",onClick:()=>C({...te.details,img:te.img}),children:""}),c.jsx("button",{className:"btn-icon-sm delete",title:"Remover",onClick:()=>Ce(te.id),children:""})]})]})]},te.id)}),(!e.tokens||e.tokens.length===0)&&c.jsx("div",{className:"empty-tracker",children:"Mesa Vazia"})]})]}),I&&c.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>C(null),children:c.jsxs("div",{className:"monster-detail-card",onClick:te=>te.stopPropagation(),children:[c.jsxs("div",{className:"md-header",children:[c.jsxs("div",{className:"md-title-row",children:[c.jsx("h2",{children:I.name}),c.jsxs("div",{className:"md-stars",children:[[...Array(I.stars||1)].map((te,qe)=>c.jsx("span",{children:""},qe)),I.difficultyQ&&c.jsx("span",{className:"md-boss-mark",children:"?"})]})]}),c.jsxs("div",{className:"md-sub",children:["XP: ",I.xp]})]}),c.jsxs("div",{className:"md-body",children:[c.jsx("div",{className:"md-img-col",children:c.jsx("div",{className:"md-portrait",style:{backgroundImage:`url(${I.img})`}})}),c.jsxs("div",{className:"md-info-col custom-scrollbar",children:[c.jsxs("div",{className:"md-block",children:[c.jsx("label",{children:"DESCRIO"}),c.jsx("p",{children:I.description||"Sem descrio."})]}),I.drops&&c.jsxs("div",{className:"md-block",children:[c.jsx("label",{children:"DROPS & ITENS"}),c.jsx("p",{children:I.drops})]}),I.tips&&c.jsxs("div",{className:"md-block tips",children:[c.jsx("label",{children:"DICAS DO SANCHEZ (GM)"}),c.jsx("p",{children:I.tips})]})]})]}),c.jsx("button",{className:"md-close-btn",onClick:()=>C(null),children:"FECHAR"})]})}),c.jsxs("div",{className:"dm-tools-dock",children:[c.jsxs("div",{className:"tool-group",children:[c.jsx(zg,{isMestre:!0,vttDock:!0}),c.jsx("div",{className:"tool-label",children:"BAZAR"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx(iA,{vttDock:!0}),c.jsx("div",{className:"tool-label",children:"FORJA"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx("button",{className:"tool-btn-placeholder",onClick:()=>T(!0),children:c.jsx(Q5,{})}),c.jsx("div",{className:"tool-label",children:"TABLETOP"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx("button",{className:"tool-btn-placeholder",onClick:()=>pe(!he),title:"Rastreador de Combate",children:c.jsx(tO,{})}),c.jsx("div",{className:"tool-label",children:"COMBATE"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx("button",{className:"tool-btn-placeholder",onClick:()=>je(!0),children:c.jsx(X5,{})}),c.jsx("div",{className:"tool-label",children:"DADOS"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx("button",{className:"tool-btn-placeholder",onClick:()=>window.open("https://www.canva.com/design/DAGpzszHsc4/NcbQ19hsr4grzm9aotQFtw/edit?utm_content=DAGpzszHsc4&utm_campaign=designshare&utm_medium=link2&utm_source=sharebutton","_blank"),children:c.jsx(nO,{})}),c.jsx("div",{className:"tool-label",children:"LIVRO"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx("button",{className:"tool-btn-placeholder",onClick:()=>B(!0),children:c.jsx(J5,{})}),c.jsx("div",{className:"tool-label",children:"CENRIOS"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx("button",{className:"tool-btn-placeholder",onClick:()=>G(!0),children:c.jsx(W5,{})}),c.jsx("div",{className:"tool-label",children:"MONSTROS"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx("button",{className:"tool-btn-placeholder",onClick:()=>O(!0),children:c.jsx(Z5,{})}),c.jsx("div",{className:"tool-label",children:"NPCS"})]}),c.jsxs("div",{className:"tool-group",children:[c.jsx("button",{className:"tool-btn-placeholder",onClick:()=>le(!0),children:c.jsx(eO,{})}),c.jsx("div",{className:"tool-label",children:"JOGADORES"})]})]}),b&&c.jsx(Lg,{characterData:b,isMaster:!0,onClose:()=>v(null)}),Q&&c.jsx("div",{className:"modal-overlay-custom",onClick:()=>G(!1),children:c.jsxs("div",{className:"modal-box-custom wide",onClick:te=>te.stopPropagation(),children:[c.jsxs("div",{className:"modal-header-c",children:[c.jsx("h3",{children:"BESTIRIO"}),c.jsx("button",{className:"close-c",onClick:()=>G(!1),children:""})]}),V==="list"?c.jsxs("div",{className:"monster-list-view",children:[c.jsx("button",{className:"btn-create-monster",onClick:()=>ae("create"),children:"+ CRIAR NOVA AMEAA"}),c.jsx("div",{className:"bestiary-grid",children:Be.map(te=>c.jsxs("div",{className:"monster-card-db",children:[c.jsx("div",{className:"m-thumb",style:{backgroundImage:`url(${te.img})`}}),c.jsxs("div",{className:"m-info",children:[c.jsx("strong",{children:te.name}),c.jsxs("small",{children:["HP: ",te.hpMax]})]}),c.jsx("div",{className:"m-actions",children:c.jsx("button",{className:"btn-deploy",onClick:()=>Ft(te),children:"INSERIR"})})]},te.id))})]}):c.jsxs("div",{className:"monster-create-view",children:[c.jsxs("div",{className:"create-row",children:[c.jsxs("div",{className:"img-upload-box",children:[c.jsx("div",{className:"preview-img",style:{backgroundImage:`url(${re.img})`}}),c.jsx("input",{placeholder:"Link Imagem...",value:re.img,onChange:te=>ye({...re,img:te.target.value})})]}),c.jsxs("div",{className:"details-inputs",children:[c.jsx("input",{className:"input-title",placeholder:"Nome",value:re.name,onChange:te=>ye({...re,name:te.target.value})}),c.jsxs("div",{className:"stats-row-c",children:[c.jsxs("div",{children:[c.jsx("label",{children:"HP Max"}),c.jsx("input",{type:"number",value:re.hpMax,onChange:te=>ye({...re,hpMax:Number(te.target.value),hpCurrent:Number(te.target.value)})})]}),c.jsxs("div",{children:[c.jsx("label",{children:"MP Max"}),c.jsx("input",{type:"number",value:re.mpMax,onChange:te=>ye({...re,mpMax:Number(te.target.value),mpCurrent:Number(te.target.value)})})]})]}),c.jsxs("div",{className:"toggle-row",children:[c.jsx("input",{type:"checkbox",checked:re.visibleBars,onChange:te=>ye({...re,visibleBars:te.target.checked})}),c.jsx("label",{children:"Barras visveis?"})]})]})]}),c.jsxs("div",{className:"text-areas-row",style:{flexDirection:"column",height:"auto"},children:[c.jsx("textarea",{style:{height:"60px"},placeholder:"Descrio (Lore)...",value:re.description,onChange:te=>ye({...re,description:te.target.value})}),c.jsx("textarea",{style:{height:"60px"},placeholder:"Drops (Use Enter para tpicos)",value:re.drops,onChange:te=>ye({...re,drops:te.target.value})}),c.jsx("textarea",{style:{height:"60px"},placeholder:"Dicas do Sanchez (Secreto)",value:re.tips,onChange:te=>ye({...re,tips:te.target.value})})]}),c.jsxs("div",{className:"actions-row-bottom",children:[c.jsx("button",{className:"btn-save-m",onClick:an,children:"SALVAR"}),c.jsx("button",{className:"btn-cancel-m",onClick:()=>ae("list"),children:"VOLTAR"})]})]})]})}),W&&c.jsx("div",{className:"modal-overlay-custom",onClick:()=>le(!1),children:c.jsxs("div",{className:"modal-box-custom",onClick:te=>te.stopPropagation(),children:[c.jsxs("div",{className:"modal-header-c",children:[c.jsx("h3",{children:"INSERIR JOGADOR"}),c.jsx("button",{className:"close-c",onClick:()=>le(!1),children:""})]}),c.jsx("div",{className:"player-select-grid",children:ge.map(te=>c.jsxs("div",{className:"char-select-card",onClick:()=>me(te),children:[c.jsx("div",{className:"c-avatar",style:{backgroundImage:`url(${te.character_sheet?.imgUrl})`}}),c.jsx("span",{children:te.name})]},te.id))})]})}),ne&&c.jsx("div",{className:"modal-overlay-custom",onClick:()=>F(null),children:c.jsxs("div",{className:"modal-box-custom refined-edit",onClick:te=>te.stopPropagation(),children:[c.jsxs("h3",{className:"modal-edit-title",children:["EDITAR: ",ne.name]}),c.jsxs("div",{className:"refined-stats-container",children:[c.jsxs("div",{className:"refined-stat-row",children:[c.jsx("span",{className:"stat-label hp",children:"HP"}),c.jsx("button",{className:"btn-adj",onClick:()=>F({...ne,stats:{...ne.stats,hp:{...ne.stats.hp,current:ne.stats.hp.current-1}}}),children:"-"}),c.jsxs("span",{className:"stat-value",children:[ne.stats.hp.current," / ",ne.stats.hp.max]}),c.jsx("button",{className:"btn-adj",onClick:()=>F({...ne,stats:{...ne.stats,hp:{...ne.stats.hp,current:ne.stats.hp.current+1}}}),children:"+"})]}),c.jsxs("div",{className:"refined-stat-row",children:[c.jsx("span",{className:"stat-label mp",children:"MP"}),c.jsx("button",{className:"btn-adj",onClick:()=>F({...ne,stats:{...ne.stats,mp:{...ne.stats.mp,current:ne.stats.mp.current-1}}}),children:"-"}),c.jsxs("span",{className:"stat-value",children:[ne.stats.mp.current," / ",ne.stats.mp.max]}),c.jsx("button",{className:"btn-adj",onClick:()=>F({...ne,stats:{...ne.stats,mp:{...ne.stats.mp,current:ne.stats.mp.current+1}}}),children:"+"})]})]}),c.jsxs("div",{className:"refined-image-control",children:[c.jsx("label",{children:"AJUSTAR ROSTO (POSIO)"}),c.jsxs("div",{className:"d-pad-grid",children:[c.jsx("div",{}),c.jsx("button",{onClick:()=>Jt("imgY",-10),children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>Jt("imgX",-10),children:""}),c.jsx("div",{className:"center-dot"}),c.jsx("button",{onClick:()=>Jt("imgX",10),children:""}),c.jsx("div",{}),c.jsx("button",{onClick:()=>Jt("imgY",10),children:""}),c.jsx("div",{})]})]}),c.jsx("button",{className:"btn-save-refined",onClick:et,children:"OK (SALVAR)"})]})}),c.jsx("style",{children:`
        .mestre-vtt-container { width: 100vw; height: 100vh; overflow: hidden; position: relative; background: #000; font-family: 'Cinzel', serif; color: #fff; }
        .mestre-bg-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.4; z-index: 0; }
        .dm-players-sidebar { position: absolute; top: 20px; left: 20px; width: 200px; background: rgba(0, 10, 20, 0.95); border: 2px solid #ffcc00; border-radius: 8px; padding: 10px; z-index: 50; max-height: 80vh; display: flex; flex-direction: column; }
        .sidebar-title { color: #ffcc00; font-size: 12px; border-bottom: 1px solid #444; padding-bottom: 5px; margin-bottom: 10px; text-align: center; }
        .players-list-scroll { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; }
        .mini-player-card { display: flex; align-items: center; padding: 5px; background: rgba(255,255,255,0.05); border: 1px solid #333; border-radius: 4px; cursor: pointer; }
        .mini-player-card.online { border-left: 3px solid #00f2ff; }
        .mini-avatar { position: relative; margin-right: 8px; }
        .avatar-img, .avatar-placeholder { width: 30px; height: 30px; border-radius: 50%; background-size: cover; border: 1px solid #fff; }
        .avatar-placeholder { background: #222; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .status-dot { width: 6px; height: 6px; border-radius: 50%; position: absolute; bottom: 0; right: 0; border: 1px solid #000; }
        .status-dot.green { background: #00f2ff; } .status-dot.gray { background: #666; }
        .p-name { font-size: 11px; font-weight: bold; display: block; }
        .p-lvl { font-size: 9px; color: #ffcc00; }

        .session-status-top { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); border: 1px solid #00f2ff; padding: 5px 20px; border-radius: 20px; display: flex; align-items: center; gap: 10px; z-index: 40; }
        .status-indicator { width: 10px; height: 10px; background: #00f2ff; border-radius: 50%; box-shadow: 0 0 10px #00f2ff; animation: pulse 2s infinite; }
        .status-info h2 { margin: 0; font-size: 14px; color: #fff; }
        .status-info p { margin: 0; font-size: 10px; color: #00f2ff; }

        /* COMBAT TRACKER */
        .combat-tracker-panel { position: absolute; width: 320px; max-height: 70vh; background: linear-gradient(180deg, #0d0d10 0%, #000 100%); border: 2px solid #b8860b; border-radius: 6px; display: flex; flex-direction: column; box-shadow: 0 0 25px rgba(0,0,0,0.9); }
        .tracker-header { background: #15100a; border-bottom: 2px solid #b8860b; padding: 10px; text-align: center; }
        .tracker-title { color: #ffcc00; margin: 0; font-family: 'Cinzel', serif; letter-spacing: 3px; font-size: 16px; text-shadow: 0 0 5px #ffcc00; }
        .tracker-list { flex: 1; overflow-y: auto; padding: 10px; display: flex; flex-direction: column; gap: 8px; }
        .tracker-item { display: flex; align-items: center; background: rgba(20, 20, 25, 0.9); border: 1px solid #444; border-radius: 4px; padding: 8px 5px; gap: 8px; transition: 0.2s; }
        .tracker-item:hover { border-color: #ffcc00; }
        .t-col-img { display: flex; flex-direction: column; align-items: center; width: 45px; flex-shrink: 0; }
        .t-index { color: #666; font-size: 10px; font-weight: bold; margin-bottom: 2px; }
        .t-img { width: 40px; height: 40px; border-radius: 50%; background-size: cover; border: 1px solid #777; box-shadow: 0 0 5px #000; }
        .t-col-info { flex: 1; display: flex; flex-direction: column; gap: 4px; overflow: hidden; }
        .t-name { font-size: 13px; font-weight: bold; color: #eec; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .t-stats-row { display: flex; gap: 5px; }
        .t-stat { display: flex; align-items: center; font-size: 11px; background: #080808; padding: 2px 5px; border-radius: 3px; border: 1px solid #333; }
        .t-stat label { margin-right: 4px; font-weight: bold; font-size: 9px; }
        .t-stat.hp label { color: #f44; } .t-stat.mp label { color: #00f2ff; }
        .t-stat input { width: 28px; background: transparent; border: none; color: #fff; text-align: center; padding: 0; font-size: 11px; font-weight: bold; }
        .t-stat span { color: #fff; font-weight: bold; }
        .t-stat small { color: #555; margin-left: 2px; font-size: 9px; }
        .t-col-actions { display: flex; gap: 6px; align-items: center; }
        .img-adj-grid { display: flex; flex-direction: column; align-items: center; gap: 1px; }
        .img-adj-grid button { width: 14px; height: 12px; font-size: 7px; padding: 0; line-height: 1; background: #222; border: 1px solid #555; color: #aaa; cursor: pointer; }
        .img-adj-grid button:hover { background: #ffcc00; color: #000; }
        .act-btns { display: flex; flex-direction: column; gap: 3px; }
        .btn-icon-sm { background: #222; border: 1px solid #555; color: #ccc; width: 22px; height: 22px; font-size: 12px; cursor: pointer; display: flex; align-items: center; justify-content: center; border-radius: 3px; }
        .btn-icon-sm:hover { border-color: #ffcc00; color: #fff; }
        .btn-icon-sm.delete:hover { background: #300; border-color: #f44; color: #f44; }
        .empty-tracker { text-align: center; padding: 30px; color: #666; font-style: italic; font-size: 12px; font-family: 'serif'; }

        /* MONSTER DETAIL */
        .monster-detail-card { width: 500px; max-width: 95vw; background: #0d0d10 url('https://www.transparenttextures.com/patterns/dark-matter.png'); border: 2px solid #b8860b; box-shadow: 0 0 50px rgba(0,0,0,0.9), inset 0 0 100px rgba(0,0,0,0.8); border-radius: 8px; overflow: hidden; display: flex; flex-direction: column; }
        .md-header { background: linear-gradient(90deg, #15100a, #000); padding: 15px 20px; border-bottom: 1px solid #b8860b; }
        .md-title-row { display: flex; justify-content: space-between; align-items: center; }
        .md-title-row h2 { margin: 0; font-family: 'Cinzel', serif; color: #ffcc00; font-size: 20px; letter-spacing: 2px; }
        .md-stars { color: #ffd700; font-size: 14px; text-shadow: 0 0 5px #ffd700; }
        .md-boss-mark { color: #f44; font-weight: bold; margin-left: 5px; font-size: 16px; }
        .md-sub { font-size: 12px; color: #888; margin-top: 5px; font-style: italic; }
        .md-body { display: flex; padding: 20px; gap: 20px; min-height: 250px; }
        .md-img-col { width: 120px; flex-shrink: 0; }
        .md-portrait { width: 120px; height: 120px; border: 2px solid #444; border-radius: 4px; background-size: cover; background-position: center; box-shadow: 0 0 15px #000; }
        .md-info-col { flex: 1; overflow-y: auto; max-height: 400px; padding-right: 5px; }
        .md-block { margin-bottom: 15px; }
        .md-block label { display: block; color: #b8860b; font-size: 10px; font-weight: bold; border-bottom: 1px solid #333; margin-bottom: 5px; }
        .md-block p { margin: 0; font-size: 13px; color: #ccc; line-height: 1.4; white-space: pre-wrap; }
        .md-block.tips p { color: #00f2ff; font-style: italic; }
        .md-close-btn { width: 100%; padding: 15px; background: #111; color: #fff; border: none; border-top: 1px solid #b8860b; font-family: 'Cinzel', serif; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .md-close-btn:hover { background: #b8860b; color: #000; }

        /* DOCK COM Z-INDEX ALTO (2000) */
        .dm-tools-dock { position: absolute; right: 20px; bottom: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 2000; align-items: flex-end; }
        .tool-group { display: flex; align-items: center; gap: 10px; flex-direction: row-reverse; }
        .tool-label { background: rgba(0,0,0,0.8); padding: 4px 8px; border-radius: 4px; font-size: 10px; color: #ffcc00; opacity: 0; transition: 0.2s; pointer-events: none; transform: translateX(10px); }
        .tool-group:hover .tool-label { opacity: 1; transform: translateX(0); }
        .tool-btn-placeholder { width: 50px; height: 50px; border-radius: 50%; background: #111; border: 2px solid #555; color: #fff; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s; box-shadow: 0 0 10px #000; pointer-events: auto; }
        .tool-btn-placeholder:hover { border-color: #ffcc00; color: #ffcc00; transform: scale(1.1); }

        /* MODAIS GERAIS */
        .modal-overlay-custom { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .modal-box-custom { background: #080808; border: 2px solid #ffcc00; padding: 20px; border-radius: 8px; width: 500px; max-height: 90vh; overflow-y: auto; display: flex; flex-direction: column; }
        .modal-box-custom.wide { width: 800px; }
        .modal-header-c { display: flex; justify-content: space-between; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 20px; align-items: center; }
        .modal-header-c h3 { margin: 0; color: #ffcc00; }
        .close-c { background: none; border: none; color: #fff; font-size: 20px; cursor: pointer; }
        
        /* ESTILOS REPARADOS PARA BESTIRIO E LISTA JOGADORES */
        .monster-list-view { display: flex; flex-direction: column; gap: 15px; width: 100%; }
        .btn-create-monster { background: #222; border: 1px dashed #ffcc00; color: #ffcc00; padding: 15px; font-weight: bold; cursor: pointer; transition: 0.2s; text-align: center; width: 100%; }
        .btn-create-monster:hover { background: rgba(255, 204, 0, 0.1); }
        .bestiary-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 15px; width: 100%; }
        .monster-card-db { display: flex; background: rgba(255,255,255,0.05); border: 1px solid #333; padding: 10px; gap: 10px; align-items: center; }
        .m-thumb { width: 50px; height: 50px; background-size: cover; border-radius: 4px; border: 1px solid #555; flex-shrink: 0; }
        .m-info { flex: 1; display: flex; flex-direction: column; font-size: 12px; }
        .m-info strong { color: #fff; font-size: 14px; }
        .m-info small { color: #888; }
        .btn-deploy { background: #00f2ff; color: #000; border: none; font-size: 10px; font-weight: bold; padding: 4px 8px; cursor: pointer; border-radius: 2px; }
        
        .player-select-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 10px; }
        .char-select-card { background: rgba(255,255,255,0.05); border: 1px solid #333; padding: 10px; display: flex; align-items: center; gap: 10px; cursor: pointer; transition: 0.2s; border-radius: 4px; }
        .char-select-card:hover { border-color: #00f2ff; background: rgba(0, 242, 255, 0.1); }
        .c-avatar { width: 40px; height: 40px; border-radius: 50%; background-size: cover; border: 1px solid #fff; flex-shrink: 0; }

        /* REFINED EDIT MODAL (CORRIGIDO PARA NO CORTAR) */
        .modal-box-custom.refined-edit { width: 450px; padding: 30px; overflow: visible; background: #0d0d10; border: 2px solid #ffcc00; box-shadow: 0 0 50px rgba(255, 204, 0, 0.2); max-height: none; height: auto; }
        .modal-edit-title { text-align: center; color: #ffcc00; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0; letter-spacing: 1px; }
        .refined-stats-container { margin: 20px 0; display: flex; flex-direction: column; gap: 10px; }
        .refined-stat-row { display: flex; align-items: center; background: #1a1a1a; padding: 5px; border-radius: 4px; border: 1px solid #333; }
        .stat-label { width: 40px; font-weight: bold; font-size: 14px; text-align: center; }
        .stat-label.hp { color: #f44; } .stat-label.mp { color: #00f2ff; }
        .btn-adj { width: 30px; height: 30px; background: #333; color: #fff; border: 1px solid #555; cursor: pointer; font-weight: bold; transition: 0.2s; display: flex; align-items: center; justify-content: center; }
        .btn-adj:hover { background: #fff; color: #000; }
        .stat-value { flex: 1; text-align: center; font-size: 18px; font-weight: bold; letter-spacing: 1px; }
        .refined-image-control { text-align: center; margin: 20px 0; border-top: 1px solid #333; padding-top: 15px; }
        .refined-image-control label { color: #888; font-size: 10px; letter-spacing: 1px; margin-bottom: 10px; display: block; }
        .d-pad-grid { display: inline-grid; grid-template-columns: 30px 30px 30px; gap: 5px; justify-content: center; }
        .d-pad-grid button { width: 30px; height: 30px; background: #222; border: 1px solid #555; color: #ffcc00; cursor: pointer; font-size: 10px; display: flex; align-items: center; justify-content: center; }
        .d-pad-grid button:hover { background: #ffcc00; color: #000; }
        .center-dot { width: 6px; height: 6px; background: #555; border-radius: 50%; margin: auto; }
        .btn-save-refined { width: 100%; padding: 15px; font-size: 14px; font-weight: bold; background: #ffcc00; color: #000; border: none; cursor: pointer; text-transform: uppercase; margin-top: 10px; transition: 0.2s; }
        .btn-save-refined:hover { background: #fff; box-shadow: 0 0 20px #ffcc00; }

        .monster-create-view .create-row { display: flex; gap: 15px; margin-bottom: 15px; }
        .img-upload-box { width: 120px; display: flex; flex-direction: column; gap: 5px; }
        .preview-img { width: 120px; height: 120px; background: #000; border: 1px solid #444; background-size: cover; }
        .details-inputs { flex: 1; display: flex; flex-direction: column; gap: 8px; }
        .input-title { width: 100%; background: #111; border: 1px solid #444; padding: 8px; color: #ffcc00; font-weight: bold; }
        .stats-row-c { display: flex; gap: 10px; }
        .stats-row-c div { flex: 1; }
        .stats-row-c input { width: 100%; background: #111; border: 1px solid #444; color: #fff; padding: 5px; text-align: center; }
        .actions-row-bottom { display: flex; gap: 10px; margin-top: 15px; }
        .btn-save-m { flex: 1; background: #ffcc00; color: #000; border: none; padding: 10px; font-weight: bold; cursor: pointer; }
        .btn-cancel-m { background: #333; color: #fff; border: none; padding: 10px; cursor: pointer; }
        
        .toggle-row { display: flex; align-items: center; gap: 10px; color: #aaa; font-size: 12px; margin-top: 5px; }
        .text-areas-row { display: flex; gap: 10px; }
        .text-areas-row textarea { background: #111; border: 1px solid #444; color: #ccc; padding: 10px; resize: none; margin-bottom: 5px; }

        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
      `})]})}const iO=({user:i,initializing:e,children:n})=>e?null:i&&i.email==="fffvtt10@gmail.com"?n:c.jsx(y_,{to:"/admin-login"});function sO(){const[i,e]=w.useState(!0),[n,s]=w.useState(null);return w.useEffect(()=>lf(Ot,u=>{s(u),e(!1)}),[]),i?c.jsxs("div",{style:{height:"100vh",width:"100vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#000",overflow:"hidden"},children:[c.jsx("img",{src:jf,alt:"Loading...",style:{width:"100px",marginBottom:"20px",filter:"drop-shadow(0 0 10px #ffcc00)"}}),c.jsx("div",{style:{width:"200px",height:"4px",background:"#333",borderRadius:"2px",overflow:"hidden"},children:c.jsx("div",{className:"progress-bar"})}),c.jsx("p",{style:{marginTop:"10px"},children:"SINTONIZANDO TER..."}),c.jsx("style",{children:`
          .progress-bar { height: 100%; background: #ffcc00; width: 0%; box-shadow: 0 0 10px #ffcc00; animation: fillProgress 2s ease-in-out forwards; }
          p { color: #ffcc00; font-family: 'serif'; font-size: 10px; letter-spacing: 3px; animation: fadeText 1s infinite alternate; }
          @keyframes fillProgress { from { width: 0%; } to { width: 100%; } }
          @keyframes fadeText { from { opacity: 0.4; } to { opacity: 1; } }
        `})]}):c.jsxs(KS,{children:[c.jsx(ri,{path:"/",element:c.jsx(x5,{})}),c.jsx(ri,{path:"/login",element:c.jsx(_5,{})}),c.jsx(ri,{path:"/mestre",element:c.jsx(j5,{})}),c.jsx(ri,{path:"/mestre-vtt",element:c.jsx(aO,{})}),c.jsx(ri,{path:"/create-character",element:c.jsx(P5,{})}),c.jsx(ri,{path:"/jogador-vtt",element:c.jsx(K5,{})}),c.jsx(ri,{path:"/admin-login",element:c.jsx(E5,{})}),c.jsx(ri,{path:"/admin",element:c.jsx(iO,{user:n,initializing:i,children:c.jsx(A5,{})})}),c.jsx(ri,{path:"*",element:c.jsx(y_,{to:"/"})})]})}Jw.createRoot(document.getElementById("root")).render(c.jsx(qw.StrictMode,{children:c.jsx(yT,{children:c.jsx(sO,{})})}));
