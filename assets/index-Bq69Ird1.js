(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function ax(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var wp={exports:{}},Zl={};var sv;function UT(){if(sv)return Zl;sv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Zl.Fragment=e,Zl.jsx=n,Zl.jsxs=n,Zl}var rv;function BT(){return rv||(rv=1,wp.exports=UT()),wp.exports}var h=BT(),Np={exports:{}},ze={};var ov;function HT(){if(ov)return ze;ov=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),N=Symbol.iterator;function P(j){return j===null||typeof j!="object"?null:(j=N&&j[N]||j["@@iterator"],typeof j=="function"?j:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,z={};function W(j,Z,ae){this.props=j,this.context=Z,this.refs=z,this.updater=ae||U}W.prototype.isReactComponent={},W.prototype.setState=function(j,Z){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,Z,"setState")},W.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function J(){}J.prototype=W.prototype;function oe(j,Z,ae){this.props=j,this.context=Z,this.refs=z,this.updater=ae||U}var se=oe.prototype=new J;se.constructor=oe,L(se,W.prototype),se.isPureReactComponent=!0;var le=Array.isArray;function me(){}var C={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function O(j,Z,ae){var de=ae.ref;return{$$typeof:i,type:j,key:Z,ref:de!==void 0?de:null,props:ae}}function k(j,Z){return O(j.type,Z,j.props)}function T(j){return typeof j=="object"&&j!==null&&j.$$typeof===i}function D(j){var Z={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ae){return Z[ae]})}var w=/\/+/g;function we(j,Z){return typeof j=="object"&&j!==null&&j.key!=null?D(""+j.key):Z.toString(36)}function De(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(me,me):(j.status="pending",j.then(function(Z){j.status==="pending"&&(j.status="fulfilled",j.value=Z)},function(Z){j.status==="pending"&&(j.status="rejected",j.reason=Z)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function Y(j,Z,ae,de,ye){var ce=typeof j;(ce==="undefined"||ce==="boolean")&&(j=null);var be=!1;if(j===null)be=!0;else switch(ce){case"bigint":case"string":case"number":be=!0;break;case"object":switch(j.$$typeof){case i:case e:be=!0;break;case x:return be=j._init,Y(be(j._payload),Z,ae,de,ye)}}if(be)return ye=ye(j),be=de===""?"."+we(j,0):de,le(ye)?(ae="",be!=null&&(ae=be.replace(w,"$&/")+"/"),Y(ye,Z,ae,"",function(ft){return ft})):ye!=null&&(T(ye)&&(ye=k(ye,ae+(ye.key==null||j&&j.key===ye.key?"":(""+ye.key).replace(w,"$&/")+"/")+be)),Z.push(ye)),1;be=0;var Pe=de===""?".":de+":";if(le(j))for(var fe=0;fe<j.length;fe++)de=j[fe],ce=Pe+we(de,fe),be+=Y(de,Z,ae,ce,ye);else if(fe=P(j),typeof fe=="function")for(j=fe.call(j),fe=0;!(de=j.next()).done;)de=de.value,ce=Pe+we(de,fe++),be+=Y(de,Z,ae,ce,ye);else if(ce==="object"){if(typeof j.then=="function")return Y(De(j),Z,ae,de,ye);throw Z=String(j),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return be}function ue(j,Z,ae){if(j==null)return j;var de=[],ye=0;return Y(j,de,"","",function(ce){return Z.call(ae,ce,ye++)}),de}function Ee(j){if(j._status===-1){var Z=j._result;Z=Z(),Z.then(function(ae){(j._status===0||j._status===-1)&&(j._status=1,j._result=ae)},function(ae){(j._status===0||j._status===-1)&&(j._status=2,j._result=ae)}),j._status===-1&&(j._status=0,j._result=Z)}if(j._status===1)return j._result.default;throw j._result}var je=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Fe={map:ue,forEach:function(j,Z,ae){ue(j,function(){Z.apply(this,arguments)},ae)},count:function(j){var Z=0;return ue(j,function(){Z++}),Z},toArray:function(j){return ue(j,function(Z){return Z})||[]},only:function(j){if(!T(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return ze.Activity=E,ze.Children=Fe,ze.Component=W,ze.Fragment=n,ze.Profiler=o,ze.PureComponent=oe,ze.StrictMode=s,ze.Suspense=g,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,ze.__COMPILER_RUNTIME={__proto__:null,c:function(j){return C.H.useMemoCache(j)}},ze.cache=function(j){return function(){return j.apply(null,arguments)}},ze.cacheSignal=function(){return null},ze.cloneElement=function(j,Z,ae){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var de=L({},j.props),ye=j.key;if(Z!=null)for(ce in Z.key!==void 0&&(ye=""+Z.key),Z)!R.call(Z,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&Z.ref===void 0||(de[ce]=Z[ce]);var ce=arguments.length-2;if(ce===1)de.children=ae;else if(1<ce){for(var be=Array(ce),Pe=0;Pe<ce;Pe++)be[Pe]=arguments[Pe+2];de.children=be}return O(j.type,ye,de)},ze.createContext=function(j){return j={$$typeof:d,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:c,_context:j},j},ze.createElement=function(j,Z,ae){var de,ye={},ce=null;if(Z!=null)for(de in Z.key!==void 0&&(ce=""+Z.key),Z)R.call(Z,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(ye[de]=Z[de]);var be=arguments.length-2;if(be===1)ye.children=ae;else if(1<be){for(var Pe=Array(be),fe=0;fe<be;fe++)Pe[fe]=arguments[fe+2];ye.children=Pe}if(j&&j.defaultProps)for(de in be=j.defaultProps,be)ye[de]===void 0&&(ye[de]=be[de]);return O(j,ce,ye)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(j){return{$$typeof:m,render:j}},ze.isValidElement=T,ze.lazy=function(j){return{$$typeof:x,_payload:{_status:-1,_result:j},_init:Ee}},ze.memo=function(j,Z){return{$$typeof:y,type:j,compare:Z===void 0?null:Z}},ze.startTransition=function(j){var Z=C.T,ae={};C.T=ae;try{var de=j(),ye=C.S;ye!==null&&ye(ae,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(me,je)}catch(ce){je(ce)}finally{Z!==null&&ae.types!==null&&(Z.types=ae.types),C.T=Z}},ze.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},ze.use=function(j){return C.H.use(j)},ze.useActionState=function(j,Z,ae){return C.H.useActionState(j,Z,ae)},ze.useCallback=function(j,Z){return C.H.useCallback(j,Z)},ze.useContext=function(j){return C.H.useContext(j)},ze.useDebugValue=function(){},ze.useDeferredValue=function(j,Z){return C.H.useDeferredValue(j,Z)},ze.useEffect=function(j,Z){return C.H.useEffect(j,Z)},ze.useEffectEvent=function(j){return C.H.useEffectEvent(j)},ze.useId=function(){return C.H.useId()},ze.useImperativeHandle=function(j,Z,ae){return C.H.useImperativeHandle(j,Z,ae)},ze.useInsertionEffect=function(j,Z){return C.H.useInsertionEffect(j,Z)},ze.useLayoutEffect=function(j,Z){return C.H.useLayoutEffect(j,Z)},ze.useMemo=function(j,Z){return C.H.useMemo(j,Z)},ze.useOptimistic=function(j,Z){return C.H.useOptimistic(j,Z)},ze.useReducer=function(j,Z,ae){return C.H.useReducer(j,Z,ae)},ze.useRef=function(j){return C.H.useRef(j)},ze.useState=function(j){return C.H.useState(j)},ze.useSyncExternalStore=function(j,Z,ae){return C.H.useSyncExternalStore(j,Z,ae)},ze.useTransition=function(){return C.H.useTransition()},ze.version="19.2.4",ze}var lv;function Sm(){return lv||(lv=1,Np.exports=HT()),Np.exports}var I=Sm();const qT=ax(I);var Rp={exports:{}},ec={},Cp={exports:{}},Ip={};var cv;function FT(){return cv||(cv=1,(function(i){function e(Y,ue){var Ee=Y.length;Y.push(ue);e:for(;0<Ee;){var je=Ee-1>>>1,Fe=Y[je];if(0<o(Fe,ue))Y[je]=ue,Y[Ee]=Fe,Ee=je;else break e}}function n(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var ue=Y[0],Ee=Y.pop();if(Ee!==ue){Y[0]=Ee;e:for(var je=0,Fe=Y.length,j=Fe>>>1;je<j;){var Z=2*(je+1)-1,ae=Y[Z],de=Z+1,ye=Y[de];if(0>o(ae,Ee))de<Fe&&0>o(ye,ae)?(Y[je]=ye,Y[de]=Ee,je=de):(Y[je]=ae,Y[Z]=Ee,je=Z);else if(de<Fe&&0>o(ye,Ee))Y[je]=ye,Y[de]=Ee,je=de;else break e}}return ue}function o(Y,ue){var Ee=Y.sortIndex-ue.sortIndex;return Ee!==0?Ee:Y.id-ue.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var g=[],y=[],x=1,E=null,N=3,P=!1,U=!1,L=!1,z=!1,W=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function se(Y){for(var ue=n(y);ue!==null;){if(ue.callback===null)s(y);else if(ue.startTime<=Y)s(y),ue.sortIndex=ue.expirationTime,e(g,ue);else break;ue=n(y)}}function le(Y){if(L=!1,se(Y),!U)if(n(g)!==null)U=!0,me||(me=!0,D());else{var ue=n(y);ue!==null&&De(le,ue.startTime-Y)}}var me=!1,C=-1,R=5,O=-1;function k(){return z?!0:!(i.unstable_now()-O<R)}function T(){if(z=!1,me){var Y=i.unstable_now();O=Y;var ue=!0;try{e:{U=!1,L&&(L=!1,J(C),C=-1),P=!0;var Ee=N;try{t:{for(se(Y),E=n(g);E!==null&&!(E.expirationTime>Y&&k());){var je=E.callback;if(typeof je=="function"){E.callback=null,N=E.priorityLevel;var Fe=je(E.expirationTime<=Y);if(Y=i.unstable_now(),typeof Fe=="function"){E.callback=Fe,se(Y),ue=!0;break t}E===n(g)&&s(g),se(Y)}else s(g);E=n(g)}if(E!==null)ue=!0;else{var j=n(y);j!==null&&De(le,j.startTime-Y),ue=!1}}break e}finally{E=null,N=Ee,P=!1}ue=void 0}}finally{ue?D():me=!1}}}var D;if(typeof oe=="function")D=function(){oe(T)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,we=w.port2;w.port1.onmessage=T,D=function(){we.postMessage(null)}}else D=function(){W(T,0)};function De(Y,ue){C=W(function(){Y(i.unstable_now())},ue)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Y){Y.callback=null},i.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},i.unstable_getCurrentPriorityLevel=function(){return N},i.unstable_next=function(Y){switch(N){case 1:case 2:case 3:var ue=3;break;default:ue=N}var Ee=N;N=ue;try{return Y()}finally{N=Ee}},i.unstable_requestPaint=function(){z=!0},i.unstable_runWithPriority=function(Y,ue){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Ee=N;N=Y;try{return ue()}finally{N=Ee}},i.unstable_scheduleCallback=function(Y,ue,Ee){var je=i.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?je+Ee:je):Ee=je,Y){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=Ee+Fe,Y={id:x++,callback:ue,priorityLevel:Y,startTime:Ee,expirationTime:Fe,sortIndex:-1},Ee>je?(Y.sortIndex=Ee,e(y,Y),n(g)===null&&Y===n(y)&&(L?(J(C),C=-1):L=!0,De(le,Ee-je))):(Y.sortIndex=Fe,e(g,Y),U||P||(U=!0,me||(me=!0,D()))),Y},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(Y){var ue=N;return function(){var Ee=N;N=ue;try{return Y.apply(this,arguments)}finally{N=Ee}}}})(Ip)),Ip}var uv;function GT(){return uv||(uv=1,Cp.exports=FT()),Cp.exports}var Op={exports:{}},mn={};var dv;function KT(){if(dv)return mn;dv=1;var i=Sm();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,y,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:y,implementation:x}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,mn.createPortal=function(g,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,x)},mn.flushSync=function(g){var y=d.T,x=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=y,s.p=x,s.d.f()}},mn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},mn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},mn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var x=y.as,E=m(x,y.crossOrigin),N=typeof y.integrity=="string"?y.integrity:void 0,P=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:N,fetchPriority:P}):x==="script"&&s.d.X(g,{crossOrigin:E,integrity:N,fetchPriority:P,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},mn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=m(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},mn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,E=m(x,y.crossOrigin);s.d.L(g,x,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},mn.preloadModule=function(g,y){if(typeof g=="string")if(y){var x=m(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},mn.requestFormReset=function(g){s.d.r(g)},mn.unstable_batchedUpdates=function(g,y){return g(y)},mn.useFormState=function(g,y,x){return d.H.useFormState(g,y,x)},mn.useFormStatus=function(){return d.H.useHostTransitionStatus()},mn.version="19.2.4",mn}var fv;function QT(){if(fv)return Op.exports;fv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Op.exports=KT(),Op.exports}var hv;function $T(){if(hv)return ec;hv=1;var i=GT(),e=Sm(),n=QT();function s(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var a=t,r=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(r=a.return),t=a.return;while(t)}return a.tag===3?r:null}function d(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function m(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(s(188))}function y(t){var a=t.alternate;if(!a){if(a=c(t),a===null)throw Error(s(188));return a!==t?null:t}for(var r=t,l=a;;){var f=r.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){r=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===r)return g(f),t;if(p===l)return g(f),a;p=p.sibling}throw Error(s(188))}if(r.return!==l.return)r=f,l=p;else{for(var v=!1,A=f.child;A;){if(A===r){v=!0,r=f,l=p;break}if(A===l){v=!0,l=f,r=p;break}A=A.sibling}if(!v){for(A=p.child;A;){if(A===r){v=!0,r=p,l=f;break}if(A===l){v=!0,l=p,r=f;break}A=A.sibling}if(!v)throw Error(s(189))}}if(r.alternate!==l)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?t:a}function x(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=x(t),a!==null)return a;t=t.sibling}return null}var E=Object.assign,N=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function D(t){return t===null||typeof t!="object"?null:(t=T&&t[T]||t["@@iterator"],typeof t=="function"?t:null)}var w=Symbol.for("react.client.reference");function we(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===w?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case L:return"Fragment";case W:return"Profiler";case z:return"StrictMode";case le:return"Suspense";case me:return"SuspenseList";case O:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case U:return"Portal";case oe:return t.displayName||"Context";case J:return(t._context.displayName||"Context")+".Consumer";case se:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return a=t.displayName||null,a!==null?a:we(t.type)||"Memo";case R:a=t._payload,t=t._init;try{return we(t(a))}catch{}}return null}var De=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},je=[],Fe=-1;function j(t){return{current:t}}function Z(t){0>Fe||(t.current=je[Fe],je[Fe]=null,Fe--)}function ae(t,a){Fe++,je[Fe]=t.current,t.current=a}var de=j(null),ye=j(null),ce=j(null),be=j(null);function Pe(t,a){switch(ae(ce,a),ae(ye,t),ae(de,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Rb(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Rb(a),t=Cb(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Z(de),ae(de,t)}function fe(){Z(de),Z(ye),Z(ce)}function ft(t){t.memoizedState!==null&&ae(be,t);var a=de.current,r=Cb(a,t.type);a!==r&&(ae(ye,t),ae(de,r))}function ot(t){ye.current===t&&(Z(de),Z(ye)),be.current===t&&(Z(be),Yl._currentValue=Ee)}var lt,Q;function _e(t){if(lt===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);lt=a&&a[1]||"",Q=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lt+t+Q}var pe=!1;function Ae(t,a){if(!t||pe)return"";pe=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(X){var K=X}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(X){K=X}t.call(ie.prototype)}}else{try{throw Error()}catch(X){K=X}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(X){if(X&&K&&typeof X.stack=="string")return[X.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),v=p[0],A=p[1];if(v&&A){var M=v.split(`
`),G=A.split(`
`);for(f=l=0;l<M.length&&!M[l].includes("DetermineComponentFrameRoot");)l++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(l===M.length||f===G.length)for(l=M.length-1,f=G.length-1;1<=l&&0<=f&&M[l]!==G[f];)f--;for(;1<=l&&0<=f;l--,f--)if(M[l]!==G[f]){if(l!==1||f!==1)do if(l--,f--,0>f||M[l]!==G[f]){var ee=`
`+M[l].replace(" at new "," at ");return t.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",t.displayName)),ee}while(1<=l&&0<=f);break}}}finally{pe=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?_e(r):""}function Re(t,a){switch(t.tag){case 26:case 27:case 5:return _e(t.type);case 16:return _e("Lazy");case 13:return t.child!==a&&a!==null?_e("Suspense Fallback"):_e("Suspense");case 19:return _e("SuspenseList");case 0:case 15:return Ae(t.type,!1);case 11:return Ae(t.type.render,!1);case 1:return Ae(t.type,!0);case 31:return _e("Activity");default:return""}}function Le(t){try{var a="",r=null;do a+=Re(t,r),r=t,t=t.return;while(t);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ge=Object.prototype.hasOwnProperty,H=i.unstable_scheduleCallback,Se=i.unstable_cancelCallback,hn=i.unstable_shouldYield,ua=i.unstable_requestPaint,Et=i.unstable_now,pn=i.unstable_getCurrentPriorityLevel,Bs=i.unstable_ImmediatePriority,Hs=i.unstable_UserBlockingPriority,At=i.unstable_NormalPriority,_n=i.unstable_LowPriority,Lc=i.unstable_IdlePriority,zc=i.log,Uc=i.unstable_setDisableYieldValue,da=null,an=null;function $n(t){if(typeof zc=="function"&&Uc(t),an&&typeof an.setStrictMode=="function")try{an.setStrictMode(da,t)}catch{}}var Mt=Math.clz32?Math.clz32:Hc,Bc=Math.log,jr=Math.LN2;function Hc(t){return t>>>=0,t===0?32:31-(Bc(t)/jr|0)|0}var Ca=256,qs=262144,Ut=4194304;function Ia(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Oa(t,a,r){var l=t.pendingLanes;if(l===0)return 0;var f=0,p=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~p,l!==0?f=Ia(l):(v&=A,v!==0?f=Ia(v):r||(r=A&~t,r!==0&&(f=Ia(r))))):(A=l&~p,A!==0?f=Ia(A):v!==0?f=Ia(v):r||(r=l&~t,r!==0&&(f=Ia(r)))),f===0?0:a!==0&&a!==f&&(a&p)===0&&(p=f&-f,r=a&-a,p>=r||p===32&&(r&4194048)!==0)?a:f}function fa(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function If(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qc(){var t=Ut;return Ut<<=1,(Ut&62914560)===0&&(Ut=4194304),t}function Da(t){for(var a=[],r=0;31>r;r++)a.push(t);return a}function Fs(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Of(t,a,r,l,f,p){var v=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var A=t.entanglements,M=t.expirationTimes,G=t.hiddenUpdates;for(r=v&~r;0<r;){var ee=31-Mt(r),ie=1<<ee;A[ee]=0,M[ee]=-1;var K=G[ee];if(K!==null)for(G[ee]=null,ee=0;ee<K.length;ee++){var X=K[ee];X!==null&&(X.lane&=-536870913)}r&=~ie}l!==0&&Gs(t,l,0),p!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=p&~(v&~a))}function Gs(t,a,r){t.pendingLanes|=a,t.suspendedLanes&=~a;var l=31-Mt(a);t.entangledLanes|=a,t.entanglements[l]=t.entanglements[l]|1073741824|r&261930}function el(t,a){var r=t.entangledLanes|=a;for(t=t.entanglements;r;){var l=31-Mt(r),f=1<<l;f&a|t[l]&a&&(t[l]|=a),r&=~f}}function tl(t,a){var r=a&-a;return r=(r&42)!==0?1:Ks(r),(r&(t.suspendedLanes|a))!==0?0:r}function Ks(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ci(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Fc(){var t=ue.p;return t!==0?t:(t=window.event,t===void 0?32:Wb(t.type))}function ha(t,a){var r=ue.p;try{return ue.p=t,a()}finally{ue.p=r}}var pa=Math.random().toString(36).slice(2),Bt="__reactFiber$"+pa,Zt="__reactProps$"+pa,Ma="__reactContainer$"+pa,Pr="__reactEvents$"+pa,Df="__reactListeners$"+pa,Gc="__reactHandles$"+pa,Kc="__reactResources$"+pa,ka="__reactMarker$"+pa;function Vr(t){delete t[Bt],delete t[Zt],delete t[Pr],delete t[Df],delete t[Gc]}function ja(t){var a=t[Bt];if(a)return a;for(var r=t.parentNode;r;){if(a=r[Ma]||r[Bt]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(t=Pb(t);t!==null;){if(r=t[Bt])return r;t=Pb(t)}return a}t=r,r=t.parentNode}return null}function Yn(t){if(t=t[Bt]||t[Ma]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function Pn(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(s(33))}function Pa(t){var a=t[Kc];return a||(a=t[Kc]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ht(t){t[ka]=!0}var nl=new Set,al={};function Va(t,a){La(t,a),La(t+"Capture",a)}function La(t,a){for(al[t]=a,t=0;t<a.length;t++)nl.add(a[t])}var il=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sl={},rl={};function Qc(t){return Ge.call(rl,t)?!0:Ge.call(sl,t)?!1:il.test(t)?rl[t]=!0:(sl[t]=!0,!1)}function Lr(t,a,r){if(Qc(a))if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+r)}}function Vn(t,a,r){if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+r)}}function qt(t,a,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(a,r,""+l)}}function en(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Hi(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ol(t,a,r){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,p=l.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return f.call(this)},set:function(v){r=""+v,p.call(this,v)}}),Object.defineProperty(t,a,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function ct(t){if(!t._valueTracker){var a=Hi(t)?"checked":"value";t._valueTracker=ol(t,a,""+t[a])}}function Qs(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var r=a.getValue(),l="";return t&&(l=Hi(t)?t.checked?"true":"false":t.value),t=l,t!==r?(a.setValue(t),!0):!1}function za(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var $s=/[\n"\\]/g;function An(t){return t.replace($s,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function zr(t,a,r,l,f,p,v,A){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),a!=null?v==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+en(a)):t.value!==""+en(a)&&(t.value=""+en(a)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),a!=null?ll(t,v,en(a)):r!=null?ll(t,v,en(r)):l!=null&&t.removeAttribute("value"),f==null&&p!=null&&(t.defaultChecked=!!p),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+en(A):t.removeAttribute("name")}function $c(t,a,r,l,f,p,v,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),a!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||a!=null)){ct(t);return}r=r!=null?""+en(r):"",a=a!=null?""+en(a):r,A||a===t.value||(t.value=a),t.defaultValue=a}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),ct(t)}function ll(t,a,r){a==="number"&&za(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function qi(t,a,r,l){if(t=t.options,a){a={};for(var f=0;f<r.length;f++)a["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=a.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&l&&(t[r].defaultSelected=!0)}else{for(r=""+en(r),a=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}a!==null||t[f].disabled||(a=t[f])}a!==null&&(a.selected=!0)}}function Yc(t,a,r){if(a!=null&&(a=""+en(a),a!==t.value&&(t.value=a),r==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=r!=null?""+en(r):""}function Fi(t,a,r,l){if(a==null){if(l!=null){if(r!=null)throw Error(s(92));if(De(l)){if(1<l.length)throw Error(s(93));l=l[0]}r=l}r==null&&(r=""),a=r}r=en(a),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l),ct(t)}function Tn(t,a){if(a){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=a;return}}t.textContent=a}var Xc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cl(t,a,r){var l=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":l?t.setProperty(a,r):typeof r!="number"||r===0||Xc.has(a)?a==="float"?t.cssFloat=r:t[a]=(""+r).trim():t[a]=r+"px"}function ul(t,a,r){if(a!=null&&typeof a!="object")throw Error(s(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in a)l=a[f],a.hasOwnProperty(f)&&r[f]!==l&&cl(t,f,l)}else for(var p in a)a.hasOwnProperty(p)&&cl(t,p,a[p])}function Ur(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Br(t){return Gi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ma(){}var dl=null;function Xn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ki=null,Ua=null;function Ys(t){var a=Yn(t);if(a&&(t=a.stateNode)){var r=t[Zt]||null;e:switch(t=a.stateNode,a.type){case"input":if(zr(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+An(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var l=r[a];if(l!==t&&l.form===t.form){var f=l[Zt]||null;if(!f)throw Error(s(90));zr(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<r.length;a++)l=r[a],l.form===t.form&&Qs(l)}break e;case"textarea":Yc(t,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&qi(t,!!r.multiple,a,!1)}}}var Hr=!1;function Qi(t,a,r){if(Hr)return t(a,r);Hr=!0;try{var l=t(a);return l}finally{if(Hr=!1,(Ki!==null||Ua!==null)&&(Fu(),Ki&&(a=Ki,t=Ua,Ua=Ki=null,Ys(a),t)))for(a=0;a<t.length;a++)Ys(t[a])}}function ga(t,a){var r=t.stateNode;if(r===null)return null;var l=r[Zt]||null;if(l===null)return null;r=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(s(231,a,typeof r));return r}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xs=!1;if(Jn)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){Xs=!0}}),window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{Xs=!1}var Ba=null,fl=null,Js=null;function hl(){if(Js)return Js;var t,a=fl,r=a.length,l,f="value"in Ba?Ba.value:Ba.textContent,p=f.length;for(t=0;t<r&&a[t]===f[t];t++);var v=r-t;for(l=1;l<=v&&a[r-l]===f[p-l];l++);return Js=f.slice(t,1<l?1-l:void 0)}function Ws(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function ui(){return!0}function ya(){return!1}function sn(t){function a(r,l,f,p,v){this._reactName=r,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(r=t[A],this[A]=r?r(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ui:ya,this.isPropagationStopped=ya,this}return E(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),a}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ha=sn(di),$i=E({},di,{view:0,detail:0}),pl=sn($i),Yi,qr,qa,Fr=E({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qa&&(qa&&t.type==="mousemove"?(Yi=t.screenX-qa.screenX,qr=t.screenY-qa.screenY):qr=Yi=0,qa=t),Yi)},movementY:function(t){return"movementY"in t?t.movementY:qr}}),ml=sn(Fr),Zs=E({},Fr,{dataTransfer:0}),Wc=sn(Zs),Zc=E({},$i,{relatedTarget:0}),er=sn(Zc),gl=E({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),eu=sn(gl),Gr=E({},di,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tu=sn(Gr),nu=E({},di,{data:0}),Fa=sn(nu),au={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ru(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=su[t])?!!a[t]:!1}function Xi(){return ru}var xn=E({},$i,{key:function(t){if(t.key){var a=au[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Ws(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xi,charCode:function(t){return t.type==="keypress"?Ws(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ws(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ou=sn(xn),lu=E({},Fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fi=sn(lu),u=E({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xi}),b=sn(u),_=E({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=sn(_),q=E({},Fr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$=sn(q),he=E({},di,{newState:0,oldState:0}),Be=sn(he),kt=[9,13,27,32],it=Jn&&"CompositionEvent"in window,Tt=null;Jn&&"documentMode"in document&&(Tt=document.documentMode);var Wn=Jn&&"TextEvent"in window&&!Tt,Ga=Jn&&(!it||Tt&&8<Tt&&11>=Tt),ba=" ",va=!1;function tr(t,a){switch(t){case"keyup":return kt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qr=!1;function u1(t,a){switch(t){case"compositionend":return Kr(a);case"keypress":return a.which!==32?null:(va=!0,ba);case"textInput":return t=a.data,t===ba&&va?null:t;default:return null}}function d1(t,a){if(Qr)return t==="compositionend"||!it&&tr(t,a)?(t=hl(),Js=fl=Ba=null,Qr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ga&&a.locale!=="ko"?null:a.data;default:return null}}var f1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zg(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!f1[t.type]:a==="textarea"}function Ug(t,a,r,l){Ki?Ua?Ua.push(l):Ua=[l]:Ki=l,a=Ju(a,"onChange"),0<a.length&&(r=new Ha("onChange","change",null,r,l),t.push({event:r,listeners:a}))}var yl=null,bl=null;function h1(t){Eb(t,0)}function cu(t){var a=Pn(t);if(Qs(a))return t}function Bg(t,a){if(t==="change")return a}var Hg=!1;if(Jn){var Mf;if(Jn){var kf="oninput"in document;if(!kf){var qg=document.createElement("div");qg.setAttribute("oninput","return;"),kf=typeof qg.oninput=="function"}Mf=kf}else Mf=!1;Hg=Mf&&(!document.documentMode||9<document.documentMode)}function Fg(){yl&&(yl.detachEvent("onpropertychange",Gg),bl=yl=null)}function Gg(t){if(t.propertyName==="value"&&cu(bl)){var a=[];Ug(a,bl,t,Xn(t)),Qi(h1,a)}}function p1(t,a,r){t==="focusin"?(Fg(),yl=a,bl=r,yl.attachEvent("onpropertychange",Gg)):t==="focusout"&&Fg()}function m1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cu(bl)}function g1(t,a){if(t==="click")return cu(a)}function y1(t,a){if(t==="input"||t==="change")return cu(a)}function b1(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Ln=typeof Object.is=="function"?Object.is:b1;function vl(t,a){if(Ln(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var r=Object.keys(t),l=Object.keys(a);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var f=r[l];if(!Ge.call(a,f)||!Ln(t[f],a[f]))return!1}return!0}function Kg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qg(t,a){var r=Kg(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=a&&l>=a)return{node:r,offset:a-t};t=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kg(r)}}function $g(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?$g(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Yg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=za(t.document);a instanceof t.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)t=a.contentWindow;else break;a=za(t.document)}return a}function jf(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var v1=Jn&&"documentMode"in document&&11>=document.documentMode,$r=null,Pf=null,_l=null,Vf=!1;function Xg(t,a,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Vf||$r==null||$r!==za(l)||(l=$r,"selectionStart"in l&&jf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),_l&&vl(_l,l)||(_l=l,l=Ju(Pf,"onSelect"),0<l.length&&(a=new Ha("onSelect","select",null,a,r),t.push({event:a,listeners:l}),a.target=$r)))}function nr(t,a){var r={};return r[t.toLowerCase()]=a.toLowerCase(),r["Webkit"+t]="webkit"+a,r["Moz"+t]="moz"+a,r}var Yr={animationend:nr("Animation","AnimationEnd"),animationiteration:nr("Animation","AnimationIteration"),animationstart:nr("Animation","AnimationStart"),transitionrun:nr("Transition","TransitionRun"),transitionstart:nr("Transition","TransitionStart"),transitioncancel:nr("Transition","TransitionCancel"),transitionend:nr("Transition","TransitionEnd")},Lf={},Jg={};Jn&&(Jg=document.createElement("div").style,"AnimationEvent"in window||(delete Yr.animationend.animation,delete Yr.animationiteration.animation,delete Yr.animationstart.animation),"TransitionEvent"in window||delete Yr.transitionend.transition);function ar(t){if(Lf[t])return Lf[t];if(!Yr[t])return t;var a=Yr[t],r;for(r in a)if(a.hasOwnProperty(r)&&r in Jg)return Lf[t]=a[r];return t}var Wg=ar("animationend"),Zg=ar("animationiteration"),ey=ar("animationstart"),_1=ar("transitionrun"),x1=ar("transitionstart"),E1=ar("transitioncancel"),ty=ar("transitionend"),ny=new Map,zf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zf.push("scrollEnd");function _a(t,a){ny.set(t,a),Va(a,[t])}var uu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Zn=[],Xr=0,Uf=0;function du(){for(var t=Xr,a=Uf=Xr=0;a<t;){var r=Zn[a];Zn[a++]=null;var l=Zn[a];Zn[a++]=null;var f=Zn[a];Zn[a++]=null;var p=Zn[a];if(Zn[a++]=null,l!==null&&f!==null){var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}p!==0&&ay(r,f,p)}}function fu(t,a,r,l){Zn[Xr++]=t,Zn[Xr++]=a,Zn[Xr++]=r,Zn[Xr++]=l,Uf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Bf(t,a,r,l){return fu(t,a,r,l),hu(t)}function ir(t,a){return fu(t,null,null,a),hu(t)}function ay(t,a,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var f=!1,p=t.return;p!==null;)p.childLanes|=r,l=p.alternate,l!==null&&(l.childLanes|=r),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(f=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,f&&a!==null&&(f=31-Mt(r),t=p.hiddenUpdates,l=t[f],l===null?t[f]=[a]:l.push(a),a.lane=r|536870912),p):null}function hu(t){if(50<Hl)throw Hl=0,Xh=null,Error(s(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var Jr={};function A1(t,a,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(t,a,r,l){return new A1(t,a,r,l)}function Hf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hi(t,a){var r=t.alternate;return r===null?(r=zn(t.tag,a,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=a,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,a=t.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function iy(t,a){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,a=r.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function pu(t,a,r,l,f,p){var v=0;if(l=t,typeof t=="function")Hf(t)&&(v=1);else if(typeof t=="string")v=RT(t,r,de.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case O:return t=zn(31,r,a,f),t.elementType=O,t.lanes=p,t;case L:return sr(r.children,f,p,a);case z:v=8,f|=24;break;case W:return t=zn(12,r,a,f|2),t.elementType=W,t.lanes=p,t;case le:return t=zn(13,r,a,f),t.elementType=le,t.lanes=p,t;case me:return t=zn(19,r,a,f),t.elementType=me,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oe:v=10;break e;case J:v=9;break e;case se:v=11;break e;case C:v=14;break e;case R:v=16,l=null;break e}v=29,r=Error(s(130,t===null?"null":typeof t,"")),l=null}return a=zn(v,r,a,f),a.elementType=t,a.type=l,a.lanes=p,a}function sr(t,a,r,l){return t=zn(7,t,l,a),t.lanes=r,t}function qf(t,a,r){return t=zn(6,t,null,a),t.lanes=r,t}function sy(t){var a=zn(18,null,null,0);return a.stateNode=t,a}function Ff(t,a,r){return a=zn(4,t.children!==null?t.children:[],t.key,a),a.lanes=r,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var ry=new WeakMap;function ea(t,a){if(typeof t=="object"&&t!==null){var r=ry.get(t);return r!==void 0?r:(a={value:t,source:a,stack:Le(a)},ry.set(t,a),a)}return{value:t,source:a,stack:Le(a)}}var Wr=[],Zr=0,mu=null,xl=0,ta=[],na=0,Ji=null,Ka=1,Qa="";function pi(t,a){Wr[Zr++]=xl,Wr[Zr++]=mu,mu=t,xl=a}function oy(t,a,r){ta[na++]=Ka,ta[na++]=Qa,ta[na++]=Ji,Ji=t;var l=Ka;t=Qa;var f=32-Mt(l)-1;l&=~(1<<f),r+=1;var p=32-Mt(a)+f;if(30<p){var v=f-f%5;p=(l&(1<<v)-1).toString(32),l>>=v,f-=v,Ka=1<<32-Mt(a)+f|r<<f|l,Qa=p+t}else Ka=1<<p|r<<f|l,Qa=t}function Gf(t){t.return!==null&&(pi(t,1),oy(t,1,0))}function Kf(t){for(;t===mu;)mu=Wr[--Zr],Wr[Zr]=null,xl=Wr[--Zr],Wr[Zr]=null;for(;t===Ji;)Ji=ta[--na],ta[na]=null,Qa=ta[--na],ta[na]=null,Ka=ta[--na],ta[na]=null}function ly(t,a){ta[na++]=Ka,ta[na++]=Qa,ta[na++]=Ji,Ka=a.id,Qa=a.overflow,Ji=t}var rn=null,vt=null,et=!1,Wi=null,aa=!1,Qf=Error(s(519));function Zi(t){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw El(ea(a,t)),Qf}function cy(t){var a=t.stateNode,r=t.type,l=t.memoizedProps;switch(a[Bt]=t,a[Zt]=l,r){case"dialog":Qe("cancel",a),Qe("close",a);break;case"iframe":case"object":case"embed":Qe("load",a);break;case"video":case"audio":for(r=0;r<Fl.length;r++)Qe(Fl[r],a);break;case"source":Qe("error",a);break;case"img":case"image":case"link":Qe("error",a),Qe("load",a);break;case"details":Qe("toggle",a);break;case"input":Qe("invalid",a),$c(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Qe("invalid",a);break;case"textarea":Qe("invalid",a),Fi(a,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||l.suppressHydrationWarning===!0||wb(a.textContent,r)?(l.popover!=null&&(Qe("beforetoggle",a),Qe("toggle",a)),l.onScroll!=null&&Qe("scroll",a),l.onScrollEnd!=null&&Qe("scrollend",a),l.onClick!=null&&(a.onclick=ma),a=!0):a=!1,a||Zi(t,!0)}function uy(t){for(rn=t.return;rn;)switch(rn.tag){case 5:case 31:case 13:aa=!1;return;case 27:case 3:aa=!0;return;default:rn=rn.return}}function eo(t){if(t!==rn)return!1;if(!et)return uy(t),et=!0,!1;var a=t.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||dp(t.type,t.memoizedProps)),r=!r),r&&vt&&Zi(t),uy(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));vt=jb(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));vt=jb(t)}else a===27?(a=vt,hs(t.type)?(t=gp,gp=null,vt=t):vt=a):vt=rn?sa(t.stateNode.nextSibling):null;return!0}function rr(){vt=rn=null,et=!1}function $f(){var t=Wi;return t!==null&&(Rn===null?Rn=t:Rn.push.apply(Rn,t),Wi=null),t}function El(t){Wi===null?Wi=[t]:Wi.push(t)}var Yf=j(null),or=null,mi=null;function es(t,a,r){ae(Yf,a._currentValue),a._currentValue=r}function gi(t){t._currentValue=Yf.current,Z(Yf)}function Xf(t,a,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),t===r)break;t=t.return}}function Jf(t,a,r,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var p=f.dependencies;if(p!==null){var v=f.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=f;for(var M=0;M<a.length;M++)if(A.context===a[M]){p.lanes|=r,A=p.alternate,A!==null&&(A.lanes|=r),Xf(p.return,r,t),l||(v=null);break e}p=A.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(s(341));v.lanes|=r,p=v.alternate,p!==null&&(p.lanes|=r),Xf(v,r,t),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function to(t,a,r,l){t=null;for(var f=a,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var A=f.type;Ln(f.pendingProps.value,v.value)||(t!==null?t.push(A):t=[A])}}else if(f===be.current){if(v=f.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Yl):t=[Yl])}f=f.return}t!==null&&Jf(a,t,r,l),a.flags|=262144}function gu(t){for(t=t.firstContext;t!==null;){if(!Ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function lr(t){or=t,mi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function on(t){return dy(or,t)}function yu(t,a){return or===null&&lr(t),dy(t,a)}function dy(t,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},mi===null){if(t===null)throw Error(s(308));mi=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else mi=mi.next=a;return r}var T1=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){a.aborted=!0,t.forEach(function(r){return r()})}},S1=i.unstable_scheduleCallback,w1=i.unstable_NormalPriority,Ft={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wf(){return{controller:new T1,data:new Map,refCount:0}}function Al(t){t.refCount--,t.refCount===0&&S1(w1,function(){t.controller.abort()})}var Tl=null,Zf=0,no=0,ao=null;function N1(t,a){if(Tl===null){var r=Tl=[];Zf=0,no=np(),ao={status:"pending",value:void 0,then:function(l){r.push(l)}}}return Zf++,a.then(fy,fy),a}function fy(){if(--Zf===0&&Tl!==null){ao!==null&&(ao.status="fulfilled");var t=Tl;Tl=null,no=0,ao=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function R1(t,a){var r=[],l={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){l.status="fulfilled",l.value=a;for(var f=0;f<r.length;f++)(0,r[f])(a)},function(f){for(l.status="rejected",l.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),l}var hy=Y.S;Y.S=function(t,a){X0=Et(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&N1(t,a),hy!==null&&hy(t,a)};var cr=j(null);function eh(){var t=cr.current;return t!==null?t:yt.pooledCache}function bu(t,a){a===null?ae(cr,cr.current):ae(cr,a.pool)}function py(){var t=eh();return t===null?null:{parent:Ft._currentValue,pool:t}}var io=Error(s(460)),th=Error(s(474)),vu=Error(s(542)),_u={then:function(){}};function my(t){return t=t.status,t==="fulfilled"||t==="rejected"}function gy(t,a,r){switch(r=t[r],r===void 0?t.push(a):r!==a&&(a.then(ma,ma),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,by(t),t;default:if(typeof a.status=="string")a.then(ma,ma);else{if(t=yt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=a,t.status="pending",t.then(function(l){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=l}},function(l){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,by(t),t}throw dr=a,io}}function ur(t){try{var a=t._init;return a(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(dr=r,io):r}}var dr=null;function yy(){if(dr===null)throw Error(s(459));var t=dr;return dr=null,t}function by(t){if(t===io||t===vu)throw Error(s(483))}var so=null,Sl=0;function xu(t){var a=Sl;return Sl+=1,so===null&&(so=[]),gy(so,t,a)}function wl(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Eu(t,a){throw a.$$typeof===N?Error(s(525)):(t=Object.prototype.toString.call(a),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function vy(t){function a(B,V){if(t){var F=B.deletions;F===null?(B.deletions=[V],B.flags|=16):F.push(V)}}function r(B,V){if(!t)return null;for(;V!==null;)a(B,V),V=V.sibling;return null}function l(B){for(var V=new Map;B!==null;)B.key!==null?V.set(B.key,B):V.set(B.index,B),B=B.sibling;return V}function f(B,V){return B=hi(B,V),B.index=0,B.sibling=null,B}function p(B,V,F){return B.index=F,t?(F=B.alternate,F!==null?(F=F.index,F<V?(B.flags|=67108866,V):F):(B.flags|=67108866,V)):(B.flags|=1048576,V)}function v(B){return t&&B.alternate===null&&(B.flags|=67108866),B}function A(B,V,F,te){return V===null||V.tag!==6?(V=qf(F,B.mode,te),V.return=B,V):(V=f(V,F),V.return=B,V)}function M(B,V,F,te){var Ce=F.type;return Ce===L?ee(B,V,F.props.children,te,F.key):V!==null&&(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===R&&ur(Ce)===V.type)?(V=f(V,F.props),wl(V,F),V.return=B,V):(V=pu(F.type,F.key,F.props,null,B.mode,te),wl(V,F),V.return=B,V)}function G(B,V,F,te){return V===null||V.tag!==4||V.stateNode.containerInfo!==F.containerInfo||V.stateNode.implementation!==F.implementation?(V=Ff(F,B.mode,te),V.return=B,V):(V=f(V,F.children||[]),V.return=B,V)}function ee(B,V,F,te,Ce){return V===null||V.tag!==7?(V=sr(F,B.mode,te,Ce),V.return=B,V):(V=f(V,F),V.return=B,V)}function ie(B,V,F){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=qf(""+V,B.mode,F),V.return=B,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case P:return F=pu(V.type,V.key,V.props,null,B.mode,F),wl(F,V),F.return=B,F;case U:return V=Ff(V,B.mode,F),V.return=B,V;case R:return V=ur(V),ie(B,V,F)}if(De(V)||D(V))return V=sr(V,B.mode,F,null),V.return=B,V;if(typeof V.then=="function")return ie(B,xu(V),F);if(V.$$typeof===oe)return ie(B,yu(B,V),F);Eu(B,V)}return null}function K(B,V,F,te){var Ce=V!==null?V.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Ce!==null?null:A(B,V,""+F,te);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case P:return F.key===Ce?M(B,V,F,te):null;case U:return F.key===Ce?G(B,V,F,te):null;case R:return F=ur(F),K(B,V,F,te)}if(De(F)||D(F))return Ce!==null?null:ee(B,V,F,te,null);if(typeof F.then=="function")return K(B,V,xu(F),te);if(F.$$typeof===oe)return K(B,V,yu(B,F),te);Eu(B,F)}return null}function X(B,V,F,te,Ce){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return B=B.get(F)||null,A(V,B,""+te,Ce);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case P:return B=B.get(te.key===null?F:te.key)||null,M(V,B,te,Ce);case U:return B=B.get(te.key===null?F:te.key)||null,G(V,B,te,Ce);case R:return te=ur(te),X(B,V,F,te,Ce)}if(De(te)||D(te))return B=B.get(F)||null,ee(V,B,te,Ce,null);if(typeof te.then=="function")return X(B,V,F,xu(te),Ce);if(te.$$typeof===oe)return X(B,V,F,yu(V,te),Ce);Eu(V,te)}return null}function xe(B,V,F,te){for(var Ce=null,nt=null,Te=V,qe=V=0,Ye=null;Te!==null&&qe<F.length;qe++){Te.index>qe?(Ye=Te,Te=null):Ye=Te.sibling;var at=K(B,Te,F[qe],te);if(at===null){Te===null&&(Te=Ye);break}t&&Te&&at.alternate===null&&a(B,Te),V=p(at,V,qe),nt===null?Ce=at:nt.sibling=at,nt=at,Te=Ye}if(qe===F.length)return r(B,Te),et&&pi(B,qe),Ce;if(Te===null){for(;qe<F.length;qe++)Te=ie(B,F[qe],te),Te!==null&&(V=p(Te,V,qe),nt===null?Ce=Te:nt.sibling=Te,nt=Te);return et&&pi(B,qe),Ce}for(Te=l(Te);qe<F.length;qe++)Ye=X(Te,B,qe,F[qe],te),Ye!==null&&(t&&Ye.alternate!==null&&Te.delete(Ye.key===null?qe:Ye.key),V=p(Ye,V,qe),nt===null?Ce=Ye:nt.sibling=Ye,nt=Ye);return t&&Te.forEach(function(bs){return a(B,bs)}),et&&pi(B,qe),Ce}function Oe(B,V,F,te){if(F==null)throw Error(s(151));for(var Ce=null,nt=null,Te=V,qe=V=0,Ye=null,at=F.next();Te!==null&&!at.done;qe++,at=F.next()){Te.index>qe?(Ye=Te,Te=null):Ye=Te.sibling;var bs=K(B,Te,at.value,te);if(bs===null){Te===null&&(Te=Ye);break}t&&Te&&bs.alternate===null&&a(B,Te),V=p(bs,V,qe),nt===null?Ce=bs:nt.sibling=bs,nt=bs,Te=Ye}if(at.done)return r(B,Te),et&&pi(B,qe),Ce;if(Te===null){for(;!at.done;qe++,at=F.next())at=ie(B,at.value,te),at!==null&&(V=p(at,V,qe),nt===null?Ce=at:nt.sibling=at,nt=at);return et&&pi(B,qe),Ce}for(Te=l(Te);!at.done;qe++,at=F.next())at=X(Te,B,qe,at.value,te),at!==null&&(t&&at.alternate!==null&&Te.delete(at.key===null?qe:at.key),V=p(at,V,qe),nt===null?Ce=at:nt.sibling=at,nt=at);return t&&Te.forEach(function(zT){return a(B,zT)}),et&&pi(B,qe),Ce}function gt(B,V,F,te){if(typeof F=="object"&&F!==null&&F.type===L&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case P:e:{for(var Ce=F.key;V!==null;){if(V.key===Ce){if(Ce=F.type,Ce===L){if(V.tag===7){r(B,V.sibling),te=f(V,F.props.children),te.return=B,B=te;break e}}else if(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===R&&ur(Ce)===V.type){r(B,V.sibling),te=f(V,F.props),wl(te,F),te.return=B,B=te;break e}r(B,V);break}else a(B,V);V=V.sibling}F.type===L?(te=sr(F.props.children,B.mode,te,F.key),te.return=B,B=te):(te=pu(F.type,F.key,F.props,null,B.mode,te),wl(te,F),te.return=B,B=te)}return v(B);case U:e:{for(Ce=F.key;V!==null;){if(V.key===Ce)if(V.tag===4&&V.stateNode.containerInfo===F.containerInfo&&V.stateNode.implementation===F.implementation){r(B,V.sibling),te=f(V,F.children||[]),te.return=B,B=te;break e}else{r(B,V);break}else a(B,V);V=V.sibling}te=Ff(F,B.mode,te),te.return=B,B=te}return v(B);case R:return F=ur(F),gt(B,V,F,te)}if(De(F))return xe(B,V,F,te);if(D(F)){if(Ce=D(F),typeof Ce!="function")throw Error(s(150));return F=Ce.call(F),Oe(B,V,F,te)}if(typeof F.then=="function")return gt(B,V,xu(F),te);if(F.$$typeof===oe)return gt(B,V,yu(B,F),te);Eu(B,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,V!==null&&V.tag===6?(r(B,V.sibling),te=f(V,F),te.return=B,B=te):(r(B,V),te=qf(F,B.mode,te),te.return=B,B=te),v(B)):r(B,V)}return function(B,V,F,te){try{Sl=0;var Ce=gt(B,V,F,te);return so=null,Ce}catch(Te){if(Te===io||Te===vu)throw Te;var nt=zn(29,Te,null,B.mode);return nt.lanes=te,nt.return=B,nt}}}var fr=vy(!0),_y=vy(!1),ts=!1;function nh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ah(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ns(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function as(t,a,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(st&2)!==0){var f=l.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),l.pending=a,a=hu(t),ay(t,null,r),a}return fu(t,l,a,r),hu(t)}function Nl(t,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var l=a.lanes;l&=t.pendingLanes,r|=l,a.lanes=r,el(t,r)}}function ih(t,a){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var f=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?f=p=v:p=p.next=v,r=r.next}while(r!==null);p===null?f=p=a:p=p.next=a}else f=p=a;r={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=a:t.next=a,r.lastBaseUpdate=a}var sh=!1;function Rl(){if(sh){var t=ao;if(t!==null)throw t}}function Cl(t,a,r,l){sh=!1;var f=t.updateQueue;ts=!1;var p=f.firstBaseUpdate,v=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var M=A,G=M.next;M.next=null,v===null?p=G:v.next=G,v=M;var ee=t.alternate;ee!==null&&(ee=ee.updateQueue,A=ee.lastBaseUpdate,A!==v&&(A===null?ee.firstBaseUpdate=G:A.next=G,ee.lastBaseUpdate=M))}if(p!==null){var ie=f.baseState;v=0,ee=G=M=null,A=p;do{var K=A.lane&-536870913,X=K!==A.lane;if(X?($e&K)===K:(l&K)===K){K!==0&&K===no&&(sh=!0),ee!==null&&(ee=ee.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var xe=t,Oe=A;K=a;var gt=r;switch(Oe.tag){case 1:if(xe=Oe.payload,typeof xe=="function"){ie=xe.call(gt,ie,K);break e}ie=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Oe.payload,K=typeof xe=="function"?xe.call(gt,ie,K):xe,K==null)break e;ie=E({},ie,K);break e;case 2:ts=!0}}K=A.callback,K!==null&&(t.flags|=64,X&&(t.flags|=8192),X=f.callbacks,X===null?f.callbacks=[K]:X.push(K))}else X={lane:K,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ee===null?(G=ee=X,M=ie):ee=ee.next=X,v|=K;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;X=A,A=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);ee===null&&(M=ie),f.baseState=M,f.firstBaseUpdate=G,f.lastBaseUpdate=ee,p===null&&(f.shared.lanes=0),ls|=v,t.lanes=v,t.memoizedState=ie}}function xy(t,a){if(typeof t!="function")throw Error(s(191,t));t.call(a)}function Ey(t,a){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)xy(r[t],a)}var ro=j(null),Au=j(0);function Ay(t,a){t=Si,ae(Au,t),ae(ro,a),Si=t|a.baseLanes}function rh(){ae(Au,Si),ae(ro,ro.current)}function oh(){Si=Au.current,Z(ro),Z(Au)}var Un=j(null),ia=null;function is(t){var a=t.alternate;ae(jt,jt.current&1),ae(Un,t),ia===null&&(a===null||ro.current!==null||a.memoizedState!==null)&&(ia=t)}function lh(t){ae(jt,jt.current),ae(Un,t),ia===null&&(ia=t)}function Ty(t){t.tag===22?(ae(jt,jt.current),ae(Un,t),ia===null&&(ia=t)):ss()}function ss(){ae(jt,jt.current),ae(Un,Un.current)}function Bn(t){Z(Un),ia===t&&(ia=null),Z(jt)}var jt=j(0);function Tu(t){for(var a=t;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||pp(r)||mp(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var yi=0,He=null,pt=null,Gt=null,Su=!1,oo=!1,hr=!1,wu=0,Il=0,lo=null,C1=0;function Rt(){throw Error(s(321))}function ch(t,a){if(a===null)return!1;for(var r=0;r<a.length&&r<t.length;r++)if(!Ln(t[r],a[r]))return!1;return!0}function uh(t,a,r,l,f,p){return yi=p,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Y.H=t===null||t.memoizedState===null?o0:Sh,hr=!1,p=r(l,f),hr=!1,oo&&(p=wy(a,r,l,f)),Sy(t),p}function Sy(t){Y.H=Ml;var a=pt!==null&&pt.next!==null;if(yi=0,Gt=pt=He=null,Su=!1,Il=0,lo=null,a)throw Error(s(300));t===null||Kt||(t=t.dependencies,t!==null&&gu(t)&&(Kt=!0))}function wy(t,a,r,l){He=t;var f=0;do{if(oo&&(lo=null),Il=0,oo=!1,25<=f)throw Error(s(301));if(f+=1,Gt=pt=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Y.H=l0,p=a(r,l)}while(oo);return p}function I1(){var t=Y.H,a=t.useState()[0];return a=typeof a.then=="function"?Ol(a):a,t=t.useState()[0],(pt!==null?pt.memoizedState:null)!==t&&(He.flags|=1024),a}function dh(){var t=wu!==0;return wu=0,t}function fh(t,a,r){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~r}function hh(t){if(Su){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Su=!1}yi=0,Gt=pt=He=null,oo=!1,Il=wu=0,lo=null}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?He.memoizedState=Gt=t:Gt=Gt.next=t,Gt}function Pt(){if(pt===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var a=Gt===null?He.memoizedState:Gt.next;if(a!==null)Gt=a,pt=t;else{if(t===null)throw He.alternate===null?Error(s(467)):Error(s(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Gt===null?He.memoizedState=Gt=t:Gt=Gt.next=t}return Gt}function Nu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ol(t){var a=Il;return Il+=1,lo===null&&(lo=[]),t=gy(lo,t,a),a=He,(Gt===null?a.memoizedState:Gt.next)===null&&(a=a.alternate,Y.H=a===null||a.memoizedState===null?o0:Sh),t}function Ru(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ol(t);if(t.$$typeof===oe)return on(t)}throw Error(s(438,String(t)))}function ph(t){var a=null,r=He.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var l=He.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=Nu(),He.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(t),l=0;l<t;l++)r[l]=k;return a.index++,r}function bi(t,a){return typeof a=="function"?a(t):a}function Cu(t){var a=Pt();return mh(a,pt,t)}function mh(t,a,r){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var f=t.baseQueue,p=l.pending;if(p!==null){if(f!==null){var v=f.next;f.next=p.next,p.next=v}a.baseQueue=f=p,l.pending=null}if(p=t.baseState,f===null)t.memoizedState=p;else{a=f.next;var A=v=null,M=null,G=a,ee=!1;do{var ie=G.lane&-536870913;if(ie!==G.lane?($e&ie)===ie:(yi&ie)===ie){var K=G.revertLane;if(K===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ie===no&&(ee=!0);else if((yi&K)===K){G=G.next,K===no&&(ee=!0);continue}else ie={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(A=M=ie,v=p):M=M.next=ie,He.lanes|=K,ls|=K;ie=G.action,hr&&r(p,ie),p=G.hasEagerState?G.eagerState:r(p,ie)}else K={lane:ie,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(A=M=K,v=p):M=M.next=K,He.lanes|=ie,ls|=ie;G=G.next}while(G!==null&&G!==a);if(M===null?v=p:M.next=A,!Ln(p,t.memoizedState)&&(Kt=!0,ee&&(r=ao,r!==null)))throw r;t.memoizedState=p,t.baseState=v,t.baseQueue=M,l.lastRenderedState=p}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function gh(t){var a=Pt(),r=a.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=t;var l=r.dispatch,f=r.pending,p=a.memoizedState;if(f!==null){r.pending=null;var v=f=f.next;do p=t(p,v.action),v=v.next;while(v!==f);Ln(p,a.memoizedState)||(Kt=!0),a.memoizedState=p,a.baseQueue===null&&(a.baseState=p),r.lastRenderedState=p}return[p,l]}function Ny(t,a,r){var l=He,f=Pt(),p=et;if(p){if(r===void 0)throw Error(s(407));r=r()}else r=a();var v=!Ln((pt||f).memoizedState,r);if(v&&(f.memoizedState=r,Kt=!0),f=f.queue,vh(Iy.bind(null,l,f,t),[t]),f.getSnapshot!==a||v||Gt!==null&&Gt.memoizedState.tag&1){if(l.flags|=2048,co(9,{destroy:void 0},Cy.bind(null,l,f,r,a),null),yt===null)throw Error(s(349));p||(yi&127)!==0||Ry(l,a,r)}return r}function Ry(t,a,r){t.flags|=16384,t={getSnapshot:a,value:r},a=He.updateQueue,a===null?(a=Nu(),He.updateQueue=a,a.stores=[t]):(r=a.stores,r===null?a.stores=[t]:r.push(t))}function Cy(t,a,r,l){a.value=r,a.getSnapshot=l,Oy(a)&&Dy(t)}function Iy(t,a,r){return r(function(){Oy(a)&&Dy(t)})}function Oy(t){var a=t.getSnapshot;t=t.value;try{var r=a();return!Ln(t,r)}catch{return!0}}function Dy(t){var a=ir(t,2);a!==null&&Cn(a,t,2)}function yh(t){var a=En();if(typeof t=="function"){var r=t;if(t=r(),hr){$n(!0);try{r()}finally{$n(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:t},a}function My(t,a,r,l){return t.baseState=r,mh(t,pt,typeof l=="function"?l:bi)}function O1(t,a,r,l,f){if(Du(t))throw Error(s(485));if(t=a.action,t!==null){var p={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){p.listeners.push(v)}};Y.T!==null?r(!0):p.isTransition=!1,l(p),r=a.pending,r===null?(p.next=a.pending=p,ky(a,p)):(p.next=r.next,a.pending=r.next=p)}}function ky(t,a){var r=a.action,l=a.payload,f=t.state;if(a.isTransition){var p=Y.T,v={};Y.T=v;try{var A=r(f,l),M=Y.S;M!==null&&M(v,A),jy(t,a,A)}catch(G){bh(t,a,G)}finally{p!==null&&v.types!==null&&(p.types=v.types),Y.T=p}}else try{p=r(f,l),jy(t,a,p)}catch(G){bh(t,a,G)}}function jy(t,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){Py(t,a,l)},function(l){return bh(t,a,l)}):Py(t,a,r)}function Py(t,a,r){a.status="fulfilled",a.value=r,Vy(a),t.state=r,a=t.pending,a!==null&&(r=a.next,r===a?t.pending=null:(r=r.next,a.next=r,ky(t,r)))}function bh(t,a,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=r,Vy(a),a=a.next;while(a!==l)}t.action=null}function Vy(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Ly(t,a){return a}function zy(t,a){if(et){var r=yt.formState;if(r!==null){e:{var l=He;if(et){if(vt){t:{for(var f=vt,p=aa;f.nodeType!==8;){if(!p){f=null;break t}if(f=sa(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){vt=sa(f.nextSibling),l=f.data==="F!";break e}}Zi(l)}l=!1}l&&(a=r[0])}}return r=En(),r.memoizedState=r.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ly,lastRenderedState:a},r.queue=l,r=i0.bind(null,He,l),l.dispatch=r,l=yh(!1),p=Th.bind(null,He,!1,l.queue),l=En(),f={state:a,dispatch:null,action:t,pending:null},l.queue=f,r=O1.bind(null,He,f,p,r),f.dispatch=r,l.memoizedState=t,[a,r,!1]}function Uy(t){var a=Pt();return By(a,pt,t)}function By(t,a,r){if(a=mh(t,a,Ly)[0],t=Cu(bi)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=Ol(a)}catch(v){throw v===io?vu:v}else l=a;a=Pt();var f=a.queue,p=f.dispatch;return r!==a.memoizedState&&(He.flags|=2048,co(9,{destroy:void 0},D1.bind(null,f,r),null)),[l,p,t]}function D1(t,a){t.action=a}function Hy(t){var a=Pt(),r=pt;if(r!==null)return By(a,r,t);Pt(),a=a.memoizedState,r=Pt();var l=r.queue.dispatch;return r.memoizedState=t,[a,l,!1]}function co(t,a,r,l){return t={tag:t,create:r,deps:l,inst:a,next:null},a=He.updateQueue,a===null&&(a=Nu(),He.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,a.lastEffect=t),t}function qy(){return Pt().memoizedState}function Iu(t,a,r,l){var f=En();He.flags|=t,f.memoizedState=co(1|a,{destroy:void 0},r,l===void 0?null:l)}function Ou(t,a,r,l){var f=Pt();l=l===void 0?null:l;var p=f.memoizedState.inst;pt!==null&&l!==null&&ch(l,pt.memoizedState.deps)?f.memoizedState=co(a,p,r,l):(He.flags|=t,f.memoizedState=co(1|a,p,r,l))}function Fy(t,a){Iu(8390656,8,t,a)}function vh(t,a){Ou(2048,8,t,a)}function M1(t){He.flags|=4;var a=He.updateQueue;if(a===null)a=Nu(),He.updateQueue=a,a.events=[t];else{var r=a.events;r===null?a.events=[t]:r.push(t)}}function Gy(t){var a=Pt().memoizedState;return M1({ref:a,nextImpl:t}),function(){if((st&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Ky(t,a){return Ou(4,2,t,a)}function Qy(t,a){return Ou(4,4,t,a)}function $y(t,a){if(typeof a=="function"){t=t();var r=a(t);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Yy(t,a,r){r=r!=null?r.concat([t]):null,Ou(4,4,$y.bind(null,a,t),r)}function _h(){}function Xy(t,a){var r=Pt();a=a===void 0?null:a;var l=r.memoizedState;return a!==null&&ch(a,l[1])?l[0]:(r.memoizedState=[t,a],t)}function Jy(t,a){var r=Pt();a=a===void 0?null:a;var l=r.memoizedState;if(a!==null&&ch(a,l[1]))return l[0];if(l=t(),hr){$n(!0);try{t()}finally{$n(!1)}}return r.memoizedState=[l,a],l}function xh(t,a,r){return r===void 0||(yi&1073741824)!==0&&($e&261930)===0?t.memoizedState=a:(t.memoizedState=r,t=W0(),He.lanes|=t,ls|=t,r)}function Wy(t,a,r,l){return Ln(r,a)?r:ro.current!==null?(t=xh(t,r,l),Ln(t,a)||(Kt=!0),t):(yi&42)===0||(yi&1073741824)!==0&&($e&261930)===0?(Kt=!0,t.memoizedState=r):(t=W0(),He.lanes|=t,ls|=t,a)}function Zy(t,a,r,l,f){var p=ue.p;ue.p=p!==0&&8>p?p:8;var v=Y.T,A={};Y.T=A,Th(t,!1,a,r);try{var M=f(),G=Y.S;if(G!==null&&G(A,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ee=R1(M,l);Dl(t,a,ee,Fn(t))}else Dl(t,a,l,Fn(t))}catch(ie){Dl(t,a,{then:function(){},status:"rejected",reason:ie},Fn())}finally{ue.p=p,v!==null&&A.types!==null&&(v.types=A.types),Y.T=v}}function k1(){}function Eh(t,a,r,l){if(t.tag!==5)throw Error(s(476));var f=e0(t).queue;Zy(t,f,a,Ee,r===null?k1:function(){return t0(t),r(l)})}function e0(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:Ee},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bi,lastRenderedState:r},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function t0(t){var a=e0(t);a.next===null&&(a=t.alternate.memoizedState),Dl(t,a.next.queue,{},Fn())}function Ah(){return on(Yl)}function n0(){return Pt().memoizedState}function a0(){return Pt().memoizedState}function j1(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var r=Fn();t=ns(r);var l=as(a,t,r);l!==null&&(Cn(l,a,r),Nl(l,a,r)),a={cache:Wf()},t.payload=a;return}a=a.return}}function P1(t,a,r){var l=Fn();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Du(t)?s0(a,r):(r=Bf(t,a,r,l),r!==null&&(Cn(r,t,l),r0(r,a,l)))}function i0(t,a,r){var l=Fn();Dl(t,a,r,l)}function Dl(t,a,r,l){var f={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Du(t))s0(a,f);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=a.lastRenderedReducer,p!==null))try{var v=a.lastRenderedState,A=p(v,r);if(f.hasEagerState=!0,f.eagerState=A,Ln(A,v))return fu(t,a,f,0),yt===null&&du(),!1}catch{}if(r=Bf(t,a,f,l),r!==null)return Cn(r,t,l),r0(r,a,l),!0}return!1}function Th(t,a,r,l){if(l={lane:2,revertLane:np(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Du(t)){if(a)throw Error(s(479))}else a=Bf(t,r,l,2),a!==null&&Cn(a,t,2)}function Du(t){var a=t.alternate;return t===He||a!==null&&a===He}function s0(t,a){oo=Su=!0;var r=t.pending;r===null?a.next=a:(a.next=r.next,r.next=a),t.pending=a}function r0(t,a,r){if((r&4194048)!==0){var l=a.lanes;l&=t.pendingLanes,r|=l,a.lanes=r,el(t,r)}}var Ml={readContext:on,use:Ru,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt};Ml.useEffectEvent=Rt;var o0={readContext:on,use:Ru,useCallback:function(t,a){return En().memoizedState=[t,a===void 0?null:a],t},useContext:on,useEffect:Fy,useImperativeHandle:function(t,a,r){r=r!=null?r.concat([t]):null,Iu(4194308,4,$y.bind(null,a,t),r)},useLayoutEffect:function(t,a){return Iu(4194308,4,t,a)},useInsertionEffect:function(t,a){Iu(4,2,t,a)},useMemo:function(t,a){var r=En();a=a===void 0?null:a;var l=t();if(hr){$n(!0);try{t()}finally{$n(!1)}}return r.memoizedState=[l,a],l},useReducer:function(t,a,r){var l=En();if(r!==void 0){var f=r(a);if(hr){$n(!0);try{r(a)}finally{$n(!1)}}}else f=a;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=P1.bind(null,He,t),[l.memoizedState,t]},useRef:function(t){var a=En();return t={current:t},a.memoizedState=t},useState:function(t){t=yh(t);var a=t.queue,r=i0.bind(null,He,a);return a.dispatch=r,[t.memoizedState,r]},useDebugValue:_h,useDeferredValue:function(t,a){var r=En();return xh(r,t,a)},useTransition:function(){var t=yh(!1);return t=Zy.bind(null,He,t.queue,!0,!1),En().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,r){var l=He,f=En();if(et){if(r===void 0)throw Error(s(407));r=r()}else{if(r=a(),yt===null)throw Error(s(349));($e&127)!==0||Ry(l,a,r)}f.memoizedState=r;var p={value:r,getSnapshot:a};return f.queue=p,Fy(Iy.bind(null,l,p,t),[t]),l.flags|=2048,co(9,{destroy:void 0},Cy.bind(null,l,p,r,a),null),r},useId:function(){var t=En(),a=yt.identifierPrefix;if(et){var r=Qa,l=Ka;r=(l&~(1<<32-Mt(l)-1)).toString(32)+r,a="_"+a+"R_"+r,r=wu++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=C1++,a="_"+a+"r_"+r.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Ah,useFormState:zy,useActionState:zy,useOptimistic:function(t){var a=En();a.memoizedState=a.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=Th.bind(null,He,!0,r),r.dispatch=a,[t,a]},useMemoCache:ph,useCacheRefresh:function(){return En().memoizedState=j1.bind(null,He)},useEffectEvent:function(t){var a=En(),r={impl:t};return a.memoizedState=r,function(){if((st&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},Sh={readContext:on,use:Ru,useCallback:Xy,useContext:on,useEffect:vh,useImperativeHandle:Yy,useInsertionEffect:Ky,useLayoutEffect:Qy,useMemo:Jy,useReducer:Cu,useRef:qy,useState:function(){return Cu(bi)},useDebugValue:_h,useDeferredValue:function(t,a){var r=Pt();return Wy(r,pt.memoizedState,t,a)},useTransition:function(){var t=Cu(bi)[0],a=Pt().memoizedState;return[typeof t=="boolean"?t:Ol(t),a]},useSyncExternalStore:Ny,useId:n0,useHostTransitionStatus:Ah,useFormState:Uy,useActionState:Uy,useOptimistic:function(t,a){var r=Pt();return My(r,pt,t,a)},useMemoCache:ph,useCacheRefresh:a0};Sh.useEffectEvent=Gy;var l0={readContext:on,use:Ru,useCallback:Xy,useContext:on,useEffect:vh,useImperativeHandle:Yy,useInsertionEffect:Ky,useLayoutEffect:Qy,useMemo:Jy,useReducer:gh,useRef:qy,useState:function(){return gh(bi)},useDebugValue:_h,useDeferredValue:function(t,a){var r=Pt();return pt===null?xh(r,t,a):Wy(r,pt.memoizedState,t,a)},useTransition:function(){var t=gh(bi)[0],a=Pt().memoizedState;return[typeof t=="boolean"?t:Ol(t),a]},useSyncExternalStore:Ny,useId:n0,useHostTransitionStatus:Ah,useFormState:Hy,useActionState:Hy,useOptimistic:function(t,a){var r=Pt();return pt!==null?My(r,pt,t,a):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:ph,useCacheRefresh:a0};l0.useEffectEvent=Gy;function wh(t,a,r,l){a=t.memoizedState,r=r(l,a),r=r==null?a:E({},a,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Nh={enqueueSetState:function(t,a,r){t=t._reactInternals;var l=Fn(),f=ns(l);f.payload=a,r!=null&&(f.callback=r),a=as(t,f,l),a!==null&&(Cn(a,t,l),Nl(a,t,l))},enqueueReplaceState:function(t,a,r){t=t._reactInternals;var l=Fn(),f=ns(l);f.tag=1,f.payload=a,r!=null&&(f.callback=r),a=as(t,f,l),a!==null&&(Cn(a,t,l),Nl(a,t,l))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var r=Fn(),l=ns(r);l.tag=2,a!=null&&(l.callback=a),a=as(t,l,r),a!==null&&(Cn(a,t,r),Nl(a,t,r))}};function c0(t,a,r,l,f,p,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,p,v):a.prototype&&a.prototype.isPureReactComponent?!vl(r,l)||!vl(f,p):!0}function u0(t,a,r,l){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,l),a.state!==t&&Nh.enqueueReplaceState(a,a.state,null)}function pr(t,a){var r=a;if("ref"in a){r={};for(var l in a)l!=="ref"&&(r[l]=a[l])}if(t=t.defaultProps){r===a&&(r=E({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}function d0(t){uu(t)}function f0(t){console.error(t)}function h0(t){uu(t)}function Mu(t,a){try{var r=t.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function p0(t,a,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Rh(t,a,r){return r=ns(r),r.tag=3,r.payload={element:null},r.callback=function(){Mu(t,a)},r}function m0(t){return t=ns(t),t.tag=3,t}function g0(t,a,r,l){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;t.payload=function(){return f(p)},t.callback=function(){p0(a,r,l)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){p0(a,r,l),typeof f!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function V1(t,a,r,l,f){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=r.alternate,a!==null&&to(a,r,f,!0),r=Un.current,r!==null){switch(r.tag){case 31:case 13:return ia===null?Gu():r.alternate===null&&Ct===0&&(Ct=3),r.flags&=-257,r.flags|=65536,r.lanes=f,l===_u?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([l]):a.add(l),Zh(t,l,f)),!1;case 22:return r.flags|=65536,l===_u?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([l]):r.add(l)),Zh(t,l,f)),!1}throw Error(s(435,r.tag))}return Zh(t,l,f),Gu(),!1}if(et)return a=Un.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,l!==Qf&&(t=Error(s(422),{cause:l}),El(ea(t,r)))):(l!==Qf&&(a=Error(s(423),{cause:l}),El(ea(a,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=ea(l,r),f=Rh(t.stateNode,l,f),ih(t,f),Ct!==4&&(Ct=2)),!1;var p=Error(s(520),{cause:l});if(p=ea(p,r),Bl===null?Bl=[p]:Bl.push(p),Ct!==4&&(Ct=2),a===null)return!0;l=ea(l,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=Rh(r.stateNode,l,t),ih(r,t),!1;case 1:if(a=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(cs===null||!cs.has(p))))return r.flags|=65536,f&=-f,r.lanes|=f,f=m0(f),g0(f,t,r,l),ih(r,f),!1}r=r.return}while(r!==null);return!1}var Ch=Error(s(461)),Kt=!1;function ln(t,a,r,l){a.child=t===null?_y(a,null,r,l):fr(a,t.child,r,l)}function y0(t,a,r,l,f){r=r.render;var p=a.ref;if("ref"in l){var v={};for(var A in l)A!=="ref"&&(v[A]=l[A])}else v=l;return lr(a),l=uh(t,a,r,v,p,f),A=dh(),t!==null&&!Kt?(fh(t,a,f),vi(t,a,f)):(et&&A&&Gf(a),a.flags|=1,ln(t,a,l,f),a.child)}function b0(t,a,r,l,f){if(t===null){var p=r.type;return typeof p=="function"&&!Hf(p)&&p.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=p,v0(t,a,p,l,f)):(t=pu(r.type,null,l,a,a.mode,f),t.ref=a.ref,t.return=a,a.child=t)}if(p=t.child,!Vh(t,f)){var v=p.memoizedProps;if(r=r.compare,r=r!==null?r:vl,r(v,l)&&t.ref===a.ref)return vi(t,a,f)}return a.flags|=1,t=hi(p,l),t.ref=a.ref,t.return=a,a.child=t}function v0(t,a,r,l,f){if(t!==null){var p=t.memoizedProps;if(vl(p,l)&&t.ref===a.ref)if(Kt=!1,a.pendingProps=l=p,Vh(t,f))(t.flags&131072)!==0&&(Kt=!0);else return a.lanes=t.lanes,vi(t,a,f)}return Ih(t,a,r,l,f)}function _0(t,a,r,l){var f=l.children,p=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((a.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,t!==null){for(l=a.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~p}else l=0,a.child=null;return x0(t,a,p,r,l)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&bu(a,p!==null?p.cachePool:null),p!==null?Ay(a,p):rh(),Ty(a);else return l=a.lanes=536870912,x0(t,a,p!==null?p.baseLanes|r:r,r,l)}else p!==null?(bu(a,p.cachePool),Ay(a,p),ss(),a.memoizedState=null):(t!==null&&bu(a,null),rh(),ss());return ln(t,a,f,r),a.child}function kl(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function x0(t,a,r,l,f){var p=eh();return p=p===null?null:{parent:Ft._currentValue,pool:p},a.memoizedState={baseLanes:r,cachePool:p},t!==null&&bu(a,null),rh(),Ty(a),t!==null&&to(t,a,l,!0),a.childLanes=f,null}function ku(t,a){return a=Pu({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function E0(t,a,r){return fr(a,t.child,null,r),t=ku(a,a.pendingProps),t.flags|=2,Bn(a),a.memoizedState=null,t}function L1(t,a,r){var l=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(et){if(l.mode==="hidden")return t=ku(a,l),a.lanes=536870912,kl(null,t);if(lh(a),(t=vt)?(t=kb(t,aa),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Ji!==null?{id:Ka,overflow:Qa}:null,retryLane:536870912,hydrationErrors:null},r=sy(t),r.return=a,a.child=r,rn=a,vt=null)):t=null,t===null)throw Zi(a);return a.lanes=536870912,null}return ku(a,l)}var p=t.memoizedState;if(p!==null){var v=p.dehydrated;if(lh(a),f)if(a.flags&256)a.flags&=-257,a=E0(t,a,r);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(s(558));else if(Kt||to(t,a,r,!1),f=(r&t.childLanes)!==0,Kt||f){if(l=yt,l!==null&&(v=tl(l,r),v!==0&&v!==p.retryLane))throw p.retryLane=v,ir(t,v),Cn(l,t,v),Ch;Gu(),a=E0(t,a,r)}else t=p.treeContext,vt=sa(v.nextSibling),rn=a,et=!0,Wi=null,aa=!1,t!==null&&ly(a,t),a=ku(a,l),a.flags|=4096;return a}return t=hi(t.child,{mode:l.mode,children:l.children}),t.ref=a.ref,a.child=t,t.return=a,t}function ju(t,a){var r=a.ref;if(r===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(t===null||t.ref!==r)&&(a.flags|=4194816)}}function Ih(t,a,r,l,f){return lr(a),r=uh(t,a,r,l,void 0,f),l=dh(),t!==null&&!Kt?(fh(t,a,f),vi(t,a,f)):(et&&l&&Gf(a),a.flags|=1,ln(t,a,r,f),a.child)}function A0(t,a,r,l,f,p){return lr(a),a.updateQueue=null,r=wy(a,l,r,f),Sy(t),l=dh(),t!==null&&!Kt?(fh(t,a,p),vi(t,a,p)):(et&&l&&Gf(a),a.flags|=1,ln(t,a,r,p),a.child)}function T0(t,a,r,l,f){if(lr(a),a.stateNode===null){var p=Jr,v=r.contextType;typeof v=="object"&&v!==null&&(p=on(v)),p=new r(l,p),a.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Nh,a.stateNode=p,p._reactInternals=a,p=a.stateNode,p.props=l,p.state=a.memoizedState,p.refs={},nh(a),v=r.contextType,p.context=typeof v=="object"&&v!==null?on(v):Jr,p.state=a.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(wh(a,r,v,l),p.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(v=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),v!==p.state&&Nh.enqueueReplaceState(p,p.state,null),Cl(a,l,p,f),Rl(),p.state=a.memoizedState),typeof p.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(t===null){p=a.stateNode;var A=a.memoizedProps,M=pr(r,A);p.props=M;var G=p.context,ee=r.contextType;v=Jr,typeof ee=="object"&&ee!==null&&(v=on(ee));var ie=r.getDerivedStateFromProps;ee=typeof ie=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,ee||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||G!==v)&&u0(a,p,l,v),ts=!1;var K=a.memoizedState;p.state=K,Cl(a,l,p,f),Rl(),G=a.memoizedState,A||K!==G||ts?(typeof ie=="function"&&(wh(a,r,ie,l),G=a.memoizedState),(M=ts||c0(a,r,M,l,K,G,v))?(ee||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(a.flags|=4194308)):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=G),p.props=l,p.state=G,p.context=v,l=M):(typeof p.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{p=a.stateNode,ah(t,a),v=a.memoizedProps,ee=pr(r,v),p.props=ee,ie=a.pendingProps,K=p.context,G=r.contextType,M=Jr,typeof G=="object"&&G!==null&&(M=on(G)),A=r.getDerivedStateFromProps,(G=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(v!==ie||K!==M)&&u0(a,p,l,M),ts=!1,K=a.memoizedState,p.state=K,Cl(a,l,p,f),Rl();var X=a.memoizedState;v!==ie||K!==X||ts||t!==null&&t.dependencies!==null&&gu(t.dependencies)?(typeof A=="function"&&(wh(a,r,A,l),X=a.memoizedState),(ee=ts||c0(a,r,ee,l,K,X,M)||t!==null&&t.dependencies!==null&&gu(t.dependencies))?(G||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,X,M),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,X,M)),typeof p.componentDidUpdate=="function"&&(a.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof p.componentDidUpdate!="function"||v===t.memoizedProps&&K===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&K===t.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=X),p.props=l,p.state=X,p.context=M,l=ee):(typeof p.componentDidUpdate!="function"||v===t.memoizedProps&&K===t.memoizedState||(a.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&K===t.memoizedState||(a.flags|=1024),l=!1)}return p=l,ju(t,a),l=(a.flags&128)!==0,p||l?(p=a.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:p.render(),a.flags|=1,t!==null&&l?(a.child=fr(a,t.child,null,f),a.child=fr(a,null,r,f)):ln(t,a,r,f),a.memoizedState=p.state,t=a.child):t=vi(t,a,f),t}function S0(t,a,r,l){return rr(),a.flags|=256,ln(t,a,r,l),a.child}var Oh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dh(t){return{baseLanes:t,cachePool:py()}}function Mh(t,a,r){return t=t!==null?t.childLanes&~r:0,a&&(t|=qn),t}function w0(t,a,r){var l=a.pendingProps,f=!1,p=(a.flags&128)!==0,v;if((v=p)||(v=t!==null&&t.memoizedState===null?!1:(jt.current&2)!==0),v&&(f=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,t===null){if(et){if(f?is(a):ss(),(t=vt)?(t=kb(t,aa),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Ji!==null?{id:Ka,overflow:Qa}:null,retryLane:536870912,hydrationErrors:null},r=sy(t),r.return=a,a.child=r,rn=a,vt=null)):t=null,t===null)throw Zi(a);return mp(t)?a.lanes=32:a.lanes=536870912,null}var A=l.children;return l=l.fallback,f?(ss(),f=a.mode,A=Pu({mode:"hidden",children:A},f),l=sr(l,f,r,null),A.return=a,l.return=a,A.sibling=l,a.child=A,l=a.child,l.memoizedState=Dh(r),l.childLanes=Mh(t,v,r),a.memoizedState=Oh,kl(null,l)):(is(a),kh(a,A))}var M=t.memoizedState;if(M!==null&&(A=M.dehydrated,A!==null)){if(p)a.flags&256?(is(a),a.flags&=-257,a=jh(t,a,r)):a.memoizedState!==null?(ss(),a.child=t.child,a.flags|=128,a=null):(ss(),A=l.fallback,f=a.mode,l=Pu({mode:"visible",children:l.children},f),A=sr(A,f,r,null),A.flags|=2,l.return=a,A.return=a,l.sibling=A,a.child=l,fr(a,t.child,null,r),l=a.child,l.memoizedState=Dh(r),l.childLanes=Mh(t,v,r),a.memoizedState=Oh,a=kl(null,l));else if(is(a),mp(A)){if(v=A.nextSibling&&A.nextSibling.dataset,v)var G=v.dgst;v=G,l=Error(s(419)),l.stack="",l.digest=v,El({value:l,source:null,stack:null}),a=jh(t,a,r)}else if(Kt||to(t,a,r,!1),v=(r&t.childLanes)!==0,Kt||v){if(v=yt,v!==null&&(l=tl(v,r),l!==0&&l!==M.retryLane))throw M.retryLane=l,ir(t,l),Cn(v,t,l),Ch;pp(A)||Gu(),a=jh(t,a,r)}else pp(A)?(a.flags|=192,a.child=t.child,a=null):(t=M.treeContext,vt=sa(A.nextSibling),rn=a,et=!0,Wi=null,aa=!1,t!==null&&ly(a,t),a=kh(a,l.children),a.flags|=4096);return a}return f?(ss(),A=l.fallback,f=a.mode,M=t.child,G=M.sibling,l=hi(M,{mode:"hidden",children:l.children}),l.subtreeFlags=M.subtreeFlags&65011712,G!==null?A=hi(G,A):(A=sr(A,f,r,null),A.flags|=2),A.return=a,l.return=a,l.sibling=A,a.child=l,kl(null,l),l=a.child,A=t.child.memoizedState,A===null?A=Dh(r):(f=A.cachePool,f!==null?(M=Ft._currentValue,f=f.parent!==M?{parent:M,pool:M}:f):f=py(),A={baseLanes:A.baseLanes|r,cachePool:f}),l.memoizedState=A,l.childLanes=Mh(t,v,r),a.memoizedState=Oh,kl(t.child,l)):(is(a),r=t.child,t=r.sibling,r=hi(r,{mode:"visible",children:l.children}),r.return=a,r.sibling=null,t!==null&&(v=a.deletions,v===null?(a.deletions=[t],a.flags|=16):v.push(t)),a.child=r,a.memoizedState=null,r)}function kh(t,a){return a=Pu({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Pu(t,a){return t=zn(22,t,null,a),t.lanes=0,t}function jh(t,a,r){return fr(a,t.child,null,r),t=kh(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function N0(t,a,r){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a),Xf(t.return,a,r)}function Ph(t,a,r,l,f,p){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:f,treeForkCount:p}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=r,v.tailMode=f,v.treeForkCount=p)}function R0(t,a,r){var l=a.pendingProps,f=l.revealOrder,p=l.tail;l=l.children;var v=jt.current,A=(v&2)!==0;if(A?(v=v&1|2,a.flags|=128):v&=1,ae(jt,v),ln(t,a,l,r),l=et?xl:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&N0(t,r,a);else if(t.tag===19)N0(t,r,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(r=a.child,f=null;r!==null;)t=r.alternate,t!==null&&Tu(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=a.child,a.child=null):(f=r.sibling,r.sibling=null),Ph(a,!1,f,r,p,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=a.child,a.child=null;f!==null;){if(t=f.alternate,t!==null&&Tu(t)===null){a.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}Ph(a,!0,r,null,p,l);break;case"together":Ph(a,!1,null,null,void 0,l);break;default:a.memoizedState=null}return a.child}function vi(t,a,r){if(t!==null&&(a.dependencies=t.dependencies),ls|=a.lanes,(r&a.childLanes)===0)if(t!==null){if(to(t,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(s(153));if(a.child!==null){for(t=a.child,r=hi(t,t.pendingProps),a.child=r,r.return=a;t.sibling!==null;)t=t.sibling,r=r.sibling=hi(t,t.pendingProps),r.return=a;r.sibling=null}return a.child}function Vh(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&gu(t)))}function z1(t,a,r){switch(a.tag){case 3:Pe(a,a.stateNode.containerInfo),es(a,Ft,t.memoizedState.cache),rr();break;case 27:case 5:ft(a);break;case 4:Pe(a,a.stateNode.containerInfo);break;case 10:es(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,lh(a),null;break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(is(a),a.flags|=128,null):(r&a.child.childLanes)!==0?w0(t,a,r):(is(a),t=vi(t,a,r),t!==null?t.sibling:null);is(a);break;case 19:var f=(t.flags&128)!==0;if(l=(r&a.childLanes)!==0,l||(to(t,a,r,!1),l=(r&a.childLanes)!==0),f){if(l)return R0(t,a,r);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ae(jt,jt.current),l)break;return null;case 22:return a.lanes=0,_0(t,a,r,a.pendingProps);case 24:es(a,Ft,t.memoizedState.cache)}return vi(t,a,r)}function C0(t,a,r){if(t!==null)if(t.memoizedProps!==a.pendingProps)Kt=!0;else{if(!Vh(t,r)&&(a.flags&128)===0)return Kt=!1,z1(t,a,r);Kt=(t.flags&131072)!==0}else Kt=!1,et&&(a.flags&1048576)!==0&&oy(a,xl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var l=a.pendingProps;if(t=ur(a.elementType),a.type=t,typeof t=="function")Hf(t)?(l=pr(t,l),a.tag=1,a=T0(null,a,t,l,r)):(a.tag=0,a=Ih(null,a,t,l,r));else{if(t!=null){var f=t.$$typeof;if(f===se){a.tag=11,a=y0(null,a,t,l,r);break e}else if(f===C){a.tag=14,a=b0(null,a,t,l,r);break e}}throw a=we(t)||t,Error(s(306,a,""))}}return a;case 0:return Ih(t,a,a.type,a.pendingProps,r);case 1:return l=a.type,f=pr(l,a.pendingProps),T0(t,a,l,f,r);case 3:e:{if(Pe(a,a.stateNode.containerInfo),t===null)throw Error(s(387));l=a.pendingProps;var p=a.memoizedState;f=p.element,ah(t,a),Cl(a,l,null,r);var v=a.memoizedState;if(l=v.cache,es(a,Ft,l),l!==p.cache&&Jf(a,[Ft],r,!0),Rl(),l=v.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=p,a.memoizedState=p,a.flags&256){a=S0(t,a,l,r);break e}else if(l!==f){f=ea(Error(s(424)),a),El(f),a=S0(t,a,l,r);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,vt=sa(t.firstChild),rn=a,et=!0,Wi=null,aa=!0,r=_y(a,null,l,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(rr(),l===f){a=vi(t,a,r);break e}ln(t,a,l,r)}a=a.child}return a;case 26:return ju(t,a),t===null?(r=Ub(a.type,null,a.pendingProps,null))?a.memoizedState=r:et||(r=a.type,t=a.pendingProps,l=Wu(ce.current).createElement(r),l[Bt]=a,l[Zt]=t,cn(l,r,t),Ht(l),a.stateNode=l):a.memoizedState=Ub(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return ft(a),t===null&&et&&(l=a.stateNode=Vb(a.type,a.pendingProps,ce.current),rn=a,aa=!0,f=vt,hs(a.type)?(gp=f,vt=sa(l.firstChild)):vt=f),ln(t,a,a.pendingProps.children,r),ju(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&et&&((f=l=vt)&&(l=mT(l,a.type,a.pendingProps,aa),l!==null?(a.stateNode=l,rn=a,vt=sa(l.firstChild),aa=!1,f=!0):f=!1),f||Zi(a)),ft(a),f=a.type,p=a.pendingProps,v=t!==null?t.memoizedProps:null,l=p.children,dp(f,p)?l=null:v!==null&&dp(f,v)&&(a.flags|=32),a.memoizedState!==null&&(f=uh(t,a,I1,null,null,r),Yl._currentValue=f),ju(t,a),ln(t,a,l,r),a.child;case 6:return t===null&&et&&((t=r=vt)&&(r=gT(r,a.pendingProps,aa),r!==null?(a.stateNode=r,rn=a,vt=null,t=!0):t=!1),t||Zi(a)),null;case 13:return w0(t,a,r);case 4:return Pe(a,a.stateNode.containerInfo),l=a.pendingProps,t===null?a.child=fr(a,null,l,r):ln(t,a,l,r),a.child;case 11:return y0(t,a,a.type,a.pendingProps,r);case 7:return ln(t,a,a.pendingProps,r),a.child;case 8:return ln(t,a,a.pendingProps.children,r),a.child;case 12:return ln(t,a,a.pendingProps.children,r),a.child;case 10:return l=a.pendingProps,es(a,a.type,l.value),ln(t,a,l.children,r),a.child;case 9:return f=a.type._context,l=a.pendingProps.children,lr(a),f=on(f),l=l(f),a.flags|=1,ln(t,a,l,r),a.child;case 14:return b0(t,a,a.type,a.pendingProps,r);case 15:return v0(t,a,a.type,a.pendingProps,r);case 19:return R0(t,a,r);case 31:return L1(t,a,r);case 22:return _0(t,a,r,a.pendingProps);case 24:return lr(a),l=on(Ft),t===null?(f=eh(),f===null&&(f=yt,p=Wf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=r),f=p),a.memoizedState={parent:l,cache:f},nh(a),es(a,Ft,f)):((t.lanes&r)!==0&&(ah(t,a),Cl(a,null,null,r),Rl()),f=t.memoizedState,p=a.memoizedState,f.parent!==l?(f={parent:l,cache:l},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),es(a,Ft,l)):(l=p.cache,es(a,Ft,l),l!==f.cache&&Jf(a,[Ft],r,!0))),ln(t,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function _i(t){t.flags|=4}function Lh(t,a,r,l,f){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(nb())t.flags|=8192;else throw dr=_u,th}else t.flags&=-16777217}function I0(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Gb(a))if(nb())t.flags|=8192;else throw dr=_u,th}function Vu(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?qc():536870912,t.lanes|=a,po|=a)}function jl(t,a){if(!et)switch(t.tailMode){case"hidden":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function _t(t){var a=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(a)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=r,a}function U1(t,a,r){var l=a.pendingProps;switch(Kf(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(a),null;case 1:return _t(a),null;case 3:return r=a.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),gi(Ft),fe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(eo(a)?_i(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,$f())),_t(a),null;case 26:var f=a.type,p=a.memoizedState;return t===null?(_i(a),p!==null?(_t(a),I0(a,p)):(_t(a),Lh(a,f,null,l,r))):p?p!==t.memoizedState?(_i(a),_t(a),I0(a,p)):(_t(a),a.flags&=-16777217):(t=t.memoizedProps,t!==l&&_i(a),_t(a),Lh(a,f,t,l,r)),null;case 27:if(ot(a),r=ce.current,f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&_i(a);else{if(!l){if(a.stateNode===null)throw Error(s(166));return _t(a),null}t=de.current,eo(a)?cy(a):(t=Vb(f,l,r),a.stateNode=t,_i(a))}return _t(a),null;case 5:if(ot(a),f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==l&&_i(a);else{if(!l){if(a.stateNode===null)throw Error(s(166));return _t(a),null}if(p=de.current,eo(a))cy(a);else{var v=Wu(ce.current);switch(p){case 1:p=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=v.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?p.multiple=!0:l.size&&(p.size=l.size);break;default:p=typeof l.is=="string"?v.createElement(f,{is:l.is}):v.createElement(f)}}p[Bt]=a,p[Zt]=l;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)p.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=p;e:switch(cn(p,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&_i(a)}}return _t(a),Lh(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,r),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==l&&_i(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(s(166));if(t=ce.current,eo(a)){if(t=a.stateNode,r=a.memoizedProps,l=null,f=rn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[Bt]=a,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||wb(t.nodeValue,r)),t||Zi(a,!0)}else t=Wu(t).createTextNode(l),t[Bt]=a,a.stateNode=t}return _t(a),null;case 31:if(r=a.memoizedState,t===null||t.memoizedState!==null){if(l=eo(a),r!==null){if(t===null){if(!l)throw Error(s(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Bt]=a}else rr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;_t(a),t=!1}else r=$f(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return a.flags&256?(Bn(a),a):(Bn(a),null);if((a.flags&128)!==0)throw Error(s(558))}return _t(a),null;case 13:if(l=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=eo(a),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(s(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Bt]=a}else rr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;_t(a),f=!1}else f=$f(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(Bn(a),a):(Bn(a),null)}return Bn(a),(a.flags&128)!==0?(a.lanes=r,a):(r=l!==null,t=t!==null&&t.memoizedState!==null,r&&(l=a.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)),r!==t&&r&&(a.child.flags|=8192),Vu(a,a.updateQueue),_t(a),null);case 4:return fe(),t===null&&rp(a.stateNode.containerInfo),_t(a),null;case 10:return gi(a.type),_t(a),null;case 19:if(Z(jt),l=a.memoizedState,l===null)return _t(a),null;if(f=(a.flags&128)!==0,p=l.rendering,p===null)if(f)jl(l,!1);else{if(Ct!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(p=Tu(t),p!==null){for(a.flags|=128,jl(l,!1),t=p.updateQueue,a.updateQueue=t,Vu(a,t),a.subtreeFlags=0,t=r,r=a.child;r!==null;)iy(r,t),r=r.sibling;return ae(jt,jt.current&1|2),et&&pi(a,l.treeForkCount),a.child}t=t.sibling}l.tail!==null&&Et()>Hu&&(a.flags|=128,f=!0,jl(l,!1),a.lanes=4194304)}else{if(!f)if(t=Tu(p),t!==null){if(a.flags|=128,f=!0,t=t.updateQueue,a.updateQueue=t,Vu(a,t),jl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!p.alternate&&!et)return _t(a),null}else 2*Et()-l.renderingStartTime>Hu&&r!==536870912&&(a.flags|=128,f=!0,jl(l,!1),a.lanes=4194304);l.isBackwards?(p.sibling=a.child,a.child=p):(t=l.last,t!==null?t.sibling=p:a.child=p,l.last=p)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Et(),t.sibling=null,r=jt.current,ae(jt,f?r&1|2:r&1),et&&pi(a,l.treeForkCount),t):(_t(a),null);case 22:case 23:return Bn(a),oh(),l=a.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(r&536870912)!==0&&(a.flags&128)===0&&(_t(a),a.subtreeFlags&6&&(a.flags|=8192)):_t(a),r=a.updateQueue,r!==null&&Vu(a,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==r&&(a.flags|=2048),t!==null&&Z(cr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),gi(Ft),_t(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function B1(t,a){switch(Kf(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return gi(Ft),fe(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return ot(a),null;case 31:if(a.memoizedState!==null){if(Bn(a),a.alternate===null)throw Error(s(340));rr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(Bn(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(s(340));rr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return Z(jt),null;case 4:return fe(),null;case 10:return gi(a.type),null;case 22:case 23:return Bn(a),oh(),t!==null&&Z(cr),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return gi(Ft),null;case 25:return null;default:return null}}function O0(t,a){switch(Kf(a),a.tag){case 3:gi(Ft),fe();break;case 26:case 27:case 5:ot(a);break;case 4:fe();break;case 31:a.memoizedState!==null&&Bn(a);break;case 13:Bn(a);break;case 19:Z(jt);break;case 10:gi(a.type);break;case 22:case 23:Bn(a),oh(),t!==null&&Z(cr);break;case 24:gi(Ft)}}function Pl(t,a){try{var r=a.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var f=l.next;r=f;do{if((r.tag&t)===t){l=void 0;var p=r.create,v=r.inst;l=p(),v.destroy=l}r=r.next}while(r!==f)}}catch(A){dt(a,a.return,A)}}function rs(t,a,r){try{var l=a.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&t)===t){var v=l.inst,A=v.destroy;if(A!==void 0){v.destroy=void 0,f=a;var M=r,G=A;try{G()}catch(ee){dt(f,M,ee)}}}l=l.next}while(l!==p)}}catch(ee){dt(a,a.return,ee)}}function D0(t){var a=t.updateQueue;if(a!==null){var r=t.stateNode;try{Ey(a,r)}catch(l){dt(t,t.return,l)}}}function M0(t,a,r){r.props=pr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){dt(t,a,l)}}function Vl(t,a){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(f){dt(t,a,f)}}function $a(t,a){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(f){dt(t,a,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){dt(t,a,f)}else r.current=null}function k0(t){var a=t.type,r=t.memoizedProps,l=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(f){dt(t,t.return,f)}}function zh(t,a,r){try{var l=t.stateNode;cT(l,t.type,r,a),l[Zt]=a}catch(f){dt(t,t.return,f)}}function j0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&hs(t.type)||t.tag===4}function Uh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||j0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&hs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bh(t,a,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(t),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=ma));else if(l!==4&&(l===27&&hs(t.type)&&(r=t.stateNode,a=null),t=t.child,t!==null))for(Bh(t,a,r),t=t.sibling;t!==null;)Bh(t,a,r),t=t.sibling}function Lu(t,a,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,a?r.insertBefore(t,a):r.appendChild(t);else if(l!==4&&(l===27&&hs(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Lu(t,a,r),t=t.sibling;t!==null;)Lu(t,a,r),t=t.sibling}function P0(t){var a=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);cn(a,l,r),a[Bt]=t,a[Zt]=r}catch(p){dt(t,t.return,p)}}var xi=!1,Qt=!1,Hh=!1,V0=typeof WeakSet=="function"?WeakSet:Set,tn=null;function H1(t,a){if(t=t.containerInfo,cp=sd,t=Yg(t),jf(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var v=0,A=-1,M=-1,G=0,ee=0,ie=t,K=null;t:for(;;){for(var X;ie!==r||f!==0&&ie.nodeType!==3||(A=v+f),ie!==p||l!==0&&ie.nodeType!==3||(M=v+l),ie.nodeType===3&&(v+=ie.nodeValue.length),(X=ie.firstChild)!==null;)K=ie,ie=X;for(;;){if(ie===t)break t;if(K===r&&++G===f&&(A=v),K===p&&++ee===l&&(M=v),(X=ie.nextSibling)!==null)break;ie=K,K=ie.parentNode}ie=X}r=A===-1||M===-1?null:{start:A,end:M}}else r=null}r=r||{start:0,end:0}}else r=null;for(up={focusedElem:t,selectionRange:r},sd=!1,tn=a;tn!==null;)if(a=tn,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,tn=t;else for(;tn!==null;){switch(a=tn,p=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)f=t[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,r=a,f=p.memoizedProps,p=p.memoizedState,l=r.stateNode;try{var xe=pr(r.type,f);t=l.getSnapshotBeforeUpdate(xe,p),l.__reactInternalSnapshotBeforeUpdate=t}catch(Oe){dt(r,r.return,Oe)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,r=t.nodeType,r===9)hp(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":hp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=a.sibling,t!==null){t.return=a.return,tn=t;break}tn=a.return}}function L0(t,a,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:Ai(t,r),l&4&&Pl(5,r);break;case 1:if(Ai(t,r),l&4)if(t=r.stateNode,a===null)try{t.componentDidMount()}catch(v){dt(r,r.return,v)}else{var f=pr(r.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(f,a,t.__reactInternalSnapshotBeforeUpdate)}catch(v){dt(r,r.return,v)}}l&64&&D0(r),l&512&&Vl(r,r.return);break;case 3:if(Ai(t,r),l&64&&(t=r.updateQueue,t!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{Ey(t,a)}catch(v){dt(r,r.return,v)}}break;case 27:a===null&&l&4&&P0(r);case 26:case 5:Ai(t,r),a===null&&l&4&&k0(r),l&512&&Vl(r,r.return);break;case 12:Ai(t,r);break;case 31:Ai(t,r),l&4&&B0(t,r);break;case 13:Ai(t,r),l&4&&H0(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=J1.bind(null,r),yT(t,r))));break;case 22:if(l=r.memoizedState!==null||xi,!l){a=a!==null&&a.memoizedState!==null||Qt,f=xi;var p=Qt;xi=l,(Qt=a)&&!p?Ti(t,r,(r.subtreeFlags&8772)!==0):Ai(t,r),xi=f,Qt=p}break;case 30:break;default:Ai(t,r)}}function z0(t){var a=t.alternate;a!==null&&(t.alternate=null,z0(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Vr(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var St=null,Sn=!1;function Ei(t,a,r){for(r=r.child;r!==null;)U0(t,a,r),r=r.sibling}function U0(t,a,r){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(da,r)}catch{}switch(r.tag){case 26:Qt||$a(r,a),Ei(t,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Qt||$a(r,a);var l=St,f=Sn;hs(r.type)&&(St=r.stateNode,Sn=!1),Ei(t,a,r),Kl(r.stateNode),St=l,Sn=f;break;case 5:Qt||$a(r,a);case 6:if(l=St,f=Sn,St=null,Ei(t,a,r),St=l,Sn=f,St!==null)if(Sn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(r.stateNode)}catch(p){dt(r,a,p)}else try{St.removeChild(r.stateNode)}catch(p){dt(r,a,p)}break;case 18:St!==null&&(Sn?(t=St,Db(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Eo(t)):Db(St,r.stateNode));break;case 4:l=St,f=Sn,St=r.stateNode.containerInfo,Sn=!0,Ei(t,a,r),St=l,Sn=f;break;case 0:case 11:case 14:case 15:rs(2,r,a),Qt||rs(4,r,a),Ei(t,a,r);break;case 1:Qt||($a(r,a),l=r.stateNode,typeof l.componentWillUnmount=="function"&&M0(r,a,l)),Ei(t,a,r);break;case 21:Ei(t,a,r);break;case 22:Qt=(l=Qt)||r.memoizedState!==null,Ei(t,a,r),Qt=l;break;default:Ei(t,a,r)}}function B0(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Eo(t)}catch(r){dt(a,a.return,r)}}}function H0(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Eo(t)}catch(r){dt(a,a.return,r)}}function q1(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new V0),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new V0),a;default:throw Error(s(435,t.tag))}}function zu(t,a){var r=q1(t);a.forEach(function(l){if(!r.has(l)){r.add(l);var f=W1.bind(null,t,l);l.then(f,f)}})}function wn(t,a){var r=a.deletions;if(r!==null)for(var l=0;l<r.length;l++){var f=r[l],p=t,v=a,A=v;e:for(;A!==null;){switch(A.tag){case 27:if(hs(A.type)){St=A.stateNode,Sn=!1;break e}break;case 5:St=A.stateNode,Sn=!1;break e;case 3:case 4:St=A.stateNode.containerInfo,Sn=!0;break e}A=A.return}if(St===null)throw Error(s(160));U0(p,v,f),St=null,Sn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)q0(a,t),a=a.sibling}var xa=null;function q0(t,a){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:wn(a,t),Nn(t),l&4&&(rs(3,t,t.return),Pl(3,t),rs(5,t,t.return));break;case 1:wn(a,t),Nn(t),l&512&&(Qt||r===null||$a(r,r.return)),l&64&&xi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var f=xa;if(wn(a,t),Nn(t),l&512&&(Qt||r===null||$a(r,r.return)),l&4){var p=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){e:{l=t.type,r=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[ka]||p[Bt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),cn(p,l,r),p[Bt]=t,Ht(p),l=p;break e;case"link":var v=qb("link","href",f).get(l+(r.href||""));if(v){for(var A=0;A<v.length;A++)if(p=v[A],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(A,1);break t}}p=f.createElement(l),cn(p,l,r),f.head.appendChild(p);break;case"meta":if(v=qb("meta","content",f).get(l+(r.content||""))){for(A=0;A<v.length;A++)if(p=v[A],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(A,1);break t}}p=f.createElement(l),cn(p,l,r),f.head.appendChild(p);break;default:throw Error(s(468,l))}p[Bt]=t,Ht(p),l=p}t.stateNode=l}else Fb(f,t.type,t.stateNode);else t.stateNode=Hb(f,l,t.memoizedProps);else p!==l?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,l===null?Fb(f,t.type,t.stateNode):Hb(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&zh(t,t.memoizedProps,r.memoizedProps)}break;case 27:wn(a,t),Nn(t),l&512&&(Qt||r===null||$a(r,r.return)),r!==null&&l&4&&zh(t,t.memoizedProps,r.memoizedProps);break;case 5:if(wn(a,t),Nn(t),l&512&&(Qt||r===null||$a(r,r.return)),t.flags&32){f=t.stateNode;try{Tn(f,"")}catch(xe){dt(t,t.return,xe)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,zh(t,f,r!==null?r.memoizedProps:f)),l&1024&&(Hh=!0);break;case 6:if(wn(a,t),Nn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(xe){dt(t,t.return,xe)}}break;case 3:if(td=null,f=xa,xa=Zu(a.containerInfo),wn(a,t),xa=f,Nn(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{Eo(a.containerInfo)}catch(xe){dt(t,t.return,xe)}Hh&&(Hh=!1,F0(t));break;case 4:l=xa,xa=Zu(t.stateNode.containerInfo),wn(a,t),Nn(t),xa=l;break;case 12:wn(a,t),Nn(t);break;case 31:wn(a,t),Nn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,zu(t,l)));break;case 13:wn(a,t),Nn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Bu=Et()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,zu(t,l)));break;case 22:f=t.memoizedState!==null;var M=r!==null&&r.memoizedState!==null,G=xi,ee=Qt;if(xi=G||f,Qt=ee||M,wn(a,t),Qt=ee,xi=G,Nn(t),l&8192)e:for(a=t.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(r===null||M||xi||Qt||mr(t)),r=null,a=t;;){if(a.tag===5||a.tag===26){if(r===null){M=r=a;try{if(p=M.stateNode,f)v=p.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{A=M.stateNode;var ie=M.memoizedProps.style,K=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;A.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(xe){dt(M,M.return,xe)}}}else if(a.tag===6){if(r===null){M=a;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(xe){dt(M,M.return,xe)}}}else if(a.tag===18){if(r===null){M=a;try{var X=M.stateNode;f?Mb(X,!0):Mb(M.stateNode,!1)}catch(xe){dt(M,M.return,xe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,zu(t,r))));break;case 19:wn(a,t),Nn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,zu(t,l)));break;case 30:break;case 21:break;default:wn(a,t),Nn(t)}}function Nn(t){var a=t.flags;if(a&2){try{for(var r,l=t.return;l!==null;){if(j0(l)){r=l;break}l=l.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var f=r.stateNode,p=Uh(t);Lu(t,p,f);break;case 5:var v=r.stateNode;r.flags&32&&(Tn(v,""),r.flags&=-33);var A=Uh(t);Lu(t,A,v);break;case 3:case 4:var M=r.stateNode.containerInfo,G=Uh(t);Bh(t,G,M);break;default:throw Error(s(161))}}catch(ee){dt(t,t.return,ee)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function F0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;F0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Ai(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)L0(t,a.alternate,a),a=a.sibling}function mr(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:rs(4,a,a.return),mr(a);break;case 1:$a(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&M0(a,a.return,r),mr(a);break;case 27:Kl(a.stateNode);case 26:case 5:$a(a,a.return),mr(a);break;case 22:a.memoizedState===null&&mr(a);break;case 30:mr(a);break;default:mr(a)}t=t.sibling}}function Ti(t,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,f=t,p=a,v=p.flags;switch(p.tag){case 0:case 11:case 15:Ti(f,p,r),Pl(4,p);break;case 1:if(Ti(f,p,r),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){dt(l,l.return,G)}if(l=p,f=l.updateQueue,f!==null){var A=l.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)xy(M[f],A)}catch(G){dt(l,l.return,G)}}r&&v&64&&D0(p),Vl(p,p.return);break;case 27:P0(p);case 26:case 5:Ti(f,p,r),r&&l===null&&v&4&&k0(p),Vl(p,p.return);break;case 12:Ti(f,p,r);break;case 31:Ti(f,p,r),r&&v&4&&B0(f,p);break;case 13:Ti(f,p,r),r&&v&4&&H0(f,p);break;case 22:p.memoizedState===null&&Ti(f,p,r),Vl(p,p.return);break;case 30:break;default:Ti(f,p,r)}a=a.sibling}}function qh(t,a){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Al(r))}function Fh(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Al(t))}function Ea(t,a,r,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)G0(t,a,r,l),a=a.sibling}function G0(t,a,r,l){var f=a.flags;switch(a.tag){case 0:case 11:case 15:Ea(t,a,r,l),f&2048&&Pl(9,a);break;case 1:Ea(t,a,r,l);break;case 3:Ea(t,a,r,l),f&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Al(t)));break;case 12:if(f&2048){Ea(t,a,r,l),t=a.stateNode;try{var p=a.memoizedProps,v=p.id,A=p.onPostCommit;typeof A=="function"&&A(v,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){dt(a,a.return,M)}}else Ea(t,a,r,l);break;case 31:Ea(t,a,r,l);break;case 13:Ea(t,a,r,l);break;case 23:break;case 22:p=a.stateNode,v=a.alternate,a.memoizedState!==null?p._visibility&2?Ea(t,a,r,l):Ll(t,a):p._visibility&2?Ea(t,a,r,l):(p._visibility|=2,uo(t,a,r,l,(a.subtreeFlags&10256)!==0||!1)),f&2048&&qh(v,a);break;case 24:Ea(t,a,r,l),f&2048&&Fh(a.alternate,a);break;default:Ea(t,a,r,l)}}function uo(t,a,r,l,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var p=t,v=a,A=r,M=l,G=v.flags;switch(v.tag){case 0:case 11:case 15:uo(p,v,A,M,f),Pl(8,v);break;case 23:break;case 22:var ee=v.stateNode;v.memoizedState!==null?ee._visibility&2?uo(p,v,A,M,f):Ll(p,v):(ee._visibility|=2,uo(p,v,A,M,f)),f&&G&2048&&qh(v.alternate,v);break;case 24:uo(p,v,A,M,f),f&&G&2048&&Fh(v.alternate,v);break;default:uo(p,v,A,M,f)}a=a.sibling}}function Ll(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=t,l=a,f=l.flags;switch(l.tag){case 22:Ll(r,l),f&2048&&qh(l.alternate,l);break;case 24:Ll(r,l),f&2048&&Fh(l.alternate,l);break;default:Ll(r,l)}a=a.sibling}}var zl=8192;function fo(t,a,r){if(t.subtreeFlags&zl)for(t=t.child;t!==null;)K0(t,a,r),t=t.sibling}function K0(t,a,r){switch(t.tag){case 26:fo(t,a,r),t.flags&zl&&t.memoizedState!==null&&CT(r,xa,t.memoizedState,t.memoizedProps);break;case 5:fo(t,a,r);break;case 3:case 4:var l=xa;xa=Zu(t.stateNode.containerInfo),fo(t,a,r),xa=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=zl,zl=16777216,fo(t,a,r),zl=l):fo(t,a,r));break;default:fo(t,a,r)}}function Q0(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Ul(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var l=a[r];tn=l,Y0(l,t)}Q0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)$0(t),t=t.sibling}function $0(t){switch(t.tag){case 0:case 11:case 15:Ul(t),t.flags&2048&&rs(9,t,t.return);break;case 3:Ul(t);break;case 12:Ul(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Uu(t)):Ul(t);break;default:Ul(t)}}function Uu(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var l=a[r];tn=l,Y0(l,t)}Q0(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:rs(8,a,a.return),Uu(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,Uu(a));break;default:Uu(a)}t=t.sibling}}function Y0(t,a){for(;tn!==null;){var r=tn;switch(r.tag){case 0:case 11:case 15:rs(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Al(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,tn=l;else e:for(r=t;tn!==null;){l=tn;var f=l.sibling,p=l.return;if(z0(l),l===r){tn=null;break e}if(f!==null){f.return=p,tn=f;break e}tn=p}}}var F1={getCacheForType:function(t){var a=on(Ft),r=a.data.get(t);return r===void 0&&(r=t(),a.data.set(t,r)),r},cacheSignal:function(){return on(Ft).controller.signal}},G1=typeof WeakMap=="function"?WeakMap:Map,st=0,yt=null,Ke=null,$e=0,ut=0,Hn=null,os=!1,ho=!1,Gh=!1,Si=0,Ct=0,ls=0,gr=0,Kh=0,qn=0,po=0,Bl=null,Rn=null,Qh=!1,Bu=0,X0=0,Hu=1/0,qu=null,cs=null,Jt=0,us=null,mo=null,wi=0,$h=0,Yh=null,J0=null,Hl=0,Xh=null;function Fn(){return(st&2)!==0&&$e!==0?$e&-$e:Y.T!==null?np():Fc()}function W0(){if(qn===0)if(($e&536870912)===0||et){var t=qs;qs<<=1,(qs&3932160)===0&&(qs=262144),qn=t}else qn=536870912;return t=Un.current,t!==null&&(t.flags|=32),qn}function Cn(t,a,r){(t===yt&&(ut===2||ut===9)||t.cancelPendingCommit!==null)&&(go(t,0),ds(t,$e,qn,!1)),Fs(t,r),((st&2)===0||t!==yt)&&(t===yt&&((st&2)===0&&(gr|=r),Ct===4&&ds(t,$e,qn,!1)),Ya(t))}function Z0(t,a,r){if((st&6)!==0)throw Error(s(327));var l=!r&&(a&127)===0&&(a&t.expiredLanes)===0||fa(t,a),f=l?$1(t,a):Wh(t,a,!0),p=l;do{if(f===0){ho&&!l&&ds(t,a,0,!1);break}else{if(r=t.current.alternate,p&&!K1(r)){f=Wh(t,a,!1),p=!1;continue}if(f===2){if(p=a,t.errorRecoveryDisabledLanes&p)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;e:{var A=t;f=Bl;var M=A.current.memoizedState.isDehydrated;if(M&&(go(A,v).flags|=256),v=Wh(A,v,!1),v!==2){if(Gh&&!M){A.errorRecoveryDisabledLanes|=p,gr|=p,f=4;break e}p=Rn,Rn=f,p!==null&&(Rn===null?Rn=p:Rn.push.apply(Rn,p))}f=v}if(p=!1,f!==2)continue}}if(f===1){go(t,0),ds(t,a,0,!0);break}e:{switch(l=t,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:ds(l,a,qn,!os);break e;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(f=Bu+300-Et(),10<f)){if(ds(l,a,qn,!os),Oa(l,0,!0)!==0)break e;wi=a,l.timeoutHandle=Ib(eb.bind(null,l,r,Rn,qu,Qh,a,qn,gr,po,os,p,"Throttled",-0,0),f);break e}eb(l,r,Rn,qu,Qh,a,qn,gr,po,os,p,null,-0,0)}}break}while(!0);Ya(t)}function eb(t,a,r,l,f,p,v,A,M,G,ee,ie,K,X){if(t.timeoutHandle=-1,ie=a.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ma},K0(a,p,ie);var xe=(p&62914560)===p?Bu-Et():(p&4194048)===p?X0-Et():0;if(xe=IT(ie,xe),xe!==null){wi=p,t.cancelPendingCommit=xe(lb.bind(null,t,a,p,r,l,f,v,A,M,ee,ie,null,K,X)),ds(t,p,v,!G);return}}lb(t,a,p,r,l,f,v,A,M)}function K1(t){for(var a=t;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var f=r[l],p=f.getSnapshot;f=f.value;try{if(!Ln(p(),f))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ds(t,a,r,l){a&=~Kh,a&=~gr,t.suspendedLanes|=a,t.pingedLanes&=~a,l&&(t.warmLanes|=a),l=t.expirationTimes;for(var f=a;0<f;){var p=31-Mt(f),v=1<<p;l[p]=-1,f&=~v}r!==0&&Gs(t,r,a)}function Fu(){return(st&6)===0?(ql(0),!1):!0}function Jh(){if(Ke!==null){if(ut===0)var t=Ke.return;else t=Ke,mi=or=null,hh(t),so=null,Sl=0,t=Ke;for(;t!==null;)O0(t.alternate,t),t=t.return;Ke=null}}function go(t,a){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,fT(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),wi=0,Jh(),yt=t,Ke=r=hi(t.current,null),$e=a,ut=0,Hn=null,os=!1,ho=fa(t,a),Gh=!1,po=qn=Kh=gr=ls=Ct=0,Rn=Bl=null,Qh=!1,(a&8)!==0&&(a|=a&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=a;0<l;){var f=31-Mt(l),p=1<<f;a|=t[f],l&=~p}return Si=a,du(),r}function tb(t,a){He=null,Y.H=Ml,a===io||a===vu?(a=yy(),ut=3):a===th?(a=yy(),ut=4):ut=a===Ch?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Hn=a,Ke===null&&(Ct=1,Mu(t,ea(a,t.current)))}function nb(){var t=Un.current;return t===null?!0:($e&4194048)===$e?ia===null:($e&62914560)===$e||($e&536870912)!==0?t===ia:!1}function ab(){var t=Y.H;return Y.H=Ml,t===null?Ml:t}function ib(){var t=Y.A;return Y.A=F1,t}function Gu(){Ct=4,os||($e&4194048)!==$e&&Un.current!==null||(ho=!0),(ls&134217727)===0&&(gr&134217727)===0||yt===null||ds(yt,$e,qn,!1)}function Wh(t,a,r){var l=st;st|=2;var f=ab(),p=ib();(yt!==t||$e!==a)&&(qu=null,go(t,a)),a=!1;var v=Ct;e:do try{if(ut!==0&&Ke!==null){var A=Ke,M=Hn;switch(ut){case 8:Jh(),v=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(a=!0);var G=ut;if(ut=0,Hn=null,yo(t,A,M,G),r&&ho){v=0;break e}break;default:G=ut,ut=0,Hn=null,yo(t,A,M,G)}}Q1(),v=Ct;break}catch(ee){tb(t,ee)}while(!0);return a&&t.shellSuspendCounter++,mi=or=null,st=l,Y.H=f,Y.A=p,Ke===null&&(yt=null,$e=0,du()),v}function Q1(){for(;Ke!==null;)sb(Ke)}function $1(t,a){var r=st;st|=2;var l=ab(),f=ib();yt!==t||$e!==a?(qu=null,Hu=Et()+500,go(t,a)):ho=fa(t,a);e:do try{if(ut!==0&&Ke!==null){a=Ke;var p=Hn;t:switch(ut){case 1:ut=0,Hn=null,yo(t,a,p,1);break;case 2:case 9:if(my(p)){ut=0,Hn=null,rb(a);break}a=function(){ut!==2&&ut!==9||yt!==t||(ut=7),Ya(t)},p.then(a,a);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:my(p)?(ut=0,Hn=null,rb(a)):(ut=0,Hn=null,yo(t,a,p,7));break;case 5:var v=null;switch(Ke.tag){case 26:v=Ke.memoizedState;case 5:case 27:var A=Ke;if(v?Gb(v):A.stateNode.complete){ut=0,Hn=null;var M=A.sibling;if(M!==null)Ke=M;else{var G=A.return;G!==null?(Ke=G,Ku(G)):Ke=null}break t}}ut=0,Hn=null,yo(t,a,p,5);break;case 6:ut=0,Hn=null,yo(t,a,p,6);break;case 8:Jh(),Ct=6;break e;default:throw Error(s(462))}}Y1();break}catch(ee){tb(t,ee)}while(!0);return mi=or=null,Y.H=l,Y.A=f,st=r,Ke!==null?0:(yt=null,$e=0,du(),Ct)}function Y1(){for(;Ke!==null&&!hn();)sb(Ke)}function sb(t){var a=C0(t.alternate,t,Si);t.memoizedProps=t.pendingProps,a===null?Ku(t):Ke=a}function rb(t){var a=t,r=a.alternate;switch(a.tag){case 15:case 0:a=A0(r,a,a.pendingProps,a.type,void 0,$e);break;case 11:a=A0(r,a,a.pendingProps,a.type.render,a.ref,$e);break;case 5:hh(a);default:O0(r,a),a=Ke=iy(a,Si),a=C0(r,a,Si)}t.memoizedProps=t.pendingProps,a===null?Ku(t):Ke=a}function yo(t,a,r,l){mi=or=null,hh(a),so=null,Sl=0;var f=a.return;try{if(V1(t,f,a,r,$e)){Ct=1,Mu(t,ea(r,t.current)),Ke=null;return}}catch(p){if(f!==null)throw Ke=f,p;Ct=1,Mu(t,ea(r,t.current)),Ke=null;return}a.flags&32768?(et||l===1?t=!0:ho||($e&536870912)!==0?t=!1:(os=t=!0,(l===2||l===9||l===3||l===6)&&(l=Un.current,l!==null&&l.tag===13&&(l.flags|=16384))),ob(a,t)):Ku(a)}function Ku(t){var a=t;do{if((a.flags&32768)!==0){ob(a,os);return}t=a.return;var r=U1(a.alternate,a,Si);if(r!==null){Ke=r;return}if(a=a.sibling,a!==null){Ke=a;return}Ke=a=t}while(a!==null);Ct===0&&(Ct=5)}function ob(t,a){do{var r=B1(t.alternate,t);if(r!==null){r.flags&=32767,Ke=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(t=t.sibling,t!==null)){Ke=t;return}Ke=t=r}while(t!==null);Ct=6,Ke=null}function lb(t,a,r,l,f,p,v,A,M){t.cancelPendingCommit=null;do Qu();while(Jt!==0);if((st&6)!==0)throw Error(s(327));if(a!==null){if(a===t.current)throw Error(s(177));if(p=a.lanes|a.childLanes,p|=Uf,Of(t,r,p,v,A,M),t===yt&&(Ke=yt=null,$e=0),mo=a,us=t,wi=r,$h=p,Yh=f,J0=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Z1(At,function(){return hb(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,f=ue.p,ue.p=2,v=st,st|=4;try{H1(t,a,r)}finally{st=v,ue.p=f,Y.T=l}}Jt=1,cb(),ub(),db()}}function cb(){if(Jt===1){Jt=0;var t=us,a=mo,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=Y.T,Y.T=null;var l=ue.p;ue.p=2;var f=st;st|=4;try{q0(a,t);var p=up,v=Yg(t.containerInfo),A=p.focusedElem,M=p.selectionRange;if(v!==A&&A&&A.ownerDocument&&$g(A.ownerDocument.documentElement,A)){if(M!==null&&jf(A)){var G=M.start,ee=M.end;if(ee===void 0&&(ee=G),"selectionStart"in A)A.selectionStart=G,A.selectionEnd=Math.min(ee,A.value.length);else{var ie=A.ownerDocument||document,K=ie&&ie.defaultView||window;if(K.getSelection){var X=K.getSelection(),xe=A.textContent.length,Oe=Math.min(M.start,xe),gt=M.end===void 0?Oe:Math.min(M.end,xe);!X.extend&&Oe>gt&&(v=gt,gt=Oe,Oe=v);var B=Qg(A,Oe),V=Qg(A,gt);if(B&&V&&(X.rangeCount!==1||X.anchorNode!==B.node||X.anchorOffset!==B.offset||X.focusNode!==V.node||X.focusOffset!==V.offset)){var F=ie.createRange();F.setStart(B.node,B.offset),X.removeAllRanges(),Oe>gt?(X.addRange(F),X.extend(V.node,V.offset)):(F.setEnd(V.node,V.offset),X.addRange(F))}}}}for(ie=[],X=A;X=X.parentNode;)X.nodeType===1&&ie.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ie.length;A++){var te=ie[A];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}sd=!!cp,up=cp=null}finally{st=f,ue.p=l,Y.T=r}}t.current=a,Jt=2}}function ub(){if(Jt===2){Jt=0;var t=us,a=mo,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=Y.T,Y.T=null;var l=ue.p;ue.p=2;var f=st;st|=4;try{L0(t,a.alternate,a)}finally{st=f,ue.p=l,Y.T=r}}Jt=3}}function db(){if(Jt===4||Jt===3){Jt=0,ua();var t=us,a=mo,r=wi,l=J0;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Jt=5:(Jt=0,mo=us=null,fb(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(cs=null),ci(r),a=a.stateNode,an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(da,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=Y.T,f=ue.p,ue.p=2,Y.T=null;try{for(var p=t.onRecoverableError,v=0;v<l.length;v++){var A=l[v];p(A.value,{componentStack:A.stack})}}finally{Y.T=a,ue.p=f}}(wi&3)!==0&&Qu(),Ya(t),f=t.pendingLanes,(r&261930)!==0&&(f&42)!==0?t===Xh?Hl++:(Hl=0,Xh=t):Hl=0,ql(0)}}function fb(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Al(a)))}function Qu(){return cb(),ub(),db(),hb()}function hb(){if(Jt!==5)return!1;var t=us,a=$h;$h=0;var r=ci(wi),l=Y.T,f=ue.p;try{ue.p=32>r?32:r,Y.T=null,r=Yh,Yh=null;var p=us,v=wi;if(Jt=0,mo=us=null,wi=0,(st&6)!==0)throw Error(s(331));var A=st;if(st|=4,$0(p.current),G0(p,p.current,v,r),st=A,ql(0,!1),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(da,p)}catch{}return!0}finally{ue.p=f,Y.T=l,fb(t,a)}}function pb(t,a,r){a=ea(r,a),a=Rh(t.stateNode,a,2),t=as(t,a,2),t!==null&&(Fs(t,2),Ya(t))}function dt(t,a,r){if(t.tag===3)pb(t,t,r);else for(;a!==null;){if(a.tag===3){pb(a,t,r);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(cs===null||!cs.has(l))){t=ea(r,t),r=m0(2),l=as(a,r,2),l!==null&&(g0(r,l,a,t),Fs(l,2),Ya(l));break}}a=a.return}}function Zh(t,a,r){var l=t.pingCache;if(l===null){l=t.pingCache=new G1;var f=new Set;l.set(a,f)}else f=l.get(a),f===void 0&&(f=new Set,l.set(a,f));f.has(r)||(Gh=!0,f.add(r),t=X1.bind(null,t,a,r),a.then(t,t))}function X1(t,a,r){var l=t.pingCache;l!==null&&l.delete(a),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,yt===t&&($e&r)===r&&(Ct===4||Ct===3&&($e&62914560)===$e&&300>Et()-Bu?(st&2)===0&&go(t,0):Kh|=r,po===$e&&(po=0)),Ya(t)}function mb(t,a){a===0&&(a=qc()),t=ir(t,a),t!==null&&(Fs(t,a),Ya(t))}function J1(t){var a=t.memoizedState,r=0;a!==null&&(r=a.retryLane),mb(t,r)}function W1(t,a){var r=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(a),mb(t,r)}function Z1(t,a){return H(t,a)}var $u=null,bo=null,ep=!1,Yu=!1,tp=!1,fs=0;function Ya(t){t!==bo&&t.next===null&&(bo===null?$u=bo=t:bo=bo.next=t),Yu=!0,ep||(ep=!0,tT())}function ql(t,a){if(!tp&&Yu){tp=!0;do for(var r=!1,l=$u;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var v=l.suspendedLanes,A=l.pingedLanes;p=(1<<31-Mt(42|t)+1)-1,p&=f&~(v&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,vb(l,p))}else p=$e,p=Oa(l,l===yt?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||fa(l,p)||(r=!0,vb(l,p));l=l.next}while(r);tp=!1}}function eT(){gb()}function gb(){Yu=ep=!1;var t=0;fs!==0&&dT()&&(t=fs);for(var a=Et(),r=null,l=$u;l!==null;){var f=l.next,p=yb(l,a);p===0?(l.next=null,r===null?$u=f:r.next=f,f===null&&(bo=r)):(r=l,(t!==0||(p&3)!==0)&&(Yu=!0)),l=f}Jt!==0&&Jt!==5||ql(t),fs!==0&&(fs=0)}function yb(t,a){for(var r=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var v=31-Mt(p),A=1<<v,M=f[v];M===-1?((A&r)===0||(A&l)!==0)&&(f[v]=If(A,a)):M<=a&&(t.expiredLanes|=A),p&=~A}if(a=yt,r=$e,r=Oa(t,t===a?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===a&&(ut===2||ut===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Se(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||fa(t,r)){if(a=r&-r,a===t.callbackPriority)return a;switch(l!==null&&Se(l),ci(r)){case 2:case 8:r=Hs;break;case 32:r=At;break;case 268435456:r=Lc;break;default:r=At}return l=bb.bind(null,t),r=H(r,l),t.callbackPriority=a,t.callbackNode=r,a}return l!==null&&l!==null&&Se(l),t.callbackPriority=2,t.callbackNode=null,2}function bb(t,a){if(Jt!==0&&Jt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Qu()&&t.callbackNode!==r)return null;var l=$e;return l=Oa(t,t===yt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Z0(t,l,a),yb(t,Et()),t.callbackNode!=null&&t.callbackNode===r?bb.bind(null,t):null)}function vb(t,a){if(Qu())return null;Z0(t,a,!0)}function tT(){hT(function(){(st&6)!==0?H(Bs,eT):gb()})}function np(){if(fs===0){var t=no;t===0&&(t=Ca,Ca<<=1,(Ca&261888)===0&&(Ca=256)),fs=t}return fs}function _b(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Br(""+t)}function xb(t,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,t.id&&r.setAttribute("form",t.id),a.parentNode.insertBefore(r,a),t=new FormData(t),r.parentNode.removeChild(r),t}function nT(t,a,r,l,f){if(a==="submit"&&r&&r.stateNode===f){var p=_b((f[Zt]||null).action),v=l.submitter;v&&(a=(a=v[Zt]||null)?_b(a.formAction):v.getAttribute("formAction"),a!==null&&(p=a,v=null));var A=new Ha("action","action",null,l,f);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(fs!==0){var M=v?xb(f,v):new FormData(f);Eh(r,{pending:!0,data:M,method:f.method,action:p},null,M)}}else typeof p=="function"&&(A.preventDefault(),M=v?xb(f,v):new FormData(f),Eh(r,{pending:!0,data:M,method:f.method,action:p},p,M))},currentTarget:f}]})}}for(var ap=0;ap<zf.length;ap++){var ip=zf[ap],aT=ip.toLowerCase(),iT=ip[0].toUpperCase()+ip.slice(1);_a(aT,"on"+iT)}_a(Wg,"onAnimationEnd"),_a(Zg,"onAnimationIteration"),_a(ey,"onAnimationStart"),_a("dblclick","onDoubleClick"),_a("focusin","onFocus"),_a("focusout","onBlur"),_a(_1,"onTransitionRun"),_a(x1,"onTransitionStart"),_a(E1,"onTransitionCancel"),_a(ty,"onTransitionEnd"),La("onMouseEnter",["mouseout","mouseover"]),La("onMouseLeave",["mouseout","mouseover"]),La("onPointerEnter",["pointerout","pointerover"]),La("onPointerLeave",["pointerout","pointerover"]),Va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Va("onBeforeInput",["compositionend","keypress","textInput","paste"]),Va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fl));function Eb(t,a){a=(a&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],f=l.event;l=l.listeners;e:{var p=void 0;if(a)for(var v=l.length-1;0<=v;v--){var A=l[v],M=A.instance,G=A.currentTarget;if(A=A.listener,M!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=G;try{p(f)}catch(ee){uu(ee)}f.currentTarget=null,p=M}else for(v=0;v<l.length;v++){if(A=l[v],M=A.instance,G=A.currentTarget,A=A.listener,M!==p&&f.isPropagationStopped())break e;p=A,f.currentTarget=G;try{p(f)}catch(ee){uu(ee)}f.currentTarget=null,p=M}}}}function Qe(t,a){var r=a[Pr];r===void 0&&(r=a[Pr]=new Set);var l=t+"__bubble";r.has(l)||(Ab(a,t,2,!1),r.add(l))}function sp(t,a,r){var l=0;a&&(l|=4),Ab(r,t,l,a)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function rp(t){if(!t[Xu]){t[Xu]=!0,nl.forEach(function(r){r!=="selectionchange"&&(sT.has(r)||sp(r,!1,t),sp(r,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Xu]||(a[Xu]=!0,sp("selectionchange",!1,a))}}function Ab(t,a,r,l){switch(Wb(a)){case 2:var f=MT;break;case 8:f=kT;break;default:f=xp}r=f.bind(null,a,r,t),f=void 0,!Xs||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(a,r,{capture:!0,passive:f}):t.addEventListener(a,r,!0):f!==void 0?t.addEventListener(a,r,{passive:f}):t.addEventListener(a,r,!1)}function op(t,a,r,l,f){var p=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var A=l.stateNode.containerInfo;if(A===f)break;if(v===4)for(v=l.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;A!==null;){if(v=ja(A),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){l=p=v;continue e}A=A.parentNode}}l=l.return}Qi(function(){var G=p,ee=Xn(r),ie=[];e:{var K=ny.get(t);if(K!==void 0){var X=Ha,xe=t;switch(t){case"keypress":if(Ws(r)===0)break e;case"keydown":case"keyup":X=ou;break;case"focusin":xe="focus",X=er;break;case"focusout":xe="blur",X=er;break;case"beforeblur":case"afterblur":X=er;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=ml;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Wc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=b;break;case Wg:case Zg:case ey:X=eu;break;case ty:X=S;break;case"scroll":case"scrollend":X=pl;break;case"wheel":X=$;break;case"copy":case"cut":case"paste":X=tu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=fi;break;case"toggle":case"beforetoggle":X=Be}var Oe=(a&4)!==0,gt=!Oe&&(t==="scroll"||t==="scrollend"),B=Oe?K!==null?K+"Capture":null:K;Oe=[];for(var V=G,F;V!==null;){var te=V;if(F=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||F===null||B===null||(te=ga(V,B),te!=null&&Oe.push(Gl(V,te,F))),gt)break;V=V.return}0<Oe.length&&(K=new X(K,xe,null,r,ee),ie.push({event:K,listeners:Oe}))}}if((a&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",X=t==="mouseout"||t==="pointerout",K&&r!==dl&&(xe=r.relatedTarget||r.fromElement)&&(ja(xe)||xe[Ma]))break e;if((X||K)&&(K=ee.window===ee?ee:(K=ee.ownerDocument)?K.defaultView||K.parentWindow:window,X?(xe=r.relatedTarget||r.toElement,X=G,xe=xe?ja(xe):null,xe!==null&&(gt=c(xe),Oe=xe.tag,xe!==gt||Oe!==5&&Oe!==27&&Oe!==6)&&(xe=null)):(X=null,xe=G),X!==xe)){if(Oe=ml,te="onMouseLeave",B="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Oe=fi,te="onPointerLeave",B="onPointerEnter",V="pointer"),gt=X==null?K:Pn(X),F=xe==null?K:Pn(xe),K=new Oe(te,V+"leave",X,r,ee),K.target=gt,K.relatedTarget=F,te=null,ja(ee)===G&&(Oe=new Oe(B,V+"enter",xe,r,ee),Oe.target=F,Oe.relatedTarget=gt,te=Oe),gt=te,X&&xe)t:{for(Oe=rT,B=X,V=xe,F=0,te=B;te;te=Oe(te))F++;te=0;for(var Ce=V;Ce;Ce=Oe(Ce))te++;for(;0<F-te;)B=Oe(B),F--;for(;0<te-F;)V=Oe(V),te--;for(;F--;){if(B===V||V!==null&&B===V.alternate){Oe=B;break t}B=Oe(B),V=Oe(V)}Oe=null}else Oe=null;X!==null&&Tb(ie,K,X,Oe,!1),xe!==null&&gt!==null&&Tb(ie,gt,xe,Oe,!0)}}e:{if(K=G?Pn(G):window,X=K.nodeName&&K.nodeName.toLowerCase(),X==="select"||X==="input"&&K.type==="file")var nt=Bg;else if(zg(K))if(Hg)nt=y1;else{nt=m1;var Te=p1}else X=K.nodeName,!X||X.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&Ur(G.elementType)&&(nt=Bg):nt=g1;if(nt&&(nt=nt(t,G))){Ug(ie,nt,r,ee);break e}Te&&Te(t,K,G),t==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&ll(K,"number",K.value)}switch(Te=G?Pn(G):window,t){case"focusin":(zg(Te)||Te.contentEditable==="true")&&($r=Te,Pf=G,_l=null);break;case"focusout":_l=Pf=$r=null;break;case"mousedown":Vf=!0;break;case"contextmenu":case"mouseup":case"dragend":Vf=!1,Xg(ie,r,ee);break;case"selectionchange":if(v1)break;case"keydown":case"keyup":Xg(ie,r,ee)}var qe;if(it)e:{switch(t){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else Qr?tr(t,r)&&(Ye="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(Ye="onCompositionStart");Ye&&(Ga&&r.locale!=="ko"&&(Qr||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&Qr&&(qe=hl()):(Ba=ee,fl="value"in Ba?Ba.value:Ba.textContent,Qr=!0)),Te=Ju(G,Ye),0<Te.length&&(Ye=new Fa(Ye,t,null,r,ee),ie.push({event:Ye,listeners:Te}),qe?Ye.data=qe:(qe=Kr(r),qe!==null&&(Ye.data=qe)))),(qe=Wn?u1(t,r):d1(t,r))&&(Ye=Ju(G,"onBeforeInput"),0<Ye.length&&(Te=new Fa("onBeforeInput","beforeinput",null,r,ee),ie.push({event:Te,listeners:Ye}),Te.data=qe)),nT(ie,t,G,r,ee)}Eb(ie,a)})}function Gl(t,a,r){return{instance:t,listener:a,currentTarget:r}}function Ju(t,a){for(var r=a+"Capture",l=[];t!==null;){var f=t,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=ga(t,r),f!=null&&l.unshift(Gl(t,f,p)),f=ga(t,a),f!=null&&l.push(Gl(t,f,p))),t.tag===3)return l;t=t.return}return[]}function rT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Tb(t,a,r,l,f){for(var p=a._reactName,v=[];r!==null&&r!==l;){var A=r,M=A.alternate,G=A.stateNode;if(A=A.tag,M!==null&&M===l)break;A!==5&&A!==26&&A!==27||G===null||(M=G,f?(G=ga(r,p),G!=null&&v.unshift(Gl(r,G,M))):f||(G=ga(r,p),G!=null&&v.push(Gl(r,G,M)))),r=r.return}v.length!==0&&t.push({event:a,listeners:v})}var oT=/\r\n?/g,lT=/\u0000|\uFFFD/g;function Sb(t){return(typeof t=="string"?t:""+t).replace(oT,`
`).replace(lT,"")}function wb(t,a){return a=Sb(a),Sb(t)===a}function mt(t,a,r,l,f,p){switch(r){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||Tn(t,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&Tn(t,""+l);break;case"className":Vn(t,"class",l);break;case"tabIndex":Vn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Vn(t,r,l);break;case"style":ul(t,l,p);break;case"data":if(a!=="object"){Vn(t,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=Br(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(a!=="input"&&mt(t,a,"name",f.name,f,null),mt(t,a,"formEncType",f.formEncType,f,null),mt(t,a,"formMethod",f.formMethod,f,null),mt(t,a,"formTarget",f.formTarget,f,null)):(mt(t,a,"encType",f.encType,f,null),mt(t,a,"method",f.method,f,null),mt(t,a,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=Br(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=ma);break;case"onScroll":l!=null&&Qe("scroll",t);break;case"onScrollEnd":l!=null&&Qe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=Br(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":Qe("beforetoggle",t),Qe("toggle",t),Lr(t,"popover",l);break;case"xlinkActuate":qt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":qt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":qt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":qt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":qt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":qt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":qt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":qt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":qt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Lr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Jc.get(r)||r,Lr(t,r,l))}}function lp(t,a,r,l,f,p){switch(r){case"style":ul(t,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=r}}break;case"children":typeof l=="string"?Tn(t,l):(typeof l=="number"||typeof l=="bigint")&&Tn(t,""+l);break;case"onScroll":l!=null&&Qe("scroll",t);break;case"onScrollEnd":l!=null&&Qe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ma);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!al.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),a=r.slice(2,f?r.length-7:void 0),p=t[Zt]||null,p=p!=null?p[r]:null,typeof p=="function"&&t.removeEventListener(a,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(a,l,f);break e}r in t?t[r]=l:l===!0?t.setAttribute(r,""):Lr(t,r,l)}}}function cn(t,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",t),Qe("load",t);var l=!1,f=!1,p;for(p in r)if(r.hasOwnProperty(p)){var v=r[p];if(v!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:mt(t,a,p,v,r,null)}}f&&mt(t,a,"srcSet",r.srcSet,r,null),l&&mt(t,a,"src",r.src,r,null);return;case"input":Qe("invalid",t);var A=p=v=f=null,M=null,G=null;for(l in r)if(r.hasOwnProperty(l)){var ee=r[l];if(ee!=null)switch(l){case"name":f=ee;break;case"type":v=ee;break;case"checked":M=ee;break;case"defaultChecked":G=ee;break;case"value":p=ee;break;case"defaultValue":A=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,a));break;default:mt(t,a,l,ee,r,null)}}$c(t,p,A,M,G,v,f,!1);return;case"select":Qe("invalid",t),l=v=p=null;for(f in r)if(r.hasOwnProperty(f)&&(A=r[f],A!=null))switch(f){case"value":p=A;break;case"defaultValue":v=A;break;case"multiple":l=A;default:mt(t,a,f,A,r,null)}a=p,r=v,t.multiple=!!l,a!=null?qi(t,!!l,a,!1):r!=null&&qi(t,!!l,r,!0);return;case"textarea":Qe("invalid",t),p=f=l=null;for(v in r)if(r.hasOwnProperty(v)&&(A=r[v],A!=null))switch(v){case"value":l=A;break;case"defaultValue":f=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(91));break;default:mt(t,a,v,A,r,null)}Fi(t,l,f,p);return;case"option":for(M in r)r.hasOwnProperty(M)&&(l=r[M],l!=null)&&(M==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":mt(t,a,M,l,r,null));return;case"dialog":Qe("beforetoggle",t),Qe("toggle",t),Qe("cancel",t),Qe("close",t);break;case"iframe":case"object":Qe("load",t);break;case"video":case"audio":for(l=0;l<Fl.length;l++)Qe(Fl[l],t);break;case"image":Qe("error",t),Qe("load",t);break;case"details":Qe("toggle",t);break;case"embed":case"source":case"link":Qe("error",t),Qe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in r)if(r.hasOwnProperty(G)&&(l=r[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:mt(t,a,G,l,r,null)}return;default:if(Ur(a)){for(ee in r)r.hasOwnProperty(ee)&&(l=r[ee],l!==void 0&&lp(t,a,ee,l,r,void 0));return}}for(A in r)r.hasOwnProperty(A)&&(l=r[A],l!=null&&mt(t,a,A,l,r,null))}function cT(t,a,r,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,v=null,A=null,M=null,G=null,ee=null;for(X in r){var ie=r[X];if(r.hasOwnProperty(X)&&ie!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":M=ie;default:l.hasOwnProperty(X)||mt(t,a,X,null,l,ie)}}for(var K in l){var X=l[K];if(ie=r[K],l.hasOwnProperty(K)&&(X!=null||ie!=null))switch(K){case"type":p=X;break;case"name":f=X;break;case"checked":G=X;break;case"defaultChecked":ee=X;break;case"value":v=X;break;case"defaultValue":A=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,a));break;default:X!==ie&&mt(t,a,K,X,l,ie)}}zr(t,v,A,M,G,ee,p,f);return;case"select":X=v=A=K=null;for(p in r)if(M=r[p],r.hasOwnProperty(p)&&M!=null)switch(p){case"value":break;case"multiple":X=M;default:l.hasOwnProperty(p)||mt(t,a,p,null,l,M)}for(f in l)if(p=l[f],M=r[f],l.hasOwnProperty(f)&&(p!=null||M!=null))switch(f){case"value":K=p;break;case"defaultValue":A=p;break;case"multiple":v=p;default:p!==M&&mt(t,a,f,p,l,M)}a=A,r=v,l=X,K!=null?qi(t,!!r,K,!1):!!l!=!!r&&(a!=null?qi(t,!!r,a,!0):qi(t,!!r,r?[]:"",!1));return;case"textarea":X=K=null;for(A in r)if(f=r[A],r.hasOwnProperty(A)&&f!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:mt(t,a,A,null,l,f)}for(v in l)if(f=l[v],p=r[v],l.hasOwnProperty(v)&&(f!=null||p!=null))switch(v){case"value":K=f;break;case"defaultValue":X=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&mt(t,a,v,f,l,p)}Yc(t,K,X);return;case"option":for(var xe in r)K=r[xe],r.hasOwnProperty(xe)&&K!=null&&!l.hasOwnProperty(xe)&&(xe==="selected"?t.selected=!1:mt(t,a,xe,null,l,K));for(M in l)K=l[M],X=r[M],l.hasOwnProperty(M)&&K!==X&&(K!=null||X!=null)&&(M==="selected"?t.selected=K&&typeof K!="function"&&typeof K!="symbol":mt(t,a,M,K,l,X));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in r)K=r[Oe],r.hasOwnProperty(Oe)&&K!=null&&!l.hasOwnProperty(Oe)&&mt(t,a,Oe,null,l,K);for(G in l)if(K=l[G],X=r[G],l.hasOwnProperty(G)&&K!==X&&(K!=null||X!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,a));break;default:mt(t,a,G,K,l,X)}return;default:if(Ur(a)){for(var gt in r)K=r[gt],r.hasOwnProperty(gt)&&K!==void 0&&!l.hasOwnProperty(gt)&&lp(t,a,gt,void 0,l,K);for(ee in l)K=l[ee],X=r[ee],!l.hasOwnProperty(ee)||K===X||K===void 0&&X===void 0||lp(t,a,ee,K,l,X);return}}for(var B in r)K=r[B],r.hasOwnProperty(B)&&K!=null&&!l.hasOwnProperty(B)&&mt(t,a,B,null,l,K);for(ie in l)K=l[ie],X=r[ie],!l.hasOwnProperty(ie)||K===X||K==null&&X==null||mt(t,a,ie,K,l,X)}function Nb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var f=r[l],p=f.transferSize,v=f.initiatorType,A=f.duration;if(p&&A&&Nb(v)){for(v=0,A=f.responseEnd,l+=1;l<r.length;l++){var M=r[l],G=M.startTime;if(G>A)break;var ee=M.transferSize,ie=M.initiatorType;ee&&Nb(ie)&&(M=M.responseEnd,v+=ee*(M<A?1:(A-G)/(M-G)))}if(--l,a+=8*(p+v)/(f.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var cp=null,up=null;function Wu(t){return t.nodeType===9?t:t.ownerDocument}function Rb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cb(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function dp(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var fp=null;function dT(){var t=window.event;return t&&t.type==="popstate"?t===fp?!1:(fp=t,!0):(fp=null,!1)}var Ib=typeof setTimeout=="function"?setTimeout:void 0,fT=typeof clearTimeout=="function"?clearTimeout:void 0,Ob=typeof Promise=="function"?Promise:void 0,hT=typeof queueMicrotask=="function"?queueMicrotask:typeof Ob<"u"?function(t){return Ob.resolve(null).then(t).catch(pT)}:Ib;function pT(t){setTimeout(function(){throw t})}function hs(t){return t==="head"}function Db(t,a){var r=a,l=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(l===0){t.removeChild(f),Eo(a);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")Kl(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Kl(r);for(var p=r.firstChild;p;){var v=p.nextSibling,A=p.nodeName;p[ka]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&p.rel.toLowerCase()==="stylesheet"||r.removeChild(p),p=v}}else r==="body"&&Kl(t.ownerDocument.body);r=f}while(r);Eo(a)}function Mb(t,a){var r=t;t=0;do{var l=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=l}while(r)}function hp(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":hp(r),Vr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function mT(t,a,r,l){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ka])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=sa(t.nextSibling),t===null)break}return null}function gT(t,a,r){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=sa(t.nextSibling),t===null))return null;return t}function kb(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=sa(t.nextSibling),t===null))return null;return t}function pp(t){return t.data==="$?"||t.data==="$~"}function mp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function yT(t,a){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||r.readyState!=="loading")a();else{var l=function(){a(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function sa(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var gp=null;function jb(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(a===0)return sa(t.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}t=t.nextSibling}return null}function Pb(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return t;a--}else r!=="/$"&&r!=="/&"||a++}t=t.previousSibling}return null}function Vb(t,a,r){switch(a=Wu(r),t){case"html":if(t=a.documentElement,!t)throw Error(s(452));return t;case"head":if(t=a.head,!t)throw Error(s(453));return t;case"body":if(t=a.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Kl(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Vr(t)}var ra=new Map,Lb=new Set;function Zu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ni=ue.d;ue.d={f:bT,r:vT,D:_T,C:xT,L:ET,m:AT,X:ST,S:TT,M:wT};function bT(){var t=Ni.f(),a=Fu();return t||a}function vT(t){var a=Yn(t);a!==null&&a.tag===5&&a.type==="form"?t0(a):Ni.r(t)}var vo=typeof document>"u"?null:document;function zb(t,a,r){var l=vo;if(l&&typeof a=="string"&&a){var f=An(a);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),Lb.has(f)||(Lb.add(f),t={rel:t,crossOrigin:r,href:a},l.querySelector(f)===null&&(a=l.createElement("link"),cn(a,"link",t),Ht(a),l.head.appendChild(a)))}}function _T(t){Ni.D(t),zb("dns-prefetch",t,null)}function xT(t,a){Ni.C(t,a),zb("preconnect",t,a)}function ET(t,a,r){Ni.L(t,a,r);var l=vo;if(l&&t&&a){var f='link[rel="preload"][as="'+An(a)+'"]';a==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+An(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+An(r.imageSizes)+'"]')):f+='[href="'+An(t)+'"]';var p=f;switch(a){case"style":p=_o(t);break;case"script":p=xo(t)}ra.has(p)||(t=E({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:t,as:a},r),ra.set(p,t),l.querySelector(f)!==null||a==="style"&&l.querySelector(Ql(p))||a==="script"&&l.querySelector($l(p))||(a=l.createElement("link"),cn(a,"link",t),Ht(a),l.head.appendChild(a)))}}function AT(t,a){Ni.m(t,a);var r=vo;if(r&&t){var l=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+An(l)+'"][href="'+An(t)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=xo(t)}if(!ra.has(p)&&(t=E({rel:"modulepreload",href:t},a),ra.set(p,t),r.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector($l(p)))return}l=r.createElement("link"),cn(l,"link",t),Ht(l),r.head.appendChild(l)}}}function TT(t,a,r){Ni.S(t,a,r);var l=vo;if(l&&t){var f=Pa(l).hoistableStyles,p=_o(t);a=a||"default";var v=f.get(p);if(!v){var A={loading:0,preload:null};if(v=l.querySelector(Ql(p)))A.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":a},r),(r=ra.get(p))&&yp(t,r);var M=v=l.createElement("link");Ht(M),cn(M,"link",t),M._p=new Promise(function(G,ee){M.onload=G,M.onerror=ee}),M.addEventListener("load",function(){A.loading|=1}),M.addEventListener("error",function(){A.loading|=2}),A.loading|=4,ed(v,a,l)}v={type:"stylesheet",instance:v,count:1,state:A},f.set(p,v)}}}function ST(t,a){Ni.X(t,a);var r=vo;if(r&&t){var l=Pa(r).hoistableScripts,f=xo(t),p=l.get(f);p||(p=r.querySelector($l(f)),p||(t=E({src:t,async:!0},a),(a=ra.get(f))&&bp(t,a),p=r.createElement("script"),Ht(p),cn(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function wT(t,a){Ni.M(t,a);var r=vo;if(r&&t){var l=Pa(r).hoistableScripts,f=xo(t),p=l.get(f);p||(p=r.querySelector($l(f)),p||(t=E({src:t,async:!0,type:"module"},a),(a=ra.get(f))&&bp(t,a),p=r.createElement("script"),Ht(p),cn(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function Ub(t,a,r,l){var f=(f=ce.current)?Zu(f):null;if(!f)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=_o(r.href),r=Pa(f).hoistableStyles,l=r.get(a),l||(l={type:"style",instance:null,count:0,state:null},r.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=_o(r.href);var p=Pa(f).hoistableStyles,v=p.get(t);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,v),(p=f.querySelector(Ql(t)))&&!p._p&&(v.instance=p,v.state.loading=5),ra.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ra.set(t,r),p||NT(f,t,r,v.state))),a&&l===null)throw Error(s(528,""));return v}if(a&&l!==null)throw Error(s(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=xo(r),r=Pa(f).hoistableScripts,l=r.get(a),l||(l={type:"script",instance:null,count:0,state:null},r.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function _o(t){return'href="'+An(t)+'"'}function Ql(t){return'link[rel="stylesheet"]['+t+"]"}function Bb(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function NT(t,a,r,l){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=t.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),cn(a,"link",r),Ht(a),t.head.appendChild(a))}function xo(t){return'[src="'+An(t)+'"]'}function $l(t){return"script[async]"+t}function Hb(t,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var l=t.querySelector('style[data-href~="'+An(r.href)+'"]');if(l)return a.instance=l,Ht(l),l;var f=E({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ht(l),cn(l,"style",f),ed(l,r.precedence,t),a.instance=l;case"stylesheet":f=_o(r.href);var p=t.querySelector(Ql(f));if(p)return a.state.loading|=4,a.instance=p,Ht(p),p;l=Bb(r),(f=ra.get(f))&&yp(l,f),p=(t.ownerDocument||t).createElement("link"),Ht(p);var v=p;return v._p=new Promise(function(A,M){v.onload=A,v.onerror=M}),cn(p,"link",l),a.state.loading|=4,ed(p,r.precedence,t),a.instance=p;case"script":return p=xo(r.src),(f=t.querySelector($l(p)))?(a.instance=f,Ht(f),f):(l=r,(f=ra.get(p))&&(l=E({},r),bp(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),Ht(f),cn(f,"link",l),t.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,ed(l,r.precedence,t));return a.instance}function ed(t,a,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,v=0;v<l.length;v++){var A=l[v];if(A.dataset.precedence===a)p=A;else if(p!==f)break}p?p.parentNode.insertBefore(t,p.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(t,a.firstChild))}function yp(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function bp(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var td=null;function qb(t,a,r){if(td===null){var l=new Map,f=td=new Map;f.set(r,l)}else f=td,l=f.get(r),l||(l=new Map,f.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var p=r[f];if(!(p[ka]||p[Bt]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var v=p.getAttribute(a)||"";v=t+v;var A=l.get(v);A?A.push(p):l.set(v,[p])}}return l}function Fb(t,a,r){t=t.ownerDocument||t,t.head.insertBefore(r,a==="title"?t.querySelector("head > title"):null)}function RT(t,a,r){if(r===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Gb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function CT(t,a,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=_o(l.href),p=a.querySelector(Ql(f));if(p){a=p._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=nd.bind(t),a.then(t,t)),r.state.loading|=4,r.instance=p,Ht(p);return}p=a.ownerDocument||a,l=Bb(l),(f=ra.get(f))&&yp(l,f),p=p.createElement("link"),Ht(p);var v=p;v._p=new Promise(function(A,M){v.onload=A,v.onerror=M}),cn(p,"link",l),r.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=nd.bind(t),a.addEventListener("load",r),a.addEventListener("error",r))}}var vp=0;function IT(t,a){return t.stylesheets&&t.count===0&&id(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var l=setTimeout(function(){if(t.stylesheets&&id(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+a);0<t.imgBytes&&vp===0&&(vp=62500*uT());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&id(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>vp?50:800)+a);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function nd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)id(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ad=null;function id(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ad=new Map,a.forEach(OT,t),ad=null,nd.call(t))}function OT(t,a){if(!(a.state.loading&4)){var r=ad.get(t);if(r)var l=r.get(null);else{r=new Map,ad.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var v=f[p];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),l=v)}l&&r.set(null,l)}f=a.instance,v=f.getAttribute("data-precedence"),p=r.get(v)||l,p===l&&r.set(null,f),r.set(v,f),this.count++,l=nd.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),a.state.loading|=4}}var Yl={$$typeof:oe,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function DT(t,a,r,l,f,p,v,A,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Da(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Da(0),this.hiddenUpdates=Da(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Kb(t,a,r,l,f,p,v,A,M,G,ee,ie){return t=new DT(t,a,r,v,M,G,ee,ie,A),a=1,p===!0&&(a|=24),p=zn(3,null,null,a),t.current=p,p.stateNode=t,a=Wf(),a.refCount++,t.pooledCache=a,a.refCount++,p.memoizedState={element:l,isDehydrated:r,cache:a},nh(p),t}function Qb(t){return t?(t=Jr,t):Jr}function $b(t,a,r,l,f,p){f=Qb(f),l.context===null?l.context=f:l.pendingContext=f,l=ns(a),l.payload={element:r},p=p===void 0?null:p,p!==null&&(l.callback=p),r=as(t,l,a),r!==null&&(Cn(r,t,a),Nl(r,t,a))}function Yb(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<a?r:a}}function _p(t,a){Yb(t,a),(t=t.alternate)&&Yb(t,a)}function Xb(t){if(t.tag===13||t.tag===31){var a=ir(t,67108864);a!==null&&Cn(a,t,67108864),_p(t,67108864)}}function Jb(t){if(t.tag===13||t.tag===31){var a=Fn();a=Ks(a);var r=ir(t,a);r!==null&&Cn(r,t,a),_p(t,a)}}var sd=!0;function MT(t,a,r,l){var f=Y.T;Y.T=null;var p=ue.p;try{ue.p=2,xp(t,a,r,l)}finally{ue.p=p,Y.T=f}}function kT(t,a,r,l){var f=Y.T;Y.T=null;var p=ue.p;try{ue.p=8,xp(t,a,r,l)}finally{ue.p=p,Y.T=f}}function xp(t,a,r,l){if(sd){var f=Ep(l);if(f===null)op(t,a,l,rd,r),Zb(t,l);else if(PT(f,t,a,r,l))l.stopPropagation();else if(Zb(t,l),a&4&&-1<jT.indexOf(t)){for(;f!==null;){var p=Yn(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var v=Ia(p.pendingLanes);if(v!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;v;){var M=1<<31-Mt(v);A.entanglements[1]|=M,v&=~M}Ya(p),(st&6)===0&&(Hu=Et()+500,ql(0))}}break;case 31:case 13:A=ir(p,2),A!==null&&Cn(A,p,2),Fu(),_p(p,2)}if(p=Ep(l),p===null&&op(t,a,l,rd,r),p===f)break;f=p}f!==null&&l.stopPropagation()}else op(t,a,l,null,r)}}function Ep(t){return t=Xn(t),Ap(t)}var rd=null;function Ap(t){if(rd=null,t=ja(t),t!==null){var a=c(t);if(a===null)t=null;else{var r=a.tag;if(r===13){if(t=d(a),t!==null)return t;t=null}else if(r===31){if(t=m(a),t!==null)return t;t=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return rd=t,null}function Wb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pn()){case Bs:return 2;case Hs:return 8;case At:case _n:return 32;case Lc:return 268435456;default:return 32}default:return 32}}var Tp=!1,ps=null,ms=null,gs=null,Xl=new Map,Jl=new Map,ys=[],jT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zb(t,a){switch(t){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":Xl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(a.pointerId)}}function Wl(t,a,r,l,f,p){return t===null||t.nativeEvent!==p?(t={blockedOn:a,domEventName:r,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},a!==null&&(a=Yn(a),a!==null&&Xb(a)),t):(t.eventSystemFlags|=l,a=t.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),t)}function PT(t,a,r,l,f){switch(a){case"focusin":return ps=Wl(ps,t,a,r,l,f),!0;case"dragenter":return ms=Wl(ms,t,a,r,l,f),!0;case"mouseover":return gs=Wl(gs,t,a,r,l,f),!0;case"pointerover":var p=f.pointerId;return Xl.set(p,Wl(Xl.get(p)||null,t,a,r,l,f)),!0;case"gotpointercapture":return p=f.pointerId,Jl.set(p,Wl(Jl.get(p)||null,t,a,r,l,f)),!0}return!1}function ev(t){var a=ja(t.target);if(a!==null){var r=c(a);if(r!==null){if(a=r.tag,a===13){if(a=d(r),a!==null){t.blockedOn=a,ha(t.priority,function(){Jb(r)});return}}else if(a===31){if(a=m(r),a!==null){t.blockedOn=a,ha(t.priority,function(){Jb(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function od(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var r=Ep(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);dl=l,r.target.dispatchEvent(l),dl=null}else return a=Yn(r),a!==null&&Xb(a),t.blockedOn=r,!1;a.shift()}return!0}function tv(t,a,r){od(t)&&r.delete(a)}function VT(){Tp=!1,ps!==null&&od(ps)&&(ps=null),ms!==null&&od(ms)&&(ms=null),gs!==null&&od(gs)&&(gs=null),Xl.forEach(tv),Jl.forEach(tv)}function ld(t,a){t.blockedOn===a&&(t.blockedOn=null,Tp||(Tp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,VT)))}var cd=null;function nv(t){cd!==t&&(cd=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){cd===t&&(cd=null);for(var a=0;a<t.length;a+=3){var r=t[a],l=t[a+1],f=t[a+2];if(typeof l!="function"){if(Ap(l||r)===null)continue;break}var p=Yn(r);p!==null&&(t.splice(a,3),a-=3,Eh(p,{pending:!0,data:f,method:r.method,action:l},l,f))}}))}function Eo(t){function a(M){return ld(M,t)}ps!==null&&ld(ps,t),ms!==null&&ld(ms,t),gs!==null&&ld(gs,t),Xl.forEach(a),Jl.forEach(a);for(var r=0;r<ys.length;r++){var l=ys[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ys.length&&(r=ys[0],r.blockedOn===null);)ev(r),r.blockedOn===null&&ys.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var f=r[l],p=r[l+1],v=f[Zt]||null;if(typeof p=="function")v||nv(r);else if(v){var A=null;if(p&&p.hasAttribute("formAction")){if(f=p,v=p[Zt]||null)A=v.formAction;else if(Ap(f)!==null)continue}else A=v.action;typeof A=="function"?r[l+1]=A:(r.splice(l,3),l-=3),nv(r)}}}function av(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function Sp(t){this._internalRoot=t}ud.prototype.render=Sp.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(s(409));var r=a.current,l=Fn();$b(r,l,t,a,null,null)},ud.prototype.unmount=Sp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;$b(t.current,2,null,t,null,null),Fu(),a[Ma]=null}};function ud(t){this._internalRoot=t}ud.prototype.unstable_scheduleHydration=function(t){if(t){var a=Fc();t={blockedOn:null,target:t,priority:a};for(var r=0;r<ys.length&&a!==0&&a<ys[r].priority;r++);ys.splice(r,0,t),r===0&&ev(t)}};var iv=e.version;if(iv!=="19.2.4")throw Error(s(527,iv,"19.2.4"));ue.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=y(a),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var LT={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dd.isDisabled&&dd.supportsFiber)try{da=dd.inject(LT),an=dd}catch{}}return ec.createRoot=function(t,a){if(!o(t))throw Error(s(299));var r=!1,l="",f=d0,p=f0,v=h0;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=Kb(t,1,!1,null,null,r,l,null,f,p,v,av),t[Ma]=a.current,rp(t),new Sp(a)},ec.hydrateRoot=function(t,a,r){if(!o(t))throw Error(s(299));var l=!1,f="",p=d0,v=f0,A=h0,M=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(A=r.onRecoverableError),r.formState!==void 0&&(M=r.formState)),a=Kb(t,1,!0,a,r??null,l,f,M,p,v,A,av),a.context=Qb(null),r=a.current,l=Fn(),l=Ks(l),f=ns(l),f.callback=null,as(r,f,l),r=l,a.current.lanes=r,Fs(a,r),Ya(a),t[Ma]=a.current,rp(t),new ud(a)},ec.version="19.2.4",ec}var pv;function YT(){if(pv)return Rp.exports;pv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Rp.exports=$T(),Rp.exports}var XT=YT();const JT=ax(XT);var mv="popstate";function WT(i={}){function e(o,c){let{pathname:d="/",search:m="",hash:g=""}=Rr(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),$p("",{pathname:d,search:m,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(o,c){let d=o.document.querySelector("base"),m="";if(d&&d.getAttribute("href")){let g=o.location.href,y=g.indexOf("#");m=y===-1?g:g.slice(0,y)}return m+"#"+(typeof c=="string"?c:gc(c))}function s(o,c){ca(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return eS(e,n,s,i)}function wt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ca(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZT(){return Math.random().toString(36).substring(2,10)}function gv(i,e){return{usr:i.state,key:i.key,idx:e}}function $p(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Rr(e):e,state:n,key:e&&e.key||s||ZT()}}function gc({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Rr(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function eS(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:c=!1}=s,d=o.history,m="POP",g=null,y=x();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function x(){return(d.state||{idx:null}).idx}function E(){m="POP";let z=x(),W=z==null?null:z-y;y=z,g&&g({action:m,location:L.location,delta:W})}function N(z,W){m="PUSH";let J=$p(L.location,z,W);n&&n(J,z),y=x()+1;let oe=gv(J,y),se=L.createHref(J);try{d.pushState(oe,"",se)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign(se)}c&&g&&g({action:m,location:L.location,delta:1})}function P(z,W){m="REPLACE";let J=$p(L.location,z,W);n&&n(J,z),y=x();let oe=gv(J,y),se=L.createHref(J);d.replaceState(oe,"",se),c&&g&&g({action:m,location:L.location,delta:0})}function U(z){return tS(z)}let L={get action(){return m},get location(){return i(o,d)},listen(z){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(mv,E),g=z,()=>{o.removeEventListener(mv,E),g=null}},createHref(z){return e(o,z)},createURL:U,encodeLocation(z){let W=U(z);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:N,replace:P,go(z){return d.go(z)}};return L}function tS(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),wt(n,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:gc(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function ix(i,e,n="/"){return nS(i,e,n,!1)}function nS(i,e,n,s){let o=typeof e=="string"?Rr(e):e,c=Mi(o.pathname||"/",n);if(c==null)return null;let d=sx(i);aS(d);let m=null;for(let g=0;m==null&&g<d.length;++g){let y=pS(c);m=fS(d[g],y,s)}return m}function sx(i,e=[],n=[],s="",o=!1){let c=(d,m,g=o,y)=>{let x={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(s)&&g)return;wt(x.relativePath.startsWith(s),`Absolute route path "${x.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(s.length)}let E=Ii([s,x.relativePath]),N=n.concat(x);d.children&&d.children.length>0&&(wt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),sx(d.children,e,N,E,g)),!(d.path==null&&!d.index)&&e.push({path:E,score:uS(E,d.index),routesMeta:N})};return i.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))c(d,m);else for(let g of rx(d.path))c(d,m,!0,g)}),e}function rx(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),c=n.replace(/\?$/,"");if(s.length===0)return o?[c,""]:[c];let d=rx(s.join("/")),m=[];return m.push(...d.map(g=>g===""?c:[c,g].join("/"))),o&&m.push(...d),m.map(g=>i.startsWith("/")&&g===""?"/":g)}function aS(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:dS(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var iS=/^:[\w-]+$/,sS=3,rS=2,oS=1,lS=10,cS=-2,yv=i=>i==="*";function uS(i,e){let n=i.split("/"),s=n.length;return n.some(yv)&&(s+=cS),e&&(s+=rS),n.filter(o=>!yv(o)).reduce((o,c)=>o+(iS.test(c)?sS:c===""?oS:lS),s)}function dS(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function fS(i,e,n=!1){let{routesMeta:s}=i,o={},c="/",d=[];for(let m=0;m<s.length;++m){let g=s[m],y=m===s.length-1,x=c==="/"?e:e.slice(c.length)||"/",E=Md({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},x),N=g.route;if(!E&&y&&n&&!s[s.length-1].route.index&&(E=Md({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!E)return null;Object.assign(o,E.params),d.push({params:o,pathname:Ii([c,E.pathname]),pathnameBase:bS(Ii([c,E.pathnameBase])),route:N}),E.pathnameBase!=="/"&&(c=Ii([c,E.pathnameBase]))}return d}function Md(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=hS(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let c=o[0],d=c.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((y,{paramName:x,isOptional:E},N)=>{if(x==="*"){let U=m[N]||"";d=c.slice(0,c.length-U.length).replace(/(.)\/+$/,"$1")}const P=m[N];return E&&!P?y[x]=void 0:y[x]=(P||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:d,pattern:i}}function hS(i,e=!1,n=!0){ca(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,g)=>(s.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function pS(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ca(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Mi(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}var mS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function gS(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?Rr(i):i,c;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?c=bv(n.substring(1),"/"):c=bv(n,e)):c=e,{pathname:c,search:vS(s),hash:_S(o)}}function bv(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Dp(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yS(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function wm(i){let e=yS(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Nm(i,e,n,s=!1){let o;typeof i=="string"?o=Rr(i):(o={...i},wt(!o.pathname||!o.pathname.includes("?"),Dp("?","pathname","search",o)),wt(!o.pathname||!o.pathname.includes("#"),Dp("#","pathname","hash",o)),wt(!o.search||!o.search.includes("#"),Dp("#","search","hash",o)));let c=i===""||o.pathname==="",d=c?"/":o.pathname,m;if(d==null)m=n;else{let E=e.length-1;if(!s&&d.startsWith("..")){let N=d.split("/");for(;N[0]==="..";)N.shift(),E-=1;o.pathname=N.join("/")}m=E>=0?e[E]:"/"}let g=gS(o,m),y=d&&d!=="/"&&d.endsWith("/"),x=(c||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||x)&&(g.pathname+="/"),g}var Ii=i=>i.join("/").replace(/\/\/+/g,"/"),bS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),vS=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,_S=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,xS=class{constructor(i,e,n,s=!1){this.status=i,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function ES(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function AS(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ox=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function lx(i,e){let n=i;if(typeof n!="string"||!mS.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,o=!1;if(ox)try{let c=new URL(window.location.href),d=n.startsWith("//")?new URL(c.protocol+n):new URL(n),m=Mi(d.pathname,e);d.origin===c.origin&&m!=null?n=m+d.search+d.hash:o=!0}catch{ca(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var cx=["POST","PUT","PATCH","DELETE"];new Set(cx);var TS=["GET",...cx];new Set(TS);var Go=I.createContext(null);Go.displayName="DataRouter";var ef=I.createContext(null);ef.displayName="DataRouterState";var SS=I.createContext(!1),ux=I.createContext({isTransitioning:!1});ux.displayName="ViewTransition";var wS=I.createContext(new Map);wS.displayName="Fetchers";var NS=I.createContext(null);NS.displayName="Await";var Qn=I.createContext(null);Qn.displayName="Navigation";var Sc=I.createContext(null);Sc.displayName="Location";var ri=I.createContext({outlet:null,matches:[],isDataRoute:!1});ri.displayName="Route";var Rm=I.createContext(null);Rm.displayName="RouteError";var dx="REACT_ROUTER_ERROR",RS="REDIRECT",CS="ROUTE_ERROR_RESPONSE";function IS(i){if(i.startsWith(`${dx}:${RS}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function OS(i){if(i.startsWith(`${dx}:${CS}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new xS(e.status,e.statusText,e.data)}catch{}}function DS(i,{relative:e}={}){wt(Ko(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=I.useContext(Qn),{hash:o,pathname:c,search:d}=wc(i,{relative:e}),m=c;return n!=="/"&&(m=c==="/"?n:Ii([n,c])),s.createHref({pathname:m,search:d,hash:o})}function Ko(){return I.useContext(Sc)!=null}function Ps(){return wt(Ko(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Sc).location}var fx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hx(i){I.useContext(Qn).static||I.useLayoutEffect(i)}function Ui(){let{isDataRoute:i}=I.useContext(ri);return i?GS():MS()}function MS(){wt(Ko(),"useNavigate() may be used only in the context of a <Router> component.");let i=I.useContext(Go),{basename:e,navigator:n}=I.useContext(Qn),{matches:s}=I.useContext(ri),{pathname:o}=Ps(),c=JSON.stringify(wm(s)),d=I.useRef(!1);return hx(()=>{d.current=!0}),I.useCallback((g,y={})=>{if(ca(d.current,fx),!d.current)return;if(typeof g=="number"){n.go(g);return}let x=Nm(g,JSON.parse(c),o,y.relative==="path");i==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:Ii([e,x.pathname])),(y.replace?n.replace:n.push)(x,y.state,y)},[e,n,c,o,i])}I.createContext(null);function wc(i,{relative:e}={}){let{matches:n}=I.useContext(ri),{pathname:s}=Ps(),o=JSON.stringify(wm(n));return I.useMemo(()=>Nm(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function kS(i,e){return px(i,e)}function px(i,e,n,s,o){wt(Ko(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=I.useContext(Qn),{matches:d}=I.useContext(ri),m=d[d.length-1],g=m?m.params:{},y=m?m.pathname:"/",x=m?m.pathnameBase:"/",E=m&&m.route;{let J=E&&E.path||"";gx(y,!E||J.endsWith("*")||J.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${J}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${J}"> to <Route path="${J==="/"?"*":`${J}/*`}">.`)}let N=Ps(),P;if(e){let J=typeof e=="string"?Rr(e):e;wt(x==="/"||J.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${J.pathname}" was given in the \`location\` prop.`),P=J}else P=N;let U=P.pathname||"/",L=U;if(x!=="/"){let J=x.replace(/^\//,"").split("/");L="/"+U.replace(/^\//,"").split("/").slice(J.length).join("/")}let z=ix(i,{pathname:L});ca(E||z!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),ca(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let W=zS(z&&z.map(J=>Object.assign({},J,{params:Object.assign({},g,J.params),pathname:Ii([x,c.encodeLocation?c.encodeLocation(J.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathname]),pathnameBase:J.pathnameBase==="/"?x:Ii([x,c.encodeLocation?c.encodeLocation(J.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:J.pathnameBase])})),d,n,s,o);return e&&W?I.createElement(Sc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},W):W}function jS(){let i=FS(),e=ES(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",i),d=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:c},"ErrorBoundary")," or"," ",I.createElement("code",{style:c},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:o},n):null,d)}var PS=I.createElement(jS,null),mx=class extends I.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const n=OS(i.digest);n&&(i=n)}let e=i!==void 0?I.createElement(ri.Provider,{value:this.props.routeContext},I.createElement(Rm.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?I.createElement(VS,{error:i},e):e}};mx.contextType=SS;var Mp=new WeakMap;function VS({children:i,error:e}){let{basename:n}=I.useContext(Qn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=IS(e.digest);if(s){let o=Mp.get(e);if(o)throw o;let c=lx(s.location,n);if(ox&&!Mp.get(e))if(c.isExternal||s.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:s.replace}));throw Mp.set(e,d),d}return I.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return i}function LS({routeContext:i,match:e,children:n}){let s=I.useContext(Go);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(ri.Provider,{value:i},n)}function zS(i,e=[],n=null,s=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let c=i,d=n?.errors;if(d!=null){let x=c.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);wt(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,x+1))}let m=!1,g=-1;if(n)for(let x=0;x<c.length;x++){let E=c[x];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=x),E.route.id){let{loaderData:N,errors:P}=n,U=E.route.loader&&!N.hasOwnProperty(E.route.id)&&(!P||P[E.route.id]===void 0);if(E.route.lazy||U){m=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}let y=n&&s?(x,E)=>{s(x,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:AS(n.matches),errorInfo:E})}:void 0;return c.reduceRight((x,E,N)=>{let P,U=!1,L=null,z=null;n&&(P=d&&E.route.id?d[E.route.id]:void 0,L=E.route.errorElement||PS,m&&(g<0&&N===0?(gx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),U=!0,z=null):g===N&&(U=!0,z=E.route.hydrateFallbackElement||null)));let W=e.concat(c.slice(0,N+1)),J=()=>{let oe;return P?oe=L:U?oe=z:E.route.Component?oe=I.createElement(E.route.Component,null):E.route.element?oe=E.route.element:oe=x,I.createElement(LS,{match:E,routeContext:{outlet:x,matches:W,isDataRoute:n!=null},children:oe})};return n&&(E.route.ErrorBoundary||E.route.errorElement||N===0)?I.createElement(mx,{location:n.location,revalidation:n.revalidation,component:L,error:P,children:J(),routeContext:{outlet:null,matches:W,isDataRoute:!0},onError:y}):J()},null)}function Cm(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function US(i){let e=I.useContext(Go);return wt(e,Cm(i)),e}function BS(i){let e=I.useContext(ef);return wt(e,Cm(i)),e}function HS(i){let e=I.useContext(ri);return wt(e,Cm(i)),e}function Im(i){let e=HS(i),n=e.matches[e.matches.length-1];return wt(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function qS(){return Im("useRouteId")}function FS(){let i=I.useContext(Rm),e=BS("useRouteError"),n=Im("useRouteError");return i!==void 0?i:e.errors?.[n]}function GS(){let{router:i}=US("useNavigate"),e=Im("useNavigate"),n=I.useRef(!1);return hx(()=>{n.current=!0}),I.useCallback(async(o,c={})=>{ca(n.current,fx),n.current&&(typeof o=="number"?await i.navigate(o):await i.navigate(o,{fromRouteId:e,...c}))},[i,e])}var vv={};function gx(i,e,n){!e&&!vv[i]&&(vv[i]=!0,ca(!1,n))}I.memo(KS);function KS({routes:i,future:e,state:n,onError:s}){return px(i,void 0,n,s,e)}function yx({to:i,replace:e,state:n,relative:s}){wt(Ko(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=I.useContext(Qn);ca(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=I.useContext(ri),{pathname:d}=Ps(),m=Ui(),g=Nm(i,wm(c),d,s==="path"),y=JSON.stringify(g);return I.useEffect(()=>{m(JSON.parse(y),{replace:e,state:n,relative:s})},[m,y,s,e,n]),null}function Xa(i){wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function QS({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:c=!1,unstable_useTransitions:d}){wt(!Ko(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=i.replace(/^\/*/,"/"),g=I.useMemo(()=>({basename:m,navigator:o,static:c,unstable_useTransitions:d,future:{}}),[m,o,c,d]);typeof n=="string"&&(n=Rr(n));let{pathname:y="/",search:x="",hash:E="",state:N=null,key:P="default"}=n,U=I.useMemo(()=>{let L=Mi(y,m);return L==null?null:{location:{pathname:L,search:x,hash:E,state:N,key:P},navigationType:s}},[m,y,x,E,N,P,s]);return ca(U!=null,`<Router basename="${m}"> is not able to match the URL "${y}${x}${E}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:I.createElement(Qn.Provider,{value:g},I.createElement(Sc.Provider,{children:e,value:U}))}function $S({children:i,location:e}){return kS(Yp(i),e)}function Yp(i,e=[]){let n=[];return I.Children.forEach(i,(s,o)=>{if(!I.isValidElement(s))return;let c=[...e,o];if(s.type===I.Fragment){n.push.apply(n,Yp(s.props.children,c));return}wt(s.type===Xa,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=Yp(s.props.children,c)),n.push(d)}),n}var _d="get",xd="application/x-www-form-urlencoded";function tf(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function YS(i){return tf(i)&&i.tagName.toLowerCase()==="button"}function XS(i){return tf(i)&&i.tagName.toLowerCase()==="form"}function JS(i){return tf(i)&&i.tagName.toLowerCase()==="input"}function WS(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function ZS(i,e){return i.button===0&&(!e||e==="_self")&&!WS(i)}var fd=null;function ew(){if(fd===null)try{new FormData(document.createElement("form"),0),fd=!1}catch{fd=!0}return fd}var tw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kp(i){return i!=null&&!tw.has(i)?(ca(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xd}"`),null):i}function nw(i,e){let n,s,o,c,d;if(XS(i)){let m=i.getAttribute("action");s=m?Mi(m,e):null,n=i.getAttribute("method")||_d,o=kp(i.getAttribute("enctype"))||xd,c=new FormData(i)}else if(YS(i)||JS(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||m.getAttribute("action");if(s=g?Mi(g,e):null,n=i.getAttribute("formmethod")||m.getAttribute("method")||_d,o=kp(i.getAttribute("formenctype"))||kp(m.getAttribute("enctype"))||xd,c=new FormData(m,i),!ew()){let{name:y,type:x,value:E}=i;if(x==="image"){let N=y?`${y}.`:"";c.append(`${N}x`,"0"),c.append(`${N}y`,"0")}else y&&c.append(y,E)}}else{if(tf(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=_d,s=null,o=xd,d=i}return c&&o==="text/plain"&&(d=c,c=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:c,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Om(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function aw(i,e,n,s){let o=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${s}`:o.pathname=`${o.pathname}.${s}`:o.pathname==="/"?o.pathname=`_root.${s}`:e&&Mi(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${s}`,o}async function iw(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sw(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function rw(i,e,n){let s=await Promise.all(i.map(async o=>{let c=e.routes[o.route.id];if(c){let d=await iw(c,n);return d.links?d.links():[]}return[]}));return uw(s.flat(1).filter(sw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function _v(i,e,n,s,o,c){let d=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,m=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return c==="assets"?e.filter((g,y)=>d(g,y)||m(g,y)):c==="data"?e.filter((g,y)=>{let x=s.routes[g.route.id];if(!x||!x.hasLoader)return!1;if(d(g,y)||m(g,y))return!0;if(g.route.shouldRevalidate){let E=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function ow(i,e,{includeHydrateFallback:n}={}){return lw(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let c=[o.module];return o.clientActionModule&&(c=c.concat(o.clientActionModule)),o.clientLoaderModule&&(c=c.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(c=c.concat(o.hydrateFallbackModule)),o.imports&&(c=c.concat(o.imports)),c}).flat(1))}function lw(i){return[...new Set(i)]}function cw(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function uw(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let c=JSON.stringify(cw(o));return n.has(c)||(n.add(c),s.push({key:c,link:o})),s},[])}function bx(){let i=I.useContext(Go);return Om(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function dw(){let i=I.useContext(ef);return Om(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Dm=I.createContext(void 0);Dm.displayName="FrameworkContext";function vx(){let i=I.useContext(Dm);return Om(i,"You must render this element inside a <HydratedRouter> element"),i}function fw(i,e){let n=I.useContext(Dm),[s,o]=I.useState(!1),[c,d]=I.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:y,onMouseLeave:x,onTouchStart:E}=e,N=I.useRef(null);I.useEffect(()=>{if(i==="render"&&d(!0),i==="viewport"){let L=W=>{W.forEach(J=>{d(J.isIntersecting)})},z=new IntersectionObserver(L,{threshold:.5});return N.current&&z.observe(N.current),()=>{z.disconnect()}}},[i]),I.useEffect(()=>{if(s){let L=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(L)}}},[s]);let P=()=>{o(!0)},U=()=>{o(!1),d(!1)};return n?i!=="intent"?[c,N,{}]:[c,N,{onFocus:tc(m,P),onBlur:tc(g,U),onMouseEnter:tc(y,P),onMouseLeave:tc(x,U),onTouchStart:tc(E,P)}]:[!1,N,{}]}function tc(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function hw({page:i,...e}){let{router:n}=bx(),s=I.useMemo(()=>ix(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?I.createElement(mw,{page:i,matches:s,...e}):null}function pw(i){let{manifest:e,routeModules:n}=vx(),[s,o]=I.useState([]);return I.useEffect(()=>{let c=!1;return rw(i,e,n).then(d=>{c||o(d)}),()=>{c=!0}},[i,e,n]),s}function mw({page:i,matches:e,...n}){let s=Ps(),{future:o,manifest:c,routeModules:d}=vx(),{basename:m}=bx(),{loaderData:g,matches:y}=dw(),x=I.useMemo(()=>_v(i,e,y,c,s,"data"),[i,e,y,c,s]),E=I.useMemo(()=>_v(i,e,y,c,s,"assets"),[i,e,y,c,s]),N=I.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let L=new Set,z=!1;if(e.forEach(J=>{let oe=c.routes[J.route.id];!oe||!oe.hasLoader||(!x.some(se=>se.route.id===J.route.id)&&J.route.id in g&&d[J.route.id]?.shouldRevalidate||oe.hasClientLoader?z=!0:L.add(J.route.id))}),L.size===0)return[];let W=aw(i,m,o.unstable_trailingSlashAwareDataRequests,"data");return z&&L.size>0&&W.searchParams.set("_routes",e.filter(J=>L.has(J.route.id)).map(J=>J.route.id).join(",")),[W.pathname+W.search]},[m,o.unstable_trailingSlashAwareDataRequests,g,s,c,x,e,i,d]),P=I.useMemo(()=>ow(E,c),[E,c]),U=pw(E);return I.createElement(I.Fragment,null,N.map(L=>I.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...n})),P.map(L=>I.createElement("link",{key:L,rel:"modulepreload",href:L,...n})),U.map(({key:L,link:z})=>I.createElement("link",{key:L,nonce:n.nonce,...z,crossOrigin:z.crossOrigin??n.crossOrigin})))}function gw(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var yw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yw&&(window.__reactRouterVersion="7.13.0")}catch{}function bw({basename:i,children:e,unstable_useTransitions:n,window:s}){let o=I.useRef();o.current==null&&(o.current=WT({window:s,v5Compat:!0}));let c=o.current,[d,m]=I.useState({action:c.action,location:c.location}),g=I.useCallback(y=>{n===!1?m(y):I.startTransition(()=>m(y))},[n]);return I.useLayoutEffect(()=>c.listen(g),[c,g]),I.createElement(QS,{basename:i,children:e,location:d.location,navigationType:d.action,navigator:c,unstable_useTransitions:n})}var _x=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xx=I.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:c,replace:d,state:m,target:g,to:y,preventScrollReset:x,viewTransition:E,unstable_defaultShouldRevalidate:N,...P},U){let{basename:L,unstable_useTransitions:z}=I.useContext(Qn),W=typeof y=="string"&&_x.test(y),J=lx(y,L);y=J.to;let oe=DS(y,{relative:o}),[se,le,me]=fw(s,P),C=Ew(y,{replace:d,state:m,target:g,preventScrollReset:x,relative:o,viewTransition:E,unstable_defaultShouldRevalidate:N,unstable_useTransitions:z});function R(k){e&&e(k),k.defaultPrevented||C(k)}let O=I.createElement("a",{...P,...me,href:J.absoluteURL||oe,onClick:J.isExternal||c?e:R,ref:gw(U,le),target:g,"data-discover":!W&&n==="render"?"true":void 0});return se&&!W?I.createElement(I.Fragment,null,O,I.createElement(hw,{page:oe})):O});xx.displayName="Link";var vw=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:c,to:d,viewTransition:m,children:g,...y},x){let E=wc(d,{relative:y.relative}),N=Ps(),P=I.useContext(ef),{navigator:U,basename:L}=I.useContext(Qn),z=P!=null&&Nw(E)&&m===!0,W=U.encodeLocation?U.encodeLocation(E).pathname:E.pathname,J=N.pathname,oe=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;n||(J=J.toLowerCase(),oe=oe?oe.toLowerCase():null,W=W.toLowerCase()),oe&&L&&(oe=Mi(oe,L)||oe);const se=W!=="/"&&W.endsWith("/")?W.length-1:W.length;let le=J===W||!o&&J.startsWith(W)&&J.charAt(se)==="/",me=oe!=null&&(oe===W||!o&&oe.startsWith(W)&&oe.charAt(W.length)==="/"),C={isActive:le,isPending:me,isTransitioning:z},R=le?e:void 0,O;typeof s=="function"?O=s(C):O=[s,le?"active":null,me?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let k=typeof c=="function"?c(C):c;return I.createElement(xx,{...y,"aria-current":R,className:O,ref:x,style:k,to:d,viewTransition:m},typeof g=="function"?g(C):g)});vw.displayName="NavLink";var _w=I.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:c,method:d=_d,action:m,onSubmit:g,relative:y,preventScrollReset:x,viewTransition:E,unstable_defaultShouldRevalidate:N,...P},U)=>{let{unstable_useTransitions:L}=I.useContext(Qn),z=Sw(),W=ww(m,{relative:y}),J=d.toLowerCase()==="get"?"get":"post",oe=typeof m=="string"&&_x.test(m),se=le=>{if(g&&g(le),le.defaultPrevented)return;le.preventDefault();let me=le.nativeEvent.submitter,C=me?.getAttribute("formmethod")||d,R=()=>z(me||le.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:o,state:c,relative:y,preventScrollReset:x,viewTransition:E,unstable_defaultShouldRevalidate:N});L&&n!==!1?I.startTransition(()=>R()):R()};return I.createElement("form",{ref:U,method:J,action:W,onSubmit:s?g:se,...P,"data-discover":!oe&&i==="render"?"true":void 0})});_w.displayName="Form";function xw(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ex(i){let e=I.useContext(Go);return wt(e,xw(i)),e}function Ew(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:m,unstable_useTransitions:g}={}){let y=Ui(),x=Ps(),E=wc(i,{relative:c});return I.useCallback(N=>{if(ZS(N,e)){N.preventDefault();let P=n!==void 0?n:gc(x)===gc(E),U=()=>y(i,{replace:P,state:s,preventScrollReset:o,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:m});g?I.startTransition(()=>U()):U()}},[x,y,E,n,s,e,i,o,c,d,m,g])}var Aw=0,Tw=()=>`__${String(++Aw)}__`;function Sw(){let{router:i}=Ex("useSubmit"),{basename:e}=I.useContext(Qn),n=qS(),s=i.fetch,o=i.navigate;return I.useCallback(async(c,d={})=>{let{action:m,method:g,encType:y,formData:x,body:E}=nw(c,e);if(d.navigate===!1){let N=d.fetcherKey||Tw();await s(N,n,d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:x,body:E,formMethod:d.method||g,formEncType:d.encType||y,flushSync:d.flushSync})}else await o(d.action||m,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:x,body:E,formMethod:d.method||g,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[s,o,e,n])}function ww(i,{relative:e}={}){let{basename:n}=I.useContext(Qn),s=I.useContext(ri);wt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),c={...wc(i||".",{relative:e})},d=Ps();if(i==null){c.search=d.search;let m=new URLSearchParams(c.search),g=m.getAll("index");if(g.some(x=>x==="")){m.delete("index"),g.filter(E=>E).forEach(E=>m.append("index",E));let x=m.toString();c.search=x?`?${x}`:""}}return(!i||i===".")&&o.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Ii([n,c.pathname])),gc(c)}function Nw(i,{relative:e}={}){let n=I.useContext(ux);wt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Ex("useViewTransitionState"),o=wc(i,{relative:e});if(!n.isTransitioning)return!1;let c=Mi(n.currentLocation.pathname,s)||n.currentLocation.pathname,d=Mi(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Md(o.pathname,d)!=null||Md(o.pathname,c)!=null}const Rw=()=>{};var xv={};const Ax=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Cw=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],d=i[n++],m=i[n++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},Tx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const c=i[o],d=o+1<i.length,m=d?i[o+1]:0,g=o+2<i.length,y=g?i[o+2]:0,x=c>>2,E=(c&3)<<4|m>>4;let N=(m&15)<<2|y>>6,P=y&63;g||(P=64,d||(N=64)),s.push(n[x],n[E],n[N],n[P])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Ax(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):Cw(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],m=o<i.length?n[i.charAt(o)]:0;++o;const y=o<i.length?n[i.charAt(o)]:64;++o;const E=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||m==null||y==null||E==null)throw new Iw;const N=c<<2|m>>4;if(s.push(N),y!==64){const P=m<<4&240|y>>2;if(s.push(P),E!==64){const U=y<<6&192|E;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Iw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ow=function(i){const e=Ax(i);return Tx.encodeByteArray(e,!0)},kd=function(i){return Ow(i).replace(/\./g,"")},Sx=function(i){try{return Tx.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Dw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Mw=()=>Dw().__FIREBASE_DEFAULTS__,kw=()=>{if(typeof process>"u"||typeof xv>"u")return;const i=xv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},jw=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Sx(i[1]);return e&&JSON.parse(e)},nf=()=>{try{return Rw()||Mw()||kw()||jw()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},wx=i=>nf()?.emulatorHosts?.[i],Nx=i=>{const e=wx(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Rx=()=>nf()?.config,Cx=i=>nf()?.[`_${i}`];class Pw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Cr(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Mm(i){return(await fetch(i,{credentials:"include"})).ok}function Ix(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[kd(JSON.stringify(n)),kd(JSON.stringify(d)),""].join(".")}const cc={};function Vw(){const i={prod:[],emulator:[]};for(const e of Object.keys(cc))cc[e]?i.emulator.push(e):i.prod.push(e);return i}function Lw(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Ev=!1;function km(i,e){if(typeof window>"u"||typeof document>"u"||!Cr(window.location.host)||cc[i]===e||cc[i]||Ev)return;cc[i]=e;function n(N){return`__firebase__banner__${N}`}const s="__firebase__banner",c=Vw().prod.length>0;function d(){const N=document.getElementById(s);N&&N.remove()}function m(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function g(N,P){N.setAttribute("width","24"),N.setAttribute("id",P),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function y(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{Ev=!0,d()},N}function x(N,P){N.setAttribute("id",P),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function E(){const N=Lw(s),P=n("text"),U=document.getElementById(P)||document.createElement("span"),L=n("learnmore"),z=document.getElementById(L)||document.createElement("a"),W=n("preprendIcon"),J=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const oe=N.element;m(oe),x(z,L);const se=y();g(J,W),oe.append(J,U,z,se),document.body.appendChild(oe)}c?(U.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function Uw(){const i=nf()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Hw(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function qw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Fw(){const i=vn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Gw(){return!Uw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kw(){try{return typeof indexedDB=="object"}catch{return!1}}function Qw(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const $w="FirebaseError";class oi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=$w,Object.setPrototypeOf(this,oi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nc.prototype.create)}}class Nc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?Yw(c,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new oi(o,m,s)}}function Yw(i,e){return i.replace(Xw,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const Xw=/\{\$([^}]+)}/g;function Jw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function ki(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=i[o],d=e[o];if(Av(c)&&Av(d)){if(!ki(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Av(i){return i!==null&&typeof i=="object"}function Rc(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ac(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,c]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function ic(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function Ww(i,e){const n=new Zw(i,e);return n.subscribe.bind(n)}class Zw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");eN(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=jp),o.error===void 0&&(o.error=jp),o.complete===void 0&&(o.complete=jp);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eN(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function jp(){}function zt(i){return i&&i._delegate?i._delegate:i}class Cs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const yr="[DEFAULT]";class tN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Pw;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aN(e))try{this.getOrInitializeService({instanceIdentifier:yr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yr){return this.instances.has(e)}getOptions(e=yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:nN(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=yr){return this.component?this.component.multipleInstances?e:yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nN(i){return i===yr?void 0:i}function aN(i){return i.instantiationMode==="EAGER"}class iN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Xe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Xe||(Xe={}));const sN={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},rN=Xe.INFO,oN={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},lN=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=oN[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jm{constructor(e){this.name=e,this._logLevel=rN,this._logHandler=lN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const cN=(i,e)=>e.some(n=>i instanceof n);let Tv,Sv;function uN(){return Tv||(Tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dN(){return Sv||(Sv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ox=new WeakMap,Xp=new WeakMap,Dx=new WeakMap,Pp=new WeakMap,Pm=new WeakMap;function fN(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{n(Ss(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Ox.set(n,i)}).catch(()=>{}),Pm.set(e,i),e}function hN(i){if(Xp.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});Xp.set(i,e)}let Jp={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return Xp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Dx.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ss(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function pN(i){Jp=i(Jp)}function mN(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Vp(this),e,...n);return Dx.set(s,e.sort?e.sort():[e]),Ss(s)}:dN().includes(i)?function(...e){return i.apply(Vp(this),e),Ss(Ox.get(this))}:function(...e){return Ss(i.apply(Vp(this),e))}}function gN(i){return typeof i=="function"?mN(i):(i instanceof IDBTransaction&&hN(i),cN(i,uN())?new Proxy(i,Jp):i)}function Ss(i){if(i instanceof IDBRequest)return fN(i);if(Pp.has(i))return Pp.get(i);const e=gN(i);return e!==i&&(Pp.set(i,e),Pm.set(e,i)),e}const Vp=i=>Pm.get(i);function yN(i,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(i,e),m=Ss(d);return s&&d.addEventListener("upgradeneeded",g=>{s(Ss(d.result),g.oldVersion,g.newVersion,Ss(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const bN=["get","getKey","getAll","getAllKeys","count"],vN=["put","add","delete","clear"],Lp=new Map;function wv(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Lp.get(e))return Lp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=vN.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||bN.includes(n)))return;const c=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&g.done]))[0]};return Lp.set(e,c),c}pN(i=>({...i,get:(e,n,s)=>wv(e,n)||i.get(e,n,s),has:(e,n)=>!!wv(e,n)||i.has(e,n)}));class _N{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xN(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function xN(i){return i.getComponent()?.type==="VERSION"}const Wp="@firebase/app",Nv="0.14.7";const ji=new jm("@firebase/app"),EN="@firebase/app-compat",AN="@firebase/analytics-compat",TN="@firebase/analytics",SN="@firebase/app-check-compat",wN="@firebase/app-check",NN="@firebase/auth",RN="@firebase/auth-compat",CN="@firebase/database",IN="@firebase/data-connect",ON="@firebase/database-compat",DN="@firebase/functions",MN="@firebase/functions-compat",kN="@firebase/installations",jN="@firebase/installations-compat",PN="@firebase/messaging",VN="@firebase/messaging-compat",LN="@firebase/performance",zN="@firebase/performance-compat",UN="@firebase/remote-config",BN="@firebase/remote-config-compat",HN="@firebase/storage",qN="@firebase/storage-compat",FN="@firebase/firestore",GN="@firebase/ai",KN="@firebase/firestore-compat",QN="firebase",$N="12.8.0";const Zp="[DEFAULT]",YN={[Wp]:"fire-core",[EN]:"fire-core-compat",[TN]:"fire-analytics",[AN]:"fire-analytics-compat",[wN]:"fire-app-check",[SN]:"fire-app-check-compat",[NN]:"fire-auth",[RN]:"fire-auth-compat",[CN]:"fire-rtdb",[IN]:"fire-data-connect",[ON]:"fire-rtdb-compat",[DN]:"fire-fn",[MN]:"fire-fn-compat",[kN]:"fire-iid",[jN]:"fire-iid-compat",[PN]:"fire-fcm",[VN]:"fire-fcm-compat",[LN]:"fire-perf",[zN]:"fire-perf-compat",[UN]:"fire-rc",[BN]:"fire-rc-compat",[HN]:"fire-gcs",[qN]:"fire-gcs-compat",[FN]:"fire-fst",[KN]:"fire-fst-compat",[GN]:"fire-vertex","fire-js":"fire-js",[QN]:"fire-js-all"};const ko=new Map,em=new Map,tm=new Map;function Rv(i,e){try{i.container.addComponent(e)}catch(n){ji.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Er(i){const e=i.name;if(tm.has(e))return ji.debug(`There were multiple attempts to register component ${e}.`),!1;tm.set(e,i);for(const n of ko.values())Rv(n,i);for(const n of em.values())Rv(n,i);return!0}function af(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Gn(i){return i==null?!1:i.settings!==void 0}const XN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ws=new Nc("app","Firebase",XN);class JN{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ws.create("app-deleted",{appName:this._name})}}const Ir=$N;function Vm(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:Zp,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ws.create("bad-app-name",{appName:String(o)});if(n||(n=Rx()),!n)throw ws.create("no-options");const c=ko.get(o);if(c){if(ki(n,c.options)&&ki(s,c.config))return c;throw ws.create("duplicate-app",{appName:o})}const d=new iN(o);for(const g of tm.values())d.addComponent(g);const m=new JN(n,s,d);return ko.set(o,m),m}function Lm(i=Zp){const e=ko.get(i);if(!e&&i===Zp&&Rx())return Vm();if(!e)throw ws.create("no-app",{appName:i});return e}async function WN(i){let e=!1;const n=i.name;ko.has(n)?(e=!0,ko.delete(n)):em.has(n)&&i.decRefCount()<=0&&(em.delete(n),e=!0),e&&(await Promise.all(i.container.getProviders().map(s=>s.delete())),i.isDeleted=!0)}function Wa(i,e,n){let s=YN[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ji.warn(d.join(" "));return}Er(new Cs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const ZN="firebase-heartbeat-database",eR=1,yc="firebase-heartbeat-store";let zp=null;function Mx(){return zp||(zp=yN(ZN,eR,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(yc)}catch(n){console.warn(n)}}}}).catch(i=>{throw ws.create("idb-open",{originalErrorMessage:i.message})})),zp}async function tR(i){try{const n=(await Mx()).transaction(yc),s=await n.objectStore(yc).get(kx(i));return await n.done,s}catch(e){if(e instanceof oi)ji.warn(e.message);else{const n=ws.create("idb-get",{originalErrorMessage:e?.message});ji.warn(n.message)}}}async function Cv(i,e){try{const s=(await Mx()).transaction(yc,"readwrite");await s.objectStore(yc).put(e,kx(i)),await s.done}catch(n){if(n instanceof oi)ji.warn(n.message);else{const s=ws.create("idb-set",{originalErrorMessage:n?.message});ji.warn(s.message)}}}function kx(i){return`${i.name}!${i.options.appId}`}const nR=1024,aR=30;class iR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rR(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Iv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>aR){const o=oR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ji.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Iv(),{heartbeatsToSend:n,unsentEntries:s}=sR(this._heartbeatsCache.heartbeats),o=kd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return ji.warn(e),""}}}function Iv(){return new Date().toISOString().substring(0,10)}function sR(i,e=nR){const n=[];let s=i.slice();for(const o of i){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),Ov(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Ov(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class rR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kw()?Qw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Cv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Cv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ov(i){return kd(JSON.stringify({version:2,heartbeats:i})).length}function oR(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function lR(i){Er(new Cs("platform-logger",e=>new _N(e),"PRIVATE")),Er(new Cs("heartbeat",e=>new iR(e),"PRIVATE")),Wa(Wp,Nv,i),Wa(Wp,Nv,"esm2020"),Wa("fire-js","")}lR("");var cR="firebase",uR="12.8.0";Wa(cR,uR,"app");function jx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dR=jx,Px=new Nc("auth","Firebase",jx());const jd=new jm("@firebase/auth");function fR(i,...e){jd.logLevel<=Xe.WARN&&jd.warn(`Auth (${Ir}): ${i}`,...e)}function Ed(i,...e){jd.logLevel<=Xe.ERROR&&jd.error(`Auth (${Ir}): ${i}`,...e)}function Na(i,...e){throw zm(i,...e)}function Za(i,...e){return zm(i,...e)}function Vx(i,e,n){const s={...dR(),[e]:n};return new Nc("auth","Firebase",s).create(e,{appName:i.name})}function Oi(i){return Vx(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zm(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return Px.create(i,...e)}function Me(i,e,...n){if(!i)throw zm(e,...n)}function Ri(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Ed(e),new Error(e)}function Pi(i,e){i||Ri(e)}function nm(){return typeof self<"u"&&self.location?.href||""}function hR(){return Dv()==="http:"||Dv()==="https:"}function Dv(){return typeof self<"u"&&self.location?.protocol||null}function pR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hR()||Hw()||"connection"in navigator)?navigator.onLine:!0}function mR(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Cc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pi(n>e,"Short delay should be less than long delay!"),this.isMobile=zw()||qw()}get(){return pR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Um(i,e){Pi(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Lx{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const yR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bR=new Cc(3e4,6e4);function Vs(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Bi(i,e,n,s,o={}){return zx(i,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const m=Rc({key:i.config.apiKey,...d}).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:g,...c};return Bw()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&Cr(i.emulatorConfig.host)&&(y.credentials="include"),Lx.fetch()(await Ux(i,i.config.apiHost,n,m),y)})}async function zx(i,e,n){i._canInitEmulator=!1;const s={...gR,...e};try{const o=new _R(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw hd(i,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw hd(i,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw hd(i,"email-already-in-use",d);if(g==="USER_DISABLED")throw hd(i,"user-disabled",d);const x=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Vx(i,x,y);Na(i,x)}}catch(o){if(o instanceof oi)throw o;Na(i,"network-request-failed",{message:String(o)})}}async function Ic(i,e,n,s,o={}){const c=await Bi(i,e,n,s,o);return"mfaPendingCredential"in c&&Na(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function Ux(i,e,n,s){const o=`${e}${n}?${s}`,c=i,d=c.config.emulator?Um(i.config,o):`${i.config.apiScheme}://${o}`;return yR.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function vR(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _R{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Za(this.auth,"network-request-failed")),bR.get())})}}function hd(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Za(i,e,s);return o.customData._tokenResponse=n,o}function Mv(i){return i!==void 0&&i.enterprise!==void 0}class xR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return vR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ER(i,e){return Bi(i,"GET","/v2/recaptchaConfig",Vs(i,e))}async function AR(i,e){return Bi(i,"POST","/v1/accounts:delete",e)}async function Pd(i,e){return Bi(i,"POST","/v1/accounts:lookup",e)}function uc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TR(i,e=!1){const n=zt(i),s=await n.getIdToken(e),o=Bm(s);Me(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:s,authTime:uc(Up(o.auth_time)),issuedAtTime:uc(Up(o.iat)),expirationTime:uc(Up(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Up(i){return Number(i)*1e3}function Bm(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return Ed("JWT malformed, contained fewer than 3 sections"),null;try{const o=Sx(n);return o?JSON.parse(o):(Ed("Failed to decode base64 JWT payload"),null)}catch(o){return Ed("Caught error parsing JWT payload as JSON",o?.toString()),null}}function kv(i){const e=Bm(i);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function jo(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof oi&&SR(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function SR({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class wR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class am{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uc(this.lastLoginAt),this.creationTime=uc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Vd(i){const e=i.auth,n=await i.getIdToken(),s=await jo(i,Pd(e,{idToken:n}));Me(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const c=o.providerUserInfo?.length?Bx(o.providerUserInfo):[],d=RR(i.providerData,c),m=i.isAnonymous,g=!(i.email&&o.passwordHash)&&!d?.length,y=m?g:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new am(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,x)}async function NR(i){const e=zt(i);await Vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RR(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Bx(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function CR(i,e){const n=await zx(i,{},async()=>{const s=Rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,d=await Ux(i,o,"/v1/token",`key=${c}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return i.emulatorConfig&&Cr(i.emulatorConfig.host)&&(g.credentials="include"),Lx.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function IR(i,e){return Bi(i,"POST","/v2/accounts:revokeToken",Vs(i,e))}class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=kv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await CR(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,d=new Ro;return s&&(Me(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Me(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Me(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return Ri("not implemented")}}function vs(i,e){Me(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Aa{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new wR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new am(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await jo(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return TR(this,e)}reload(){return NR(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Aa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Vd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gn(this.auth.app))return Promise.reject(Oi(this.auth));const e=await this.getIdToken();return await jo(this,AR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:E,emailVerified:N,isAnonymous:P,providerData:U,stsTokenManager:L}=n;Me(E&&L,e,"internal-error");const z=Ro.fromJSON(this.name,L);Me(typeof E=="string",e,"internal-error"),vs(s,e.name),vs(o,e.name),Me(typeof N=="boolean",e,"internal-error"),Me(typeof P=="boolean",e,"internal-error"),vs(c,e.name),vs(d,e.name),vs(m,e.name),vs(g,e.name),vs(y,e.name),vs(x,e.name);const W=new Aa({uid:E,auth:e,email:o,emailVerified:N,displayName:s,isAnonymous:P,photoURL:d,phoneNumber:c,tenantId:m,stsTokenManager:z,createdAt:y,lastLoginAt:x});return U&&Array.isArray(U)&&(W.providerData=U.map(J=>({...J}))),g&&(W._redirectEventId=g),W}static async _fromIdTokenResponse(e,n,s=!1){const o=new Ro;o.updateFromServerResponse(n);const c=new Aa({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Vd(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Me(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?Bx(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,m=new Ro;m.updateFromIdToken(s);const g=new Aa({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new am(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,y),g}}const jv=new Map;function Ci(i){Pi(i instanceof Function,"Expected a class definition");let e=jv.get(i);return e?(Pi(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,jv.set(i,e),e)}class Hx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Hx.type="NONE";const Pv=Hx;function Ad(i,e,n){return`firebase:${i}:${e}:${n}`}class Co{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=Ad(this.userKey,o.apiKey,c),this.fullPersistenceKey=Ad("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Pd(this.auth,{idToken:e}).catch(()=>{});return n?Aa._fromGetAccountInfoResponse(this.auth,n,e):null}return Aa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Co(Ci(Pv),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=o[0]||Ci(Pv);const d=Ad(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const x=await y._get(d);if(x){let E;if(typeof x=="string"){const N=await Pd(e,{idToken:x}).catch(()=>{});if(!N)break;E=await Aa._fromGetAccountInfoResponse(e,N,x)}else E=Aa._fromJSON(e,x);y!==c&&(m=E),c=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Co(c,e,s):(c=g[0],m&&await c._set(d,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(d)}catch{}})),new Co(c,e,s))}}function Vv(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Kx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($x(e))return"Blackberry";if(Yx(e))return"Webos";if(Fx(e))return"Safari";if((e.includes("chrome/")||Gx(e))&&!e.includes("edge/"))return"Chrome";if(Qx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function qx(i=vn()){return/firefox\//i.test(i)}function Fx(i=vn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Gx(i=vn()){return/crios\//i.test(i)}function Kx(i=vn()){return/iemobile/i.test(i)}function Qx(i=vn()){return/android/i.test(i)}function $x(i=vn()){return/blackberry/i.test(i)}function Yx(i=vn()){return/webos/i.test(i)}function Hm(i=vn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function OR(i=vn()){return Hm(i)&&!!window.navigator?.standalone}function DR(){return Fw()&&document.documentMode===10}function Xx(i=vn()){return Hm(i)||Qx(i)||Yx(i)||$x(i)||/windows phone/i.test(i)||Kx(i)}function Jx(i,e=[]){let n;switch(i){case"Browser":n=Vv(vn());break;case"Worker":n=`${Vv(vn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ir}/${s}`}class MR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,m)=>{try{const g=e(c);d(g)}catch(g){m(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function kR(i,e={}){return Bi(i,"GET","/v2/passwordPolicy",Vs(i,e))}const jR=6;class PR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??jR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class VR{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lv(this),this.idTokenSubscription=new Lv(this),this.beforeStateQueue=new MR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Px,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ci(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Co.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Pd(this,{idToken:e}),s=await Aa._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Gn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gn(this.app))return Promise.reject(Oi(this));const n=e?zt(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gn(this.app)?Promise.reject(Oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gn(this.app)?Promise.reject(Oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kR(this),n=new PR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await IR(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ci(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await Co.create(this,[Ci(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Jx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&fR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Or(i){return zt(i)}class Lv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ww(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let sf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LR(i){sf=i}function Wx(i){return sf.loadJS(i)}function zR(){return sf.recaptchaEnterpriseScript}function UR(){return sf.gapiScript}function BR(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class HR{constructor(){this.enterprise=new qR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class qR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const FR="recaptcha-enterprise",Zx="NO_RECAPTCHA";class GR{constructor(e){this.type=FR,this.auth=Or(e)}async verify(e="verify",n=!1){async function s(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,m)=>{ER(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new xR(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,d(y.siteKey)}}).catch(g=>{m(g)})})}function o(c,d,m){const g=window.grecaptcha;Mv(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{d(y)}).catch(()=>{d(Zx)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new HR().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{s(this.auth).then(m=>{if(!n&&Mv(window.grecaptcha))o(m,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=zR();g.length!==0&&(g+=m),Wx(g).then(()=>{o(m,c,d)}).catch(y=>{d(y)})}}).catch(m=>{d(m)})})}}async function zv(i,e,n,s=!1,o=!1){const c=new GR(i);let d;if(o)d=Zx;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function im(i,e,n,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await zv(i,e,n,n==="getOobCode");return s(i,c)}else return s(i,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await zv(i,e,n,n==="getOobCode");return s(i,d)}else return Promise.reject(c)})}function KR(i,e){const n=af(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(ki(c,e??{}))return o;Na(o,"already-initialized")}return n.initialize({options:e})}function QR(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Ci);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function qm(i,e,n){const s=Or(i);Me(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!!n?.disableWarnings,c=eE(e),{host:d,port:m}=$R(e),g=m===null?"":`:${m}`,y={url:`${c}//${d}${g}/`},x=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Me(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Me(ki(y,s.config.emulator)&&ki(x,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=x,s.settings.appVerificationDisabledForTesting=!0,Cr(d)?(Mm(`${c}//${d}${g}`),km("Auth",!0)):o||YR()}function eE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function $R(i){const e=eE(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:Uv(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:Uv(d)}}}function Uv(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function YR(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class Fm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ri("not implemented")}_getIdTokenResponse(e){return Ri("not implemented")}_linkToIdToken(e,n){return Ri("not implemented")}_getReauthenticationResolver(e){return Ri("not implemented")}}async function XR(i,e){return Bi(i,"POST","/v1/accounts:update",e)}async function JR(i,e){return Bi(i,"POST","/v1/accounts:signUp",e)}async function WR(i,e){return Ic(i,"POST","/v1/accounts:signInWithPassword",Vs(i,e))}async function ZR(i,e){return Ic(i,"POST","/v1/accounts:signInWithEmailLink",Vs(i,e))}async function eC(i,e){return Ic(i,"POST","/v1/accounts:signInWithEmailLink",Vs(i,e))}class bc extends Fm{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new bc(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new bc(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,n,"signInWithPassword",WR);case"emailLink":return ZR(e,{email:this._email,oobCode:this._password});default:Na(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,s,"signUpPassword",JR);case"emailLink":return eC(e,{idToken:n,email:this._email,oobCode:this._password});default:Na(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Io(i,e){return Ic(i,"POST","/v1/accounts:signInWithIdp",Vs(i,e))}const tC="http://localhost";class Ar extends Fm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ar(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Na("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=n;if(!s||!o)return null;const d=new Ar(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Io(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Io(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Io(e,n)}buildRequest(){const e={requestUri:tC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rc(n)}return e}}function nC(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aC(i){const e=ac(ic(i)).link,n=e?ac(ic(e)).deep_link_id:null,s=ac(ic(i)).deep_link_id;return(s?ac(ic(s)).link:null)||s||n||e||i}class Gm{constructor(e){const n=ac(ic(e)),s=n.apiKey??null,o=n.oobCode??null,c=nC(n.mode??null);Me(s&&o&&c,"argument-error"),this.apiKey=s,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=aC(e);try{return new Gm(n)}catch{return null}}}class Qo{constructor(){this.providerId=Qo.PROVIDER_ID}static credential(e,n){return bc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Gm.parseLink(n);return Me(s,"argument-error"),bc._fromEmailAndCode(e,s.code,s.tenantId)}}Qo.PROVIDER_ID="password";Qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class tE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Oc extends tE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _s extends Oc{constructor(){super("facebook.com")}static credential(e){return Ar._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.FACEBOOK_SIGN_IN_METHOD="facebook.com";_s.PROVIDER_ID="facebook.com";class xs extends Oc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ar._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return xs.credential(n,s)}catch{return null}}}xs.GOOGLE_SIGN_IN_METHOD="google.com";xs.PROVIDER_ID="google.com";class Es extends Oc{constructor(){super("github.com")}static credential(e){return Ar._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.GITHUB_SIGN_IN_METHOD="github.com";Es.PROVIDER_ID="github.com";class As extends Oc{constructor(){super("twitter.com")}static credential(e,n){return Ar._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return As.credential(n,s)}catch{return null}}}As.TWITTER_SIGN_IN_METHOD="twitter.com";As.PROVIDER_ID="twitter.com";async function iC(i,e){return Ic(i,"POST","/v1/accounts:signUp",Vs(i,e))}class Tr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await Aa._fromIdTokenResponse(e,s,o),d=Bv(s);return new Tr({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=Bv(s);return new Tr({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function Bv(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class Ld extends oi{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Ld.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Ld(e,n,s,o)}}function nE(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Ld._fromErrorAndOperation(i,c,e,s):c})}async function sC(i,e,n=!1){const s=await jo(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Tr._forOperation(i,"link",s)}async function rC(i,e,n=!1){const{auth:s}=i;if(Gn(s.app))return Promise.reject(Oi(s));const o="reauthenticate";try{const c=await jo(i,nE(s,o,e,i),n);Me(c.idToken,s,"internal-error");const d=Bm(c.idToken);Me(d,s,"internal-error");const{sub:m}=d;return Me(i.uid===m,s,"user-mismatch"),Tr._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Na(s,"user-mismatch"),c}}async function aE(i,e,n=!1){if(Gn(i.app))return Promise.reject(Oi(i));const s="signIn",o=await nE(i,s,e),c=await Tr._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(c.user),c}async function oC(i,e){return aE(Or(i),e)}async function iE(i){const e=Or(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lC(i,e,n){if(Gn(i.app))return Promise.reject(Oi(i));const s=Or(i),d=await im(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&iE(i),g}),m=await Tr._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function sE(i,e,n){return Gn(i.app)?Promise.reject(Oi(i)):oC(zt(i),Qo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&iE(i),s})}function cC(i,e){return uC(zt(i),null,e)}async function uC(i,e,n){const{auth:s}=i,c={idToken:await i.getIdToken(),returnSecureToken:!0};n&&(c.password=n);const d=await jo(i,XR(s,c));await i._updateTokensIfNecessary(d,!0)}function dC(i,e,n,s){return zt(i).onIdTokenChanged(e,n,s)}function fC(i,e,n){return zt(i).beforeAuthStateChanged(e,n)}function rf(i,e,n,s){return zt(i).onAuthStateChanged(e,n,s)}function hC(i){return zt(i).signOut()}const zd="__sak";class rE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zd,"1"),this.storage.removeItem(zd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const pC=1e3,mC=10;class oE extends rE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);DR()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,mC):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},pC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}oE.type="LOCAL";const gC=oE;class lE extends rE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}lE.type="SESSION";const cE=lE;function yC(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class of{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new of(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async y=>y(n.origin,c)),g=await yC(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}of.receivers=[];function Km(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class bC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((m,g)=>{const y=Km("",20);o.port1.start();const x=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(E){const N=E;if(N.data.eventId===y)switch(N.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(N.data.response);break;default:clearTimeout(x),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function ei(){return window}function vC(i){ei().location.href=i}function uE(){return typeof ei().WorkerGlobalScope<"u"&&typeof ei().importScripts=="function"}async function _C(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xC(){return navigator?.serviceWorker?.controller||null}function EC(){return uE()?self:null}const dE="firebaseLocalStorageDb",AC=1,Ud="firebaseLocalStorage",fE="fbase_key";class Dc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lf(i,e){return i.transaction([Ud],e?"readwrite":"readonly").objectStore(Ud)}function TC(){const i=indexedDB.deleteDatabase(dE);return new Dc(i).toPromise()}function sm(){const i=indexedDB.open(dE,AC);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Ud,{keyPath:fE})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Ud)?e(s):(s.close(),await TC(),e(await sm()))})})}async function Hv(i,e,n){const s=lf(i,!0).put({[fE]:e,value:n});return new Dc(s).toPromise()}async function SC(i,e){const n=lf(i,!1).get(e),s=await new Dc(n).toPromise();return s===void 0?null:s.value}function qv(i,e){const n=lf(i,!0).delete(e);return new Dc(n).toPromise()}const wC=800,NC=3;class hE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>NC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=of._getInstance(EC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _C(),!this.activeServiceWorker)return;this.sender=new bC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sm();return await Hv(e,zd,"1"),await qv(e,zd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Hv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>SC(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>qv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=lf(o,!1).getAll();return new Dc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hE.type="LOCAL";const RC=hE;new Cc(3e4,6e4);function CC(i,e){return e?Ci(e):(Me(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Qm extends Fm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Io(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Io(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Io(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function IC(i){return aE(i.auth,new Qm(i),i.bypassAuthState)}function OC(i){const{auth:e,user:n}=i;return Me(n,e,"internal-error"),rC(n,new Qm(i),i.bypassAuthState)}async function DC(i){const{auth:e,user:n}=i;return Me(n,e,"internal-error"),sC(n,new Qm(i),i.bypassAuthState)}class pE{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IC;case"linkViaPopup":case"linkViaRedirect":return DC;case"reauthViaPopup":case"reauthViaRedirect":return OC;default:Na(this.auth,"internal-error")}}resolve(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const MC=new Cc(2e3,1e4);class No extends pE{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,No.currentPopupAction&&No.currentPopupAction.cancel(),No.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Pi(this.filter.length===1,"Popup operations only handle one event");const e=Km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Za(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Za(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,No.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Za(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MC.get())};e()}}No.currentPopupAction=null;const kC="pendingRedirect",Td=new Map;class jC extends pE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Td.get(this.auth._key());if(!e){try{const s=await PC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Td.set(this.auth._key(),e)}return this.bypassAuthState||Td.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PC(i,e){const n=zC(e),s=LC(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function VC(i,e){Td.set(i._key(),e)}function LC(i){return Ci(i._redirectPersistence)}function zC(i){return Ad(kC,i.config.apiKey,i.name)}async function UC(i,e,n=!1){if(Gn(i.app))return Promise.reject(Oi(i));const s=Or(i),o=CC(s,e),d=await new jC(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const BC=600*1e3;class HC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!mE(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Za(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fv(e))}saveEventToCache(e){this.cachedEventUids.add(Fv(e)),this.lastProcessedEventTime=Date.now()}}function Fv(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function mE({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function qC(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mE(i);default:return!1}}async function FC(i,e={}){return Bi(i,"GET","/v1/projects",e)}const GC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KC=/^https?/;async function QC(i){if(i.config.emulator)return;const{authorizedDomains:e}=await FC(i);for(const n of e)try{if($C(n))return}catch{}Na(i,"unauthorized-domain")}function $C(i){const e=nm(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!KC.test(n))return!1;if(GC.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const YC=new Cc(3e4,6e4);function Gv(){const i=ei().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function XC(i){return new Promise((e,n)=>{function s(){Gv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gv(),n(Za(i,"network-request-failed"))},timeout:YC.get()})}if(ei().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ei().gapi?.load)s();else{const o=BR("iframefcb");return ei()[o]=()=>{gapi.load?s():n(Za(i,"network-request-failed"))},Wx(`${UR()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw Sd=null,e})}let Sd=null;function JC(i){return Sd=Sd||XC(i),Sd}const WC=new Cc(5e3,15e3),ZC="__/auth/iframe",e2="emulator/auth/iframe",t2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},n2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a2(i){const e=i.config;Me(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Um(e,e2):`https://${i.config.authDomain}/${ZC}`,s={apiKey:e.apiKey,appName:i.name,v:Ir},o=n2.get(i.config.apiHost);o&&(s.eid=o);const c=i._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Rc(s).slice(1)}`}async function i2(i){const e=await JC(i),n=ei().gapi;return Me(n,i,"internal-error"),e.open({where:document.body,url:a2(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:t2,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=Za(i,"network-request-failed"),m=ei().setTimeout(()=>{c(d)},WC.get());function g(){ei().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{c(d)})}))}const s2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r2=500,o2=600,l2="_blank",c2="http://localhost";class Kv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function u2(i,e,n,s=r2,o=o2){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...s2,width:s.toString(),height:o.toString(),top:c,left:d},y=vn().toLowerCase();n&&(m=Gx(y)?l2:n),qx(y)&&(e=e||c2,g.scrollbars="yes");const x=Object.entries(g).reduce((N,[P,U])=>`${N}${P}=${U},`,"");if(OR(y)&&m!=="_self")return d2(e||"",m),new Kv(null);const E=window.open(e||"",m,x);Me(E,i,"popup-blocked");try{E.focus()}catch{}return new Kv(E)}function d2(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const f2="__/auth/handler",h2="emulator/auth/handler",p2=encodeURIComponent("fac");async function Qv(i,e,n,s,o,c){Me(i.config.authDomain,i,"auth-domain-config-required"),Me(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Ir,eventId:o};if(e instanceof tE){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",Jw(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,E]of Object.entries({}))d[x]=E}if(e instanceof Oc){const x=e.getScopes().filter(E=>E!=="");x.length>0&&(d.scopes=x.join(","))}i.tenantId&&(d.tid=i.tenantId);const m=d;for(const x of Object.keys(m))m[x]===void 0&&delete m[x];const g=await i._getAppCheckToken(),y=g?`#${p2}=${encodeURIComponent(g)}`:"";return`${m2(i)}?${Rc(m).slice(1)}${y}`}function m2({config:i}){return i.emulator?Um(i,h2):`https://${i.authDomain}/${f2}`}const Bp="webStorageSupport";class g2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cE,this._completeRedirectFn=UC,this._overrideRedirectResult=VC}async _openPopup(e,n,s,o){Pi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Qv(e,n,s,nm(),o);return u2(e,c,Km())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await Qv(e,n,s,nm(),o);return vC(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Pi(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await i2(e),s=new HC(e);return n.register("authEvent",o=>(Me(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bp,{type:Bp},o=>{const c=o?.[0]?.[Bp];c!==void 0&&n(!!c),Na(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Xx()||Fx()||Hm()}}const y2=g2;var $v="@firebase/auth",Yv="1.12.0";class b2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function v2(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _2(i){Er(new Cs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;Me(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jx(i)},y=new VR(s,o,c,g);return QR(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Er(new Cs("auth-internal",e=>{const n=Or(e.getProvider("auth").getImmediate());return(s=>new b2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wa($v,Yv,v2(i)),Wa($v,Yv,"esm2020")}const x2=300,E2=Cx("authIdTokenMaxAge")||x2;let Xv=null;const A2=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>E2)return;const o=n?.token;Xv!==o&&(Xv=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function gE(i=Lm()){const e=af(i,"auth");if(e.isInitialized())return e.getImmediate();const n=KR(i,{popupRedirectResolver:y2,persistence:[RC,gC,cE]}),s=Cx("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=A2(c.toString());fC(n,d,()=>d(n.currentUser)),dC(n,m=>d(m))}}const o=wx("auth");return o&&qm(n,`http://${o}`),n}function T2(){return document.getElementsByTagName("head")?.[0]??document}LR({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const c=Za("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",T2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_2("Browser");var Jv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ns,yE;(function(){var i;function e(C,R){function O(){}O.prototype=R.prototype,C.F=R.prototype,C.prototype=new O,C.prototype.constructor=C,C.D=function(k,T,D){for(var w=Array(arguments.length-2),we=2;we<arguments.length;we++)w[we-2]=arguments[we];return R.prototype[T].apply(k,w)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,R,O){O||(O=0);const k=Array(16);if(typeof R=="string")for(var T=0;T<16;++T)k[T]=R.charCodeAt(O++)|R.charCodeAt(O++)<<8|R.charCodeAt(O++)<<16|R.charCodeAt(O++)<<24;else for(T=0;T<16;++T)k[T]=R[O++]|R[O++]<<8|R[O++]<<16|R[O++]<<24;R=C.g[0],O=C.g[1],T=C.g[2];let D=C.g[3],w;w=R+(D^O&(T^D))+k[0]+3614090360&4294967295,R=O+(w<<7&4294967295|w>>>25),w=D+(T^R&(O^T))+k[1]+3905402710&4294967295,D=R+(w<<12&4294967295|w>>>20),w=T+(O^D&(R^O))+k[2]+606105819&4294967295,T=D+(w<<17&4294967295|w>>>15),w=O+(R^T&(D^R))+k[3]+3250441966&4294967295,O=T+(w<<22&4294967295|w>>>10),w=R+(D^O&(T^D))+k[4]+4118548399&4294967295,R=O+(w<<7&4294967295|w>>>25),w=D+(T^R&(O^T))+k[5]+1200080426&4294967295,D=R+(w<<12&4294967295|w>>>20),w=T+(O^D&(R^O))+k[6]+2821735955&4294967295,T=D+(w<<17&4294967295|w>>>15),w=O+(R^T&(D^R))+k[7]+4249261313&4294967295,O=T+(w<<22&4294967295|w>>>10),w=R+(D^O&(T^D))+k[8]+1770035416&4294967295,R=O+(w<<7&4294967295|w>>>25),w=D+(T^R&(O^T))+k[9]+2336552879&4294967295,D=R+(w<<12&4294967295|w>>>20),w=T+(O^D&(R^O))+k[10]+4294925233&4294967295,T=D+(w<<17&4294967295|w>>>15),w=O+(R^T&(D^R))+k[11]+2304563134&4294967295,O=T+(w<<22&4294967295|w>>>10),w=R+(D^O&(T^D))+k[12]+1804603682&4294967295,R=O+(w<<7&4294967295|w>>>25),w=D+(T^R&(O^T))+k[13]+4254626195&4294967295,D=R+(w<<12&4294967295|w>>>20),w=T+(O^D&(R^O))+k[14]+2792965006&4294967295,T=D+(w<<17&4294967295|w>>>15),w=O+(R^T&(D^R))+k[15]+1236535329&4294967295,O=T+(w<<22&4294967295|w>>>10),w=R+(T^D&(O^T))+k[1]+4129170786&4294967295,R=O+(w<<5&4294967295|w>>>27),w=D+(O^T&(R^O))+k[6]+3225465664&4294967295,D=R+(w<<9&4294967295|w>>>23),w=T+(R^O&(D^R))+k[11]+643717713&4294967295,T=D+(w<<14&4294967295|w>>>18),w=O+(D^R&(T^D))+k[0]+3921069994&4294967295,O=T+(w<<20&4294967295|w>>>12),w=R+(T^D&(O^T))+k[5]+3593408605&4294967295,R=O+(w<<5&4294967295|w>>>27),w=D+(O^T&(R^O))+k[10]+38016083&4294967295,D=R+(w<<9&4294967295|w>>>23),w=T+(R^O&(D^R))+k[15]+3634488961&4294967295,T=D+(w<<14&4294967295|w>>>18),w=O+(D^R&(T^D))+k[4]+3889429448&4294967295,O=T+(w<<20&4294967295|w>>>12),w=R+(T^D&(O^T))+k[9]+568446438&4294967295,R=O+(w<<5&4294967295|w>>>27),w=D+(O^T&(R^O))+k[14]+3275163606&4294967295,D=R+(w<<9&4294967295|w>>>23),w=T+(R^O&(D^R))+k[3]+4107603335&4294967295,T=D+(w<<14&4294967295|w>>>18),w=O+(D^R&(T^D))+k[8]+1163531501&4294967295,O=T+(w<<20&4294967295|w>>>12),w=R+(T^D&(O^T))+k[13]+2850285829&4294967295,R=O+(w<<5&4294967295|w>>>27),w=D+(O^T&(R^O))+k[2]+4243563512&4294967295,D=R+(w<<9&4294967295|w>>>23),w=T+(R^O&(D^R))+k[7]+1735328473&4294967295,T=D+(w<<14&4294967295|w>>>18),w=O+(D^R&(T^D))+k[12]+2368359562&4294967295,O=T+(w<<20&4294967295|w>>>12),w=R+(O^T^D)+k[5]+4294588738&4294967295,R=O+(w<<4&4294967295|w>>>28),w=D+(R^O^T)+k[8]+2272392833&4294967295,D=R+(w<<11&4294967295|w>>>21),w=T+(D^R^O)+k[11]+1839030562&4294967295,T=D+(w<<16&4294967295|w>>>16),w=O+(T^D^R)+k[14]+4259657740&4294967295,O=T+(w<<23&4294967295|w>>>9),w=R+(O^T^D)+k[1]+2763975236&4294967295,R=O+(w<<4&4294967295|w>>>28),w=D+(R^O^T)+k[4]+1272893353&4294967295,D=R+(w<<11&4294967295|w>>>21),w=T+(D^R^O)+k[7]+4139469664&4294967295,T=D+(w<<16&4294967295|w>>>16),w=O+(T^D^R)+k[10]+3200236656&4294967295,O=T+(w<<23&4294967295|w>>>9),w=R+(O^T^D)+k[13]+681279174&4294967295,R=O+(w<<4&4294967295|w>>>28),w=D+(R^O^T)+k[0]+3936430074&4294967295,D=R+(w<<11&4294967295|w>>>21),w=T+(D^R^O)+k[3]+3572445317&4294967295,T=D+(w<<16&4294967295|w>>>16),w=O+(T^D^R)+k[6]+76029189&4294967295,O=T+(w<<23&4294967295|w>>>9),w=R+(O^T^D)+k[9]+3654602809&4294967295,R=O+(w<<4&4294967295|w>>>28),w=D+(R^O^T)+k[12]+3873151461&4294967295,D=R+(w<<11&4294967295|w>>>21),w=T+(D^R^O)+k[15]+530742520&4294967295,T=D+(w<<16&4294967295|w>>>16),w=O+(T^D^R)+k[2]+3299628645&4294967295,O=T+(w<<23&4294967295|w>>>9),w=R+(T^(O|~D))+k[0]+4096336452&4294967295,R=O+(w<<6&4294967295|w>>>26),w=D+(O^(R|~T))+k[7]+1126891415&4294967295,D=R+(w<<10&4294967295|w>>>22),w=T+(R^(D|~O))+k[14]+2878612391&4294967295,T=D+(w<<15&4294967295|w>>>17),w=O+(D^(T|~R))+k[5]+4237533241&4294967295,O=T+(w<<21&4294967295|w>>>11),w=R+(T^(O|~D))+k[12]+1700485571&4294967295,R=O+(w<<6&4294967295|w>>>26),w=D+(O^(R|~T))+k[3]+2399980690&4294967295,D=R+(w<<10&4294967295|w>>>22),w=T+(R^(D|~O))+k[10]+4293915773&4294967295,T=D+(w<<15&4294967295|w>>>17),w=O+(D^(T|~R))+k[1]+2240044497&4294967295,O=T+(w<<21&4294967295|w>>>11),w=R+(T^(O|~D))+k[8]+1873313359&4294967295,R=O+(w<<6&4294967295|w>>>26),w=D+(O^(R|~T))+k[15]+4264355552&4294967295,D=R+(w<<10&4294967295|w>>>22),w=T+(R^(D|~O))+k[6]+2734768916&4294967295,T=D+(w<<15&4294967295|w>>>17),w=O+(D^(T|~R))+k[13]+1309151649&4294967295,O=T+(w<<21&4294967295|w>>>11),w=R+(T^(O|~D))+k[4]+4149444226&4294967295,R=O+(w<<6&4294967295|w>>>26),w=D+(O^(R|~T))+k[11]+3174756917&4294967295,D=R+(w<<10&4294967295|w>>>22),w=T+(R^(D|~O))+k[2]+718787259&4294967295,T=D+(w<<15&4294967295|w>>>17),w=O+(D^(T|~R))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+R&4294967295,C.g[1]=C.g[1]+(T+(w<<21&4294967295|w>>>11))&4294967295,C.g[2]=C.g[2]+T&4294967295,C.g[3]=C.g[3]+D&4294967295}s.prototype.v=function(C,R){R===void 0&&(R=C.length);const O=R-this.blockSize,k=this.C;let T=this.h,D=0;for(;D<R;){if(T==0)for(;D<=O;)o(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<R;)if(k[T++]=C.charCodeAt(D++),T==this.blockSize){o(this,k),T=0;break}}else for(;D<R;)if(k[T++]=C[D++],T==this.blockSize){o(this,k),T=0;break}}this.h=T,this.o+=R},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var R=1;R<C.length-8;++R)C[R]=0;R=this.o*8;for(var O=C.length-8;O<C.length;++O)C[O]=R&255,R/=256;for(this.v(C),C=Array(16),R=0,O=0;O<4;++O)for(let k=0;k<32;k+=8)C[R++]=this.g[O]>>>k&255;return C};function c(C,R){var O=m;return Object.prototype.hasOwnProperty.call(O,C)?O[C]:O[C]=R(C)}function d(C,R){this.h=R;const O=[];let k=!0;for(let T=C.length-1;T>=0;T--){const D=C[T]|0;k&&D==R||(O[T]=D,k=!1)}this.g=O}var m={};function g(C){return-128<=C&&C<128?c(C,function(R){return new d([R|0],R<0?-1:0)}):new d([C|0],C<0?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return z(y(-C));const R=[];let O=1;for(let k=0;C>=O;k++)R[k]=C/O|0,O*=4294967296;return new d(R,0)}function x(C,R){if(C.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(C.charAt(0)=="-")return z(x(C.substring(1),R));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=y(Math.pow(R,8));let k=E;for(let D=0;D<C.length;D+=8){var T=Math.min(8,C.length-D);const w=parseInt(C.substring(D,D+T),R);T<8?(T=y(Math.pow(R,T)),k=k.j(T).add(y(w))):(k=k.j(O),k=k.add(y(w)))}return k}var E=g(0),N=g(1),P=g(16777216);i=d.prototype,i.m=function(){if(L(this))return-z(this).m();let C=0,R=1;for(let O=0;O<this.g.length;O++){const k=this.i(O);C+=(k>=0?k:4294967296+k)*R,R*=4294967296}return C},i.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(U(this))return"0";if(L(this))return"-"+z(this).toString(C);const R=y(Math.pow(C,6));var O=this;let k="";for(;;){const T=se(O,R).g;O=W(O,T.j(R));let D=((O.g.length>0?O.g[0]:O.h)>>>0).toString(C);if(O=T,U(O))return D+k;for(;D.length<6;)D="0"+D;k=D+k}},i.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function U(C){if(C.h!=0)return!1;for(let R=0;R<C.g.length;R++)if(C.g[R]!=0)return!1;return!0}function L(C){return C.h==-1}i.l=function(C){return C=W(this,C),L(C)?-1:U(C)?0:1};function z(C){const R=C.g.length,O=[];for(let k=0;k<R;k++)O[k]=~C.g[k];return new d(O,~C.h).add(N)}i.abs=function(){return L(this)?z(this):this},i.add=function(C){const R=Math.max(this.g.length,C.g.length),O=[];let k=0;for(let T=0;T<=R;T++){let D=k+(this.i(T)&65535)+(C.i(T)&65535),w=(D>>>16)+(this.i(T)>>>16)+(C.i(T)>>>16);k=w>>>16,D&=65535,w&=65535,O[T]=w<<16|D}return new d(O,O[O.length-1]&-2147483648?-1:0)};function W(C,R){return C.add(z(R))}i.j=function(C){if(U(this)||U(C))return E;if(L(this))return L(C)?z(this).j(z(C)):z(z(this).j(C));if(L(C))return z(this.j(z(C)));if(this.l(P)<0&&C.l(P)<0)return y(this.m()*C.m());const R=this.g.length+C.g.length,O=[];for(var k=0;k<2*R;k++)O[k]=0;for(k=0;k<this.g.length;k++)for(let T=0;T<C.g.length;T++){const D=this.i(k)>>>16,w=this.i(k)&65535,we=C.i(T)>>>16,De=C.i(T)&65535;O[2*k+2*T]+=w*De,J(O,2*k+2*T),O[2*k+2*T+1]+=D*De,J(O,2*k+2*T+1),O[2*k+2*T+1]+=w*we,J(O,2*k+2*T+1),O[2*k+2*T+2]+=D*we,J(O,2*k+2*T+2)}for(C=0;C<R;C++)O[C]=O[2*C+1]<<16|O[2*C];for(C=R;C<2*R;C++)O[C]=0;return new d(O,0)};function J(C,R){for(;(C[R]&65535)!=C[R];)C[R+1]+=C[R]>>>16,C[R]&=65535,R++}function oe(C,R){this.g=C,this.h=R}function se(C,R){if(U(R))throw Error("division by zero");if(U(C))return new oe(E,E);if(L(C))return R=se(z(C),R),new oe(z(R.g),z(R.h));if(L(R))return R=se(C,z(R)),new oe(z(R.g),R.h);if(C.g.length>30){if(L(C)||L(R))throw Error("slowDivide_ only works with positive integers.");for(var O=N,k=R;k.l(C)<=0;)O=le(O),k=le(k);var T=me(O,1),D=me(k,1);for(k=me(k,2),O=me(O,2);!U(k);){var w=D.add(k);w.l(C)<=0&&(T=T.add(O),D=w),k=me(k,1),O=me(O,1)}return R=W(C,T.j(R)),new oe(T,R)}for(T=E;C.l(R)>=0;){for(O=Math.max(1,Math.floor(C.m()/R.m())),k=Math.ceil(Math.log(O)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),D=y(O),w=D.j(R);L(w)||w.l(C)>0;)O-=k,D=y(O),w=D.j(R);U(D)&&(D=N),T=T.add(D),C=W(C,w)}return new oe(T,C)}i.B=function(C){return se(this,C).h},i.and=function(C){const R=Math.max(this.g.length,C.g.length),O=[];for(let k=0;k<R;k++)O[k]=this.i(k)&C.i(k);return new d(O,this.h&C.h)},i.or=function(C){const R=Math.max(this.g.length,C.g.length),O=[];for(let k=0;k<R;k++)O[k]=this.i(k)|C.i(k);return new d(O,this.h|C.h)},i.xor=function(C){const R=Math.max(this.g.length,C.g.length),O=[];for(let k=0;k<R;k++)O[k]=this.i(k)^C.i(k);return new d(O,this.h^C.h)};function le(C){const R=C.g.length+1,O=[];for(let k=0;k<R;k++)O[k]=C.i(k)<<1|C.i(k-1)>>>31;return new d(O,C.h)}function me(C,R){const O=R>>5;R%=32;const k=C.g.length-O,T=[];for(let D=0;D<k;D++)T[D]=R>0?C.i(D+O)>>>R|C.i(D+O+1)<<32-R:C.i(D+O);return new d(T,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,yE=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=x,Ns=d}).apply(typeof Jv<"u"?Jv:typeof self<"u"?self:typeof window<"u"?window:{});var pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var bE,sc,vE,wd,rm,_E,xE,EE;(function(){var i,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof pd=="object"&&pd];for(var b=0;b<u.length;++b){var _=u[b];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(u,b){if(b)e:{var _=s;u=u.split(".");for(var S=0;S<u.length-1;S++){var q=u[S];if(!(q in _))break e;_=_[q]}u=u[u.length-1],S=_[u],b=b(S),b!=S&&b!=null&&e(_,u,{configurable:!0,writable:!0,value:b})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(b){var _=[],S;for(S in b)Object.prototype.hasOwnProperty.call(b,S)&&_.push([S,b[S]]);return _}});var c=c||{},d=this||self;function m(u){var b=typeof u;return b=="object"&&u!=null||b=="function"}function g(u,b,_){return u.call.apply(u.bind,arguments)}function y(u,b,_){return y=g,y.apply(null,arguments)}function x(u,b){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function E(u,b){function _(){}_.prototype=b.prototype,u.Z=b.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(S,q,$){for(var he=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)he[Be-2]=arguments[Be];return b.prototype[q].apply(S,he)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function P(u){const b=u.length;if(b>0){const _=Array(b);for(let S=0;S<b;S++)_[S]=u[S];return _}return[]}function U(u,b){for(let S=1;S<arguments.length;S++){const q=arguments[S];var _=typeof q;if(_=_!="object"?_:q?Array.isArray(q)?"array":_:"null",_=="array"||_=="object"&&typeof q.length=="number"){_=u.length||0;const $=q.length||0;u.length=_+$;for(let he=0;he<$;he++)u[_+he]=q[he]}else u.push(q)}}class L{constructor(b,_){this.i=b,this.j=_,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function z(u){d.setTimeout(()=>{throw u},0)}function W(){var u=C;let b=null;return u.g&&(b=u.g,u.g=u.g.next,u.g||(u.h=null),b.next=null),b}class J{constructor(){this.h=this.g=null}add(b,_){const S=oe.get();S.set(b,_),this.h?this.h.next=S:this.g=S,this.h=S}}var oe=new L(()=>new se,u=>u.reset());class se{constructor(){this.next=this.g=this.h=null}set(b,_){this.h=b,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let le,me=!1,C=new J,R=()=>{const u=Promise.resolve(void 0);le=()=>{u.then(O)}};function O(){for(var u;u=W();){try{u.h.call(u.g)}catch(_){z(_)}var b=oe;b.j(u),b.h<100&&(b.h++,u.next=b.g,b.g=u)}me=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(u,b){this.type=u,this.g=this.target=b,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,b=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,b),d.removeEventListener("test",_,b)}catch{}return u})();function w(u){return/^[\s\xa0]*$/.test(u)}function we(u,b){T.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,b)}E(we,T),we.prototype.init=function(u,b){const _=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=b,b=u.relatedTarget,b||(_=="mouseover"?b=u.fromElement:_=="mouseout"&&(b=u.toElement)),this.relatedTarget=b,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var De="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ue(u,b,_,S,q){this.listener=u,this.proxy=null,this.src=b,this.type=_,this.capture=!!S,this.ha=q,this.key=++Y,this.da=this.fa=!1}function Ee(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function je(u,b,_){for(const S in u)b.call(_,u[S],S,u)}function Fe(u,b){for(const _ in u)b.call(void 0,u[_],_,u)}function j(u){const b={};for(const _ in u)b[_]=u[_];return b}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ae(u,b){let _,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(_ in S)u[_]=S[_];for(let $=0;$<Z.length;$++)_=Z[$],Object.prototype.hasOwnProperty.call(S,_)&&(u[_]=S[_])}}function de(u){this.src=u,this.g={},this.h=0}de.prototype.add=function(u,b,_,S,q){const $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);const he=ce(u,b,S,q);return he>-1?(b=u[he],_||(b.fa=!1)):(b=new ue(b,this.src,$,!!S,q),b.fa=_,u.push(b)),b};function ye(u,b){const _=b.type;if(_ in u.g){var S=u.g[_],q=Array.prototype.indexOf.call(S,b,void 0),$;($=q>=0)&&Array.prototype.splice.call(S,q,1),$&&(Ee(b),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ce(u,b,_,S){for(let q=0;q<u.length;++q){const $=u[q];if(!$.da&&$.listener==b&&$.capture==!!_&&$.ha==S)return q}return-1}var be="closure_lm_"+(Math.random()*1e6|0),Pe={};function fe(u,b,_,S,q){if(Array.isArray(b)){for(let $=0;$<b.length;$++)fe(u,b[$],_,S,q);return null}return _=Le(_),u&&u[De]?u.J(b,_,m(S)?!!S.capture:!1,q):ft(u,b,_,!1,S,q)}function ft(u,b,_,S,q,$){if(!b)throw Error("Invalid event type");const he=m(q)?!!q.capture:!!q;let Be=Ae(u);if(Be||(u[be]=Be=new de(u)),_=Be.add(b,_,S,he,$),_.proxy)return _;if(S=ot(),_.proxy=S,S.src=u,S.listener=_,u.addEventListener)D||(q=he),q===void 0&&(q=!1),u.addEventListener(b.toString(),S,q);else if(u.attachEvent)u.attachEvent(_e(b.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ot(){function u(_){return b.call(u.src,u.listener,_)}const b=pe;return u}function lt(u,b,_,S,q){if(Array.isArray(b))for(var $=0;$<b.length;$++)lt(u,b[$],_,S,q);else S=m(S)?!!S.capture:!!S,_=Le(_),u&&u[De]?(u=u.i,$=String(b).toString(),$ in u.g&&(b=u.g[$],_=ce(b,_,S,q),_>-1&&(Ee(b[_]),Array.prototype.splice.call(b,_,1),b.length==0&&(delete u.g[$],u.h--)))):u&&(u=Ae(u))&&(b=u.g[b.toString()],u=-1,b&&(u=ce(b,_,S,q)),(_=u>-1?b[u]:null)&&Q(_))}function Q(u){if(typeof u!="number"&&u&&!u.da){var b=u.src;if(b&&b[De])ye(b.i,u);else{var _=u.type,S=u.proxy;b.removeEventListener?b.removeEventListener(_,S,u.capture):b.detachEvent?b.detachEvent(_e(_),S):b.addListener&&b.removeListener&&b.removeListener(S),(_=Ae(b))?(ye(_,u),_.h==0&&(_.src=null,b[be]=null)):Ee(u)}}}function _e(u){return u in Pe?Pe[u]:Pe[u]="on"+u}function pe(u,b){if(u.da)u=!0;else{b=new we(b,this);const _=u.listener,S=u.ha||u.src;u.fa&&Q(u),u=_.call(S,b)}return u}function Ae(u){return u=u[be],u instanceof de?u:null}var Re="__closure_events_fn_"+(Math.random()*1e9>>>0);function Le(u){return typeof u=="function"?u:(u[Re]||(u[Re]=function(b){return u.handleEvent(b)}),u[Re])}function Ge(){k.call(this),this.i=new de(this),this.M=this,this.G=null}E(Ge,k),Ge.prototype[De]=!0,Ge.prototype.removeEventListener=function(u,b,_,S){lt(this,u,b,_,S)};function H(u,b){var _,S=u.G;if(S)for(_=[];S;S=S.G)_.push(S);if(u=u.M,S=b.type||b,typeof b=="string")b=new T(b,u);else if(b instanceof T)b.target=b.target||u;else{var q=b;b=new T(S,u),ae(b,q)}q=!0;let $,he;if(_)for(he=_.length-1;he>=0;he--)$=b.g=_[he],q=Se($,S,!0,b)&&q;if($=b.g=u,q=Se($,S,!0,b)&&q,q=Se($,S,!1,b)&&q,_)for(he=0;he<_.length;he++)$=b.g=_[he],q=Se($,S,!1,b)&&q}Ge.prototype.N=function(){if(Ge.Z.N.call(this),this.i){var u=this.i;for(const b in u.g){const _=u.g[b];for(let S=0;S<_.length;S++)Ee(_[S]);delete u.g[b],u.h--}}this.G=null},Ge.prototype.J=function(u,b,_,S){return this.i.add(String(u),b,!1,_,S)},Ge.prototype.K=function(u,b,_,S){return this.i.add(String(u),b,!0,_,S)};function Se(u,b,_,S){if(b=u.i.g[String(b)],!b)return!0;b=b.concat();let q=!0;for(let $=0;$<b.length;++$){const he=b[$];if(he&&!he.da&&he.capture==_){const Be=he.listener,kt=he.ha||he.src;he.fa&&ye(u.i,he),q=Be.call(kt,S)!==!1&&q}}return q&&!S.defaultPrevented}function hn(u,b){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:d.setTimeout(u,b||0)}function ua(u){u.g=hn(()=>{u.g=null,u.i&&(u.i=!1,ua(u))},u.l);const b=u.h;u.h=null,u.m.apply(null,b)}class Et extends k{constructor(b,_){super(),this.m=b,this.l=_,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:ua(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pn(u){k.call(this),this.h=u,this.g={}}E(pn,k);var Bs=[];function Hs(u){je(u.g,function(b,_){this.g.hasOwnProperty(_)&&Q(b)},u),u.g={}}pn.prototype.N=function(){pn.Z.N.call(this),Hs(this)},pn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var At=d.JSON.stringify,_n=d.JSON.parse,Lc=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function zc(){}function Uc(){}var da={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function an(){T.call(this,"d")}E(an,T);function $n(){T.call(this,"c")}E($n,T);var Mt={},Bc=null;function jr(){return Bc=Bc||new Ge}Mt.Ia="serverreachability";function Hc(u){T.call(this,Mt.Ia,u)}E(Hc,T);function Ca(u){const b=jr();H(b,new Hc(b))}Mt.STAT_EVENT="statevent";function qs(u,b){T.call(this,Mt.STAT_EVENT,u),this.stat=b}E(qs,T);function Ut(u){const b=jr();H(b,new qs(b,u))}Mt.Ja="timingevent";function Ia(u,b){T.call(this,Mt.Ja,u),this.size=b}E(Ia,T);function Oa(u,b){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},b)}function fa(){this.g=!0}fa.prototype.ua=function(){this.g=!1};function If(u,b,_,S,q,$){u.info(function(){if(u.g)if($){var he="",Be=$.split("&");for(let it=0;it<Be.length;it++){var kt=Be[it].split("=");if(kt.length>1){const Tt=kt[0];kt=kt[1];const Wn=Tt.split("_");he=Wn.length>=2&&Wn[1]=="type"?he+(Tt+"="+kt+"&"):he+(Tt+"=redacted&")}}}else he=null;else he=$;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+b+`
`+_+`
`+he})}function qc(u,b,_,S,q,$,he){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+b+`
`+_+`
`+$+" "+he})}function Da(u,b,_,S){u.info(function(){return"XMLHTTP TEXT ("+b+"): "+Of(u,_)+(S?" "+S:"")})}function Fs(u,b){u.info(function(){return"TIMEOUT: "+b})}fa.prototype.info=function(){};function Of(u,b){if(!u.g)return b;if(!b)return null;try{const $=JSON.parse(b);if($){for(u=0;u<$.length;u++)if(Array.isArray($[u])){var _=$[u];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var q=S[0];if(q!="noop"&&q!="stop"&&q!="close")for(let he=1;he<S.length;he++)S[he]=""}}}}return At($)}catch{return b}}var Gs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},el={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},tl;function Ks(){}E(Ks,zc),Ks.prototype.g=function(){return new XMLHttpRequest},tl=new Ks;function ci(u){return encodeURIComponent(String(u))}function Fc(u){var b=1;u=u.split(":");const _=[];for(;b>0&&u.length;)_.push(u.shift()),b--;return u.length&&_.push(u.join(":")),_}function ha(u,b,_,S){this.j=u,this.i=b,this.l=_,this.S=S||1,this.V=new pn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new pa}function pa(){this.i=null,this.g="",this.h=!1}var Bt={},Zt={};function Ma(u,b,_){u.M=1,u.A=Qs(qt(b)),u.u=_,u.R=!0,Pr(u,null)}function Pr(u,b){u.F=Date.now(),ka(u),u.B=qt(u.A);var _=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),Ur(_.i,"t",S),u.C=0,_=u.j.L,u.h=new pa,u.g=su(u.j,_?b:null,!u.u),u.P>0&&(u.O=new Et(y(u.Y,u,u.g),u.P)),b=u.V,_=u.g,S=u.ba;var q="readystatechange";Array.isArray(q)||(q&&(Bs[0]=q.toString()),q=Bs);for(let $=0;$<q.length;$++){const he=fe(_,q[$],S||b.handleEvent,!1,b.h||b);if(!he)break;b.g[he.key]=he}b=u.J?j(u.J):{},u.u?(u.v||(u.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,b)):(u.v="GET",u.g.ea(u.B,u.v,null,b)),Ca(),If(u.i,u.v,u.B,u.l,u.S,u.u)}ha.prototype.ba=function(u){u=u.target;const b=this.O;b&&ya(u)==3?b.j():this.Y(u)},ha.prototype.Y=function(u){try{if(u==this.g)e:{const Be=ya(this.g),kt=this.g.ya(),it=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||sn(this.g)))){this.K||Be!=4||kt==7||(kt==8||it<=0?Ca(3):Ca(2)),ja(this);var b=this.g.ca();this.X=b;var _=Df(this);if(this.o=b==200,qc(this.i,this.v,this.B,this.l,this.S,Be,b),this.o){if(this.U&&!this.L){t:{if(this.g){var S,q=this.g;if((S=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(S)){var $=S;break t}}$=null}if(u=$)Da(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Pa(this,u);else{this.o=!1,this.m=3,Ut(12),Pn(this),Yn(this);break e}}if(this.R){u=!0;let Tt;for(;!this.K&&this.C<_.length;)if(Tt=Kc(this,_),Tt==Zt){Be==4&&(this.m=4,Ut(14),u=!1),Da(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==Bt){this.m=4,Ut(15),Da(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Da(this.i,this.l,Tt,null),Pa(this,Tt);if(Gc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||_.length!=0||this.h.h||(this.m=1,Ut(16),u=!1),this.o=this.o&&u,!u)Da(this.i,this.l,_,"[Invalid Chunked Response]"),Pn(this),Yn(this);else if(_.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),gl(he),he.P=!0,Ut(11))}}else Da(this.i,this.l,_,null),Pa(this,_);Be==4&&Pn(this),this.o&&!this.K&&(Be==4?tu(this.j,this):(this.o=!1,ka(this)))}else di(this.g),b==400&&_.indexOf("Unknown SID")>0?(this.m=3,Ut(12)):(this.m=0,Ut(13)),Pn(this),Yn(this)}}}catch{}};function Df(u){if(!Gc(u))return u.g.la();const b=sn(u.g);if(b==="")return"";let _="";const S=b.length,q=ya(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Pn(u),Yn(u),"";u.h.i=new d.TextDecoder}for(let $=0;$<S;$++)u.h.h=!0,_+=u.h.i.decode(b[$],{stream:!(q&&$==S-1)});return b.length=0,u.h.g+=_,u.C=0,u.h.g}function Gc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Kc(u,b){var _=u.C,S=b.indexOf(`
`,_);return S==-1?Zt:(_=Number(b.substring(_,S)),isNaN(_)?Bt:(S+=1,S+_>b.length?Zt:(b=b.slice(S,S+_),u.C=S+_,b)))}ha.prototype.cancel=function(){this.K=!0,Pn(this)};function ka(u){u.T=Date.now()+u.H,Vr(u,u.H)}function Vr(u,b){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Oa(y(u.aa,u),b)}function ja(u){u.D&&(d.clearTimeout(u.D),u.D=null)}ha.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Fs(this.i,this.B),this.M!=2&&(Ca(),Ut(17)),Pn(this),this.m=2,Yn(this)):Vr(this,this.T-u)};function Yn(u){u.j.I==0||u.K||tu(u.j,u)}function Pn(u){ja(u);var b=u.O;b&&typeof b.dispose=="function"&&b.dispose(),u.O=null,Hs(u.V),u.g&&(b=u.g,u.g=null,b.abort(),b.dispose())}function Pa(u,b){try{var _=u.j;if(_.I!=0&&(_.g==u||La(_.h,u))){if(!u.L&&La(_.h,u)&&_.I==3){try{var S=_.Ba.g.parse(b)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Gr(_),Yi(_);else break e;er(_),Ut(18)}}else _.xa=q[1],0<_.xa-_.K&&q[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Oa(y(_.Va,_),6e3));Va(_.h)<=1&&_.ta&&(_.ta=void 0)}else Fa(_,11)}else if((u.L||_.g==u)&&Gr(_),!w(b))for(q=_.Ba.g.parse(b),b=0;b<q.length;b++){let it=q[b];const Tt=it[0];if(!(Tt<=_.K))if(_.K=Tt,it=it[1],_.I==2)if(it[0]=="c"){_.M=it[1],_.ba=it[2];const Wn=it[3];Wn!=null&&(_.ka=Wn,_.j.info("VER="+_.ka));const Ga=it[4];Ga!=null&&(_.za=Ga,_.j.info("SVER="+_.za));const ba=it[5];ba!=null&&typeof ba=="number"&&ba>0&&(S=1.5*ba,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const va=u.g;if(va){const tr=va.g?va.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tr){var $=S.h;$.g||tr.indexOf("spdy")==-1&&tr.indexOf("quic")==-1&&tr.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(il($,$.h),$.h=null))}if(S.G){const Kr=va.g?va.g.getResponseHeader("X-HTTP-Session-Id"):null;Kr&&(S.wa=Kr,ct(S.J,S.G,Kr))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var he=u;if(S.na=iu(S,S.L?S.ba:null,S.W),he.L){sl(S.h,he);var Be=he,kt=S.O;kt&&(Be.H=kt),Be.D&&(ja(Be),ka(Be)),S.g=he}else Zc(S);_.i.length>0&&qa(_)}else it[0]!="stop"&&it[0]!="close"||Fa(_,7);else _.I==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?Fa(_,7):pl(_):it[0]!="noop"&&_.l&&_.l.qa(it),_.A=0)}}Ca(4)}catch{}}var Ht=class{constructor(u,b){this.g=u,this.map=b}};function nl(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function al(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Va(u){return u.h?1:u.g?u.g.size:0}function La(u,b){return u.h?u.h==b:u.g?u.g.has(b):!1}function il(u,b){u.g?u.g.add(b):u.h=b}function sl(u,b){u.h&&u.h==b?u.h=null:u.g&&u.g.has(b)&&u.g.delete(b)}nl.prototype.cancel=function(){if(this.i=rl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function rl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let b=u.i;for(const _ of u.g.values())b=b.concat(_.G);return b}return P(u.i)}var Qc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lr(u,b){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const S=u[_].indexOf("=");let q,$=null;S>=0?(q=u[_].substring(0,S),$=u[_].substring(S+1)):q=u[_],b(q,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Vn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;u instanceof Vn?(this.l=u.l,en(this,u.j),this.o=u.o,this.g=u.g,Hi(this,u.u),this.h=u.h,ol(this,Jc(u.i)),this.m=u.m):u&&(b=String(u).match(Qc))?(this.l=!1,en(this,b[1]||"",!0),this.o=za(b[2]||""),this.g=za(b[3]||"",!0),Hi(this,b[4]),this.h=za(b[5]||"",!0),ol(this,b[6]||"",!0),this.m=za(b[7]||"")):(this.l=!1,this.i=new Fi(null,this.l))}Vn.prototype.toString=function(){const u=[];var b=this.j;b&&u.push($s(b,zr,!0),":");var _=this.g;return(_||b=="file")&&(u.push("//"),(b=this.o)&&u.push($s(b,zr,!0),"@"),u.push(ci(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push($s(_,_.charAt(0)=="/"?ll:$c,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",$s(_,Yc)),u.join("")},Vn.prototype.resolve=function(u){const b=qt(this);let _=!!u.j;_?en(b,u.j):_=!!u.o,_?b.o=u.o:_=!!u.g,_?b.g=u.g:_=u.u!=null;var S=u.h;if(_)Hi(b,u.u);else if(_=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var q=b.h.lastIndexOf("/");q!=-1&&(S=b.h.slice(0,q+1)+S)}if(q=S,q==".."||q==".")S="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){S=q.lastIndexOf("/",0)==0,q=q.split("/");const $=[];for(let he=0;he<q.length;){const Be=q[he++];Be=="."?S&&he==q.length&&$.push(""):Be==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),S&&he==q.length&&$.push("")):($.push(Be),S=!0)}S=$.join("/")}else S=q}return _?b.h=S:_=u.i.toString()!=="",_?ol(b,Jc(u.i)):_=!!u.m,_&&(b.m=u.m),b};function qt(u){return new Vn(u)}function en(u,b,_){u.j=_?za(b,!0):b,u.j&&(u.j=u.j.replace(/:$/,""))}function Hi(u,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);u.u=b}else u.u=null}function ol(u,b,_){b instanceof Fi?(u.i=b,Br(u.i,u.l)):(_||(b=$s(b,qi)),u.i=new Fi(b,u.l))}function ct(u,b,_){u.i.set(b,_)}function Qs(u){return ct(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function za(u,b){return u?b?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function $s(u,b,_){return typeof u=="string"?(u=encodeURI(u).replace(b,An),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function An(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var zr=/[#\/\?@]/g,$c=/[#\?:]/g,ll=/[#\?]/g,qi=/[#\?@]/g,Yc=/#/g;function Fi(u,b){this.h=this.g=null,this.i=u||null,this.j=!!b}function Tn(u){u.g||(u.g=new Map,u.h=0,u.i&&Lr(u.i,function(b,_){u.add(decodeURIComponent(b.replace(/\+/g," ")),_)}))}i=Fi.prototype,i.add=function(u,b){Tn(this),this.i=null,u=Gi(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(b),this.h+=1,this};function Xc(u,b){Tn(u),b=Gi(u,b),u.g.has(b)&&(u.i=null,u.h-=u.g.get(b).length,u.g.delete(b))}function cl(u,b){return Tn(u),b=Gi(u,b),u.g.has(b)}i.forEach=function(u,b){Tn(this),this.g.forEach(function(_,S){_.forEach(function(q){u.call(b,q,S,this)},this)},this)};function ul(u,b){Tn(u);let _=[];if(typeof b=="string")cl(u,b)&&(_=_.concat(u.g.get(Gi(u,b))));else for(u=Array.from(u.g.values()),b=0;b<u.length;b++)_=_.concat(u[b]);return _}i.set=function(u,b){return Tn(this),this.i=null,u=Gi(this,u),cl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[b]),this.h+=1,this},i.get=function(u,b){return u?(u=ul(this,u),u.length>0?String(u[0]):b):b};function Ur(u,b,_){Xc(u,b),_.length>0&&(u.i=null,u.g.set(Gi(u,b),P(_)),u.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],b=Array.from(this.g.keys());for(let S=0;S<b.length;S++){var _=b[S];const q=ci(_);_=ul(this,_);for(let $=0;$<_.length;$++){let he=q;_[$]!==""&&(he+="="+ci(_[$])),u.push(he)}}return this.i=u.join("&")};function Jc(u){const b=new Fi;return b.i=u.i,u.g&&(b.g=new Map(u.g),b.h=u.h),b}function Gi(u,b){return b=String(b),u.j&&(b=b.toLowerCase()),b}function Br(u,b){b&&!u.j&&(Tn(u),u.i=null,u.g.forEach(function(_,S){const q=S.toLowerCase();S!=q&&(Xc(this,S),Ur(this,q,_))},u)),u.j=b}function ma(u,b){const _=new fa;if(d.Image){const S=new Image;S.onload=x(Xn,_,"TestLoadImage: loaded",!0,b,S),S.onerror=x(Xn,_,"TestLoadImage: error",!1,b,S),S.onabort=x(Xn,_,"TestLoadImage: abort",!1,b,S),S.ontimeout=x(Xn,_,"TestLoadImage: timeout",!1,b,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else b(!1)}function dl(u,b){const _=new fa,S=new AbortController,q=setTimeout(()=>{S.abort(),Xn(_,"TestPingServer: timeout",!1,b)},1e4);fetch(u,{signal:S.signal}).then($=>{clearTimeout(q),$.ok?Xn(_,"TestPingServer: ok",!0,b):Xn(_,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(q),Xn(_,"TestPingServer: error",!1,b)})}function Xn(u,b,_,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(_)}catch{}}function Ki(){this.g=new Lc}function Ua(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Ua,zc),Ua.prototype.g=function(){return new Ys(this.i,this.h)};function Ys(u,b){Ge.call(this),this.H=u,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Ys,Ge),i=Ys.prototype,i.open=function(u,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=b,this.readyState=1,ga(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(b.body=u),(this.H||d).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Qi(this)),this.readyState=0},i.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ga(this)),this.g&&(this.readyState=3,ga(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Hr(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Hr(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}i.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var b=u.value?u.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!u.done}))&&(this.response=this.responseText+=b)}u.done?Qi(this):ga(this),this.readyState==3&&Hr(this)}},i.Oa=function(u){this.g&&(this.response=this.responseText=u,Qi(this))},i.Na=function(u){this.g&&(this.response=u,Qi(this))},i.ga=function(){this.g&&Qi(this)};function Qi(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ga(u)}i.setRequestHeader=function(u,b){this.A.append(u,b)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],b=this.h.entries();for(var _=b.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=b.next();return u.join(`\r
`)};function ga(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Jn(u){let b="";return je(u,function(_,S){b+=S,b+=":",b+=_,b+=`\r
`}),b}function Xs(u,b,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=Jn(_),typeof u=="string"?_!=null&&ci(_):ct(u,b,_))}function ht(u){Ge.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(ht,Ge);var Ba=/^https?$/i,fl=["POST","PUT"];i=ht.prototype,i.Fa=function(u){this.H=u},i.ea=function(u,b,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);b=b?b.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():tl.g(),this.g.onreadystatechange=N(y(this.Ca,this));try{this.B=!0,this.g.open(b,String(u),!0),this.B=!1}catch($){Js(this,$);return}if(u=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)_.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const $ of S.keys())_.set($,S.get($));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),q=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(fl,b,void 0)>=0)||S||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,he]of _)this.g.setRequestHeader($,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch($){Js(this,$)}};function Js(u,b){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=b,u.o=5,hl(u),ui(u)}function hl(u){u.A||(u.A=!0,H(u,"complete"),H(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,H(this,"complete"),H(this,"abort"),ui(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ui(this,!0)),ht.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?Ws(this):this.Xa())},i.Xa=function(){Ws(this)};function Ws(u){if(u.h&&typeof c<"u"){if(u.v&&ya(u)==4)setTimeout(u.Ca.bind(u),0);else if(H(u,"readystatechange"),ya(u)==4){u.h=!1;try{const $=u.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var _;if(!(_=b)){var S;if(S=$===0){let he=String(u.D).match(Qc)[1]||null;!he&&d.self&&d.self.location&&(he=d.self.location.protocol.slice(0,-1)),S=!Ba.test(he?he.toLowerCase():"")}_=S}if(_)H(u,"complete"),H(u,"success");else{u.o=6;try{var q=ya(u)>2?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.ca()+"]",hl(u)}}finally{ui(u)}}}}function ui(u,b){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,b||H(u,"ready");try{_.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function ya(u){return u.g?u.g.readyState:0}i.ca=function(){try{return ya(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(u){if(this.g){var b=this.g.responseText;return u&&b.indexOf(u)==0&&(b=b.substring(u.length)),_n(b)}};function sn(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function di(u){const b={};u=(u.g&&ya(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(w(u[S]))continue;var _=Fc(u[S]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=b[q]||[];b[q]=$,$.push(_)}Fe(b,function(S){return S.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ha(u,b,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||b}function $i(u){this.za=0,this.i=[],this.j=new fa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ha("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ha("baseRetryDelayMs",5e3,u),this.Za=Ha("retryDelaySeedMs",1e4,u),this.Ta=Ha("forwardChannelMaxRetries",2,u),this.va=Ha("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new nl(u&&u.concurrentRequestLimit),this.Ba=new Ki,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=$i.prototype,i.ka=8,i.I=1,i.connect=function(u,b,_,S){Ut(0),this.W=u,this.H=b||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=iu(this,null,this.W),qa(this)};function pl(u){if(qr(u),u.I==3){var b=u.V++,_=qt(u.J);if(ct(_,"SID",u.M),ct(_,"RID",b),ct(_,"TYPE","terminate"),Zs(u,_),b=new ha(u,u.j,b),b.M=2,b.A=Qs(qt(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(b.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=b.A,_=!0),_||(b.g=su(b.j,null),b.g.ea(b.A)),b.F=Date.now(),ka(b)}au(u)}function Yi(u){u.g&&(gl(u),u.g.cancel(),u.g=null)}function qr(u){Yi(u),u.v&&(d.clearTimeout(u.v),u.v=null),Gr(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function qa(u){if(!al(u.h)&&!u.m){u.m=!0;var b=u.Ea;le||R(),me||(le(),me=!0),C.add(b,u),u.D=0}}function Fr(u,b){return Va(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=b.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Oa(y(u.Ea,u,b),nu(u,u.D)),u.D++,!0)}i.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const q=new ha(this,this.j,u);let $=this.o;if(this.U&&($?($=j($),ae($,this.U)):$=this.U),this.u!==null||this.R||(q.J=$,$=null),this.S)e:{for(var b=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(b+=S,b>4096){b=_;break e}if(b===4096||_===this.i.length-1){b=_+1;break e}}b=1e3}else b=1e3;b=Wc(this,q,b),_=qt(this.J),ct(_,"RID",u),ct(_,"CVER",22),this.G&&ct(_,"X-HTTP-Session-Id",this.G),Zs(this,_),$&&(this.R?b="headers="+ci(Jn($))+"&"+b:this.u&&Xs(_,this.u,$)),il(this.h,q),this.Ra&&ct(_,"TYPE","init"),this.S?(ct(_,"$req",b),ct(_,"SID","null"),q.U=!0,Ma(q,_,null)):Ma(q,_,b),this.I=2}}else this.I==3&&(u?ml(this,u):this.i.length==0||al(this.h)||ml(this))};function ml(u,b){var _;b?_=b.l:_=u.V++;const S=qt(u.J);ct(S,"SID",u.M),ct(S,"RID",_),ct(S,"AID",u.K),Zs(u,S),u.u&&u.o&&Xs(S,u.u,u.o),_=new ha(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),b&&(u.i=b.G.concat(u.i)),b=Wc(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),il(u.h,_),Ma(_,S,b)}function Zs(u,b){u.H&&je(u.H,function(_,S){ct(b,S,_)}),u.l&&je({},function(_,S){ct(b,S,_)})}function Wc(u,b,_){_=Math.min(u.i.length,_);const S=u.l?y(u.l.Ka,u.l,u):null;e:{var q=u.i;let Be=-1;for(;;){const kt=["count="+_];Be==-1?_>0?(Be=q[0].g,kt.push("ofs="+Be)):Be=0:kt.push("ofs="+Be);let it=!0;for(let Tt=0;Tt<_;Tt++){var $=q[Tt].g;const Wn=q[Tt].map;if($-=Be,$<0)Be=Math.max(0,q[Tt].g-100),it=!1;else try{$="req"+$+"_"||"";try{var he=Wn instanceof Map?Wn:Object.entries(Wn);for(const[Ga,ba]of he){let va=ba;m(ba)&&(va=At(ba)),kt.push($+Ga+"="+encodeURIComponent(va))}}catch(Ga){throw kt.push($+"type="+encodeURIComponent("_badmap")),Ga}}catch{S&&S(Wn)}}if(it){he=kt.join("&");break e}}he=void 0}return u=u.i.splice(0,_),b.G=u,he}function Zc(u){if(!u.g&&!u.v){u.Y=1;var b=u.Da;le||R(),me||(le(),me=!0),C.add(b,u),u.A=0}}function er(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Oa(y(u.Da,u),nu(u,u.A)),u.A++,!0)}i.Da=function(){if(this.v=null,eu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Oa(y(this.Wa,this),u)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ut(10),Yi(this),eu(this))};function gl(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function eu(u){u.g=new ha(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var b=qt(u.na);ct(b,"RID","rpc"),ct(b,"SID",u.M),ct(b,"AID",u.K),ct(b,"CI",u.F?"0":"1"),!u.F&&u.ia&&ct(b,"TO",u.ia),ct(b,"TYPE","xmlhttp"),Zs(u,b),u.u&&u.o&&Xs(b,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Qs(qt(b)),_.u=null,_.R=!0,Pr(_,u)}i.Va=function(){this.C!=null&&(this.C=null,Yi(this),er(this),Ut(19))};function Gr(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function tu(u,b){var _=null;if(u.g==b){Gr(u),gl(u),u.g=null;var S=2}else if(La(u.h,b))_=b.G,sl(u.h,b),S=1;else return;if(u.I!=0){if(b.o)if(S==1){_=b.u?b.u.length:0,b=Date.now()-b.F;var q=u.D;S=jr(),H(S,new Ia(S,_)),qa(u)}else Zc(u);else if(q=b.m,q==3||q==0&&b.X>0||!(S==1&&Fr(u,b)||S==2&&er(u)))switch(_&&_.length>0&&(b=u.h,b.i=b.i.concat(_)),q){case 1:Fa(u,5);break;case 4:Fa(u,10);break;case 3:Fa(u,6);break;default:Fa(u,2)}}}function nu(u,b){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*b}function Fa(u,b){if(u.j.info("Error code "+b),b==2){var _=y(u.bb,u),S=u.Ua;const q=!S;S=new Vn(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||en(S,"https"),Qs(S),q?ma(S.toString(),_):dl(S.toString(),_)}else Ut(2);u.I=0,u.l&&u.l.pa(b),au(u),qr(u)}i.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function au(u){if(u.I=0,u.ja=[],u.l){const b=rl(u.h);(b.length!=0||u.i.length!=0)&&(U(u.ja,b),U(u.ja,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.oa()}}function iu(u,b,_){var S=_ instanceof Vn?qt(_):new Vn(_);if(S.g!="")b&&(S.g=b+"."+S.g),Hi(S,S.u);else{var q=d.location;S=q.protocol,b=b?b+"."+q.hostname:q.hostname,q=+q.port;const $=new Vn(null);S&&en($,S),b&&($.g=b),q&&Hi($,q),_&&($.h=_),S=$}return _=u.G,b=u.wa,_&&b&&ct(S,_,b),ct(S,"VER",u.ka),Zs(u,S),S}function su(u,b,_){if(b&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=u.Aa&&!u.ma?new ht(new Ua({ab:_})):new ht(u.ma),b.Fa(u.L),b}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ru(){}i=ru.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function Xi(){}Xi.prototype.g=function(u,b){return new xn(u,b)};function xn(u,b){Ge.call(this),this.g=new $i(b),this.l=u,this.h=b&&b.messageUrlParams||null,u=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(u?u["X-WebChannel-Content-Type"]=b.messageContentType:u={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(u?u["X-WebChannel-Client-Profile"]=b.sa:u={"X-WebChannel-Client-Profile":b.sa}),this.g.U=u,(u=b&&b.Qb)&&!w(u)&&(this.g.u=u),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!w(b)&&(this.g.G=b,u=this.h,u!==null&&b in u&&(u=this.h,b in u&&delete u[b])),this.j=new fi(this)}E(xn,Ge),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){pl(this.g)},xn.prototype.o=function(u){var b=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=At(u),u=_);b.i.push(new Ht(b.Ya++,u)),b.I==3&&qa(b)},xn.prototype.N=function(){this.g.l=null,delete this.j,pl(this.g),delete this.g,xn.Z.N.call(this)};function ou(u){an.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var b=u.__sm__;if(b){e:{for(const _ in b){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,b=b!==null&&u in b?b[u]:void 0),this.data=b}else this.data=u}E(ou,an);function lu(){$n.call(this),this.status=1}E(lu,$n);function fi(u){this.g=u}E(fi,ru),fi.prototype.ra=function(){H(this.g,"a")},fi.prototype.qa=function(u){H(this.g,new ou(u))},fi.prototype.pa=function(u){H(this.g,new lu)},fi.prototype.oa=function(){H(this.g,"b")},Xi.prototype.createWebChannel=Xi.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,EE=function(){return new Xi},xE=function(){return jr()},_E=Mt,rm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Gs.NO_ERROR=0,Gs.TIMEOUT=8,Gs.HTTP_ERROR=6,wd=Gs,el.COMPLETE="complete",vE=el,Uc.EventType=da,da.OPEN="a",da.CLOSE="b",da.ERROR="c",da.MESSAGE="d",Ge.prototype.listen=Ge.prototype.J,sc=Uc,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,bE=ht}).apply(typeof pd<"u"?pd:typeof self<"u"?self:typeof window<"u"?window:{});class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");let $o="12.8.0";function S2(i){$o=i}const Sr=new jm("@firebase/firestore");function Ao(){return Sr.logLevel}function ve(i,...e){if(Sr.logLevel<=Xe.DEBUG){const n=e.map($m);Sr.debug(`Firestore (${$o}): ${i}`,...n)}}function Vi(i,...e){if(Sr.logLevel<=Xe.ERROR){const n=e.map($m);Sr.error(`Firestore (${$o}): ${i}`,...n)}}function Po(i,...e){if(Sr.logLevel<=Xe.WARN){const n=e.map($m);Sr.warn(`Firestore (${$o}): ${i}`,...n)}}function $m(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function ke(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,AE(i,s,n)}function AE(i,e,n){let s=`FIRESTORE (${$o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Vi(s),new Error(s)}function rt(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||AE(e,o,s)}function Ue(i,e){return i}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends oi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Di{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class TE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class w2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(yn.UNAUTHENTICATED)))}shutdown(){}}class N2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class R2{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rt(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Di,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Di)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(rt(typeof s.accessToken=="string",31837,{l:s}),new TE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string",2055,{h:e}),new yn(e)}}class C2{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class I2{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new C2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Wv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class O2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){rt(this.o===void 0,3512);const s=c=>{c.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Wv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(rt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Wv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function D2(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Ym{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=D2(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<n&&(s+=e.charAt(o[c]%62))}return s}}function Je(i,e){return i<e?-1:i>e?1:0}function om(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),c=e.charAt(s);if(o!==c)return Hp(o)===Hp(c)?Je(o,c):Hp(o)?1:-1}return Je(i.length,e.length)}const M2=55296,k2=57343;function Hp(i){const e=i.charCodeAt(0);return e>=M2&&e<=k2}function Vo(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const Zv="__name__";class Ja{constructor(e,n,s){n===void 0?n=0:n>e.length&&ke(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ke(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Ja.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ja?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const c=Ja.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Je(e.length,n.length)}static compareSegments(e,n){const s=Ja.isNumericId(e),o=Ja.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Ja.extractNumericId(e).compare(Ja.extractNumericId(n)):om(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ns.fromString(e.substring(4,e.length-2))}}class bt extends Ja{construct(e,n,s){return new bt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(ne.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new bt(n)}static emptyPath(){return new bt([])}}const j2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends Ja{construct(e,n,s){return new dn(e,n,s)}static isValidIdentifier(e){return j2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Zv}static keyField(){return new dn([Zv])}static fromServerFormat(e){const n=[];let s="",o=0;const c=()=>{if(s.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ge(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ge(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(c(),o++)}if(c(),d)throw new ge(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(n)}static emptyPath(){return new dn([])}}class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(bt.fromString(e))}static fromName(e){return new Ie(bt.fromString(e).popFirst(5))}static empty(){return new Ie(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new bt(e.slice()))}}function SE(i,e,n){if(!n)throw new ge(ne.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function P2(i,e,n,s){if(e===!0&&s===!0)throw new ge(ne.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function e_(i){if(!Ie.isDocumentKey(i))throw new ge(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function t_(i){if(Ie.isDocumentKey(i))throw new ge(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function wE(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function cf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ke(12329,{type:typeof i})}function jn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ge(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cf(i);throw new ge(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Xt(i,e){const n={typeString:i};return e&&(n.value=e),n}function Mc(i,e){if(!wE(i))throw new ge(ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const d=i[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new ge(ne.INVALID_ARGUMENT,n);return!0}const n_=-62135596800,a_=1e6;class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*a_);return new xt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<n_)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a_}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Mc(e,xt._jsonSchema))return new xt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-n_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xt._jsonSchemaVersion="firestore/timestamp/1.0",xt._jsonSchema={type:Xt("string",xt._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};class Ve{static fromTimestamp(e){return new Ve(e)}static min(){return new Ve(new xt(0,0))}static max(){return new Ve(new xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const vc=-1;function V2(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Ve.fromTimestamp(s===1e9?new xt(n+1,0):new xt(n,s));return new Is(o,Ie.empty(),e)}function L2(i){return new Is(i.readTime,i.key,vc)}class Is{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Is(Ve.min(),Ie.empty(),vc)}static max(){return new Is(Ve.max(),Ie.empty(),vc)}}function z2(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(i.documentKey,e.documentKey),n!==0?n:Je(i.largestBatchId,e.largestBatchId))}const U2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class B2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Yo(i){if(i.code!==ne.FAILED_PRECONDITION||i.message!==U2)throw i;ve("LocalStore","Unexpectedly lost primary lease")}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):re.reject(n)}static resolve(e){return new re(((n,s)=>{n(e)}))}static reject(e){return new re(((n,s)=>{s(e)}))}static waitFor(e){return new re(((n,s)=>{let o=0,c=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++c,d&&c===o&&n()}),(g=>s(g)))})),d=!0,c===o&&n()}))}static or(e){let n=re.resolve(!1);for(const s of e)n=n.next((o=>o?re.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,c)=>{s.push(n.call(this,o,c))})),this.waitFor(s)}static mapArray(e,n){return new re(((s,o)=>{const c=e.length,d=new Array(c);let m=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((x=>{d[y]=x,++m,m===c&&s(d)}),(x=>o(x)))}}))}static doWhile(e,n){return new re(((s,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):s()};c()}))}}function H2(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xo(i){return i.name==="IndexedDbTransactionError"}class uf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}uf.ce=-1;const Xm=-1;function df(i){return i==null}function Bd(i){return i===0&&1/i==-1/0}function q2(i){return typeof i=="number"&&Number.isInteger(i)&&!Bd(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const NE="";function F2(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=i_(e)),e=G2(i.get(n),e);return i_(e)}function G2(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const c=i.charAt(o);switch(c){case"\0":n+="";break;case NE:n+="";break;default:n+=c}}return n}function i_(i){return i+NE+""}function s_(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ls(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function RE(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Nt{constructor(e,n){this.comparator=e,this.root=n||un.EMPTY}insert(e,n){return new Nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new md(this.root,e,this.comparator,!1)}getReverseIterator(){return new md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new md(this.root,e,this.comparator,!0)}}class md{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??un.RED,this.left=o??un.EMPTY,this.right=c??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,c){return new un(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return un.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ke(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw ke(57766)}get value(){throw ke(16141)}get color(){throw ke(16727)}get left(){throw ke(29726)}get right(){throw ke(36894)}copy(e,n,s,o,c){return this}insert(e,n,s){return new un(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wt{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new r_(this.data.getIterator())}getIteratorFrom(e){return new r_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Wt(this.comparator);return n.data=e,n}}class r_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Kn{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new Kn([])}unionWith(e){let n=new Wt(dn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class CE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new CE("Invalid base64 string: "+c):c}})(e);return new fn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new fn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const K2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Os(i){if(rt(!!i,39018),typeof i=="string"){let e=0;const n=K2.exec(i);if(rt(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Vt(i.seconds),nanos:Vt(i.nanos)}}function Vt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ds(i){return typeof i=="string"?fn.fromBase64String(i):fn.fromUint8Array(i)}const IE="server_timestamp",OE="__type__",DE="__previous_value__",ME="__local_write_time__";function Jm(i){return(i?.mapValue?.fields||{})[OE]?.stringValue===IE}function ff(i){const e=i.mapValue.fields[DE];return Jm(e)?ff(e):e}function _c(i){const e=Os(i.mapValue.fields[ME].timestampValue);return new xt(e.seconds,e.nanos)}class Q2{constructor(e,n,s,o,c,d,m,g,y,x,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=x,this.apiKey=E}}const Hd="(default)";class xc{constructor(e,n){this.projectId=e,this.database=n||Hd}static empty(){return new xc("","")}get isDefaultDatabase(){return this.database===Hd}isEqual(e){return e instanceof xc&&e.projectId===this.projectId&&e.database===this.database}}function $2(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new ge(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xc(i.options.projectId,e)}const kE="__type__",Y2="__max__",gd={mapValue:{}},jE="__vector__",qd="value";function Ms(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Jm(i)?4:J2(i)?9007199254740991:X2(i)?10:11:ke(28295,{value:i})}function ii(i,e){if(i===e)return!0;const n=Ms(i);if(n!==Ms(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return _c(i).isEqual(_c(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=Os(o.timestampValue),m=Os(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,c){return Ds(o.bytesValue).isEqual(Ds(c.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,c){return Vt(o.geoPointValue.latitude)===Vt(c.geoPointValue.latitude)&&Vt(o.geoPointValue.longitude)===Vt(c.geoPointValue.longitude)})(i,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Vt(o.integerValue)===Vt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=Vt(o.doubleValue),m=Vt(c.doubleValue);return d===m?Bd(d)===Bd(m):isNaN(d)&&isNaN(m)}return!1})(i,e);case 9:return Vo(i.arrayValue.values||[],e.arrayValue.values||[],ii);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},m=c.mapValue.fields||{};if(s_(d)!==s_(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!ii(d[g],m[g])))return!1;return!0})(i,e);default:return ke(52216,{left:i})}}function Ec(i,e){return(i.values||[]).find((n=>ii(n,e)))!==void 0}function Lo(i,e){if(i===e)return 0;const n=Ms(i),s=Ms(e);if(n!==s)return Je(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Je(i.booleanValue,e.booleanValue);case 2:return(function(c,d){const m=Vt(c.integerValue||c.doubleValue),g=Vt(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(i,e);case 3:return o_(i.timestampValue,e.timestampValue);case 4:return o_(_c(i),_c(e));case 5:return om(i.stringValue,e.stringValue);case 6:return(function(c,d){const m=Ds(c),g=Ds(d);return m.compareTo(g)})(i.bytesValue,e.bytesValue);case 7:return(function(c,d){const m=c.split("/"),g=d.split("/");for(let y=0;y<m.length&&y<g.length;y++){const x=Je(m[y],g[y]);if(x!==0)return x}return Je(m.length,g.length)})(i.referenceValue,e.referenceValue);case 8:return(function(c,d){const m=Je(Vt(c.latitude),Vt(d.latitude));return m!==0?m:Je(Vt(c.longitude),Vt(d.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return l_(i.arrayValue,e.arrayValue);case 10:return(function(c,d){const m=c.fields||{},g=d.fields||{},y=m[qd]?.arrayValue,x=g[qd]?.arrayValue,E=Je(y?.values?.length||0,x?.values?.length||0);return E!==0?E:l_(y,x)})(i.mapValue,e.mapValue);case 11:return(function(c,d){if(c===gd.mapValue&&d===gd.mapValue)return 0;if(c===gd.mapValue)return 1;if(d===gd.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),y=d.fields||{},x=Object.keys(y);g.sort(),x.sort();for(let E=0;E<g.length&&E<x.length;++E){const N=om(g[E],x[E]);if(N!==0)return N;const P=Lo(m[g[E]],y[x[E]]);if(P!==0)return P}return Je(g.length,x.length)})(i.mapValue,e.mapValue);default:throw ke(23264,{he:n})}}function o_(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Je(i,e);const n=Os(i),s=Os(e),o=Je(n.seconds,s.seconds);return o!==0?o:Je(n.nanos,s.nanos)}function l_(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const c=Lo(n[o],s[o]);if(c)return c}return Je(n.length,s.length)}function zo(i){return lm(i)}function lm(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=Os(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Ds(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Ie.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const c of n.values||[])o?o=!1:s+=",",s+=lm(c);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of s)c?c=!1:o+=",",o+=`${d}:${lm(n.fields[d])}`;return o+"}"})(i.mapValue):ke(61005,{value:i})}function Nd(i){switch(Ms(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ff(i);return e?16+Nd(e):16;case 5:return 2*i.stringValue.length;case 6:return Ds(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+Nd(c)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Ls(s.fields,((c,d)=>{o+=c.length+Nd(d)})),o})(i.mapValue);default:throw ke(13486,{value:i})}}function c_(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function cm(i){return!!i&&"integerValue"in i}function Wm(i){return!!i&&"arrayValue"in i}function u_(i){return!!i&&"nullValue"in i}function d_(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Rd(i){return!!i&&"mapValue"in i}function X2(i){return(i?.mapValue?.fields||{})[kE]?.stringValue===jE}function dc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Ls(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=dc(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dc(i.arrayValue.values[n]);return e}return{...i}}function J2(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Y2}class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Rd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dc(n)}setAll(e){let n=dn.emptyPath(),s={},o=[];e.forEach(((d,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=m.popLast()}d?s[m.lastSegment()]=dc(d):o.push(m.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,o)}delete(e){const n=this.field(e.popLast());Rd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Rd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Ls(n,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new On(dc(this.value))}}function PE(i){const e=[];return Ls(i.fields,((n,s)=>{const o=new dn([n]);if(Rd(s)){const c=PE(s.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new Kn(e)}class bn{constructor(e,n,s,o,c,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new bn(e,0,Ve.min(),Ve.min(),Ve.min(),On.empty(),0)}static newFoundDocument(e,n,s,o){return new bn(e,1,n,Ve.min(),s,o,0)}static newNoDocument(e,n){return new bn(e,2,n,Ve.min(),Ve.min(),On.empty(),0)}static newUnknownDocument(e,n){return new bn(e,3,n,Ve.min(),Ve.min(),On.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fd{constructor(e,n){this.position=e,this.inclusive=n}}function f_(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const c=e[o],d=i.position[o];if(c.field.isKeyField()?s=Ie.comparator(Ie.fromName(d.referenceValue),n.key):s=Lo(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function h_(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ii(i.position[n],e.position[n]))return!1;return!0}class Ac{constructor(e,n="asc"){this.field=e,this.dir=n}}function W2(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class VE{}class Yt extends VE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new eI(e,n,s):n==="array-contains"?new aI(e,s):n==="in"?new iI(e,s):n==="not-in"?new sI(e,s):n==="array-contains-any"?new rI(e,s):new Yt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new tI(e,s):new nI(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Lo(n,this.value)):n!==null&&Ms(this.value)===Ms(n)&&this.matchesComparison(Lo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ra extends VE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ra(e,n)}matches(e){return LE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function LE(i){return i.op==="and"}function zE(i){return Z2(i)&&LE(i)}function Z2(i){for(const e of i.filters)if(e instanceof Ra)return!1;return!0}function um(i){if(i instanceof Yt)return i.field.canonicalString()+i.op.toString()+zo(i.value);if(zE(i))return i.filters.map((e=>um(e))).join(",");{const e=i.filters.map((n=>um(n))).join(",");return`${i.op}(${e})`}}function UE(i,e){return i instanceof Yt?(function(s,o){return o instanceof Yt&&s.op===o.op&&s.field.isEqual(o.field)&&ii(s.value,o.value)})(i,e):i instanceof Ra?(function(s,o){return o instanceof Ra&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,d,m)=>c&&UE(d,o.filters[m])),!0):!1})(i,e):void ke(19439)}function BE(i){return i instanceof Yt?(function(n){return`${n.field.canonicalString()} ${n.op} ${zo(n.value)}`})(i):i instanceof Ra?(function(n){return n.op.toString()+" {"+n.getFilters().map(BE).join(" ,")+"}"})(i):"Filter"}class eI extends Yt{constructor(e,n,s){super(e,n,s),this.key=Ie.fromName(s.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class tI extends Yt{constructor(e,n){super(e,"in",n),this.keys=HE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class nI extends Yt{constructor(e,n){super(e,"not-in",n),this.keys=HE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function HE(i,e){return(e.arrayValue?.values||[]).map((n=>Ie.fromName(n.referenceValue)))}class aI extends Yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Wm(n)&&Ec(n.arrayValue,this.value)}}class iI extends Yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ec(this.value.arrayValue,n)}}class sI extends Yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ec(this.value.arrayValue,n)}}class rI extends Yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Wm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Ec(this.value.arrayValue,s)))}}class oI{constructor(e,n=null,s=[],o=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=d,this.endAt=m,this.Te=null}}function p_(i,e=null,n=[],s=[],o=null,c=null,d=null){return new oI(i,e,n,s,o,c,d)}function Zm(i){const e=Ue(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>um(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),df(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>zo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>zo(s))).join(",")),e.Te=n}return e.Te}function eg(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!W2(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!UE(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!h_(i.startAt,e.startAt)&&h_(i.endAt,e.endAt)}function dm(i){return Ie.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Jo{constructor(e,n=null,s=[],o=[],c=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function lI(i,e,n,s,o,c,d,m){return new Jo(i,e,n,s,o,c,d,m)}function hf(i){return new Jo(i)}function m_(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function cI(i){return Ie.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function qE(i){return i.collectionGroup!==null}function fc(i){const e=Ue(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Wt(dn.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Ac(c,s))})),n.has(dn.keyField().canonicalString())||e.Ie.push(new Ac(dn.keyField(),s))}return e.Ie}function ti(i){const e=Ue(i);return e.Ee||(e.Ee=uI(e,fc(i))),e.Ee}function uI(i,e){if(i.limitType==="F")return p_(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new Ac(o.field,c)}));const n=i.endAt?new Fd(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Fd(i.startAt.position,i.startAt.inclusive):null;return p_(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function fm(i,e){const n=i.filters.concat([e]);return new Jo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function dI(i,e){const n=i.explicitOrderBy.concat([e]);return new Jo(i.path,i.collectionGroup,n,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function hm(i,e,n){return new Jo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function pf(i,e){return eg(ti(i),ti(e))&&i.limitType===e.limitType}function FE(i){return`${Zm(ti(i))}|lt:${i.limitType}`}function To(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>BE(o))).join(", ")}]`),df(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>zo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>zo(o))).join(",")),`Target(${s})`})(ti(i))}; limitType=${i.limitType})`}function mf(i,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ie.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(i,e)&&(function(s,o){for(const c of fc(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(d,m,g){const y=f_(d,m,g);return d.inclusive?y<=0:y<0})(s.startAt,fc(s),o)||s.endAt&&!(function(d,m,g){const y=f_(d,m,g);return d.inclusive?y>=0:y>0})(s.endAt,fc(s),o))})(i,e)}function fI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function GE(i){return(e,n)=>{let s=!1;for(const o of fc(i)){const c=hI(o,e,n);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function hI(i,e,n){const s=i.field.isKeyField()?Ie.comparator(e.key,n.key):(function(c,d,m){const g=d.data.field(c),y=m.data.field(c);return g!==null&&y!==null?Lo(g,y):ke(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return ke(19790,{direction:i.dir})}}class Dr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,((n,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return RE(this.inner)}size(){return this.innerSize}}const pI=new Nt(Ie.comparator);function Li(){return pI}const KE=new Nt(Ie.comparator);function rc(...i){let e=KE;for(const n of i)e=e.insert(n.key,n);return e}function QE(i){let e=KE;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function br(){return hc()}function $E(){return hc()}function hc(){return new Dr((i=>i.toString()),((i,e)=>i.isEqual(e)))}const mI=new Nt(Ie.comparator),gI=new Wt(Ie.comparator);function We(...i){let e=gI;for(const n of i)e=e.add(n);return e}const yI=new Wt(Je);function bI(){return yI}function tg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function YE(i){return{integerValue:""+i}}function vI(i,e){return q2(e)?YE(e):tg(i,e)}class gf{constructor(){this._=void 0}}function _I(i,e,n){return i instanceof Tc?(function(o,c){const d={fields:{[OE]:{stringValue:IE},[ME]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Jm(c)&&(c=ff(c)),c&&(d.fields[DE]=c),{mapValue:d}})(n,e):i instanceof Uo?JE(i,e):i instanceof Bo?WE(i,e):(function(o,c){const d=XE(o,c),m=g_(d)+g_(o.Ae);return cm(d)&&cm(o.Ae)?YE(m):tg(o.serializer,m)})(i,e)}function xI(i,e,n){return i instanceof Uo?JE(i,e):i instanceof Bo?WE(i,e):n}function XE(i,e){return i instanceof Gd?(function(s){return cm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class Tc extends gf{}class Uo extends gf{constructor(e){super(),this.elements=e}}function JE(i,e){const n=ZE(e);for(const s of i.elements)n.some((o=>ii(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Bo extends gf{constructor(e){super(),this.elements=e}}function WE(i,e){let n=ZE(e);for(const s of i.elements)n=n.filter((o=>!ii(o,s)));return{arrayValue:{values:n}}}class Gd extends gf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function g_(i){return Vt(i.integerValue||i.doubleValue)}function ZE(i){return Wm(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class ng{constructor(e,n){this.field=e,this.transform=n}}function EI(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Uo&&o instanceof Uo||s instanceof Bo&&o instanceof Bo?Vo(s.elements,o.elements,ii):s instanceof Gd&&o instanceof Gd?ii(s.Ae,o.Ae):s instanceof Tc&&o instanceof Tc})(i.transform,e.transform)}class AI{constructor(e,n){this.version=e,this.transformResults=n}}class la{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new la}static exists(e){return new la(void 0,e)}static updateTime(e){return new la(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class yf{}function eA(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new ag(i.key,la.none()):new kc(i.key,i.data,la.none());{const n=i.data,s=On.empty();let o=new Wt(dn.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),o=o.add(c)}return new zs(i.key,s,new Kn(o.toArray()),la.none())}}function TI(i,e,n){i instanceof kc?(function(o,c,d){const m=o.value.clone(),g=b_(o.fieldTransforms,c,d.transformResults);m.setAll(g),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(i,e,n):i instanceof zs?(function(o,c,d){if(!Cd(o.precondition,c))return void c.convertToUnknownDocument(d.version);const m=b_(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(tA(o)),g.setAll(m),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(i,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function pc(i,e,n,s){return i instanceof kc?(function(c,d,m,g){if(!Cd(c.precondition,d))return m;const y=c.value.clone(),x=v_(c.fieldTransforms,g,d);return y.setAll(x),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(i,e,n,s):i instanceof zs?(function(c,d,m,g){if(!Cd(c.precondition,d))return m;const y=v_(c.fieldTransforms,g,d),x=d.data;return x.setAll(tA(c)),x.setAll(y),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(i,e,n,s):(function(c,d,m){return Cd(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(i,e,n)}function SI(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),c=XE(s.transform,o||null);c!=null&&(n===null&&(n=On.empty()),n.set(s.field,c))}return n||null}function y_(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Vo(s,o,((c,d)=>EI(c,d)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class kc extends yf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class zs extends yf{constructor(e,n,s,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function tA(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function b_(i,e,n){const s=new Map;rt(i.length===n.length,32656,{Ve:n.length,de:i.length});for(let o=0;o<n.length;o++){const c=i[o],d=c.transform,m=e.data.field(c.field);s.set(c.field,xI(d,m,n[o]))}return s}function v_(i,e,n){const s=new Map;for(const o of i){const c=o.transform,d=n.data.field(o.field);s.set(o.field,_I(c,d,e))}return s}class ag extends yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wI extends yf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class NI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&TI(c,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=pc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=pc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=$E();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(o.key)?null:m;const g=eA(d,m);g!==null&&s.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Ve.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),We())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,((n,s)=>y_(n,s)))&&Vo(this.baseMutations,e.baseMutations,((n,s)=>y_(n,s)))}}class ig{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){rt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return mI})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,s[d].version);return new ig(e,n,s,o)}}class RI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class CI{constructor(e,n){this.count=e,this.unchangedNames=n}}var $t,tt;function II(i){switch(i){case ne.OK:return ke(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return ke(15467,{code:i})}}function nA(i){if(i===void 0)return Vi("GRPC error has no .code"),ne.UNKNOWN;switch(i){case $t.OK:return ne.OK;case $t.CANCELLED:return ne.CANCELLED;case $t.UNKNOWN:return ne.UNKNOWN;case $t.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case $t.INTERNAL:return ne.INTERNAL;case $t.UNAVAILABLE:return ne.UNAVAILABLE;case $t.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case $t.NOT_FOUND:return ne.NOT_FOUND;case $t.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case $t.ABORTED:return ne.ABORTED;case $t.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case $t.DATA_LOSS:return ne.DATA_LOSS;default:return ke(39323,{code:i})}}(tt=$t||($t={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";function OI(){return new TextEncoder}const DI=new Ns([4294967295,4294967295],0);function __(i){const e=OI().encode(i),n=new yE;return n.update(e),new Uint8Array(n.digest())}function x_(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ns([n,s],0),new Ns([o,c],0)]}class sg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new oc(`Invalid padding: ${n}`);if(s<0)throw new oc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new oc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new oc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ns.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Ns.fromNumber(s)));return o.compare(DI)===1&&(o=new Ns([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=__(e),[s,o]=x_(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new sg(c,o,n);return s.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const n=__(e),[s,o]=x_(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);this.be(d)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class bf{constructor(e,n,s,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,jc.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new bf(Ve.min(),o,new Nt(Je),Li(),We())}}class jc{constructor(e,n,s,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new jc(s,n,We(),We(),We())}}class Id{constructor(e,n,s,o){this.Se=e,this.removedTargetIds=n,this.key=s,this.De=o}}class aA{constructor(e,n){this.targetId=e,this.Ce=n}}class iA{constructor(e,n,s=fn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class E_{constructor(){this.ve=0,this.Fe=A_(),this.Me=fn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=We(),n=We(),s=We();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:ke(38017,{changeType:c})}})),new jc(this.Me,this.xe,e,n,s)}Ke(){this.Oe=!1,this.Fe=A_()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,rt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class MI{constructor(e){this.Ge=e,this.ze=new Map,this.je=Li(),this.He=yd(),this.Je=yd(),this.Ze=new Nt(Je)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:ke(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(dm(c))if(s===0){const d=new Ie(c.path);this.et(n,d,bn.newNoDocument(d,Ve.min()))}else rt(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const m=this.ut(e),g=m?this.ct(m,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=n;let d,m;try{d=Ds(s).toUint8Array()}catch(g){if(g instanceof CE)return Po("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new sg(d,o,c)}catch(g){return Po(g instanceof oc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((c=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const m=this.ot(d);if(m){if(c.current&&dm(m.target)){const g=new Ie(m.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,bn.newNoDocument(g,e))}c.Be&&(n.set(d,c.ke()),c.Ke())}}));let s=We();this.Je.forEach(((c,d)=>{let m=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new bf(e,n,this.Ze,this.je,s);return this.je=Li(),this.He=yd(),this.Je=yd(),this.Ze=new Nt(Je),o}Ye(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,s),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new E_,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Wt(Je),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Wt(Je),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new E_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function yd(){return new Nt(Ie.comparator)}function A_(){return new Nt(Ie.comparator)}const kI={asc:"ASCENDING",desc:"DESCENDING"},jI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PI={and:"AND",or:"OR"};class VI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pm(i,e){return i.useProto3Json||df(e)?e:{value:e}}function Kd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sA(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function LI(i,e){return Kd(i,e.toTimestamp())}function ni(i){return rt(!!i,49232),Ve.fromTimestamp((function(n){const s=Os(n);return new xt(s.seconds,s.nanos)})(i))}function rg(i,e){return mm(i,e).canonicalString()}function mm(i,e){const n=(function(o){return new bt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function rA(i){const e=bt.fromString(i);return rt(dA(e),10190,{key:e.toString()}),e}function gm(i,e){return rg(i.databaseId,e.path)}function qp(i,e){const n=rA(e);if(n.get(1)!==i.databaseId.projectId)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ie(lA(n))}function oA(i,e){return rg(i.databaseId,e)}function zI(i){const e=rA(i);return e.length===4?bt.emptyPath():lA(e)}function ym(i){return new bt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function lA(i){return rt(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function T_(i,e,n){return{name:gm(i,e),fields:n.value.mapValue.fields}}function UI(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ke(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(y,x){return y.useProto3Json?(rt(x===void 0||typeof x=="string",58123),fn.fromBase64String(x||"")):(rt(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),fn.fromUint8Array(x||new Uint8Array))})(i,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(y){const x=y.code===void 0?ne.UNKNOWN:nA(y.code);return new ge(x,y.message||"")})(d);n=new iA(s,o,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=qp(i,s.document.name),c=ni(s.document.updateTime),d=s.document.createTime?ni(s.document.createTime):Ve.min(),m=new On({mapValue:{fields:s.document.fields}}),g=bn.newFoundDocument(o,c,d,m),y=s.targetIds||[],x=s.removedTargetIds||[];n=new Id(y,x,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=qp(i,s.document),c=s.readTime?ni(s.readTime):Ve.min(),d=bn.newNoDocument(o,c),m=s.removedTargetIds||[];n=new Id([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=qp(i,s.document),c=s.removedTargetIds||[];n=new Id([],c,o,null)}else{if(!("filter"in e))return ke(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,d=new CI(o,c),m=s.targetId;n=new aA(m,d)}}return n}function BI(i,e){let n;if(e instanceof kc)n={update:T_(i,e.key,e.value)};else if(e instanceof ag)n={delete:gm(i,e.key)};else if(e instanceof zs)n={update:T_(i,e.key,e.data),updateMask:XI(e.fieldMask)};else{if(!(e instanceof wI))return ke(16599,{dt:e.type});n={verify:gm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const m=d.transform;if(m instanceof Tc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Uo)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Bo)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Gd)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw ke(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:LI(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:ke(27497)})(i,e.precondition)),n}function HI(i,e){return i&&i.length>0?(rt(e!==void 0,14353),i.map((n=>(function(o,c){let d=o.updateTime?ni(o.updateTime):ni(c);return d.isEqual(Ve.min())&&(d=ni(c)),new AI(d,o.transformResults||[])})(n,e)))):[]}function qI(i,e){return{documents:[oA(i,e.path)]}}function FI(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=oA(i,o);const c=(function(y){if(y.length!==0)return uA(Ra.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(y){if(y.length!==0)return y.map((x=>(function(N){return{field:So(N.field),direction:QI(N.dir)}})(x)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=pm(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function GI(i){let e=zI(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){rt(s===1,65062);const x=n.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let c=[];n.where&&(c=(function(E){const N=cA(E);return N instanceof Ra&&zE(N)?N.getFilters():[N]})(n.where));let d=[];n.orderBy&&(d=(function(E){return E.map((N=>(function(U){return new Ac(wo(U.field),(function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(N)))})(n.orderBy));let m=null;n.limit&&(m=(function(E){let N;return N=typeof E=="object"?E.value:E,df(N)?null:N})(n.limit));let g=null;n.startAt&&(g=(function(E){const N=!!E.before,P=E.values||[];return new Fd(P,N)})(n.startAt));let y=null;return n.endAt&&(y=(function(E){const N=!E.before,P=E.values||[];return new Fd(P,N)})(n.endAt)),lI(e,o,d,c,m,"F",g,y)}function KI(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cA(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=wo(n.unaryFilter.field);return Yt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=wo(n.unaryFilter.field);return Yt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=wo(n.unaryFilter.field);return Yt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=wo(n.unaryFilter.field);return Yt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ke(61313);default:return ke(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Yt.create(wo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ke(58110);default:return ke(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return Ra.create(n.compositeFilter.filters.map((s=>cA(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ke(1026)}})(n.compositeFilter.op))})(i):ke(30097,{filter:i})}function QI(i){return kI[i]}function $I(i){return jI[i]}function YI(i){return PI[i]}function So(i){return{fieldPath:i.canonicalString()}}function wo(i){return dn.fromServerFormat(i.fieldPath)}function uA(i){return i instanceof Yt?(function(n){if(n.op==="=="){if(d_(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NAN"}};if(u_(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(d_(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NAN"}};if(u_(n.value))return{unaryFilter:{field:So(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(n.field),op:$I(n.op),value:n.value}}})(i):i instanceof Ra?(function(n){const s=n.getFilters().map((o=>uA(o)));return s.length===1?s[0]:{compositeFilter:{op:YI(n.op),filters:s}}})(i):ke(54877,{filter:i})}function XI(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function dA(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function fA(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class Ts{constructor(e,n,s,o,c=Ve.min(),d=Ve.min(),m=fn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class JI{constructor(e){this.yt=e}}function WI(i){const e=GI({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?hm(e,e.limit,"L"):e}class ZI{constructor(){this.Sn=new eO}addToCollectionParentIndex(e,n){return this.Sn.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(Is.min())}updateCollectionGroup(e,n,s){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class eO{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Wt(bt.comparator),c=!o.has(s);return this.index[n]=o.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Wt(bt.comparator)).toArray()}}const S_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hA=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(hA,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);class Ho{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ho(0)}static ar(){return new Ho(-1)}}const w_="LruGarbageCollector",tO=1048576;function N_([i,e],[n,s]){const o=Je(i,n);return o===0?Je(e,s):o}class nO{constructor(e){this.Pr=e,this.buffer=new Wt(N_),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();N_(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class aO{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ve(w_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xo(n)?ve(w_,"Ignoring IndexedDB error during garbage collection: ",n):await Yo(n)}await this.Ar(3e5)}))}}class iO{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return re.resolve(uf.ce);const s=new nO(n);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(S_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),S_):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let s,o,c,d,m,g,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,d=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,m=Date.now(),this.removeTargets(e,s,n)))).next((E=>(c=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(y=Date.now(),Ao()<=Xe.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-x}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-x}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:E}))))}}function sO(i,e){return new iO(i,e)}class rO{constructor(){this.changes=new Dr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?re.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class oO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class lO{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&pc(s.mutation,o,Kn.empty(),xt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,We()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=We()){const o=br();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((c=>{let d=rc();return c.forEach(((m,g)=>{d=d.insert(m,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=br();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,We())))}populateOverlays(e,n,s){const o=[];return s.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,m)=>{n.set(d,m)}))}))}computeViews(e,n,s,o){let c=Li();const d=hc(),m=(function(){return hc()})();return n.forEach(((g,y)=>{const x=s.get(y.key);o.has(y.key)&&(x===void 0||x.mutation instanceof zs)?c=c.insert(y.key,y):x!==void 0?(d.set(y.key,x.mutation.getFieldMask()),pc(x.mutation,y,x.mutation.getFieldMask(),xt.now())):d.set(y.key,Kn.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,x)=>d.set(y,x))),n.forEach(((y,x)=>m.set(y,new oO(x,d.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,n){const s=hc();let o=new Nt(((d,m)=>d-m)),c=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const m of d)m.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let x=s.get(g)||Kn.empty();x=m.applyToLocalView(y,x),s.set(g,x);const E=(o.get(m.batchId)||We()).add(g);o=o.insert(m.batchId,E)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,x=g.value,E=$E();x.forEach((N=>{if(!c.has(N)){const P=eA(n.get(N),s.get(N));P!==null&&E.set(N,P),c=c.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,E))}return re.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return cI(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-c.size):re.resolve(br());let m=vc,g=c;return d.next((y=>re.forEach(y,((x,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),c.get(x)?re.resolve():this.remoteDocumentCache.getEntry(e,x).next((N=>{g=g.insert(x,N)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,We()))).next((x=>({batchId:m,changes:QE(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next((s=>{let o=rc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const c=n.collectionGroup;let d=rc();return this.indexManager.getCollectionParents(e,c).next((m=>re.forEach(m,(g=>{const y=(function(E,N){return new Jo(N,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((x=>{x.forEach(((E,N)=>{d=d.insert(E,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,o)))).next((d=>{c.forEach(((g,y)=>{const x=y.getKey();d.get(x)===null&&(d=d.insert(x,bn.newInvalidDocument(x)))}));let m=rc();return d.forEach(((g,y)=>{const x=c.get(g);x!==void 0&&pc(x.mutation,y,Kn.empty(),xt.now()),mf(n,y)&&(m=m.insert(g,y))})),m}))}}class cO{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return re.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ni(o.createTime)}})(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:WI(o.bundledQuery),readTime:ni(o.readTime)}})(n)),re.resolve()}}class uO{constructor(){this.overlays=new Nt(Ie.comparator),this.Lr=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const s=br();return re.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,c)=>{this.bt(e,n,c)})),re.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(s)),re.resolve()}getOverlaysForCollection(e,n,s){const o=br(),c=n.length+1,d=new Ie(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>s&&o.set(g.getKey(),g)}return re.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let c=new Nt(((y,x)=>y-x));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let x=c.get(y.largestBatchId);x===null&&(x=br(),c=c.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const m=br(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,x)=>m.set(y,x))),!(m.size()>=o)););return re.resolve(m)}bt(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new RI(n,s));let c=this.Lr.get(n);c===void 0&&(c=We(),this.Lr.set(n,c)),this.Lr.set(n,c.add(s.key))}}class dO{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}class og{constructor(){this.kr=new Wt(nn.Kr),this.qr=new Wt(nn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const s=new nn(e,n);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Wr(new nn(e,n))}Qr(e,n){e.forEach((s=>this.removeReference(s,n)))}Gr(e){const n=new Ie(new bt([])),s=new nn(n,e),o=new nn(n,e+1),c=[];return this.qr.forEachInRange([s,o],(d=>{this.Wr(d),c.push(d.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ie(new bt([])),s=new nn(n,e),o=new nn(n,e+1);let c=We();return this.qr.forEachInRange([s,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new nn(e,0),s=this.kr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class nn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ie.comparator(e.key,n.key)||Je(e.Hr,n.Hr)}static Ur(e,n){return Je(e.Hr,n.Hr)||Ie.comparator(e.key,n.key)}}class fO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Wt(nn.Kr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new NI(c,n,s,o);this.mutationQueue.push(d);for(const m of o)this.Jr=this.Jr.add(new nn(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return re.resolve(d)}lookupMutationBatch(e,n){return re.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Xr(s),c=o<0?0:o;return re.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Xm:this.Yn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new nn(n,0),o=new nn(n,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([s,o],(d=>{const m=this.Zr(d.Hr);c.push(m)})),re.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Wt(Je);return n.forEach((o=>{const c=new nn(o,0),d=new nn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,d],(m=>{s=s.add(m.Hr)}))})),re.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let c=s;Ie.isDocumentKey(c)||(c=c.child(""));const d=new nn(new Ie(c),0);let m=new Wt(Je);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Hr)),!0)}),d),re.resolve(this.Yr(m))}Yr(e){const n=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){rt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return re.forEach(n.mutations,(o=>{const c=new nn(o.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,n){const s=new nn(n,0),o=this.Jr.firstAfterOrEqual(s);return re.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class hO{constructor(e){this.ti=e,this.docs=(function(){return new Nt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),c=o?o.size:0,d=this.ti(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return re.resolve(s?s.document.mutableCopy():bn.newInvalidDocument(n))}getEntries(e,n){let s=Li();return n.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():bn.newInvalidDocument(o))})),re.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let c=Li();const d=n.path,m=new Ie(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:x}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||z2(L2(x),s)<=0||(o.has(x.key)||mf(n,x))&&(c=c.insert(x.key,x.mutableCopy()))}return re.resolve(c)}getAllFromCollectionGroup(e,n,s,o){ke(9500)}ni(e,n){return re.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new pO(this)}getSize(e){return re.resolve(this.size)}}class pO extends rO{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),re.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class mO{constructor(e){this.persistence=e,this.ri=new Dr((n=>Zm(n)),eg),this.lastRemoteSnapshotVersion=Ve.min(),this.highestTargetId=0,this.ii=0,this.si=new og,this.targetCount=0,this.oi=Ho._r()}forEachTarget(e,n){return this.ri.forEach(((s,o)=>n(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ii&&(this.ii=n),re.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ho(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.lr(n),re.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,s){let o=0;const c=[];return this.ri.forEach(((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.ri.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),re.waitFor(c).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const s=this.ri.get(n)||null;return re.resolve(s)}addMatchingKeys(e,n,s){return this.si.$r(n,s),re.resolve()}removeMatchingKeys(e,n,s){this.si.Qr(n,s);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),re.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const s=this.si.jr(n);return re.resolve(s)}containsKey(e,n){return re.resolve(this.si.containsKey(n))}}class pA{constructor(e,n){this._i={},this.overlays={},this.ai=new uf(0),this.ui=!1,this.ui=!0,this.ci=new dO,this.referenceDelegate=e(this),this.li=new mO(this),this.indexManager=new ZI,this.remoteDocumentCache=(function(o){return new hO(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new JI(n),this.Pi=new cO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this._i[e.toKey()];return s||(s=new fO(n,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,s){ve("MemoryPersistence","Starting transaction:",e);const o=new gO(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((c=>this.referenceDelegate.Ii(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ei(e,n){return re.or(Object.values(this._i).map((s=>()=>s.containsKey(e,n))))}}class gO extends B2{constructor(e){super(),this.currentSequenceNumber=e}}class lg{constructor(e){this.persistence=e,this.Ri=new og,this.Ai=null}static Vi(e){return new lg(e)}get di(){if(this.Ai)return this.Ai;throw ke(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.di.delete(s.toString()),re.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.di.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),re.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.di.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,(s=>{const o=Ie.fromPath(s);return this.mi(e,o).next((c=>{c||n.removeEntry(o,Ve.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return re.or([()=>re.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Qd{constructor(e,n){this.persistence=e,this.fi=new Dr((s=>F2(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=sO(this,n)}static Vi(e,n){return new Qd(e,n)}Ti(){}Ii(e){return re.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}pr(e){let n=0;return this.mr(e,(s=>{n++})).next((()=>n))}mr(e,n){return re.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((c=>c?re.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ni(e,(d=>this.wr(e,d,n).next((m=>{m||(s++,c.removeEntry(d,Ve.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),re.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),re.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Nd(e.data.value)),n}wr(e,n,s){return re.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return re.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class cg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Ts=s,this.Is=o}static Es(e,n){let s=We(),o=We();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new cg(e,n.fromCache,s,o)}}class yO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class bO{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Gw()?8:H2(vn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const c={result:null};return this.gs(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ps(e,n,o,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new yO;return this.ys(e,n,d).next((m=>{if(c.result=m,this.As)return this.ws(e,n,d,m.size)}))})).next((()=>c.result))}ws(e,n,s,o){return s.documentReadCount<this.Vs?(Ao()<=Xe.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",To(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(Ao()<=Xe.DEBUG&&ve("QueryEngine","Query:",To(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(Ao()<=Xe.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",To(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(n))):re.resolve())}gs(e,n){if(m_(n))return re.resolve(null);let s=ti(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=hm(n,null,"F"),s=ti(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=We(...c);return this.fs.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.bs(n,m);return this.Ss(n,y,d,g.readTime)?this.gs(e,hm(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,s,o){return m_(n)||o.isEqual(Ve.min())?re.resolve(null):this.fs.getDocuments(e,s).next((c=>{const d=this.bs(n,c);return this.Ss(n,d,s,o)?re.resolve(null):(Ao()<=Xe.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),To(n)),this.Ds(e,d,n,V2(o,vc)).next((m=>m)))}))}bs(e,n){let s=new Wt(GE(e));return n.forEach(((o,c)=>{mf(e,c)&&(s=s.add(c))})),s}Ss(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}ys(e,n,s){return Ao()<=Xe.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",To(n)),this.fs.getDocumentsMatchingQuery(e,n,Is.min(),s)}Ds(e,n,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}const ug="LocalStore",vO=3e8;class _O{constructor(e,n,s,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new Nt(Je),this.Fs=new Dr((c=>Zm(c)),eg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lO(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function xO(i,e,n,s){return new _O(i,e,n,s)}async function mA(i,e){const n=Ue(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,n.Os(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],m=[];let g=We();for(const y of o){d.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}for(const y of c){m.push(y.batchId);for(const x of y.mutations)g=g.add(x.key)}return n.localDocuments.getDocuments(s,g).next((y=>({Ns:y,removedBatchIds:d,addedBatchIds:m})))}))}))}function EO(i,e){const n=Ue(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=n.xs.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,x){const E=y.batch,N=E.keys();let P=re.resolve();return N.forEach((U=>{P=P.next((()=>x.getEntry(g,U))).next((L=>{const z=y.docVersions.get(U);rt(z!==null,48541),L.version.compareTo(z)<0&&(E.applyToRemoteDocument(L,y),L.isValidDocument()&&(L.setReadTime(y.commitVersion),x.addEntry(L)))}))})),P.next((()=>m.mutationQueue.removeMutationBatch(g,E)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=We();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function gA(i){const e=Ue(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function AO(i,e){const n=Ue(i),s=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const m=[];e.targetChanges.forEach(((x,E)=>{const N=o.get(E);if(!N)return;m.push(n.li.removeMatchingKeys(c,x.removedDocuments,E).next((()=>n.li.addMatchingKeys(c,x.addedDocuments,E))));let P=N.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?P=P.withResumeToken(fn.EMPTY_BYTE_STRING,Ve.min()).withLastLimboFreeSnapshotVersion(Ve.min()):x.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(x.resumeToken,s)),o=o.insert(E,P),(function(L,z,W){return L.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=vO?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(N,P,x)&&m.push(n.li.updateTargetData(c,P))}));let g=Li(),y=We();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,x))})),m.push(TO(c,d,e.documentUpdates).next((x=>{g=x.Bs,y=x.Ls}))),!s.isEqual(Ve.min())){const x=n.li.getLastRemoteSnapshotVersion(c).next((E=>n.li.setTargetsMetadata(c,c.currentSequenceNumber,s)));m.push(x)}return re.waitFor(m).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.vs=o,c)))}function TO(i,e,n){let s=We(),o=We();return n.forEach((c=>s=s.add(c))),e.getEntries(i,s).next((c=>{let d=Li();return n.forEach(((m,g)=>{const y=c.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ve.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):ve(ug,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{Bs:d,Ls:o}}))}function SO(i,e){const n=Ue(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Xm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function wO(i,e){const n=Ue(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.li.getTargetData(s,e).next((c=>c?(o=c,re.resolve(o)):n.li.allocateTargetId(s).next((d=>(o=new Ts(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(s.targetId,s),n.Fs.set(e,s.targetId)),s}))}async function bm(i,e,n){const s=Ue(i),o=s.vs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Xo(d))throw d;ve(ug,`Failed to update sequence numbers for target ${e}: ${d}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function R_(i,e,n){const s=Ue(i);let o=Ve.min(),c=We();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,x){const E=Ue(g),N=E.Fs.get(x);return N!==void 0?re.resolve(E.vs.get(N)):E.li.getTargetData(y,x)})(s,d,ti(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(d,m.targetId).next((g=>{c=g}))})).next((()=>s.Cs.getDocumentsMatchingQuery(d,e,n?o:Ve.min(),n?c:We()))).next((m=>(NO(s,fI(e),m),{documents:m,ks:c})))))}function NO(i,e,n){let s=i.Ms.get(e)||Ve.min();n.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),i.Ms.set(e,s)}class C_{constructor(){this.activeTargetIds=bI()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RO{constructor(){this.vo=new C_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,s){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new C_,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class CO{Mo(e){}shutdown(){}}const I_="ConnectivityMonitor";class O_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ve(I_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ve(I_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let bd=null;function vm(){return bd===null?bd=(function(){return 268435456+Math.round(2147483648*Math.random())})():bd++,"0x"+bd.toString(16)}const Fp="RestConnection",IO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class OO{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===Hd?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,n,s,o,c){const d=vm(),m=this.Qo(e,n.toUriEncodedString());ve(Fp,`Sending RPC '${e}' ${d}:`,m,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,c);const{host:y}=new URL(m),x=Cr(y);return this.zo(e,m,g,s,x).then((E=>(ve(Fp,`Received RPC '${e}' ${d}: `,E),E)),(E=>{throw Po(Fp,`RPC '${e}' ${d} failed with error: `,E,"url: ",m,"request:",s),E}))}jo(e,n,s,o,c,d){return this.Wo(e,n,s,o,c)}Go(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$o})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}Qo(e,n){const s=IO[e];let o=`${this.qo}/v1/${n}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class DO{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const gn="WebChannelConnection",nc=(i,e,n)=>{i.listen(e,(s=>{try{n(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Oo extends OO{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Oo.c_){const e=xE();nc(e,_E.STAT_EVENT,(n=>{n.stat===rm.PROXY?ve(gn,"STAT_EVENT: detected buffering proxy"):n.stat===rm.NOPROXY&&ve(gn,"STAT_EVENT: detected no buffering proxy")})),Oo.c_=!0}}zo(e,n,s,o,c){const d=vm();return new Promise(((m,g)=>{const y=new bE;y.setWithCredentials(!0),y.listenOnce(vE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case wd.NO_ERROR:const E=y.getResponseJson();ve(gn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),m(E);break;case wd.TIMEOUT:ve(gn,`RPC '${e}' ${d} timed out`),g(new ge(ne.DEADLINE_EXCEEDED,"Request time out"));break;case wd.HTTP_ERROR:const N=y.getStatus();if(ve(gn,`RPC '${e}' ${d} failed with status:`,N,"response text:",y.getResponseText()),N>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const U=P?.error;if(U&&U.status&&U.message){const L=(function(W){const J=W.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(J)>=0?J:ne.UNKNOWN})(U.status);g(new ge(L,U.message))}else g(new ge(ne.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ge(ne.UNAVAILABLE,"Connection failed."));break;default:ke(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ve(gn,`RPC '${e}' ${d} completed.`)}}));const x=JSON.stringify(o);ve(gn,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",x,s,15)}))}T_(e,n,s){const o=vm(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,n,s),m.encodeInitMessageHeaders=!0;const y=c.join("");ve(gn,`Creating RPC '${e}' stream ${o}: ${y}`,m);const x=d.createWebChannel(y,m);this.I_(x);let E=!1,N=!1;const P=new DO({Ho:U=>{N?ve(gn,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(E||(ve(gn,`Opening RPC '${e}' stream ${o} transport.`),x.open(),E=!0),ve(gn,`RPC '${e}' stream ${o} sending:`,U),x.send(U))},Jo:()=>x.close()});return nc(x,sc.EventType.OPEN,(()=>{N||(ve(gn,`RPC '${e}' stream ${o} transport opened.`),P.i_())})),nc(x,sc.EventType.CLOSE,(()=>{N||(N=!0,ve(gn,`RPC '${e}' stream ${o} transport closed`),P.o_(),this.E_(x))})),nc(x,sc.EventType.ERROR,(U=>{N||(N=!0,Po(gn,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),P.o_(new ge(ne.UNAVAILABLE,"The operation could not be completed")))})),nc(x,sc.EventType.MESSAGE,(U=>{if(!N){const L=U.data[0];rt(!!L,16349);const z=L,W=z?.error||z[0]?.error;if(W){ve(gn,`RPC '${e}' stream ${o} received error:`,W);const J=W.status;let oe=(function(me){const C=$t[me];if(C!==void 0)return nA(C)})(J),se=W.message;oe===void 0&&(oe=ne.INTERNAL,se="Unknown error status: "+J+" with message "+W.message),N=!0,P.o_(new ge(oe,se)),x.close()}else ve(gn,`RPC '${e}' stream ${o} received:`,L),P.__(L)}})),Oo.u_(),setTimeout((()=>{P.s_()}),0),P}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,s){super.Go(e,n,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return EE()}}function MO(i){return new Oo(i)}function Gp(){return typeof document<"u"?document:null}function vf(i){return new VI(i,!0)}Oo.c_=!1;class yA{constructor(e,n,s=1e3,o=1.5,c=6e4){this.Ci=e,this.timerId=n,this.R_=s,this.A_=o,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const D_="PersistentStream";class bA{constructor(e,n,s,o,c,d,m,g){this.Ci=e,this.b_=s,this.S_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(Vi(n.toString()),Vi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new ge(ne.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(D_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(ve(D_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kO extends bA{constructor(e,n,s,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=UI(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Ve.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ve.min():d.readTime?ni(d.readTime):Ve.min()})(e);return this.listener.J_(n,s)}Z_(e){const n={};n.database=ym(this.serializer),n.addTarget=(function(c,d){let m;const g=d.target;if(m=dm(g)?{documents:qI(c,g)}:{query:FI(c,g).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=sA(c,d.resumeToken);const y=pm(c,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(Ve.min())>0){m.readTime=Kd(c,d.snapshotVersion.toTimestamp());const y=pm(c,d.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const s=KI(this.serializer,e);s&&(n.labels=s),this.K_(n)}X_(e){const n={};n.database=ym(this.serializer),n.removeTarget=e,this.K_(n)}}class jO extends bA{constructor(e,n,s,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=HI(e.writeResults,e.commitTime),s=ni(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=ym(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>BI(this.serializer,s)))};this.K_(n)}}class PO{}class VO extends PO{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Wo(e,mm(n,s),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(ne.UNKNOWN,c.toString())}))}jo(e,n,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.jo(e,mm(n,s),o,d,m,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ge(ne.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function LO(i,e,n,s){return new VO(i,e,n,s)}class zO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vi(n),this.aa=!1):ve("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const wr="RemoteStore";class UO{constructor(e,n,s,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((d=>{s.enqueueAndForget((async()=>{Mr(this)&&(ve(wr,"Restarting streams for network reachability change."),await(async function(g){const y=Ue(g);y.Ea.add(4),await Pc(y),y.Va.set("Unknown"),y.Ea.delete(4),await _f(y)})(this))}))})),this.Va=new zO(s,o)}}async function _f(i){if(Mr(i))for(const e of i.Ra)await e(!0)}async function Pc(i){for(const e of i.Ra)await e(!1)}function vA(i,e){const n=Ue(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),pg(n)?hg(n):Wo(n).O_()&&fg(n,e))}function dg(i,e){const n=Ue(i),s=Wo(n);n.Ia.delete(e),s.O_()&&_A(n,e),n.Ia.size===0&&(s.O_()?s.L_():Mr(n)&&n.Va.set("Unknown"))}function fg(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ve.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wo(i).Z_(e)}function _A(i,e){i.da.$e(e),Wo(i).X_(e)}function hg(i){i.da=new MI({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Wo(i).start(),i.Va.ua()}function pg(i){return Mr(i)&&!Wo(i).x_()&&i.Ia.size>0}function Mr(i){return Ue(i).Ea.size===0}function xA(i){i.da=void 0}async function BO(i){i.Va.set("Online")}async function HO(i){i.Ia.forEach(((e,n)=>{fg(i,e)}))}async function qO(i,e){xA(i),pg(i)?(i.Va.ha(e),hg(i)):i.Va.set("Unknown")}async function FO(i,e,n){if(i.Va.set("Online"),e instanceof iA&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const m of c.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.da.removeTarget(m))})(i,e)}catch(s){ve(wr,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await $d(i,s)}else if(e instanceof Id?i.da.Xe(e):e instanceof aA?i.da.st(e):i.da.tt(e),!n.isEqual(Ve.min()))try{const s=await gA(i.localStore);n.compareTo(s)>=0&&await(function(c,d){const m=c.da.Tt(d);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const x=c.Ia.get(y);x&&c.Ia.set(y,x.withResumeToken(g.resumeToken,d))}})),m.targetMismatches.forEach(((g,y)=>{const x=c.Ia.get(g);if(!x)return;c.Ia.set(g,x.withResumeToken(fn.EMPTY_BYTE_STRING,x.snapshotVersion)),_A(c,g);const E=new Ts(x.target,g,y,x.sequenceNumber);fg(c,E)})),c.remoteSyncer.applyRemoteEvent(m)})(i,n)}catch(s){ve(wr,"Failed to raise snapshot:",s),await $d(i,s)}}async function $d(i,e,n){if(!Xo(e))throw e;i.Ea.add(1),await Pc(i),i.Va.set("Offline"),n||(n=()=>gA(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ve(wr,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await _f(i)}))}function EA(i,e){return e().catch((n=>$d(i,n,e)))}async function xf(i){const e=Ue(i),n=ks(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xm;for(;GO(e);)try{const o=await SO(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,KO(e,o)}catch(o){await $d(e,o)}AA(e)&&TA(e)}function GO(i){return Mr(i)&&i.Ta.length<10}function KO(i,e){i.Ta.push(e);const n=ks(i);n.O_()&&n.Y_&&n.ea(e.mutations)}function AA(i){return Mr(i)&&!ks(i).x_()&&i.Ta.length>0}function TA(i){ks(i).start()}async function QO(i){ks(i).ra()}async function $O(i){const e=ks(i);for(const n of i.Ta)e.ea(n.mutations)}async function YO(i,e,n){const s=i.Ta.shift(),o=ig.from(s,e,n);await EA(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await xf(i)}async function XO(i,e){e&&ks(i).Y_&&await(async function(s,o){if((function(d){return II(d)&&d!==ne.ABORTED})(o.code)){const c=s.Ta.shift();ks(s).B_(),await EA(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await xf(s)}})(i,e),AA(i)&&TA(i)}async function M_(i,e){const n=Ue(i);n.asyncQueue.verifyOperationInProgress(),ve(wr,"RemoteStore received new credentials");const s=Mr(n);n.Ea.add(3),await Pc(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await _f(n)}async function JO(i,e){const n=Ue(i);e?(n.Ea.delete(2),await _f(n)):e||(n.Ea.add(2),await Pc(n),n.Va.set("Unknown"))}function Wo(i){return i.ma||(i.ma=(function(n,s,o){const c=Ue(n);return c.sa(),new kO(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Zo:BO.bind(null,i),Yo:HO.bind(null,i),t_:qO.bind(null,i),J_:FO.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),pg(i)?hg(i):i.Va.set("Unknown")):(await i.ma.stop(),xA(i))}))),i.ma}function ks(i){return i.fa||(i.fa=(function(n,s,o){const c=Ue(n);return c.sa(),new jO(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:QO.bind(null,i),t_:XO.bind(null,i),ta:$O.bind(null,i),na:YO.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await xf(i)):(await i.fa.stop(),i.Ta.length>0&&(ve(wr,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class mg{constructor(e,n,s,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,c){const d=Date.now()+s,m=new mg(e,n,d,o,c);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gg(i,e){if(Vi("AsyncQueue",`${e}: ${i}`),Xo(i))return new ge(ne.UNAVAILABLE,`${e}: ${i}`);throw i}class Do{static emptySet(e){return new Do(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ie.comparator(n.key,s.key):(n,s)=>Ie.comparator(n.key,s.key),this.keyedMap=rc(),this.sortedSet=new Nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Do)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Do;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class k_{constructor(){this.ga=new Nt(Ie.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ke(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class qo{constructor(e,n,s,o,c,d,m,g,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,c){const d=[];return n.forEach((m=>{d.push({type:0,doc:m})})),new qo(e,n,Do.emptySet(n),d,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class WO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class ZO{constructor(){this.queries=j_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Ue(n),c=o.queries;o.queries=j_(),c.forEach(((d,m)=>{for(const g of m.ba)g.onError(s)}))})(this,new ge(ne.ABORTED,"Firestore shutting down"))}}function j_(){return new Dr((i=>FE(i)),pf)}async function yg(i,e){const n=Ue(i);let s=3;const o=e.query;let c=n.queries.get(o);c?!c.Sa()&&e.Da()&&(s=2):(c=new WO,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=gg(d,`Initialization of query '${To(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,c),c.ba.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&vg(n)}async function bg(i,e){const n=Ue(i),s=e.query;let o=3;const c=n.queries.get(s);if(c){const d=c.ba.indexOf(e);d>=0&&(c.ba.splice(d,1),c.ba.length===0?o=e.Da()?0:1:!c.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function eD(i,e){const n=Ue(i);let s=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const m of d.ba)m.Fa(o)&&(s=!0);d.wa=o}}s&&vg(n)}function tD(i,e,n){const s=Ue(i),o=s.queries.get(e);if(o)for(const c of o.ba)c.onError(n);s.queries.delete(e)}function vg(i){i.Ca.forEach((e=>{e.next()}))}var _m,P_;(P_=_m||(_m={})).Ma="default",P_.Cache="cache";class _g{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new qo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_m.Cache}}class SA{constructor(e){this.key=e}}class wA{constructor(e){this.key=e}}class nD{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=We(),this.mutatedKeys=We(),this.eu=GE(e),this.tu=new Do(this.eu)}get nu(){return this.Za}ru(e,n){const s=n?n.iu:new k_,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,E)=>{const N=o.get(x),P=mf(this.query,E)?E:null,U=!!N&&this.mutatedKeys.has(N.key),L=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let z=!1;N&&P?N.data.isEqual(P.data)?U!==L&&(s.track({type:3,doc:P}),z=!0):this.su(N,P)||(s.track({type:2,doc:P}),z=!0,(g&&this.eu(P,g)>0||y&&this.eu(P,y)<0)&&(m=!0)):!N&&P?(s.track({type:0,doc:P}),z=!0):N&&!P&&(s.track({type:1,doc:N}),z=!0,(g||y)&&(m=!0)),z&&(P?(d=d.add(P),c=L?c.add(x):c.delete(x)):(d=d.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),c=c.delete(x.key),s.track({type:1,doc:x})}return{tu:d,iu:s,Ss:m,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((x,E)=>(function(P,U){const L=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke(20277,{Vt:z})}};return L(P)-L(U)})(x.type,E.type)||this.eu(x.doc,E.doc))),this.ou(s),o=o??!1;const m=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Xa;return this.Xa=g,d.length!==0||y?{snapshot:new qo(this.query,e.tu,c,d,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new k_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=We(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const n=[];return e.forEach((s=>{this.Ya.has(s)||n.push(new wA(s))})),this.Ya.forEach((s=>{e.has(s)||n.push(new SA(s))})),n}cu(e){this.Za=e.ks,this.Ya=We();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return qo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const xg="SyncEngine";class aD{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class iD{constructor(e){this.key=e,this.hu=!1}}class sD{constructor(e,n,s,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Dr((m=>FE(m)),pf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Nt(Ie.comparator),this.Au=new Map,this.Vu=new og,this.du={},this.mu=new Map,this.fu=Ho.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rD(i,e,n=!0){const s=DA(i);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await NA(s,e,n,!0),o}async function oD(i,e){const n=DA(i);await NA(n,e,!0,!1)}async function NA(i,e,n,s){const o=await wO(i.localStore,ti(e)),c=o.targetId,d=i.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await lD(i,e,c,d==="current",o.resumeToken)),i.isPrimaryClient&&n&&vA(i.remoteStore,o),m}async function lD(i,e,n,s,o){i.pu=(E,N,P)=>(async function(L,z,W,J){let oe=z.view.ru(W);oe.Ss&&(oe=await R_(L.localStore,z.query,!1).then((({documents:C})=>z.view.ru(C,oe))));const se=J&&J.targetChanges.get(z.targetId),le=J&&J.targetMismatches.get(z.targetId)!=null,me=z.view.applyChanges(oe,L.isPrimaryClient,se,le);return L_(L,z.targetId,me.au),me.snapshot})(i,E,N,P);const c=await R_(i.localStore,e,!0),d=new nD(e,c.ks),m=d.ru(c.documents),g=jc.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),y=d.applyChanges(m,i.isPrimaryClient,g);L_(i,n,y.au);const x=new aD(e,n,d);return i.Tu.set(e,x),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),y.snapshot}async function cD(i,e,n){const s=Ue(i),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((d=>!pf(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await bm(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&dg(s.remoteStore,o.targetId),xm(s,o.targetId)})).catch(Yo)):(xm(s,o.targetId),await bm(s.localStore,o.targetId,!0))}async function uD(i,e){const n=Ue(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),dg(n.remoteStore,s.targetId))}async function dD(i,e,n){const s=bD(i);try{const o=await(function(d,m){const g=Ue(d),y=xt.now(),x=m.reduce(((P,U)=>P.add(U.key)),We());let E,N;return g.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let U=Li(),L=We();return g.xs.getEntries(P,x).next((z=>{U=z,U.forEach(((W,J)=>{J.isValidDocument()||(L=L.add(W))}))})).next((()=>g.localDocuments.getOverlayedDocuments(P,U))).next((z=>{E=z;const W=[];for(const J of m){const oe=SI(J,E.get(J.key).overlayedDocument);oe!=null&&W.push(new zs(J.key,oe,PE(oe.value.mapValue),la.exists(!0)))}return g.mutationQueue.addMutationBatch(P,y,W,m)})).next((z=>{N=z;const W=z.applyToLocalDocumentSet(E,L);return g.documentOverlayCache.saveOverlays(P,z.batchId,W)}))})).then((()=>({batchId:N.batchId,changes:QE(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,m,g){let y=d.du[d.currentUser.toKey()];y||(y=new Nt(Je)),y=y.insert(m,g),d.du[d.currentUser.toKey()]=y})(s,o.batchId,n),await Vc(s,o.changes),await xf(s.remoteStore)}catch(o){const c=gg(o,"Failed to persist write");n.reject(c)}}async function RA(i,e){const n=Ue(i);try{const s=await AO(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Au.get(c);d&&(rt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?rt(d.hu,14607):o.removedDocuments.size>0&&(rt(d.hu,42227),d.hu=!1))})),await Vc(n,s,e)}catch(s){await Yo(s)}}function V_(i,e,n){const s=Ue(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((c,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const g=Ue(d);g.onlineState=m;let y=!1;g.queries.forEach(((x,E)=>{for(const N of E.ba)N.va(m)&&(y=!0)})),y&&vg(g)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function fD(i,e,n){const s=Ue(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),c=o&&o.key;if(c){let d=new Nt(Ie.comparator);d=d.insert(c,bn.newNoDocument(c,Ve.min()));const m=We().add(c),g=new bf(Ve.min(),new Map,new Nt(Je),d,m);await RA(s,g),s.Ru=s.Ru.remove(c),s.Au.delete(e),Eg(s)}else await bm(s.localStore,e,!1).then((()=>xm(s,e,n))).catch(Yo)}async function hD(i,e){const n=Ue(i),s=e.batch.batchId;try{const o=await EO(n.localStore,e);IA(n,s,null),CA(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Vc(n,o)}catch(o){await Yo(o)}}async function pD(i,e,n){const s=Ue(i);try{const o=await(function(d,m){const g=Ue(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return g.mutationQueue.lookupMutationBatch(y,m).next((E=>(rt(E!==null,37113),x=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,x,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>g.localDocuments.getDocuments(y,x)))}))})(s.localStore,e);IA(s,e,n),CA(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Vc(s,o)}catch(o){await Yo(o)}}function CA(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function IA(i,e,n){const s=Ue(i);let o=s.du[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function xm(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((s=>{i.Vu.containsKey(s)||OA(i,s)}))}function OA(i,e){i.Eu.delete(e.path.canonicalString());const n=i.Ru.get(e);n!==null&&(dg(i.remoteStore,n),i.Ru=i.Ru.remove(e),i.Au.delete(n),Eg(i))}function L_(i,e,n){for(const s of n)s instanceof SA?(i.Vu.addReference(s.key,e),mD(i,s)):s instanceof wA?(ve(xg,"Document no longer in limbo: "+s.key),i.Vu.removeReference(s.key,e),i.Vu.containsKey(s.key)||OA(i,s.key)):ke(19791,{wu:s})}function mD(i,e){const n=e.key,s=n.path.canonicalString();i.Ru.get(n)||i.Eu.has(s)||(ve(xg,"New document in limbo: "+n),i.Eu.add(s),Eg(i))}function Eg(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Ie(bt.fromString(e)),s=i.fu.next();i.Au.set(s,new iD(n)),i.Ru=i.Ru.insert(n,s),vA(i.remoteStore,new Ts(ti(hf(n.path)),s,"TargetPurposeLimboResolution",uf.ce))}}async function Vc(i,e,n){const s=Ue(i),o=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{d.push(s.pu(g,e,n).then((y=>{if((y||n)&&s.isPrimaryClient){const x=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,x?"current":"not-current")}if(y){o.push(y);const x=cg.Es(g.targetId,y);c.push(x)}})))})),await Promise.all(d),s.Pu.J_(o),await(async function(g,y){const x=Ue(g);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>re.forEach(y,(N=>re.forEach(N.Ts,(P=>x.persistence.referenceDelegate.addReference(E,N.targetId,P))).next((()=>re.forEach(N.Is,(P=>x.persistence.referenceDelegate.removeReference(E,N.targetId,P)))))))))}catch(E){if(!Xo(E))throw E;ve(ug,"Failed to update sequence numbers: "+E)}for(const E of y){const N=E.targetId;if(!E.fromCache){const P=x.vs.get(N),U=P.snapshotVersion,L=P.withLastLimboFreeSnapshotVersion(U);x.vs=x.vs.insert(N,L)}}})(s.localStore,c))}async function gD(i,e){const n=Ue(i);if(!n.currentUser.isEqual(e)){ve(xg,"User change. New user:",e.toKey());const s=await mA(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((m=>{m.forEach((g=>{g.reject(new ge(ne.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Vc(n,s.Ns)}}function yD(i,e){const n=Ue(i),s=n.Au.get(e);if(s&&s.hu)return We().add(s.key);{let o=We();const c=n.Iu.get(e);if(!c)return o;for(const d of c){const m=n.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function DA(i){const e=Ue(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=RA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fD.bind(null,e),e.Pu.J_=eD.bind(null,e.eventManager),e.Pu.yu=tD.bind(null,e.eventManager),e}function bD(i){const e=Ue(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pD.bind(null,e),e}class Yd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return xO(this.persistence,new bO,e.initialUser,this.serializer)}Cu(e){return new pA(lg.Vi,this.serializer)}Du(e){return new RO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yd.provider={build:()=>new Yd};class vD extends Yd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){rt(this.persistence.referenceDelegate instanceof Qd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new aO(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new pA((s=>Qd.Vi(s,n)),this.serializer)}}class Em{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>V_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=gD.bind(null,this.syncEngine),await JO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ZO})()}createDatastore(e){const n=vf(e.databaseInfo.databaseId),s=MO(e.databaseInfo);return LO(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,c,d,m){return new UO(s,o,c,d,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>V_(this.syncEngine,n,0)),(function(){return O_.v()?new O_:new CO})())}createSyncEngine(e,n){return(function(o,c,d,m,g,y,x){const E=new sD(o,c,d,m,g,y);return x&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Ue(n);ve(wr,"RemoteStore shutting down."),s.Ea.add(5),await Pc(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Em.provider={build:()=>new Em};class Ag{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const js="FirestoreClient";class _D{constructor(e,n,s,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this._databaseInfo=o,this.user=yn.UNAUTHENTICATED,this.clientId=Ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{ve(js,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(ve(js,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=gg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Kp(i,e){i.asyncQueue.verifyOperationInProgress(),ve(js,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await mA(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function z_(i,e){i.asyncQueue.verifyOperationInProgress();const n=await xD(i);ve(js,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>M_(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>M_(e.remoteStore,o))),i._onlineComponents=e}async function xD(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ve(js,"Using user provided OfflineComponentProvider");try{await Kp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Po("Error using user provided cache. Falling back to memory cache: "+n),await Kp(i,new Yd)}}else ve(js,"Using default OfflineComponentProvider"),await Kp(i,new vD(void 0));return i._offlineComponents}async function MA(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ve(js,"Using user provided OnlineComponentProvider"),await z_(i,i._uninitializedComponentsProvider._online)):(ve(js,"Using default OnlineComponentProvider"),await z_(i,new Em))),i._onlineComponents}function ED(i){return MA(i).then((e=>e.syncEngine))}async function Xd(i){const e=await MA(i),n=e.eventManager;return n.onListen=rD.bind(null,e.syncEngine),n.onUnlisten=cD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uD.bind(null,e.syncEngine),n}function AD(i,e,n,s){const o=new Ag(s),c=new _g(e,o,n);return i.asyncQueue.enqueueAndForget((async()=>yg(await Xd(i),c))),()=>{o.Nu(),i.asyncQueue.enqueueAndForget((async()=>bg(await Xd(i),c)))}}function TD(i,e,n={}){const s=new Di;return i.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,g,y){const x=new Ag({next:N=>{x.Nu(),d.enqueueAndForget((()=>bg(c,E)));const P=N.docs.has(m);!P&&N.fromCache?y.reject(new ge(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&N.fromCache&&g&&g.source==="server"?y.reject(new ge(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(N)},error:N=>y.reject(N)}),E=new _g(hf(m.path),x,{includeMetadataChanges:!0,Ka:!0});return yg(c,E)})(await Xd(i),i.asyncQueue,e,n,s))),s.promise}function SD(i,e,n={}){const s=new Di;return i.asyncQueue.enqueueAndForget((async()=>(function(c,d,m,g,y){const x=new Ag({next:N=>{x.Nu(),d.enqueueAndForget((()=>bg(c,E))),N.fromCache&&g.source==="server"?y.reject(new ge(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(N)},error:N=>y.reject(N)}),E=new _g(m,x,{includeMetadataChanges:!0,Ka:!0});return yg(c,E)})(await Xd(i),i.asyncQueue,e,n,s))),s.promise}function wD(i,e){const n=new Di;return i.asyncQueue.enqueueAndForget((async()=>dD(await ED(i),e,n))),n.promise}function kA(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const ND="ComponentProvider",U_=new Map;function RD(i,e,n,s,o){return new Q2(i,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,kA(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}const jA="firestore.googleapis.com",B_=!0;class H_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jA,this.ssl=B_}else this.host=e.host,this.ssl=e.ssl??B_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tO)throw new ge(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}P2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kA(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ef{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new w2;switch(s.type){case"firstParty":return new I2(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ge(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=U_.get(n);s&&(ve(ND,"Removing Datastore"),U_.delete(n),s.terminate())})(this),Promise.resolve()}}function PA(i,e,n,s={}){i=jn(i,Ef);const o=Cr(e),c=i._getSettings(),d={...c,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${n}`;o&&(Mm(`https://${m}`),km("Firestore",!0)),c.host!==jA&&c.host!==m&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:m,ssl:o,emulatorOptions:s};if(!ki(g,d)&&(i._setSettings(g),s.mockUserToken)){let y,x;if(typeof s.mockUserToken=="string")y=s.mockUserToken,x=yn.MOCK_USER;else{y=Ix(s.mockUserToken,i._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new ge(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new yn(E)}i._authCredentials=new N2(new TE(y,x))}}class Us{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Us(this.firestore,e,this._query)}}class Dt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}toJSON(){return{type:Dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Mc(n,Dt._jsonSchema))return new Dt(e,s||null,new Ie(bt.fromString(n.referencePath)))}}Dt._jsonSchemaVersion="firestore/documentReference/1.0",Dt._jsonSchema={type:Xt("string",Dt._jsonSchemaVersion),referencePath:Xt("string")};class Rs extends Us{constructor(e,n,s){super(e,n,hf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new Ie(e))}withConverter(e){return new Rs(this.firestore,e,this._path)}}function Lt(i,e,...n){if(i=zt(i),SE("collection","path",e),i instanceof Ef){const s=bt.fromString(e,...n);return t_(s),new Rs(i,null,s)}{if(!(i instanceof Dt||i instanceof Rs))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(bt.fromString(e,...n));return t_(s),new Rs(i.firestore,null,s)}}function Ze(i,e,...n){if(i=zt(i),arguments.length===1&&(e=Ym.newId()),SE("doc","path",e),i instanceof Ef){const s=bt.fromString(e,...n);return e_(s),new Dt(i,null,new Ie(s))}{if(!(i instanceof Dt||i instanceof Rs))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(bt.fromString(e,...n));return e_(s),new Dt(i.firestore,i instanceof Rs?i.converter:null,new Ie(s))}}const q_="AsyncQueue";class F_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yA(this,"async_queue_retry"),this._c=()=>{const s=Gp();s&&ve(q_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Gp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Gp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Di;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Xo(e))throw e;ve(q_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Vi("INTERNAL UNHANDLED ERROR: ",G_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=mg.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&ke(47125,{Pc:G_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function G_(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class zi extends Ef{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new F_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new F_(e),this._firestoreClient=void 0,await e}}}function CD(i,e){const n=typeof i=="object"?i:Lm(),s=typeof i=="string"?i:Hd,o=af(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=Nx("firestore");c&&PA(o,...c)}return o}function Af(i){if(i._terminated)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||ID(i),i._firestoreClient}function ID(i){const e=i._freezeSettings(),n=RD(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new _D(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(i._componentsProvider))}class oa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oa(fn.fromBase64String(e))}catch(n){throw new ge(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new oa(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:oa._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Mc(e,oa._jsonSchema))return oa.fromBase64String(e.bytes)}}oa._jsonSchemaVersion="firestore/bytes/1.0",oa._jsonSchema={type:Xt("string",oa._jsonSchemaVersion),bytes:Xt("string")};class Tg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Zo{constructor(e){this._methodName=e}}class ai{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ai._jsonSchemaVersion}}static fromJSON(e){if(Mc(e,ai._jsonSchema))return new ai(e.latitude,e.longitude)}}ai._jsonSchemaVersion="firestore/geoPoint/1.0",ai._jsonSchema={type:Xt("string",ai._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};class Sa{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Sa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Mc(e,Sa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Sa(e.vectorValues);throw new ge(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sa._jsonSchemaVersion="firestore/vectorValue/1.0",Sa._jsonSchema={type:Xt("string",Sa._jsonSchemaVersion),vectorValues:Xt("object")};const OD=/^__.*__$/;class DD{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new zs(e,this.data,this.fieldMask,n,this.fieldTransforms):new kc(e,this.data,n,this.fieldTransforms)}}class VA{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new zs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LA(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke(40011,{dataSource:i})}}class Tf{constructor(e,n,s,o,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Tf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Jd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(LA(this.dataSource)&&OD.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class MD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||vf(e)}createContext(e,n,s,o=!1){return new Tf({dataSource:e,methodName:n,targetDoc:s,path:dn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sf(i){const e=i._freezeSettings(),n=vf(i._databaseId);return new MD(i._databaseId,!!e.ignoreUndefinedProperties,n)}function zA(i,e,n,s,o,c={}){const d=i.createContext(c.merge||c.mergeFields?2:0,e,n,o);Rg("Data must be an object, but it was:",d,s);const m=BA(s,d);let g,y;if(c.merge)g=new Kn(d.fieldMask),y=d.fieldTransforms;else if(c.mergeFields){const x=[];for(const E of c.mergeFields){const N=Nr(e,E,n);if(!d.contains(N))throw new ge(ne.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);FA(x,N)||x.push(N)}g=new Kn(x),y=d.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=d.fieldTransforms;return new DD(new On(m),g,y)}class wf extends Zo{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wf}}function UA(i,e,n){return new Tf({dataSource:3,targetDoc:e.settings.targetDoc,methodName:i._methodName,arrayElement:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Sg extends Zo{_toFieldTransform(e){return new ng(e.path,new Tc)}isEqual(e){return e instanceof Sg}}class wg extends Zo{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=UA(this,e,!0),s=this.Ac.map((c=>kr(c,n))),o=new Uo(s);return new ng(e.path,o)}isEqual(e){return e instanceof wg&&ki(this.Ac,e.Ac)}}class Ng extends Zo{constructor(e,n){super(e),this.Ac=n}_toFieldTransform(e){const n=UA(this,e,!0),s=this.Ac.map((c=>kr(c,n))),o=new Bo(s);return new ng(e.path,o)}isEqual(e){return e instanceof Ng&&ki(this.Ac,e.Ac)}}function kD(i,e,n,s){const o=i.createContext(1,e,n);Rg("Data must be an object, but it was:",o,s);const c=[],d=On.empty();Ls(s,((g,y)=>{const x=qA(e,g,n);y=zt(y);const E=o.childContextForFieldPath(x);if(y instanceof wf)c.push(x);else{const N=kr(y,E);N!=null&&(c.push(x),d.set(x,N))}}));const m=new Kn(c);return new VA(d,m,o.fieldTransforms)}function jD(i,e,n,s,o,c){const d=i.createContext(1,e,n),m=[Nr(e,s,n)],g=[o];if(c.length%2!=0)throw new ge(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<c.length;N+=2)m.push(Nr(e,c[N])),g.push(c[N+1]);const y=[],x=On.empty();for(let N=m.length-1;N>=0;--N)if(!FA(y,m[N])){const P=m[N];let U=g[N];U=zt(U);const L=d.childContextForFieldPath(P);if(U instanceof wf)y.push(P);else{const z=kr(U,L);z!=null&&(y.push(P),x.set(P,z))}}const E=new Kn(y);return new VA(x,E,d.fieldTransforms)}function PD(i,e,n,s=!1){return kr(n,i.createContext(s?4:3,e))}function kr(i,e){if(HA(i=zt(i)))return Rg("Unsupported field value:",e,i),BA(i,e);if(i instanceof Zo)return(function(s,o){if(!LA(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const c=[];let d=0;for(const m of s){let g=kr(m,o.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(i,e)}return(function(s,o){if((s=zt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return vI(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=xt.fromDate(s);return{timestampValue:Kd(o.serializer,c)}}if(s instanceof xt){const c=new xt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Kd(o.serializer,c)}}if(s instanceof ai)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof oa)return{bytesValue:sA(o.serializer,s._byteString)};if(s instanceof Dt){const c=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw o.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:rg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Sa)return(function(d,m){const g=d instanceof Sa?d.toArray():d;return{mapValue:{fields:{[kE]:{stringValue:jE},[qd]:{arrayValue:{values:g.map((x=>{if(typeof x!="number")throw m.createError("VectorValues must only contain numeric values.");return tg(m.serializer,x)}))}}}}}})(s,o);if(fA(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${cf(s)}`)})(i,e)}function BA(i,e){const n={};return RE(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(i,((s,o)=>{const c=kr(o,e.childContextForField(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function HA(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof xt||i instanceof ai||i instanceof oa||i instanceof Dt||i instanceof Zo||i instanceof Sa||fA(i))}function Rg(i,e,n){if(!HA(n)||!wE(n)){const s=cf(n);throw s==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+s)}}function Nr(i,e,n){if((e=zt(e))instanceof Tg)return e._internalPath;if(typeof e=="string")return qA(i,e);throw Jd("Field path arguments must be of type string or ",i,!1,void 0,n)}const VD=new RegExp("[~\\*/\\[\\]]");function qA(i,e,n){if(e.search(VD)>=0)throw Jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Tg(...e.split("."))._internalPath}catch{throw Jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Jd(i,e,n,s,o){const c=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${o}`),g+=")"),new ge(ne.INVALID_ARGUMENT,m+i+g)}function FA(i,e){return i.some((n=>n.isEqual(e)))}class LD{convertValue(e,n="none"){switch(Ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ke(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ls(e,((o,c)=>{s[o]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[qd].arrayValue?.values?.map((s=>Vt(s.doubleValue)));return new Sa(n)}convertGeoPoint(e){return new ai(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ff(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(_c(e));default:return null}}convertTimestamp(e){const n=Os(e);return new xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=bt.fromString(e);rt(dA(s),9688,{name:e});const o=new xc(s.get(1),s.get(3)),c=new Ie(s.popFirst(5));return o.isEqual(n)||Vi(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}class Cg extends LD{constructor(e){super(),this.firestore=e}convertBytes(e){return new oa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,n)}}function Dn(){return new Sg("serverTimestamp")}function Am(...i){return new wg("arrayUnion",i)}function Ig(...i){return new Ng("arrayRemove",i)}const K_="@firebase/firestore",Q_="4.10.0";function $_(i){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const c of s)if(c in o&&typeof o[c]=="function")return!0;return!1})(i,["next","error","complete"])}class GA{constructor(e,n,s,o,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Nr("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zD extends GA{data(){return super.data()}}function KA(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ge(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Og{}class QA extends Og{}function Mn(i,e,...n){let s=[];e instanceof Og&&s.push(e),s=s.concat(n),(function(c){const d=c.filter((g=>g instanceof Dg)).length,m=c.filter((g=>g instanceof Nf)).length;if(d>1||d>0&&m>0)throw new ge(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Nf extends QA{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Nf(e,n,s)}_apply(e){const n=this._parse(e);return $A(e._query,n),new Us(e.firestore,e.converter,fm(e._query,n))}_parse(e){const n=Sf(e.firestore);return(function(c,d,m,g,y,x,E){let N;if(y.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new ge(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){X_(E,x);const U=[];for(const L of E)U.push(Y_(g,c,L));N={arrayValue:{values:U}}}else N=Y_(g,c,E)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||X_(E,x),N=PD(m,d,E,x==="in"||x==="not-in");return Yt.create(y,x,N)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function wa(i,e,n){const s=e,o=Nr("where",i);return Nf._create(o,s,n)}class Dg extends Og{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Ra.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const m=c.getFlattenedFilters();for(const g of m)$A(d,g),d=fm(d,g)})(e._query,n),new Us(e.firestore,e.converter,fm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Mg extends QA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Mg(e,n)}_apply(e){const n=(function(o,c,d){if(o.startAt!==null)throw new ge(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ge(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ac(c,d)})(e._query,this._field,this._direction);return new Us(e.firestore,e.converter,dI(e._query,n))}}function Mo(i,e="asc"){const n=e,s=Nr("orderBy",i);return Mg._create(s,n)}function Y_(i,e,n){if(typeof(n=zt(n))=="string"){if(n==="")throw new ge(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qE(e)&&n.indexOf("/")!==-1)throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(bt.fromString(n));if(!Ie.isDocumentKey(s))throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return c_(i,new Ie(s))}if(n instanceof Dt)return c_(i,n._key);throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cf(n)}.`)}function X_(i,e){if(!Array.isArray(i)||i.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $A(i,e){const n=(function(o,c){for(const d of o)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ge(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function YA(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class lc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vr extends GA{constructor(e,n,s,o,c,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Od(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Nr("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=vr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}vr._jsonSchemaVersion="firestore/documentSnapshot/1.0",vr._jsonSchema={type:Xt("string",vr._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class Od extends vr{data(e={}){return super.data(e)}}class _r{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new lc(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Od(this._firestore,this._userDataWriter,s.key,s,new lc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const g=new Od(o._firestore,o._userDataWriter,m.doc.key,m.doc,new lc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>c||m.type!==3)).map((m=>{const g=new Od(o._firestore,o._userDataWriter,m.doc.key,m.doc,new lc(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,x=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),x=d.indexOf(m.doc.key)),{type:UD(m.type),doc:g,oldIndex:y,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_r._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ym.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function UD(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke(61501,{type:i})}}_r._jsonSchemaVersion="firestore/querySnapshot/1.0",_r._jsonSchema={type:Xt("string",_r._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};function Dd(i){i=jn(i,Dt);const e=jn(i.firestore,zi),n=Af(e);return TD(n,i._key).then((s=>XA(e,i,s)))}function Tm(i){i=jn(i,Us);const e=jn(i.firestore,zi),n=Af(e),s=new Cg(e);return KA(i._query),SD(n,i._query).then((o=>new _r(e,s,i,o)))}function kg(i,e,n){i=jn(i,Dt);const s=jn(i.firestore,zi),o=YA(i.converter,e,n),c=Sf(s);return Rf(s,[zA(c,"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,la.none())])}function Ot(i,e,n,...s){i=jn(i,Dt);const o=jn(i.firestore,zi),c=Sf(o);let d;return d=typeof(e=zt(e))=="string"||e instanceof Tg?jD(c,"updateDoc",i._key,e,n,s):kD(c,"updateDoc",i._key,e),Rf(o,[d.toMutation(i._key,la.exists(!0))])}function xr(i){return Rf(jn(i.firestore,zi),[new ag(i._key,la.none())])}function mc(i,e){const n=jn(i.firestore,zi),s=Ze(i),o=YA(i.converter,e),c=Sf(i.firestore);return Rf(n,[zA(c,"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,la.exists(!1))]).then((()=>s))}function kn(i,...e){i=zt(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||$_(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if($_(e[s])){const y=e[s];e[s]=y.next?.bind(y),e[s+1]=y.error?.bind(y),e[s+2]=y.complete?.bind(y)}let c,d,m;if(i instanceof Dt)d=jn(i.firestore,zi),m=hf(i._key.path),c={next:y=>{e[s]&&e[s](XA(d,i,y))},error:e[s+1],complete:e[s+2]};else{const y=jn(i,Us);d=jn(y.firestore,zi),m=y._query;const x=new Cg(d);c={next:E=>{e[s]&&e[s](new _r(d,x,y,E))},error:e[s+1],complete:e[s+2]},KA(i._query)}const g=Af(d);return AD(g,m,o,c)}function Rf(i,e){const n=Af(i);return wD(n,e)}function XA(i,e,n){const s=n.docs.get(e._key),o=new Cg(i);return new vr(i,o,e._key,s,new lc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){S2(Ir),Er(new Cs("firestore",((s,{instanceIdentifier:o,options:c})=>{const d=s.getProvider("app").getImmediate(),m=new zi(new R2(s.getProvider("auth-internal")),new O2(d,s.getProvider("app-check-internal")),$2(d,o),d);return c={useFetchStreams:n,...c},m._setSettings(c),m}),"PUBLIC").setMultipleInstances(!0)),Wa(K_,Q_,e),Wa(K_,Q_,"esm2020")})();const JA="firebasestorage.googleapis.com",BD="storageBucket",HD=120*1e3,qD=600*1e3;class li extends oi{constructor(e,n,s=0){super(Qp(e),`Firebase Storage: ${n} (${Qp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,li.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var si;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(si||(si={}));function Qp(i){return"storage/"+i}function FD(){const i="An unknown error occurred, please check the error payload for server response.";return new li(si.UNKNOWN,i)}function GD(){return new li(si.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function KD(){return new li(si.CANCELED,"User canceled the upload/download.")}function QD(i){return new li(si.INVALID_URL,"Invalid URL '"+i+"'.")}function $D(i){return new li(si.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function J_(i){return new li(si.INVALID_ARGUMENT,i)}function WA(){return new li(si.APP_DELETED,"The Firebase app was deleted.")}function YD(i){return new li(si.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class Ta{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Ta.makeFromUrl(e,n)}catch{return new Ta(e,"")}if(s.path==="")return s;throw $D(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function c(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function y(se){se.path_=decodeURIComponent(se.path)}const x="v[A-Za-z0-9_]+",E=n.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",P=new RegExp(`^https?://${E}/${x}/b/${o}/o${N}`,"i"),U={bucket:1,path:3},L=n===JA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,z="([^?#]*)",W=new RegExp(`^https?://${L}/${o}/${z}`,"i"),oe=[{regex:m,indices:g,postModify:c},{regex:P,indices:U,postModify:y},{regex:W,indices:{bucket:1,path:2},postModify:y}];for(let se=0;se<oe.length;se++){const le=oe[se],me=le.regex.exec(e);if(me){const C=me[le.indices.bucket];let R=me[le.indices.path];R||(R=""),s=new Ta(C,R),le.postModify(s);break}}if(s==null)throw QD(e);return s}}class XD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function JD(i,e,n){let s=1,o=null,c=null,d=!1,m=0;function g(){return m===2}let y=!1;function x(...z){y||(y=!0,e.apply(null,z))}function E(z){o=setTimeout(()=>{o=null,i(P,g())},z)}function N(){c&&clearTimeout(c)}function P(z,...W){if(y){N();return}if(z){N(),x.call(null,z,...W);return}if(g()||d){N(),x.call(null,z,...W);return}s<64&&(s*=2);let oe;m===1?(m=2,oe=0):oe=(s+Math.random())*1e3,E(oe)}let U=!1;function L(z){U||(U=!0,N(),!y&&(o!==null?(z||(m=2),clearTimeout(o),E(0)):z||(m=1)))}return E(0),c=setTimeout(()=>{d=!0,L(!0)},n),L}function WD(i){i(!1)}function ZD(i){return i!==void 0}function W_(i,e,n,s){if(s<e)throw J_(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>n)throw J_(`Invalid value for '${i}'. Expected ${n} or less.`)}function eM(i){const e=encodeURIComponent;let n="?";for(const s in i)if(i.hasOwnProperty(s)){const o=e(s)+"="+e(i[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var Wd;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Wd||(Wd={}));function tM(i,e){const n=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,c=e.indexOf(i)!==-1;return n||o||c}class nM{constructor(e,n,s,o,c,d,m,g,y,x,E,N=!0,P=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=x,this.connectionFactory_=E,this.retry=N,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,L)=>{this.resolve_=U,this.reject_=L,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new vd(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=m=>{const g=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const m=c.getErrorCode()===Wd.NO_ERROR,g=c.getStatus();if(!m||tM(g,this.additionalRetryCodes_)&&this.retry){const x=c.getErrorCode()===Wd.ABORT;s(!1,new vd(!1,null,x));return}const y=this.successCodes_.indexOf(g)!==-1;s(!0,new vd(y,c))})},n=(s,o)=>{const c=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());ZD(g)?c(g):c()}catch(g){d(g)}else if(m!==null){const g=FD();g.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,g)):d(g)}else if(o.canceled){const g=this.appDelete_?WA():KD();d(g)}else{const g=GD();d(g)}};this.canceled_?n(!1,new vd(!1,null,!0)):this.backoffId_=JD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&WD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vd{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function aM(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function iM(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function sM(i,e){e&&(i["X-Firebase-GMPID"]=e)}function rM(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function oM(i,e,n,s,o,c,d=!0,m=!1){const g=eM(i.urlParams),y=i.url+g,x=Object.assign({},i.headers);return sM(x,e),aM(x,n),iM(x,c),rM(x,s),new nM(y,i.method,x,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,d,m)}function lM(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function cM(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}class Zd{constructor(e,n){this._service=e,n instanceof Ta?this._location=n:this._location=Ta.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zd(e,n)}get root(){const e=new Ta(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cM(this._location.path)}get storage(){return this._service}get parent(){const e=lM(this._location.path);if(e===null)return null;const n=new Ta(this._location.bucket,e);return new Zd(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw YD(e)}}function Z_(i,e){const n=e?.[BD];return n==null?null:Ta.makeFromBucketSpec(n,i)}function uM(i,e,n,s={}){i.host=`${e}:${n}`;const o=Cr(e);o&&(Mm(`https://${i.host}/b`),km("Storage",!0)),i._isUsingEmulator=!0,i._protocol=o?"https":"http";const{mockUserToken:c}=s;c&&(i._overrideAuthToken=typeof c=="string"?c:Ix(c,i.app.options.projectId))}class dM{constructor(e,n,s,o,c,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=JA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=HD,this._maxUploadRetryTime=qD,this._requests=new Set,o!=null?this._bucket=Ta.makeFromBucketSpec(o,this._host):this._bucket=Z_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ta.makeFromBucketSpec(this._url,e):this._bucket=Z_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){W_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){W_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zd(this,e)}_makeRequest(e,n,s,o,c=!0){if(this._deleted)return new XD(WA());{const d=oM(e,this._appId,s,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const ex="@firebase/storage",tx="0.14.0";const ZA="storage";function fM(i=Lm(),e){i=zt(i);const s=af(i,ZA).getImmediate({identifier:e}),o=Nx("storage");return o&&e1(s,...o),s}function e1(i,e,n,s={}){uM(i,e,n,s)}function hM(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new dM(n,s,o,e,Ir)}function pM(){Er(new Cs(ZA,hM,"PUBLIC").setMultipleInstances(!0)),Wa(ex,tx,""),Wa(ex,tx,"esm2020")}pM();const t1={apiKey:"AIzaSyB3p9kAAb0TJXvJMKzUS6pummdlkbzlt6I",authDomain:"fft12l.firebaseapp.com",projectId:"fft12l",storageBucket:"fft12l.firebasestorage.app",messagingSenderId:"459190857682",appId:"1:459190857682:web:d857f4bf1fa2e5ec11220b"},jg=Vm(t1),It=gE(jg),Ne=CD(jg),mM=fM(jg);(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&(console.log(" MODO DEV: Conectando aos Emuladores do Firebase..."),qm(It,"http://127.0.0.1:9099",{disableWarnings:!0}),PA(Ne,"127.0.0.1",8080),e1(mM,"127.0.0.1",9199));const gM=(i,e)=>sE(It,i,e),Cf="/FF-12Liberation/assets/chocobo-loading-CZsGc2ZM.gif",n1="/FF-12Liberation/assets/musica-tema-78rqvj_H.mp3",yM="/FF-12Liberation/assets/fundo-rpg-BXz1tR4K.jpg",Fo=new Audio(n1);Fo.loop=!0;function bM(){const i=Ui(),e=()=>{Fo.play().then(()=>{console.log("ter musical sintonizado.")}).catch(n=>{console.log("Aguardando interao para liberar udio: ",n)}),i("/login")};return h.jsxs("div",{className:"landing-container",onClick:e,children:[h.jsxs("div",{className:"content",children:[h.jsx("h1",{className:"game-title",children:"FINAL FANTASY"}),h.jsx("h2",{className:"sub-title",children:"12 Libertao"}),h.jsx("div",{className:"press-start",children:"PRESS START"})]}),h.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .landing-container {
          height: 100vh;
          width: 100vw;
          display: flex;
          align-items: center;
          justify-content: center;
          /* Gradiente FF clssico sobre a imagem de fundo */
          background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), 
                      url(${yM}) no-repeat center center;
          background-size: cover; 
          cursor: pointer;
          position: fixed;
          top: 0;
          left: 0;
          z-index: 1000;
        }

        .content {
          text-align: center;
          /* Animao de entrada suave com blur */
          animation: fadeInSuave 4s ease-in-out; 
        }

        .game-title {
          font-size: clamp(30px, 8vw, 60px);
          letter-spacing: 8px;
          color: #fff;
          text-shadow: 3px 3px 5px #000, 0 0 20px rgba(0, 242, 255, 0.5);
          font-family: 'serif';
        }

        .sub-title {
          font-size: clamp(14px, 4vw, 24px);
          color: #ffcc00;
          margin-top: 10px;
          text-shadow: 1px 1px 3px #000;
          font-family: 'serif';
        }

        .press-start {
          margin-top: 80px;
          font-size: 20px;
          color: #fff;
          letter-spacing: 5px;
          text-shadow: 0 0 10px #00f2ff;
          /* Efeito pulsante clssico de menu */
          animation: blink 1.5s infinite;
          font-family: 'sans-serif';
        }

        @keyframes blink {
          0%, 100% { opacity: 0; }
          50% { opacity: 1; }
        }

        @keyframes fadeInSuave {
          from { opacity: 0; filter: blur(15px); transform: scale(0.9); }
          to { opacity: 1; filter: blur(0); transform: scale(1); }
        }
      `}})]})}const Pg="/FF-12Liberation/assets/video-fundo-B5LPnOg0.mp4",vM="/FF-12Liberation/assets/botao-admin-T-iaDg61.png";function _M(){const i=Ui(),e=I.useRef(null),[n,s]=I.useState(null),[o,c]=I.useState(""),[d,m]=I.useState(""),[g,y]=I.useState(""),x=()=>{e.current&&(e.current.pause(),e.current.currentTime=0)};I.useEffect(()=>{if(e.current){e.current.volume=.1;const P=e.current.play();P!==void 0&&P.catch(U=>{console.log("Autoplay bloqueado pelo navegador (interao necessria):",U)})}return()=>{x()}},[]);const E=async P=>{P.preventDefault(),y("");try{const L=(await gM(o,d)).user,z=Ze(Ne,"users",L.uid),W=await Dd(z);if(W.exists()){const J=W.data();if(n==="master"&&J.role!=="mestre"){y("ACESSO NEGADO: VOC NO  UM MESTRE.");return}if(x(),J.role==="mestre")i("/mestre");else{const oe=Ze(Ne,"characters",L.uid);(await Dd(oe)).exists()?i("/jogador-vtt"):i("/create-character")}}else{const J=Ze(Ne,"characters",L.uid),oe=await Dd(J);x(),oe.exists()?i("/jogador-vtt"):i("/create-character")}}catch(U){console.error(U),y("FALHA NA CONEXO COM O TER.")}},N=()=>{x(),i("/admin-login")};return h.jsxs("div",{className:"login-container",children:[h.jsx("audio",{ref:e,loop:!0,children:h.jsx("source",{src:n1,type:"audio/mp3"})}),h.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"auto",className:"background-video",children:h.jsx("source",{src:Pg,type:"video/mp4"})}),h.jsx("div",{className:"content-overlay",children:n?h.jsxs("form",{className:"login-panel fade-in",onSubmit:E,children:[h.jsx("button",{type:"button",className:"ff-back",onClick:()=>s(null),children:" RETORNAR"}),h.jsx("h3",{className:"ff-subtitle",children:n==="master"?"NARRADOR":"JOGADOR"}),h.jsxs("div",{className:"ff-input-group",children:[h.jsx("input",{type:"email",placeholder:"E-MAIL",value:o,onChange:P=>c(P.target.value),required:!0}),h.jsx("input",{type:"password",placeholder:"SENHA",value:d,onChange:P=>m(P.target.value),required:!0})]}),g&&h.jsx("p",{className:"ff-error",children:g}),h.jsx("button",{type:"submit",className:"ff-submit",children:"ENTRAR"})]}):h.jsxs("div",{className:"selection-screen fade-in",children:[h.jsx("h2",{className:"ff-title",children:"ESCOLHA SUA JORNADA"}),h.jsxs("div",{className:"ff-button-group",children:[h.jsx("button",{className:"ff-btn",onClick:()=>s("player"),children:"JOGADOR"}),h.jsx("button",{className:"ff-btn",onClick:()=>s("master"),children:"NARRADOR"})]})]})}),h.jsx("button",{className:"admin-portal-btn",onClick:N,title:"Acesso ao Narrador",children:h.jsx("img",{src:vM,alt:"Portal Admin"})}),h.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .login-container {
          height: 100vh;
          width: 100vw;
          background: #000;
          display: flex;
          align-items: center;
          justify-content: center;
          overflow: hidden;
          position: relative;
        }

        .background-video {
          position: absolute;
          top: 50%;
          left: 50%;
          min-width: 100%;
          min-height: 100%;
          width: auto;
          height: auto;
          z-index: 1; 
          transform: translate(-50%, -50%);
          object-fit: cover;
          animation: quickLoopFade 0.5s ease-in-out;
        }

        @keyframes quickLoopFade {
          0% { opacity: 0; }
          100% { opacity: 1; }
        }

        .content-overlay {
          position: relative;
          z-index: 10;
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.4);
        }

        .ff-title { 
          color: #fff; 
          font-size: 32px; 
          letter-spacing: 8px; 
          margin-bottom: 40px; 
          text-shadow: 0 0 15px rgba(255, 255, 255, 0.5); 
          text-align: center;
          font-family: 'serif'; 
        }

        .ff-subtitle { color: #ffcc00; letter-spacing: 4px; margin-bottom: 30px; text-align: center; }
        .ff-button-group { display: flex; flex-direction: column; gap: 20px; align-items: center; }
        
        /* Botes Iniciais */
        .ff-btn {
          background: rgba(0, 0, 30, 0.6); 
          border: 1px solid rgba(255, 255, 255, 0.6);
          color: #fff;
          padding: 15px 50px;
          letter-spacing: 3px;
          cursor: pointer;
          transition: 0.4s;
          width: 280px;
          backdrop-filter: blur(5px);
          font-weight: bold;
        }

        /* Boto de Entrar (Ajustado para igualar a largura dos inputs) */
        .ff-submit {
          background: rgba(0, 0, 30, 0.6); 
          border: 1px solid rgba(255, 255, 255, 0.6);
          color: #fff;
          padding: 15px 0; /* padding lateral removido para usar width */
          letter-spacing: 3px;
          cursor: pointer;
          transition: 0.4s;
          width: 326px; /* 300px input + 24px padding + 2px border */
          backdrop-filter: blur(5px);
          font-weight: bold;
          margin: 0 auto;
          display: block;
        }

        .ff-btn:hover, .ff-submit:hover { 
          background: #fff; 
          color: #000; 
          box-shadow: 0 0 20px #fff; 
        }

        .ff-input-group input {
          display: block; 
          width: 300px; 
          padding: 12px; 
          margin: 0 auto 20px auto;
          background: rgba(0, 0, 0, 0.7); 
          border: 1px solid #444;
          color: #fff; 
          text-align: center; 
          letter-spacing: 2px; 
          outline: none;
        }

        .ff-input-group input:focus { border-color: #ffcc00; }
        .ff-back { background: none; border: none; color: #ffcc00; cursor: pointer; margin-bottom: 15px; display: block; font-weight: bold; }
        .ff-error { color: #ff4444; font-size: 12px; margin-bottom: 15px; text-shadow: 0 0 5px #000; text-align: center; }

        .admin-portal-btn {
          position: absolute;
          bottom: 30px;
          right: 30px;
          z-index: 100;
          background: none;
          border: none;
          cursor: pointer;
          width: 70px;
          transition: 0.5s;
          filter: drop-shadow(0 0 8px rgba(0, 242, 255, 0.6));
        }

        .admin-portal-btn img { width: 100%; height: auto; }
        .admin-portal-btn:hover { transform: scale(1.2) rotate(-5deg); filter: drop-shadow(0 0 15px #00f2ff); }

        .fade-in { animation: fadeInFF 2s ease-out forwards; }

        @keyframes fadeInFF {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `}})]})}function xM(){const[i,e]=I.useState(""),[n,s]=I.useState(""),[o,c]=I.useState(""),d=Ui(),m=async g=>{if(g.preventDefault(),c(""),i!=="fffvtt10@gmail.com"){c("VOC NO TEM PERMISSO DE NARRADOR.");return}try{await sE(It,i,n),d("/admin")}catch(y){console.error(y),c("SENHA INCORRETA OU FALHA NA CONEXO.")}};return h.jsxs("div",{className:"login-container",children:[h.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"background-video",children:h.jsx("source",{src:Pg,type:"video/mp4"})}),h.jsx("div",{className:"content-overlay",children:h.jsxs("form",{className:"login-panel fade-in",onSubmit:m,children:[h.jsx("button",{type:"button",className:"ff-back",onClick:()=>d("/"),children:" RETORNAR"}),h.jsx("h3",{className:"ff-subtitle",children:"PORTAL DO ADMINISTRADOR"}),h.jsxs("div",{className:"ff-input-group",children:[h.jsx("input",{type:"email",placeholder:"E-MAIL",value:i,onChange:g=>e(g.target.value),required:!0}),h.jsx("input",{type:"password",placeholder:"CHAVE DE ACESSO",value:n,onChange:g=>s(g.target.value),required:!0})]}),o&&h.jsx("p",{className:"ff-error",style:{color:"#ff4444",fontSize:"12px",marginBottom:"10px"},children:o}),h.jsx("button",{type:"submit",className:"ff-submit",children:"DESBLOQUEAR"})]})}),h.jsx("style",{children:`
        .login-container { 
          height: 100vh; 
          width: 100vw; 
          display: flex; 
          align-items: center; 
          justify-content: center; 
          position: relative; 
          overflow: hidden; 
          background: #000; 
        }
        .background-video { 
          position: absolute; 
          top: 50%; 
          left: 50%; 
          min-width: 100%; 
          min-height: 100%; 
          transform: translate(-50%, -50%); 
          object-fit: cover; 
          z-index: 1; 
        }
        .content-overlay { 
          position: absolute; 
          top: 0; 
          left: 0; 
          z-index: 10; 
          width: 100%; 
          height: 100%; 
          display: flex; 
          align-items: center; 
          justify-content: center; 
          background: rgba(0,0,0,0.6); 
        }
        .login-panel { 
          background: rgba(0, 0, 30, 0.85); 
          padding: 40px; 
          border: 1px solid #00f2ff; 
          backdrop-filter: blur(15px); 
          text-align: center;
          box-shadow: 0 0 30px rgba(0, 242, 255, 0.3);
          width: 350px;
        }
        .ff-subtitle { color: #ffcc00; letter-spacing: 4px; margin-bottom: 25px; font-weight: bold; }
        .ff-input-group input { 
          display: block; 
          width: 100%; 
          padding: 12px; 
          margin: 10px 0; 
          background: rgba(0,0,0,0.8); 
          border: 1px solid #444; 
          color: #fff; 
          text-align: center; 
          outline: none; 
          box-sizing: border-box;
        }
        .ff-input-group input:focus { border-color: #00f2ff; box-shadow: 0 0 10px rgba(0, 242, 255, 0.2); }
        .ff-submit { 
          background: transparent; 
          border: 1px solid #fff; 
          color: #fff; 
          padding: 12px 40px; 
          cursor: pointer; 
          transition: 0.3s; 
          width: 100%; 
          letter-spacing: 2px; 
          margin-top: 10px;
        }
        .ff-submit:hover { background: #fff; color: #000; box-shadow: 0 0 15px #fff; }
        .ff-back { background: none; border: none; color: #ffcc00; cursor: pointer; margin-bottom: 20px; font-size: 12px; }
        .fade-in { animation: fadeInFF 1.5s ease-out; }
        @keyframes fadeInFF { from { opacity: 0; } to { opacity: 1; } }
      `})]})}function EM(){const[i,e]=I.useState([]),[n,s]=I.useState([]),[o,c]=I.useState(""),[d,m]=I.useState(""),[g,y]=I.useState("jogador"),[x,E]=I.useState(""),[N,P]=I.useState(!1);I.useEffect(()=>{Fo&&Fo.pause()},[]),I.useEffect(()=>{U()},[]);const U=async()=>{try{const le=(await Tm(Lt(Ne,"users"))).docs.map(R=>({id:R.id,...R.data()})).filter(R=>R.email!=="fffvtt10@gmail.com"),C=(await Tm(Lt(Ne,"characters"))).docs.map(R=>({id:R.id,...R.data()}));e(le),s(C)}catch(se){console.error("Erro ao carregar dados do ter: ",se)}},L=async se=>{if(se.preventDefault(),!o||!d)return alert("Preencha todos os campos!");P(!0);let le=null;try{le=Vm(t1,"SecondaryApp");const me=gE(le);window.location.hostname==="localhost"&&qm(me,"http://127.0.0.1:9099");const R=(await lC(me,o,d)).user;await kg(Ze(Ne,"users",R.uid),{email:o,role:g,uid:R.uid,active:!0,createdAt:Dn()}),await hC(me),alert(`Usurio ${o} invocado com sucesso!`),c(""),m(""),U()}catch(me){console.error(me),alert("Erro ao invocar usurio: "+me.message)}finally{le&&await WN(le),P(!1)}},z=async(se,le)=>{if(window.confirm(`Deseja banir permanentemente ${le} do ter?`))try{await xr(Ze(Ne,"users",se)),await xr(Ze(Ne,"characters",se)),alert("Conta e personagem banidos com sucesso."),U()}catch(me){alert("Erro ao banir usurio: "+me.message)}},W=async se=>{if(window.confirm("Tem certeza que deseja apagar APENAS o personagem deste usurio? Ele ter que criar outro."))try{await xr(Ze(Ne,"characters",se)),alert("Personagem deletado. O usurio continua ativo."),U()}catch(le){alert("Erro ao deletar personagem: "+le.message)}},J=se=>{const le=n.find(me=>me.uid===se);return le||null},oe=async()=>{if(x.length<6)return alert("A senha deve ter no mnimo 6 caracteres.");try{await cC(It.currentUser,x),alert("Sua chave de mestre foi alterada!"),E("")}catch{alert("Erro ao trocar senha. Tente fazer login novamente.")}};return h.jsxs("div",{className:"admin-container",children:[h.jsx("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"background-video-admin",children:h.jsx("source",{src:Pg,type:"video/mp4"})}),h.jsxs("div",{className:"admin-overlay",children:[h.jsx("h1",{className:"admin-title",children:"PAINEL DO NARRADOR"}),h.jsxs("div",{className:"admin-grid",children:[h.jsxs("div",{className:"admin-card",children:[h.jsx("h3",{children:"INVOCAR NOVO JOGADOR"}),h.jsxs("form",{onSubmit:L,children:[h.jsx("input",{placeholder:"E-mail Arcano",type:"email",value:o,onChange:se=>c(se.target.value),required:!0}),h.jsx("input",{placeholder:"Palavra-Passe",type:"text",value:d,onChange:se=>m(se.target.value),required:!0}),h.jsxs("select",{value:g,onChange:se=>y(se.target.value),children:[h.jsx("option",{value:"jogador",children:"Jogador"}),h.jsx("option",{value:"mestre",children:"Mestre Auxiliar"})]}),h.jsx("button",{type:"submit",disabled:N,className:"btn-summon",children:N?"INVOCANDO...":"CRIAR ACESSO"})]})]}),h.jsxs("div",{className:"admin-card scroll-card",children:[h.jsxs("h3",{children:["ALMAS REGISTRADAS (",i.length,")"]}),h.jsx("div",{className:"list-container",children:i.map(se=>{const le=J(se.id);return h.jsxs("div",{className:"list-item",children:[h.jsxs("div",{className:"item-info",children:[h.jsx("span",{className:"item-main",children:se.email}),h.jsx("span",{className:`badge ${se.role}`,children:se.role.toUpperCase()}),le&&h.jsxs("span",{style:{fontSize:"10px",color:"#ffcc00",marginTop:"2px"},children:[" ",le.name]})]}),h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[h.jsx("button",{className:"btn-ban",onClick:()=>z(se.id,se.email),children:"BANIR"}),le&&h.jsx("button",{className:"btn-ban",style:{borderColor:"#f80",color:"#f80"},onClick:()=>W(se.id),children:"DEL CHAR"})]})]},se.id)})})]}),h.jsxs("div",{className:"admin-card",children:[h.jsx("h3",{children:"MINHA CHAVE MESTRA"}),h.jsx("input",{type:"password",placeholder:"Nova Senha",value:x,onChange:se=>E(se.target.value)}),h.jsx("button",{className:"btn-summon",style:{background:"#333",border:"1px solid #fff"},onClick:oe,children:"ATUALIZAR"})]})]})]}),h.jsx("style",{children:`
        .admin-container { width: 100vw; height: 100vh; overflow: hidden; position: relative; font-family: 'Cinzel', serif; color: #fff; background: #000; }
        .background-video-admin { position: absolute; top: 50%; left: 50%; width: 100%; height: 100%; object-fit: cover; transform: translate(-50%, -50%); opacity: 0.4; pointer-events: none; }
        .admin-overlay { position: relative; z-index: 10; padding: 40px; display: flex; flex-direction: column; height: 100%; }
        .admin-title { color: #ffcc00; text-align: center; font-size: 32px; letter-spacing: 5px; margin-bottom: 30px; text-shadow: 0 0 10px #ffcc00; }
        .admin-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 30px; height: 100%; }
        .admin-card { background: rgba(0, 10, 20, 0.9); border: 1px solid #ffcc00; border-radius: 8px; padding: 20px; display: flex; flex-direction: column; backdrop-filter: blur(10px); }
        .admin-card h3 { color: #00f2ff; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0; font-size: 16px; letter-spacing: 2px; }
        .scroll-card .list-container { overflow-y: auto; flex: 1; padding-right: 5px; }
        .scroll-card .list-container::-webkit-scrollbar { width: 5px; }
        .scroll-card .list-container::-webkit-scrollbar-thumb { background: #333; }
        
        input, select { background: #000; border: 1px solid #444; color: #fff; padding: 12px; width: 100%; margin-bottom: 15px; font-family: 'serif'; outline: none; }
        input:focus, select:focus { border-color: #ffcc00; }
        
        .btn-summon { width: 100%; background: #ffcc00; color: #000; border: none; padding: 12px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .btn-summon:hover:not(:disabled) { background: #fff; box-shadow: 0 0 15px #fff; }
        .btn-summon:disabled { background: #333; color: #666; cursor: not-allowed; }

        .list-item { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); padding: 10px; margin-bottom: 8px; border-radius: 4px; border: 1px solid transparent; }
        .list-item:hover { border-color: #00f2ff; }
        .item-info { display: flex; flex-direction: column; }
        .item-main { font-weight: bold; color: #eee; font-size: 14px; }
        .item-sub { font-size: 10px; color: #aaa; }
        
        .badge { font-size: 10px; padding: 2px 6px; border-radius: 4px; font-weight: bold; color: #000; text-transform: uppercase; margin-right: 5px; }
        .badge.jogador { background: #00f2ff; }
        .badge.mestre { background: #ffcc00; }
        
        .btn-ban { background: transparent; border: 1px solid #f44; color: #f44; font-size: 10px; padding: 4px 8px; cursor: pointer; }
        .btn-ban:hover { background: #f44; color: #fff; }
      `})]})}const a1="/FF-12Liberation/assets/fundo-mestre-OTxRyTTC.jpg",i1="/FF-12Liberation/assets/sanchez-1nilABmc.jpeg",s1="/FF-12Liberation/assets/papiro-CRka9pgw.png",AM="/FF-12Liberation/assets/bazar-DZ7p321B.png";function Vg({isMestre:i,playerData:e}){const[n,s]=I.useState(!1),[o,c]=I.useState([]),[d,m]=I.useState([]),[g,y]=I.useState(""),[x,E]=I.useState(null),[N,P]=I.useState(""),[U,L]=I.useState({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""});I.useEffect(()=>{if(!n)return;const T=Mn(Lt(Ne,"game_items"),wa("status","==","bazar"),Mo("updatedAt","desc")),D=kn(T,w=>{c(w.docs.map(we=>({id:we.id,...we.data()})))});return()=>D()},[n]),I.useEffect(()=>{if(!n||!i)return;const T=Mn(Lt(Ne,"game_items"),wa("status","==","vault"),Mo("nome","asc")),D=kn(T,w=>{const we=w.docs.map(De=>({id:De.id,...De.data()})).filter(De=>!De.ownerId);m(we)});return()=>D()},[n,i]);const z=T=>{const D=T.target.value;if(P(D),!D)return;const w=d.find(we=>we.id===D);w&&L({...U,nome:w.nome,descricao:w.descricao,imagem:w.imagem,valorGil:"",valorReal:""})},W=async T=>{if(T.preventDefault(),!U.nome||!U.valorGil)return alert("Preencha nome e valor em Gil!");try{const D={...U,updatedAt:Dn()};x?(await Ot(Ze(Ne,"game_items",x),D),E(null)):N?(await Ot(Ze(Ne,"game_items",N),{...D,status:"bazar"}),P("")):await mc(Lt(Ne,"game_items"),{...D,status:"bazar",ownerId:null,createdAt:Dn()}),L({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""})}catch{alert("Erro ao salvar item no Bazar.")}},J=async T=>{window.confirm("Remover do mercado? O item voltar para a Forja.")&&await Ot(Ze(Ne,"game_items",T),{status:"vault",updatedAt:Dn()})},oe=async T=>{if(!It.currentUser)return alert("Voc precisa estar logado.");const D=e?.character_sheet?.inventory?.gil||0,w=Number(T.valorGil);if(D<w)return alert(`Saldo insuficiente! Voc tem ${D} Gil, mas o item custa ${w} Gil.`);if(window.confirm(`Comprar "${T.nome}" por ${T.valorGil} Gil?`))try{const De=D-w,Y=Ze(Ne,"characters",It.currentUser.uid),ue=JSON.parse(JSON.stringify(e.character_sheet));ue.inventory.gil=De,await kg(Y,{character_sheet:ue},{merge:!0}),await Ot(Ze(Ne,"game_items",T.id),{status:"requested",ownerId:It.currentUser.uid,buyerName:e.name,updatedAt:Dn()}),alert(`Solicitao enviada! O Mestre aprovar a entrega em breve. Saldo restante: ${De} Gil.`)}catch(De){console.error("Erro na compra:",De),alert("Erro na transao. Verifique o console.")}},[se,le]=I.useState([]);I.useEffect(()=>{if(!i||!n)return;const T=Mn(Lt(Ne,"game_items"),wa("status","==","requested")),D=kn(T,w=>{le(w.docs.map(we=>({id:we.id,...we.data()})))});return()=>D()},[i,n]);const me=async T=>{try{await Ot(Ze(Ne,"game_items",T.id),{status:"vault",ownerId:T.ownerId,buyerName:T.buyerName,updatedAt:Dn()}),alert(`Venda aprovada! O item "${T.nome}" foi enviado para o Cofre Pessoal de ${T.buyerName}.`)}catch{alert("Erro ao aprovar.")}},C=T=>{E(T.id),P(""),L(T)},R=()=>{E(null),P(""),L({nome:"",descricao:"",imagem:"",valorGil:"",valorReal:""})},O=o.filter(T=>T.nome.toLowerCase().includes(g.toLowerCase())),k=T=>T&&T.startsWith("http")?`url(${T})`:"url('https://via.placeholder.com/150?text=Item')";return h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"bazar-trigger-btn",onClick:()=>s(!0),title:"Abrir Bazar",children:h.jsx("img",{src:AM,alt:"Bazar",onError:T=>{T.target.style.display="none",T.target.parentNode.innerText="BAZAR"}})}),n&&h.jsx("div",{className:"bazar-overlay-flex",onClick:()=>s(!1),children:h.jsxs("div",{className:"bazar-modal-centered",onClick:T=>T.stopPropagation(),children:[h.jsxs("div",{className:"bazar-header",children:[h.jsx("h2",{children:"MERCADO NEGRO"}),h.jsx("button",{className:"close-btn",onClick:()=>s(!1),children:""})]}),i&&h.jsxs("div",{className:"mestre-panel",children:[se.length>0&&h.jsxs("div",{className:"requests-box",children:[h.jsxs("h4",{children:["PEDIDOS DE COMPRA (",se.length,")"]}),se.map(T=>h.jsxs("div",{className:"request-row",children:[h.jsxs("span",{children:[h.jsx("strong",{children:T.buyerName})," quer comprar ",h.jsx("strong",{children:T.nome})," (",T.valorGil," G)"]}),h.jsx("button",{className:"btn-approve",onClick:()=>me(T),children:"APROVAR ENTREGA"})]},T.id))]}),h.jsxs("form",{onSubmit:W,className:"bazar-form",children:[!x&&h.jsx("div",{className:"row",style:{marginBottom:"10px"},children:h.jsxs("select",{className:"bazar-input",onChange:z,value:N,children:[h.jsx("option",{value:"",children:" Selecionar Item do Cofre (Forja)..."}),d.map(T=>h.jsx("option",{value:T.id,children:T.nome},T.id))]})}),h.jsxs("div",{className:"row",children:[h.jsx("input",{placeholder:"Nome do Item",value:U.nome,onChange:T=>L({...U,nome:T.target.value}),className:"bazar-input",readOnly:!!N&&!x}),h.jsx("input",{placeholder:"Link Imagem",value:U.imagem,onChange:T=>L({...U,imagem:T.target.value}),className:"bazar-input"})]}),h.jsxs("div",{className:"row",children:[h.jsx("input",{placeholder:"Valor Gil",type:"number",value:U.valorGil,onChange:T=>L({...U,valorGil:T.target.value}),className:"bazar-input",required:!0}),h.jsx("input",{placeholder:"Valor Real (R$)",type:"number",value:U.valorReal,onChange:T=>L({...U,valorReal:T.target.value}),className:"bazar-input"})]}),h.jsx("textarea",{placeholder:"Descrio do item...",value:U.descricao,onChange:T=>L({...U,descricao:T.target.value}),className:"bazar-input area"}),h.jsxs("div",{className:"form-actions",children:[h.jsx("button",{type:"submit",className:"btn-save",children:x?"SALVAR ALTERAES":N?"COLOCAR  VENDA":"CRIAR E VENDER"}),(x||N)&&h.jsx("button",{type:"button",onClick:R,className:"btn-cancel",children:"CANCELAR"})]})]})]}),h.jsx("div",{className:"search-bar-container",children:h.jsx("input",{type:"text",placeholder:" Procurar mercadoria...",value:g,onChange:T=>y(T.target.value),className:"search-input"})}),h.jsxs("div",{className:"bazar-grid",children:[O.map(T=>h.jsxs("div",{className:"bazar-item-card",children:[h.jsx("div",{className:"item-img",style:{backgroundImage:k(T.imagem)}}),h.jsxs("div",{className:"item-info",children:[h.jsx("h4",{children:T.nome}),h.jsx("p",{className:"desc",children:T.descricao}),h.jsxs("div",{className:"prices",children:[h.jsxs("span",{className:"price-tag gil",children:[" ",T.valorGil," G"]}),T.valorReal&&h.jsxs("span",{className:"price-tag real",children:[" R$ ",T.valorReal]})]})]}),h.jsx("div",{className:"item-actions",children:i?h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"btn-icon edit",onClick:()=>C(T),title:"Editar Preo",children:""}),h.jsx("button",{className:"btn-icon delete",onClick:()=>J(T.id),title:"Devolver para a Forja",children:""})]}):h.jsx("button",{className:"btn-buy",onClick:()=>oe(T),children:"COMPRAR"})})]},T.id)),O.length===0&&h.jsx("p",{className:"empty-msg",children:"Nenhum item  venda no momento."})]})]})}),h.jsx("style",{children:`
        .bazar-trigger-btn { position: fixed; bottom: 30px; right: 30px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #ffcc00; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; }
        .bazar-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 25px #ffcc00; }
        .bazar-trigger-btn img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; }

        /* NOVO CSS PARA CENTRALIZAR O MODAL SEM CORTAR */
        .bazar-overlay-flex { 
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; 
            background: rgba(0,0,0,0.85); z-index: 100000; 
            display: flex; align-items: center; justify-content: center; 
            backdrop-filter: blur(5px); 
        }
        .bazar-modal-centered { 
            width: 800px; max-width: 95vw; 
            height: 750px; max-height: 90vh; /* Garante que cabe na tela */
            background: #0d0d15; border: 1px solid #ffcc00; 
            display: flex; flex-direction: column; 
            box-shadow: 0 0 50px rgba(0,0,0,0.8); border-radius: 8px; 
            overflow: hidden; 
        }

        .bazar-header { background: linear-gradient(90deg, #1a1a1a, #000); padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #ffcc00; }
        .bazar-header h2 { margin: 0; color: #ffcc00; font-family: serif; letter-spacing: 2px; text-shadow: 0 0 10px #ffcc00; font-size: 24px; }
        .close-btn { background: transparent; border: none; color: #fff; font-size: 30px; cursor: pointer; }

        .mestre-panel { background: rgba(255, 204, 0, 0.05); padding: 15px; border-bottom: 1px solid #333; }
        
        .requests-box { background: rgba(0, 242, 255, 0.1); border: 1px solid #00f2ff; padding: 10px; margin-bottom: 15px; border-radius: 4px; }
        .requests-box h4 { color: #00f2ff; margin: 0 0 10px 0; font-size: 12px; }
        .request-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; font-size: 12px; color: #fff; }
        .btn-approve { background: #00f2ff; color: #000; border: none; padding: 5px 10px; font-weight: bold; cursor: pointer; border-radius: 3px; }

        .bazar-form { display: flex; flex-direction: column; gap: 10px; }
        .bazar-form .row { display: flex; gap: 10px; }
        .bazar-input { background: #000; border: 1px solid #444; color: #fff; padding: 10px; flex: 1; outline: none; font-family: serif; }
        .bazar-input.area { height: 60px; resize: none; }
        .form-actions { display: flex; gap: 10px; }
        .btn-save { flex: 1; background: #ffcc00; border: none; padding: 10px; font-weight: bold; cursor: pointer; color: #000; }
        .btn-cancel { background: #333; color: #fff; border: 1px solid #555; padding: 10px; cursor: pointer; }

        .search-bar-container { padding: 15px; background: #000; border-bottom: 1px solid #333; }
        .search-input { width: 100%; background: #111; border: 1px solid #444; color: #fff; padding: 12px; border-radius: 20px; text-align: center; outline: none; font-size: 16px; }

        .bazar-grid { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; scrollbar-width: none; -ms-overflow-style: none; }
        .bazar-grid::-webkit-scrollbar { display: none; }

        .bazar-item-card { background: linear-gradient(90deg, rgba(20,20,30,0.9), rgba(0,0,0,0.8)); border: 1px solid #444; display: flex; align-items: center; padding: 10px; border-radius: 4px; transition: 0.2s; }
        .bazar-item-card:hover { border-color: #00f2ff; box-shadow: 0 0 15px rgba(0, 242, 255, 0.1); }
        
        .item-img { width: 80px; height: 80px; background-size: cover; background-position: center; border: 1px solid #666; margin-right: 15px; border-radius: 4px; background-color: #000; }
        .item-info { flex: 1; }
        .item-info h4 { margin: 0 0 5px 0; color: #fff; font-size: 18px; letter-spacing: 1px; }
        .item-info .desc { margin: 0 0 10px 0; color: #aaa; font-size: 12px; font-style: italic; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        
        .prices { display: flex; gap: 10px; }
        .price-tag { padding: 4px 8px; border-radius: 3px; font-weight: bold; font-size: 12px; }
        .price-tag.gil { background: rgba(255,255,0,0.1); color: #ffcc00; border: 1px solid #ffcc00; }
        .price-tag.real { background: rgba(0, 242, 255, 0.1); color: #00f2ff; border: 1px solid #00f2ff; }

        .item-actions { display: flex; gap: 8px; align-items: center; margin-left: 15px; }
        .btn-buy { background: #00f2ff; color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; clip-path: polygon(10% 0, 100% 0, 100% 70%, 90% 100%, 0 100%, 0 30%); transition: 0.2s; }
        .btn-buy:hover { background: #fff; box-shadow: 0 0 15px #00f2ff; }
        
        .btn-icon { background: transparent; border: 1px solid #444; color: #fff; padding: 8px; cursor: pointer; border-radius: 4px; font-size: 16px; }
        .btn-icon:hover { background: #fff; color: #000; }
        .btn-icon.delete:hover { background: #f44; border-color: #f44; color: #fff; }
        .empty-msg { text-align: center; color: #666; margin-top: 50px; font-style: italic; }
      `})]})}const TM="/FF-12Liberation/assets/forja-Dr7AylP_.png";function r1(){const[i,e]=I.useState(!1),[n,s]=I.useState([]),[o,c]=I.useState(""),[d,m]=I.useState(null),[g,y]=I.useState({nome:"",descricao:"",imagem:""});I.useEffect(()=>{if(!i)return;const L=Mn(Lt(Ne,"game_items"),wa("status","==","vault"),Mo("createdAt","desc")),z=kn(L,W=>{s(W.docs.map(J=>({id:J.id,...J.data()})))});return()=>z()},[i]);const x=async L=>{if(L.preventDefault(),!g.nome)return alert("O item precisa de um nome!");try{const z={...g,updatedAt:Dn()};d?(await Ot(Ze(Ne,"game_items",d),z),m(null)):await mc(Lt(Ne,"game_items"),{...z,status:"vault",ownerId:null,valorGil:0,createdAt:Dn()}),y({nome:"",descricao:"",imagem:""})}catch(z){alert("Erro ao forjar item."),console.error(z)}},E=async L=>{window.confirm("ATENO: Isso destruir o item permanentemente. Deseja continuar?")&&await xr(Ze(Ne,"game_items",L))},N=L=>{m(L.id),y(L)},P=()=>{m(null),y({nome:"",descricao:"",imagem:""})},U=n.filter(L=>L.nome.toLowerCase().includes(o.toLowerCase()));return h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"forja-trigger-btn",onClick:()=>e(!0),title:"Abrir Forja",children:h.jsx("img",{src:TM,alt:"Forja",onError:L=>{L.target.style.display="none",L.target.parentNode.innerText="FORJA"}})}),i&&h.jsx("div",{className:"forja-overlay",onClick:()=>e(!1),children:h.jsxs("div",{className:"forja-modal",onClick:L=>L.stopPropagation(),children:[h.jsxs("div",{className:"forja-header",children:[h.jsx("h2",{children:"A FORJA ANTIGA"}),h.jsx("button",{className:"close-btn",onClick:()=>e(!1),children:""})]}),h.jsxs("div",{className:"mestre-panel-forja",children:[h.jsx("h4",{style:{color:"#f44",margin:"0 0 10px 0"},children:"FORJAR NOVO ARTEFATO"}),h.jsxs("form",{onSubmit:x,className:"forja-form",children:[h.jsxs("div",{className:"row",children:[h.jsx("input",{placeholder:"Nome do Artefato",value:g.nome,onChange:L=>y({...g,nome:L.target.value}),className:"forja-input"}),h.jsx("input",{placeholder:"URL da Imagem (Imgur)",value:g.imagem,onChange:L=>y({...g,imagem:L.target.value}),className:"forja-input"})]}),h.jsx("textarea",{placeholder:"Descrio detalhada e lore do item...",value:g.descricao,onChange:L=>y({...g,descricao:L.target.value}),className:"forja-input area"}),h.jsxs("div",{className:"form-actions",children:[h.jsx("button",{type:"submit",className:"btn-forjar",children:d?"REFUNDIR (SALVAR)":"FORJAR ITEM"}),d&&h.jsx("button",{type:"button",onClick:P,className:"btn-cancel",children:"CANCELAR"})]})]})]}),h.jsx("div",{className:"search-bar-container-forja",children:h.jsx("input",{type:"text",placeholder:" Buscar nos arquivos da forja...",value:o,onChange:L=>c(L.target.value),className:"search-input-forja"})}),h.jsxs("div",{className:"forja-grid",children:[U.map(L=>h.jsxs("div",{className:"forja-item-card",children:[h.jsx("div",{className:"item-img",style:{backgroundImage:`url(${L.imagem||"https://via.placeholder.com/150?text=?"})`}}),h.jsxs("div",{className:"item-info",children:[h.jsx("h4",{children:L.nome}),L.ownerId&&h.jsxs("div",{className:"owner-tag",children:["COMPRADO POR: ",L.buyerName||"Jogador"]}),h.jsx("p",{className:"desc",children:L.descricao}),h.jsxs("small",{style:{color:"#666"},children:["Status: ",L.ownerId?"Cofre Pessoal":"Cofre Global"]})]}),h.jsxs("div",{className:"item-actions",children:[h.jsx("button",{className:"btn-icon edit",onClick:()=>N(L),title:"Editar",children:""}),h.jsx("button",{className:"btn-icon delete",onClick:()=>E(L.id),title:"Destruir",children:""})]})]},L.id)),U.length===0&&h.jsx("p",{className:"empty-msg",children:"A forja est fria. Nenhum item no cofre."})]})]})}),h.jsx("style",{children:`
        .forja-trigger-btn {
          position: fixed; bottom: 30px; right: 110px; width: 70px; height: 70px;
          border-radius: 50%; border: 2px solid #f44; background: #000; cursor: pointer; z-index: 9999;
          transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center;
          color: #f44; font-weight: bold; font-size: 10px;
        }
        .forja-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 20px #f44; }
        .forja-trigger-btn img { width: 80%; height: 80%; object-fit: contain; }

        .forja-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.9); z-index: 100000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .forja-modal { width: 800px; max-height: 90vh; background: #150a0a; border: 1px solid #f44; display: flex; flex-direction: column; box-shadow: 0 0 50px rgba(255, 68, 68, 0.2); border-radius: 8px; overflow: hidden; }

        .forja-header { background: linear-gradient(90deg, #2a0e0e, #000); padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #f44; }
        .forja-header h2 { margin: 0; color: #f44; font-family: serif; letter-spacing: 2px; text-shadow: 0 0 10px #f44; font-size: 24px; }
        .close-btn { background: transparent; border: none; color: #fff; font-size: 30px; cursor: pointer; }

        .mestre-panel-forja { background: rgba(255, 68, 68, 0.05); padding: 20px; border-bottom: 1px solid #333; }
        .forja-form { display: flex; flex-direction: column; gap: 10px; }
        .forja-form .row { display: flex; gap: 10px; }
        .forja-input { background: #000; border: 1px solid #522; color: #fff; padding: 10px; flex: 1; outline: none; font-family: serif; }
        .forja-input:focus { border-color: #f44; }
        .forja-input.area { height: 80px; resize: none; }
        
        .btn-forjar { flex: 1; background: #f44; border: none; padding: 12px; font-weight: bold; cursor: pointer; color: #fff; text-transform: uppercase; letter-spacing: 1px; }
        .btn-forjar:hover { background: #d00; box-shadow: 0 0 10px #d00; }
        .btn-cancel { background: #333; color: #fff; border: 1px solid #555; padding: 10px; cursor: pointer; }

        .search-bar-container-forja { padding: 15px; background: #000; border-bottom: 1px solid #333; }
        .search-input-forja { width: 100%; background: #111; border: 1px solid #522; color: #fff; padding: 12px; border-radius: 20px; text-align: center; outline: none; font-size: 16px; }

        .forja-grid { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; scrollbar-width: none; -ms-overflow-style: none; }
        .forja-grid::-webkit-scrollbar { display: none; }

        .forja-item-card { background: linear-gradient(90deg, rgba(40,10,10,0.9), rgba(0,0,0,0.8)); border: 1px solid #522; display: flex; align-items: center; padding: 10px; border-radius: 4px; transition: 0.2s; }
        .forja-item-card:hover { border-color: #f44; }
        
        .item-img { width: 70px; height: 70px; background-size: cover; background-position: center; border: 1px solid #633; margin-right: 15px; border-radius: 4px; background-color: #000; }
        .item-info { flex: 1; }
        .item-info h4 { margin: 0 0 5px 0; color: #fff; font-size: 18px; }
        .item-info .desc { margin: 0; color: #aaa; font-size: 12px; font-style: italic; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        
        /* NOVA ETIQUETA DE DONO */
        .owner-tag { background: #00f2ff; color: #000; font-size: 10px; font-weight: bold; padding: 2px 6px; border-radius: 4px; display: inline-block; margin-bottom: 4px; }

        .item-actions { display: flex; gap: 8px; margin-left: 15px; }
        .btn-icon { background: transparent; border: 1px solid #444; color: #fff; padding: 8px; cursor: pointer; border-radius: 4px; }
        .btn-icon:hover { background: #fff; color: #000; }
        .btn-icon.delete:hover { background: #f44; border-color: #f44; color: #fff; }
        
        .empty-msg { text-align: center; color: #666; margin-top: 50px; font-style: italic; }
      `})]})}const SM=({isOpen:i,onClose:e,onSave:n,label:s})=>{const[o,c]=I.useState("");return i?h.jsx("div",{className:"img-modal-overlay",onClick:e,children:h.jsxs("div",{className:"img-modal-content",onClick:d=>d.stopPropagation(),children:[h.jsxs("h3",{children:["ALTERAR IMAGEM: ",s.toUpperCase()]}),h.jsx("input",{placeholder:"Cole o link da imagem (Imgur, Discord, etc)...",value:o,onChange:d=>c(d.target.value),autoFocus:!0}),h.jsxs("div",{className:"img-modal-actions",children:[h.jsx("button",{onClick:()=>{n(o),e()},className:"btn-confirm",children:"CONFIRMAR"}),h.jsx("button",{onClick:e,className:"btn-cancel",children:"CANCELAR"})]})]})}):null};function Lg({characterData:i,isMaster:e,onClose:n}){const[s,o]=I.useState(i.character_sheet||{}),[c,d]=I.useState("geral"),[m,g]=I.useState(!1),[y,x]=I.useState(!1),[E,N]=I.useState(!1),[P,U]=I.useState(""),[L,z]=I.useState(null),[W,J]=I.useState(!1),[oe,se]=I.useState([]),[le,me]=I.useState(null),[C,R]=I.useState(null),[O,k]=I.useState(null),[T,D]=I.useState(null);I.useRef(s.basic_info?.level),I.useEffect(()=>{i&&i.character_sheet&&o(i.character_sheet)},[i]);const w=(Q,_e)=>{if(!e)return;const pe=JSON.parse(JSON.stringify(s)),Ae=Q.split(".");let Re=pe;for(let Le=0;Le<Ae.length-1;Le++)Re[Ae[Le]]||(Re[Ae[Le]]={}),Re=Re[Ae[Le]];Re[Ae[Ae.length-1]]=_e,o(pe),x(!0)},we=async()=>{try{const Q=Ze(Ne,"characters",i.uid||i.id);await Ot(Q,{character_sheet:s}),x(!1)}catch(Q){console.error("Erro ao salvar:",Q),alert("Erro ao salvar ficha.")}},De=(Q,_e)=>{e&&(U(Q),z(()=>_e),N(!0))},Y=(Q,_e,pe,Ae)=>{e&&(k({skill:_e,index:Ae}),D(pe),Q.dataTransfer.effectAllowed="move")},ue=Q=>{Q.preventDefault()},Ee=(Q,_e,pe)=>{if(Q.preventDefault(),!O||!e)return;const Ae=JSON.parse(JSON.stringify(s)),Re=Ae.job_system[T==="primary"?"primary_class":"secondary_class"].skills,Le=Ae.job_system[_e==="primary"?"primary_class":"secondary_class"].skills,[Ge]=Re.splice(O.index,1);T===_e?Re.splice(pe,0,Ge):Le.splice(pe,0,Ge),o(Ae),x(!0),k(null),D(null)},je=Q=>{const _e=()=>"_"+Math.random().toString(36).substr(2,9),pe=JSON.parse(JSON.stringify(s));pe.job_system[Q].skills.push({id:_e(),name:"",cost:"",effect:"",xp:{current:0,max:100},master:!1}),o(pe),x(!0)},Fe=(Q,_e)=>{if(!window.confirm("Remover este slot de habilidade?"))return;const pe=JSON.parse(JSON.stringify(s));pe.job_system[Q].skills.splice(_e,1),o(pe),x(!0)},j=(Q,_e)=>{const pe=JSON.parse(JSON.stringify(s)),Ae=pe.job_system[Q].skills[_e];Ae.master=!0,Ae.xp.current=Ae.xp.max,o(pe),x(!0)},Z=async Q=>{if(!e)return;me(Q);const _e=Mn(Lt(Ne,"game_items"),wa("status","==","vault")),Re=(await Tm(_e)).docs.map(Le=>({id:Le.id,...Le.data()})).filter(Le=>!Le.ownerId||Le.ownerId===(i.uid||i.id));se(Re),J(!0)},ae=async Q=>{const _e=JSON.parse(JSON.stringify(s));_e.equipment.slots[le]={item_id:Q.id,item_name:Q.nome,item_img:Q.imagem,description:Q.descricao,effect:""},o(_e),x(!0);const pe=Ze(Ne,"game_items",Q.id);await Ot(pe,{status:"equipped",ownerId:i.uid||i.id,slotIndex:le,updatedAt:Dn()}),J(!1)},de=async Q=>{if(!e)return;const _e=s.equipment.slots[Q];if(_e.item_id&&window.confirm("Isso devolver o item para a Forja (Cofre). Confirmar?")){const Ae=Ze(Ne,"game_items",_e.item_id);await Ot(Ae,{status:"vault",slotIndex:null,updatedAt:Dn()})}const pe=JSON.parse(JSON.stringify(s));pe.equipment.slots[Q]={item_name:"",item_img:"",effect:""},o(pe),x(!0)},ye=async()=>{e&&(g(!0),setTimeout(async()=>{g(!1);const Q=s.basic_info.level||1,_e=Math.floor(s.basic_info.experience.max*1.5),pe=JSON.parse(JSON.stringify(s));pe.basic_info.level=Q+1,pe.basic_info.experience.current=0,pe.basic_info.experience.max=_e,o(pe);const Ae=Ze(Ne,"characters",i.uid||i.id);await Ot(Ae,{character_sheet:pe})},4e3))},ce=["FOR","INT","SOR","CAR","VEL","CONS"],be=100,Pe=85,fe=125,ft=(Q,_e,pe)=>{const Ae=Math.PI*2*_e/pe-Math.PI/2,Re=fe+Pe*(Q/be)*Math.cos(Ae),Le=fe+Pe*(Q/be)*Math.sin(Ae);return{x:Re,y:Le}},ot=ce.map((Q,_e)=>{const pe=s.attributes?.[Q]?.value||0,{x:Ae,y:Re}=ft(pe,_e,ce.length);return`${Ae},${Re}`}).join(" "),lt=Q=>Q&&Q.length>5?{backgroundImage:`url(${Q})`}:{backgroundColor:"#111",border:"1px solid #333"};return h.jsxs("div",{className:"ficha-overlay-fixed",children:[h.jsx(SM,{isOpen:E,onClose:()=>N(!1),onSave:L,label:P}),e&&y&&h.jsx("button",{className:"save-fab glowing",onClick:we,title:"Salvar Alteraes",children:""}),h.jsxs("div",{className:"ficha-container fade-in",children:[h.jsx("button",{className:"close-btn-ficha",onClick:n,children:""}),h.jsxs("div",{className:"ficha-header",children:[h.jsxs("div",{className:"guild-insignia-box",children:[h.jsx("span",{className:"header-label-top",children:"SIGNO"}),h.jsx("div",{className:`insignia-display ${e?"clickable":""}`,style:lt(s.basic_info.guild_insignia),onClick:()=>De("Signo",Q=>w("basic_info.guild_insignia",Q)),title:e?"Clique para alterar imagem":""})]}),h.jsxs("div",{className:"header-info",children:[h.jsx("h1",{children:s.basic_info.character_name}),h.jsxs("span",{className:"sub-header",children:[s.basic_info.race," // ",i.class]}),h.jsxs("div",{className:"xp-container",children:[h.jsxs("div",{className:"lvl-box",children:[h.jsx("small",{children:"LVL"}),e?h.jsx("input",{className:"lvl-input",type:"number",value:s.basic_info.level,onChange:Q=>w("basic_info.level",Number(Q.target.value))}):h.jsx("span",{children:s.basic_info.level})]}),h.jsxs("div",{className:"xp-bar-box",children:[h.jsxs("div",{className:"xp-text",children:["XP ",e?h.jsx("input",{className:"xp-mini-input",value:s.basic_info.experience.current,onChange:Q=>w("basic_info.experience.current",Number(Q.target.value))}):s.basic_info.experience.current," / ",e?h.jsx("input",{className:"xp-mini-input",value:s.basic_info.experience.max,onChange:Q=>w("basic_info.experience.max",Number(Q.target.value))}):s.basic_info.experience.max]}),h.jsx("div",{className:"xp-track",children:h.jsx("div",{className:"xp-fill",style:{width:`${Math.min(s.basic_info.experience.current/s.basic_info.experience.max*100,100)}%`}})})]}),e&&s.basic_info.experience.current>=s.basic_info.experience.max&&h.jsx("button",{className:"btn-levelup glowing",onClick:ye,children:" UP"})]})]}),h.jsxs("div",{className:"header-right-group",children:[h.jsxs("div",{className:"guild-item-box",children:[h.jsx("span",{className:"header-label-top",children:"BRASO"}),h.jsx("div",{className:`special-display ${e?"clickable":""}`,style:lt(s.basic_info.special_image),onClick:()=>De("Especial",Q=>w("basic_info.special_image",Q)),title:e?"Clique para alterar imagem especial":""})]}),h.jsxs("div",{className:"guild-item-box",children:[h.jsx("span",{className:"header-label-top",children:"RANK"}),h.jsx("div",{className:`rank-display ${e?"clickable":""}`,style:lt(s.basic_info.guild_rank_image),onClick:()=>De("Rank",Q=>w("basic_info.guild_rank_image",Q)),title:e?"Clique para alterar imagem":""})]})]})]}),h.jsxs("div",{className:"ficha-tabs",children:[h.jsx("button",{className:`tab-btn ${c==="geral"?"active":""}`,onClick:()=>d("geral"),children:"VISO GERAL"}),h.jsx("button",{className:`tab-btn ${c==="habilidades"?"active":""}`,onClick:()=>d("habilidades"),children:"GRIMRIO DE HABILIDADES"})]}),h.jsx("div",{className:"ficha-body",children:c==="geral"?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"col-attributes",children:[h.jsx("h3",{className:"section-title",children:"ATRIBUTOS"}),h.jsx("div",{className:"radar-wrapper",children:h.jsxs("svg",{width:"250",height:"250",viewBox:"0 0 250 250",children:[[20,40,60,80,100].map(Q=>h.jsx("polygon",{points:ce.map((_e,pe)=>{const{x:Ae,y:Re}=ft(Q,pe,6);return`${Ae},${Re}`}).join(" "),fill:"none",stroke:"#333",strokeWidth:"1"},Q)),h.jsx("polygon",{points:ot,fill:"rgba(0, 242, 255, 0.2)",stroke:"#00f2ff",strokeWidth:"2"}),ce.map((Q,_e)=>{const{x:pe,y:Ae}=ft(120,_e,6),Re=s.attributes?.[Q]?.value||0;return h.jsx("foreignObject",{x:pe-20,y:Ae-15,width:"40",height:"30",children:h.jsxs("div",{className:"stat-box-chart",children:[h.jsx("span",{className:"sb-label",children:Q}),e?h.jsx("input",{className:"sb-input",value:Re,onChange:Le=>w(`attributes.${Q}.value`,Number(Le.target.value))}):h.jsx("span",{className:"sb-val",children:Re})]})},Q)})]})}),h.jsxs("div",{className:"secondary-stats",children:[h.jsxs("div",{className:"stat-row",children:[h.jsx("label",{children:"HP"}),h.jsxs("div",{className:"stat-bars-inputs",children:[e?h.jsx("input",{value:s.status.hp.current,onChange:Q=>w("status.hp.current",Number(Q.target.value))}):h.jsx("span",{children:s.status.hp.current}),"/",e?h.jsx("input",{value:s.status.hp.max,onChange:Q=>w("status.hp.max",Number(Q.target.value))}):h.jsx("span",{children:s.status.hp.max})]})]}),h.jsxs("div",{className:"stat-row",children:[h.jsx("label",{children:"MP"}),h.jsxs("div",{className:"stat-bars-inputs mp",children:[e?h.jsx("input",{value:s.status.mp.current,onChange:Q=>w("status.mp.current",Number(Q.target.value))}):h.jsx("span",{children:s.status.mp.current}),"/",e?h.jsx("input",{value:s.status.mp.max,onChange:Q=>w("status.mp.max",Number(Q.target.value))}):h.jsx("span",{children:s.status.mp.max})]})]}),h.jsxs("div",{className:"stat-row-simple",children:[h.jsxs("div",{className:"s-box",children:[h.jsx("label",{children:"ARM"}),e?h.jsx("input",{value:s.status.arm.value,onChange:Q=>w("status.arm.value",Number(Q.target.value))}):h.jsx("span",{children:s.status.arm.value})]}),h.jsxs("div",{className:"s-box",children:[h.jsx("label",{children:"RES"}),e?h.jsx("input",{value:s.status.res.value,onChange:Q=>w("status.res.value",Number(Q.target.value))}):h.jsx("span",{children:s.status.res.value})]}),h.jsxs("div",{className:"s-box",children:[h.jsx("label",{children:"MOV"}),e?h.jsx("input",{value:s.status.mov?.value||3,onChange:Q=>w("status.mov.value",Number(Q.target.value))}):h.jsx("span",{children:s.status.mov?.value||3})]})]})]})]}),h.jsxs("div",{className:"col-center-equip",children:[h.jsx("div",{className:`char-image-frame ${e?"clickable":""}`,onClick:()=>De("Personagem",Q=>w("imgUrl",Q)),title:e?"Clique para alterar foto":"",children:h.jsx("div",{className:"image-display",style:lt(s.imgUrl)})}),h.jsx("div",{className:"equip-slots-overlay",children:[{id:0,label:"CABEA",style:{top:"-30px",left:"50%",transform:"translateX(-50%)"}},{id:1,label:"CORPO",style:{top:"80px",right:"-15px"}},{id:2,label:"MO DIR.",style:{bottom:"120px",right:"-15px"}},{id:3,label:"MO ESQ.",style:{bottom:"120px",left:"-15px"}},{id:4,label:"ACESS. 1",style:{top:"80px",left:"-15px"}},{id:5,label:"ACESS. 2",style:{bottom:"-20px",left:"60px"}},{id:6,label:"PS",style:{bottom:"-20px",right:"60px"}}].map((Q,_e)=>h.jsxs("div",{className:"equip-slot",style:Q.style,children:[h.jsx("div",{className:"slot-label",children:Q.label}),h.jsxs("div",{className:"slot-square",children:[!s.equipment?.slots?.[_e]?.item_img&&e&&h.jsx("button",{className:"btn-plus-item",onClick:()=>Z(_e),children:"+"}),s.equipment?.slots?.[_e]?.item_img?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"item-bg",style:lt(s.equipment.slots[_e].item_img)}),h.jsx("button",{className:"btn-eye-item",onClick:()=>R(s.equipment.slots[_e]),children:""}),e&&h.jsx("button",{className:"btn-return-forge",title:"Devolver para Forja",onClick:()=>de(_e),children:""})]}):!e&&h.jsx("span",{className:"empty-text",children:"Vazio"})]})]},_e))})]}),h.jsxs("div",{className:"col-inventory",children:[h.jsx("h3",{className:"section-title",children:"BOLSA & GIL"}),h.jsxs("div",{className:"gil-display",children:[h.jsx("span",{className:"coin-icon",children:""}),e?h.jsx("input",{type:"number",className:"gil-input-master",value:s.inventory.gil,onChange:Q=>w("inventory.gil",Number(Q.target.value))}):h.jsx("span",{className:"gil-amount",children:s.inventory.gil}),h.jsx("span",{className:"currency",children:"GIL"})]}),h.jsxs("div",{className:"items-list",children:[h.jsx("h4",{children:"MOCHILA"}),h.jsxs("div",{className:"items-scroll",children:[(s.inventory.items||[]).map((Q,_e)=>h.jsx("div",{className:"inv-row",children:e?h.jsxs(h.Fragment,{children:[h.jsx("input",{className:"inv-name",value:Q.name,onChange:pe=>w(`inventory.items.${_e}.name`,pe.target.value)}),h.jsx("input",{className:"inv-qtd",type:"number",value:Q.quantity,onChange:pe=>w(`inventory.items.${_e}.quantity`,Number(pe.target.value))}),h.jsx("button",{className:"btn-x-red",onClick:()=>{const pe=s.inventory.items.filter((Ae,Re)=>Re!==_e);w("inventory.items",pe)},children:""})]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"i-name",children:Q.name||"Slot Vazio"}),h.jsxs("span",{className:"i-qtd",children:["x",Q.quantity||0]})]})},_e)),e&&h.jsx("button",{className:"add-item-btn",onClick:()=>w("inventory.items",[...s.inventory.items||[],{name:"Novo Item",quantity:1}]),children:"+ Slot"})]})]})]})]}):h.jsxs("div",{className:"skills-tab-content",children:[["primary_class","secondary_class"].map((Q,_e)=>h.jsxs("div",{className:"skills-col",children:[h.jsxs("h3",{className:`class-header ${Q==="secondary_class"?"secondary":""}`,children:[e?h.jsx("input",{className:"class-name-input",value:s.job_system?.[Q]?.name,onChange:pe=>w(`job_system.${Q}.name`,pe.target.value)}):s.job_system?.[Q]?.name,e&&h.jsx("button",{className:"btn-add-skill-slot",onClick:()=>je(Q),children:"+"})]}),h.jsx("div",{className:"skills-list",children:(s.job_system?.[Q]?.skills||[]).map((pe,Ae)=>h.jsxs("div",{className:`skill-card ${Q==="secondary_class"?"secondary":""} ${pe.master?"mastered":""}`,draggable:e,onDragStart:Re=>Y(Re,pe,Q==="primary_class"?"primary":"secondary",Ae),onDragOver:ue,onDrop:Re=>Ee(Re,Q==="primary_class"?"primary":"secondary",Ae),children:[h.jsxs("div",{className:"skill-top",children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px",flex:1},children:[pe.master&&h.jsx("span",{className:"star-icon pulsing",children:""}),e?h.jsx("input",{placeholder:"Nome",value:pe.name,onChange:Re=>w(`job_system.${Q}.skills.${Ae}.name`,Re.target.value),className:"skill-name-in"}):h.jsx("strong",{className:"skill-name",children:pe.name||"Slot Vazio"})]}),e?h.jsx("input",{placeholder:"Custo",value:pe.cost,onChange:Re=>w(`job_system.${Q}.skills.${Ae}.cost`,Re.target.value),className:"skill-cost-in"}):h.jsx("span",{className:"skill-cost",children:pe.cost}),e&&h.jsx("button",{className:"btn-x-red-small",onClick:()=>Fe(Q,Ae),children:""})]}),e?h.jsx("textarea",{placeholder:"Efeito...",value:pe.effect,onChange:Re=>w(`job_system.${Q}.skills.${Ae}.effect`,Re.target.value),className:"skill-desc-in"}):h.jsx("p",{className:"skill-desc",children:pe.effect}),h.jsxs("div",{className:"skill-xp-box",children:[h.jsxs("div",{className:"xp-labels",children:[h.jsx("span",{children:"XP"}),e?h.jsxs("div",{style:{display:"flex"},children:[h.jsx("input",{className:"xp-tiny",value:pe.xp?.current||0,onChange:Re=>w(`job_system.${Q}.skills.${Ae}.xp.current`,Number(Re.target.value))})," /",h.jsx("input",{className:"xp-tiny",value:pe.xp?.max||100,onChange:Re=>w(`job_system.${Q}.skills.${Ae}.xp.max`,Number(Re.target.value))})]}):h.jsxs("span",{children:[pe.xp?.current||0," / ",pe.xp?.max||100]})]}),h.jsx("div",{className:`skill-track ${pe.master?"grayed":""}`,children:h.jsx("div",{className:"skill-fill",style:{width:`${Math.min((pe.xp?.current||0)/(pe.xp?.max||100)*100,100)}%`}})}),e&&!pe.master&&pe.xp?.current>=pe.xp?.max&&h.jsx("button",{className:"btn-masterize",onClick:()=>j(Q,Ae),children:"MASTERIZAR"})]})]},pe.id))})]},Q)),h.jsx("div",{className:"skills-col extra-col",children:h.jsxs("div",{className:"extra-abilities-box",children:[h.jsxs("div",{className:"ability-row",children:[h.jsx("label",{children:"REAO"}),e?h.jsx("input",{value:s.job_system?.reaction_ability?.name,onChange:Q=>w("job_system.reaction_ability.name",Q.target.value),className:"ab-input"}):h.jsx("span",{children:s.job_system?.reaction_ability?.name||"-"})]}),h.jsxs("div",{className:"ability-row",children:[h.jsx("label",{children:"PASSIVA"}),e?h.jsx("input",{value:s.job_system?.passive_ability?.name,onChange:Q=>w("job_system.passive_ability.name",Q.target.value),className:"ab-input"}):h.jsx("span",{children:s.job_system?.passive_ability?.name||"-"})]}),h.jsxs("div",{className:"bonus-row",children:[h.jsx("label",{children:"BNUS DE CLASSE"}),e?h.jsx("textarea",{value:s.job_system?.class_bonus?.value,onChange:Q=>w("job_system.class_bonus.value",Q.target.value),className:"bonus-area"}):h.jsx("p",{children:s.job_system?.class_bonus?.value||"Nenhum"})]})]})})]})}),W&&h.jsx("div",{className:"item-selector-overlay",onClick:()=>J(!1),children:h.jsxs("div",{className:"item-selector-box",onClick:Q=>Q.stopPropagation(),children:[h.jsx("h3",{children:"EQUIPAR DO COFRE"}),h.jsxs("div",{className:"forge-list-scroll",children:[oe.length===0&&h.jsx("p",{className:"empty-text",children:"Nenhum item disponvel na Forja."}),oe.map(Q=>h.jsxs("div",{className:"forge-item-row",onClick:()=>ae(Q),children:[h.jsx("div",{className:"forge-thumb",style:lt(Q.imagem)}),h.jsxs("div",{children:[h.jsx("strong",{children:Q.nome}),Q.ownerId&&h.jsx("small",{style:{color:"#0f0"},children:" (Seu Item)"}),h.jsxs("p",{children:[Q.descricao.substring(0,40),"..."]})]})]},Q.id))]}),h.jsx("button",{className:"btn-cancel-modal",onClick:()=>J(!1),children:"CANCELAR"})]})}),C&&h.jsx("div",{className:"item-selector-overlay",onClick:()=>R(null),children:h.jsxs("div",{className:"item-details-box",onClick:Q=>Q.stopPropagation(),children:[h.jsx("div",{className:"detail-img-large",style:lt(C.item_img)}),h.jsx("h3",{children:C.item_name}),h.jsx("p",{className:"details-desc",children:C.description||"Sem descrio"}),h.jsxs("p",{className:"details-effect",children:["Efeito: ",C.effect||"Nenhum"]}),h.jsx("button",{className:"btn-cancel-modal",onClick:()=>R(null),children:"FECHAR"})]})}),m&&h.jsx("div",{className:"level-up-overlay",children:h.jsx("h1",{className:"levelup-text",children:"LEVEL UP!"})})]}),h.jsx("style",{children:`
        /* GERAL */
        .ficha-overlay-fixed { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.95); z-index: 200000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(8px); }
        .ficha-container { width: 1200px; height: 850px; max-width: 95vw; max-height: 98vh; background: #050a10; border: 2px solid #ffcc00; display: flex; flex-direction: column; position: relative; box-shadow: 0 0 50px rgba(255, 204, 0, 0.2); border-radius: 8px; overflow: hidden; font-family: 'Cinzel', serif; color: #fff; }
        .close-btn-ficha { position: absolute; top: 10px; right: 15px; background: transparent; border: none; color: #f44; font-size: 24px; cursor: pointer; z-index: 200; font-weight: bold; }
        .save-fab { position: absolute; bottom: 30px; right: 30px; width: 60px; height: 60px; border-radius: 50%; background: #222; border: 2px solid #444; color: #fff; font-size: 30px; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 300; transition: 0.3s; box-shadow: 0 0 15px #000; }
        .save-fab:hover { background: #00f2ff; border-color: #fff; color: #000; box-shadow: 0 0 30px #00f2ff; }
        .save-fab.glowing { animation: pulseSave 1.5s infinite; border-color: #00f2ff; color: #00f2ff; }
        @keyframes pulseSave { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        /* HEADER */
        .ficha-header { padding: 25px 30px 10px 30px; background: linear-gradient(90deg, #101020, #000); border-bottom: 2px solid #333; display: flex; justify-content: space-between; align-items: center; height: 140px; position: relative; }
        .guild-insignia-box, .guild-rank-box, .guild-item-box { display: flex; flex-direction: column; align-items: center; width: 80px; position: relative; padding-top: 10px; }
        .header-right-group { display: flex; gap: 20px; align-items: flex-end; }
        .header-label-top { font-size: 10px; color: #ffcc00; font-weight: bold; letter-spacing: 1px; margin-bottom: 2px; }
        .insignia-display, .rank-display, .special-display { width: 70px; height: 70px; background-size: contain; background-repeat: no-repeat; background-position: center; border: 1px solid #333; border-radius: 50%; background-color: #000; position: relative; transition: 0.2s; }
        .special-display { border-radius: 12px; }
        .clickable:hover { cursor: pointer; border-color: #ffcc00; box-shadow: 0 0 10px #ffcc00; }
        .header-info { flex: 1; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .header-info h1 { margin: 0; color: #ffcc00; font-size: 36px; letter-spacing: 4px; text-shadow: 0 0 10px rgba(255,204,0,0.3); }
        .sub-header { color: #00f2ff; font-size: 14px; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 15px; }
        .xp-container { display: flex; align-items: center; gap: 15px; width: 60%; margin-top: -5px; }
        .lvl-box { display: flex; flex-direction: column; align-items: center; background: #222; border: 1px solid #ffcc00; padding: 5px 12px; border-radius: 4px; box-shadow: 0 0 10px rgba(255,204,0,0.2); }
        .lvl-box small { font-size: 8px; color: #ffcc00; }
        .lvl-box span { font-size: 24px; font-weight: bold; line-height: 1; }
        .lvl-input { width: 40px; background: transparent; border: none; color: #fff; font-size: 24px; font-weight: bold; text-align: center; }
        .xp-bar-box { flex: 1; display: flex; flex-direction: column; }
        .xp-text { text-align: right; font-size: 10px; color: #aaa; margin-bottom: 2px; }
        .xp-mini-input { background: #111; border: none; color: #fff; width: 30px; text-align: center; font-size: 10px; }
        .xp-track { width: 100%; height: 8px; background: #111; border: 1px solid #444; border-radius: 4px; overflow: hidden; }
        .xp-fill { height: 100%; background: linear-gradient(90deg, #00f2ff, #0088ff); transition: width 0.5s; }
        .btn-levelup { background: linear-gradient(to bottom, #ffcc00, #ff8800); border: 2px solid #fff; color: #000; font-weight: bold; padding: 5px 15px; cursor: pointer; border-radius: 20px; animation: glow 1s infinite alternate; font-family: 'Cinzel', serif; font-size: 10px; }
        @keyframes glow { from { box-shadow: 0 0 10px #ffcc00; } to { box-shadow: 0 0 30px #ffcc00; transform: scale(1.05); } }
        .ficha-tabs { display: flex; background: #111; border-bottom: 1px solid #333; margin-top: 0; }
        .tab-btn { flex: 1; background: transparent; border: none; padding: 15px; color: #666; font-family: 'Cinzel', serif; font-size: 16px; cursor: pointer; transition: 0.3s; border-bottom: 3px solid transparent; }
        .tab-btn:hover { color: #fff; background: rgba(255,255,255,0.05); }
        .tab-btn.active { color: #ffcc00; border-bottom: 3px solid #ffcc00; background: rgba(255, 204, 0, 0.05); }
        .ficha-body { flex: 1; display: flex; padding: 30px 20px; gap: 20px; overflow: hidden; position: relative; }
        
        /* ESTILOS DE HABILIDADES */
        .skills-tab-content { display: flex; width: 100%; height: 100%; gap: 20px; }
        .skills-col { flex: 1; display: flex; flex-direction: column; background: rgba(0,0,0,0.3); border: 1px solid #333; padding: 10px; border-radius: 4px; overflow: hidden; }
        .skills-col.extra-col { flex: 0.5; }
        .class-header { color: #00f2ff; font-size: 16px; border-bottom: 2px solid #00f2ff; padding-bottom: 5px; margin-bottom: 10px; text-transform: uppercase; display: flex; justify-content: space-between; align-items: center; }
        .class-header.secondary { color: #aaa; border-color: #666; }
        .class-name-input { background: transparent; border: none; color: inherit; font-size: inherit; font-weight: bold; width: 80%; }
        .btn-add-skill-slot { background: transparent; border: 1px solid #555; color: #fff; width: 20px; height: 20px; cursor: pointer; font-size: 14px; line-height: 1; }
        
        .skills-list { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; padding-right: 5px; 
            scrollbar-width: none; 
        }
        .skills-list::-webkit-scrollbar { display: none; }
        
        .skill-card { background: rgba(0, 30, 60, 0.4); border: 1px solid #005577; padding: 8px; border-radius: 4px; cursor: grab; transition: 0.2s; }
        .skill-card.secondary { background: rgba(30, 30, 30, 0.4); border-color: #444; }
        .skill-card:active { cursor: grabbing; border-color: #ffcc00; }
        .skill-card.mastered { border-color: #ffd700; background: rgba(50, 40, 0, 0.4); }
        .skill-top { display: flex; justify-content: space-between; margin-bottom: 5px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; }
        .skill-name { color: #ffcc00; font-size: 13px; }
        .skill-cost { color: #00f2ff; font-size: 11px; font-weight: bold; }
        .skill-desc { font-size: 11px; color: #ccc; line-height: 1.3; margin: 0 0 5px 0; }
        .skill-name-in, .skill-cost-in { background: transparent; border: none; color: #fff; font-size: 12px; }
        .skill-name-in { flex: 1; font-weight: bold; color: #ffcc00; }
        .skill-cost-in { width: 40px; text-align: right; color: #00f2ff; }
        .skill-desc-in { width: 100%; background: transparent; border: none; color: #ccc; font-size: 11px; resize: none; font-family: sans-serif; height: 30px; }
        
        .skill-xp-box { margin-top: 5px; background: rgba(0,0,0,0.3); padding: 4px; border-radius: 3px; }
        .xp-labels { display: flex; justify-content: space-between; font-size: 9px; color: #888; margin-bottom: 2px; }
        .xp-tiny { background: transparent; border: none; color: #aaa; width: 20px; text-align: center; font-size: 9px; }
        .skill-track { width: 100%; height: 5px; background: #222; border-radius: 2px; overflow: hidden; }
        .skill-track.grayed .skill-fill { background: #888; }
        .skill-fill { height: 100%; background: #00f2ff; transition: width 0.3s; }
        .btn-masterize { width: 100%; margin-top: 4px; background: linear-gradient(to right, #d4af37, #b8860b); border: none; color: #000; font-size: 9px; font-weight: bold; cursor: pointer; padding: 2px; border-radius: 2px; }
        .star-icon { color: #ffd700; font-size: 14px; margin-right: 5px; text-shadow: 0 0 5px #ffd700; }
        .pulsing { animation: pulseStar 1.5s infinite; }
        @keyframes pulseStar { 0% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.3); opacity: 1; } 100% { transform: scale(1); opacity: 0.8; } }
        .btn-x-red-small { color: #f44; background: none; border: none; font-weight: bold; cursor: pointer; font-size: 12px; margin-left: 5px; }

        /* OUTRAS COLUNAS */
        .col-attributes { width: 300px; display: flex; flex-direction: column; align-items: center; border-right: 1px solid #333; padding-right: 20px; }
        .col-center-equip { flex: 1; position: relative; display: flex; justify-content: center; align-items: center; }
        .col-inventory { width: 280px; border-left: 1px solid #333; padding-left: 20px; display: flex; flex-direction: column; }
        .section-title { color: #aaa; font-size: 14px; border-bottom: 1px solid #00f2ff; width: 100%; text-align: center; margin-bottom: 15px; padding-bottom: 5px; }
        .radar-wrapper { position: relative; margin-bottom: 20px; }
        .stat-box-chart { background: #000; border: 1px solid #ffcc00; width: 40px; height: 30px; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 4px; box-shadow: 0 0 5px #000; }
        .sb-label { font-size: 8px; color: #aaa; }
        .sb-val { font-size: 12px; font-weight: bold; color: #fff; }
        .sb-input { width: 100%; height: 100%; background: transparent; border: none; color: #ffcc00; text-align: center; font-weight: bold; padding: 0; font-size: 12px; }
        .secondary-stats { width: 100%; }
        .stat-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
        .stat-row label { font-weight: bold; color: #ffcc00; width: 30px; }
        .stat-bars-inputs { flex: 1; background: rgba(255,0,0,0.1); border: 1px solid #522; padding: 5px; display: flex; align-items: center; justify-content: center; gap: 5px; color: #fff; border-radius: 4px; }
        .stat-bars-inputs.mp { background: rgba(0,0,255,0.1); border-color: #225; }
        .stat-bars-inputs input { background: transparent; border: none; color: #fff; width: 40px; text-align: center; font-family: 'serif'; font-weight: bold; }
        .stat-row-simple { display: flex; justify-content: space-between; gap: 10px; margin-top: 15px; }
        .s-box { flex: 1; background: #111; border: 1px solid #444; padding: 10px; text-align: center; border-radius: 4px; }
        .s-box label { display: block; font-size: 10px; color: #888; margin-bottom: 5px; }
        .s-box input { background: transparent; border: none; color: #fff; text-align: center; font-size: 18px; width: 100%; font-weight: bold; }
        .s-box span { font-size: 18px; font-weight: bold; }
        .char-image-frame { width: 300px; height: 450px; border: 2px solid #333; position: relative; background: #000; border-radius: 150px; overflow: hidden; box-shadow: inset 0 0 50px #000; margin-top: -20px; z-index: 1; transition: 0.2s; }
        .char-image-frame.clickable:hover { border-color: #ffcc00; cursor: pointer; }
        .image-display { width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.8; }
        .equip-slots-overlay { position: absolute; width: 300px; height: 450px; left: 50%; top: 50%; transform: translate(-50%, -50%); pointer-events: none; z-index: 2; margin-top: -10px; }
        .equip-slot { position: absolute; width: 80px; display: flex; flex-direction: column; align-items: center; pointer-events: auto; }
        .slot-label { font-size: 9px; color: #00f2ff; text-shadow: 0 0 2px #000; margin-bottom: 2px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        .slot-square { width: 60px; height: 60px; background: rgba(0, 10, 30, 0.9); border: 1px solid #ffcc00; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 15px rgba(0,0,0,0.8); position: relative; overflow: hidden; border-radius: 4px; }
        .item-bg { width: 100%; height: 100%; background-size: cover; background-position: center; position: absolute; top: 0; left: 0; }
        .empty-text { font-size: 9px; color: #666; text-align: center; line-height: 1; padding: 2px; }
        .btn-plus-item { background: transparent; color: #ffcc00; font-size: 24px; border: none; cursor: pointer; font-weight: bold; }
        .btn-eye-item { position: absolute; bottom: 2px; right: 2px; font-size: 10px; background: rgba(0,0,0,0.8); color: #fff; border: none; border-radius: 3px; cursor: pointer; padding: 2px 4px; z-index: 5; }
        .btn-return-forge { position: absolute; top: 2px; left: 2px; font-size: 10px; background: rgba(200, 0, 0, 0.8); color: #fff; border: none; border-radius: 3px; cursor: pointer; padding: 2px 4px; z-index: 5; }
        .gil-display { background: linear-gradient(90deg, rgba(255,204,0,0.1), transparent); border: 1px solid #ffcc00; padding: 15px; border-radius: 4px; display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .coin-icon { font-size: 20px; }
        .gil-amount { font-size: 24px; font-weight: bold; color: #fff; flex: 1; text-align: right; }
        .gil-input-master { background: transparent; border: none; color: #fff; font-size: 24px; font-weight: bold; width: 100%; text-align: right; outline: none; }
        input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        .currency { font-size: 10px; color: #ffcc00; font-weight: bold; }
        .items-list { flex: 1; display: flex; flex-direction: column; }
        .items-list h4 { color: #888; font-size: 12px; border-bottom: 1px solid #444; padding-bottom: 5px; margin-bottom: 10px; }
        .items-scroll { flex: 1; overflow-y: auto; padding-right: 5px; }
        .inv-row { display: flex; justify-content: space-between; border-bottom: 1px solid #222; padding: 8px 0; font-size: 12px; align-items: center; }
        .inv-name { background: transparent; border: none; color: #ddd; flex: 1; font-family: 'serif'; }
        .inv-qtd { background: transparent; border: none; color: #00f2ff; width: 40px; text-align: right; font-weight: bold; }
        .btn-x-red { color: #f44; background: none; border: none; cursor: pointer; font-weight: bold; margin-left: 5px; }
        .i-name { color: #ddd; }
        .i-qtd { color: #00f2ff; font-weight: bold; }
        .add-item-btn { width: 100%; background: #222; border: 1px dashed #555; color: #888; padding: 5px; cursor: pointer; margin-top: 10px; font-size: 10px; }
        .img-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 300000; display: flex; align-items: center; justify-content: center; }
        .img-modal-content { background: #111; border: 1px solid #ffcc00; padding: 25px; width: 400px; border-radius: 8px; text-align: center; box-shadow: 0 0 30px rgba(255,204,0,0.2); }
        .img-modal-content h3 { color: #ffcc00; margin-top: 0; font-family: 'Cinzel', serif; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 20px; }
        .img-modal-content input { width: 100%; padding: 12px; background: #000; border: 1px solid #444; color: #fff; margin-bottom: 20px; outline: none; border-radius: 4px; }
        .img-modal-content input:focus { border-color: #00f2ff; }
        .img-modal-actions { display: flex; gap: 15px; justify-content: center; }
        .btn-confirm { background: #00f2ff; color: #000; padding: 10px 25px; border: none; cursor: pointer; font-weight: bold; border-radius: 4px; transition: 0.2s; }
        .btn-confirm:hover { background: #fff; box-shadow: 0 0 15px #00f2ff; }
        .btn-cancel { background: #333; color: #fff; padding: 10px 25px; border: none; cursor: pointer; border-radius: 4px; }
        .btn-cancel:hover { background: #444; }
        .item-selector-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 300000; display: flex; align-items: center; justify-content: center; }
        .item-selector-box { width: 400px; height: 500px; background: #111; border: 1px solid #ffcc00; padding: 20px; display: flex; flex-direction: column; border-radius: 8px; }
        .item-selector-box h3 { color: #ffcc00; border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0; }
        .forge-list-scroll { flex: 1; overflow-y: auto; margin-bottom: 15px; }
        .forge-item-row { display: flex; align-items: center; padding: 10px; border-bottom: 1px solid #333; cursor: pointer; }
        .forge-item-row:hover { background: rgba(255,255,255,0.1); }
        .forge-item-row img { width: 40px; height: 40px; border: 1px solid #555; margin-right: 10px; }
        .forge-thumb { width: 40px; height: 40px; border: 1px solid #555; margin-right: 10px; background-size: cover; background-position: center; }
        .forge-item-row strong { color: #00f2ff; display: block; font-size: 12px; }
        .forge-item-row p { font-size: 10px; color: #aaa; margin: 0; }
        .btn-cancel-modal { width: 100%; padding: 10px; background: #333; color: #fff; border: none; cursor: pointer; }
        .item-details-box { width: 300px; background: #000; border: 1px solid #00f2ff; padding: 20px; text-align: center; border-radius: 8px; }
        .item-details-box img { width: 80px; height: 80px; border: 1px solid #fff; margin-bottom: 10px; }
        .detail-img-large { width: 80px; height: 80px; border: 1px solid #fff; margin: 0 auto 10px auto; background-size: cover; background-position: center; }
        .item-details-box h3 { color: #00f2ff; margin: 0 0 10px 0; }
        .details-desc { font-size: 12px; color: #ccc; margin-bottom: 10px; font-style: italic; }
        .details-effect { font-size: 12px; color: #ffcc00; font-weight: bold; margin-bottom: 20px; }
        .extra-abilities-box { margin-top: 20px; border-top: 2px solid #444; padding-top: 15px; }
        .ability-row { display: flex; align-items: center; margin-bottom: 10px; background: #222; padding: 8px; border-radius: 4px; border-left: 3px solid #ffcc00; }
        .ability-row label { font-size: 10px; color: #888; width: 60px; font-weight: bold; }
        .ability-row span { font-size: 12px; color: #fff; font-weight: bold; }
        .ab-input { background: transparent; border: none; color: #fff; font-weight: bold; flex: 1; font-size: 12px; }
        .bonus-row { margin-top: 10px; }
        .bonus-row label { font-size: 10px; color: #00f2ff; display: block; margin-bottom: 5px; font-weight: bold; }
        .bonus-row p { font-size: 12px; color: #ddd; font-style: italic; background: rgba(0,0,0,0.5); padding: 8px; border-radius: 4px; }
        .bonus-area { width: 100%; height: 60px; background: rgba(0,0,0,0.5); border: 1px solid #444; color: #ddd; font-size: 12px; padding: 5px; resize: none; }
        .level-up-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 100; display: flex; align-items: center; justify-content: center; animation: fadeOverlay 4s forwards; pointer-events: none; }
        .levelup-text { font-size: 80px; color: #ffcc00; text-shadow: 0 0 50px #ffcc00, 0 0 20px #fff; animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); letter-spacing: 5px; }
        @keyframes popIn { from { transform: scale(0); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes fadeOverlay { 0% { opacity: 1; } 80% { opacity: 1; } 100% { opacity: 0; } }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
      `})]})}const wM="/FF-12Liberation/assets/ficha-icon-Ds6_MepT.png",nx=({expiry:i})=>{const[e,n]=I.useState("");return I.useEffect(()=>{const s=setInterval(()=>{const o=new Date().getTime(),c=new Date(i).getTime()-o;if(c<0)n("EXPIRADA"),clearInterval(s);else{const d=Math.floor(c/864e5),m=Math.floor(c%(1e3*60*60*24)/(1e3*60*60)),g=Math.floor(c%(1e3*60*60)/(1e3*60));n(`${d}d ${m}h ${g}m`)}},1e3);return()=>clearInterval(s)},[i]),h.jsxs("span",{className:"mission-timer",children:[" ",e]})};function NM(){const i=Ui(),[e,n]=I.useState(null),[s,o]=I.useState([]),[c,d]=I.useState([]),[m,g]=I.useState([]),[y,x]=I.useState([]),[E,N]=I.useState(!0),[P,U]=I.useState(!1),[L,z]=I.useState(!1),[W,J]=I.useState(!1),[oe,se]=I.useState(!1),[le,me]=I.useState(null),[C,R]=I.useState(null),[O,k]=I.useState(null),[T,D]=I.useState(null),[w,we]=I.useState(null),[De,Y]=I.useState(""),[ue,Ee]=I.useState(""),[je,Fe]=I.useState([]),[j,Z]=I.useState([]),[ae,de]=I.useState({nome:"",local:"",contratante:"",descricaoMissao:"",objetivosMissao:"",requisitos:"",grupo:"",recompensa:"",rank:"E",imagem:"",duracao:"",gilRecompensa:""}),[ye,ce]=I.useState({missaoId:"",dataInicio:"",mapas:[],cenarios:[],monstros:[],jogadores:[]}),[be,Pe]=I.useState(""),[fe,ft]=I.useState("mapas"),[ot,lt]=I.useState(()=>localStorage.getItem("mestreAssinatura")||"Narrador");I.useEffect(()=>{localStorage.setItem("mestreAssinatura",ot)},[ot]),I.useEffect(()=>{Fo&&Fo.pause();const H=rf(It,Se=>{Se?(n(Se),N(!1)):(N(!1),i("/login"))});return()=>H()},[i]),I.useEffect(()=>{if(!e)return;const H=Mn(Lt(Ne,"missoes"),wa("mestreId","==",e.uid),Mo("createdAt","desc")),Se=Mn(Lt(Ne,"resenhas"),wa("mestreId","==",e.uid),Mo("createdAt","desc")),hn=Mn(Lt(Ne,"sessoes"),wa("mestreId","==",e.uid),Mo("dataInicio","asc")),ua=Mn(Lt(Ne,"characters")),Et=kn(H,At=>o(At.docs.map(_n=>({id:_n.id,..._n.data()}))),At=>console.error("Erro ao carregar Misses (Verifique ndices no Console):",At)),pn=kn(Se,At=>d(At.docs.map(_n=>({id:_n.id,..._n.data()}))),At=>console.error("Erro ao carregar Resenhas:",At)),Bs=kn(hn,At=>g(At.docs.map(_n=>({id:_n.id,..._n.data()}))),At=>console.error("Erro ao carregar Sesses:",At)),Hs=kn(ua,At=>x(At.docs.map(_n=>({id:_n.id,..._n.data()}))),At=>console.error("Erro ao carregar Personagens:",At));return()=>{Et(),pn(),Bs(),Hs()}},[e]),I.useEffect(()=>{if(le){const H=y.find(Se=>Se.id===le.id);H&&me(H)}},[y]);const Q=async H=>{if(H.preventDefault(),!!e)try{const Se=(ae.duracao.match(/(\d+)w/)||[0,0])[1]*6048e5+(ae.duracao.match(/(\d+)d/)||[0,0])[1]*864e5+(ae.duracao.match(/(\d+)h/)||[0,0])[1]*36e5;await mc(Lt(Ne,"missoes"),{...ae,mestreNome:ot,mestreId:e.uid,createdAt:Dn(),expiraEm:new Date(Date.now()+(Se||36e5)).toISOString()}),U(!1),de({nome:"",local:"",contratante:"",descricaoMissao:"",objetivosMissao:"",requisitos:"",grupo:"",recompensa:"",rank:"E",imagem:"",duracao:"",gilRecompensa:""})}catch(Se){alert("Erro ao forjar cartaz: "+Se.message)}},_e=async()=>{if(!ue||!De||!e)return alert("Preencha ttulo e contedo!");try{const H=new Date;H.setDate(H.getDate()+1),await mc(Lt(Ne,"resenhas"),{titulo:ue,conteudo:De,mestre:ot,mestreId:e.uid,destinatarios:je,createdAt:Dn(),expiraEm:H.toISOString()}),z(!1),Y(""),Ee(""),Fe([])}catch{alert("Erro ao publicar.")}},pe=async(H,Se)=>{if(window.confirm(`Remover ${Se.nome} da misso?`)){const hn=Ze(Ne,"missoes",H);await Ot(hn,{candidatos:Ig(Se)})}},Ae=()=>{be&&(ce(H=>({...H,[fe]:[...H[fe],be]})),Pe(""))},Re=(H,Se)=>{ce(hn=>({...hn,[H]:hn[H].filter((ua,Et)=>Et!==Se)}))},Le=async H=>{if(H.preventDefault(),!ye.missaoId||!ye.dataInicio||!e)return alert("Selecione a misso e o horrio!");try{const Se=s.find(Et=>Et.id===ye.missaoId),hn=new Date(ye.dataInicio),ua=new Date(hn.getTime()+1440*60*1e3);await mc(Lt(Ne,"sessoes"),{missaoId:ye.missaoId,missaoNome:Se?Se.nome:"Misso Desconhecida",mestreId:e.uid,dataInicio:ye.dataInicio,expiraEm:ua.toISOString(),participantes:j,mapas:ye.mapas,cenarios:ye.cenarios,monstros:ye.monstros,jogadores:ye.jogadores,connected_players:[],dm_online:!1,createdAt:Dn()}),J(!1),ce({missaoId:"",dataInicio:"",mapas:[],cenarios:[],monstros:[],jogadores:[]}),Z([]),alert("Sesso criada com sucesso!")}catch(Se){alert("Erro ao criar sesso: "+Se.message)}},Ge=H=>{i("/mestre-vtt")};return E?h.jsxs("div",{className:"ether-loading",children:[h.jsx("div",{className:"loading-blur-bg"}),h.jsxs("div",{className:"loading-content",children:[h.jsx("img",{src:Cf,alt:"Carregando...",className:"chocobo-anim"}),h.jsx("div",{className:"loading-bar",children:h.jsx("div",{className:"loading-fill"})}),h.jsx("p",{children:"CARREGANDO DADOS DO MESTRE..."})]}),h.jsx("style",{children:`
          .ether-loading { height: 100vh; width: 100vw; background: #000; display: flex; align-items: center; justify-content: center; position: fixed; top: 0; left: 0; z-index: 9999; }
          .loading-blur-bg { position: absolute; width: 100%; height: 100%; background: radial-gradient(circle, #001a33 0%, #000 100%); filter: blur(40px); animation: pulseBlur 2s infinite alternate; }
          .loading-content { position: relative; z-index: 10; text-align: center; }
          .chocobo-anim { width: 120px; filter: drop-shadow(0 0 10px #ffcc00); margin-bottom: 20px; }
          .loading-bar { width: 200px; height: 2px; background: rgba(255, 255, 255, 0.1); margin: 0 auto 15px auto; border-radius: 10px; overflow: hidden; }
          .loading-fill { height: 100%; width: 0%; background: #ffcc00; box-shadow: 0 0 10px #ffcc00; animation: fillProgress 1s ease-in-out forwards; }
          p { color: #ffcc00; font-family: 'serif'; font-size: 10px; letter-spacing: 3px; animation: fadeText 1s infinite alternate; }
          @keyframes fillProgress { from { width: 0%; } to { width: 100%; } }
          @keyframes pulseBlur { from { opacity: 0.5; } to { opacity: 0.8; } }
          @keyframes fadeText { from { opacity: 0.4; } to { opacity: 1; } }
          `})]}):h.jsxs("div",{className:"mestre-container",children:[h.jsx("div",{className:"mestre-bg-image-full",style:{backgroundImage:`url(${a1})`}}),h.jsxs("div",{className:"mestre-content",children:[h.jsxs("div",{className:"top-bar-flex",children:[h.jsx("h1",{className:"ff-title",children:"HUB DO NARRADOR"}),h.jsxs("div",{className:"mestre-identity-box ff-card fade-in",children:[h.jsx("label",{children:"ASSINATURA DO MESTRE:"}),h.jsx("input",{type:"text",value:ot,onChange:H=>lt(H.target.value)})]})]}),h.jsxs("div",{className:"mestre-grid",children:[h.jsxs("div",{className:"ff-card board-column",children:[h.jsxs("div",{className:"card-header no-border",children:[h.jsx("h3",{children:"QUADRO DE MISSES"}),h.jsxs("button",{className:"ff-add-btn",onClick:()=>U(!0),children:[h.jsx("span",{children:"+"})," ADICIONAR CARTAZ"]})]}),h.jsx("div",{className:"mission-scroll",children:s.map(H=>{const Se=parseInt(H.grupo)||0,hn=H.candidatos?H.candidatos.length:0,ua=Se>0?hn/Se*100:0,Et=hn>=Se&&Se>0;return h.jsxs("div",{className:`mission-poster rank-${H.rank}`,children:[h.jsx("div",{className:"poster-rank-label-fixed",children:H.rank}),h.jsxs("span",{className:"mestre-tag",children:["Narrador: ",H.mestreNome]}),h.jsx("h4",{children:H.nome}),h.jsxs("p",{className:"gil-recompensa",children:[" Recompensa: ",H.gilRecompensa," Gil"]}),h.jsxs("div",{className:"vagas-container",children:[h.jsxs("div",{className:"vagas-labels",children:[h.jsx("span",{children:"JOGADORES:"}),h.jsxs("span",{style:{color:Et?"#f44":"#0f0"},children:[hn," / ",Se]})]}),h.jsx("div",{className:"vagas-track",children:h.jsx("div",{className:"vagas-fill",style:{width:`${ua}%`,background:Et?"#f44":"#00f2ff"}})})]}),H.candidatos&&H.candidatos.length>0&&h.jsxs("div",{className:"candidates-mini-box",children:[h.jsx("strong",{children:"Candidatos:"}),H.candidatos.map(pn=>h.jsxs("div",{className:"cand-row-master",children:[h.jsxs("span",{style:{color:pn.isLeader?"#ffcc00":"#ccc"},children:[pn.isLeader&&""," ",pn.nome," (",pn.classe,")"]}),h.jsx("button",{className:"btn-kick-x",title:"Remover Jogador",onClick:()=>pe(H.id,pn),children:""})]},pn.uid))]}),h.jsx(nx,{expiry:H.expiraEm}),h.jsxs("div",{className:"poster-actions",children:[h.jsx("button",{className:"btn-cyan",onClick:()=>D(H.imagem),children:"CARTAZ"}),h.jsx("button",{className:"btn-cyan",onClick:()=>R(H),children:"DETALHES"}),h.jsx("button",{className:"btn-red",onClick:()=>xr(Ze(Ne,"missoes",H.id)),children:"EXCLUIR"})]})]},H.id)})})]}),h.jsxs("div",{className:"ff-card sanchez-card board-column",children:[h.jsxs("div",{className:"sanchez-header-top no-border",children:[h.jsx("h3",{children:"RESENHA DO SANCHEZ"}),h.jsx("button",{className:"ff-add-btn-gold-small",onClick:()=>z(!0),children:"+ CRIAR NOVA RESENHA"})]}),h.jsx("div",{className:"mission-scroll",children:c.map(H=>h.jsxs("div",{className:"resenha-item-card",children:[h.jsx("h4",{children:H.titulo}),h.jsx(nx,{expiry:H.expiraEm}),h.jsxs("div",{className:"poster-actions",children:[h.jsx("button",{className:"btn-cyan",onClick:()=>k(H),children:"VISUALIZAR"}),h.jsx("button",{className:"btn-red",onClick:()=>xr(Ze(Ne,"resenhas",H.id)),children:"EXCLUIR"})]})]},H.id))})]}),h.jsxs("div",{className:"ff-card board-column",children:[h.jsxs("div",{className:"card-header no-border",children:[h.jsx("h3",{children:"SESSES DE JOGO"}),h.jsx("button",{className:"ff-add-btn small-btn",onClick:()=>J(!0),children:"INICIAR NOVA SESSO"})]}),h.jsx("div",{className:"mission-scroll",children:m.length===0?h.jsx("div",{className:"empty-instancia",children:"NENHUMA INSTNCIA ATIVA"}):m.map(H=>h.jsxs("div",{className:"sessao-card",children:[h.jsx("div",{className:"sessao-status",children:" AO VIVO / AGENDADA"}),h.jsx("h4",{className:"sessao-title",children:H.missaoNome}),h.jsxs("div",{className:"sessao-info",children:[h.jsxs("span",{children:[" ",new Date(H.dataInicio).toLocaleString()]}),h.jsxs("span",{className:"sessao-players",children:[" ",H.participantes?.length||0," Jogadores"]})]}),h.jsxs("div",{className:"sessao-assets-count",children:[" ",(H.mapas?.length||0)+(H.cenarios?.length||0)," Imagens"]}),h.jsxs("div",{className:"poster-actions",style:{marginTop:"15px"},children:[h.jsx("button",{className:"btn-cyan",onClick:()=>we(H),children:" MEMBROS"}),h.jsx("button",{className:"btn-play-vtt",onClick:()=>Ge(),children:" ACESSAR VTT"}),h.jsx("button",{className:"btn-red",onClick:()=>xr(Ze(Ne,"sessoes",H.id)),children:"CANCELAR"})]})]},H.id))})]})]})]}),oe&&h.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>se(!1),children:h.jsxs("div",{className:"ff-modal-scrollable ff-card",onClick:H=>H.stopPropagation(),children:[h.jsx("h3",{className:"modal-title-ff",children:"PERSONAGENS REGISTRADOS"}),h.jsx("div",{className:"destinatarios-grid-fixed",children:y.map(H=>h.jsxs("div",{className:"ficha-list-item",children:[h.jsxs("div",{className:"ficha-row-name",children:[h.jsx("strong",{children:H.name}),h.jsxs("small",{children:[H.race," // ",H.class]})]}),h.jsx("button",{className:"btn-cyan",onClick:()=>{me(H),se(!1)},children:"ABRIR FICHA "})]},H.id))}),h.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"20px"},onClick:()=>se(!1),children:"FECHAR"})]})}),le&&h.jsx(Lg,{characterData:le,isMaster:!0,onClose:()=>me(null)}),P&&h.jsx("div",{className:"ff-modal-overlay-fixed",children:h.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[h.jsx("h3",{className:"modal-title-ff",children:"NOVA MISSO"}),h.jsxs("form",{onSubmit:Q,children:[h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"NOME DA MISSO"}),h.jsx("input",{placeholder:"Ttulo...",value:ae.nome,onChange:H=>de({...ae,nome:H.target.value}),required:!0})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"LOCAL"}),h.jsx("input",{placeholder:"Onde ocorre...",value:ae.local,onChange:H=>de({...ae,local:H.target.value})})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"CONTRATANTE"}),h.jsx("input",{placeholder:"Quem paga...",value:ae.contratante,onChange:H=>de({...ae,contratante:H.target.value})})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"DESCRIO DA MISSO"}),h.jsx("textarea",{className:"tall-area-dark",placeholder:"Detalhes da histria e contexto...",value:ae.descricaoMissao,onChange:H=>de({...ae,descricaoMissao:H.target.value})})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"OBJETIVOS DA MISSO"}),h.jsx("textarea",{className:"tall-area-dark",placeholder:"O que deve ser feito passo a passo...",value:ae.objetivosMissao,onChange:H=>de({...ae,objetivosMissao:H.target.value})})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"REQUISITOS DA MISSO"}),h.jsx("textarea",{className:"tall-area-dark",placeholder:"O que  necessrio para aceitar...",value:ae.requisitos,onChange:H=>de({...ae,requisitos:H.target.value})})]}),h.jsxs("div",{className:"row-double-ff",children:[h.jsxs("div",{className:"field-group",children:[h.jsx("label",{children:"GRUPO MXIMO"}),h.jsx("input",{placeholder:"Ex: 4",value:ae.grupo,onChange:H=>de({...ae,grupo:H.target.value})})]}),h.jsxs("div",{className:"field-group",children:[h.jsx("label",{children:"RANK"}),h.jsx("select",{value:ae.rank,onChange:H=>de({...ae,rank:H.target.value}),children:["E","D","C","B","A","S","SS","SC"].map(H=>h.jsxs("option",{value:H,children:["RANK ",H]},H))})]})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"RECOMPENSAS EXTRAS"}),h.jsx("textarea",{className:"tall-area-dark",placeholder:"Itens, especiarias...",value:ae.recompensa,onChange:H=>de({...ae,recompensa:H.target.value})})]}),h.jsxs("div",{className:"row-double-ff",children:[h.jsxs("div",{className:"field-group",children:[h.jsx("label",{children:"GIL"}),h.jsx("input",{type:"text",className:"gil-input",placeholder:"Ex: 5000",value:ae.gilRecompensa,onChange:H=>de({...ae,gilRecompensa:H.target.value.replace(/\D/g,"")})})]}),h.jsxs("div",{className:"field-group",children:[h.jsx("label",{children:"DURAO"}),h.jsx("input",{placeholder:"Ex: 1d 10h",value:ae.duracao,onChange:H=>de({...ae,duracao:H.target.value}),required:!0})]})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"IMAGEM"}),h.jsx("input",{placeholder:"Link Imgur...",value:ae.imagem,onChange:H=>de({...ae,imagem:H.target.value})})]}),h.jsxs("div",{className:"btn-group-ff",children:[h.jsx("button",{type:"submit",className:"btn-forjar-main",children:"FORJAR MISSO"}),h.jsx("button",{type:"button",className:"btn-cancelar-main",onClick:()=>U(!1),children:"FECHAR"})]})]})]})}),L&&h.jsx("div",{className:"ff-modal-overlay-fixed",children:h.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[h.jsx("h3",{className:"modal-title-ff",children:"ESCREVER CRNICA"}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"TTULO"}),h.jsx("input",{className:"ff-modal-input-dark",value:ue,onChange:H=>Ee(H.target.value)})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"CORPO"}),h.jsx("textarea",{className:"tall-area-ff-dark",value:De,onChange:H=>Y(H.target.value)})]}),h.jsxs("div",{className:"player-selector-box-fixed",children:[h.jsx("label",{children:"DESTINATRIOS:"}),h.jsx("div",{className:"destinatarios-grid-fixed",children:y.map(H=>h.jsxs("label",{className:"chip-label-ff",children:[h.jsx("input",{type:"checkbox",checked:je.includes(H.name),onChange:()=>je.includes(H.name)?Fe(je.filter(Se=>Se!==H.name)):Fe([...je,H.name])})," ",H.name]},H.id))})]}),h.jsxs("div",{className:"btn-group-ff",children:[h.jsx("button",{className:"btn-forjar-main",onClick:_e,children:"PUBLICAR"}),h.jsx("button",{className:"btn-cancelar-main",onClick:()=>z(!1),children:"FECHAR"})]})]})}),W&&h.jsx("div",{className:"ff-modal-overlay-fixed",children:h.jsxs("div",{className:"ff-modal-scrollable ff-card",children:[h.jsx("h3",{className:"modal-title-ff",children:"CRIAR NOVA SESSO"}),h.jsxs("form",{onSubmit:Le,children:[h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"SELECIONAR MISSO"}),h.jsxs("select",{className:"ff-select-dark",value:ye.missaoId,onChange:H=>ce({...ye,missaoId:H.target.value}),required:!0,children:[h.jsx("option",{value:"",children:"-- Escolha --"}),s.map(H=>h.jsxs("option",{value:H.id,children:[H.nome," (Rank ",H.rank,")"]},H.id))]})]}),h.jsxs("div",{className:"modal-input-group",children:[h.jsx("label",{children:"DATA E HORRIO"}),h.jsx("input",{type:"datetime-local",className:"ff-input-dark",value:ye.dataInicio,onChange:H=>ce({...ye,dataInicio:H.target.value}),required:!0})]}),h.jsxs("div",{className:"player-selector-box-fixed",children:[h.jsx("label",{children:"JOGADORES:"}),h.jsx("div",{className:"destinatarios-grid-fixed",children:y.map(H=>h.jsxs("label",{className:"chip-label-ff",children:[h.jsx("input",{type:"checkbox",checked:j.includes(H.name),onChange:()=>j.includes(H.name)?Z(j.filter(Se=>Se!==H.name)):Z([...j,H.name])})," ",H.name," (",H.class,")"]},H.id))})]}),h.jsxs("div",{className:"upload-section-box",children:[h.jsx("h4",{className:"upload-section-title",children:"IMPORTAR IMAGENS"}),h.jsxs("div",{className:"link-import-row",children:[h.jsx("input",{className:"ff-input-dark",placeholder:"Link da imagem...",value:be,onChange:H=>Pe(H.target.value)}),h.jsxs("select",{className:"ff-select-dark small-select",value:fe,onChange:H=>ft(H.target.value),children:[h.jsx("option",{value:"mapas",children:"Tabletop"}),h.jsx("option",{value:"cenarios",children:"Cenrio"}),h.jsx("option",{value:"monstros",children:"Monstros"}),h.jsx("option",{value:"jogadores",children:"Jogadores"})]}),h.jsx("button",{type:"button",className:"btn-cyan",onClick:Ae,children:"+"})]}),h.jsxs("div",{className:"assets-lists",children:[ye.mapas.map((H,Se)=>h.jsxs("div",{className:"asset-item",children:[h.jsxs("span",{className:"truncate-link",children:["[TABLETOP] ",H]}),h.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>Re("mapas",Se),children:""})]},`map-${Se}`)),ye.cenarios.map((H,Se)=>h.jsxs("div",{className:"asset-item",children:[h.jsxs("span",{className:"truncate-link",children:["[CENRIO] ",H]}),h.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>Re("cenarios",Se),children:""})]},`cen-${Se}`)),ye.monstros.map((H,Se)=>h.jsxs("div",{className:"asset-item",children:[h.jsxs("span",{className:"truncate-link",children:["[MONSTRO] ",H]}),h.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>Re("monstros",Se),children:""})]},`mon-${Se}`)),ye.jogadores.map((H,Se)=>h.jsxs("div",{className:"asset-item",children:[h.jsxs("span",{className:"truncate-link",children:["[JOGADOR] ",H]}),h.jsx("button",{type:"button",className:"btn-remove-x",onClick:()=>Re("jogadores",Se),children:""})]},`jog-${Se}`))]})]}),h.jsxs("div",{className:"btn-group-ff",children:[h.jsx("button",{type:"submit",className:"btn-forjar-main",children:"AGENDAR"}),h.jsx("button",{type:"button",className:"btn-cancelar-main",onClick:()=>J(!1),children:"CANCELAR"})]})]})]})}),w&&h.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>we(null),children:h.jsxs("div",{className:"ff-modal-scrollable ff-card",onClick:H=>H.stopPropagation(),style:{height:"auto",maxHeight:"500px"},children:[h.jsx("h3",{className:"modal-title-ff",children:"MEMBROS ALOCADOS"}),h.jsx("div",{className:"destinatarios-grid-fixed",children:w.participantes?.map((H,Se)=>h.jsxs("div",{className:"chip-label-ff",style:{cursor:"default",color:"#fff",borderColor:"#00f2ff"},children:[" ",H]},Se))}),h.jsx("button",{className:"btn-cancelar-main",style:{marginTop:"20px",width:"100%"},onClick:()=>we(null),children:"FECHAR"})]})}),C&&h.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>R(null),children:h.jsxs("div",{className:"ff-modal ff-card detail-view-main",onClick:H=>H.stopPropagation(),children:[h.jsxs("div",{className:"detail-header-modern",children:[h.jsx("div",{className:`detail-rank-badge rank-${C.rank}`,children:C.rank}),h.jsxs("div",{className:"detail-title-col",children:[h.jsx("h2",{children:C.nome}),h.jsxs("span",{className:"detail-narrator",children:["Narrador: ",C.mestreNome]})]})]}),h.jsxs("div",{className:"detail-body-grid",children:[h.jsxs("div",{className:"detail-info-row",children:[h.jsxs("div",{className:"info-item",children:[h.jsx("label",{children:" LOCAL"}),h.jsx("span",{children:C.local||"Desconhecido"})]}),h.jsxs("div",{className:"info-item",children:[h.jsx("label",{children:" CONTRATANTE"}),h.jsx("span",{children:C.contratante||"Annimo"})]})]}),h.jsxs("div",{className:"detail-section",children:[h.jsx("label",{className:"section-label",children:"VAGAS"}),h.jsxs("div",{style:{background:"#111",padding:"10px",borderRadius:"4px"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px",color:"#aaa",marginBottom:"5px"},children:[h.jsx("span",{children:"STATUS DO GRUPO"}),h.jsxs("span",{children:[C.candidatos?C.candidatos.length:0," / ",C.grupo||"?"]})]}),h.jsx("div",{style:{width:"100%",height:"6px",background:"#333",borderRadius:"3px"},children:h.jsx("div",{style:{width:`${Math.min((C.candidatos?.length||0)/(parseInt(C.grupo)||1)*100,100)}%`,height:"100%",background:C.candidatos?.length>=parseInt(C.grupo)?"#f44":"#00f2ff"}})})]})]}),h.jsxs("div",{className:"detail-section",children:[h.jsx("label",{className:"section-label",children:" DESCRIO"}),h.jsx("p",{className:"section-text",children:C.descricaoMissao})]}),h.jsxs("div",{className:"detail-section",children:[h.jsx("label",{className:"section-label",children:" OBJETIVOS"}),h.jsx("p",{className:"section-text",children:C.objetivosMissao})]}),h.jsxs("div",{className:"detail-section",children:[h.jsx("label",{className:"section-label",children:" REQUISITOS"}),h.jsx("p",{className:"section-text",children:C.requisitos})]}),h.jsxs("div",{className:"detail-section reward-section",children:[h.jsx("label",{className:"section-label",children:" RECOMPENSAS"}),h.jsxs("div",{className:"reward-content-box",children:[h.jsxs("div",{className:"gil-display-row",children:[h.jsx("span",{className:"gil-icon",children:""})," ",h.jsxs("span",{className:"gil-value",children:[C.gilRecompensa||0," GIL"]})]}),C.recompensa&&h.jsx("div",{className:"extra-rewards-list",children:C.recompensa.split(`
`).map((H,Se)=>h.jsxs("div",{className:"reward-item",children:[" ",H]},Se))})]})]})]}),h.jsx("button",{className:"ff-final-close-btn",onClick:()=>R(null),children:"FECHAR RELATRIO"})]})}),T&&h.jsx("div",{className:"ff-modal-overlay-fixed",onClick:()=>D(null),children:h.jsxs("div",{className:"lightbox-wrap",children:[h.jsx("button",{className:"close-lightbox",onClick:()=>D(null),children:""}),h.jsx("img",{src:T,alt:"Cartaz",className:"cartaz-full-view"})]})}),O&&h.jsx("div",{className:"papiro-overlay-full",onClick:()=>k(null),children:h.jsxs("div",{className:"papiro-real-container",style:{backgroundImage:`url(${s1})`},onClick:H=>H.stopPropagation(),children:[h.jsx("div",{className:"sanchez-oval-view-no-border",style:{backgroundImage:`url(${i1})`}}),h.jsx("h2",{className:"papiro-title-real",children:O.titulo}),h.jsxs("p",{className:"papiro-mestre-sub",children:["Narrador: ",O.mestre]}),h.jsx("div",{className:"papiro-body-real",dangerouslySetInnerHTML:{__html:O.conteudo.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br/>")}}),h.jsxs("div",{className:"papiro-dest-list",children:[h.jsx("strong",{children:"ENVIADO PARA:"})," ",O.destinatarios?.join(", ")]}),h.jsx("button",{className:"papiro-close-btn",onClick:()=>k(null),children:"FECHAR"})]})}),h.jsxs("div",{className:"master-floating-group",children:[h.jsx(r1,{}),h.jsx(Vg,{isMestre:!0}),h.jsx("button",{className:"fichas-trigger-btn",onClick:()=>se(!0),title:"Gerenciar Fichas",children:h.jsx("img",{src:wM,alt:"Fichas",onError:H=>{H.target.style.display="none",H.target.parentNode.innerText="FICHAS"}})})]}),h.jsx("style",{children:`
        /* ESTILOS MANTIDOS + NOVOS */
        .mestre-container { background: #000; min-height: 100vh; position: relative; color: #fff; font-family: 'serif'; overflow: hidden; }
        .mestre-bg-image-full { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center top; background-repeat: no-repeat; opacity: 0.35; z-index: 0; filter: contrast(125%) brightness(75%); }
        .mestre-content { position: relative; z-index: 1; padding: 20px; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        .top-bar-flex { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .ff-title { color: #ffcc00; text-shadow: 0 0 10px #ffcc00; letter-spacing: 5px; font-size: 2rem; margin: 0; }
        .mestre-identity-box { display: flex; align-items: center; gap: 10px; border: 1px solid #ffcc00; padding: 8px 15px; background: rgba(0, 10, 30, 0.9); }
        .mestre-identity-box input { background: #fff; border: 1px solid #ffcc00; color: #000; padding: 5px 10px; font-weight: bold; font-family: 'serif'; outline: none; }

        /* GRID RESPONSIVO TELA NICA */
        .mestre-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; flex: 1; overflow: hidden; padding-bottom: 60px; /* Espao para botes flutuantes */ }
        
        /* CARDS TELA NICA */
        .ff-card { background: rgba(0, 10, 30, 0.95); border: 1px solid #ffcc00; padding: 15px; border-radius: 4px; backdrop-filter: blur(10px); display: flex; flex-direction: column; max-height: 100%; }
        .board-column { flex: 1; overflow: hidden; min-height: 0; }
        
        .card-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; padding-bottom: 10px; margin-bottom: 15px; flex-shrink: 0; }
        .card-header.no-border { border-bottom: none; }
        
        .mission-scroll { flex: 1; overflow-y: auto; padding-right: 5px; scrollbar-width: thin; scrollbar-color: #ffcc00 #000; }
        .mission-scroll::-webkit-scrollbar { width: 6px; }
        .mission-scroll::-webkit-scrollbar-thumb { background: #ffcc00; }

        .mission-poster { background: rgba(255,255,255,0.04); border: 1px solid #444; margin-bottom: 15px; padding: 18px; border-left: 4px solid #00f2ff; position: relative; }
        .poster-rank-label-fixed { position: absolute; top: 12px; right: 18px; font-size: 32px; color: #ffcc00; opacity: 0.35; font-weight: bold; }
        .mestre-tag { color: #ffcc00; font-size: 10px; text-transform: uppercase; font-weight: bold; display: block; margin-bottom: 8px; }
        .candidates-mini-box { margin-top: 8px; background: rgba(0,0,0,0.3); padding: 5px; border-radius: 3px; }
        .cand-row-master { display: flex; justify-content: space-between; align-items: center; font-size: 10px; margin-bottom: 2px; }
        .btn-kick-x { background: transparent; border: none; color: #f44; cursor: pointer; font-weight: bold; font-size: 12px; }
        .btn-kick-x:hover { color: #fff; }

        /* VAGAS VISUAL */
        .vagas-container { margin: 10px 0; }
        .vagas-labels { display: flex; justify-content: space-between; font-size: 10px; color: #ccc; margin-bottom: 2px; font-weight: bold; }
        .vagas-track { width: 100%; height: 6px; background: #111; border: 1px solid #444; border-radius: 3px; overflow: hidden; }
        .vagas-fill { height: 100%; transition: width 0.3s; }

        .sanchez-card { position: relative; overflow: hidden; }
        .sanchez-header-top { position: relative; z-index: 1; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px; flex-shrink: 0; }
        .sanchez-header-top.no-border { border-bottom: none; }
        .resenha-item-card { background: rgba(255,255,255,0.05); border: 1px solid #333; padding: 15px; margin-top: 12px; border-radius: 4px; }
        .sessao-card { background: linear-gradient(135deg, rgba(20,20,50,0.9), rgba(0,0,20,0.9)); border: 1px solid #00f2ff; padding: 15px; margin-bottom: 15px; border-radius: 4px; box-shadow: 0 0 10px rgba(0,242,255,0.1); }
        .sessao-status { font-size: 10px; color: #f44; font-weight: bold; margin-bottom: 8px; animation: pulse 2s infinite; }
        .sessao-title { color: #fff; font-size: 18px; margin: 0 0 10px 0; border-bottom: 1px solid #333; padding-bottom: 8px; }
        .sessao-info { display: flex; justify-content: space-between; font-size: 12px; color: #aaa; margin-bottom: 10px; }
        .sessao-assets-count { font-size: 11px; color: #ffcc00; background: rgba(0,0,0,0.3); padding: 5px; border-radius: 3px; display: inline-block; }
        .btn-play-vtt { background: #00f2ff; color: #000; border: none; padding: 8px 15px; font-weight: bold; cursor: pointer; flex: 1; margin-right: 10px; transition: 0.3s; }
        .btn-play-vtt:hover { background: #fff; box-shadow: 0 0 15px #00f2ff; }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
        .upload-section-box { border: 1px dashed #444; padding: 15px; margin: 20px 0; background: rgba(0,0,0,0.3); }
        .upload-section-title { color: #00f2ff; font-size: 12px; margin-bottom: 15px; border-bottom: 1px solid #00f2ff; padding-bottom: 5px; display: inline-block; }
        .ff-select-dark { width: 100%; background: #000; border: 1px solid #444; color: #fff; padding: 12px; outline: none; font-family: 'serif'; }
        .ff-input-dark { width: 100%; background: #000; border: 1px solid #444; color: #fff; padding: 12px; outline: none; font-family: 'serif'; color-scheme: dark; }
        .link-import-row { display: flex; gap: 10px; margin-bottom: 15px; }
        .small-select { width: 120px; }
        .assets-lists { display: flex; flex-direction: column; gap: 10px; }
        .asset-group { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 4px; }
        .asset-group label { display: block; color: #ffcc00; font-size: 10px; font-weight: bold; margin-bottom: 5px; border-bottom: 1px solid #333; }
        .asset-item { display: flex; justify-content: space-between; align-items: center; font-size: 11px; color: #ddd; margin-bottom: 4px; }
        .truncate-link { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 350px; }
        .btn-remove-x { background: transparent; border: none; color: #f44; font-weight: bold; cursor: pointer; font-size: 14px; }
        .ff-modal-overlay-fixed { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.94); z-index: 99999; display: flex; align-items: center; justify-content: center; }
        .ff-modal-scrollable { width: 550px; max-height: 90vh; overflow-y: auto; background: #000c1d; border: 2px solid #ffcc00; padding: 35px; box-shadow: 0 0 60px rgba(0,0,0,0.9); }
        .modal-title-ff { color: #fff; font-size: 22px; border-bottom: 1px solid #ffcc00; padding-bottom: 10px; margin-bottom: 20px; letter-spacing: 2px; }
        .modal-input-group { margin-bottom: 20px; }
        .modal-input-group label { color: #ffcc00; font-size: 11px; display: block; margin-bottom: 8px; font-weight: bold; letter-spacing: 1px; }
        .modal-input-group input { width: 100%; background: #000; border: 1px solid #444; color: #fff; padding: 12px; outline: none; font-family: 'serif'; font-size: 14px; }
        .row-double-ff { display: flex; gap: 20px; margin-bottom: 20px; }
        .field-group { flex: 1; display: flex; flex-direction: column; }
        .field-group label { color: #ffcc00; font-size: 11px; display: block; margin-bottom: 8px; font-weight: bold; }
        .field-group input, .field-group select { width: 100%; background: #000; border: 1px solid #444; color: #fff; padding: 12px; font-family: 'serif'; outline: none; }
        .tall-area-dark { width: 100%; background: #000; border: 1px solid #444; color: #fff; padding: 12px; height: 110px; resize: none; font-family: 'serif'; outline: none; }
        .tall-area-ff-dark { width: 100%; background: #000; border: 1px solid #ffcc00; color: #fff; padding: 15px; height: 250px; resize: none; font-family: 'serif'; outline: none; font-size: 16px; border-radius: 4px; }
        .detail-view-main { width: 600px; background: #000814; border: 1px solid #ffcc00; padding: 0; box-shadow: 0 0 40px rgba(255, 204, 0, 0.1); overflow: hidden; display: flex; flex-direction: column; }
        .detail-header-modern { background: linear-gradient(90deg, #1a1a1a 0%, #000 100%); padding: 25px 30px; display: flex; align-items: center; border-bottom: 1px solid #333; gap: 20px; }
        .detail-rank-badge { font-size: 32px; font-weight: bold; color: #ffcc00; text-shadow: 0 0 10px rgba(255,204,0,0.5); border: 2px solid #ffcc00; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; border-radius: 50%; background: rgba(0,0,0,0.5); }
        .detail-title-col h2 { margin: 0; font-size: 24px; color: #fff; text-transform: uppercase; letter-spacing: 1px; }
        .detail-narrator { color: #00f2ff; font-size: 12px; font-weight: bold; text-transform: uppercase; margin-top: 4px; display: block; }
        .detail-body-grid { padding: 30px; display: flex; flex-direction: column; gap: 20px; }
        .detail-info-row { display: flex; gap: 25px; margin-bottom: 10px; border-bottom: 1px solid #333; padding-bottom: 15px; }
        .info-item { flex: 1; }
        .info-item label { color: #ffcc00; font-size: 10px; display: block; margin-bottom: 5px; font-weight: bold; opacity: 0.8; }
        .info-item span { color: #fff; font-size: 14px; font-weight: bold; letter-spacing: 0.5px; }
        .detail-section { margin-bottom: 5px; }
        .section-label { color: #ffcc00; font-size: 11px; font-weight: bold; display: block; margin-bottom: 8px; letter-spacing: 1px; text-transform: uppercase; border-bottom: 1px solid #333; padding-bottom: 4px; }
        .section-text { font-size: 15px; line-height: 1.5; color: #ddd; margin: 0; white-space: pre-wrap; }
        .reward-section { margin-top: 10px; background: rgba(255,204,0,0.05); padding: 15px; border-radius: 4px; border: 1px solid rgba(255,204,0,0.2); }
        .gil-display-row { display: flex; align-items: center; gap: 10px; font-size: 18px; color: #ffcc00; font-weight: bold; margin-bottom: 8px; }
        .extra-rewards-list { margin-top: 8px; padding-left: 5px; }
        .reward-item { color: #aaa; font-size: 14px; margin-bottom: 4px; font-style: italic; }
        .ff-final-close-btn { width: 100%; background: #111; color: #fff; border: none; border-top: 1px solid #333; padding: 20px; font-weight: bold; cursor: pointer; font-size: 13px; text-transform: uppercase; transition: 0.2s; }
        .ff-final-close-btn:hover { background: #222; color: #ffcc00; }
        .papiro-overlay-full { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 100000; display: flex; align-items: center; justify-content: center; }
        .papiro-real-container { width: 1000px; height: 800px; max-width: 95vw; max-height: 95vh; background-size: 100% 100%; background-repeat: no-repeat; padding: 110px 160px; color: #3b2b1a; position: relative; display: flex; flex-direction: column; }
        .sanchez-oval-view-no-border { width: 110px; height: 110px; float: right; border-radius: 50%; background-size: cover; margin-left: 20px; mask-image: radial-gradient(circle, black 60%, transparent 100%); -webkit-mask-image: radial-gradient(circle, black 60%, transparent 100%); opacity: 0.9; }
        .papiro-title-real { border-bottom: 2px solid #3b2b1a; padding-bottom: 5px; margin-top: 0; font-size: 32px; font-weight: bold; }
        .papiro-mestre-sub { font-size: 14px; font-style: italic; opacity: 0.8; margin-top: 5px; }
        .papiro-body-real { margin-top: 25px; flex: 1; overflow-y: auto; line-height: 1.6; font-size: 18px; padding-right: 10px; scrollbar-width: none; -ms-overflow-style: none; }
        .papiro-body-real::-webkit-scrollbar { display: none; }
        .papiro-dest-list { margin-top: 15px; font-size: 14px; border-top: 1px solid rgba(59, 43, 26, 0.3); padding-top: 10px; }
        .papiro-close-btn { position: absolute; bottom: 45px; right: 110px; background: #3b2b1a; color: #f4e4bc; border: none; padding: 8px 20px; cursor: pointer; font-weight: bold; font-size: 13px; border-radius: 2px; }
        .ff-add-btn { background: transparent; border: 1px solid #00f2ff; color: #00f2ff; padding: 10px 20px; cursor: pointer; font-weight: bold; font-size: 12px; }
        .ff-add-btn-gold-small { background: transparent; border: 1px solid #ffcc00; color: #ffcc00; padding: 8px 15px; cursor: pointer; font-weight: bold; font-size: 11px; transition: 0.3s; }
        .ff-add-btn-gold-small:hover { background: #ffcc00; color: #000; box-shadow: 0 0 15px #ffcc00; }
        .btn-cyan { border: 1px solid #00f2ff; color: #00f2ff; padding: 6px 15px; background: transparent; cursor: pointer; font-size: 11px; margin-right: 10px; font-weight: bold; }
        .btn-red { border: 1px solid #f44; color: #f44; padding: 6px 15px; background: transparent; cursor: pointer; font-size: 11px; font-weight: bold; }
        .btn-group-ff { display: flex; gap: 20px; margin-top: 25px; }
        .btn-forjar-main { flex: 1; background: #ffcc00; color: #000; border: none; padding: 14px; font-weight: bold; cursor: pointer; font-size: 14px; text-transform: uppercase; }
        /* CORREO DO CSS: Renomeado de btn-cancel-main para btn-cancelar-main para bater com o JSX */
        .btn-cancelar-main { flex: 1; background: #000; color: #fff; border: 1px solid #fff; padding: 14px; cursor: pointer; text-align: center; font-size: 14px; text-transform: uppercase; }
        .player-selector-box-fixed { margin: 25px 0; border-top: 1px solid #333; padding-top: 15px; }
        .destinatarios-grid-fixed { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 12px; }
        .chip-label-ff { background: rgba(0, 10, 30, 0.8); border: 1px solid #ffcc00; color: #ffcc00; padding: 8px 18px; border-radius: 4px; font-size: 12px; cursor: pointer; display: inline-block; }
        .mission-timer { font-size: 12px; color: #00f2ff; display: block; margin-top: 10px; font-weight: bold; letter-spacing: 1px; }
        .fade-in { animation: fadeIn 1s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .lightbox-wrap { position: relative; max-width: 90vw; max-height: 90vh; }
        .cartaz-full-view { max-width: 100%; max-height: 90vh; border: 3px solid #ffcc00; box-shadow: 0 0 50px #000; }
        .close-lightbox { position: absolute; top: -40px; right: -40px; background: transparent; border: none; color: #fff; font-size: 40px; cursor: pointer; }
        
        /* BOTO FLUTUANTE DE FICHAS */
        .fichas-trigger-btn { position: fixed; bottom: 30px; right: 190px; width: 70px; height: 70px; border-radius: 50%; border: 2px solid #00f2ff; background: #000; cursor: pointer; z-index: 9999; transition: transform 0.2s, box-shadow 0.2s; padding: 0; display: flex; align-items: center; justify-content: center; }
        .fichas-trigger-btn:hover { transform: scale(1.1); box-shadow: 0 0 25px #00f2ff; }
        .fichas-trigger-btn img { width: 70%; height: 70%; object-fit: contain; }

        /* LISTA DE FICHAS */
        .ficha-list-item { display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.5); border: 1px solid #333; padding: 15px; cursor: pointer; transition: 0.2s; border-radius: 4px; width: 100%; }
        .ficha-list-item:hover { border-color: #00f2ff; background: rgba(0, 242, 255, 0.1); }
        .ficha-row-name { display: flex; flex-direction: column; flex: 1; margin-right: 15px; }
        .ficha-row-name strong { color: #fff; font-size: 16px; }
        .ficha-row-name small { color: #aaa; font-size: 12px; }
      `})]})}const RM=[{id:"humes",name:"Humes",image:"races/humes.png",description:"Os Humes so a raa mais comum e predominante em Ivalice. Adaptveis, curiosos e persistentes, habitam desde as grandes capitais at vilarejos fronteirios. Sua origem  antiga e pouco documentada, mas acredita-se que foram os primeiros a construir grandes cidades e fundar os cls atuais.",characteristics:"Sua maior qualidade  a versatilidade. No se destacam naturalmente em nenhum atributo especfico, mas aprendem qualquer funo rapidamente, prosperando em qualquer lugar que chamem de lar.",racial_bonus:{value:5,detail:"5 pontos extras para distribuir livremente entre os atributos durante a criao de personagem."},base_classes:["Soldado","Mago Branco","Qumico"]},{id:"viera",name:"Viera",image:"races/viera.png",description:"Uma raa graciosa e enigmtica, marcada por longas orelhas e aparncia esguia. Vivem em florestas profundas, isoladas do mundo exterior e conectadas aos espritos da natureza. A sociedade  matriarcal.",characteristics:"Conhecidas por sentidos aguados, velocidade impressionante e habilidades mgicas refinadas. Os machos so raros e exilados ao atingirem a maturidade.",racial_bonus:{female:{VEL:3,INT:2},male_exiled:{"pontos-livres":5}},base_classes:{female:["Arqueira","Esgrimista","Curandeira"],male:["Exilado"]}},{id:"moogles",name:"Moogles",image:"races/moogles.png",description:"Pequenos, adorveis e envoltos em mistrio. Possuem corpos peludos, antenas com pompons flutuantes e pequenas asas de morcego. No possuem gnero definido.",characteristics:"Extremamente inteligentes e obcecados por tecnologia e invenes, misturando cincia com feitiaria. Carregam um estranho 'magnetismo da sorte'.",racial_bonus:{SOR:5},base_classes:["Animista","Engenheiro"]},{id:"bangaa",name:"Bangaa",image:"races/bangaa.png",description:"Guerreiros reptilianos robustos, com pele escamosa e traos que lembram drages antigos. So temidos pela fora bruta e respeitados pela honra em combate.",characteristics:"Sua origem remonta a tempos ancestrais e acredita-se que possuam sangue dracnico. Valorizam a lealdade, a disciplina fsica e o dever.",racial_bonus:{FOR:3,CONS:2},base_classes:["Monge","Guerreiro"]},{id:"grias",name:"Grias",image:"races/grias.png",description:"Guerreiras aladas, exclusivamente femininas, nascidas para dominar os cus. Possuem corpos atlticos, chifres, caudas e asas fortes.",characteristics:"Mestres da caa alada e emboscadas areas. Usam a altura como vantagem ttica e seus ataques de mergulho so devastadores.",racial_bonus:{VEL:2},passive_ability:{name:"Imunidade a Dano de Queda",effect:"No sofrem dano ao cair de qualquer altura nem de impactos ascendentes."},base_classes:["Monge","Guerreiro"]},{id:"elvaan",name:"Elvaan",image:"races/elvaan.png",description:"Originrios de Valendia, so guerreiros altos, nobres e disciplinados, com orelhas alongadas. Simbolizam tradio e justia em Ivalice.",characteristics:"Treinados desde a infncia no manejo de lminas e estilos de combate ancestrais. Desprezam truques e valorizam o confronto direto.",racial_bonus:{FOR:2},passive_ability:{name:"Domnio de Reao",effect:"Aprendem habilidades de reao com o dobro de rapidez."},base_classes:["Soldado","Espadachim"]},{id:"mithra",name:"Mithra",image:"races/mithra.png",description:"Raa com traos felinos, gil e astuta. Compartilham uma origem ancestral com as Viera, mas se espalharam por matas tropicais e runas.",characteristics:"Especialistas em furtividade, espionagem e ladronagem. Possuem forte senso de honra ligado  astcia.",racial_bonus:{VEL:2},passive_ability:{name:"Bnus de Camuflagem",effect:"Recebem vantagem em testes de furtividade, infiltrao e disfarce."},base_classes:["Ladra","Rastreadora"]},{id:"nu_mou",name:"Nu Mou",image:"races/nu-mou.png",description:"Pequenos em estatura, com aparncia canina e pelagem espessa, mas imensos em conhecimento. So magos natos que vivem sculos acumulando sabedoria.",characteristics:"Frequentemente ocupam cargos de conselheiros. Possuem empatia natural com a vida selvagem, comunicando-se com monstros e animais.",racial_bonus:{INT:3,CAR:2},base_classes:["Mago Branco","Adestrador"]},{id:"hypello",name:"Hypello",image:"races/hypello.png",description:"Raa anfbia dos pntanos de Kerwon. Possuem grande estatura, corpos robustos e pele azulada ou esverdeada.",characteristics:"Herbalistas por excelncia, mestres em usar plantas para curas ou venenos. Sua maior fora  a vitalidade e a empatia.",racial_bonus:{CONS:5},base_classes:["Escudeiro","Curandeiro"]},{id:"umbros",name:"Umbros",image:"races/umbros.png",description:"Seres de pele negra e marcas brilhantes que reagem  lua. Descendentes dos seres tocados pelas Pedras Zodiacais.",characteristics:"Alta resistncia  corrupo e aptido mgica. Vistos como orculos ou andarilhos que carregam segredos esquecidos.",racial_bonus:{INT:2},passive_ability:{name:"Modo Luar",effect:"Sob luz direta da lua visvel, causam o dobro de dano final com qualquer magia."},base_classes:["Mago Negro","Ocultista"]}],CM={races:RM},IM=JSON.parse(`[{"id":"soldado","name":"Soldado","type":"Bsica","role":"Tanque / Suporte de status","description":"Guerreiros de linha de frente, treinados para resistir aos maiores impactos do campo de batalha e desestabilizar o inimigo com habilidades tticas conhecidas como 'Pausas'.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Primeiro Socorro","description":"Trata os prprios ferimentos, restaurando 25% do HP.","cost":"N/A","type":"HB"},{"name":"Quebra de Poder","description":"Reduz a FOR do alvo pela metade, por trs turnos.","cost":"N/A","type":"HB"},{"name":"Quebra Magia","description":"Reduz a INT do alvo pela metade, por trs turnos.","cost":"N/A","type":"HB"},{"name":"Quebra de Mana","description":"Reduz a MP do alvo pela metade por trs turnos.","cost":"N/A","type":"HB"},{"name":"Provocar","description":"Inflige FURIA a um alvo.","cost":"N/A","type":"HB"},{"name":"Shieldbearer","description":"Permite ao usurio equipar escudos, mesmo fora da classe Soldado.","cost":"N/A","type":"Passiva"}]},{"id":"mago_branco","name":"Mago Branco","type":"Bsica","role":"Suporte / Cura / Anti-morto-vivo","description":"Especialistas em suporte mgico, sua principal funo  manter o grupo de p com curas poderosas, proteo espiritual e magias de ressuscitao.","bonus_class":{"MP":5},"requirements":[],"abilities":[{"name":"Cure","description":"Cura magicamente os ferimentos do alvo. Restaura 10% do PV e causa dano a mortos-vivos.","cost":"8 MP","type":"Magia"},{"name":"Cura","description":"Restaura magicamente 25% de HP. Causa dano a mortos-vivos.","cost":"18 MP","type":"Magia"},{"name":"Curaga","description":"Restaura magicamente 75% de HP. Causa dano a mortos-vivos.","cost":"32 MP","type":"Magia"},{"name":"Esuna","description":"Remove magicamente os efeitos negativos do alvo.","cost":"10 MP","type":"Magia"},{"name":"Arise","description":"Revive magicamente o alvo, removendo o KO. Causa dano a mortos-vivos.","cost":"40 MP","type":"Magia"},{"name":"Turbo MP","description":"Os feitios custam o dobro de seus MP normais, e do o dobro de dano.","cost":"N/A","type":"Passiva"}]},{"id":"quimico","name":"Qumico","type":"Bsica","role":"Suporte / Manipulador de Itens","description":"Mestres do preparo e uso ttico de poes. Utilizam conhecimentos alqumicos para curar aliados e enfraquecer inimigos.","bonus_class":{"SOR":2,"CAR":3},"requirements":[],"abilities":[{"name":"Preparar Poo","description":"Cria uma poo bsica durante o turno.","cost":"N/A","type":"HB"},{"name":"Arremessar Poo","description":"Permite arremessar qualquer poo equipada em um aliado ou inimigo a at 3 quadrados.","cost":"N/A","type":"HB"},{"name":"Frasco Instvel","description":"Arremessa uma mistura explosiva improvisada que causa dano de elemento aleatrio.","cost":"N/A","type":"HB"},{"name":"Reao em Cadeia","description":"Permite usar duas poes diferentes ao mesmo tempo.","cost":"N/A","type":"HB"},{"name":"Reciclagem Alqumica","description":"Recupera uma poo gasta no combate.","cost":"N/A","type":"HB"},{"name":"Inventrio Estendido","description":"Bolsa exclusiva para poes que no ocupa espao no inventrio padro (at 8 poes).","cost":"N/A","type":"Passiva"}]},{"id":"arqueira","name":"Arqueira","type":"Bsica","role":"Atiradora / Controle de Campo","description":"Especialistas em combate  distncia, treinadas para derrubar inimigos com preciso e neutralizar alvos.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Foco","description":"Aumenta drasticamente a preciso e dobra o dano final do ataque.","cost":"N/A","type":"HB"},{"name":"Acerto na Perna","description":"Causa IMOBILIZAO, impedindo movimentos por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Acerto na Mo","description":"Causa DESARME por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Mira Precisa","description":"Adiciona o atributo SORTE ao dano final do ataque.","cost":"N/A","type":"HB"},{"name":"Apago","description":"Causa CEGUEIRA, reduzindo severamente a chance de acerto do alvo por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Concentrao","description":"Aumenta a chance de acerto em todos os disparos de longa distncia.","cost":"N/A","type":"Passiva"}]},{"id":"esgrimista","name":"Esgrimista","type":"Bsica","role":"Duelista / Assassina de preciso","description":"Combatentes graciosas e letais, treinadas no uso refinado da rapieira.","bonus_class":{"VEL":3,"FOR":2},"requirements":[],"abilities":[{"name":"Picada Venenosa","description":"Causa dano e aplica VENENO ao alvo.","cost":"N/A","type":"HB"},{"name":"Voo da Andorinha","description":"Ataca todos os inimigos ao redor, podendo derrub-los.","cost":"N/A","type":"HB"},{"name":"Golpe Perfurante","description":"Estocada que atravessa o primeiro alvo e atinge um segundo atrs dele.","cost":"N/A","type":"HB"},{"name":"Golpe de Mana","description":"Causa dano e reduz o MP do inimigo.","cost":"N/A","type":"HB"},{"name":"Xeque-mate","description":"Inflige CONDENAO (morte aps 3 turnos).","cost":"N/A","type":"HB"},{"name":"Passos Leves","description":"Pode atravessar reas de gua rasa sem perder mobilidade.","cost":"N/A","type":"Passiva"}]},{"id":"curandeira","name":"Curandeira","type":"Bsica","role":"Suporte / Cura Natural","description":"Guardis da vida e das florestas, conectadas  energia da natureza para curar e proteger.","bonus_class":{"HP":3,"MP":2},"requirements":[],"abilities":[{"name":"Folha Serena","description":"Cura um aliado em 10 de HP.","cost":"8 MP","type":"Magia"},{"name":"Broto Purificador","description":"Remove um status negativo de um aliado.","cost":"18 MP","type":"Magia"},{"name":"Conexo Natural","description":"25% do dano recebido pelo aliado  transferido para a Curandeira por 3 turnos.","cost":"20 MP","type":"Magia"},{"name":"Vinhas Enlaantes","description":"Prende at 3 inimigos, impedindo movimento por 2 turnos.","cost":"24 MP","type":"Magia"},{"name":"Nvoa Vigorosa","description":"Cura leve em todos os aliados prximos (rea 3 blocos).","cost":"35 MP","type":"Magia"},{"name":"Refrigrio da Floresta","description":"30% de chance de conceder Resistncia Natural (+5 ARM ou +5 RES) ao curar.","cost":"N/A","type":"Passiva"}]},{"id":"exilado","name":"Exilado","type":"Bsica","role":"Lutador Adaptvel / Sobrevivente","description":"Viera masculinos banidos que aprenderam a sobreviver por conta prpria, adaptando-se a qualquer arma.","bonus_class":{"Livre":5},"requirements":[],"abilities":[{"name":"Tiro Preciso","description":"Disparo com preciso perfeita (usa SOR).","cost":"N/A","type":"HB (Arco)"},{"name":"Golpe Silencioso","description":"Causa DANO CRTICO automtico se o alvo estiver de costas.","cost":"N/A","type":"HB (Adaga)"},{"name":"Finta Desarmante","description":"Reduz o ATAQUE do inimigo por 2 turnos.","cost":"N/A","type":"HB (Espada)"},{"name":"Ruptura Selvagem","description":"Ignora a DEFESA do inimigo e causa dano elevado.","cost":"N/A","type":"HB (Espado)"},{"name":"Primeiros Socorros","description":"Cura 20% do HP a si mesmo ou aliado.","cost":"N/A","type":"HB"},{"name":"Adaptao de Combate","description":"Pode trocar a arma equipada 1 vez por turno sem custo de ao.","cost":"N/A","type":"Passiva"}]},{"id":"guerreiro","name":"Guerreiro","type":"Bsica","role":"Linha de Frente / Espancador","description":"Muralhas de msculo treinados para esmagar o inimigo com pura fora fsica.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Primeiro Socorro","description":"Trata os prprios ferimentos, restaurando 20% do HP.","cost":"N/A","type":"HB"},{"name":"Poder de Rend","description":"Reduz o ATAQUE do alvo.","cost":"N/A","type":"HB"},{"name":"Rend Magick","description":"Reduz a MAGIA do alvo.","cost":"N/A","type":"HB"},{"name":"Batida Corporal","description":"Investida causando dano FOR+CONS, volta 40% do dano a si mesmo.","cost":"N/A","type":"HB"},{"name":"Grito de Guerra","description":"Imobiliza o inimigo por 2 turnos e pode causar medo.","cost":"N/A","type":"HB"},{"name":"Monkey Grip","description":"Permite empunhar armas de duas mos com uma mo s.","cost":"N/A","type":"Passiva"}]},{"id":"monge","name":"Monge","type":"Bsica","role":"Linha de Frente / Espancador","description":"Lutadores que usam o ki e seus prprios corpos como armas letais.","bonus_class":{"FOR":3,"CONS":2},"requirements":[],"abilities":[{"name":"Onda Giratria","description":"Ataque giratrio que atinge todos ao redor em 1 bloco.","cost":"N/A","type":"HB"},{"name":"Pulso de Ar","description":"Soco com ki que causa dano e empurra o alvo 2 blocos.","cost":"N/A","type":"HB"},{"name":"Pulso de Terra","description":"Dano terrestre em linha reta (at 3 blocos).","cost":"N/A","type":"HB"},{"name":"Exploso de Ki","description":"Dano em rea de 2 blocos ao redor do monge.","cost":"N/A","type":"HB"},{"name":"Meditao","description":"Restaura 20% de HP e remove status negativos.","cost":"N/A","type":"HB"},{"name":"Reflexo","description":"50% de chance de desviar de ataques bsicos fsicos.","cost":"N/A","type":"Reao"}]},{"id":"animista","name":"Animista","type":"Bsica","role":"Suporte / Manipulador de Status","description":"Moogles que usam instrumentos e talentos imprevisveis para causar efeitos absurdos no campo.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"L Fofa","description":"Garante status 'Proteo' e 'Shell' por 3 turnos.","cost":"8 MP","type":"Magia"},{"name":"Erva de Gato","description":"Aplica 'BERSERK' no inimigo.","cost":"8 MP","type":"HB"},{"name":"Canto do Sapo","description":"Transforma o alvo em SAPO por 2 turnos.","cost":"22 MP","type":"Magia"},{"name":"Cozinhar","description":"Restaura 50% do HP do Alvo.","cost":"22 MP","type":"HB"},{"name":"Conte Ovelhinhas","description":"Faz todos os inimigos em pequena rea adormecerem.","cost":"15 MP","type":"Magia"},{"name":"Abanar o Rabo","description":"20% de chance de ENCANTAR o atacante quando alvejado.","cost":"N/A","type":"Reao"}]},{"id":"engenheiro","name":"Engenheiro","type":"Bsica","role":"Suporte Aleatrio / Caos Tecnolgico","description":"Gnios insanos que usam aparatos e mecanismos imprevisveis.","bonus_class":{"SOR":3,"INT":2},"requirements":[],"abilities":[{"name":"Box Vermelha","description":"Lana 'Haste' em uma unidade aleatria.","cost":"8 MP","type":"HB"},{"name":"Kit Azul","description":"Lana 'Dissipar' ao colidir com alvo aleatrio.","cost":"8 MP","type":"HB"},{"name":"Chaves Negras","description":"Aplica 'Condenao' em quem for atingido.","cost":"20 MP","type":"HB"},{"name":"Bateria Dourada","description":"Restaura 50% HP em uma unidade aleatria.","cost":"16 MP","type":"HB"},{"name":"Borrifador Verde","description":"Aplica VENENO em uma unidade aleatria na rea.","cost":"8 MP","type":"HB"},{"name":"Ajuste Rpido","description":"Permite reutilizar habilidade que falhou no turno seguinte sem custo de MP.","cost":"N/A","type":"Passiva"}]},{"id":"raptora","name":"Raptora","type":"Bsica","role":"Lutadora de Linha de Frente / Alta Mobilidade","description":"Guerreiras aladas que usam velocidade e instintos aguados para ataques rpidos.","bonus_class":{"FOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Ciclone","description":"Causa dano de vento em rea pequena.","cost":"N/A","type":"HB"},{"name":"Poder de Rend","description":"Reduz o ATAQUE do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Rend Magick","description":"Reduz a MAGIA do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Rend MP","description":"Diminui MP do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Redemoinho","description":"Lminas de vento causam dano e CONFUSO.","cost":"N/A","type":"HB"},{"name":"Salvaguarda","description":"Impede que a arma seja roubada ou destruda.","cost":"N/A","type":"Passiva"}]},{"id":"rastreadora","name":"Rastreadora","type":"Bsica","role":"Caadora / Suporte de Rastreio e Preciso","description":"Mestres da observao que leem o terreno e perseguem presas.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Sonic Boom","description":"Dano sonoro impossvel de desviar.","cost":"N/A","type":"HB"},{"name":"Expulsar","description":"Fora um monstro a fugir do combate.","cost":"N/A","type":"HB"},{"name":"Rastrear","description":"Marca um Monstro como 'presa', causando DANO DOBRADO.","cost":"N/A","type":"HB"},{"name":"Investigar","description":"Revela todas as informaes do alvo.","cost":"N/A","type":"HB"},{"name":"ltimo Tiro","description":"Alto dano com chance de infligir CONDENAO.","cost":"N/A","type":"HB"},{"name":"Sobrevivente","description":"Recebe REGEN quando estiver com 20% de HP ou menos.","cost":"N/A","type":"Passiva"}]},{"id":"espadachim","name":"Espadachim","type":"Bsica","role":"Lutador Verstil / Duelo & Tcnica","description":"Guerreiros disciplinados que combinam preciso fsica e poder mgico na lmina.","bonus_class":{"FOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Corte Cruzado","description":"Dano em rea frontal (arco) em at 3 inimigos.","cost":"N/A","type":"HB"},{"name":"Olhos no Duelo","description":"+25% de dano se enfrentar apenas um inimigo.","cost":"N/A","type":"HB"},{"name":"Corte Etreo","description":"Golpe mgico  distncia (FOR+INT).","cost":"10 MP","type":"HB"},{"name":"Passo Veloz","description":"Move-se para trs do inimigo com +50% de chance de crtico.","cost":"N/A","type":"HB"},{"name":"Trifria","description":"Combo de 3 ataques com chance de Sangramento.","cost":"N/A","type":"HB"},{"name":"Corte Reflexivo","description":"30% de chance de aparar projteis fsicos.","cost":"N/A","type":"Reao"}]},{"id":"ladra","name":"Ladra","type":"Bsica","role":"Furtividade / Roubo","description":"Mestras do furto e agilidade que roubam itens e gil em combate.","bonus_class":{"SOR":3,"CAR":2},"requirements":[],"abilities":[{"name":"Roubar Gil","description":"Tenta roubar dinheiro.","cost":"N/A","type":"HB"},{"name":"Roubar Item","description":"Tenta roubar um item.","cost":"N/A","type":"HB"},{"name":"Roubar Equipamento","description":"Tenta roubar o Equipamento do alvo.","cost":"N/A","type":"HB"},{"name":"Destrancar","description":"Pode destrancar portas ou bas.","cost":"N/A","type":"HB"},{"name":"Golpe Furtivo","description":"Dobro de dano se estiver Escondida.","cost":"N/A","type":"HB"},{"name":"Instinto Possessivo","description":"Evita roubo e tenta roubar a arma do ladro.","cost":"N/A","type":"Reao"}]},{"id":"espreitadora","name":"Espreitadora","type":"Bsica","role":"Furtividade / Infiltrao","description":"Especialistas em camuflagem e eliminao silenciosa.","bonus_class":{"SOR":3,"VEL":2},"requirements":[],"abilities":[{"name":"Ataque Surpresa","description":"Crtico automtico se fora do campo de viso.","cost":"N/A","type":"HB"},{"name":"Rpida e Escondida","description":"Velocidade dobrada quando camuflada.","cost":"N/A","type":"Passiva"},{"name":"Manto Noturno","description":"Aumenta chance de camuflagem  noite.","cost":"N/A","type":"Passiva"},{"name":"Silncio","description":"Aplica Silncio por 3 turnos (apenas camuflada).","cost":"N/A","type":"HB"},{"name":"Derrubada Mortal","description":"Elimina instantaneamente alvo pelas costas (apenas camuflada).","cost":"N/A","type":"HB"},{"name":"Morte Silenciosa","description":"50% de chance de permanecer camuflada aps eliminar alvo.","cost":"N/A","type":"Passiva"}]},{"id":"adestrador","name":"Adestrador","type":"Bsica","role":"Controle de Criaturas / Suporte Ttico","description":"Especialistas em lidar com a vida selvagem, controlando monstros temporariamente.","bonus_class":{"CAR":5},"requirements":[],"abilities":[{"name":"Adestrar","description":"Controla um monstro por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Bater ou Correr","description":"Recebe Haste quando HP chega a 10%.","cost":"N/A","type":"Reao"}]},{"id":"escudeiro","name":"Escudeiro","type":"Bsica","role":"Defensor / Suporte com Itens","description":"Pilares de defesa que protegem aliados e usam itens de suporte.","bonus_class":{"CONS":5},"requirements":[],"abilities":[{"name":"Postura de Defesa","description":"Reduz pela metade o dano recebido at o prximo turno.","cost":"N/A","type":"HB"},{"name":"Apoio Vital","description":"Usa at 2 poes para curar aliados adjacentes.","cost":"N/A","type":"HB"},{"name":"Eu te Protejo!","description":"Salta no aliado que tomar dano e absorve o golpe.","cost":"N/A","type":"Reao"},{"name":"Lanamento Cuidadoso","description":"Arremessa item a at 3 blocos.","cost":"N/A","type":"HB"},{"name":"Grito Protetor","description":"Provoca inimigos forando ataque ao Escudeiro.","cost":"N/A","type":"HB"},{"name":"Reao Instintiva","description":"Usa poo automaticamente ao sofrer golpe com HP baixo.","cost":"N/A","type":"Reao"}]},{"id":"mago_negro","name":"Mago Negro","type":"Bsica","role":"Ofensivo Mgico / Controle Elemental","description":"Conjuradores que dominam a magia elemental destrutiva.","bonus_class":{"INT":3,"MP":2},"requirements":[],"abilities":[{"name":"Fire","description":"Esfera de fogo em rea (alvo + 1 casa cada lado).","cost":"10 MP","type":"Magia"},{"name":"Blizzard","description":"Fragmento congelante perfurante.","cost":"10 MP","type":"Magia"},{"name":"Thunder","description":"Raio direto sobre inimigo e adjacentes.","cost":"10 MP","type":"Magia"},{"name":"Aero","description":"Turbilho de vento em rea.","cost":"10 MP","type":"Magia"},{"name":"Telecinese","description":"Move objeto/unidade at 5 blocos.","cost":"10 MP","type":"Magia"},{"name":"Absorver Mana","description":"Absorve 20% do dano mgico recebido como Mana.","cost":"N/A","type":"Reao"}]},{"id":"ocultista","name":"Ocultista","type":"Bsica","role":"Mago das Sombras / Maldies","description":"Estudiosos do proibido que manipulam trevas e maldies.","bonus_class":{"MP":3,"INT":2},"requirements":[],"abilities":[{"name":"Escurido","description":"Dano mgico de trevas em rea.","cost":"10 MP","type":"Magia"},{"name":"Ritual da Condenao","description":"Aplica CONDENAO no alvo.","cost":"15 MP","type":"Magia"},{"name":"Barreira do Silncio","description":"Aplica SILNCIO no alvo.","cost":"15 MP","type":"Magia"},{"name":"Vu Cego","description":"Aplica CEGUEIRA no alvo.","cost":"15 MP","type":"Magia"},{"name":"Avada Mortis","description":"Tenta aplicar morte instantnea.","cost":"30 MP","type":"Magia"},{"name":"Olhar do Abismo","description":"Aumenta INT aps concluir maldio.","cost":"N/A","type":"Passiva"}]},{"id":"quimico_avancado","name":"Qumico Avanado","type":"Avanada","role":"Suporte / Manipulador de Itens","description":"Evoluo do Qumico, usa reaes elementares e poes ofensivas em rea.","bonus_class":{"SOR":4,"CAR":2},"requirements":["3 Habilidades Mestre em Qumico","+30 SOR"],"abilities":[{"name":"Criar Poo Avanada","description":"Cria poes de qualidade superior.","cost":"N/A","type":"HB"},{"name":"Arremesso Rpido","description":"Arremessa at 3 poes em um movimento.","cost":"N/A","type":"HB"},{"name":"Frasco Venenoso","description":"Libera veneno em rea.","cost":"N/A","type":"HB"},{"name":"Frasco Milagroso","description":"Remove todos status negativos.","cost":"N/A","type":"HB"},{"name":"Dose Grande","description":"Aumenta rea de efeito da poo.","cost":"N/A","type":"HB"},{"name":"Pr-Preparo","description":"Inicia combate com 2 poes prontas.","cost":"N/A","type":"Passiva"}]},{"id":"clerigo","name":"Clrigo","type":"Avanada","role":"Curandeiro de Linha de Frente","description":"Elo entre fora e f, luta na frente enquanto cura aliados.","bonus_class":{"CONS":4,"MANA":2},"requirements":["1 Habilidade Mestre em Soldado","2 Habilidades Mestre em Mago Branco","+20 FOR"],"abilities":[{"name":"Julgamento Divino","description":"Dano sagrado (FOR+Luz).","cost":"20 MP","type":"Magia"},{"name":"Palavras de F","description":"Concede Barreira e Shell.","cost":"15 MP","type":"Magia"},{"name":"Espurgar","description":"Expulsa monstros espirituais.","cost":"25 MP","type":"Magia"},{"name":"Martelo Giratrio","description":"Dano em rea ao redor (CONS+FOR+Luz).","cost":"30 MP","type":"HB"},{"name":"Ruptura Divina","description":"Exploso triangular de luz.","cost":"50 MP","type":"HB"},{"name":"Estou com Voc","description":"Cura auto 10% de aliado adjacente por turno.","cost":"N/A","type":"Passiva"}]},{"id":"alquimista","name":"Alquimista","type":"Avanada","role":"Suporte / Manipulador de Campo","description":"Molda o mundo convertendo solo e energia em poder.","bonus_class":{"INT":4,"MANA":2},"requirements":["2 Habilidades Mestre em Mago Branco","1 Habilidade Mestre em Qumico","+30 INT"],"abilities":[{"name":"Pilar de Pedra","description":"Pilar de rocha atinge inimigo (INT+Terra).","cost":"20 MP","type":"Magia"},{"name":"Canho de Pedra","description":"Projtil de rocha distante.","cost":"20 MP","type":"Magia"},{"name":"Correntes de Solo","description":"Imobiliza inimigo.","cost":"17 MP","type":"Magia"},{"name":"Transmutao Peridica","description":"Altera elemento natural de rea/objeto.","cost":"30 MP","type":"Magia"},{"name":"Golem de Pedra","description":"Cria golem controlvel.","cost":"50 MP","type":"Magia"},{"name":"Muro","description":"Bloqueia ataque com muro de pedra.","cost":"N/A","type":"Reao"}]},{"id":"duelista","name":"Duelista","type":"Avanada","role":"Lutador de Elite / Combate Singular","description":"pice do domnio da espada, focado em preciso e duelos.","bonus_class":{"FOR":4,"VEL":2},"requirements":["3 Habilidades Mestre em Espadachim","+30 FOR","+20 VEL"],"abilities":[{"name":"BackStep","description":"Salta 2 blocos para esquiva.","cost":"N/A","type":"HB"},{"name":"Eu Contra Voc","description":"+50% dano em alvo nico.","cost":"N/A","type":"HB"},{"name":"Chuva de Lminas","description":"Trs cortes de ar consecutivos.","cost":"N/A","type":"HB"},{"name":"Postura de Batalha","description":"Aumenta ataque fsico em 50%.","cost":"N/A","type":"HB"},{"name":"Grande Slash","description":"Golpe que percorre o campo todo.","cost":"N/A","type":"HB"},{"name":"Defesa Contnua","description":"Desvia golpe se FOR > inimigo.","cost":"N/A","type":"Reao"}]},{"id":"iluminista","name":"Iluminista","type":"Avanada","role":"Mago Supremo / Controlador Elemental Global","description":"Concentra energia para ataques globais ou curas totais.","bonus_class":{"INT":5,"MANA":5},"requirements":["5 Habilidades Mestre em Mago Branco","5 Habilidades Mestre em Mago Negro"],"abilities":[{"name":"Piromancia","description":"Dano global de Fogo aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Aquamancia","description":"Dano global de gua aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Raiomancia","description":"Dano global de Trovo aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Whitemancia","description":"Cura global 50% HP aps 1 rodada.","cost":"50 MP","type":"Magia"},{"name":"Tretamancia","description":"Plasma linear de ponta a ponta.","cost":"50 MP","type":"Magia"},{"name":"Ritual Seguro","description":"Ativa Barreira/Veloz ao ser alvejado conjurando.","cost":"N/A","type":"Reao"}]},{"id":"oppenheir","name":"Oppenheir","type":"Avanada","role":"Mestre Qumico / Manipulador da Destruio","description":"Alquimia levada ao limite de exploses e reaes em cadeia.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Qumico","5 Habilidades Mestre em Qumico Avanado"],"abilities":[{"name":"Reao Altrusta","description":"Exploso de cura e remoo de status.","cost":"N/A","type":"HB"},{"name":"Nuvem Txica","description":"Veneno em rea e reduz preciso.","cost":"N/A","type":"HB"},{"name":"Ignis Vitae","description":"Chamas conscientes perseguidoras.","cost":"N/A","type":"HB"},{"name":"Fragmento Celular","description":"Microexploso de dano massivo.","cost":"N/A","type":"HB"},{"name":"Bomba Atmica","description":"Exploso que elimina todos no campo (exceto cobertura).","cost":"N/A","type":"HB"},{"name":"Entropia Perfeita","description":"Chance de remover penalidades ao explodir.","cost":"N/A","type":"Passiva"}]},{"id":"eremita","name":"Eremita","type":"Avanada","role":"Tanque / Protetor Espiritual","description":"Sacerdote de batalha que converte dano em sacrifcio e proteo.","bonus_class":{"CONS":10},"requirements":["5 Habilidades Mestre em Clrigo","+100 CONS"],"abilities":[{"name":"F ao Meu Redor","description":"Aura cura 50% HP aliados prximos.","cost":"N/A","type":"HB"},{"name":"F do Sol","description":"Raio solar expurga mortos-vivos e queima.","cost":"N/A","type":"HB"},{"name":"F da Lua","description":"Cura 100% HP aliados prximos.","cost":"N/A","type":"HB"},{"name":"F do Ferro","description":"Concede Shell+ e Barreira+.","cost":"N/A","type":"HB"},{"name":"F do Brbaro","description":"Provoca inimigos e soma CONS ao dano.","cost":"N/A","type":"HB"},{"name":"Aquele que Me Protege","description":"Converte 20% do dano recebido em cura.","cost":"N/A","type":"Passiva"}]},{"id":"arquidenio","name":"Arquidnio","type":"Avanada","role":"Suporte / Manipulador de Probabilidades","description":"Mago matemtico que manipula valores e estatsticas de combate.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Alquimista","+100 INT"],"abilities":[{"name":"O Dobro","description":"Dobra qualquer valor por 1 turno.","cost":"50 MP","type":"Magia"},{"name":"Pela Metade","description":"Divide qualquer valor por 2.","cost":"50 MP","type":"Magia"},{"name":"100%","description":"Garante acerto absoluto.","cost":"70 MP","type":"Magia"},{"name":"0%","description":"Anula valor ou chance a 0.","cost":"70 MP","type":"Magia"},{"name":"Septania","description":"Multiplica valor por 7x.","cost":"100 MP","type":"Magia"},{"name":"Lgica Perfeita","description":"Resultado natural 20 uma vez por batalha.","cost":"N/A","type":"Passiva"}]},{"id":"samurai","name":"Samurai","type":"Avanada","role":"Ofensivo / Especialista em Duelo","description":"Guerreiro disciplinado que une velocidade e fora em cortes perfeitos.","bonus_class":{"FOR":5,"VEL":5},"requirements":["5 Habilidades Mestre em Espadachim","5 Habilidades Mestre em Duelista"],"abilities":[{"name":"Saque Rpido","description":"Duplica FOR e VEL por 1 turno.","cost":"N/A","type":"HB"},{"name":"Furaco da Folha","description":"Tornado de cortes em linha reta.","cost":"N/A","type":"HB"},{"name":"Olhos de Falco","description":"Soma FOR + SOR contra alvo.","cost":"N/A","type":"HB"},{"name":"Corte do Drago","description":"Golpe instantneo. 20 natural elimina alvo.","cost":"N/A","type":"HB"},{"name":"Cu Limpo","description":"Corte vertical colossal aps preparao.","cost":"N/A","type":"HB"},{"name":"Empunhadura Dupla","description":"Pode empunhar duas armas.","cost":"N/A","type":"Passiva"}]},{"id":"gladiador","name":"Gladiador","type":"Avanada","role":"Linha de Frente / Controle e Fora Bruta","description":"Colosso de arena que luta por glria e brutalidade.","bonus_class":{"FOR":4,"CONS":2},"requirements":["2 Habilidades Mestre em Guerreiro","+30 FOR"],"abilities":[{"name":"Grito Selvagem","description":"Aumenta FOR e provoca inimigos.","cost":"N/A","type":"HB"},{"name":"Investida de Escudo","description":"Dano de impacto com escudo.","cost":"N/A","type":"HB"},{"name":"Espancamento","description":"5 golpes consecutivos, pode imobilizar.","cost":"N/A","type":"HB"},{"name":"Espada Flamejante","description":"Causa Queimadura com ataques fsicos.","cost":"N/A","type":"HB"},{"name":"Postura de Luta","description":"Evita ataques e contra-ataca.","cost":"N/A","type":"HB"},{"name":"Escudeiro","description":"Pode usar escudos em qualquer classe.","cost":"N/A","type":"Passiva"}]},{"id":"artista_marcial","name":"Artista Marcial","type":"Avanada","role":"Linha de Frente / Especialista em Combos","description":"Especialista em golpes precisos e canalizao de fora vital.","bonus_class":{"VEL":4,"CONS":2},"requirements":["2 Habilidades Mestre em Monge","+30 VEL"],"abilities":[{"name":"Combo do Tigre","description":"3 golpes, dano aumenta a cada acerto.","cost":"N/A","type":"HB"},{"name":"Golpe Serpenteante","description":"Aproximao em zigue-zague e crtico.","cost":"N/A","type":"HB"},{"name":"Palma Sagrada","description":"Golpe de dano puro que ignora armadura.","cost":"N/A","type":"HB"},{"name":"Passo do Vento","description":"Teleporte curto e ataque surpresa.","cost":"N/A","type":"HB"},{"name":"Punhos do Drago","description":"5 golpes simultneos com chance de atordoar.","cost":"N/A","type":"HB"},{"name":"Esprito Indomvel","description":"Ganha FOR e VEL quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"lanceiro","name":"Lanceiro","type":"Avanada","role":"Ofensivo / Alcance e Preciso","description":"Predador de longo alcance com lanas.","bonus_class":{"VEL":4,"SOR":2},"requirements":["2 Habilidades Mestre em Guerreiro","+30 VEL"],"abilities":[{"name":"Ponta Longa","description":"Estende alcance para 4 blocos.","cost":"N/A","type":"HB"},{"name":"Dardo de Javali","description":"Arremessa a lana perfurando linha reta.","cost":"N/A","type":"HB"},{"name":"Jump","description":"Salta e cai sobre inimigo com dano alto.","cost":"N/A","type":"HB"},{"name":"Barreira de Cabo","description":"Empurra inimigos adjacentes.","cost":"N/A","type":"HB"},{"name":"Ponta Perfurante","description":"Golpe linear que perfura alvos.","cost":"N/A","type":"HB"},{"name":"Rpido como uma Lana","description":"Converte VEL em dano quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"lutador_de_rua","name":"Lutador de Rua","type":"Avanada","role":"Ofensivo / Anti-Honra","description":"Brigo desonesto que usa fora bruta e truques sujos.","bonus_class":{"Livre":6},"requirements":["2 Habilidades Mestre em Monge","1 Habilidade Mestre em outra classe"],"abilities":[{"name":"Vou te Arrebentar!","description":"+20% dano contra alvo marcado.","cost":"N/A","type":"HB"},{"name":"Lariat de Msculos","description":"Golpe de brao com chance de Atordoar.","cost":"N/A","type":"HB"},{"name":"Soco na Costela","description":"Finta e golpe crtico preciso.","cost":"N/A","type":"HB"},{"name":"Rasteira Malandra","description":"Aplica Imobilizado.","cost":"N/A","type":"HB"},{"name":"Sequncia de Raiva","description":"5 ataques e entra em Fria.","cost":"N/A","type":"HB"},{"name":"Covarde","description":"Dobra VEL para fugir quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"vinking","name":"Vinking","type":"Avanada","role":"Brbaro Mstico","description":"Guerreiro ancestral guiado por troves e fria divina.","bonus_class":{"FOR":4,"CONS":2},"requirements":["3 Habilidades Mestre em Gladiador","+50 FOR","+50 CONS"],"abilities":[{"name":"Marchar de Heimdall","description":"Dobra VEL prpria e de aliados.","cost":"N/A","type":"HB"},{"name":"Trovo de Thor","description":"Raio cai a distncia.","cost":"N/A","type":"HB"},{"name":"Confronto de Tyr","description":"Dobra FOR por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Ma de Iduna","description":"Recupera 80% HP e remove status.","cost":"N/A","type":"HB"},{"name":"Por Odin!","description":"Aumenta todos atributos por 1 turno.","cost":"N/A","type":"HB"},{"name":"At Valhalla","description":"Converte CONS em FOR quando HP baixo.","cost":"N/A","type":"Passiva"}]},{"id":"templario","name":"Templrio","type":"Avanada","role":"Mobilidade Extrema / Linha de Frente","description":"Soldado perfeito que domina o campo com lana e velocidade.","bonus_class":{"VEL":4,"CONS":2},"requirements":["3 Habilidades Mestre em Lanceiro","+50 VEL","+50 FOR"],"abilities":[{"name":"Salto Rpido","description":"Teleporte para qualquer parte do mapa.","cost":"N/A","type":"HB"},{"name":"Avano Perfurante","description":"Avano linear perfurante.","cost":"N/A","type":"HB"},{"name":"Dardos Perfurantes","description":"5 ataques em sequncia.","cost":"N/A","type":"HB"},{"name":"Lana Flamejante","description":"Adiciona Fogo aos ataques.","cost":"N/A","type":"HB"},{"name":"Dardo do Drago","description":"Arremesso perfurante em linha reta.","cost":"N/A","type":"HB"},{"name":"Lana Giratria","description":"Evita ataques  distncia.","cost":"N/A","type":"Reao"}]},{"id":"mestre_artes_marciais","name":"Mestre das Artes Marciais","type":"Avanada","role":"Duelista / Manipulador de Ki","description":"Harmonia total entre corpo e Ki.","bonus_class":{"CONS":4,"Livre":2},"requirements":["5 Habilidades Mestre em Monge","5 Habilidades Mestre em Artista Marcial"],"abilities":[{"name":"Dana do Carvalho Vermelho","description":"Combo de 5 golpes de vento.","cost":"N/A","type":"HB"},{"name":"Palma do Drago","description":"Ondas de ar  distncia.","cost":"N/A","type":"HB"},{"name":"Teken","description":"Dobra ARM e RES por 5 turnos.","cost":"N/A","type":"HB"},{"name":"Dana do Sabugueiro Marrom","description":"Reduz ARM do alvo pela metade.","cost":"N/A","type":"HB"},{"name":"Dana do Esprito Branco","description":"Clone dobra aes por 2 turnos.","cost":"N/A","type":"HB"},{"name":"Intuio de Ki","description":"Imune a surpresas.","cost":"N/A","type":"Passiva"}]},{"id":"brutamontes","name":"Brutamontes","type":"Avanada","role":"Tanque Ofensivo","description":"Muralha do submundo que protege e esmaga.","bonus_class":{"CAR":4,"SOR":2},"requirements":["5 Habilidades Mestre em Lutador de Rua","100 FOR"],"abilities":[{"name":"No Vai Passar","description":"Bloqueia avano inimigo e dobra defesa.","cost":"N/A","type":"HB"},{"name":"Lariat Duplo","description":"Arrasta inimigos adjacentes.","cost":"N/A","type":"HB"},{"name":"Emboscada","description":"Recupera HP e contra-ataca quem aproximar.","cost":"N/A","type":"HB"},{"name":"Pose do Brutamontes","description":"Salto esmagador com onda de choque.","cost":"N/A","type":"HB"},{"name":"Manda-Chuva","description":"Buffa aliados e debuffa inimigos em rea.","cost":"N/A","type":"HB"},{"name":"Fraco Demais","description":"Nega dano menor que sua FOR.","cost":"N/A","type":"Passiva"}]},{"id":"cavaleiro_dragao","name":"Cavaleiro Drago","type":"Avanada","role":"Caador de Drages / Ofensivo Elemental","description":"Guerreiros que usam poderes de drago.","bonus_class":{"CONS":5,"BonusDanoDragao":"20%"},"requirements":["Eliminar um Drago"],"abilities":[{"name":"Bafo do Drago Vermelho","description":"Fogo em rea triangular.","cost":"N/A","type":"HB"},{"name":"Garras do Drago Ciano","description":"Golpe de gelo com avano.","cost":"N/A","type":"HB"},{"name":"Salto do Drago Amarelo","description":"Salto eltrico (1 turno no ar).","cost":"N/A","type":"HB"},{"name":"Beno do Drago Azul","description":"Cura 50% HP.","cost":"N/A","type":"HB"},{"name":"Energia do Drago Branco","description":"Raio de luz linear.","cost":"N/A","type":"HB"},{"name":"Aura de Drago","description":"Monstros fracos sentem medo.","cost":"N/A","type":"Passiva"}]},{"id":"dragonslayer","name":"Dragonslayer","type":"Avanada","role":"Anti-Drago / Executador","description":"Arma final contra drages, capaz de subjugar feras colossais.","bonus_class":{"FOR":6,"BonusDanoDragao":"60%"},"requirements":["5 Habilidades Mestre em Cavaleiro Drago"],"abilities":[{"name":"Sopro do Drago Esmeralda","description":"Nuvem txica em rea.","cost":"N/A","type":"HB"},{"name":"Rasante do Drago Prateado","description":"Rasante de vento linear mapa todo.","cost":"N/A","type":"HB"},{"name":"Escamas do Drago Ouro","description":"Dobra ARM e RES.","cost":"N/A","type":"HB"},{"name":"Tremor do Drago de Bronze","description":"Estacas de pedra e tremor.","cost":"N/A","type":"HB"},{"name":"Ameaa do Drago Negro","description":"Miasma negra aplica Condenao.","cost":"N/A","type":"HB"},{"name":"Escamas Elementais","description":"Absorve dano elemental convertendo em CONS.","cost":"N/A","type":"Passiva"}]},{"id":"xama","name":"Xam","type":"Avanada","role":"Debuff / Manipulador de Caos","description":"Lida com foras ocultas e ancestrais dos pntanos.","bonus_class":{"MANA":3,"CONS":2},"requirements":["2 Habilidades Mestre em Curandeiro","+30 MANA"],"abilities":[{"name":"Xabala Cegaris","description":"Cega alvo por 5 turnos.","cost":"15 MP","type":"Magia"},{"name":"Ziriki Sileci","description":"Silencia alvo por 5 turnos.","cost":"15 MP","type":"Magia"},{"name":"Urucubaca","description":"Aplica Envenenamento.","cost":"20 MP","type":"Magia"},{"name":"Ianhamaj","description":"Imobiliza alvo por 5 turnos.","cost":"20 MP","type":"Magia"},{"name":"Zakarinhad","description":"Aplica Condenao.","cost":"30 MP","type":"Magia"},{"name":"Oshala","description":"Imune a status negativos.","cost":"N/A","type":"Passiva"}]},{"id":"monge_do_pantano","name":"Monge do Pntano","type":"Avanada","role":"Lutador de Terreno / Porradeiro","description":"Canaliza a densidade do pntano em golpes pesados.","bonus_class":{"CONS":3,"FOR":2},"requirements":["1 Habilidade Mestre em Curandeiro","1 Habilidade Mestre em Escudeiro","+20 FOR"],"abilities":[{"name":"Soco do Pntano","description":"Golpe aqutico carregado.","cost":"N/A","type":"HB"},{"name":"Barrigada","description":"Esmaga e empurra.","cost":"N/A","type":"HB"},{"name":"Vu do Pntano","description":"Dobra RES por 3 turnos.","cost":"N/A","type":"HB"},{"name":"Abrao do Pntano","description":"Agarro esmagador.","cost":"N/A","type":"HB"},{"name":"Boxe do Pntano","description":"3 golpes consecutivos pantanosos.","cost":"N/A","type":"HB"},{"name":"gua Est Comigo","description":"Dobra dano em terreno de gua.","cost":"N/A","type":"Passiva"}]},{"id":"glutao","name":"Gluto","type":"Avanada","role":"Tank / Absorvedor de Dano","description":"Foras da natureza famintas e indestrutveis.","bonus_class":{"CONS":5},"requirements":["1 Habilidade Mestre em Curandeiro","1 Habilidade Mestre em Escudeiro","+20 CONS"],"abilities":[{"name":"Investida do Sapo","description":"Atropela em linha reta.","cost":"N/A","type":"HB"},{"name":"Descanso do Sapo","description":"Cura e dobra defesa (imvel).","cost":"N/A","type":"HB"},{"name":"Arroto do Sapo","description":"Dano de impacto sonoro.","cost":"N/A","type":"HB"},{"name":"Pulo do Sapo","description":"Esmaga alvo com peso.","cost":"N/A","type":"HB"},{"name":"Vou Te Comer","description":"Devora inimigo com 25% HP ou menos.","cost":"N/A","type":"HB"},{"name":"Boca Sempre Mexendo","description":"Recupera 10% HP se no agir.","cost":"N/A","type":"Passiva"}]},{"id":"protetor","name":"Protetor","type":"Avanada","role":"Tank / Guardio de Campo","description":"Muralhas vivas dedicadas a proteger aliados.","bonus_class":{"CONS":5},"requirements":["2 Habilidades Mestre em Escudeiro","+30 CONS"],"abilities":[{"name":"Eu Tanko, Voc Mata","description":"Absorve 80% do dano de aliado e buffa FOR dele.","cost":"N/A","type":"HB"},{"name":"Investida do Escudo","description":"Corre com escudo e atordoa.","cost":"N/A","type":"HB"},{"name":"Reflexo do Escudo","description":"Escudo ricocheteia em inimigos.","cost":"N/A","type":"HB"},{"name":"Sapo Protetor","description":"Compartilha defesa com aliados ao redor.","cost":"N/A","type":"HB"},{"name":"Escudo de Proteo Areo","description":"Anula prximo dano em aliado.","cost":"N/A","type":"HB"},{"name":"Socorros Rpidos","description":"Salta para tomar golpe por aliado.","cost":"N/A","type":"Reao"}]},{"id":"pai_do_pantano","name":"Pai do Pntano","type":"Avanada","role":"Mago de Terreno / Controle","description":"Tornou-se um com o pntano, controlando razes e mars.","bonus_class":{"MANA":6},"requirements":["5 Habilidades Mestre em Xam","5 Habilidades Mestre em Curandeiro"],"abilities":[{"name":"Razes do Sabugueiro de Ihoa","description":"Imobiliza inimigos em rea.","cost":"50 MP","type":"Magia"},{"name":"Pico dos Pinheiros","description":"Pinheiros empalam inimigos.","cost":"50 MP","type":"Magia"},{"name":"Gota de Orvalho","description":"Cura 100% HP e remove status (rea).","cost":"50 MP","type":"Magia"},{"name":"Primavera Serena","description":"Dobra INT e RES de aliados.","cost":"40 MP","type":"Magia"},{"name":"Mar do Mangue","description":"Empurra inimigos, remove buffs e cura aliados (global).","cost":"100 MP","type":"Magia"},{"name":"Floresta Viva","description":"Razes prendem inimigos engajados.","cost":"N/A","type":"Passiva"}]},{"id":"sabio_do_pantano","name":"Sbio do Pntano","type":"Avanada","role":"Controle de gua / Contra-Golpe","description":"Domina a energia viva do pntano com constituio colossal.","bonus_class":{"CONS":6},"requirements":["5 Habilidades Mestre em Monge do Pntano","+100 CONS"],"abilities":[{"name":"Punho do Pntano","description":"Ataques ganham elemento gua.","cost":"N/A","type":"Passiva"},{"name":"Serpente do Pntano","description":"Ataque linear de gua.","cost":"N/A","type":"HB"},{"name":"AquaReflete","description":"Esfera de gua empurra alvo.","cost":"N/A","type":"HB"},{"name":"Pantanogan","description":"Esfera de gua empurra alvo.","cost":"N/A","type":"HB"},{"name":"Bola de Canho","description":"Projtil vivo de dano massivo.","cost":"N/A","type":"HB"},{"name":"Contra-Corpo","description":"Contra-ataca fsico e empurra.","cost":"N/A","type":"Reao"}]},{"id":"burgues_do_pantano","name":"Burgus do Pntano","type":"Avanada","role":"Tanque / Controle","description":"Suprema ganncia, usa corpo colossal e autoridade.","bonus_class":{"CONS":6},"requirements":["5 Habilidades Mestre em Gluto","+100 CONS"],"abilities":[{"name":"Imposto do Pntano","description":"Rouba 20% HP do alvo e remove buff.","cost":"N/A","type":"HB"},{"name":"Barriga Monrquica","description":"Dobra defesa e bloqueia passagem.","cost":"N/A","type":"HB"},{"name":"Banquete Exclusivo","description":"Cura 100% HP e ganha Fria.","cost":"N/A","type":"HB"},{"name":"Tesouro do Pntano","description":"Exploso de cofre.","cost":"N/A","type":"HB"},{"name":"Decreto de Propriedade","description":"Debuffa inimigos e buffa aliados em rea.","cost":"N/A","type":"HB"},{"name":"Soberania do Pntano","description":"Cura ao aproximar inimigo e aplica Lentido.","cost":"N/A","type":"Passiva"}]},{"id":"guardiao_do_pantano","name":"Guardio do Pntano","type":"Avanada","role":"Tanque / Suporte Supremo","description":"Monlito vivo que ergue muralhas de escudos.","bonus_class":{"CONS":10},"requirements":["5 Habilidades Mestre em Escudeiro","5 Habilidades Mestre em Protetor"],"abilities":[{"name":"Priso de Escudo","description":"Prende alvo em 4 escudos.","cost":"N/A","type":"HB"},{"name":"Dobro de Escudo","description":"Dobra qualquer escudo em jogo.","cost":"N/A","type":"HB"},{"name":"Grande Escudo","description":"Protege rea enorme atrs dele.","cost":"N/A","type":"HB"},{"name":"Escudo Revitalizador","description":"Cura 100% HP rea.","cost":"N/A","type":"HB"},{"name":"Proteo em Grande Escala","description":"Anula prximo dano em TODOS aliados.","cost":"N/A","type":"HB"},{"name":"Proteo Mgica","description":"Usa habilidade de proteo em aliado alvejado.","cost":"N/A","type":"Reao"}]},{"id":"cantor_das_mares","name":"Cantor das Mars","type":"Avanada","role":"Suporte / Buffer Musical","description":"Bardos que usam melodias espirituais.","bonus_class":{"CAR":5},"requirements":["+50 CAR"],"abilities":[{"name":"Cantar","description":"Executa msica do repertrio (efeitos variados).","cost":"N/A","type":"HB"},{"name":"Palco Improvisado","description":"Dobro de efeito se estiver em terreno elevado.","cost":"N/A","type":"Passiva"}]},{"id":"astro_do_pantano","name":"Astro do Pntano","type":"Avanada","role":"Suporte Musical / Manipulador de Moral","description":"cone musical que move multides.","bonus_class":{"CAR":10},"requirements":["Ttulo musical com Cantor das Mars"],"abilities":[{"name":"Mashup","description":"Combina duas msicas simultneas.","cost":"N/A","type":"HB"},{"name":"Charme Musical","description":"Enfeitia atacante.","cost":"N/A","type":"Reao"}]},{"id":"sutileira","name":"Sutileira","type":"Avanada","role":"Roubo de Elite / Suporte Social","description":"Ladras de alta classe, elegantes e imperceptveis.","bonus_class":{"CAR":3,"SOR":2},"requirements":["2 Habilidades Mestre em Ladra","+20 SOR"],"abilities":[{"name":"Roubar Arma Principal","description":"Furta a arma equipada do alvo.","cost":"N/A","type":"HB"},{"name":"Roubar Acessrios","description":"Furta anis/colares.","cost":"N/A","type":"HB"},{"name":"Roubar Item de Luxo","description":"Furta item mais raro.","cost":"N/A","type":"HB"},{"name":"Detectar Armadilhas","description":"Percebe armadilhas em raio de 5 blocos.","cost":"N/A","type":"HB"},{"name":"Famme Fatale","description":"Encanta alvo e pode aplicar Condenao.","cost":"N/A","type":"HB"},{"name":"Mestre dos Assaltos","description":"No ativa armadilhas.","cost":"N/A","type":"Passiva"}]},{"id":"rastreadora_avancada","name":"Rastreadora (Avanada)","type":"Avanada","role":"Dano / Furtividade / Controle","description":"Felinas letais que unem furtividade com caa predatria.","bonus_class":{"SOR":3,"VEL":2},"requirements":["2 Habilidades Mestre em Espreitadora","+20 VEL"],"abilities":[{"name":"Cheiro do Medo","description":"Dobra MOV na direo do alvo.","cost":"N/A","type":"HB"},{"name":"Detectar Fraqueza","description":"Prximo ataque soma SOR ao dano.","cost":"N/A","type":"HB"},{"name":"Colocar Armadilhas","description":"Instala armadilha no campo.","cost":"N/A","type":"HB"},{"name":"Salto da Morte","description":"Ataque de cima com bnus de SOR.","cost":"N/A","type":"HB"},{"name":"Morte em Sequncia","description":"Golpe linear em todos no trajeto.","cost":"N/A","type":"HB"},{"name":"Contra Ataque","description":"Contra-ataca fsico adjacente.","cost":"N/A","type":"Reao"}]},{"id":"kunoichi","name":"Kunoichi","type":"Avanada","role":"Ninjutsu / Controle Elemental","description":"Assassinas discretas que usam iluses e ninjutsu.","bonus_class":{"INT":3,"SOR":2},"requirements":["2 Habilidades Mestre em Ladra","2 Habilidades Mestre em Espreitadora"],"abilities":[{"name":"Arremesso de Kunai","description":"Kunai amplificada com INT.","cost":"N/A","type":"HB"},{"name":"Bomba de Fumaa","description":"Fica camuflada instantaneamente.","cost":"N/A","type":"HB"},{"name":"Genjutsu","description":"Iluso causa Confuso.","cost":"25 MP","type":"Magia"},{"name":"Suiton","description":"Vrtice de gua (INT+gua).","cost":"30 MP","type":"Magia"},{"name":"Doton","description":"Pilar de terra (INT+Terra).","cost":"30 MP","type":"Magia"},{"name":"Clone das Sombras","description":"Clone repete ninjutsu.","cost":"N/A","type":"Passiva"}]},{"id":"chefona","name":"Chefona","type":"Avanada","role":"DPS / Suporte Criminoso","description":"Mandachuva do crime que usa pistolas e capangas.","bonus_class":{"SOR":6},"requirements":["5 Habilidades Mestre em Ladra","5 Habilidades Mestre em Sutileira","+100 SOR"],"abilities":[{"name":"Paredo","description":"Saraivada de balas em alvo.","cost":"N/A","type":"HB"},{"name":"Tiroteio","description":"Tiros em rea ao redor.","cost":"N/A","type":"HB"},{"name":"Estragar o Velrio","description":"Tiro na cabea (morte instantnea) se camuflada.","cost":"N/A","type":"HB"},{"name":"Bora Rapaziada","description":"Buffa MOV e VEL de aliados.","cost":"N/A","type":"HB"},{"name":"Meus Capangas","description":"Invoca 2 capangas.","cost":"N/A","type":"HB"},{"name":"Dois Ferros","description":"Pode usar duas armas de fogo.","cost":"N/A","type":"Passiva"}]},{"id":"assassina","name":"Assassina","type":"Avanada","role":"Eliminadora de Alvos","description":"Lenda das sombras, elimina alvos silenciosamente.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Espreitadora","5 Habilidades Mestre em Rastreadora","+100 SOR"],"abilities":[{"name":"Lmina de Veneno","description":"Ataques causam Envenenamento.","cost":"N/A","type":"HB"},{"name":"Sombras Caminhantes","description":"Teleporte via sombras.","cost":"N/A","type":"HB"},{"name":"Tendes Frgeis","description":"Aplica Imobilizado.","cost":"N/A","type":"HB"},{"name":"Instinto Assassino","description":"Causa Medo em alvos com <20% HP.","cost":"N/A","type":"Passiva"},{"name":"Frenesi das Sombras","description":"Fria de sombra, dobra VEL.","cost":"N/A","type":"HB"},{"name":"Minha Garrucha","description":"Finaliza alvo com <15% HP.","cost":"N/A","type":"Reao"}]},{"id":"jounin","name":"Jounin","type":"Avanada","role":"Mestre Elemental / Ttico","description":"Elite ninja que domina ninjutsu avanado.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Kunoichi","+100 INT"],"abilities":[{"name":"Futon","description":"5 lminas de ar em alvos diversos.","cost":"50 MP","type":"Magia"},{"name":"Raiton","description":"5 troves em alvos diversos.","cost":"50 MP","type":"Magia"},{"name":"Katon","description":"Esfera de fogo linear larga.","cost":"50 MP","type":"Magia"},{"name":"Embuir Arma","description":"Infunde arma com elemento.","cost":"30 MP","type":"Magia"},{"name":"Invocao","description":"Invoca animal ninja (D20).","cost":"N/A","type":"HB"},{"name":"Substituio","description":"Troca com tronco ao ser alvejada.","cost":"N/A","type":"Reao"}]},{"id":"dancarina","name":"Danarina","type":"Avanada","role":"Performer Mstica","description":"Transforma o campo em palco com performances mgicas.","bonus_class":{"CAR":5},"requirements":["+50 CAR"],"abilities":[{"name":"Danar","description":"Executa performance ligada ao equipamento.","cost":"N/A","type":"HB"},{"name":"Pirueta Defensiva","description":"Chance de esquivar de ataque fsico.","cost":"N/A","type":"Reao"}]},{"id":"odalisca_de_batalha","name":"Odalisca de Batalha","type":"Avanada","role":"Suporte Supremo / DPS Elegante","description":"Danarina de elite com armas exticas e danas agressivas.","bonus_class":{"CAR":10},"requirements":["4 Performances de Danarina"],"abilities":[{"name":"Swicth","description":"Troca equipamento de dana sem gastar ao.","cost":"N/A","type":"HB"},{"name":"Mestre da Dana","description":"Equipa dois instrumentos simultneos.","cost":"N/A","type":"Passiva"}]},{"id":"cavaleira_alada","name":"Cavaleira Alada","type":"Avanada","role":"Duelista Area","description":"Elite militar do cu, mergulha com velocidade devastadora.","bonus_class":{"FOR":3,"VEL":2},"requirements":["3 Habilidades Mestre em Raptora","+30 FOR"],"abilities":[{"name":"Por Glria","description":"Buffa FOR de aliados.","cost":"N/A","type":"HB"},{"name":"Redemoinho de Lmina","description":"Corte circular de vento.","cost":"N/A","type":"HB"},{"name":"Brisa da Guerra","description":"Ataques ganham lmina de vento extra.","cost":"N/A","type":"HB"},{"name":"Slash de Vento","description":"Lmina de ar  distncia.","cost":"N/A","type":"HB"},{"name":"Suplex Aero","description":"Agarra e arremessa inimigo do cu.","cost":"N/A","type":"HB"},{"name":"Escudo Meu","description":"Pode usar escudos.","cost":"N/A","type":"Passiva"}]},{"id":"cacadora_alada","name":"Caadora Alada","type":"Avanada","role":"DPS / Rastreio","description":"Predadora do cu com viso aguada e arco.","bonus_class":{"VEL":3,"SOR":2},"requirements":["3 Habilidades Mestre em Ranged","+30 VEL"],"abilities":[{"name":"Animal Guia","description":"Invoca esprito animal companheiro.","cost":"N/A","type":"HB"},{"name":"Camuflagem","description":"Entra em camuflagem.","cost":"N/A","type":"HB"},{"name":"Saraivada Area","description":"Chuva de flechas em rea.","cost":"N/A","type":"HB"},{"name":"Colocar Armadilhas","description":"Posiciona armadilha.","cost":"N/A","type":"HB"},{"name":"Tiro Avanado","description":"Flecha colossal linear (Arco Grande).","cost":"N/A","type":"HB"},{"name":"Tiro Duplo","description":"Dispara duas flechas por ataque.","cost":"N/A","type":"Passiva"}]},{"id":"terrana","name":"Terrana","type":"Avanada","role":"Lutadora Arcana / Terra","description":"Devotada  fora bruta da terra, usa martelos e magia.","bonus_class":{"INT":3,"MANA":2},"requirements":["1 Habilidade Mestre em Raptora","1 Habilidade Mestre em Ranged","+30 INT"],"abilities":[{"name":"Me Terra","description":"Cura em rea ao bater martelo.","cost":"20 MP","type":"Magia"},{"name":"Fissura Terrana","description":"Cria fissura no solo.","cost":"30 MP","type":"Magia"},{"name":"A Terra Sobre Mim","description":"Armadura de rocha (dobra AMR/RES).","cost":"20 MP","type":"Magia"},{"name":"Pilar do Martelo","description":"Ataque  distncia com pilar.","cost":"40 MP","type":"Magia"},{"name":"Terremoto Aero","description":"Impacto ssmico ao saltar.","cost":"50 MP","type":"Magia"},{"name":"Vibrao do Solo","description":"Detecta inimigos no solo.","cost":"N/A","type":"Passiva"}]},{"id":"devastadora","name":"Devastadora","type":"Avanada","role":"Dano Areo / Linha de Frente","description":"Especialista em combate areo com espades colossais.","bonus_class":{"FOR":4,"VEL":2},"requirements":["5 Habilidades Mestre em Raptora","5 Habilidades Mestre em Cavaleira Alada","+100 FOR"],"abilities":[{"name":"Ventania do Espado","description":"Empurra alvos com vento.","cost":"N/A","type":"HB"},{"name":"Arrasante Cortante","description":"Corte em alta velocidade.","cost":"N/A","type":"HB"},{"name":"Furaco de Lminas","description":"Tornado de lminas em rea.","cost":"N/A","type":"HB"},{"name":"Rpida e Veloz","description":"Dobra VEL.","cost":"N/A","type":"HB"},{"name":"Corte da Montanha","description":"Corte colossal de vento.","cost":"N/A","type":"HB"},{"name":"Contra-ataque do Vento","description":"Rebate fsico e empurra.","cost":"N/A","type":"Reao"}]},{"id":"atiradora_dos_ceus","name":"Atiradora dos Cus","type":"Avanada","role":"DPS Area","description":"Caadora suprema que domina territrios do ar.","bonus_class":{"VEL":4,"SOR":2},"requirements":["5 Habilidades Mestre em Ranged","5 Habilidades Mestre em Caadora Alada","+100 VEL"],"abilities":[{"name":"Ataque Areo","description":"Disparo vertical preciso.","cost":"N/A","type":"HB"},{"name":"Reposicionamento Areo","description":"Voo rpido e ataque.","cost":"N/A","type":"HB"},{"name":"Bombardeio Areo","description":"Atinge inimigos no trajeto de voo.","cost":"N/A","type":"HB"},{"name":"Alvo Marcado","description":"Marca alvo adicionando SOR ao dano.","cost":"N/A","type":"HB"},{"name":"Alvos Certeiros","description":"Tiros perfeitos em 5 alvos.","cost":"N/A","type":"HB"},{"name":"Minha Flecha  Melhor","description":"Desvia de projtil e contra-ataca.","cost":"N/A","type":"Reao"}]},{"id":"geomancer","name":"Geomancer","type":"Avanada","role":"Maga Elemental / Joias","description":"Maga que desperta poder oculto de joias antigas.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Terrana","+100 INT"],"abilities":[{"name":"Ressonncia","description":"Disparo elemental da joia.","cost":"30 MP","type":"Magia"},{"name":"Jia Equipada","description":"Engata joia na arma (dano elemental).","cost":"N/A","type":"HB"},{"name":"Joia Astral","description":"Buff poderoso da joia.","cost":"30 MP","type":"Magia"},{"name":"Sacrifcio da Jia","description":"Destri joia para duplicar efeito.","cost":"40 MP","type":"Magia"},{"name":"Triplo Gen","description":"Feixe combinado de 3 joias.","cost":"70 MP","type":"Magia"},{"name":"Joalheira","description":"Troca de joias sem gastar ao.","cost":"N/A","type":"Passiva"}]},{"id":"demon","name":"Demon","type":"Avanada","role":"Ameaa / Controle","description":"Guerreiras marcadas pela morte, brutais e imprevisveis.","bonus_class":{"Livre":5},"requirements":["Voltar da morte 10 vezes"],"abilities":[{"name":"Rugido do Demnio","description":"Aplica Medo em rea.","cost":"N/A","type":"HB"},{"name":"Vampirismo","description":"Rouba HP do alvo.","cost":"N/A","type":"HB"},{"name":"Consumir Arma","description":"Destri arma para ganhar status.","cost":"N/A","type":"HB"},{"name":"Embuir Demon","description":"Infunde arma com escurido.","cost":"N/A","type":"HB"},{"name":"Demon Ark","description":"Aplica Medo/Condenao/Morte.","cost":"N/A","type":"HB"},{"name":"Mestre de Armas","description":"Equipa arma instantaneamente.","cost":"N/A","type":"Passiva"}]},{"id":"lord_demon","name":"Lord Demon","type":"Avanada","role":"Senhora da Morte","description":"pice da linhagem demonaca, comanda almas.","bonus_class":{"Livre":10},"requirements":["5 Habilidades Mestre em Demon","Colher 100 almas"],"abilities":[{"name":"Dark Esfera","description":"Absorve alma de inimigos com Medo.","cost":"N/A","type":"HB"},{"name":"Colheita","description":"Suga alma de alvo com Medo (Morte).","cost":"N/A","type":"HB"},{"name":"Aura da Lord","description":"Dobra RES e fora Medo.","cost":"N/A","type":"HB"},{"name":"Dark Arma","description":"Lana armas sacrificadas.","cost":"N/A","type":"HB"},{"name":"ltimo Rugido","description":"Medo global e morte em quem j tem.","cost":"N/A","type":"HB"},{"name":"Tenha Medo de Mim","description":"Chance de aplicar Medo ao receber dano.","cost":"N/A","type":"Reao"}]},{"id":"magos_elementais","name":"Magos Elementais","type":"Avanada","role":"DPS Mgico de rea","description":"Umbros que transformam magia em cataclismos.","bonus_class":{"INT":3,"MANA":2},"requirements":["3 Habilidades Mestre em Mago Negro","+30 INT"],"abilities":[{"name":"Fire+","description":"Exploso de fogo grande rea.","cost":"20 MP","type":"Magia"},{"name":"Blizzard+","description":"Estilhaos de gelo grande rea.","cost":"20 MP","type":"Magia"},{"name":"Thunder+","description":"Trovo colossal em rea.","cost":"20 MP","type":"Magia"},{"name":"Maremoto","description":"Onda empurra inimigos.","cost":"40 MP","type":"Magia"},{"name":"Trifsico","description":"Combina 3 elementos em exploso.","cost":"50 MP","type":"Magia"},{"name":"Manto Refletor","description":"Reflete magia com 50% dano.","cost":"N/A","type":"Reao"}]},{"id":"arcanistas","name":"Arcanistas","type":"Avanada","role":"Maldies / Invocador","description":"Preservam artes proibidas e invocam demnios.","bonus_class":{"MANA":3,"INT":2},"requirements":["3 Habilidades Mestre em Ocultista","+50 MANA"],"abilities":[{"name":"Escurido+","description":"Exploso de trevas.","cost":"25 MP","type":"Magia"},{"name":"Cruz Mana","description":"Drena Mana.","cost":"30 MP","type":"Magia"},{"name":"Sentidus Mortis","description":"Remove sentidos (Silncio/Cegueira).","cost":"40 MP","type":"Magia"},{"name":"Petrificatis","description":"Petrifica alvo.","cost":"40 MP","type":"Magia"},{"name":"Invocar Demnio Menor","description":"Invoca demnio (D20).","cost":"50 MP","type":"Magia"},{"name":"Pacto","description":"Dobra VEL e RES com demnio ativo.","cost":"N/A","type":"Passiva"}]},{"id":"malandro","name":"Malandro","type":"Avanada","role":"Suporte Social / Manipulao","description":"Usa lbia e cartas para manipular o campo.","bonus_class":{"CAR":3,"SOR":2},"requirements":["+20 CAR"],"abilities":[{"name":"Fala Positiva","description":"Dobra atributo de alvo.","cost":"N/A","type":"HB"},{"name":"Fala Negativa","description":"Reduz atributo pela metade.","cost":"N/A","type":"HB"},{"name":"Carta Voadora","description":"Carta ricocheteia em alvos.","cost":"N/A","type":"HB"},{"name":"Carta Marcada","description":"Dobra dano recebido pelo alvo.","cost":"N/A","type":"HB"},{"name":"Malabarismo de Cartas","description":"Impede movimentos em rea.","cost":"N/A","type":"HB"},{"name":"Fala Mansa","description":"Chance de convencer atacante a desistir.","cost":"N/A","type":"Reao"}]},{"id":"arquimagos","name":"Arquimagos","type":"Avanada","role":"DPS Mgico Supremo","description":"Moldam elementos, invocando meteoros e tempestades.","bonus_class":{"INT":10},"requirements":["5 Habilidades Mestre em Mago Negro","5 Habilidades Mestre em Mago Elemental","+100 INT"],"abilities":[{"name":"Meteoro","description":"Destruio massiva em rea.","cost":"100 MP","type":"Magia"},{"name":"Vrtex de Fogo","description":"Vrtex que queima rea por turnos.","cost":"50 MP","type":"Magia"},{"name":"Chuva de Raios","description":"Atinge inimigos aleatrios por turnos.","cost":"50 MP","type":"Magia"},{"name":"Nevasca Afiada","description":"Estalactites aleatrias por turnos.","cost":"50 MP","type":"Magia"},{"name":"Super Lua","description":"Lua cura aliados e permanece.","cost":"80 MP","type":"Magia"},{"name":"OVER LUNA","description":"Ignora RES sob efeito da Lua.","cost":"N/A","type":"Passiva"}]},{"id":"necromago","name":"Necromago","type":"Avanada","role":"Controle Absoluto / Necromancia","description":"Traz mortos e usa rituais profanos.","bonus_class":{"MANA":10},"requirements":["5 Habilidades Mestre em Ocultista","5 Habilidades Mestre em Arcanista","+100 INT"],"abilities":[{"name":"Necromancia","description":"Controla alma cada.","cost":"70 MP","type":"Magia"},{"name":"Mortis Dorner","description":"Tenta Morte Instantnea.","cost":"40 MP","type":"Magia"},{"name":"Redoma Sentis","description":"Cega e Silencia rea ao redor.","cost":"50 MP","type":"Magia"},{"name":"Invocar Demnio Superior","description":"Invoca demnio brutal (D20).","cost":"90 MP","type":"Magia"},{"name":"Buraco Negro","description":"Remove todos do campo.","cost":"200 MP","type":"Magia"},{"name":"Toque da Morte","description":"Chance de Condenao ao ser atacado.","cost":"N/A","type":"Reao"}]},{"id":"king_street","name":"King Street","type":"Avanada","role":"Controle Mental / Dominao Social","description":"Rei das ruas que controla vontades com a voz.","bonus_class":{"CAR":10},"requirements":["5 Habilidades Mestre em Malandro","+100 CAR"],"abilities":[{"name":"Corra!","description":"Impulsiona mobilidade de alvo.","cost":"N/A","type":"HB"},{"name":"Beleza Sedutora","description":"Encanta alvos em rea.","cost":"N/A","type":"HB"},{"name":"Ajoelhe-se","description":"Obriga inimigos a se ajoelharem.","cost":"N/A","type":"HB"},{"name":" Sua Vez de Novo","description":"Concede ao extra a aliado.","cost":"N/A","type":"HB"},{"name":"Charme do Malandro","description":"Transforma inimigo em aliado.","cost":"N/A","type":"HB"},{"name":"Estrondo Vocal","description":"Atinge todos atributos do alvo.","cost":"N/A","type":"Passiva"}]},{"id":"apostador","name":"Apostador","type":"Avanada","role":"Manipulador de Probabilidades","description":"Usa baralho especial para efeitos aleatrios poderosos.","bonus_class":{"SOR":10},"requirements":["5 Habilidades Mestre em Malandro","+100 SOR"],"abilities":[{"name":"Escolha uma Carta","description":"Puxa carta (D80) com efeito contnuo.","cost":"N/A","type":"HB"},{"name":"Valete Rpido","description":"Dobra status fsicos (Carta Valete).","cost":"N/A","type":"HB"},{"name":"Dama Salvadora","description":"Cura e remove status (Carta Dama).","cost":"N/A","type":"HB"},{"name":"Rei do Poder","description":"Exploso em rea (Carta Rei).","cost":"N/A","type":"HB"},{"name":"s da Sorte","description":"Puxa todas cartas (Carta s).","cost":"N/A","type":"HB"},{"name":"Carta na Manga","description":"Troca carta guardada instantaneamente.","cost":"N/A","type":"Passiva"}]},{"id":"shadow_hunters","name":"Shadow Hunters","type":"Avanada","role":"Invocador Sombrio","description":"Extrai sombras de mortos para lutar.","bonus_class":{"Livre":10},"requirements":["Chegar a 1 HP em batalha 100 vezes"],"abilities":[{"name":"Erga-se","description":"Extrai sombra de cadver como soldado.","cost":"N/A","type":"HB"},{"name":"Sombra Salvadora","description":"Sombra absorve dano fatal.","cost":"N/A","type":"Reao"}]},{"id":"monarca_das_sombras","name":"Monarca das Sombras","type":"Avanada","role":"Exrcito Vivo","description":"Comanda exrcito sombrio sozinho.","bonus_class":{"Livre":10},"requirements":["Possuir 4 sombras no nvel 10"],"abilities":[{"name":"Troca de Sombra","description":"Troca de lugar com sombra.","cost":"N/A","type":"HB"},{"name":"Retorno das Sombras","description":"Cura ao perder sombra.","cost":"N/A","type":"Passiva"}]}]`),OM={classes:IM},DM=()=>{const i=Ui(),e=I.useRef(null),[n,s]=I.useState("carousel"),[o,c]=I.useState(0),[d,m]=I.useState(null),[g,y]=I.useState("female"),[x,E]=I.useState(null),[N,P]=I.useState(!1),[U,L]=I.useState(""),[z,W]=I.useState(!1),J=CM.races;I.useEffect(()=>{(async()=>{if(It.currentUser)try{const D=Ze(Ne,"characters",It.currentUser.uid);(await Dd(D)).exists()&&(console.log("Personagem j existe. Redirecionando..."),i("/jogador-vtt"))}catch(D){console.error("Erro ao verificar personagem:",D)}})()},[i]),I.useEffect(()=>{const T=()=>{document.querySelectorAll("audio, video").forEach(we=>{if(!(we.tagName==="VIDEO"&&we.classList.contains("background-video")))try{we.pause(),we.currentTime=0}catch{}})};T();const D=setTimeout(T,500);return()=>clearTimeout(D)},[]),I.useEffect(()=>{if(n==="carousel"&&e.current){const D=window.innerWidth/2-130,w=o*300-D+130;e.current.scrollTo({left:w,behavior:"smooth"})}},[o,n]);const oe=T=>{e.current&&(e.current.scrollLeft+=T.deltaY*4)},se=T=>{if(!T)return"Nenhum";const D={value:"Valor",detail:"Detalhes",details:"Detalhes",free_points:"Pontos Livres",female:"Feminino",male:"Masculino",male_exiled:"Masculino (Exilado)"};return typeof T=="object"?Object.entries(T).map(([w,we],De)=>{if(w==="type")return null;const Y=D[w]||w.toUpperCase().replace(/_/g," ");let ue=we;return typeof we=="object"&&(ue=JSON.stringify(we).replace(/["{}]/g,"").replace(/:/g,": ").replace(/,/g,", ")),h.jsxs("div",{className:"mb-1",children:[h.jsxs("span",{className:"text-gray-400 font-bold",children:[Y,":"]})," ",h.jsx("span",{className:"text-gray-200",children:ue})]},De)}):T},le=()=>d?typeof d.base_classes=="object"&&!Array.isArray(d.base_classes)?d.id==="viera"?g==="female"?d.base_classes.female:d.base_classes.male||d.base_classes.male_exiled:[]:d.base_classes||[]:[],me=T=>OM.classes.find(D=>D.name===T),C=()=>{m(J[o]),E(null),s("details")},R=()=>{s("carousel"),E(null)},O=async()=>{if(!(!U.trim()||!It.currentUser||z)){W(!0);try{const T={basic_info:{character_name:U,race:d.name,level:1,experience:{current:0,max:100},guild_insignia:"",special_image:"",guild_rank_image:""},attributes:{FOR:{value:10},INT:{value:10},SOR:{value:10},CAR:{value:10},VEL:{value:10},CONS:{value:10}},status:{hp:{current:20,max:20},mp:{current:10,max:10},arm:{value:0},res:{value:0},mov:{value:3}},inventory:{gil:500,items:[]},equipment:{slots:[{},{},{},{},{},{},{}]},job_system:{primary_class:{name:x,skills:[]},secondary_class:{name:"Nenhuma",skills:[]},reaction_ability:{name:""},passive_ability:{name:""},class_bonus:{value:""}}};await kg(Ze(Ne,"characters",It.currentUser.uid),{uid:It.currentUser.uid,email:It.currentUser.email,name:U,race:d.name,class:x,gender:g,createdAt:Dn(),character_sheet:T}),console.log(`Personagem Criado: ${U}`),i("/jogador-vtt")}catch(T){console.error("Erro ao salvar personagem:",T),alert("Falha ao invocar personagem."),W(!1)}}},k=J[o];return h.jsxs("div",{className:"relative w-full h-screen overflow-hidden",children:[h.jsx("style",{children:`
        @keyframes scaleIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        .rpg-modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: rgba(0, 0, 0, 0.85); backdrop-filter: blur(8px); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .rpg-modal-box { position: relative; width: 500px; max-width: 90%; background: #1a120b; border: 2px solid #b45309; box-shadow: 0 0 50px rgba(234, 179, 8, 0.4); padding: 6px; border-radius: 8px; animation: scaleIn 0.3s ease-out forwards; }
        .rpg-modal-inner { background: linear-gradient(to bottom, #f3e6d5, #e7cba8); border: 1px solid #78350f; padding: 40px 20px; border-radius: 4px; text-align: center; display: flex; flex-direction: column; align-items: center; gap: 20px; }
        .rpg-modal-title { font-family: 'Cinzel', serif; font-size: 32px; color: #78350f; font-weight: bold; text-transform: uppercase; text-shadow: 0px 1px 0px rgba(255,255,255,0.6); margin-bottom: 5px; }
        .rpg-modal-subtitle { font-family: 'Cinzel', serif; font-size: 14px; color: #92400e; font-style: italic; border-top: 1px solid rgba(146, 64, 14, 0.3); padding-top: 10px; width: 100%; }
        .rpg-input { width: 100%; padding: 12px; background: #fff8ed; border: 2px solid #854d0e; font-family: 'Cinzel', serif; font-size: 18px; color: #451a03; outline: none; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); border-radius: 4px; }
        .rpg-input:focus { border-color: #d97706; background: #ffffff; }
        .rpg-btn-go { background: linear-gradient(to bottom, #fcd34d, #d97706); border: 1px solid #92400e; padding: 10px 30px; font-family: 'Cinzel', serif; font-weight: bold; font-size: 18px; color: #451a03; text-transform: uppercase; cursor: pointer; border-radius: 4px; box-shadow: 0 4px 0 #92400e; transition: transform 0.1s; }
        .rpg-btn-go:active { transform: translateY(4px); box-shadow: 0 0 0 #92400e; }
        .rpg-btn-go:disabled { filter: grayscale(1); opacity: 0.6; cursor: not-allowed; }
        .rpg-close-btn { position: absolute; top: 10px; right: 15px; background: none; border: none; font-size: 20px; color: #92400e; cursor: pointer; font-weight: bold; }
        .rpg-close-btn:hover { color: #ff0000; }
        .corner { position: absolute; width: 20px; height: 20px; border-color: #fcd34d; border-style: solid; }
        .tl { top: -2px; left: -2px; border-width: 3px 0 0 3px; }
        .tr { top: -2px; right: -2px; border-width: 3px 3px 0 0; }
        .bl { bottom: -2px; left: -2px; border-width: 0 0 3px 3px; }
        .br { bottom: -2px; right: -2px; border-width: 0 3px 3px 0; }
      `}),h.jsxs("div",{className:"ether-container",children:[h.jsx("div",{className:"ether-vortex"}),h.jsx("div",{className:"ether-particles"})]}),h.jsxs("header",{className:"absolute top-0 w-full p-6 z-50 flex justify-between items-center bg-gradient-to-b from-black/90 to-transparent",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"rpg-title text-3xl",children:"Gnese da Alma"}),h.jsx("p",{className:"rpg-subtitle-styled mt-2",children:n==="carousel"?"Determine sua Linhagem Ancestral":`${d?.name} // Customizao`})]}),n==="details"&&h.jsxs("button",{onClick:R,className:"nav-back-btn",children:[h.jsx("span",{children:""})," Seleo"]})]}),n==="carousel"&&h.jsxs("div",{className:"w-full h-full flex flex-col justify-center animate-[fadeIn_1s]",children:[h.jsx("div",{className:"text-center mb-4 z-10",children:h.jsx("h2",{className:"rpg-title text-5xl text-yellow-500 drop-shadow-lg",children:k.name})}),h.jsx("div",{ref:e,onWheel:oe,className:"carousel-viewport",children:J.map((T,D)=>h.jsxs("div",{onClick:()=>c(D),className:`race-card-frame ${D===o?"active":""}`,children:[h.jsx("img",{src:T.image,alt:T.name}),h.jsx("div",{className:"card-label",children:T.name})]},T.id))}),h.jsx("div",{className:"text-center mt-10 z-10",children:h.jsxs("button",{onClick:C,className:"confirm-btn w-64 mx-auto",children:["Escolher ",k.name]})})]}),n==="details"&&d&&h.jsxs("div",{className:"details-grid",children:[h.jsx("div",{className:"char-portrait-container",children:h.jsx("img",{src:d.image,alt:d.name,className:"char-portrait"})}),h.jsxs("div",{className:"info-scroll-area custom-scrollbar",children:[h.jsxs("div",{className:"glass-panel mt-8 border-l-4 border-yellow-600",children:[h.jsx("h3",{className:"section-header !border-none !mb-2 text-yellow-500",children:"Descrio"}),h.jsxs("p",{className:"description-text",children:['"',d.description,'"']}),h.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-[10px] uppercase text-blue-400 font-bold",children:"Caractersticas"}),h.jsx("p",{className:"text-xs text-gray-400 mt-1",children:d.characteristics})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[10px] uppercase text-green-400 font-bold",children:"Bnus Racial"}),h.jsx("div",{className:"text-xs text-gray-300 font-mono mt-1",children:se(d.racial_bonus)})]})]})]}),h.jsxs("div",{className:"glass-panel flex flex-col gap-2",children:[h.jsx("span",{className:"text-xs text-gray-400 uppercase font-bold tracking-widest",children:"Gnero"}),h.jsxs("div",{className:"flex w-full",children:[h.jsx("div",{onClick:()=>{y("female"),E(null)},className:`gender-option ${g==="female"?"active":""}`,children:"Feminino"}),h.jsx("div",{onClick:()=>{y("male"),E(null)},className:`gender-option ${g==="male"?"active":""}`,children:"Masculino"})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"rpg-title text-xl mb-4 text-white",children:"Vocao"}),h.jsx("div",{className:"class-selector-grid",children:le().map(T=>{const D=me(T);return h.jsxs("div",{onClick:()=>E(T),className:`class-btn ${x===T?"selected":""}`,children:[h.jsx("span",{className:"class-btn-title",children:T}),h.jsx("span",{className:"class-btn-role",children:D?.role||"Bsico"})]},T)})}),x&&(()=>{const T=me(x);return T?h.jsxs("div",{className:"class-detail-container",children:[h.jsxs("div",{className:"cd-header",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"cd-title rpg-title",children:T.name}),h.jsxs("div",{className:"cd-meta text-blue-400",children:[T.type," // ",T.role]})]}),h.jsxs("div",{className:"cd-req",children:[h.jsx("span",{className:"cd-req-label",children:"Requisitos"}),h.jsx("div",{className:"cd-req-val",children:T.requirements?.length?T.requirements.join(", "):"Nenhum"})]})]}),h.jsxs("div",{className:"cd-desc",children:['"',T.description,'"']}),h.jsxs("div",{className:"cd-bonus-box",children:[h.jsx("span",{className:"text-xs uppercase font-bold text-blue-300",children:"Bnus de Classe"}),h.jsx("span",{className:"font-mono text-sm text-white",children:se(T.bonus_class)})]}),h.jsxs("div",{children:[h.jsx("h5",{className:"text-xs uppercase text-yellow-500 font-bold mb-3 tracking-wider border-b border-white/10 pb-1 inline-block",children:"Habilidades Iniciais"}),h.jsx("div",{className:"cd-abilities-grid",children:T.abilities?.map((D,w)=>h.jsxs("div",{className:"cd-ability-card",children:[h.jsxs("div",{className:"cd-ab-header",children:[h.jsx("span",{className:"cd-ab-name",children:D.name}),h.jsx("span",{className:"cd-ab-cost",children:D.cost})]}),h.jsx("p",{className:"cd-ab-desc",children:D.description})]},w))})]})]}):h.jsx("div",{className:"p-4 text-center",children:"Carregando..."})})()]}),h.jsx("div",{className:"mt-8 mb-10",children:h.jsx("button",{disabled:!x,onClick:()=>P(!0),className:"confirm-btn",children:x?"Finalizar Criao":"Selecione uma Vocao"})})]})]}),N&&h.jsx("div",{className:"rpg-modal-overlay",children:h.jsxs("div",{className:"rpg-modal-box",children:[h.jsx("div",{className:"corner tl"}),h.jsx("div",{className:"corner tr"}),h.jsx("div",{className:"corner bl"}),h.jsx("div",{className:"corner br"}),h.jsxs("div",{className:"rpg-modal-inner",children:[h.jsxs("div",{className:"w-full",children:[h.jsx("h3",{className:"rpg-modal-title",children:"Identidade"}),h.jsx("p",{className:"rpg-modal-subtitle",children:"Como a histria o conhecer?"})]}),h.jsxs("div",{className:"w-full flex gap-2",children:[h.jsx("input",{type:"text",value:U,onChange:T=>L(T.target.value),placeholder:"Nome do Aventureiro",className:"rpg-input",autoFocus:!0}),h.jsx("button",{onClick:O,disabled:!U.trim()||z,className:"rpg-btn-go",children:z?"...":"GO"})]}),h.jsx("button",{className:"rpg-close-btn",onClick:()=>P(!1),children:""})]})]})})]})},MM="/FF-12Liberation/assets/fundo-jogador-nsWQkznx.jpg",kM="/FF-12Liberation/assets/level-up-BOEM_DXL.mp3";function o1({sessaoData:i,isMaster:e,showManager:n,onCloseManager:s}){const[o,c]=I.useState(null),[d,m]=I.useState(!1),[g,y]=I.useState([]),[x,E]=I.useState(""),[N,P]=I.useState(null),[U,L]=I.useState(i?.grid_cols||25),[z,W]=I.useState(0),[J,oe]=I.useState(null),[se,le]=I.useState("cursor"),[me,C]=I.useState(!1),[R,O]=I.useState(null),[k,T]=I.useState(null),D=I.useRef(null),w=I.useRef(null);I.useEffect(()=>{if(i&&(c(i.active_map||null),i.grid_cols&&i.grid_cols!==U&&L(i.grid_cols),e)){const ce=i.cenarios||[],be=i.saved_maps||[],Pe=ce.map((fe,ft)=>{const ot=be.find(lt=>lt.url===fe);return ot||{id:`temp_${ft}`,name:`Mapa Importado ${ft+1}`,url:fe,isTemp:!0}});y(Pe)}},[i,e]);const we=ce=>{const{naturalWidth:be,naturalHeight:Pe}=ce.target;oe(be/Pe),De()},De=()=>{if(D.current){const ce=D.current.offsetWidth;if(U>0){const be=ce/U;W(be)}}};I.useEffect(()=>(De(),window.addEventListener("resize",De),()=>window.removeEventListener("resize",De)),[o,U]);const Y=async ce=>{if(!e)return;const be=Math.max(1,Math.min(100,Number(ce)));L(be);try{const Pe=Ze(Ne,"sessoes",i.id);await Ot(Pe,{grid_cols:be})}catch(Pe){console.error("Erro ao salvar grid:",Pe)}},ue=(ce,be)=>{if(!z)return{x:ce,y:be};const Pe=Math.round(ce/z),fe=Math.round(be/z);return{x:Pe*z,y:fe*z}},Ee=ce=>{if(!D.current)return{x:0,y:0};const be=D.current.getBoundingClientRect();return{x:ce.clientX-be.left,y:ce.clientY-be.top}},je=ce=>{if(se==="ruler"||ce.button===2){ce.preventDefault(),C(!0);const be=Ee(ce),Pe=ue(be.x-z/2,be.y-z/2),fe={x:Pe.x+z/2,y:Pe.y+z/2};O(fe),T(be)}},Fe=ce=>{me&&T(Ee(ce))},j=()=>{C(!1),O(null),T(null)},Z=()=>{if(!R||!k||!z)return"0m";const ce=Math.abs(R.x-k.x),be=Math.abs(R.y-k.y),fe=Math.sqrt(ce*ce+be*be)/z;return`${(fe*1.5).toFixed(1)}m (${fe.toFixed(1)} qd)`},ae=async ce=>{const be={id:ce.id.toString().startsWith("temp")?Date.now().toString():ce.id,name:x||ce.name,url:ce.url},Pe=Ze(Ne,"sessoes",i.id);ce.isTemp||await Ot(Pe,{saved_maps:Ig(ce)}),await Ot(Pe,{saved_maps:Am(be)}),P(null),E("")},de=async ce=>{const be=Ze(Ne,"sessoes",i.id);await Ot(be,{active_map:ce}),s&&s(),m(!1)},ye=async()=>{if(!window.confirm("Fechar o mapa para todos?"))return;const ce=Ze(Ne,"sessoes",i.id);await Ot(ce,{active_map:null})};return!o&&!e&&!n?null:h.jsxs(h.Fragment,{children:[o&&h.jsxs("div",{className:`tabletop-wrapper ${d?"minimized":""}`,children:[h.jsxs("div",{className:"tt-header",children:[h.jsxs("span",{className:"tt-title",children:[" ",o.name]}),!d&&h.jsxs("div",{className:"tt-toolbar",children:[h.jsx("button",{className:`tool-btn ${se==="cursor"?"active":""}`,onClick:()=>le("cursor"),title:"Mover",children:""}),h.jsx("button",{className:`tool-btn ${se==="ruler"?"active":""}`,onClick:()=>le("ruler"),title:"Rgua",children:""}),e&&h.jsxs("div",{className:"grid-control-box",children:[h.jsx("span",{className:"grid-label",children:"GRID"}),h.jsxs("div",{className:"grid-input-wrapper",children:[h.jsx("button",{className:"grid-btn-mini",onClick:()=>Y(U-1),children:"-"}),h.jsx("input",{type:"number",className:"grid-number-display",value:U,onChange:ce=>Y(ce.target.value),title:"Tamanho do Grid"}),h.jsx("button",{className:"grid-btn-mini",onClick:()=>Y(U+1),children:"+"})]})]})]}),h.jsxs("div",{className:"tt-controls",children:[h.jsx("button",{onClick:()=>m(!d),children:d?"":""}),e&&h.jsx("button",{className:"close-x",onClick:ye,children:""})]})]}),!d&&h.jsx("div",{className:"tt-viewport",children:h.jsxs("div",{className:"map-layer-container",ref:D,onMouseDown:je,onMouseMove:Fe,onMouseUp:j,onContextMenu:ce=>ce.preventDefault(),style:{cursor:se==="ruler"?"crosshair":"default"},children:[h.jsx("img",{ref:w,src:o.url,alt:"Map",className:"map-img-element",onLoad:we}),z>0&&h.jsx("div",{className:"grid-layer",style:{backgroundSize:`${z}px ${z}px`,backgroundImage:`
                                        linear-gradient(to right, rgba(255,255,255,0.2) 1px, transparent 1px),
                                        linear-gradient(to bottom, rgba(255,255,255,0.2) 1px, transparent 1px)
                                    `}}),h.jsx("div",{className:"tokens-layer"}),me&&R&&k&&h.jsxs("div",{className:"ruler-overlay",children:[h.jsxs("svg",{width:"100%",height:"100%",children:[h.jsx("line",{x1:R.x,y1:R.y,x2:k.x,y2:k.y,stroke:"#ffcc00",strokeWidth:"3",strokeDasharray:"10,5",filter:"drop-shadow(0px 0px 2px black)"}),h.jsx("circle",{cx:R.x,cy:R.y,r:"4",fill:"#ffcc00",stroke:"black"}),h.jsx("circle",{cx:k.x,cy:k.y,r:"4",fill:"#ffcc00",stroke:"black"})]}),h.jsx("div",{className:"ruler-tag",style:{left:k.x+15,top:k.y+15},children:Z()})]})]})})]}),e&&n&&h.jsx("div",{className:"manager-overlay",onClick:s,children:h.jsxs("div",{className:"manager-box",onClick:ce=>ce.stopPropagation(),children:[h.jsx("h3",{className:"manager-title",children:"SALA DE CARTOGRAFIA"}),h.jsxs("div",{className:"manager-list",children:[g.length===0&&h.jsx("p",{className:"empty-msg",children:"Nenhum mapa importado."}),g.map((ce,be)=>h.jsxs("div",{className:"manager-item",children:[h.jsx("img",{src:ce.url,className:"thumb-preview",alt:"thumb"}),N===ce.id?h.jsx("input",{className:"manager-name-input",value:x,onChange:Pe=>E(Pe.target.value),placeholder:"Nome",autoFocus:!0}):h.jsx("span",{className:"map-name-span",children:ce.name}),N===ce.id?h.jsx("button",{className:"btn-action-sm btn-save-name",onClick:()=>ae(ce),children:"SALVAR"}):h.jsx("button",{className:"btn-action-sm",onClick:()=>{P(ce.id),E(ce.name)},children:"RENOMEAR"}),h.jsx("button",{className:"btn-action-sm btn-activate",onClick:()=>de(ce),children:"ABRIR"})]},be))]}),h.jsx("button",{className:"btn-cancelar-main",onClick:s,children:"FECHAR"})]})}),h.jsx("style",{children:`
            /* ESTILOS GERAIS */
            .tabletop-wrapper { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90vw; height: 85vh; background: #0b0b0b; border: 2px solid #ffcc00; z-index: 1000; display: flex; flex-direction: column; box-shadow: 0 0 100px rgba(0,0,0,0.9); border-radius: 8px; transition: all 0.3s; }
            .tabletop-wrapper.minimized { width: 400px; height: 45px; top: 96%; left: 50%; border-color: #444; border-radius: 10px 10px 0 0; }
            .tt-header { height: 45px; background: #1a1a1a; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; padding: 0 15px; flex-shrink: 0; }
            .tt-title { color: #ffcc00; font-weight: bold; letter-spacing: 1px; font-size: 14px; }
            .tt-toolbar { display: flex; gap: 15px; align-items: center; background: #000; padding: 4px 15px; border-radius: 20px; border: 1px solid #333; }
            .tool-btn { background: none; border: none; font-size: 18px; cursor: pointer; padding: 2px 5px; opacity: 0.5; transition: 0.2s; }
            .tool-btn:hover { opacity: 1; transform: scale(1.1); }
            .tool-btn.active { opacity: 1; text-shadow: 0 0 10px #fff; border-bottom: 2px solid #00f2ff; }
            .tt-controls button { background: none; border: none; color: #aaa; cursor: pointer; font-size: 16px; margin-left: 10px; }
            .tt-controls button:hover { color: #fff; }
            .close-x { color: #f44 !important; }
            .tt-viewport { flex: 1; background: #050505; overflow: auto; display: flex; align-items: center; justify-content: center; position: relative; }
            
            /* --- NOVO ESTILO DO GRID CONTROL --- */
            .grid-control-box { display: flex; align-items: center; gap: 8px; border-left: 1px solid #444; padding-left: 12px; margin-left: 5px; }
            .grid-label { font-size: 10px; color: #888; font-weight: bold; letter-spacing: 1px; }
            .grid-input-wrapper { display: flex; align-items: center; background: #222; border: 1px solid #444; border-radius: 4px; overflow: hidden; }
            .grid-btn-mini { background: #333; color: #fff; border: none; width: 20px; height: 22px; cursor: pointer; font-size: 14px; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
            .grid-btn-mini:hover { background: #00f2ff; color: #000; }
            .grid-number-display { 
                width: 30px; 
                background: #222; 
                border: none; 
                color: #ffcc00; 
                text-align: center; 
                font-size: 12px; 
                font-weight: bold; 
                outline: none; 
                -moz-appearance: textfield; /* Remove setas no Firefox */
            }
            /* Remove setas nativas do Chrome/Safari/Edge */
            .grid-number-display::-webkit-outer-spin-button,
            .grid-number-display::-webkit-inner-spin-button {
                -webkit-appearance: none;
                margin: 0;
            }

            /* MAPA LAYERS */
            .map-layer-container { position: relative; box-shadow: 0 0 30px #000; user-select: none; }
            .map-img-element { display: block; max-width: 100%; max-height: 80vh; object-fit: contain; pointer-events: none; }
            .grid-layer, .tokens-layer, .ruler-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
            .grid-layer { pointer-events: none; z-index: 2; opacity: 0.6; }
            .tokens-layer { z-index: 5; }
            .ruler-overlay { z-index: 10; pointer-events: none; }
            .ruler-tag { position: absolute; background: rgba(0,0,0,0.9); color: #ffcc00; border: 1px solid #ffcc00; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; pointer-events: none; z-index: 20; }

            /* MANAGER MODAL */
            .manager-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index: 10000; display:flex; align-items:center; justify-content:center; }
            .manager-box { width: 700px; max-height: 85vh; background: #080808; border: 2px solid #00f2ff; padding: 25px; display:flex; flex-direction:column; border-radius: 8px; box-shadow: 0 0 50px rgba(0, 242, 255, 0.1); }
            .manager-title { color: #00f2ff; border-bottom: 1px solid #00f2ff; padding-bottom: 15px; margin: 0; letter-spacing: 2px; }
            .manager-list { overflow-y: auto; flex: 1; margin-top: 20px; border: 1px solid #333; background: #000; }
            .manager-item { display: flex; align-items: center; padding: 15px; border-bottom: 1px solid #333; gap: 15px; transition: 0.2s; }
            .manager-item:hover { background: rgba(0, 242, 255, 0.05); }
            .thumb-preview { width: 80px; height: 50px; object-fit: cover; border: 1px solid #555; border-radius: 4px; }
            .manager-name-input { flex: 1; background: #111; border: 1px solid #444; color: #fff; padding: 8px; outline: none; border-radius: 4px; }
            .manager-name-input:focus { border-color: #ffcc00; }
            .map-name-span { flex: 1; color: #fff; font-size: 14px; }
            .empty-msg { color: #666; padding: 20px; text-align: center; }
            .btn-action-sm { padding: 8px 15px; font-size: 11px; cursor: pointer; border: 1px solid #555; background: transparent; color: #ccc; border-radius: 4px; font-weight: bold; transition: 0.2s; }
            .btn-action-sm:hover { border-color: #fff; color: #fff; }
            .btn-activate { border-color: #00f2ff; color: #00f2ff; margin-left: 10px; }
            .btn-activate:hover { background: #00f2ff; color: #000; box-shadow: 0 0 15px #00f2ff; }
            .btn-save-name { color: #0f0; border-color: #0f0; }
            .btn-save-name:hover { background: #0f0; color: #000; }
            .btn-cancelar-main { width: 100%; background: #000; color: #fff; border: 1px solid #fff; padding: 14px; cursor: pointer; text-align: center; font-size: 14px; text-transform: uppercase; margin-top: 20px; transition: 0.3s; }
            .btn-cancelar-main:hover { background: #fff; color: #000; }
        `})]})}const jM=[{type:"d4",sides:4,label:"D4"},{type:"d6",sides:6,label:"D6"},{type:"d8",sides:8,label:"D8"},{type:"d10",sides:10,label:"D10"},{type:"d12",sides:12,label:"D12"},{type:"d20",sides:20,label:"D20"},{type:"d100",sides:100,label:"D100"}],l1=({sessaoId:i,playerName:e,onClose:n})=>{const[s,o]=I.useState({d4:0,d6:0,d8:0,d10:0,d12:0,d20:0,d100:0}),[c,d]=I.useState(""),[m,g]=I.useState(!1),y=(E,N)=>{o(P=>({...P,[E]:Math.max(0,P[E]+N)}))},x=async()=>{if(Object.values(s).reduce((W,J)=>W+J,0)===0)return alert("Selecione pelo menos um dado!");g(!0),n();let N=0,P=[];Object.keys(s).forEach(W=>{const J=s[W],oe=parseInt(W.substring(1));for(let se=0;se<J;se++){const le=Math.floor(Math.random()*oe)+1;N+=le,P.push({die:W,value:le})}});let U=0;if(c){const W=c.replace(/\s/g,"");U=parseInt(W),isNaN(U)&&(U=0)}const L=N+U,z={playerName:e,rolls:P,modifier:U,total:L,timestamp:Date.now()};try{const W=Ze(Ne,"sessoes",i);await Ot(W,{latest_roll:z})}catch(W){console.error("Erro ao rolar dados:",W)}};return h.jsxs("div",{className:"dice-modal-overlay",children:[h.jsxs("div",{className:"dice-selector-box",children:[h.jsxs("div",{className:"ds-header",children:[h.jsx("h3",{children:"CAIXA DE DADOS"}),h.jsx("button",{className:"ds-close-btn",onClick:n,children:""})]}),h.jsx("div",{className:"ds-grid",children:jM.map(E=>h.jsxs("div",{className:"die-control",children:[h.jsx("span",{className:"die-label",children:E.label}),h.jsxs("div",{className:"die-actions",children:[h.jsx("button",{onClick:()=>y(E.type,-1),children:"-"}),h.jsx("span",{className:`die-count ${s[E.type]>0?"active":""}`,children:s[E.type]}),h.jsx("button",{onClick:()=>y(E.type,1),children:"+"})]})]},E.type))}),h.jsxs("div",{className:"ds-footer",children:[h.jsxs("div",{className:"mod-input-group",children:[h.jsx("label",{children:"MODIFICADOR"}),h.jsx("input",{type:"text",placeholder:"+0",value:c,onChange:E=>d(E.target.value)})]}),h.jsx("button",{className:"btn-roll-final",onClick:x,disabled:m,children:m?"...":"ROLAR DADOS"})]})]}),h.jsx("style",{children:`
         .dice-modal-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.6); z-index: 20000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(2px); }
         /* AUMENTADO A LARGURA PARA 400px PARA CABER O BOTO */
         .dice-selector-box { background: #0d0d15; border: 2px solid #ffcc00; padding: 25px; border-radius: 8px; width: 400px; box-shadow: 0 0 30px rgba(255, 204, 0, 0.2); box-sizing: border-box; }
         .ds-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px; }
         .ds-header h3 { margin: 0; color: #ffcc00; font-family: 'Cinzel', serif; }
         .ds-close-btn { background: none; border: none; color: #fff; font-size: 20px; cursor: pointer; }
         
         .ds-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 25px; }
         .die-control { background: rgba(255,255,255,0.05); padding: 8px 12px; border-radius: 4px; display: flex; justify-content: space-between; align-items: center; }
         .die-label { color: #00f2ff; font-weight: bold; font-family: sans-serif; font-size: 14px; }
         .die-actions { display: flex; align-items: center; gap: 8px; }
         .die-actions button { background: #333; border: 1px solid #555; color: #fff; width: 24px; height: 24px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; justify-content: center; }
         .die-actions button:hover { background: #ffcc00; color: #000; border-color: #ffcc00; }
         .die-count { width: 20px; text-align: center; font-weight: bold; color: #555; }
         .die-count.active { color: #fff; text-shadow: 0 0 5px #fff; }

         /* AJUSTE DO FOOTER PARA O BOTO NO SAIR */
         .ds-footer { display: flex; gap: 15px; align-items: flex-end; width: 100%; }
         .mod-input-group { width: 100px; display: flex; flex-direction: column; }
         .mod-input-group label { font-size: 10px; color: #aaa; margin-bottom: 4px; font-weight: bold; }
         .mod-input-group input { width: 100%; background: #000; border: 1px solid #444; color: #fff; padding: 10px; border-radius: 4px; text-align: center; font-weight: bold; font-size: 16px; outline: none; box-sizing: border-box; }
         .mod-input-group input:focus { border-color: #ffcc00; }
         
         .btn-roll-final { flex: 1; background: linear-gradient(45deg, #ffcc00, #d4a000); border: none; padding: 0 20px; color: #000; font-weight: bold; border-radius: 4px; cursor: pointer; font-family: 'Cinzel', serif; font-size: 16px; height: 44px; display: flex; align-items: center; justify-content: center; white-space: nowrap; }
         .btn-roll-final:hover { filter: brightness(1.2); box-shadow: 0 0 15px #ffcc00; }
         .btn-roll-final:disabled { opacity: 0.5; cursor: not-allowed; }
       `})]})},c1=({rollData:i,onClose:e})=>i?h.jsxs("div",{className:"dice-result-overlay",children:[h.jsxs("div",{className:"dice-result-content fade-in-scale",children:[h.jsxs("div",{className:"dr-title",children:[h.jsx("span",{className:"dr-player-name",children:i.playerName}),h.jsx("span",{className:"dr-action",children:"ROLOU OS DADOS"})]}),h.jsx("div",{className:"dr-dice-list",children:i.rolls.map((n,s)=>h.jsxs("div",{className:`dr-die die-${n.die}`,children:[h.jsx("span",{className:"die-icon-bg",children:""}),h.jsx("span",{className:"die-val",children:n.value}),h.jsx("span",{className:"die-type",children:n.die})]},s))}),h.jsxs("div",{className:"dr-calculation",children:[h.jsxs("span",{className:"calc-label",children:["SOMA: ",i.rolls.reduce((n,s)=>n+s.value,0)]}),h.jsxs("span",{className:"calc-mod",children:["MOD: ",i.modifier>=0?`+${i.modifier}`:i.modifier]})]}),h.jsxs("div",{className:"dr-total",children:[h.jsx("span",{className:"total-label",children:"RESULTADO"}),h.jsx("span",{className:"total-value",children:i.total})]}),h.jsx("button",{className:"dr-close-btn",onClick:e,children:"FECHAR"})]}),h.jsx("style",{children:`
         .dice-result-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 19000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
         .dice-result-content { text-align: center; color: #fff; max-width: 80%; }
         .fade-in-scale { animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
         @keyframes popIn { 0% { opacity: 0; transform: scale(0.5); } 100% { opacity: 1; transform: scale(1); } }
         
         .dr-title { margin-bottom: 30px; }
         .dr-player-name { display: block; font-size: 32px; color: #ffcc00; font-family: 'Cinzel', serif; font-weight: bold; text-shadow: 0 0 10px #ffcc00; }
         .dr-action { font-size: 14px; color: #aaa; letter-spacing: 2px; }

         .dr-dice-list { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-bottom: 30px; }
         .dr-die { position: relative; width: 80px; height: 80px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
         .die-icon-bg { font-size: 80px; position: absolute; color: rgba(255,255,255,0.1); z-index: 0; }
         .die-val { font-size: 36px; font-weight: bold; color: #fff; z-index: 1; text-shadow: 0 2px 4px #000; }
         .die-type { font-size: 12px; color: #00f2ff; z-index: 1; margin-top: -5px; text-transform: uppercase; font-weight: bold; }
         
         .die-d20 .die-val { color: #ffcc00; } /* Destaque pro D20 */

         .dr-calculation { font-family: monospace; color: #aaa; font-size: 18px; margin-bottom: 10px; display: flex; gap: 20px; justify-content: center; }
         
         .dr-total { margin-bottom: 30px; background: linear-gradient(90deg, transparent, rgba(255,204,0,0.2), transparent); padding: 10px; }
         .total-label { display: block; font-size: 14px; color: #ffcc00; letter-spacing: 3px; margin-bottom: 5px; }
         .total-value { font-size: 64px; font-weight: bold; color: #fff; line-height: 1; text-shadow: 0 0 20px #ffcc00; }

         .dr-close-btn { background: transparent; border: 2px solid #555; color: #aaa; padding: 10px 40px; cursor: pointer; border-radius: 30px; font-weight: bold; transition: 0.3s; pointer-events: auto; }
         .dr-close-btn:hover { border-color: #ffcc00; color: #ffcc00; background: rgba(255,255,255,0.1); }
       `})]}):null,PM=({targetDate:i,onComplete:e})=>{const[n,s]=I.useState("");return I.useEffect(()=>{const o=setInterval(()=>{const c=new Date().getTime(),d=new Date(i).getTime()-c;if(d<0)clearInterval(o),e&&e(),s("AGORA");else{const m=Math.floor(d/864e5),g=Math.floor(d%(1e3*60*60*24)/(1e3*60*60)),y=Math.floor(d%(1e3*60*60)/(1e3*60)),x=Math.floor(d%(1e3*60)/1e3);s(`${m}d ${g}h ${y}m ${x}s`)}},1e3);return()=>clearInterval(o)},[i,e]),h.jsx("span",{className:"countdown-text",children:n})};function VM(){const i=Ui(),[e,n]=I.useState(null),[s,o]=I.useState(!0),[c,d]=I.useState([]),[m,g]=I.useState([]),[y,x]=I.useState([]),[E,N]=I.useState(!1),[P,U]=I.useState(!1),[L,z]=I.useState(null),[W,J]=I.useState([]),[oe,se]=I.useState(!1),[le,me]=I.useState(null),[C,R]=I.useState(null),[O,k]=I.useState(null),[T,D]=I.useState(!1),[w,we]=I.useState(!1),[De,Y]=I.useState(null),ue=I.useRef(0),[Ee,je]=I.useState(0),[Fe,j]=I.useState(!1),Z=I.useRef(null),ae=I.useRef(new Audio(kM));I.useEffect(()=>{ae.current.volume=.2},[]),I.useEffect(()=>{let fe=()=>{},ft=()=>{};const ot=rf(It,lt=>{if(lt){const Q=Ze(Ne,"characters",lt.uid);fe=kn(Q,pe=>{if(pe.exists()){const Ae=pe.data(),Re=Ae.character_sheet?.basic_info?.level||1;Z.current!==null&&Re>Z.current&&(j(!0),ae.current.currentTime=0,ae.current.play().catch(Le=>console.log("Autoplay bloqueado:",Le))),Z.current=Re,n(Ae),o(!1)}else o(!1)});const _e=Mn(Lt(Ne,"missoes"));ft=kn(_e,pe=>{d(pe.docs.map(Ae=>({id:Ae.id,...Ae.data()})))})}else o(!1),i("/login")});return()=>{ot(),fe(),ft()}},[i]),I.useEffect(()=>{if(!e)return;const fe=Mn(Lt(Ne,"sessoes"),wa("participantes","array-contains",e.name)),ft=kn(fe,Q=>{const _e=new Date,pe=Q.docs.map(Le=>({id:Le.id,...Le.data()})),Ae=[],Re=[];if(pe.forEach(Le=>{const Ge=new Date(Le.dataInicio),H=new Date(Le.expiraEm);_e>=Ge&&_e<=H?Ae.push(Le):_e<Ge&&Re.push(Le)}),g(Ae),x(Re),O){const Le=Ae.find(Ge=>Ge.id===O.id);if(Le){if(k(Le),Le.latest_roll){const H=Le.latest_roll;H.timestamp>ue.current&&Y(Se=>!Se||Se.timestamp!==H.timestamp?H:Se)}const Ge=Le.connected_players?.includes(It.currentUser?.uid);R(Ge?"connected":"waiting")}}}),ot=Mn(Lt(Ne,"resenhas"),wa("destinatarios","array-contains",e.name)),lt=kn(ot,Q=>{const _e=Q.docs.map(Ge=>({id:Ge.id,...Ge.data()})),pe=new Date,Ae=_e.filter(Ge=>new Date(Ge.expiraEm)>pe);J(Ae);const Re=parseInt(localStorage.getItem("sanchez_last_read_count")||"0"),Le=Ae.length;Le>Re?je(Le-Re):je(0)});return()=>{ft(),lt()}},[e,O?.id]),I.useEffect(()=>{if(!O||!It.currentUser)return;const fe=Ze(Ne,"sessoes",O.id),ft=It.currentUser.uid;Ot(fe,{connected_players:Am(ft)}).catch(lt=>console.error("Erro ao conectar:",lt));const ot=()=>{};return window.addEventListener("beforeunload",ot),()=>{window.removeEventListener("beforeunload",ot),Ot(fe,{connected_players:Ig(ft)}).catch(lt=>console.error("Erro ao desconectar:",lt))}},[O?.id]);const de=()=>{j(!1),ae.current.pause(),ae.current.currentTime=0},ye=async fe=>{if(!e)return;if(fe.candidatos?.some(Q=>Q.uid===It.currentUser.uid))return alert("Voc j se candidatou para esta misso!");const ot=!fe.candidatos||fe.candidatos.length===0,lt={uid:It.currentUser.uid,nome:e.name,classe:e.class,isLeader:ot,dataCandidatura:new Date().toISOString()};try{const Q=Ze(Ne,"missoes",fe.id);await Ot(Q,{candidatos:Am(lt)}),alert(ot?"Voc se candidatou e foi marcado como LDER DO GRUPO!":"Candidatura realizada com sucesso!")}catch(Q){console.error("Erro ao candidatar:",Q),alert("Falha ao enviar candidatura.")}},ce=fe=>{k(fe),N(!0);const ft=new Date,ot=new Date(fe.dataInicio);ft>=ot?R("connected"):R("waiting")},be=()=>{se(!0),localStorage.setItem("sanchez_last_read_count",W.length.toString()),je(0)};if(s)return h.jsx("div",{className:"loading-screen",children:h.jsx("img",{src:Cf,width:"100"})});if(!e)return h.jsx("div",{className:"loading-screen",children:"Nenhum personagem encontrado."});const Pe=e.character_sheet?.basic_info?.level||1;return h.jsxs("div",{className:"jogador-container",children:[h.jsx("div",{className:"background-layer",style:{backgroundImage:`url(${MM})`}}),h.jsxs("div",{className:"content-layer",children:[h.jsxs("div",{className:"char-hud clickable-hud",onClick:()=>D(!0),title:"Abrir Ficha",children:[h.jsx("div",{className:"char-avatar",children:h.jsx("div",{className:"avatar-circle",children:h.jsx("span",{className:"hud-level",children:Pe})})}),h.jsxs("div",{className:"char-info",children:[h.jsx("h2",{className:"char-name",children:e.name}),h.jsxs("span",{className:"char-meta",children:[e.race," // ",e.class]})]})]}),O&&O.active_map&&h.jsx(o1,{sessaoData:O,isMaster:!1}),De&&h.jsx(c1,{rollData:De,onClose:()=>{ue.current=De.timestamp,Y(null)}}),w&&O&&h.jsx(l1,{sessaoId:O.id,playerName:e.name,onClose:()=>we(!1)}),Fe&&h.jsx("div",{className:"levelup-global-overlay",children:h.jsxs("div",{className:"levelup-content",children:[h.jsx("h1",{className:"levelup-title",children:"LEVEL UP!"}),h.jsx("button",{className:"levelup-confirm-btn",onClick:de,children:"CONFIRMAR"})]})}),y.length>0&&m.length===0&&!E&&h.jsxs("div",{className:"upcoming-sessions-banner",children:[h.jsx("h3",{children:"A SESSO VAI COMEAR EM BREVE"}),y.map(fe=>h.jsxs("div",{className:"countdown-row",children:[h.jsx("span",{children:fe.missaoNome}),h.jsx(PM,{targetDate:fe.dataInicio})]},fe.id))]}),m.length>0&&!E&&h.jsxs("div",{className:"active-sessions-banner fade-in",children:[h.jsx("h3",{children:"SESSO EM ANDAMENTO!"}),m.map(fe=>h.jsxs("div",{className:"session-entry-row",children:[h.jsx("span",{children:fe.missaoNome}),h.jsx("button",{className:"btn-enter-session",onClick:()=>ce(fe),children:"ENTRAR AGORA"})]},fe.id))]}),C&&O&&h.jsxs("div",{className:`vtt-status-widget ${C}`,children:[h.jsx("div",{className:"status-indicator"}),h.jsx("div",{className:"status-text",children:C==="waiting"?h.jsxs(h.Fragment,{children:[h.jsx("h4",{children:"AGUARDANDO"}),h.jsx("small",{children:"Conectado..."})]}):h.jsxs(h.Fragment,{children:[h.jsx("h4",{children:"ONLINE"}),h.jsx("small",{children:"Na Mesa"})]})})]}),h.jsx("button",{className:"floating-mission-btn",onClick:()=>U(!0),title:"Quadro de Misses",children:""}),C==="connected"&&h.jsx("button",{className:"floating-dice-btn",onClick:()=>we(!0),title:"Rolar Dados",children:""}),W.length>0&&h.jsxs("button",{className:"floating-sanchez-btn",onClick:be,title:"Resenhas do Sanchez",children:[h.jsx("div",{className:"sanchez-icon-face",style:{backgroundImage:`url(${i1})`}}),Ee>0&&h.jsx("span",{className:"notification-badge",children:Ee})]}),h.jsx(Vg,{isMestre:!1,playerData:e}),P&&h.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>U(!1),children:h.jsxs("div",{className:"ff-modal-content ff-card",onClick:fe=>fe.stopPropagation(),children:[h.jsxs("div",{className:"modal-header-row",children:[h.jsx("h3",{className:"modal-title-ff",children:"QUADRO DE CONTRATOS"}),h.jsx("button",{className:"btn-close-x",onClick:()=>U(!1),children:""})]}),h.jsx("div",{className:"missions-list-player",children:c.map(fe=>h.jsxs("div",{className:`mission-poster-player rank-${fe.rank}`,children:[h.jsxs("div",{className:"mp-header",children:[h.jsx("span",{className:"mp-rank",children:fe.rank}),h.jsx("h4",{children:fe.nome})]}),h.jsx("div",{className:"mp-details",children:h.jsxs("p",{children:[h.jsx("strong",{children:"Recompensa:"})," ",fe.gilRecompensa," Gil"]})}),h.jsxs("div",{className:"mp-actions-row",children:[h.jsx("button",{className:"btn-details-outline",onClick:()=>z(fe),children:"DETALHES"}),h.jsx("button",{className:"btn-candidatar",onClick:()=>ye(fe),children:"ACEITAR"})]})]},fe.id))})]})}),L&&h.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>z(null),style:{zIndex:1e5},children:h.jsxs("div",{className:"ff-modal ff-card detail-view-main",onClick:fe=>fe.stopPropagation(),children:[h.jsxs("div",{className:"detail-header-modern",children:[h.jsx("div",{className:`detail-rank-badge rank-${L.rank}`,children:L.rank}),h.jsxs("div",{className:"detail-title-col",children:[h.jsx("h2",{children:L.nome}),h.jsxs("span",{className:"detail-narrator",children:["Narrador: ",L.mestreNome]})]})]}),h.jsxs("div",{className:"detail-body-grid",children:[h.jsxs("div",{className:"detail-section",children:[h.jsx("label",{className:"section-label",children:"DESCRIO"}),h.jsx("p",{className:"section-text",children:L.descricaoMissao})]}),h.jsxs("div",{className:"detail-section reward-section",children:[h.jsx("label",{className:"section-label",children:"RECOMPENSAS"}),h.jsx("div",{className:"reward-content-box",children:h.jsxs("div",{className:"gil-display-row",children:[h.jsx("span",{className:"gil-icon",children:""})," ",h.jsxs("span",{className:"gil-value",children:[L.gilRecompensa," GIL"]})]})})]})]}),h.jsx("button",{className:"ff-final-close-btn",onClick:()=>z(null),children:"FECHAR"})]})}),oe&&h.jsx("div",{className:"ff-modal-overlay-flex",onClick:()=>se(!1),children:h.jsxs("div",{className:"ff-modal-content ff-card",onClick:fe=>fe.stopPropagation(),children:[h.jsxs("div",{className:"modal-header-row",children:[h.jsx("h3",{className:"modal-title-ff",children:"RESENHAS"}),h.jsx("button",{className:"btn-close-x",onClick:()=>se(!1),children:""})]}),h.jsx("div",{className:"resenhas-list-container",children:W.map(fe=>h.jsx("div",{className:"resenha-row-player",onClick:()=>{me(fe),se(!1)},children:h.jsx("h4",{children:fe.titulo})},fe.id))})]})}),le&&h.jsx("div",{className:"papiro-overlay-full",onClick:()=>me(null),children:h.jsxs("div",{className:"papiro-real-container",style:{backgroundImage:`url(${s1})`},onClick:fe=>fe.stopPropagation(),children:[h.jsx("h2",{className:"papiro-title-real",children:le.titulo}),h.jsx("div",{className:"papiro-body-real",dangerouslySetInnerHTML:{__html:le.conteudo}}),h.jsx("button",{className:"papiro-close-btn",onClick:()=>me(null),children:"FECHAR"})]})}),T&&e&&h.jsx(Lg,{characterData:e,isMaster:!1,onClose:()=>D(!1)})]}),h.jsx("style",{children:`
        .jogador-container { position: relative; width: 100vw; height: 100vh; overflow: hidden; background: #000; font-family: 'Cinzel', serif; color: white; }
        .background-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; z-index: 0; }
        .content-layer { position: relative; z-index: 10; width: 100%; height: 100%; }
        .char-hud { position: absolute; top: 20px; left: 20px; display: flex; align-items: center; gap: 15px; background: rgba(0,0,0,0.8); padding: 15px 25px; border-radius: 50px; border: 1px solid #ffcc00; z-index: 50; cursor: pointer; }
        .avatar-circle { width: 60px; height: 60px; background: #222; border-radius: 50%; border: 2px solid #fff; display: flex; align-items: center; justify-content: center; }
        .hud-level { font-size: 28px; font-weight: bold; color: #ffcc00; }
        .char-info h2 { margin: 0; font-size: 20px; color: #fff; }
        .char-meta { font-size: 12px; color: #00f2ff; }
        
        /* BOTOES ALINHADOS VERTICALMENTE NA ESQUERDA - REDUZIDOS */
        .floating-mission-btn { position: fixed; bottom: 30px; left: 15px; width: 50px; height: 50px; border-radius: 50%; border: 2px solid #ffcc00; background: #000; color: #fff; font-size: 24px; cursor: pointer; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-mission-btn:hover { transform: scale(1.1); box-shadow: 0 0 15px #ffcc00; }

        .floating-dice-btn { position: fixed; bottom: 95px; left: 18px; width: 45px; height: 45px; border-radius: 50%; border: 2px solid #fff; background: #111; color: #fff; font-size: 20px; cursor: pointer; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-dice-btn:hover { border-color: #ffcc00; transform: scale(1.1); box-shadow: 0 0 15px #ffcc00; }
        
        .floating-sanchez-btn { position: fixed; bottom: 155px; left: 15px; width: 50px; height: 50px; border-radius: 50%; border: 2px solid #00f2ff; background: #000; cursor: pointer; z-index: 999; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .floating-sanchez-btn:hover { transform: scale(1.1); box-shadow: 0 0 15px #00f2ff; }

        .sanchez-icon-face { width: 100%; height: 100%; border-radius: 50%; background-size: cover; opacity: 0.8; }
        .floating-sanchez-btn:hover .sanchez-icon-face { opacity: 1; }
        
        .notification-badge { position: absolute; top: -2px; right: -2px; background: #f00; color: #fff; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; border: 1px solid #fff; font-weight: bold; font-size: 10px; z-index: 1000; box-shadow: 0 0 5px #000; }
        
        .vtt-status-widget { position: fixed; top: 20px; right: 20px; background: rgba(0,0,0,0.9); border: 2px solid; padding: 15px; border-radius: 8px; display: flex; align-items: center; gap: 15px; z-index: 90; width: 200px; }
        .vtt-status-widget.waiting { border-color: #ffcc00; }
        .vtt-status-widget.connected { border-color: #0f0; }
        .status-indicator { width: 15px; height: 15px; border-radius: 50%; background: #fff; }
        .waiting .status-indicator { background: #ffcc00; }
        .connected .status-indicator { background: #0f0; }
        .status-text h4 { margin: 0; font-size: 14px; color: #fff; }
        .status-text small { font-size: 11px; color: #ccc; }
        .ff-modal-overlay-flex { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 99999; display: flex; align-items: center; justify-content: center; }
        .ff-modal-content { width: 600px; background: #0d0d15; border: 2px solid #ffcc00; padding: 25px; border-radius: 8px; }
        .modal-header-row { display: flex; justify-content: space-between; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 15px; }
        .modal-title-ff { color: #ffcc00; margin: 0; }
        .btn-close-x { background: none; border: none; color: #fff; font-size: 24px; cursor: pointer; }
        .mission-poster-player { background: rgba(255,255,255,0.05); border: 1px solid #444; padding: 15px; border-radius: 4px; margin-bottom: 15px; }
        .mp-header { display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #333; padding-bottom: 8px; }
        .mp-rank { font-size: 24px; font-weight: bold; color: #ffcc00; }
        .mp-actions-row { display: flex; gap: 10px; margin-top: 15px; }
        .btn-details-outline { flex: 1; border: 1px solid #00f2ff; color: #00f2ff; background: transparent; padding: 10px; cursor: pointer; }
        .btn-candidatar { flex: 2; background: #00f2ff; color: #000; font-weight: bold; border: none; padding: 10px; cursor: pointer; }
        .papiro-overlay-full { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.85); z-index: 100000; display: flex; align-items: center; justify-content: center; }
        .papiro-real-container { width: 800px; height: 600px; background-size: 100% 100%; padding: 100px; color: #3b2b1a; position: relative; }
        .papiro-close-btn { position: absolute; bottom: 50px; right: 100px; cursor: pointer; }
        .active-sessions-banner { position: absolute; top: 120px; left: 50%; transform: translateX(-50%); background: rgba(20, 0, 0, 0.9); border: 2px solid #f00; padding: 20px; border-radius: 8px; text-align: center; z-index: 5; }
        .btn-enter-session { background: #f00; color: #fff; border: none; padding: 10px 20px; cursor: pointer; }
      `})]})}const LM=()=>h.jsx("span",{children:""}),zM=()=>h.jsx("span",{children:""}),UM=()=>h.jsx("span",{children:""}),BM=()=>h.jsx("span",{children:""}),HM=()=>h.jsx("span",{children:""}),qM=()=>h.jsx("span",{children:""});function FM(){const i=Ui(),[e,n]=I.useState(null),[s,o]=I.useState(!0),[c,d]=I.useState([]),[m,g]=I.useState([]),[y,x]=I.useState(null),[E,N]=I.useState(new Date),[P,U]=I.useState(!1),[L,z]=I.useState(!1),[W,J]=I.useState(null),oe=I.useRef(0),se=I.useRef(null);return I.useEffect(()=>{se.current=e},[e]),I.useEffect(()=>{let le=()=>{};const me=rf(It,C=>{if(C){console.log("MestreVTT: Mestre Identificado ID:",C.uid);const R=Mn(Lt(Ne,"sessoes"),wa("mestreId","==",C.uid));le=kn(R,O=>{const T=O.docs.map(D=>({id:D.id,...D.data()})).find(D=>{const w=new Date,we=new Date(D.expiraEm);return w<=we});if(T&&(n(T),g(T.connected_players||[]),T.latest_roll)){const D=T.latest_roll;D.timestamp>oe.current&&J(w=>!w||w.timestamp!==D.timestamp?D:w)}o(!1)},O=>{console.error("Erro no listener de sesso:",O),o(!1)})}else o(!1),i("/login")});return()=>{me(),le()}},[i]),I.useEffect(()=>{if(e?.id)return Ot(Ze(Ne,"sessoes",e.id),{dm_online:!0}).catch(le=>console.error("Erro ao definir DM Online:",le)),()=>{Ot(Ze(Ne,"sessoes",e.id),{dm_online:!1}).catch(le=>console.error("Erro ao definir DM Offline:",le))}},[e?.id]),I.useEffect(()=>{if(!e||!e.participantes)return;const le=Mn(Lt(Ne,"characters")),me=kn(le,C=>{const O=C.docs.map(k=>({id:k.id,...k.data()})).filter(k=>e.participantes.includes(k.name));d(O)});return()=>me()},[e?.id]),I.useEffect(()=>{const le=setInterval(()=>N(new Date),1e3);return()=>clearInterval(le)},[]),s?h.jsxs("div",{style:{background:"#000",height:"100vh",width:"100vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[h.jsx("img",{src:Cf,width:"100",alt:"Loading"}),h.jsx("p",{style:{color:"#ffcc00",marginTop:"20px",fontFamily:"serif"},children:"SINTONIZANDO TER..."})]}):e?h.jsxs("div",{className:"mestre-vtt-container",children:[h.jsx("div",{className:"mestre-bg-layer",style:{backgroundImage:`url(${a1})`}}),h.jsxs("div",{className:"dm-players-sidebar",children:[h.jsx("h3",{className:"sidebar-title",children:"AVENTUREIROS"}),h.jsxs("div",{className:"players-list-scroll",children:[c.map(le=>{const me=m.includes(le.uid),C=le.character_sheet?.imgUrl;return h.jsxs("div",{className:`mini-player-card ${me?"online":"offline"}`,onClick:()=>x(le),title:"Clique para editar ficha",children:[h.jsxs("div",{className:"mini-avatar",children:[C?h.jsx("div",{className:"avatar-img",style:{backgroundImage:`url(${C})`}}):h.jsx("div",{className:"avatar-placeholder",children:le.name.charAt(0)}),h.jsx("div",{className:`status-dot ${me?"green":"gray"}`})]}),h.jsxs("div",{className:"mini-info",children:[h.jsx("span",{className:"p-name",children:le.name}),h.jsxs("span",{className:"p-meta",children:[le.race," // ",le.class]}),h.jsxs("span",{className:"p-lvl",children:["LVL ",le.character_sheet?.basic_info?.level||1]})]})]},le.id)}),c.length===0&&h.jsx("div",{className:"empty-slot",children:"Aguardando aventureiros..."})]})]}),h.jsxs("div",{className:"session-status-top",children:[h.jsx("div",{className:"status-indicator active"}),h.jsxs("div",{className:"status-info",children:[h.jsxs("h2",{children:["SESSO ATIVA: ",e.missaoNome]}),h.jsxs("p",{children:["Mestre Online  ",m.length," Jogadores Conectados  ",E.toLocaleTimeString()]})]})]}),h.jsx(o1,{sessaoData:e,isMaster:!0,showManager:P,onCloseManager:()=>U(!1)}),h.jsx("div",{className:"vtt-workspace",children:!e.active_map&&h.jsx("div",{className:"empty-tabletop-msg",children:"MESA DE ESTRATGIA"})}),W&&h.jsx(c1,{rollData:W,onClose:()=>{oe.current=W.timestamp,J(null)}}),L&&h.jsx(l1,{sessaoId:e.id,playerName:"MESTRE",onClose:()=>z(!1)}),h.jsxs("div",{className:"dm-tools-dock",children:[h.jsxs("div",{className:"tool-group",children:[h.jsx(Vg,{isMestre:!0}),h.jsx("div",{className:"tool-label",children:"BAZAR"})]}),h.jsxs("div",{className:"tool-group",children:[h.jsx(r1,{}),h.jsx("div",{className:"tool-label",children:"FORJA"})]}),h.jsxs("div",{className:"tool-group",children:[h.jsx("button",{className:"tool-btn-placeholder",onClick:()=>U(!0),title:"Gerenciar Mapas",children:h.jsx(LM,{})}),h.jsx("div",{className:"tool-label",children:"TABLETOP"})]}),h.jsxs("div",{className:"tool-group",children:[h.jsx("button",{className:"tool-btn-placeholder",onClick:()=>z(!0),children:h.jsx(zM,{})}),h.jsx("div",{className:"tool-label",children:"DADOS"})]}),h.jsxs("div",{className:"tool-group",children:[h.jsx("button",{className:"tool-btn-placeholder",onClick:()=>alert("Em breve: Gerenciador de Cenrios"),children:h.jsx(UM,{})}),h.jsx("div",{className:"tool-label",children:"CENRIOS"})]}),h.jsxs("div",{className:"tool-group",children:[h.jsx("button",{className:"tool-btn-placeholder",onClick:()=>alert("Em breve: Tokens de Monstros"),children:h.jsx(BM,{})}),h.jsx("div",{className:"tool-label",children:"MONSTROS"})]}),h.jsxs("div",{className:"tool-group",children:[h.jsx("button",{className:"tool-btn-placeholder",onClick:()=>alert("Em breve: Tokens de NPCs"),children:h.jsx(HM,{})}),h.jsx("div",{className:"tool-label",children:"NPCS"})]}),h.jsxs("div",{className:"tool-group",children:[h.jsx("button",{className:"tool-btn-placeholder",onClick:()=>alert("Em breve: Tokens de Jogadores"),children:h.jsx(qM,{})}),h.jsx("div",{className:"tool-label",children:"JOGADORES"})]})]}),y&&h.jsx(Lg,{characterData:y,isMaster:!0,onClose:()=>x(null)}),h.jsx("style",{children:`
        .mestre-vtt-container { width: 100vw; height: 100vh; overflow: hidden; position: relative; background: #000; font-family: 'Cinzel', serif; color: #fff; }
        .mestre-bg-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0.4; z-index: 0; }
        
        .dm-players-sidebar { position: absolute; top: 20px; left: 20px; width: 280px; background: rgba(0, 10, 20, 0.95); border: 2px solid #ffcc00; border-radius: 8px; padding: 15px; z-index: 50; max-height: 80vh; display: flex; flex-direction: column; box-shadow: 0 0 30px rgba(0,0,0,0.8); }
        .sidebar-title { color: #ffcc00; font-size: 16px; border-bottom: 1px solid #444; padding-bottom: 10px; margin-bottom: 15px; text-align: center; letter-spacing: 2px; }
        .players-list-scroll { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; scrollbar-width: none; }
        
        .mini-player-card { display: flex; align-items: center; padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid #333; border-radius: 4px; cursor: pointer; transition: 0.2s; }
        .mini-player-card:hover { border-color: #ffcc00; background: rgba(255, 204, 0, 0.1); }
        .mini-player-card.online { border-left: 3px solid #00f2ff; background: rgba(0, 242, 255, 0.05); }
        .mini-player-card.offline { border-left: 3px solid #666; opacity: 0.7; filter: grayscale(0.8); }
        
        .mini-avatar { position: relative; margin-right: 12px; flex-shrink: 0; }
        .avatar-img { width: 40px; height: 40px; border-radius: 50%; background-size: cover; border: 1px solid #fff; }
        .avatar-placeholder { width: 40px; height: 40px; border-radius: 50%; background: #222; border: 1px solid #555; display: flex; align-items: center; justify-content: center; font-weight: bold; font-family: sans-serif; }
        .status-dot { width: 10px; height: 10px; border-radius: 50%; position: absolute; bottom: 0; right: 0; border: 1px solid #000; }
        .status-dot.green { background: #00f2ff; box-shadow: 0 0 5px #00f2ff; }
        .status-dot.gray { background: #666; }
        
        .mini-info { display: flex; flex-direction: column; justify-content: center; overflow: hidden; }
        .p-name { font-size: 14px; font-weight: bold; color: #fff; line-height: 1.2; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .p-meta { font-size: 10px; color: #aaa; margin-top: 2px; text-transform: uppercase; }
        .p-lvl { font-size: 10px; color: #ffcc00; font-weight: bold; margin-top: 2px; }
        
        .empty-slot { font-size: 12px; color: #666; text-align: center; padding: 20px 0; font-style: italic; }
        
        .session-status-top { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.8); border: 1px solid #00f2ff; padding: 10px 30px; border-radius: 30px; display: flex; align-items: center; gap: 15px; z-index: 40; box-shadow: 0 0 20px rgba(0, 242, 255, 0.2); }
        .status-indicator { width: 12px; height: 12px; background: #00f2ff; border-radius: 50%; box-shadow: 0 0 10px #00f2ff; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
        .status-info h2 { margin: 0; font-size: 16px; color: #fff; letter-spacing: 1px; }
        .status-info p { margin: 0; font-size: 10px; color: #00f2ff; text-transform: uppercase; letter-spacing: 1px; }
        
        .vtt-workspace { position: relative; z-index: 10; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; pointer-events: none; }
        .empty-tabletop-msg { font-size: 30px; color: rgba(255,255,255,0.1); font-weight: bold; letter-spacing: 5px; }
        
        .dm-tools-dock { position: absolute; right: 20px; bottom: 20px; display: flex; flex-direction: column; gap: 15px; z-index: 60; align-items: flex-end; }
        .tool-group { display: flex; align-items: center; gap: 10px; flex-direction: row-reverse; }
        .tool-label { background: rgba(0,0,0,0.8); padding: 4px 8px; border-radius: 4px; font-size: 10px; color: #ffcc00; opacity: 0; transition: 0.2s; pointer-events: none; transform: translateX(10px); }
        .tool-group:hover .tool-label { opacity: 1; transform: translateX(0); }
        
        .dm-tools-dock .bazar-trigger-btn, .dm-tools-dock .forja-trigger-btn { position: relative; bottom: auto; right: auto; margin: 0; box-shadow: 0 0 10px #000; width: 60px; height: 60px; }
        
        .tool-btn-placeholder { width: 60px; height: 60px; border-radius: 50%; background: #111; border: 2px solid #555; color: #fff; font-size: 24px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s; box-shadow: 0 0 10px #000; }
        .tool-btn-placeholder:hover { border-color: #ffcc00; color: #ffcc00; box-shadow: 0 0 20px #ffcc00; transform: scale(1.1); }
      `})]}):h.jsxs("div",{style:{width:"100vw",height:"100vh",background:"#000",color:"#f44",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"20px",fontFamily:"serif"},children:[h.jsx("h2",{children:"NENHUMA SESSO ATIVA ENCONTRADA"}),h.jsx("button",{onClick:()=>i("/mestre"),style:{padding:"10px 20px",background:"#ffcc00",border:"none",cursor:"pointer",fontWeight:"bold"},children:"VOLTAR AO DASHBOARD"})]})}const GM=({user:i,initializing:e,children:n})=>e?null:i&&i.email==="fffvtt10@gmail.com"?n:h.jsx(yx,{to:"/admin-login"});function KM(){const[i,e]=I.useState(!0),[n,s]=I.useState(null);return I.useEffect(()=>rf(It,c=>{s(c),e(!1)}),[]),i?h.jsxs("div",{style:{height:"100vh",width:"100vw",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#000",overflow:"hidden"},children:[h.jsx("img",{src:Cf,alt:"Loading...",style:{width:"100px",marginBottom:"20px",filter:"drop-shadow(0 0 10px #ffcc00)"}}),h.jsx("div",{style:{width:"200px",height:"4px",background:"#333",borderRadius:"2px",overflow:"hidden"},children:h.jsx("div",{className:"progress-bar"})}),h.jsx("p",{style:{marginTop:"10px"},children:"SINTONIZANDO TER..."}),h.jsx("style",{children:`
          .progress-bar { height: 100%; background: #ffcc00; width: 0%; box-shadow: 0 0 10px #ffcc00; animation: fillProgress 2s ease-in-out forwards; }
          p { color: #ffcc00; font-family: 'serif'; font-size: 10px; letter-spacing: 3px; animation: fadeText 1s infinite alternate; }
          @keyframes fillProgress { from { width: 0%; } to { width: 100%; } }
          @keyframes fadeText { from { opacity: 0.4; } to { opacity: 1; } }
        `})]}):h.jsxs($S,{children:[h.jsx(Xa,{path:"/",element:h.jsx(bM,{})}),h.jsx(Xa,{path:"/login",element:h.jsx(_M,{})}),h.jsx(Xa,{path:"/mestre",element:h.jsx(NM,{})}),h.jsx(Xa,{path:"/mestre-vtt",element:h.jsx(FM,{})}),h.jsx(Xa,{path:"/create-character",element:h.jsx(DM,{})}),h.jsx(Xa,{path:"/jogador-vtt",element:h.jsx(VM,{})}),h.jsx(Xa,{path:"/admin-login",element:h.jsx(xM,{})}),h.jsx(Xa,{path:"/admin",element:h.jsx(GM,{user:n,initializing:i,children:h.jsx(EM,{})})}),h.jsx(Xa,{path:"*",element:h.jsx(yx,{to:"/"})})]})}JT.createRoot(document.getElementById("root")).render(h.jsx(qT.StrictMode,{children:h.jsx(bw,{children:h.jsx(KM,{})})}));
